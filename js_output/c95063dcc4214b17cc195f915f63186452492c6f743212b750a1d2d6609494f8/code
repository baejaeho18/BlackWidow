/**
 * @name @tencent/creative-player-web-v
 * @version 4.1.13
 * @time 2024-10-28 16:31:43
 */

!function(t,e){"use strict";var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},o(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var n,r,a,s,d,l,c,p,u,h,f,v,m,y,g,_,A,E,C,I,x,T,b,L,P,N,D=function(){return D=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},D.apply(this,arguments)};function O(t,e){var o={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(o[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(o[i[n]]=t[i[n]])}return o}function w(t,e,o,i){return new(o||(o=Promise))((function(n,r){function a(t){try{d(i.next(t))}catch(t){r(t)}}function s(t){try{d(i.throw(t))}catch(t){r(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(a,s)}d((i=i.apply(t,e||[])).next())}))}function S(t,e){var o,i,n,r,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(d){return function(s){if(o)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(o=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){a.label=s[1];break}if(6===s[0]&&a.label<n[1]){a.label=n[1],n=s;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(s);break}n[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],i=0}finally{o=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,d])}}}function R(t,e,o){if(o||2===arguments.length)for(var i,n=0,r=e.length;n<r;n++)!i&&n in e||(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError,function(t){t.LD="LD",t.HT="HT",t.ZC="ZC",t.CZC="CZC",t.ZT="ZT",t.KB="KB",t.PSJ="PSJ",t.PLJ="PLJ",t.PPB="PPB",t.PVL="PVL",t.PDF="PDF",t.BS="BS",t.VIN="VIN",t.PHLS="PHLS",t.DER="DER",t.YXT="YXT"}(n||(n={})),function(t){t.LD="WL",t.KB="WK",t.HT="WH"}(r||(r={})),function(t){t[t.PRE=1]="PRE",t[t.TAIL=2]="TAIL",t[t.ANCHOR=3]="ANCHOR",t[t.PAUSE=4]="PAUSE",t[t.PROGRESS_PREVIEW=5]="PROGRESS_PREVIEW",t[t.VIDEO_RESOLUTION=6]="VIDEO_RESOLUTION",t[t.DYNAMIC_MID=7]="DYNAMIC_MID"}(s||(s={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.NOT_LOGIN=0]="NOT_LOGIN",t[t.LOGIN=1]="LOGIN",t[t.HLW_VIP=2]="HLW_VIP",t[t.TV_VIP=9]="TV_VIP",t[t.SPORTS_VIP=10]="SPORTS_VIP",t[t.SPORTS_SVIP=12]="SPORTS_SVIP"}(d||(d={})),function(t){t[t.GUEST=0]="GUEST",t[t.QQ=1]="QQ",t[t.WX=2]="WX",t[t.PHONE=3]="PHONE"}(l||(l={})),function(t){t[t.OK=0]="OK"}(c||(c={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.PRE=1]="PRE",t[t.BROADCAST=2]="BROADCAST",t[t.TAIL=3]="TAIL",t[t.PAUSE=4]="PAUSE",t[t.LOADING=5]="LOADING",t[t.PROGRESS_PREVIEW=6]="PROGRESS_PREVIEW",t[t.VIDEO_RESOLUTION=7]="VIDEO_RESOLUTION",t[t.MID=8]="MID",t[t.CREATIVE_MID=9]="CREATIVE_MID",t[t.HLS_MID=10]="HLS_MID",t[t.CORNER=11]="CORNER",t[t.LIVE_CORNER=12]="LIVE_CORNER",t[t.VIDEO_IN=13]="VIDEO_IN",t[t.WATCH_BUY=14]="WATCH_BUY",t[t.ANCHOR_EMPTY=15]="ANCHOR_EMPTY",t[t.NON_STANDARD=16]="NON_STANDARD",t[t.DYNAMIC_MID=17]="DYNAMIC_MID",t[t.CONTINUED_POST=18]="CONTINUED_POST"}(p||(p={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.CLICK=1]="CLICK",t[t.SCAN=2]="SCAN"}(u||(u={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.ORIGIN_EXPOSURE=1]="ORIGIN_EXPOSURE",t[t.EXPOSURE=2]="EXPOSURE",t[t.PLAY_BACK=3]="PLAY_BACK",t[t.EMPTY=4]="EMPTY",t[t.EFFECT=5]="EFFECT",t[t.FEEDBACK=6]="FEEDBACK",t[t.CLICK=7]="CLICK",t[t.RANGE_EXPOSURE=8]="RANGE_EXPOSURE",t[t.RANGE_PLAY=9]="RANGE_PLAY",t[t.PLUGIN=10]="PLUGIN"}(h||(h={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.COMMON_EXPOSURE_CLICK=1]="COMMON_EXPOSURE_CLICK",t[t.HEADER_CLICK=2]="HEADER_CLICK",t[t.ACTION_BTN_CLICK=3]="ACTION_BTN_CLICK",t[t.POSTER_CLICK=4]="POSTER_CLICK",t[t.COMMON_PLAY=5]="COMMON_PLAY",t[t.COMMON_DOWNLOAD=6]="COMMON_DOWNLOAD",t[t.COMMON=7]="COMMON",t[t.SKIP_CLICK=9]="SKIP_CLICK"}(f||(f={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.PICTURE=1]="PICTURE",t[t.QRCODE=2]="QRCODE"}(v||(v={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.IMAGE=1]="IMAGE",t[t.VIDEO=2]="VIDEO"}(m||(m={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VIDEO_TIME=1]="VIDEO_TIME",t[t.TIMESTAMP=2]="TIMESTAMP"}(y||(y={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.LEFT_TOP=1]="LEFT_TOP",t[t.LEFT_MIDDLE=2]="LEFT_MIDDLE",t[t.LEFT_BOTTOM=3]="LEFT_BOTTOM",t[t.RIGHT_MIDDLE=4]="RIGHT_MIDDLE"}(g||(g={})),function(t){t.SD="sd",t.HD="hd",t.SHD="shd",t.FHD="fhd",t.UHD="uhd",t.HDR10="hdr10",t.DOLBY_VISION="dolby"}(_||(_={})),(a={})[_.SD]=_.HD,a[_.HD]=_.HD,a[_.SHD]=_.SHD,a[_.FHD]=_.FHD,a[_.UHD]=_.FHD,a[_.HDR10]=_.FHD,a[_.DOLBY_VISION]=_.FHD,function(t){t[t.NORMAL=0]="NORMAL",t[t.SOLO=1]="SOLO"}(A||(A={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.FIX=1]="FIX",t[t.FIX_REALTIME=2]="FIX_REALTIME",t[t.DYNAMIC=3]="DYNAMIC"}(E||(E={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.LEFT_BOTTOM=1]="LEFT_BOTTOM",t[t.RIGHT_BOTTOM=2]="RIGHT_BOTTOM"}(C||(C={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.INTEGRATE=1]="INTEGRATE",t[t.DIRECTLY=2]="DIRECTLY"}(I||(I={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.CARD_BACKGROUND=1]="CARD_BACKGROUND",t[t.CARD_NO_BACKGROUND=2]="CARD_NO_BACKGROUND"}(x||(x={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.RIGHT_VERTICAL=1]="RIGHT_VERTICAL",t[t.RIGHT_HORIZONTAL=2]="RIGHT_HORIZONTAL",t[t.LEFT_HORIZONTAL=3]="LEFT_HORIZONTAL",t[t.LEFT_HORIZONTAL_BROKEN=4]="LEFT_HORIZONTAL_BROKEN"}(T||(T={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.SSO=1]="SSO"}(b||(b={}));var M,V,k=((L={})[r.LD]=p.PRE,L[r.KB]=p.BROADCAST,L[r.HT]=p.TAIL,L),U=((P={})[n.LD]=p.PRE,P[n.HT]=p.TAIL,P[n.ZC]=p.MID,P[n.CZC]=p.CREATIVE_MID,P[n.ZT]=p.PAUSE,P[n.KB]=p.BROADCAST,P[n.PSJ]=p.CORNER,P[n.PLJ]=p.LIVE_CORNER,P[n.PPB]=p.PROGRESS_PREVIEW,P[n.PVL]=p.LOADING,P[n.PDF]=p.VIDEO_RESOLUTION,P[n.BS]=p.WATCH_BUY,P[n.VIN]=p.VIDEO_IN,P[n.PHLS]=p.HLS_MID,P[n.DER]=p.ANCHOR_EMPTY,P[n.YXT]=p.CONTINUED_POST,P),B=((N={})[p.PRE]="preAd",N[p.BROADCAST]="preAd",N[p.TAIL]="postAd",N[p.MID]="ZC",N[p.PAUSE]="ZT",N),H={toAdCoreType:function(t){var e=U[t];if(e)return e;if(e=k[t])return e;var o=Object.entries(B).find((function(e){return e[1]===t}));return o?Number(o[0]):p.UNKNOWN},toAdTypeV:function(t){var e=Object.entries(U).find((function(e){return e[1]===t}));if(e)return e[0]},toAdTypeM:function(t){var e=Object.entries(k).find((function(e){return e[1]===t}));if(e)return e[0]},toThumbPlayerAdType:function(t){return B[t]},getAdScene:function(t){if("number"==typeof t)return t;var e=H.toAdCoreType(t);return e===p.MID?s.DYNAMIC_MID:e===p.PRE?s.PRE:e===p.TAIL?s.TAIL:s.PRE}};!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.REQUEST=1]="REQUEST",t[t.EXPOSURE=2]="EXPOSURE",t[t.CLICK=3]="CLICK",t[t.FEEDBACK=4]="FEEDBACK"}(M||(M={}));var z=((V={})[s.PRE]="pre_ad_params",V[s.TAIL]="tail_ad_params",V[s.ANCHOR]="anchor_ad_params",V[s.PAUSE]="pause_ad_params",V[s.PROGRESS_PREVIEW]="progress_preview_ad_params",V[s.VIDEO_RESOLUTION]="video_resolution_ad_params",V[s.DYNAMIC_MID]="mid_ad_params",V);function K(t){var e;if(!t)return"";var o=document.createElement("a");o.href=t;var i=o.search||"";if(!i)return t;var n=i.replace(/^\?/,"").split("&");return n.sort((function(){return.5-Math.random()>0?1:-1})),n[0]&&/^vkey/.test(n[0])&&n.length>1&&(e=[n[1],n[0]],n[0]=e[0],n[1]=e[1]),i=(i=n.join("&")).replace(/sdtfrom=&|[&]?sdtfrom=$/,""),o.href.replace(o.search,"?".concat(i))}function $(t){return D(D({},t),{file_size:Number(t.file_size),height:Number(t.height),width:Number(t.width)})}function G(t){var e=t.video;return e?D(D({},$(e)),{url:K(e.url),duration:Number(e.duration)/1e3}):null}function Y(t){var e=t.image;return e?$(e):null}for(var W={L:1,M:0,Q:3,H:2},F={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;F.getBCHDigit(e)-F.getBCHDigit(F.G15)>=0;)e^=F.G15<<F.getBCHDigit(e)-F.getBCHDigit(F.G15);return(t<<10|e)^F.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;F.getBCHDigit(e)-F.getBCHDigit(F.G18)>=0;)e^=F.G18<<F.getBCHDigit(e)-F.getBCHDigit(F.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!==t;)e+=1,t>>>=1;return e},getPatternPosition:function(t){return F.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,o){switch(t){case 0:return(e+o)%2==0;case 1:return e%2==0;case 2:return o%3==0;case 3:return(e+o)%3==0;case 4:return(Math.floor(e/2)+Math.floor(o/3))%2==0;case 5:return e*o%2+e*o%3==0;case 6:return(e*o%2+e*o%3)%2==0;case 7:return(e*o%3+(e+o)%2)%2==0;default:throw new Error("bad maskPattern:".concat(t))}},getErrorCorrectPolynomial:function(t){for(var e=new tt([1],0),o=0;o<t;o++)e=e.multiply(new tt([1,Q.gexp(o)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw new Error("mode:".concat(t))}else if(e<27)switch(t){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw new Error("mode:".concat(t))}else{if(!(e<41))throw new Error("type:".concat(e));switch(t){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw new Error("mode:".concat(t))}}},getLostPoint:function(t){for(var e=t.getModuleCount(),o=0,i=0;i<e;i++)for(var n=0;n<e;n++){for(var r=0,a=t.isDark(i,n),s=-1;s<=1;s++)if(!(i+s<0||e<=i+s))for(var d=-1;d<=1;d++)n+d<0||e<=n+d||0===s&&0===d||a===t.isDark(i+s,n+d)&&(r+=1);r>5&&(o+=3+r-5)}for(i=0;i<e-1;i++)for(n=0;n<e-1;n++){var l=0;t.isDark(i,n)&&(l+=1),t.isDark(i+1,n)&&(l+=1),t.isDark(i,n+1)&&(l+=1),t.isDark(i+1,n+1)&&(l+=1),0!==l&&4!==l||(o+=3)}for(i=0;i<e;i++)for(n=0;n<e-6;n++)t.isDark(i,n)&&!t.isDark(i,n+1)&&t.isDark(i,n+2)&&t.isDark(i,n+3)&&t.isDark(i,n+4)&&!t.isDark(i,n+5)&&t.isDark(i,n+6)&&(o+=40);for(n=0;n<e;n++)for(i=0;i<e-6;i++)t.isDark(i,n)&&!t.isDark(i+1,n)&&t.isDark(i+2,n)&&t.isDark(i+3,n)&&t.isDark(i+4,n)&&!t.isDark(i+5,n)&&t.isDark(i+6,n)&&(o+=40);var c=0;for(n=0;n<e;n++)for(i=0;i<e;i++)t.isDark(i,n)&&(c+=1);return o+Math.abs(100*c/e/e-50)/5*10}},q=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],j=function(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var o=e.toString().match(/android ([0-9]\.[0-9])/i);(null==o?void 0:o[1])&&(t=parseFloat(o[1]))}return t},Q={glog:function(t){if(t<1)throw new Error("glog(".concat(t,")"));return Q.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return Q.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},Z=0;Z<8;Z++)Q.EXP_TABLE[Z]=1<<Z;for(Z=8;Z<256;Z++)Q.EXP_TABLE[Z]=Q.EXP_TABLE[Z-4]^Q.EXP_TABLE[Z-5]^Q.EXP_TABLE[Z-6]^Q.EXP_TABLE[Z-8];for(Z=0;Z<255;Z++)Q.LOG_TABLE[Q.EXP_TABLE[Z]]=Z;var X=function(){function t(t){this.mode=4,this.data=t,this.parsedData=[];for(var e=0,o=this.data.length;e<o;e++){var i=[],n=this.data.charCodeAt(e);n>65536?(i[0]=240|(1835008&n)>>>18,i[1]=128|(258048&n)>>>12,i[2]=128|(4032&n)>>>6,i[3]=128|63&n):n>2048?(i[0]=224|(61440&n)>>>12,i[1]=128|(4032&n)>>>6,i[2]=128|63&n):n>128?(i[0]=192|(1984&n)>>>6,i[1]=128|63&n):i[0]=n,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!==this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}return t.prototype.getLength=function(){return this.parsedData.length},t.prototype.write=function(t){for(var e=0,o=this.parsedData.length;e<o;e++)t.put(this.parsedData[e],8)},t}(),J=function(){function t(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}return t.createData=function(e,o,i){for(var n=et.getRSBlocks(e,o),r=new ot,a=0;a<i.length;a++){var s=i[a];r.put(s.mode,4),r.put(s.getLength(),F.getLengthInBits(s.mode,e)),s.write(r)}var d=0;for(a=0;a<n.length;a++)d+=n[a].dataCount;if(r.getLengthInBits()>8*d)throw new Error("code length overflow. (".concat(r.getLengthInBits(),">").concat(8*d,")"));for(r.getLengthInBits()+4<=8*d&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=8*d||(r.put(t.PAD0,8),r.getLengthInBits()>=8*d));)r.put(t.PAD1,8);return t.createBytes(r,n)},t.createBytes=function(t,e){for(var o=0,i=0,n=0,r=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s++){var d=e[s].dataCount,l=e[s].totalCount-d;i=Math.max(i,d),n=Math.max(n,l),r[s]=new Array(d);for(var c=0;c<r[s].length;c++)r[s][c]=255&t.buffer[c+o];o+=d;var p=F.getErrorCorrectPolynomial(l),u=new tt(r[s],p.getLength()-1).mod(p);for(a[s]=new Array(p.getLength()-1),c=0;c<a[s].length;c++){var h=c+u.getLength()-a[s].length;a[s][c]=h>=0?u.get(h):0}}var f=0;for(c=0;c<e.length;c++)f+=e[c].totalCount;var v=new Array(f),m=0;for(c=0;c<i;c++)for(s=0;s<e.length;s++)c<r[s].length&&(v[m++]=r[s][c]);for(c=0;c<n;c++)for(s=0;s<e.length;s++)c<a[s].length&&(v[m++]=a[s][c]);return v},t.prototype.addData=function(t){var e=new X(t);this.dataList.push(e),this.dataCache=null},t.prototype.isDark=function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error("".concat(t).concat(e));return this.modules[t][e]},t.prototype.getModuleCount=function(){return this.moduleCount},t.prototype.make=function(){this.makeImpl(!1,this.getBestMaskPattern())},t.prototype.makeImpl=function(e,o){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[i][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,o),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,o)},t.prototype.setupPositionProbePattern=function(t,e){for(var o=-1;o<=7;o++)if(!(t+o<=-1||this.moduleCount<=t+o))for(var i=-1;i<=7;i++)e+i<=-1||this.moduleCount<=e+i||(this.modules[t+o][e+i]=0<=o&&o<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==o||6==o)||2<=o&&o<=4&&2<=i&&i<=4)},t.prototype.getBestMaskPattern=function(){for(var t=0,e=0,o=0;o<8;o++){this.makeImpl(!0,o);var i=F.getLostPoint(this);(0==o||t>i)&&(t=i,e=o)}return e},t.prototype.createMovieClip=function(t,e,o){var i=t.createEmptyMovieClip(e,o);this.make();for(var n=0;n<this.modules.length;n++)for(var r=1*n,a=0;a<this.modules[n].length;a++){var s=1*a;this.modules[n][a]&&(i.beginFill(0,100),i.moveTo(s,r),i.lineTo(s+1,r),i.lineTo(s+1,r+1),i.lineTo(s,r+1),i.endFill())}return i},t.prototype.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},t.prototype.setupPositionAdjustPattern=function(){for(var t=F.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var o=0;o<t.length;o++){var i=t[e],n=t[o];if(null==this.modules[i][n])for(var r=-2;r<=2;r++)for(var a=-2;a<=2;a++)this.modules[i+r][n+a]=-2==r||2==r||-2==a||2==a||0==r&&0==a}},t.prototype.setupTypeNumber=function(t){for(var e=F.getBCHTypeNumber(this.typeNumber),o=0;o<18;o++){var i=!t&&1==(e>>o&1);this.modules[Math.floor(o/3)][o%3+this.moduleCount-8-3]=i}for(o=0;o<18;o++)i=!t&&1==(e>>o&1),this.modules[o%3+this.moduleCount-8-3][Math.floor(o/3)]=i},t.prototype.setupTypeInfo=function(t,e){for(var o=this.errorCorrectLevel<<3|e,i=F.getBCHTypeInfo(o),n=0;n<15;n++){var r=!t&&1==(i>>n&1);n<6?this.modules[n][8]=r:n<8?this.modules[n+1][8]=r:this.modules[this.moduleCount-15+n][8]=r}for(n=0;n<15;n++)r=!t&&1==(i>>n&1),n<8?this.modules[8][this.moduleCount-n-1]=r:n<9?this.modules[8][15-n-1+1]=r:this.modules[8][15-n-1]=r;this.modules[this.moduleCount-8][8]=!t},t.prototype.mapData=function(t,e){for(var o=-1,i=this.moduleCount-1,n=7,r=0,a=this.moduleCount-1;a>0;a-=2)for(6===a&&(a-=1);;){for(var s=0;s<2;s++)if(null==this.modules[i][a-s]){var d=!1;r<t.length&&(d=1==(t[r]>>>n&1)),F.getMask(e,i,a-s)&&(d=!d),this.modules[i][a-s]=d,-1==(n-=1)&&(r+=1,n=7)}if((i+=o)<0||this.moduleCount<=i){i-=o,o=-o;break}}},t.PAD0=236,t.PAD1=17,t}(),tt=function(){function t(t,e){if(void 0===t.length)throw new Error("".concat(t.length,"/").concat(e));for(var o=0;o<t.length&&0===t[o];)o+=1;this.num=new Array(t.length-o+e);for(var i=0;i<t.length-o;i++)this.num[i]=t[i+o]}return t.prototype.get=function(t){return this.num[t]},t.prototype.getLength=function(){return this.num.length},t.prototype.multiply=function(e){for(var o=new Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var n=0;n<e.getLength();n++)o[i+n]^=Q.gexp(Q.glog(this.get(i))+Q.glog(e.get(n)));return new t(o,0)},t.prototype.mod=function(e){if(this.getLength()-e.getLength()<0)return this;for(var o=Q.glog(this.get(0))-Q.glog(e.get(0)),i=new Array(this.getLength()),n=0;n<this.getLength();n++)i[n]=this.get(n);for(n=0;n<e.getLength();n++)i[n]^=Q.gexp(Q.glog(e.get(n))+o);return new t(i,0).mod(e)},t}(),et=function(){function t(t,e){this.totalCount=t,this.dataCount=e}return t.getRSBlocks=function(e,o){var i=t.getRsBlockTable(e,o);if(void 0===i)throw new Error("bad rs block @ typeNumber:".concat(e,"/errorCorrectLevel:").concat(o));for(var n=i.length/3,r=[],a=0;a<n;a++)for(var s=i[3*a+0],d=i[3*a+1],l=i[3*a+2],c=0;c<s;c++)r.push(new t(d,l));return r},t.getRsBlockTable=function(e,o){switch(o){case W.L:return t.RS_BLOCK_TABLE[4*(e-1)+0];case W.M:return t.RS_BLOCK_TABLE[4*(e-1)+1];case W.Q:return t.RS_BLOCK_TABLE[4*(e-1)+2];case W.H:return t.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t}(),ot=function(){function t(){this.buffer=[],this.length=0}return t.prototype.get=function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},t.prototype.put=function(t,e){for(var o=0;o<e;o++)this.putBit(1==(t>>>e-o-1&1))},t.prototype.getLengthInBits=function(){return this.length},t.prototype.putBit=function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length+=1},t}(),it=function(){function t(t,e){this._el=t,this._htOption=e}return t.prototype.draw=function(t){for(var e=this._htOption,o=this._el,i=t.getModuleCount(),n=Math.floor(e.width/i),r=Math.floor(e.height/i),a=['<table style="border:0;border-collapse:collapse;">'],s=0;s<i;s++){a.push("<tr>");for(var d=0;d<i;d++)a.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'.concat(n,"px;height:").concat(r,"px;background-color:").concat(t.isDark(s,d)?e.colorDark:e.colorLight,';"></td>'));a.push("</tr>")}a.push("</table>"),o.innerHTML=a.join("");var l=o.childNodes[0],c=(e.width-l.offsetWidth)/2,p=(e.height-l.offsetHeight)/2;c>0&&p>0&&(l.style.margin="".concat(p,"px ").concat(c,"px"))},t.prototype.clear=function(){this._el.innerHTML=""},t}(),nt=function(){function t(t,e){if(this._bIsPainted=!1,this._android=j(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null,this._android&&this._android<=2.1){var o=1/window.devicePixelRatio,i=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,e,n,r,a,s,d,l,c){if("nodeName"in t&&/img/i.test(t.nodeName))for(var p=arguments.length-1;p>=1;p--)arguments[p]=arguments[p]*o;else void 0===l&&(arguments[1]*=o,arguments[2]*=o,arguments[3]*=o,arguments[4]*=o);i.apply(this,arguments)}}}return t.prototype.draw=function(t){var e=this._elImage,o=this._oContext,i=this._htOption,n=t.getModuleCount(),r=i.width/n,a=i.height/n,s=Math.round(r),d=Math.round(a);e.style.display="none",this.clear();for(var l=0;l<n;l++)for(var c=0;c<n;c++){var p=t.isDark(l,c),u=c*r,h=l*a;o.strokeStyle=p?i.colorDark:i.colorLight,o.lineWidth=1,o.fillStyle=p?i.colorDark:i.colorLight,o.fillRect(u,h,r,a),o.strokeRect(Math.floor(u)+.5,Math.floor(h)+.5,s,d),o.strokeRect(Math.ceil(u)-.5,Math.ceil(h)-.5,s,d)}this._bIsPainted=!0},t.prototype.makeImage=function(){this._bIsPainted&&this.safeSetDataURI(this.onMakeImage)},t.prototype.onMakeImage=function(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"},t.prototype.isPainted=function(){return this._bIsPainted},t.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},t.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},t.prototype.safeSetDataURI=function(t,e){var o=this;if(this._fFail=e,this._fSuccess=t,null===this._bSupportDataURI){var i=document.createElement("img"),n=function(){o._bSupportDataURI=!1,o._fFail&&o._fFail.call(o)};return i.onabort=n,i.onerror=n,i.onload=function(){o._bSupportDataURI=!0,o._fSuccess&&o._fSuccess.call(o)},void(i.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===this._bSupportDataURI&&this._fSuccess?this._fSuccess.call(this):!1===this._bSupportDataURI&&this._fFail&&this._fFail.call(this)},t}(),rt="undefined"!=typeof CanvasRenderingContext2D?nt:it,at=function(){function t(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:W.H},"string"==typeof e&&(e={text:e}),e)for(var o in e)this._htOption[o]=e[o];"string"==typeof t&&(t=document.getElementById(t)),this._android=j(),this._el=t,this._oQRCode=null,this._oDrawing=new rt(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}return t.prototype.makeCode=function(t){this._oQRCode=new J(function(t,e){for(var o=1,i=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}(t),n=0,r=q.length;n<=r;n++){var a=0;switch(e){case W.L:a=q[n][0];break;case W.M:a=q[n][1];break;case W.Q:a=q[n][2];break;case W.H:a=q[n][3]}if(i<=a)break;o+=1}if(o>q.length)throw new Error("Too long data");return o}(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._oDrawing.draw(this._oQRCode),this.makeImage()},t.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},t.prototype.clear=function(){this._oDrawing.clear()},t.CorrectLevel=W,t}();function st(t){try{return JSON.stringify(t)}catch(t){return""}}"function"==typeof SuppressedError&&SuppressedError;var dt,lt,ct,pt,ut,ht,ft,vt,mt,yt,gt,_t,At,Et,Ct,It,xt,Tt,bt,Lt,Pt,Nt,Dt,Ot,wt,St,Rt,Mt,Vt="TxpCreativePlayer-rfid",kt="TxpCreativePlayer-vid-url",Ut="frequency_control_data",Bt="TxpCreativePlayer-request-mid-count",Ht=function(t){var e=new RegExp("(?:^|;+|\\s+)".concat(t,"=([^;]*)")),o=document.cookie.match(e);return o?o[1]:""},zt=["width","height","left","right","top","bottom"],Kt="txp_none",$t={},Gt=1,Yt=function(t,e){if(!(null==e?void 0:e.trim()))return!1;var o=e.split(" "),i=t.className.split(" "),n=!0;return o.forEach((function(t){return!(!t||-1!==i.indexOf(t)||(n=!1,0))})),n},Wt=function(t,e){if(t&&(null==e?void 0:e.trim()))return e.split(" ").forEach((function(e){!function(t,e){if(Yt(t,e)){var o=t.className.split(" "),i=o.indexOf(e);o.splice(i,1);var n=t;n.className=o.join(" "),n.className}}(t,e)})),t.className},Ft=function(t,e){if(!t)return"";if(!e||Yt(t,e))return t.className;var o=t;if(!t.className||0===t.className.length)return o.className=e,e;var i=t.className.split(" ");return i.push(e),o.className=i.join(" "),t.className},qt=function(t,e,o,i){void 0===i&&(i=!1),"function"==typeof t.removeEventListener?t.removeEventListener(e,o,i):"function"==typeof t.detachEvent?t.detachEvent("on".concat(e),o,i):t["on".concat(e)]=null},jt=function(t){return Object.entries(t).map((function(t){var e=t[0],o=t[1];return"".concat(e,": ").concat(o,";")})).join("")},Qt=function(t,e,o){if(!t)return"";var i=t;return e?void 0===o?i.getAttribute(e):(i.setAttribute(e,o),o):""},Zt=function(t,e){t&&e&&t.removeAttribute(e)},Xt=function(t,e,o){if(!t||!e)return"";if(void 0===o&&"string"==typeof e){var i={};try{i=document.defaultView.getComputedStyle(t,null)}catch(e){i=t.currentStyle}return i[e]}if("object"==typeof e){var n=e,r=t;Object.entries(n).forEach((function(t){var e=t[0],o=t[1],i=o;zt.includes(e)&&"number"==typeof o&&(i="".concat(o,"px")),r.style[e]=i}))}"string"==typeof e&&"string"==typeof o&&(t.style[e]=/width|height|left|right|top|bottom/i.test(e)&&"number"==typeof o?"".concat(o,"px"):o)},Jt=Ft,te=Wt,ee=function(t){t&&Ft(t,Kt)},oe=function(t){Wt(t,Kt)},ie=function(t,e,o,i){if(void 0===i&&(i=!1),t&&(function(t){if(t.zid)return t.zid;Gt+=1,t.zid=Gt}(t),e&&o)){var n=function(t,e,o){var i=t.zid,n={evt:e};return $t[i]||($t[i]={}),n.cb=function(t){o(t)},$t[i][e]||($t[i][e]=[]),$t[i][e].push(n),n}(t,e,o);"function"==typeof t.addEventListener?t.addEventListener(e,n.cb,i):"function"==typeof t.attachEvent?t.attachEvent(e,n.cb,i):t["on".concat(e)]=n.cb}},ne=function(t,e,o,i){if(void 0===i&&(i=!1),t&&e)if(2===arguments.length){var n=function(t,e){var o=t.zid;return o&&$t[o]?$t[o][e]:[]}(t,e)||[];n.forEach((function(e){qt(t,e.evt,e.cb,!1)})),function(t,e){var o=t.zid;o&&$t[o]&&(e?delete $t[o][e]:delete $t[o])}(t,e)}else arguments.length>2&&qt(t,e,o,i)},re=function(t,e){var o=t;if(o)return void 0!==e&&(o.innerText=e),o.innerText},ae=function(t,e){var o=t;if(o)return void 0!==e&&(o.innerHTML=e),o.innerHTML},se=function(t,e){var o=e.hotArea,i=e.size,n=null!=o?o:{},r=n.height_rate,a=void 0===r?0:r,s=n.margin_bottom_rate,d=void 0===s?0:s,l=n.margin_left_rate,c=void 0===l?0:l,p=n.margin_right_rate,u=void 0===p?0:p,h={position:"absolute",left:"".concat(Math.round(i.width*c),"px"),right:"".concat(Math.round(i.width*u),"px"),bottom:"".concat(Math.round(i.height*d),"px"),height:"".concat(Math.round(i.height*a),"px"),display:"block",cursor:"pointer","pointer-events":"auto"};t.style.cssText=jt(h)},de=function(){function t(){this.eventsMap={}}return t.prototype.on=function(t,e){var o=this;t.split(",").forEach((function(t){o.eventsMap[t]||(o.eventsMap[t]=[]),o.eventsMap[t].push(e)}))},t.prototype.off=function(t,e){var o=this;t.split(",").forEach((function(t){o.removeListener(t,e)}))},t.prototype.emit=function(t){for(var e=this,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var n=[];return this.eventsMap[t]&&this.eventsMap[t].slice().forEach((function(i){try{n.push(i.apply(e,o))}catch(o){n.push(null),e.processError(o,t)}})),n},t.prototype.getEvents=function(t){return this.eventsMap[t]||[]},t.prototype.removeAllListeners=function(){this.eventsMap={}},t.prototype.processError=function(t,e){},t.prototype.removeListener=function(t,e){var o;if(void 0!==e){var i=null===(o=this.eventsMap[t])||void 0===o?void 0:o.findIndex((function(t){return t===e}));i>-1&&this.eventsMap[t].splice(i,1)}else this.eventsMap[t]=[]},t}();function le(){try{var t=localStorage.getItem(Ut);return t?JSON.parse(t):{}}catch(t){}return{}}function ce(t){localStorage.setItem(Ut,JSON.stringify(t))}!function(t){t.LD="LD",t.HT="HT",t.ZC="ZC",t.CZC="CZC",t.ZT="ZT",t.KB="KB",t.PSJ="PSJ",t.PLJ="PLJ",t.PPB="PPB",t.PVL="PVL",t.PDF="PDF",t.BS="BS",t.VIN="VIN",t.PHLS="PHLS",t.DER="DER",t.YXT="YXT"}(dt||(dt={})),function(t){t.LD="WL",t.KB="WK",t.HT="WH"}(lt||(lt={})),function(t){t[t.PRE=1]="PRE",t[t.TAIL=2]="TAIL",t[t.ANCHOR=3]="ANCHOR",t[t.PAUSE=4]="PAUSE",t[t.PROGRESS_PREVIEW=5]="PROGRESS_PREVIEW",t[t.VIDEO_RESOLUTION=6]="VIDEO_RESOLUTION",t[t.DYNAMIC_MID=7]="DYNAMIC_MID"}(pt||(pt={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.NOT_LOGIN=0]="NOT_LOGIN",t[t.LOGIN=1]="LOGIN",t[t.HLW_VIP=2]="HLW_VIP",t[t.TV_VIP=9]="TV_VIP",t[t.SPORTS_VIP=10]="SPORTS_VIP",t[t.SPORTS_SVIP=12]="SPORTS_SVIP"}(ut||(ut={})),function(t){t[t.GUEST=0]="GUEST",t[t.QQ=1]="QQ",t[t.WX=2]="WX",t[t.PHONE=3]="PHONE"}(ht||(ht={})),function(t){t[t.OK=0]="OK"}(ft||(ft={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.PRE=1]="PRE",t[t.BROADCAST=2]="BROADCAST",t[t.TAIL=3]="TAIL",t[t.PAUSE=4]="PAUSE",t[t.LOADING=5]="LOADING",t[t.PROGRESS_PREVIEW=6]="PROGRESS_PREVIEW",t[t.VIDEO_RESOLUTION=7]="VIDEO_RESOLUTION",t[t.MID=8]="MID",t[t.CREATIVE_MID=9]="CREATIVE_MID",t[t.HLS_MID=10]="HLS_MID",t[t.CORNER=11]="CORNER",t[t.LIVE_CORNER=12]="LIVE_CORNER",t[t.VIDEO_IN=13]="VIDEO_IN",t[t.WATCH_BUY=14]="WATCH_BUY",t[t.ANCHOR_EMPTY=15]="ANCHOR_EMPTY",t[t.NON_STANDARD=16]="NON_STANDARD",t[t.DYNAMIC_MID=17]="DYNAMIC_MID",t[t.CONTINUED_POST=18]="CONTINUED_POST"}(vt||(vt={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.CLICK=1]="CLICK",t[t.SCAN=2]="SCAN"}(mt||(mt={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.ORIGIN_EXPOSURE=1]="ORIGIN_EXPOSURE",t[t.EXPOSURE=2]="EXPOSURE",t[t.PLAY_BACK=3]="PLAY_BACK",t[t.EMPTY=4]="EMPTY",t[t.EFFECT=5]="EFFECT",t[t.FEEDBACK=6]="FEEDBACK",t[t.CLICK=7]="CLICK",t[t.RANGE_EXPOSURE=8]="RANGE_EXPOSURE",t[t.RANGE_PLAY=9]="RANGE_PLAY",t[t.PLUGIN=10]="PLUGIN"}(yt||(yt={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.COMMON_EXPOSURE_CLICK=1]="COMMON_EXPOSURE_CLICK",t[t.HEADER_CLICK=2]="HEADER_CLICK",t[t.ACTION_BTN_CLICK=3]="ACTION_BTN_CLICK",t[t.POSTER_CLICK=4]="POSTER_CLICK",t[t.COMMON_PLAY=5]="COMMON_PLAY",t[t.COMMON_DOWNLOAD=6]="COMMON_DOWNLOAD",t[t.COMMON=7]="COMMON",t[t.SKIP_CLICK=9]="SKIP_CLICK"}(gt||(gt={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.PICTURE=1]="PICTURE",t[t.QRCODE=2]="QRCODE"}(_t||(_t={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.IMAGE=1]="IMAGE",t[t.VIDEO=2]="VIDEO"}(At||(At={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VIDEO_TIME=1]="VIDEO_TIME",t[t.TIMESTAMP=2]="TIMESTAMP"}(Et||(Et={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.LEFT_TOP=1]="LEFT_TOP",t[t.LEFT_MIDDLE=2]="LEFT_MIDDLE",t[t.LEFT_BOTTOM=3]="LEFT_BOTTOM",t[t.RIGHT_MIDDLE=4]="RIGHT_MIDDLE"}(Ct||(Ct={})),function(t){t.SD="sd",t.HD="hd",t.SHD="shd",t.FHD="fhd",t.UHD="uhd",t.HDR10="hdr10",t.DOLBY_VISION="dolby"}(It||(It={})),(ct={})[It.SD]=It.HD,ct[It.HD]=It.HD,ct[It.SHD]=It.SHD,ct[It.FHD]=It.FHD,ct[It.UHD]=It.FHD,ct[It.HDR10]=It.FHD,ct[It.DOLBY_VISION]=It.FHD,function(t){t[t.NORMAL=0]="NORMAL",t[t.SOLO=1]="SOLO"}(xt||(xt={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.FIX=1]="FIX",t[t.FIX_REALTIME=2]="FIX_REALTIME",t[t.DYNAMIC=3]="DYNAMIC"}(Tt||(Tt={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.LEFT_BOTTOM=1]="LEFT_BOTTOM",t[t.RIGHT_BOTTOM=2]="RIGHT_BOTTOM"}(bt||(bt={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.INTEGRATE=1]="INTEGRATE",t[t.DIRECTLY=2]="DIRECTLY"}(Lt||(Lt={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.CARD_BACKGROUND=1]="CARD_BACKGROUND",t[t.CARD_NO_BACKGROUND=2]="CARD_NO_BACKGROUND"}(Pt||(Pt={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.RIGHT_VERTICAL=1]="RIGHT_VERTICAL",t[t.RIGHT_HORIZONTAL=2]="RIGHT_HORIZONTAL",t[t.LEFT_HORIZONTAL=3]="LEFT_HORIZONTAL",t[t.LEFT_HORIZONTAL_BROKEN=4]="LEFT_HORIZONTAL_BROKEN"}(Nt||(Nt={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.SSO=1]="SSO"}(Dt||(Dt={})),(Ot={})[lt.LD]=vt.PRE,Ot[lt.KB]=vt.BROADCAST,Ot[lt.HT]=vt.TAIL,(wt={})[dt.LD]=vt.PRE,wt[dt.HT]=vt.TAIL,wt[dt.ZC]=vt.MID,wt[dt.CZC]=vt.CREATIVE_MID,wt[dt.ZT]=vt.PAUSE,wt[dt.KB]=vt.BROADCAST,wt[dt.PSJ]=vt.CORNER,wt[dt.PLJ]=vt.LIVE_CORNER,wt[dt.PPB]=vt.PROGRESS_PREVIEW,wt[dt.PVL]=vt.LOADING,wt[dt.PDF]=vt.VIDEO_RESOLUTION,wt[dt.BS]=vt.WATCH_BUY,wt[dt.VIN]=vt.VIDEO_IN,wt[dt.PHLS]=vt.HLS_MID,wt[dt.DER]=vt.ANCHOR_EMPTY,wt[dt.YXT]=vt.CONTINUED_POST,(St={})[vt.PRE]="preAd",St[vt.BROADCAST]="preAd",St[vt.TAIL]="postAd",St[vt.MID]="ZC",St[vt.PAUSE]="ZT",function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.REQUEST=1]="REQUEST",t[t.EXPOSURE=2]="EXPOSURE",t[t.CLICK=3]="CLICK",t[t.FEEDBACK=4]="FEEDBACK"}(Rt||(Rt={})),(Mt={})[pt.PRE]="pre_ad_params",Mt[pt.TAIL]="tail_ad_params",Mt[pt.ANCHOR]="anchor_ad_params",Mt[pt.PAUSE]="pause_ad_params",Mt[pt.PROGRESS_PREVIEW]="progress_preview_ad_params",Mt[pt.VIDEO_RESOLUTION]="video_resolution_ad_params",Mt[pt.DYNAMIC_MID]="mid_ad_params";var pe=function(t,e){var o,i=null==e?void 0:e[t];if(i){var n=le();null===(o=i.ad_frequency_control_info_list)||void 0===o||o.forEach((function(t){var e=t.ad_frequency_key;e&&(n[e]||(n[e]={ad_frequency_control_time_list:[]}),n[e].ad_frequency_control_time_list.push(Math.floor(Date.now()/1e3)))})),ce(n)}},ue=function(t){var e=le(),o=!1;Object.values(t).forEach((function(t){var i;null===(i=t.ad_frequency_control_info_list)||void 0===i||i.forEach((function(t){var i,n,r=t.ad_frequency_key,a=t.expireTime;if(r&&a&&(null===(n=null===(i=e[r])||void 0===i?void 0:i.ad_frequency_control_time_list)||void 0===n?void 0:n.length)){var s=e[r].ad_frequency_control_time_list.length;e[r].ad_frequency_control_time_list=e[r].ad_frequency_control_time_list.filter((function(t){return t>=a})),o||e[r].ad_frequency_control_time_list.length===s||(o=!0)}}))})),Object.entries(e).forEach((function(t){var i,n=t[0];(null===(i=t[1].ad_frequency_control_time_list)||void 0===i?void 0:i.length)||(delete e[n],o=!0)})),o&&ce(e)};function he(t,e){if(0===e)return t;var o=t.lastIndexOf(".");return"".concat(t.substr(0,o),".").concat(e).concat(t.substring(o))}function fe(t,e,o,i){var n=[];return t.ui.forEach((function(t){if(t.url){var r={};t.url&&-1===t.url.indexOf("".concat(e,".flv"))&&-1===t.url.indexOf("".concat(e,".mp4"))?r.url=t.url+o:r.url=t.url,t.vt&&(r.vt=Math.floor(t.vt));var a=r.url.indexOf("?")>-1?"&":"?";r.url+="".concat(a,"guid=").concat(i.guid,"&sdtfrom=&vkey=").concat(i.vkey),n.push(r.url)}})),n}!function(){var t,e,o,i,n,r=1836,a=-8290,s=2174,d=3198,l=5906,c=-3571,p=2249,u=-693,h=-327,f=-1731,v=1765,m=-5346,y=-4080,g=7512,_=-496,A=2007,E=-1741,C=700,I=-137,x=8366,T=-6006,b=9095,L=2829,P=-6612,N=2907,D=-3683,O=8972,w=5031,S=3738,R=4510,M=6428,V=-4870,k=-5763,U=-132,B=9425,H=9587,z=-3620,K=-955,$=9508,G=-7940,Y=-6629,W=5513,F=5977,q=-4547,j=-3840,Q=-2175,Z=8487,X=-6720,J=6747,tt=6090,et=-9874,ot=-6246,it=9031,nt=2239,rt=-8467,at=-955,st=-2579,dt=-2673,lt=-8067,ct=-359,pt=-7307,ut=291,ht=-5270,ft=-3336,vt=-1623,mt=7936,yt=3769,gt=-239,_t=5156,At=9703,Et=2034,Ct=4093,It=-5537,xt=-657,Tt=6972,bt=-517,Lt=5772,Pt=-3763,Nt=8444,Dt=-4631,Ot=-1401,wt=7370,St=-1755,Rt=-2468,Mt=709,Vt=-7253,kt=8815,Ut=-7188,Bt=2123,Ht=1655,zt=-4280,Kt=-8940,$t=$t||function(t,e){var o={},i=o.a={},n=function(){},c=i.b={c:function(t){for(var e="",o=0;o<4;o++)e+=String.fromCharCode(r+9807-9295^"ॅूॅक़".charCodeAt(o));n.prototype=this;var i=new n;return t&&i.d(t),i.hasOwnProperty(e)||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.c();return t.init.apply(t,arguments),t},init:function(){},d:function(t){for(var e="",o=0;o<8;o++)e+=String.fromCharCode(778^";͙ͥ;͸ͣͤͭ".charCodeAt(o));for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);t.hasOwnProperty(e)&&(this.toString=t.toString)},e:function(){return this.init.prototype.c(this)}},p=i.f=c.c({init:function(t,e){t=this.g=t||[],this.h=null!=e?e:(-2630+a+10924)*t.length},toString:function(t){return(t||h).i(this)},concat:function(t){var e=this.g,o=t.g,i=this.h;if(t=t.h,this.j(),i%(s+-269+-4213+2312))for(var n=0;n<t;n++)e[i+n>>>2]|=(o[n>>>2]>>>24-n%4*8&255)<<24-(i+n)%(-9975+s+-4490+12295)*8;else if(65535<o.length)for(n=0;n<t;n+=4)e[i+n>>>2]=o[n>>>2];else e.push.apply(e,o);return this.h+=t,this},j:function(){var e=this.g,o=this.h;e[o>>>8517+r+-2630-7721]&=r+8309+-4849+4294961999<<32-(r+-8270+6442)*(o%4),e.length=t.ceil(o/4)},e:function(){var t=c.e.call(this);return t.g=this.g.slice(0),t},random:function(e){for(var o=[],i=0;i<e;i+=4)o.push(4294967296*t.random()|0);return new p.init(o,e)}}),u=o.k={},h=u.l={i:function(t){for(var e="",o=0;o<0;o++)e+=String.fromCharCode(368^"".charCodeAt(o));var i=t.g;t=t.h;for(var n=[],r=0;r<t;r++){var a=i[r>>>2]>>>24-r%(d+5624-8818)*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join(e)},parse:function(t){for(var e=t.length,o=[],i=0;i<e;i+=2)o[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new p.init(o,e/2)}},f=u.m={i:function(t){for(var e="",o=0;o<0;o++)e+=String.fromCharCode(2238^"".charCodeAt(o));var i=t.g;t=t.h;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(i[r>>>2]>>>24-r%4*8&255));return n.join(e)},parse:function(t){for(var e=t.length,o=[],i=l-5906;i<e;i++)o[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new p.init(o,e)}},v=u.n={i:function(t){for(var e="",o=0;o<20;o++)e+=String.fromCharCode(149^"ØôùóúçøðñµÀÁÓ¸­µñôáô".charCodeAt(o));try{return decodeURIComponent(escape(f.i(t)))}catch(t){throw Error(e)}},parse:function(t){return f.parse(unescape(encodeURIComponent(t)))}},m=i.o=c.c({p:function(){this.q=new p.init,this.r=r-1836},s:function(t){for(var e="",o=0;o<6;o++)e+=String.fromCharCode(4052^"ྦྷྠྦ྽ྺླ".charCodeAt(o));e==typeof t&&(t=v.parse(t)),this.q.concat(t),this.r+=t.h},t:function(e){var o=this.q,i=o.g,n=o.h,r=this.u,a=n/(4*r);if(e=(a=e?t.ceil(a):t.max((0|a)-this.v,0))*r,n=t.min(4*e,n),e){for(var s=0;s<e;s+=r)this.w(i,s);s=i.splice(0,e),o.h-=n}return new p.init(s,n)},e:function(){var t=c.e.call(this);return t.q=this.q.e(),t},v:0});i.x=m.c({y:c.c(),init:function(t){this.y=this.y.c(t),this.p()},p:function(){m.p.call(this),this.z()},A:function(t){return this.s(t),this.t(),this},B:function(t){return t&&this.s(t),this.C()},u:16,D:function(t){return function(e,o){return new t.init(o).B(e)}},F:function(t){return function(e,o){return new y.HMAC.init(t,o).B(e)}}});var y=o.G={};return o}(Math);function Gt(t){return Yt.call(this,W+2097+8214-15822,t)}function Yt(t){for(var e="",o=-8432+q+12979;o<1;o++)String.fromCharCode(j+Q+Z-50^"ऊ".charCodeAt(o));for(var i="",n=0;n<1;n++)String.fromCharCode(T+3326+4681^"ޭ".charCodeAt(n));for(var A="",W=0;W<1;W++)String.fromCharCode(X+D+d+8449^"Ҡ".charCodeAt(W));for(var Wt="",Ft=0;Ft<1;Ft++)String.fromCharCode(I+-5316+8904^"ഇ".charCodeAt(Ft));for(var qt="",jt=J+3628+tt-16465;jt<1;jt++)String.fromCharCode(146+Z+-1434-5788^"׿".charCodeAt(jt));for(var Qt="",Zt=-1434+et+11308;Zt<1;Zt++)String.fromCharCode(2260^"ࢨ".charCodeAt(Zt));for(var Xt="",Jt=0;Jt<1;Jt++)String.fromCharCode(2890^"ଶ".charCodeAt(Jt));for(var te="",ee=ot+6246;ee<10;ee++)String.fromCharCode(-5316+z+it+358^"ƨƢǶƦǶƧǵǱƧƤ".charCodeAt(ee));for(var oe="",ie=nt+146+4448-6833;ie<1;ie++)String.fromCharCode(2564^"੸".charCodeAt(ie));for(var ne="",re=rt+4448+4019;re<1;re++)String.fromCharCode(2096^"ࡌ".charCodeAt(re));for(var ae="",se=at+-3155+-9555+13665;se<1;se++)String.fromCharCode(E+-3155+6442^"ٶ".charCodeAt(se));for(var de="",le=st+2579;le<1;le++)String.fromCharCode(L+9851-9876^"ઈ".charCodeAt(le));for(var ce="",pe=0;pe<1;pe++)String.fromCharCode(z+4223^"ȧ".charCodeAt(pe));for(var ue="",he=0;he<1;he++)String.fromCharCode(dt+E+9851-4347^"о".charCodeAt(he));for(var fe="",ve=0;ve<1;ve++)String.fromCharCode(lt+w+$-4523^"ߡ".charCodeAt(ve));for(var me="",ye=-215+P+C+6127;ye<1;ye++)String.fromCharCode(889^"̅".charCodeAt(ye));for(var ge="",_e=ct+-6842+7201;_e<0;_e++)String.fromCharCode(g+pt+3363^"".charCodeAt(_e));for(var Ae="",Ee=B+ut+ht-4446;Ee<0;Ee++)String.fromCharCode(U+y+4989^"".charCodeAt(Ee));for(var Ce="",Ie=-7878+V+y+16828;Ie<0;Ie++)String.fromCharCode(3628+ft+2321^"".charCodeAt(Ie));for(var xe="",Te=vt+mt+yt-10082;Te<4;Te++)String.fromCharCode(gt+5817-5364^"´¹²¯".charCodeAt(Te));for(var be="",Le=M+h+-1665-4436;Le<4;Le++)String.fromCharCode(_t+146+-4109+529^"ۘە۞ۃ".charCodeAt(Le));for(var Pe="",Ne=At+9456-19159;Ne<4;Ne++)String.fromCharCode(1542^"٨٩٨٣".charCodeAt(Ne));for(var De="",Oe=K+Y+S+3846;Oe<2;Oe++)String.fromCharCode(168^"ÁÌ".charCodeAt(Oe));for(var we="",Se=G+7940;Se<3;Se++)String.fromCharCode(1698^"ۆۋ۔".charCodeAt(Se));for(var Re="",Me=0;Me<10;Me++)String.fromCharCode(9964+Et+-1265-7812^"ଶଋ୑୞ଈ଍଍୑୙ଶ".charCodeAt(Me));for(var Ve="",ke=0;ke<6;ke++)String.fromCharCode(1454^"יׇ׀׊ׁי".charCodeAt(ke));switch(t){case 0:var Ue=[];window[Ve]===window?Ue.push(l+N+Ct-12906):Ue.push(It+5538);try{var Be=Re+Math.floor(1e7*Math.random()),He=document.createElement(we);He.setAttribute(De,Be),He.style.La=Pe,(document.body||document.getElementsByTagName(be)[0]).appendChild(He),document.getElementById(Be)?Ue.push(0):Ue.push(1),(document.body||document.getElementsByTagName(xe)[xt+r+Tt-8151]).removeChild(He)}catch(t){Ue.push(-1361+bt+1879)}return Ue.join(Ce);case 1:var ze=arguments[m+5347],Ke=new $t.a.f.init([1332468387,-1641050960,Lt+O+2136881301,-1629555948],dt+2689),$e=new $t.a.f.init([Pt+v+22041281,R+Nt+1457907509,776125350,-(-7878+k+-5975+1942018983)],Dt+4647);return $t.Ga.$(ze,Ke,{ra:$e,ba:$t.ba.la,qa:$t.na.ma}).xa.toString().toUpperCase();case Ot+wt-5967:return arguments[St+-1708+Rt+5932]?Qe.length>8011+x-16329?Qe.substr(6968+Mt-7677,48):Qe:Ae;case 3:var Ge=window.document.URL,Ye=window.navigator.userAgent.toLowerCase(),We=ge;window.document.referrer.length>-11220+Vt+18473&&window.document.referrer;try{We.length==kt-8815&&opener.location.href.length>0&&opener.location.href}catch(t){}var Fe=window.navigator.appCodeName,qe=window.navigator.appName,je=window.navigator.platform;return Gt(Ge),Gt(We),Ge+me+Gt(Ye)+fe+We+ue+Fe+ce+qe+de+je;case Ut+b+H-11490:var Qe=arguments[1],Ze=Bt+-1434-689;if(Qe.length==p+H+Ht-13491)return Ze;for(a=zt+1003+4059-782;a<Qe.length;a++){var Xe=Qe.charCodeAt(a);0|(Ze<<8276+s-10445)-Ze+Xe}return Ze;case Kt+8945:var Je=ae+arguments[_+a+8787]+ne+arguments[2]+oe+te+Xt+arguments[3]+Qt+arguments[u+g+c-3244]+qt+arguments[y+It+-1658+11280]+Wt+function(){return Yt.call(this,F-5974)}()+A+function(){return Yt.call(this,0)}()+i;return function(t){return Yt.call(this,1,t)}(e+function(t){return Yt.call(this,f+1735,t)}(Je)+Je)}}(function(){for(var t="",e=0;e<65;e++)t+=String.fromCharCode(208^"±²³´µ¶·¸¹º»¼½¾¿ ¡¢£¤¥¦§¨©ªàáâãäåæçèéûÿí".charCodeAt(e));var o=$t,i=o.a.f;o.k.H={i:function(t){for(var e="",o=0;o<0;o++)e+=String.fromCharCode(4077^"".charCodeAt(o));var i=t.g,n=t.h,r=this.I;t.j(),t=[];for(var a=0;a<n;a+=3)for(var s=(i[a>>>2]>>>24-a%4*8&255)<<16|(i[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|i[a+2>>>2]>>>c+3595-(a+2)%4*8&255,d=0;4>d&&a+.75*d<n;d++)t.push(r.charAt(s>>>6*(3-d)&63));if(i=r.charAt(64))for(;t.length%4;)t.push(i);return t.join(e)},parse:function(t){var e=t.length,o=this.I;(n=o.charAt(64))&&-1!=(n=t.indexOf(n))&&(e=n);for(var n=[],r=0,a=0;a<e;a++)if(a%4){var s=o.indexOf(t.charAt(a-1))<<a%4*2,d=o.indexOf(t.charAt(a))>>>6-a%4*2;n[r>>>2]|=(s|d)<<24-r%4*8,r++}return i.create(n,r)},I:t}})(),function(t){var e=-5616,o=-7555,i=-458,n=1071,a=927,S=-2568,R=6326,M=-4204,V=4918,k=7574,U=6160,B=855,H=-9137,z=2297,K=-9619,$=-8866,G=-6091,Y=-7050,W=-1233,F=-7874,q=5847,j=5062,Q=-4552,Z=4635;function X(t,e,o,i,n,r,a){return dt.call(this,0,t,e,o,i,n,r,a)}function J(t,e,o,i,n,r,a){return dt.call(this,1,t,e,o,i,n,r,a)}function tt(t,e,o,i,n,r,a){return dt.call(this,2,t,e,o,i,n,r,a)}function et(t,e,o,i,n,r,a){return dt.call(this,3,t,e,o,i,n,r,a)}for(var ot=$t,it=(rt=ot.a).f,nt=rt.x,rt=ot.G,at=[],st=0;64>st;st++)at[st]=4294967296*t.abs(t.sin(st+1))|0;function dt(t){switch(t){case 0:var r=arguments[1],s=arguments[V+7592+7592-20100],d=arguments[U+B-7012],l=arguments[k+H+1567],c=arguments[-1789+z-503],p=arguments[K+$+-2285+20776];return((r=r+(s&d|~s&l)+c+arguments[7])<<p|r>>>32-p)+s;case G+e+11708:return((r=(r=arguments[Y+7051])+((s=arguments[2])&(l=arguments[D+O+w-10316])|(d=arguments[R+b+-9220-6198])&~l)+(c=arguments[-5315+o+12875])+arguments[7])<<(p=arguments[6])|r>>>-9475+W+b+1645-p)+s;case i+460:return((r=(r=arguments[A+f-275])+((s=arguments[2])^(d=arguments[F+-6801+14678])^(l=arguments[R+n-7393]))+(c=arguments[S+q+36-3310])+arguments[7])<<(p=arguments[8126+L-10949])|r>>>32-p)+s;case j+Q+-2667+2160:return((r=(r=arguments[1])+((d=arguments[A+a-2931])^((s=arguments[2])|~(l=arguments[4])))+(c=arguments[Z-4630])+arguments[7])<<(p=arguments[L+-6978+4155])|r>>>-8328+M+-2734+15298-p)+s}}rt=rt.J=nt.c({z:function(){this.K=new it.init([1732584193,4023233417,2562383102,9348+c+7556+271720545])},w:function(t,c){for(var D=0;16>D;D++){var O=t[k=c+D];t[k]=16711935&(O<<8|O>>>e+5640)|4278255360&(O<<24|O>>>8)}D=this.K.g;var w,V,k=t[c+0],U=(O=t[c+1],t[c+(p-2247)]),B=t[c+3],H=t[c+4],z=t[c+5],K=t[c+(e+p+5624-2251)],$=t[c+7],G=t[c+8],Y=t[c+9],W=t[c+10],F=t[c+11],q=t[c+12],j=t[c+(-6103+s+3942)],Q=t[c+14],Z=t[c+15],ot=D[-1465+r-371],it=et(it=et(it=et(it=et(it=tt(it=tt(it=tt(it=tt(it=J(it=J(it=J(it=J(it=X(it=X(it=X(it=X(it=D[1],V=X(V=D[2],w=X(w=D[3],ot=X(ot,it,V,w,k,7,at[0]),it,V,O,12,at[1]),ot,it,U,5903+e-270,at[2]),w,ot,B,22,at[3]),V=X(V,w=X(w,ot=X(ot,it,V,w,H,7,at[4]),it,V,z,12,at[5]),ot,it,K,17,at[6]),w,ot,$,22,at[7]),V=X(V,w=X(w,ot=X(ot,it,V,w,G,7,at[8]),it,V,Y,12,at[9]),ot,it,W,4264+e+1369,at[-3423+u+4126]),w,ot,F,22,at[11]),V=X(V,w=X(w,ot=X(ot,it,V,w,q,l-5899,at[12]),it,V,j,12,at[u+-2344+3050]),ot,it,Q,17,at[1227+o+6342]),w,ot,Z,22,at[i+-1821+806+1488]),V=J(V,w=J(w,ot=J(ot,it,V,w,O,-7413+e+13034,at[16]),it,V,K,9,at[1864+h+-7697+6177]),ot,it,F,f+-5305+7539-489,at[18]),w,ot,k,v+-571+6443-7617,at[19]),V=J(V,w=J(w,ot=J(ot,it,V,w,z,5,at[n-1051]),it,V,W,9,at[21]),ot,it,Z,14,at[m+-5750+-8178+19296]),w,ot,H,20,at[-11385+y+15488]),V=J(V,w=J(w,ot=J(ot,it,V,w,Y,5,at[24]),it,V,Q,9,at[25]),ot,it,B,-912+g+4359-10945,at[a-901]),w,ot,G,12598+S-10010,at[27]),V=J(V,w=J(w,ot=J(ot,it,V,w,j,5,at[-4202+R-2096]),it,V,U,9,at[29]),ot,it,$,_+e+R-200,at[30]),w,ot,q,S+9955-7367,at[31]),V=tt(V,w=tt(w,ot=tt(ot,it,V,w,z,4,at[32]),it,V,G,11,at[33]),ot,it,F,_+9362-8850,at[34]),w,ot,Q,u+716,at[35]),V=tt(V,w=tt(w,ot=tt(ot,it,V,w,O,4,at[36]),it,V,H,11,at[37]),ot,it,$,16,at[38]),w,ot,W,23,at[39]),V=tt(V,w=tt(w,ot=tt(ot,it,V,w,j,e+i+A+4071,at[40]),it,V,k,E+1752,at[41]),ot,it,B,16,at[42]),w,ot,K,23,at[43]),V=tt(V,w=tt(w,ot=tt(ot,it,V,w,Y,4,at[44]),it,V,q,11,at[45]),ot,it,Z,y+4096,at[46]),w,ot,U,23,at[47]),V=et(V,w=et(w,ot=et(ot,it,V,w,k,-5750+C+5056,at[I+185]),it,V,$,g-7502,at[49]),ot,it,Q,4376+x+3667-16394,at[50]),w,ot,z,T+-983+7010,at[51]),V=et(V,w=et(w,ot=et(ot,it,V,w,q,42+p+656-2941,at[52]),it,V,B,10,at[53]),ot,it,W,2553+b+-8569-3064,at[54]),w,ot,O,21,at[3412+m+1989]),V=et(V,w=et(w,ot=et(ot,it,V,w,G,6,at[56]),it,V,Z,2260+i-1792,at[-6071+L+3299]),ot,it,K,15,at[-990+M+5252]),w,ot,j,4121+d-7298,at[59]),V=et(V,w=et(w,ot=et(ot,it,V,w,H,6,at[P+6672]),it,V,F,10,at[61]),ot,it,U,15,at[62]),w,ot,Y,21,at[63]);D[N-2907]=D[0]+ot|0,D[1]=D[1]+it|0,D[2]=D[2]+V|0,D[3]=D[3]+w|0},C:function(){var e=this.q,o=e.g,n=(6876+i+-335-6075)*this.r,r=8*e.h;o[r>>>8761+V+1268-14942]|=128<<24-r%32;var a=t.floor(n/4294967296);for(o[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),o[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.h=4*(o.length+1),this.t(),o=(e=this.K).g,n=0;4>n;n++)r=o[n],o[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>2244+k+2814-12624);return e},e:function(){var t=nt.e.call(this);return t.K=this.K.e(),t}}),ot.J=nt.D(rt),ot.L=nt.F(rt)}(Math),o=(t=(e=$t).a).b,i=t.f,n=(t=e.G).M=o.c({y:o.c({N:4,O:t.J,P:1}),init:function(t){this.y=this.y.c(t)},Q:function(t,e){for(var o=(s=this.y).O.create(),n=i.create(),r=n.g,a=s.N,s=s.P;r.length<a;){d&&o.A(d);var d=o.A(t).B(e);o.p();for(var l=1;l<s;l++)d=o.B(d),o.p();n.concat(d)}return n.h=4*a,n}}),e.M=function(t,e,o){return n.create(o).Q(t,e)},$t.a.R||function(t){var e=(h=$t).a,o=e.b,i=e.f,n=e.o,r=h.k.H,a=h.G.M,s=e.R=n.c({y:o.c(),S:function(t,e){return this.create(this.T,t,e)},U:function(t,e){return this.create(this.V,t,e)},init:function(t,e,o){this.y=this.y.c(o),this.W=t,this.X=e,this.p()},p:function(){n.p.call(this),this.z()},Y:function(t){return this.s(t),this.t()},B:function(t){return t&&this.s(t),this.C()},N:v-1761,Z:4,T:1,V:2,D:function(t){return{$:function(e,o,i){for(var n="",r=0;r<6;r++)n+=String.fromCharCode(403^"ǠǧǡǺǽǴ".charCodeAt(r));return(n==typeof o?f:u).$(t,e,o,i)},_:function(e,o,i){for(var n="",r=0;r<6;r++)n+=String.fromCharCode(2219^"ࣘࣟࣙࣂࣅ࣌".charCodeAt(r));return(n==typeof o?f:u)._(t,e,o,i)}}}});e.aa=s.c({C:function(){return this.t(!0)},u:1});var d=h.ba={},l=function(t,e,o){var i=this.ca;i?this.ca=void 0:i=this.da;for(var n=0;n<o;n++)t[e+n]^=i[n]},c=(e.ea=o.c({S:function(t,e){return this.fa.create(t,e)},U:function(t,e){return this.ga.create(t,e)},init:function(t,e){this.ha=t,this.ca=e}})).c();c.fa=c.c({ia:function(t,e){var o=this.ha,i=o.u;l.call(this,t,e,i),o.ja(t,e),this.da=t.slice(e,e+i)}}),c.ga=c.c({ia:function(t,e){var o=this.ha,i=o.u,n=t.slice(e,e+i);o.ka(t,e),l.call(this,t,e,i),this.da=n}}),d=d.la=c,c=(h.na={}).ma={na:function(t,e){for(var o,n=(o=(o=4*e)-t.h%o)<<24|o<<16|o<<8|o,r=[],a=6180+L+-1259-7750;a<o;a+=S+6428-10162)r.push(n);o=i.create(r,o),t.concat(o)},oa:function(t){t.h-=255&t.g[t.h-1>>>2]}},e.pa=s.c({y:s.y.c({ba:d,qa:c}),p:function(){s.p.call(this);var t=(e=this.y).ra,e=e.ba;if(this.W==this.T)var o=e.S;else o=e.U,this.v=1;this.sa=o.call(e,this,t&&t.g)},w:function(t,e){this.sa.ia(t,e)},C:function(){var t=this.y.qa;if(this.W==this.T){t.na(this.q,this.u);var e=this.t(!0)}else e=this.t(!0),t.oa(e);return e},u:4});var p=e.ta=o.c({init:function(t){this.d(t)},toString:function(t){return(t||this.ua).i(this)}}),u=(d=(h.wa={}).va={i:function(t){var e=t.xa;return((t=t.ya)?i.create([1398893684,1701076831]).concat(t).concat(e):e).toString(r)},parse:function(t){var e=(t=r.parse(t)).g;if(1398893684==e[0]&&1701076831==e[1]){var o=i.create(e.slice(2,4));e.splice(0,4),t.h-=16}return p.create({xa:t,ya:o})}},e.za=o.c({y:o.c({wa:d}),$:function(t,e,o,i){i=this.y.c(i);var n=t.S(o,i);return e=n.B(e),n=n.y,p.create({xa:e,Aa:o,ra:n.ra,Ba:t,ba:n.ba,qa:n.qa,u:t.u,ua:i.wa})},_:function(t,e,o,i){return i=this.y.c(i),e=this.Ca(e,i.wa),t.U(o,i).B(e.xa)},Ca:function(t,e){for(var o="",i=-8390+R+3880;i<6;i++)o+=String.fromCharCode(2150^"ࠕࠒࠔࠏࠈࠁ".charCodeAt(i));return o==typeof t?e.parse(t,this):t}})),h=(h.Da={}).va={Ea:function(t,e,o,n){return n||(n=i.random(8)),t=a.create({N:e+o}).Q(t,n),o=i.create(t.g.slice(e),4*o),t.h=4*e,p.create({Aa:t,ra:o,ya:n})}},f=e.Fa=u.c({y:u.y.c({Da:h}),$:function(t,e,o,i){return o=(i=this.y.c(i)).Da.Ea(o,t.N,t.Z),i.ra=o.ra,(t=u.$.call(this,t,e,o.Aa,i)).d(o),t},_:function(t,e,o,i){return i=this.y.c(i),e=this.Ca(e,i.wa),o=i.Da.Ea(o,t.N,t.Z,e.ya),i.ra=o.ra,u._.call(this,t,e,o.Aa,i)}})}(),function(){for(var t=$t,e=t.a.pa,o=t.G,i=[],n=[],a=[],s=[],d=[],l=[],c=[],u=[],h=[],f=[],m=[],y=0;256>y;y++)m[y]=128>y?y<<1:y<<M+4353-10780^-4619+V+9772;var g=0,A=0;for(y=8146+p+p-12644;256>y;y++){var E=(E=A^A<<1^A<<r+7286+7286-16406^A<<3^A<<S+2744-6478)>>>8^255&E^7286+k+-803-621;i[g]=E,n[E]=g;var C=m[g],I=m[C],T=m[I],b=257*m[E]^16843008*E;a[g]=b<<24|b>>>8,s[g]=b<<8146+P-1518|b>>>16,d[g]=b<<-7226+_+-8993+16723|b>>>24,l[g]=b,b=16843009*T^65537*I^(12950+U-12561)*C^(B+6038+H+16817958)*g,c[E]=b<<24|b>>>8,u[E]=b<<16|b>>>16,h[E]=b<<x+z-4738|b>>>24,f[E]=b,g?(g=C^m[m[m[T^C]]],A^=m[m[A]]):g=A=1}var L=[0,1,z+1538+-9246+11330,K+-8064+-6326+15349,8,-7197+$-2295,32,64,128,27,54];o=o.Ga=e.c({z:function(){for(var t=(o=this.X).g,e=o.h/4,o=4*((this.Ha=e+6)+1),n=this.Ia=[],r=0;r<o;r++)if(r<e)n[r]=t[r];else{var a=n[r-1];r%e?6<e&&4==r%e&&(a=i[a>>>24]<<24|i[a>>>16&255]<<16|i[a>>>8&255]<<8|i[255&a]):(a=i[(a=a<<8|a>>>24)>>>24]<<24|i[a>>>16&255]<<16|i[a>>>8&G+8195]<<8|i[255&a],a^=L[r/e|0]<<24),n[r]=n[r-e]^a}for(t=this.Ja=[],e=0;e<o;e++)r=o-e,a=e%4?n[r]:n[r-4],t[e]=4>e||4>=r?a:c[i[a>>>24]]^u[i[a>>>16&255]]^h[i[a>>>8&255]]^f[i[255&a]]},ja:function(t,e){this.Ka(t,e,this.Ia,a,s,d,l,i)},ka:function(t,e){var o=t[e+1];t[e+1]=t[e+3],t[e+3]=o,this.Ka(t,e,this.Ja,c,u,h,f,n),o=t[e+1],t[e+1]=t[e+3],t[e+3]=o},Ka:function(t,e,o,i,n,r,a,s){for(var d=this.Ha,l=t[e]^o[0],c=t[e+1]^o[1],p=t[e+2]^o[2],u=t[e+3]^o[3],h=4,f=1;f<d;f++){var m=i[l>>>24]^n[c>>>16&255]^r[p>>>8&255]^a[255&u]^o[h++],y=i[c>>>24]^n[p>>>16&255]^r[u>>>8&255]^a[255&l]^o[h++],g=i[p>>>24]^n[u>>>16&255]^r[l>>>8&v-1510]^a[255&c]^o[h++];u=i[u>>>24]^n[l>>>16&255]^r[c>>>-3930+D+7621&255]^a[255&p]^o[h++],l=m,c=y,p=g}m=(s[l>>>24]<<24|s[c>>>16&255]<<16|s[p>>>8&255]<<8|s[255&u])^o[h++],y=(s[c>>>24]<<24|s[p>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^o[h++],g=(s[p>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&c])^o[h++],u=(s[u>>>24]<<9424+Y+-1219-1552|s[l>>>16&255]<<16|s[c>>>8&255]<<8|s[255&p])^o[h++],t[e]=m,t[e+1]=y,t[e+2]=g,t[e+3]=u},N:8}),t.Ga=e.D(o)}()}();var ve,me,ye=function(t,e){var o,i,n;return t&&"o"===t.s&&(null===(o=t.vl)||void 0===o?void 0:o.vi)&&(3===t.dltype||8===t.dltype?(i=function(t){var e,o,i,n,r,a,s=[],d=null===(o=null===(e=null==t?void 0:t.vl)||void 0===e?void 0:e.vi)||void 0===o?void 0:o[0];if(null===(n=null===(i=null==d?void 0:d.ul)||void 0===i?void 0:i.ui)||void 0===n?void 0:n.length)for(var l=void 0,c=0,p=d.ul.ui.length;c<p;c++)(l=d.ul.ui[c]).url&&(null===(r=l.hls)||void 0===r?void 0:r.pt)?s.push(l.url+l.hls.pt):8===t.dltype&&s.push(l.url);return 8===t.dltype&&(null==d?void 0:d.ul)&&(a=d.ul.m3u8),{urls:s,m3u8:a}}(t),n="hls"):1===t.dltype&&(i=function(t,e){var o,i,n,r,a,s=[],d=t.vl.vi[0]||null,l=null===(o=d.cl)||void 0===o?void 0:o.fc;if(!(null===(i=null==d?void 0:d.cl)||void 0===i?void 0:i.ci)&&d.fvkey&&d.fn&&(null===(r=null===(n=d.ul)||void 0===n?void 0:n.ui)||void 0===r?void 0:r.length))return{urls:s};if(!(null===(a=d.cl)||void 0===a?void 0:a.ci)||l!==d.cl.ci.length)return{urls:s};for(var c={vkey:d.fvkey,guid:e.guid},p=0;p<l;p++){var u=he(d.fn,p+1);s=fe(d.ul,d.lnk,u,c);break}return{urls:s}}(t,{guid:e}),n="mp4")),i&&n?Promise.resolve({type:n,urls:i.urls,m3u8:i.m3u8}):Promise.reject()};function ge(t,e,o){var i=document.createElement("script");i.type="text/javascript",i.charset="UTF-8",(null==o?void 0:o.crossOrigin)&&(i.crossOrigin=o.crossOrigin),i.src=t;var n=!1;if(i.onerror=function(t){n=!0,null==e||e({src:t.target.src,error:{type:"jserror",code:404}})},i.addEventListener?i.addEventListener("load",(function(){n=!0,null==e||e()}),!1):i.attachEvent&&i.attachEvent("onreadystatechange",(function(){"complete"===window.event.srcElement.readyState&&(n=!0,null==e||e())})),null==o?void 0:o.doc){var r=document.createElement("base");r.href=i.src.match(/.+\//)[0],o.doc.getElementsByTagName("head")[0].appendChild(r)}(null==o?void 0:o.dom)?o.dom.appendChild(i):document.getElementsByTagName("head")[0].appendChild(i),setTimeout((function(){var o=!1;n||(!o&&(null==e||e({src:t,error:{type:"js timeout",code:502}})),o=!0)}),5e3)}(function(t){if(void 0===t&&(t="lossy"),void 0!==ve)return ve;var e=new Image,o={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};new Promise((function(i){e.onload=function(){ve=!0,i(!0)},e.onerror=function(){ve=!1,i(!1)},e.src="data:image/webp;base64,".concat(o[t])}))})(),function(t){t.OUT="out",t.IN="in",t.H5="H5",t.CLIENT="client"}(me||(me={}));var _e=function(){function t(){var t=this;this.startTime=Date.now(),this.promise=new Promise((function(e,o){t.fn={resolve:e,reject:o}}))}return Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return this.promise[Symbol.toStringTag]},enumerable:!1,configurable:!0}),t.prototype.resolve=function(t){this.fn.resolve(t)},t.prototype.reject=function(t){this.fn.reject(t)},t.prototype.then=function(t,e){return this.promise.then(t,e)},t.prototype.catch=function(t){return this.promise.catch(t)},t.prototype.finally=function(t){return this.promise.finally(t)},t}(),Ae=function(){function t(t,e){this.storageKey=t,this.options=e}return Object.defineProperty(t.prototype,"storage",{get:function(){var t;return(null===(t=this.options)||void 0===t?void 0:t.useSessionStorage)?window.sessionStorage:window.localStorage},enumerable:!1,configurable:!0}),t.prototype.getData=function(t){if(!t&&this.storageData)return this.storageData;try{var e=this.storage.getItem(this.storageKey);if(e)return this.storageData=JSON.parse(e),this.storageData}catch(t){}},t.prototype.setData=function(t){try{this.storageData=t;var e=JSON.stringify(this.storageData);this.storage.setItem(this.storageKey,e)}catch(t){}},t.prototype.clear=function(){this.storage.removeItem(this.storageKey)},t}();function Ee(t,e){var o=t,i=null,n=!0;function r(){var t=this,r=arguments;if(n)return o.apply(t,r),void(n=!1);i||(i=window.setTimeout((function(){i&&(clearTimeout(i),i=null),o.apply(t,r)}),e))}return r.cancel=function(){i&&(clearTimeout(i),i=null)},r}function Ce(t){if(null===t)return"null";var e=typeof t;return"object"!==e?e:t instanceof Array?"array":"object"}function Ie(t){var e=Ce(t);return["null","undefined"].includes(e)?[]:"array"===e?t:[t]}function xe(t,e){return Object.entries(e).forEach((function(e){var o=e[0],i=e[1],n=Ce(i);["null","string","number","boolean","function"].includes(n)?t[o]=i:("array"===n&&(t[o]=i),"object"===n&&(t[o]||(t[o]={}),xe(t[o],i)))})),t}function Te(t,e){void 0===e&&(e=window.location.href);var o,i=new RegExp("(^|&|\\\\?)".concat(t,"=([^&]*)(&|$|#)"));return(o=e.match(i))?o[2]:""}var be,Le=function(t,e){void 0===e&&(e={});var o=t;return Object.entries(e).forEach((function(t){var e=t[0],i=t[1];o=o.replace(e,i)})),o},Pe=function(t,e,o){var i=t;return e&&(i+=(-1===t.indexOf("?")?"?":"&")+function(t,e){var o=[];return Object.keys(t).forEach((function(i){var n=t[i];o.push("".concat(i,"=").concat(e?encodeURIComponent(n):n))})),o.join("&")}(e,o)),i};!function(t){t[t.LessThan=-1]="LessThan",t[t.EqualTo=0]="EqualTo",t[t.GreaterThan=1]="GreaterThan"}(be||(be={}));var Ne,De,Oe,we=102e5,Se=new Ae(kt),Re=function(t){var e={};return Object.entries(t).forEach((function(t){var o=t[0],i=t[1];i&&Date.now()-i.time<=we&&(e[o]=i)})),e},Me=(Ne=Se.getData())?Re(Ne):{},Ve=function(t,e,o){var i=Te("fmt",e)||It.SHD,n=Me["".concat(i,"-").concat(t)],r=Date.now();return n&&r-n.time<=we?n.url:(function(t,e,o){var i=Date.now();Me["".concat(e,"-").concat(t)]={url:o,time:i},Me=Re(Me),Se.setData(Me)}(t,i,e),e)};!function(t){t[t.PAUSE=2]="PAUSE",t[t.RESUME=3]="RESUME",t[t.END=4]="END",t[t.FAIL=6]="FAIL",t[t.AUTO_PLAY=7]="AUTO_PLAY",t[t.UNMUTE=8]="UNMUTE",t[t.MUTE=9]="MUTE",t[t.INTERRUPT=10]="INTERRUPT",t[t.AUTO_REPLAY=13]="AUTO_REPLAY"}(De||(De={})),function(t){t[t.NONE=0]="NONE",t[t.DOWNLOAD=1]="DOWNLOAD",t[t.PLAY=2]="PLAY",t[t.OTHER=3]="OTHER"}(Oe||(Oe={}));var ke,Ue=function(){function t(t,e){this.adCore=t,this.options=e,this.logger=this.adCore.logger.createLogger("AdInfoReporter"),this.reportedSet=new Set,this.delayReportSet=new Set;var o=e.report;this.effectReportList=this.formatToReportList(o[h.EFFECT]),this.clickReportList=this.formatToReportList(o[h.CLICK]),this.pluginReportList=this.formatToReportList(o[h.PLUGIN]),this.playReportList=this.formatToReportList(o[h.PLAY_BACK]),this.originExposureReportData=this.formatToExposureReportData(this.formatToReportList(o[h.ORIGIN_EXPOSURE])),this.otherExposureReportData=this.formatToExposureReportData(this.formatToReportList(o[h.EXPOSURE]))}return Object.defineProperty(t.prototype,"cgi",{get:function(){return this.adCore.cgi},enumerable:!1,configurable:!0}),t.prototype.setVideoPlaytime=function(t,e){var o=this;this.originExposureReportData.range.forEach((function(i){o.rangeReport(t,i,(function(){o.logger.log("区间原始曝光上报",o.getLogParams()),o.cgi.reportOriginUrl(i.reportUrl,o.getOriginReportData(),{replaceDict:e})}))})),this.otherExposureReportData.range.forEach((function(i){o.rangeReport(t,i,(function(){o.logger.log("区间第三方曝光上报",o.getLogParams()),o.cgi.reportOtherUrl(i.reportUrl,{replaceDict:e})}))}))},t.prototype.reportExposure=function(t){this.reportOriginExposure(t),this.reportOtherExposure(t)},t.prototype.reportOriginExposure=function(t){var e=this;this.logger.log("原始曝光上报",this.getLogParams()),this.originExposureReportData.first.forEach((function(o){e.logger.log("首帧上报",e.getLogParams()),e.cgi.reportOriginUrl(o.reportUrl,e.getOriginReportData(),{replaceDict:t})})),this.originExposureReportData.delay.forEach((function(o){e.delayReport(o,(function(){e.cgi.reportOriginUrl(o.reportUrl,e.getOriginReportData(),{replaceDict:t,appendParams:{t:"".concat(o.reportBegin)}})}))}))},t.prototype.reportOtherExposure=function(t){var e=this;this.logger.log("第三方曝光上报",this.getLogParams()),this.otherExposureReportData.first.forEach((function(o){e.logger.log("首帧上报",e.getLogParams()),e.cgi.reportOtherUrl(o.reportUrl,{replaceDict:t})})),this.otherExposureReportData.delay.forEach((function(o){e.delayReport(o,(function(){e.cgi.reportOtherUrl(o.reportUrl,{replaceDict:t})}))}))},t.prototype.reportClick=function(){var t=this;this.logger.log("第三方点击上报",this.getLogParams()),this.clickReportList.forEach((function(e){t.cgi.reportOtherUrl(e.reportUrl)}))},t.prototype.reportEffects=function(){var t=this;this.logger.log("effects 上报",this.getLogParams()),this.effectReportList.forEach((function(e){t.cgi.reportOtherUrl(e.reportUrl,{replaceDict:{__ACTION_ID__:"323"}})}))},t.prototype.reportPlay=function(t){var e=this,o=t.playType,i=t.timeOffset,n=void 0===i?0:i,r=t.timeStamp,a=void 0===r?Date.now():r,s=t.failReason,d=void 0===s?Oe.NONE:s;this.playReportList.forEach((function(t){e.logger.log("play 上报: ".concat(e.getLogParams())),e.cgi.reportOtherUrl(t.reportUrl,{replaceDict:{__PLAY_TYPE__:"".concat(o),__TIME_OFFSET__:"".concat(o===De.RESUME?a:Math.floor(1e3*n)),__TIMESTAMP__:"".concat(a),__FAIL_REASON__:"".concat(d)}})}))},t.prototype.reset=function(){this.reportedSet.clear(),this.delayReportSet.forEach((function(t){window.clearTimeout(t)})),this.delayReportSet.clear()},t.prototype.rangeReport=function(t,e,o){this.reportedSet.has(e)||t>=e.reportBegin&&t<=e.reportEnd&&(this.logger.log("区间上报","reportBegin:".concat(e.reportBegin,", reportEnd: ").concat(e.reportEnd,", playtime: ").concat(t)),o(),this.reportedSet.add(e))},t.prototype.delayReport=function(t,e){var o=this;this.logger.log("延迟上报",this.getLogParams());var i=window.setTimeout((function(){o.delayReportSet.delete(i),e()}),t.reportBegin);this.delayReportSet.add(i)},t.prototype.formatToReportList=function(t){var e,o=[];return null===(e=null==t?void 0:t.report_list)||void 0===e||e.forEach((function(t){R(R(R([],t.report_urls,!0),t.api_urls,!0),t.sdk_urls,!0).forEach((function(e){o.push({reportBegin:t.report_begin,reportEnd:t.report_end,reportUrl:e})}))})),o},t.prototype.formatToExposureReportData=function(t){var e={first:[],delay:[],range:[]};return t.forEach((function(t){t.reportBegin&&t.reportEnd?e.range.push(t):0===t.reportBegin?e.first.push(t):e.delay.push(t)})),e},t.prototype.getLogParams=function(){return{adType:this.options.adType,index:this.options.orderIdx}},t.prototype.getOriginReportData=function(){return{orderIdx:this.options.orderIdx,oadId:this.options.oadId}},t}(),Be=function(){function t(t){var e,o=t.data,i=t.orderIdx,n=t.adCore,r=t.auth,a=t.extraInfo,s=t.point,d=t.isEmpty;this.adCore=n,this.data=o,this.orderIdx=i,this.auth=r,this.isEmpty=!!d,this.extraInfo=a,this.point=s,this.reporter=new Ue(this.adCore,{adType:this.adType,orderIdx:this.orderIdx,report:this.data.order.report,oadId:"".concat((null===(e=this.auth)||void 0===e?void 0:e.oaid)||"")}),ue(this.frequencyControlConfig)}return Object.defineProperty(t.prototype,"adType",{get:function(){return this.data.order.ad_type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"orderId",{get:function(){return this.data.order.order_id},enumerable:!1,configurable:!0}),t.prototype.getVrReportData=function(t){var e;void 0===t&&(t=f.COMMON);var o=null===(e=this.data.order.vr_report_dict)||void 0===e?void 0:e[t];return null==o?void 0:o.report_dict},Object.defineProperty(t.prototype,"clickable",{get:function(){return this.data.order.ad_action.type!==u.UNKNOWN},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"landing",{get:function(){var t=this.data.order.ad_action;return t.type===u.CLICK?D({},t.click):t.type===u.SCAN?D({},t.scan):{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"amsLinkParams",{get:function(){var t;return{aid:this.orderId,pid:this.data.order.pos_id,wx_type:this.isMiniGame?2:1,traceid:this.data.order.trace_id,net_log_id:null===(t=this.extraInfo)||void 0===t?void 0:t.net_log_id}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMiniGame",{get:function(){return"46"===this.data.order.product_type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frequencyControlConfig",{get:function(){var t;return null!==(t=this.data.order.ad_frequency_control_info_list)&&void 0!==t?t:{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miniProgramData",{get:function(){var t,e,o,i,n,r=null===(t=this.landing)||void 0===t?void 0:t.mini_program_info,a=null===(e=this.data.poster)||void 0===e?void 0:e.advertiser,s=null===(o=this.data.poster)||void 0===o?void 0:o.action_button;if((null==r?void 0:r.appid)||(null==r?void 0:r.url_scheme))return D(D({},r),{isGame:this.isMiniGame,logo:null==a?void 0:a.icon_url,title:null==a?void 0:a.name,subTitle:null==a?void 0:a.description,amsLinkParams:this.amsLinkParams,qrcodeUrl:null===(i=this.landing)||void 0===i?void 0:i.short_link,btnText:null===(n=null==s?void 0:s.base)||void 0===n?void 0:n.action_title.first_title})},enumerable:!1,configurable:!0}),t}();function He(t,e,o,i){return Ie(i).map((function(i,n){return new Be({data:i,orderIdx:n,adCore:t,point:e,auth:null==o?void 0:o.auth,extraInfo:null==o?void 0:o.extra_info})}))}function ze(t){return D(D({},t.point),{begin:Number(t.point.begin),end:Number(t.point.end),time_offset:Number(t.point.time_offset)})}function Ke(t,e,o){return Ie(o).map((function(o,i){return new Be({data:o,orderIdx:i,adCore:t,auth:null==e?void 0:e.auth,extraInfo:null==e?void 0:e.extra_info,isEmpty:!1})}))}function $e(t,e,o){Ke(t,e,o).forEach((function(t){t.reporter.reportExposure()}))}!function(t){t.UNKNOWN="UNKNOWN",t.EMPTY="empty",t.TRANSPARENT_VIDEO="TransparentVideo",t.ACTIVE_VIDEO="ActiveVideo",t.CONTRACT_VIDEO="ContractVideo",t.ACTIVE_PICTURE="ActivePicture",t.CONTRACT_PICTURE="ContractPicture",t.FULL_SCREEN_PICTURE="FullScreenPicture",t.FULL_SCREEN_VIDEO="FullScreenVideo"}(ke||(ke={}));var Ge,Ye=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"materialType",{get:function(){return this.data.material.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageMaterial",{get:function(){return Y(this.data.material)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoMaterial",{get:function(){return G(this.data.material)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){var t,e;return this.materialType===m.IMAGE?null===(t=this.imageMaterial)||void 0===t?void 0:t.url:this.materialType===m.VIDEO?null===(e=this.videoMaterial)||void 0===e?void 0:e.url:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableClick",{get:function(){var t;return!0===(null===(t=this.data.order.ad_action.scan)||void 0===t?void 0:t.enable_click)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxPlayReportCycles",{get:function(){var t,e,o,i;return(null===(i=null===(o=null===(e=null===(t=this.data.order.report)||void 0===t?void 0:t[h.PLAY_BACK])||void 0===e?void 0:e.report_list)||void 0===o?void 0:o[0])||void 0===i?void 0:i.max_report_cycles)||5},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return[v.PICTURE,v.QRCODE].includes(this.data.poster.action_button.action_type)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isScanActive",{get:function(){return this.data.poster.action_button.action_type===v.QRCODE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this.data.poster.video_control.muted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"orderType",{get:function(){var t;if(this.isEmpty)return ke.EMPTY;var e=this.data.poster.split_control_info;if(e&&(e.split_type!==g.UNKNOWN||[T.RIGHT_HORIZONTAL,T.RIGHT_VERTICAL,T.LEFT_HORIZONTAL,T.LEFT_HORIZONTAL_BROKEN].includes(e.split_view_type))){if(this.materialType===m.VIDEO)return ke.FULL_SCREEN_VIDEO;if(this.materialType===m.IMAGE)return ke.FULL_SCREEN_PICTURE}return this.materialType===m.VIDEO?(null===(t=this.videoMaterial)||void 0===t?void 0:t.is_transparent)?ke.TRANSPARENT_VIDEO:this.isActive?ke.ACTIVE_VIDEO:ke.CONTRACT_VIDEO:this.materialType===m.IMAGE?this.isActive?ke.ACTIVE_PICTURE:ke.CONTRACT_PICTURE:ke.UNKNOWN},enumerable:!1,configurable:!0}),e}(Be);!function(t){t.AD_GET_INFO="getAdInfoEvt",t.AD_ORDER_SET="adOrderSetEvt",t.AD_LOAD_START="loadStartEvt",t.AD_LOAD_COMPLETE="loadCompleteEvt",t.AD_SHOW="showAdEvt",t.AD_HIDE="hideAdEvt",t.AD_PAUSE="pauseEvt",t.AD_RESUME="resumeEvt",t.AD_STOP="stopAdEvt",t.AD_DESTROY="destroyAdEvt",t.AD_ERROR="errorAdEvt",t.AD_COUNTDOWN_CHANGE="countdownChangeEvt",t.AD_LOAD_PROGRESS="loadProgressEvt",t.AD_CAN_PLAY="canPlayEvt",t.AD_PLAY_START="playStartEvt",t.AD_PLAY_END="playEndEvt",t.AD_PLAY_ERROR="playErrorEvt",t.AD_AUTOPLAY_BLOCKED="autoplayBlockedAd",t.AD_PLAYING="playingAd",t.AD_TIME_UPDATE="timeUpdateAd",t.AD_VOLUME_CHANGE="volumeChangeAd",t.AD_SET_LOADING="setLoadingAd",t.AD_PLAYER_SESSION_START="adPlayerSessionStart",t.AD_PLAYER_SESSION_END="adPlayerSessionEnd",t.AD_ENTER_COUNTDOWN="enterCountdownEvt",t.AD_ENTER_COUNTDOWN_COMPLETE="enterCountdownCompleteEvt",t.AD_REQUEST_ORDER="requestOrderEvt",t.AD_BLACK_SCREEN="blackScreenEvt",t.AD_EXIT_WINDOW_FULLSCREEN="exitWindowFullscreen",t.AD_EXIT_BROWSER_FULLSCREEN="exitBrowserFullscreen",t.AD_MOVE_IN="moveinAd",t.AD_MOVE_OUT="moveoutAd",t.AD_REPORT="reportAd",t.AD_STOP_ALL="adStopAll"}(Ge||(Ge={}));var We=function(){function t(t){var e=this;this.options=t,this.playerMemoryData=null,this.cleanList=new Set,this.resetVideoContainer=function(t,o){var i;e.clean();var n=null===(i=e.options.player)||void 0===i?void 0:i.videoElementsContainer;if(e.logger.log("调用 resetVideoContainer: ".concat(t,"  el:").concat(!!n)),!n)return Promise.reject();var r=function(){var o;if(n.style.cssText=e.getVideoContainerStyle(),e.playerMemoryData=null,t)try{e.logger.log("调用正片播放"),null===(o=e.options.player)||void 0===o||o.play()}catch(t){}};if(o)return r(),Promise.resolve();var a=n.parentElement.getBoundingClientRect();return Xt(n,{width:"".concat(a.width,"px"),height:"".concat(a.height,"px"),top:"0",left:"0"}),new Promise((function(t){var o=null,i=function(){n.removeEventListener("transitionend",i),e.cleanList.delete(i),o&&(clearTimeout(o),o=null),r(),t()};n.addEventListener("transitionend",i),o=window.setTimeout((function(){i()}),250),e.cleanList.add(i)}))},this.resizeVideoContainer=function(t){var o,i=null===(o=e.options.player)||void 0===o?void 0:o.videoElementsContainer;return i?new Promise((function(o){var n;if(JSON.stringify(t)===JSON.stringify(null===(n=e.playerMemoryData)||void 0===n?void 0:n.sizeAndPosition))return o(t);Xt(i,{width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),top:"".concat(t.top,"px"),left:"".concat(t.left,"px"),borderRadius:"12px",overflow:"hidden"}),e.playerMemoryData?e.playerMemoryData.sizeAndPosition=t:e.playerMemoryData={sizeAndPosition:t};var r=null,a=function(){i.removeEventListener("transitionend",a),e.cleanList.delete(a),r&&(clearTimeout(r),r=null),o(t)};i.addEventListener("transitionend",a),r=window.setTimeout((function(){e.logger.log("resizeVideoContainer 超时结束"),a()}),250),e.cleanList.add(a)})):Promise.reject()},this.shrinkVideoContainer=function(t){return w(e,void 0,void 0,(function(){var e,o,i,n;return S(this,(function(r){return this.clean(),(e=null===(n=this.options.player)||void 0===n?void 0:n.videoElementsContainer)?(this.playerMemoryData||(this.playerMemoryData={},o=this.options.getContainerSize(),i=["width","height","top","left"].map((function(t){return"".concat(t," 200ms cubic-bezier(0.4, 0, 0.2, 1)")})).join(","),Xt(e,{transition:i,width:"".concat(o.width,"px"),height:"".concat(o.height,"px"),zIndex:"1001",backgroundColor:"#000"})),[2,this.resizeVideoContainer(t)]):[2,Promise.reject()]}))}))},this.capturePlayer=function(){return Promise.resolve()},this.checkFullPauseInit=function(){var t;if(!e.options.adCore.ctrl.getRunningAds(p.PAUSE).some((function(t){return[ke.FULL_SCREEN_PICTURE,ke.FULL_SCREEN_VIDEO].includes(t.adInfo.orderType)}))){var o=null===(t=e.options.player)||void 0===t?void 0:t.videoElementsContainer;if(e.logger.log("调用 checkFullPauseInit: ".concat(!!o)),o){var i=e.getVideoContainerStyle();o.style.cssText!==i&&(o.style.cssText=i,e.playerMemoryData=null)}}},this.clean=function(){e.cleanList.forEach((function(t){t()}))},this.logger=t.adCore.logger.createLogger("FullPauseHelper"),t.adCore.event.on(Ge.AD_DESTROY,(function(t){t.adType===p.PAUSE&&setTimeout((function(){try{e.checkFullPauseInit()}catch(t){}}),1e3)}))}return t.prototype.getVideoContainerStyle=function(){var t,e;return(null===(e=null===(t=this.options.player)||void 0===t?void 0:t.config)||void 0===e?void 0:e.videoContainerStyle)||"position:absolute;left:0;top:0;width:100%;height:100%;z-index:0;"},t}(),Fe=function(){return Fe=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Fe.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;for(var qe=function(t,e,o){var i=e.net_log_id,n=e.traceid,r=void 0===n?"":n,a=function(t,e){var o={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(o[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(o[i[n]]=t[i[n]])}return o}(e,["net_log_id","traceid"]),s=new XMLHttpRequest;s.open("POST","https://sdkreport.e.qq.com/link_event"),s.responseType="json",s.timeout=8e3,s.send(JSON.stringify({os:(null==o?void 0:o.isClient)?2:3,av:(null==o?void 0:o.appVersion)||"",sdk_st:7,pkg:"custom_define.qvideo.pc",events:[{ts:Date.now(),ei:t,biz:Fe(Fe({},a),{traceid:"".concat(r).concat(i?"NETLOG".concat(i):"")})}]}))},je=function(t,e,o){qe(4006001,e,o),(null==t?void 0:t.startsWith("weixin://"))?(qe(4006002,e,o),qe(4006070,e,o),(null==o?void 0:o.showPopup)&&function(t){if(document.querySelector("body > .mini-program-modal"))return{close:function(){}};var e=document.createElement("div");e.className="mini-program-modal",e.style.cssText="position: fixed;z-index:10000;height:326px;width:412px;left: 50%;top: 200px;transform:translateX(-50%);display: flex;flex-direction: column;align-items: center;user-select:none;",e.innerHTML='\n  <img style="width: 412px;height: 326px;position:\n   absolute;top: 0;left: 0;z-index: -1;" src="https://active.v.qq.com/resource/mini-program-bg.png"\n       alt="">\n  <svg data-close="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"\n       style="position:absolute;right: 8px;top: 22px;cursor: pointer;">\n    <circle cx="12" cy="12" r="11.625" fill="black" fill-opacity="0.3" stroke="white" stroke-width="0.75"></circle>\n    <path d="M7.625 8.12506L16.1103 16.6103" stroke="white" stroke-width="1.5" stroke-linecap="round"></path>\n    <path d="M16.375 8.12506L7.88972 16.6103" stroke="white" stroke-width="1.5" stroke-linecap="round"></path>\n  </svg>\n  <div style="color: #fff;font-size: 18px;line-height:25px;font-weight: 600;margin-top: 6px;">\n    温馨提示\n  </div>\n  <div style="color: #1C2228;font-size: 18px;line-height:20px;font-weight: 600;margin-top: 27px;">\n    PC端畅玩微信'.concat(2===(null==t?void 0:t.wxType)?"小游戏":"小程序",'\n  </div>\n  <img style="width: 342px;height: 164px;margin-top: 16px;" src="https://active.v.qq.com/resource/video-guidance.png"\n       alt="">\n  <div style="color: #000;font-size: 16px;line-height: 20px;margin-top: 18px;">\n    勾选“始终允许打开链接”，并点击“打开WeChat”\n  </div>\n  '),document.body.appendChild(e);var o=null,i=e.querySelector('svg[data-close="true"]'),n=function(){o&&(window.clearTimeout(o),o=null),null==i||i.removeEventListener("click",n,!1),e.remove()};null==i||i.addEventListener("click",n,!1),o=window.setTimeout(n,(null==t?void 0:t.autoCloseMs)||15e3)}({autoCloseMs:o.popupAutoCloseMs||15e3,wxType:e.wx_type}),window.location.href=t):qe(4006003,e,o)},Qe={glog:function(t){if(t<1)throw new Error("glog(".concat(t,")"));return Qe.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return Qe.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},Ze=0;Ze<8;Ze++)Qe.EXP_TABLE[Ze]=1<<Ze;for(Ze=8;Ze<256;Ze++)Qe.EXP_TABLE[Ze]=Qe.EXP_TABLE[Ze-4]^Qe.EXP_TABLE[Ze-5]^Qe.EXP_TABLE[Ze-6]^Qe.EXP_TABLE[Ze-8];for(Ze=0;Ze<255;Ze++)Qe.LOG_TABLE[Qe.EXP_TABLE[Ze]]=Ze;"function"==typeof SuppressedError&&SuppressedError;var Xe,Je,to,eo,oo,io,no,ro,ao,so,lo,co,po,uo,ho,fo,vo,mo,yo,go,_o,Ao,Eo,Co,Io,xo,To,bo,Lo="TxpCreativePlayer-request-mid-count",Po=function(t){var e=new RegExp("(?:^|;+|\\s+)".concat(t,"=([^;]*)")),o=document.cookie.match(e);return o?o[1]:""};!function(t){t.LD="LD",t.HT="HT",t.ZC="ZC",t.CZC="CZC",t.ZT="ZT",t.KB="KB",t.PSJ="PSJ",t.PLJ="PLJ",t.PPB="PPB",t.PVL="PVL",t.PDF="PDF",t.BS="BS",t.VIN="VIN",t.PHLS="PHLS",t.DER="DER",t.YXT="YXT"}(Xe||(Xe={})),function(t){t.LD="WL",t.KB="WK",t.HT="WH"}(Je||(Je={})),function(t){t[t.PRE=1]="PRE",t[t.TAIL=2]="TAIL",t[t.ANCHOR=3]="ANCHOR",t[t.PAUSE=4]="PAUSE",t[t.PROGRESS_PREVIEW=5]="PROGRESS_PREVIEW",t[t.VIDEO_RESOLUTION=6]="VIDEO_RESOLUTION",t[t.DYNAMIC_MID=7]="DYNAMIC_MID"}(eo||(eo={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.NOT_LOGIN=0]="NOT_LOGIN",t[t.LOGIN=1]="LOGIN",t[t.HLW_VIP=2]="HLW_VIP",t[t.TV_VIP=9]="TV_VIP",t[t.SPORTS_VIP=10]="SPORTS_VIP",t[t.SPORTS_SVIP=12]="SPORTS_SVIP"}(oo||(oo={})),function(t){t[t.GUEST=0]="GUEST",t[t.QQ=1]="QQ",t[t.WX=2]="WX",t[t.PHONE=3]="PHONE"}(io||(io={})),function(t){t[t.OK=0]="OK"}(no||(no={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.PRE=1]="PRE",t[t.BROADCAST=2]="BROADCAST",t[t.TAIL=3]="TAIL",t[t.PAUSE=4]="PAUSE",t[t.LOADING=5]="LOADING",t[t.PROGRESS_PREVIEW=6]="PROGRESS_PREVIEW",t[t.VIDEO_RESOLUTION=7]="VIDEO_RESOLUTION",t[t.MID=8]="MID",t[t.CREATIVE_MID=9]="CREATIVE_MID",t[t.HLS_MID=10]="HLS_MID",t[t.CORNER=11]="CORNER",t[t.LIVE_CORNER=12]="LIVE_CORNER",t[t.VIDEO_IN=13]="VIDEO_IN",t[t.WATCH_BUY=14]="WATCH_BUY",t[t.ANCHOR_EMPTY=15]="ANCHOR_EMPTY",t[t.NON_STANDARD=16]="NON_STANDARD",t[t.DYNAMIC_MID=17]="DYNAMIC_MID",t[t.CONTINUED_POST=18]="CONTINUED_POST"}(ro||(ro={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.CLICK=1]="CLICK",t[t.SCAN=2]="SCAN"}(ao||(ao={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.ORIGIN_EXPOSURE=1]="ORIGIN_EXPOSURE",t[t.EXPOSURE=2]="EXPOSURE",t[t.PLAY_BACK=3]="PLAY_BACK",t[t.EMPTY=4]="EMPTY",t[t.EFFECT=5]="EFFECT",t[t.FEEDBACK=6]="FEEDBACK",t[t.CLICK=7]="CLICK",t[t.RANGE_EXPOSURE=8]="RANGE_EXPOSURE",t[t.RANGE_PLAY=9]="RANGE_PLAY",t[t.PLUGIN=10]="PLUGIN"}(so||(so={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.COMMON_EXPOSURE_CLICK=1]="COMMON_EXPOSURE_CLICK",t[t.HEADER_CLICK=2]="HEADER_CLICK",t[t.ACTION_BTN_CLICK=3]="ACTION_BTN_CLICK",t[t.POSTER_CLICK=4]="POSTER_CLICK",t[t.COMMON_PLAY=5]="COMMON_PLAY",t[t.COMMON_DOWNLOAD=6]="COMMON_DOWNLOAD",t[t.COMMON=7]="COMMON",t[t.SKIP_CLICK=9]="SKIP_CLICK"}(lo||(lo={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.PICTURE=1]="PICTURE",t[t.QRCODE=2]="QRCODE"}(co||(co={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.IMAGE=1]="IMAGE",t[t.VIDEO=2]="VIDEO"}(po||(po={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VIDEO_TIME=1]="VIDEO_TIME",t[t.TIMESTAMP=2]="TIMESTAMP"}(uo||(uo={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.LEFT_TOP=1]="LEFT_TOP",t[t.LEFT_MIDDLE=2]="LEFT_MIDDLE",t[t.LEFT_BOTTOM=3]="LEFT_BOTTOM",t[t.RIGHT_MIDDLE=4]="RIGHT_MIDDLE"}(ho||(ho={})),function(t){t.SD="sd",t.HD="hd",t.SHD="shd",t.FHD="fhd",t.UHD="uhd",t.HDR10="hdr10",t.DOLBY_VISION="dolby"}(fo||(fo={})),(to={})[fo.SD]=fo.HD,to[fo.HD]=fo.HD,to[fo.SHD]=fo.SHD,to[fo.FHD]=fo.FHD,to[fo.UHD]=fo.FHD,to[fo.HDR10]=fo.FHD,to[fo.DOLBY_VISION]=fo.FHD,function(t){t[t.NORMAL=0]="NORMAL",t[t.SOLO=1]="SOLO"}(vo||(vo={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.FIX=1]="FIX",t[t.FIX_REALTIME=2]="FIX_REALTIME",t[t.DYNAMIC=3]="DYNAMIC"}(mo||(mo={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.LEFT_BOTTOM=1]="LEFT_BOTTOM",t[t.RIGHT_BOTTOM=2]="RIGHT_BOTTOM"}(yo||(yo={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.INTEGRATE=1]="INTEGRATE",t[t.DIRECTLY=2]="DIRECTLY"}(go||(go={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.CARD_BACKGROUND=1]="CARD_BACKGROUND",t[t.CARD_NO_BACKGROUND=2]="CARD_NO_BACKGROUND"}(_o||(_o={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.RIGHT_VERTICAL=1]="RIGHT_VERTICAL",t[t.RIGHT_HORIZONTAL=2]="RIGHT_HORIZONTAL",t[t.LEFT_HORIZONTAL=3]="LEFT_HORIZONTAL",t[t.LEFT_HORIZONTAL_BROKEN=4]="LEFT_HORIZONTAL_BROKEN"}(Ao||(Ao={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.SSO=1]="SSO"}(Eo||(Eo={})),(Co={})[Je.LD]=ro.PRE,Co[Je.KB]=ro.BROADCAST,Co[Je.HT]=ro.TAIL,(Io={})[Xe.LD]=ro.PRE,Io[Xe.HT]=ro.TAIL,Io[Xe.ZC]=ro.MID,Io[Xe.CZC]=ro.CREATIVE_MID,Io[Xe.ZT]=ro.PAUSE,Io[Xe.KB]=ro.BROADCAST,Io[Xe.PSJ]=ro.CORNER,Io[Xe.PLJ]=ro.LIVE_CORNER,Io[Xe.PPB]=ro.PROGRESS_PREVIEW,Io[Xe.PVL]=ro.LOADING,Io[Xe.PDF]=ro.VIDEO_RESOLUTION,Io[Xe.BS]=ro.WATCH_BUY,Io[Xe.VIN]=ro.VIDEO_IN,Io[Xe.PHLS]=ro.HLS_MID,Io[Xe.DER]=ro.ANCHOR_EMPTY,Io[Xe.YXT]=ro.CONTINUED_POST,(xo={})[ro.PRE]="preAd",xo[ro.BROADCAST]="preAd",xo[ro.TAIL]="postAd",xo[ro.MID]="ZC",xo[ro.PAUSE]="ZT",function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.REQUEST=1]="REQUEST",t[t.EXPOSURE=2]="EXPOSURE",t[t.CLICK=3]="CLICK",t[t.FEEDBACK=4]="FEEDBACK"}(To||(To={})),(bo={})[eo.PRE]="pre_ad_params",bo[eo.TAIL]="tail_ad_params",bo[eo.ANCHOR]="anchor_ad_params",bo[eo.PAUSE]="pause_ad_params",bo[eo.PROGRESS_PREVIEW]="progress_preview_ad_params",bo[eo.VIDEO_RESOLUTION]="video_resolution_ad_params",bo[eo.DYNAMIC_MID]="mid_ad_params";var No=function(){return function(){try{var t=localStorage.getItem("frequency_control_data");return t?JSON.parse(t):{}}catch(t){}return{}}()};!function(){var t,e,o,i,n,r=2249,a=-496,s=2007,d=9095,l=l||function(t,e){var o={},i=o.a={},n=function(){},r=i.b={c:function(t){for(var e="",o=0;o<4;o++)e+=String.fromCharCode(2348^"ॅूॅक़".charCodeAt(o));n.prototype=this;var i=new n;return t&&i.d(t),i.hasOwnProperty(e)||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.c();return t.init.apply(t,arguments),t},init:function(){},d:function(t){for(var e="",o=0;o<8;o++)e+=String.fromCharCode(778^";͙ͥ;͸ͣͤͭ".charCodeAt(o));for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);t.hasOwnProperty(e)&&(this.toString=t.toString)},e:function(){return this.init.prototype.c(this)}},a=i.f=r.c({init:function(t,e){t=this.g=t||[],this.h=null!=e?e:4*t.length},toString:function(t){return(t||d).i(this)},concat:function(t){var e=this.g,o=t.g,i=this.h;if(t=t.h,this.j(),i%4)for(var n=0;n<t;n++)e[i+n>>>2]|=(o[n>>>2]>>>24-n%4*8&255)<<24-(i+n)%4*8;else if(65535<o.length)for(n=0;n<t;n+=4)e[i+n>>>2]=o[n>>>2];else e.push.apply(e,o);return this.h+=t,this},j:function(){var e=this.g,o=this.h;e[o>>>2]&=4294967295<<32-o%4*8,e.length=t.ceil(o/4)},e:function(){var t=r.e.call(this);return t.g=this.g.slice(0),t},random:function(e){for(var o=[],i=0;i<e;i+=4)o.push(4294967296*t.random()|0);return new a.init(o,e)}}),s=o.k={},d=s.l={i:function(t){for(var e="",o=0;o<0;o++)e+=String.fromCharCode(368^"".charCodeAt(o));var i=t.g;t=t.h;for(var n=[],r=0;r<t;r++){var a=i[r>>>2]>>>24-r%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join(e)},parse:function(t){for(var e=t.length,o=[],i=0;i<e;i+=2)o[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new a.init(o,e/2)}},l=s.m={i:function(t){for(var e="",o=0;o<0;o++)e+=String.fromCharCode(2238^"".charCodeAt(o));var i=t.g;t=t.h;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(i[r>>>2]>>>24-r%4*8&255));return n.join(e)},parse:function(t){for(var e=t.length,o=[],i=0;i<e;i++)o[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new a.init(o,e)}},c=s.n={i:function(t){for(var e="",o=0;o<20;o++)e+=String.fromCharCode(149^"ØôùóúçøðñµÀÁÓ¸­µñôáô".charCodeAt(o));try{return decodeURIComponent(escape(l.i(t)))}catch(t){throw Error(e)}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},p=i.o=r.c({p:function(){this.q=new a.init,this.r=0},s:function(t){for(var e="",o=0;o<6;o++)e+=String.fromCharCode(4052^"ྦྷྠྦ྽ྺླ".charCodeAt(o));e==typeof t&&(t=c.parse(t)),this.q.concat(t),this.r+=t.h},t:function(e){var o=this.q,i=o.g,n=o.h,r=this.u,s=n/(4*r);if(e=(s=e?t.ceil(s):t.max((0|s)-this.v,0))*r,n=t.min(4*e,n),e){for(var d=0;d<e;d+=r)this.w(i,d);d=i.splice(0,e),o.h-=n}return new a.init(d,n)},e:function(){var t=r.e.call(this);return t.q=this.q.e(),t},v:0});i.x=p.c({y:r.c(),init:function(t){this.y=this.y.c(t),this.p()},p:function(){p.p.call(this),this.z()},A:function(t){return this.s(t),this.t(),this},B:function(t){return t&&this.s(t),this.C()},u:16,D:function(t){return function(e,o){return new t.init(o).B(e)}},F:function(t){return function(e,o){return new u.HMAC.init(t,o).B(e)}}});var u=o.G={};return o}(Math);(function(){for(var t="",e=0;e<65;e++)t+=String.fromCharCode(208^"±²³´µ¶·¸¹º»¼½¾¿ ¡¢£¤¥¦§¨©ªàáâãäåæçèéûÿí".charCodeAt(e));var o=l,i=o.a.f;o.k.H={i:function(t){for(var e="",o=0;o<0;o++)e+=String.fromCharCode(4077^"".charCodeAt(o));var i=t.g,n=t.h,r=this.I;t.j(),t=[];for(var a=0;a<n;a+=3)for(var s=(i[a>>>2]>>>24-a%4*8&255)<<16|(i[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|i[a+2>>>2]>>>24-(a+2)%4*8&255,d=0;4>d&&a+.75*d<n;d++)t.push(r.charAt(s>>>6*(3-d)&63));if(i=r.charAt(64))for(;t.length%4;)t.push(i);return t.join(e)},parse:function(t){var e=t.length,o=this.I;(n=o.charAt(64))&&-1!=(n=t.indexOf(n))&&(e=n);for(var n=[],r=0,a=0;a<e;a++)if(a%4){var s=o.indexOf(t.charAt(a-1))<<a%4*2,d=o.indexOf(t.charAt(a))>>>6-a%4*2;n[r>>>2]|=(s|d)<<24-r%4*8,r++}return i.create(n,r)},I:t}})(),function(t){var e=-5616,o=-7555,i=-458,n=1071,c=927,p=-2568,u=6326,h=-4204,f=4918,v=7574,m=6160,y=855,g=-9137,_=2297,A=-9619,E=-8866,C=-6091,I=-7050,x=-1233,T=-7874,b=5847,L=5062,P=-4552,N=4635;function D(t,e,o,i,n,r,a){return H.call(this,0,t,e,o,i,n,r,a)}function O(t,e,o,i,n,r,a){return H.call(this,1,t,e,o,i,n,r,a)}function w(t,e,o,i,n,r,a){return H.call(this,2,t,e,o,i,n,r,a)}function S(t,e,o,i,n,r,a){return H.call(this,3,t,e,o,i,n,r,a)}for(var R=l,M=(k=R.a).f,V=k.x,k=R.G,U=[],B=0;64>B;B++)U[B]=4294967296*t.abs(t.sin(B+1))|0;function H(t){switch(t){case 0:var r=arguments[1],a=arguments[f+7592+7592-20100],l=arguments[m+y-7012],D=arguments[v+g+1567],O=arguments[-1789+_-503],w=arguments[A+E+-2285+20776];return((r=r+(a&l|~a&D)+O+arguments[7])<<w|r>>>32-w)+a;case C+e+11708:return((r=(r=arguments[I+7051])+((a=arguments[2])&(D=arguments[4])|(l=arguments[u+d+-9220-6198])&~D)+(O=arguments[-5315+o+12875])+arguments[7])<<(w=arguments[6])|r>>>-9475+x+d+1645-w)+a;case i+460:return((r=(r=arguments[1])+((a=arguments[2])^(l=arguments[T+-6801+14678])^(D=arguments[u+n-7393]))+(O=arguments[p+b+36-3310])+arguments[7])<<(w=arguments[6])|r>>>32-w)+a;case L+P+-2667+2160:return((r=(r=arguments[1])+((l=arguments[s+c-2931])^((a=arguments[2])|~(D=arguments[4])))+(O=arguments[N-4630])+arguments[7])<<(w=arguments[6])|r>>>-8328+h+-2734+15298-w)+a}}k=k.J=V.c({z:function(){this.K=new M.init([1732584193,4023233417,2562383102,271733878])},w:function(t,d){for(var l=0;16>l;l++){var f=t[y=d+l];t[y]=16711935&(f<<8|f>>>e+5640)|4278255360&(f<<24|f>>>8)}l=this.K.g;var v,m,y=t[d+0],g=(f=t[d+1],t[d+2]),_=t[d+3],A=t[d+4],E=t[d+5],C=t[d+(e+r+5624-2251)],I=t[d+7],x=t[d+8],T=t[d+9],b=t[d+10],L=t[d+11],P=t[d+12],N=t[d+13],R=t[d+14],M=t[d+15],V=l[0],k=S(k=S(k=S(k=S(k=w(k=w(k=w(k=w(k=O(k=O(k=O(k=O(k=D(k=D(k=D(k=D(k=l[1],m=D(m=l[2],v=D(v=l[3],V=D(V,k,m,v,y,7,U[0]),k,m,f,12,U[1]),V,k,g,5903+e-270,U[2]),v,V,_,22,U[3]),m=D(m,v=D(v,V=D(V,k,m,v,A,7,U[4]),k,m,E,12,U[5]),V,k,C,17,U[6]),v,V,I,22,U[7]),m=D(m,v=D(v,V=D(V,k,m,v,x,7,U[8]),k,m,T,12,U[9]),V,k,b,4264+e+1369,U[10]),v,V,L,22,U[11]),m=D(m,v=D(v,V=D(V,k,m,v,P,7,U[12]),k,m,N,12,U[13]),V,k,R,17,U[1227+o+6342]),v,V,M,22,U[i+-1821+806+1488]),m=O(m,v=O(v,V=O(V,k,m,v,f,-7413+e+13034,U[16]),k,m,C,9,U[17]),V,k,L,14,U[18]),v,V,y,20,U[19]),m=O(m,v=O(v,V=O(V,k,m,v,E,5,U[n-1051]),k,m,b,9,U[21]),V,k,M,14,U[22]),v,V,A,20,U[23]),m=O(m,v=O(v,V=O(V,k,m,v,T,5,U[24]),k,m,R,9,U[25]),V,k,_,14,U[c-901]),v,V,x,12598+p-10010,U[27]),m=O(m,v=O(v,V=O(V,k,m,v,N,5,U[-4202+u-2096]),k,m,g,9,U[29]),V,k,I,a+e+u-200,U[30]),v,V,P,p+9955-7367,U[31]),m=w(m,v=w(v,V=w(V,k,m,v,E,4,U[32]),k,m,x,11,U[33]),V,k,L,16,U[34]),v,V,R,23,U[35]),m=w(m,v=w(v,V=w(V,k,m,v,f,4,U[36]),k,m,A,11,U[37]),V,k,I,16,U[38]),v,V,b,23,U[39]),m=w(m,v=w(v,V=w(V,k,m,v,N,e+i+s+4071,U[40]),k,m,y,11,U[41]),V,k,_,16,U[42]),v,V,C,23,U[43]),m=w(m,v=w(v,V=w(V,k,m,v,T,4,U[44]),k,m,P,11,U[45]),V,k,M,16,U[46]),v,V,g,23,U[47]),m=S(m,v=S(v,V=S(V,k,m,v,y,6,U[48]),k,m,I,10,U[49]),V,k,R,15,U[50]),v,V,E,21,U[51]),m=S(m,v=S(v,V=S(V,k,m,v,P,6,U[52]),k,m,_,10,U[53]),V,k,b,15,U[54]),v,V,f,21,U[55]),m=S(m,v=S(v,V=S(V,k,m,v,x,6,U[56]),k,m,M,2260+i-1792,U[57]),V,k,C,15,U[-990+h+5252]),v,V,N,21,U[59]),m=S(m,v=S(v,V=S(V,k,m,v,A,6,U[60]),k,m,L,10,U[61]),V,k,g,15,U[62]),v,V,T,21,U[63]);l[0]=l[0]+V|0,l[1]=l[1]+k|0,l[2]=l[2]+m|0,l[3]=l[3]+v|0},C:function(){var e=this.q,o=e.g,n=(6876+i+-335-6075)*this.r,r=8*e.h;o[r>>>8761+f+1268-14942]|=128<<24-r%32;var a=t.floor(n/4294967296);for(o[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),o[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.h=4*(o.length+1),this.t(),o=(e=this.K).g,n=0;4>n;n++)r=o[n],o[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>2244+v+2814-12624);return e},e:function(){var t=V.e.call(this);return t.K=this.K.e(),t}}),R.J=V.D(k),R.L=V.F(k)}(Math),o=(t=(e=l).a).b,i=t.f,n=(t=e.G).M=o.c({y:o.c({N:4,O:t.J,P:1}),init:function(t){this.y=this.y.c(t)},Q:function(t,e){for(var o=(s=this.y).O.create(),n=i.create(),r=n.g,a=s.N,s=s.P;r.length<a;){d&&o.A(d);var d=o.A(t).B(e);o.p();for(var l=1;l<s;l++)d=o.B(d),o.p();n.concat(d)}return n.h=4*a,n}}),e.M=function(t,e,o){return n.create(o).Q(t,e)},l.a.R||function(t){var e=(f=l).a,o=e.b,i=e.f,n=e.o,r=f.k.H,a=f.G.M,s=e.R=n.c({y:o.c(),S:function(t,e){return this.create(this.T,t,e)},U:function(t,e){return this.create(this.V,t,e)},init:function(t,e,o){this.y=this.y.c(o),this.W=t,this.X=e,this.p()},p:function(){n.p.call(this),this.z()},Y:function(t){return this.s(t),this.t()},B:function(t){return t&&this.s(t),this.C()},N:4,Z:4,T:1,V:2,D:function(t){return{$:function(e,o,i){for(var n="",r=0;r<6;r++)n+=String.fromCharCode(403^"ǠǧǡǺǽǴ".charCodeAt(r));return(n==typeof o?v:h).$(t,e,o,i)},_:function(e,o,i){for(var n="",r=0;r<6;r++)n+=String.fromCharCode(2219^"ࣘࣟࣙࣂࣅ࣌".charCodeAt(r));return(n==typeof o?v:h)._(t,e,o,i)}}}});e.aa=s.c({C:function(){return this.t(!0)},u:1});var d=f.ba={},c=function(t,e,o){var i=this.ca;i?this.ca=void 0:i=this.da;for(var n=0;n<o;n++)t[e+n]^=i[n]},p=(e.ea=o.c({S:function(t,e){return this.fa.create(t,e)},U:function(t,e){return this.ga.create(t,e)},init:function(t,e){this.ha=t,this.ca=e}})).c();p.fa=p.c({ia:function(t,e){var o=this.ha,i=o.u;c.call(this,t,e,i),o.ja(t,e),this.da=t.slice(e,e+i)}}),p.ga=p.c({ia:function(t,e){var o=this.ha,i=o.u,n=t.slice(e,e+i);o.ka(t,e),c.call(this,t,e,i),this.da=n}}),d=d.la=p,p=(f.na={}).ma={na:function(t,e){for(var o,n=(o=(o=4*e)-t.h%o)<<24|o<<16|o<<8|o,r=[],a=0;a<o;a+=4)r.push(n);o=i.create(r,o),t.concat(o)},oa:function(t){t.h-=255&t.g[t.h-1>>>2]}},e.pa=s.c({y:s.y.c({ba:d,qa:p}),p:function(){s.p.call(this);var t=(e=this.y).ra,e=e.ba;if(this.W==this.T)var o=e.S;else o=e.U,this.v=1;this.sa=o.call(e,this,t&&t.g)},w:function(t,e){this.sa.ia(t,e)},C:function(){var t=this.y.qa;if(this.W==this.T){t.na(this.q,this.u);var e=this.t(!0)}else e=this.t(!0),t.oa(e);return e},u:4});var u=e.ta=o.c({init:function(t){this.d(t)},toString:function(t){return(t||this.ua).i(this)}}),h=(d=(f.wa={}).va={i:function(t){var e=t.xa;return((t=t.ya)?i.create([1398893684,1701076831]).concat(t).concat(e):e).toString(r)},parse:function(t){var e=(t=r.parse(t)).g;if(1398893684==e[0]&&1701076831==e[1]){var o=i.create(e.slice(2,4));e.splice(0,4),t.h-=16}return u.create({xa:t,ya:o})}},e.za=o.c({y:o.c({wa:d}),$:function(t,e,o,i){i=this.y.c(i);var n=t.S(o,i);return e=n.B(e),n=n.y,u.create({xa:e,Aa:o,ra:n.ra,Ba:t,ba:n.ba,qa:n.qa,u:t.u,ua:i.wa})},_:function(t,e,o,i){return i=this.y.c(i),e=this.Ca(e,i.wa),t.U(o,i).B(e.xa)},Ca:function(t,e){for(var o="",i=0;i<6;i++)o+=String.fromCharCode(2150^"ࠕࠒࠔࠏࠈࠁ".charCodeAt(i));return o==typeof t?e.parse(t,this):t}})),f=(f.Da={}).va={Ea:function(t,e,o,n){return n||(n=i.random(8)),t=a.create({N:e+o}).Q(t,n),o=i.create(t.g.slice(e),4*o),t.h=4*e,u.create({Aa:t,ra:o,ya:n})}},v=e.Fa=h.c({y:h.y.c({Da:f}),$:function(t,e,o,i){return o=(i=this.y.c(i)).Da.Ea(o,t.N,t.Z),i.ra=o.ra,(t=h.$.call(this,t,e,o.Aa,i)).d(o),t},_:function(t,e,o,i){return i=this.y.c(i),e=this.Ca(e,i.wa),o=i.Da.Ea(o,t.N,t.Z,e.ya),i.ra=o.ra,h._.call(this,t,e,o.Aa,i)}})}(),function(){for(var t=l,e=t.a.pa,o=t.G,i=[],n=[],r=[],a=[],s=[],d=[],c=[],p=[],u=[],h=[],f=[],v=0;256>v;v++)f[v]=128>v?v<<1:v<<1^283;var m=0,y=0;for(v=0;256>v;v++){var g=(g=y^y<<1^y<<2^y<<3^y<<4)>>>8^255&g^99;i[m]=g,n[g]=m;var _=f[m],A=f[_],E=f[A],C=257*f[g]^16843008*g;r[m]=C<<24|C>>>8,a[m]=C<<16|C>>>16,s[m]=C<<8|C>>>24,d[m]=C,C=16843009*E^65537*A^257*_^16843008*m,c[g]=C<<24|C>>>8,p[g]=C<<16|C>>>16,u[g]=C<<8|C>>>24,h[g]=C,m?(m=_^f[f[f[E^_]]],y^=f[f[y]]):m=y=1}var I=[0,1,2,4,8,16,32,64,128,27,54];o=o.Ga=e.c({z:function(){for(var t=(o=this.X).g,e=o.h/4,o=4*((this.Ha=e+6)+1),n=this.Ia=[],r=0;r<o;r++)if(r<e)n[r]=t[r];else{var a=n[r-1];r%e?6<e&&4==r%e&&(a=i[a>>>24]<<24|i[a>>>16&255]<<16|i[a>>>8&255]<<8|i[255&a]):(a=i[(a=a<<8|a>>>24)>>>24]<<24|i[a>>>16&255]<<16|i[a>>>8&255]<<8|i[255&a],a^=I[r/e|0]<<24),n[r]=n[r-e]^a}for(t=this.Ja=[],e=0;e<o;e++)r=o-e,a=e%4?n[r]:n[r-4],t[e]=4>e||4>=r?a:c[i[a>>>24]]^p[i[a>>>16&255]]^u[i[a>>>8&255]]^h[i[255&a]]},ja:function(t,e){this.Ka(t,e,this.Ia,r,a,s,d,i)},ka:function(t,e){var o=t[e+1];t[e+1]=t[e+3],t[e+3]=o,this.Ka(t,e,this.Ja,c,p,u,h,n),o=t[e+1],t[e+1]=t[e+3],t[e+3]=o},Ka:function(t,e,o,i,n,r,a,s){for(var d=this.Ha,l=t[e]^o[0],c=t[e+1]^o[1],p=t[e+2]^o[2],u=t[e+3]^o[3],h=4,f=1;f<d;f++){var v=i[l>>>24]^n[c>>>16&255]^r[p>>>8&255]^a[255&u]^o[h++],m=i[c>>>24]^n[p>>>16&255]^r[u>>>8&255]^a[255&l]^o[h++],y=i[p>>>24]^n[u>>>16&255]^r[l>>>8&255]^a[255&c]^o[h++];u=i[u>>>24]^n[l>>>16&255]^r[c>>>8&255]^a[255&p]^o[h++],l=v,c=m,p=y}v=(s[l>>>24]<<24|s[c>>>16&255]<<16|s[p>>>8&255]<<8|s[255&u])^o[h++],m=(s[c>>>24]<<24|s[p>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^o[h++],y=(s[p>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&c])^o[h++],u=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[c>>>8&255]<<8|s[255&p])^o[h++],t[e]=v,t[e+1]=m,t[e+2]=y,t[e+3]=u},N:8}),t.Ga=e.D(o)}()}();var Do,Oo,wo=function(t){if(!t)return"";var e=Po("main_login");if(!e)return"";if("main_login"===t)return e;var o=Po("vqq_".concat(t));return"qq"===e&&o?o:Po(t)},So=function(t){return"qq"===(null==t?void 0:t.toLowerCase())?io.QQ:"wx"===(null==t?void 0:t.toLowerCase())?io.WX:"phone"===(null==t?void 0:t.toLowerCase())?io.PHONE:io.GUEST},Ro=function(t){if(void 0===t&&(t="lossy"),void 0!==Do)return Do;var e=new Image,o={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return new Promise((function(i){e.onload=function(){Do=!0,i(!0)},e.onerror=function(){Do=!1,i(!1)},e.src="data:image/webp;base64,".concat(o[t])}))};Ro(),function(t){t.OUT="out",t.IN="in",t.H5="H5",t.CLIENT="client"}(Oo||(Oo={})),function(){function t(){var t=this;this.startTime=Date.now(),this.promise=new Promise((function(e,o){t.fn={resolve:e,reject:o}}))}Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return this.promise[Symbol.toStringTag]},enumerable:!1,configurable:!0}),t.prototype.resolve=function(t){this.fn.resolve(t)},t.prototype.reject=function(t){this.fn.reject(t)},t.prototype.then=function(t,e){return this.promise.then(t,e)},t.prototype.catch=function(t){return this.promise.catch(t)},t.prototype.finally=function(t){return this.promise.finally(t)}}();var Mo,Vo,ko=function(){function t(t,e){this.storageKey=t,this.options=e}return Object.defineProperty(t.prototype,"storage",{get:function(){var t;return(null===(t=this.options)||void 0===t?void 0:t.useSessionStorage)?window.sessionStorage:window.localStorage},enumerable:!1,configurable:!0}),t.prototype.getData=function(t){if(!t&&this.storageData)return this.storageData;try{var e=this.storage.getItem(this.storageKey);if(e)return this.storageData=JSON.parse(e),this.storageData}catch(t){}},t.prototype.setData=function(t){try{this.storageData=t;var e=JSON.stringify(this.storageData);this.storage.setItem(this.storageKey,e)}catch(t){}},t.prototype.clear=function(){this.storage.removeItem(this.storageKey)},t}();function Uo(t,e){void 0===e&&(e=window.location.href);var o,i=new RegExp("(^|&|\\\\?)".concat(t,"=([^&]*)(&|$|#)"));return(o=e.match(i))?o[2]:""}!function(t){t[t.LessThan=-1]="LessThan",t[t.EqualTo=0]="EqualTo",t[t.GreaterThan=1]="GreaterThan"}(Mo||(Mo={})),!(Vo=new ko("TxpCreativePlayer-vid-url").getData())||function(t){Object.entries(t).forEach((function(t){t[0];var e=t[1];e&&(Date.now(),e.time)}))}(Vo);var Bo,Ho,zo,Ko,$o,Go,Yo,Wo,Fo,qo,jo,Qo,Zo,Xo,Jo,ti,ei=function(){return t.uaTool.os.iphone?"iphone":t.uaTool.os.ipad?"ipad":t.uaTool.os.android?"android":t.uaTool.os.windows||t.uaTool.os.mac?"pc":""},oi=function(e){if(/ptag=wx\.search/i.test(window.location.href))return 64;if(void 0!==(null==e?void 0:e.playerChid))return e.playerChid;var o=NaN;return/(.*\.)3g\.qq\.com$/i.test(window.location.hostname)?o=13:/(.*\.)?v\.qq\.com$/i.test(window.location.hostname)||t.uaTool.browser.qqlive?o=t.uaTool.browser.wechat&&t.uaTool.mobile?180:/(.*\.)?v\.qq\.com$/i.test(window.location.hostname)&&t.uaTool.mobile?191:0:t.uaTool.browser.wechat&&window.location.href.indexOf("/x/qqnews/")>-1?o=3:t.uaTool.browser.mqq&&window.location.href.indexOf("/x/qqnews/")>-1?o=10:t.uaTool.browser.qqnews&&(o=2),o};function ii(){for(var t,e=document.location.toString().toLowerCase(),o="",i=["ptag","adtag","pgv_ref"],n=0,r=i.length;n<r&&!(o=Uo(i[n],e));n++);if(!o)try{o=null!==(t=sessionStorage.getItem("ptag"))&&void 0!==t?t:""}catch(t){}if(!o){var a=function(t){if(null==t||""===t)return"";var e=document.createElement("a");return e.href=t,e.hostname}(document.referrer);a&&-1===["v.qq.com","film.qq.com","m.v.qq.com"].indexOf(a)&&(o=a.replace(/\./g,"_"))}return o||(o=Po("ptag")),o}!function(t){t.LD="LD",t.HT="HT",t.ZC="ZC",t.CZC="CZC",t.ZT="ZT",t.KB="KB",t.PSJ="PSJ",t.PLJ="PLJ",t.PPB="PPB",t.PVL="PVL",t.PDF="PDF",t.BS="BS",t.VIN="VIN",t.PHLS="PHLS",t.DER="DER",t.YXT="YXT"}(Bo||(Bo={})),function(t){t.LD="WL",t.KB="WK",t.HT="WH"}(Ho||(Ho={})),function(t){t[t.PRE=1]="PRE",t[t.TAIL=2]="TAIL",t[t.ANCHOR=3]="ANCHOR",t[t.PAUSE=4]="PAUSE",t[t.PROGRESS_PREVIEW=5]="PROGRESS_PREVIEW",t[t.VIDEO_RESOLUTION=6]="VIDEO_RESOLUTION",t[t.DYNAMIC_MID=7]="DYNAMIC_MID"}(Ko||(Ko={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.NOT_LOGIN=0]="NOT_LOGIN",t[t.LOGIN=1]="LOGIN",t[t.HLW_VIP=2]="HLW_VIP",t[t.TV_VIP=9]="TV_VIP",t[t.SPORTS_VIP=10]="SPORTS_VIP",t[t.SPORTS_SVIP=12]="SPORTS_SVIP"}($o||($o={})),function(t){t[t.GUEST=0]="GUEST",t[t.QQ=1]="QQ",t[t.WX=2]="WX",t[t.PHONE=3]="PHONE"}(Go||(Go={})),function(t){t[t.OK=0]="OK"}(Yo||(Yo={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.PRE=1]="PRE",t[t.BROADCAST=2]="BROADCAST",t[t.TAIL=3]="TAIL",t[t.PAUSE=4]="PAUSE",t[t.LOADING=5]="LOADING",t[t.PROGRESS_PREVIEW=6]="PROGRESS_PREVIEW",t[t.VIDEO_RESOLUTION=7]="VIDEO_RESOLUTION",t[t.MID=8]="MID",t[t.CREATIVE_MID=9]="CREATIVE_MID",t[t.HLS_MID=10]="HLS_MID",t[t.CORNER=11]="CORNER",t[t.LIVE_CORNER=12]="LIVE_CORNER",t[t.VIDEO_IN=13]="VIDEO_IN",t[t.WATCH_BUY=14]="WATCH_BUY",t[t.ANCHOR_EMPTY=15]="ANCHOR_EMPTY",t[t.NON_STANDARD=16]="NON_STANDARD",t[t.DYNAMIC_MID=17]="DYNAMIC_MID",t[t.CONTINUED_POST=18]="CONTINUED_POST"}(Wo||(Wo={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.CLICK=1]="CLICK",t[t.SCAN=2]="SCAN"}(Fo||(Fo={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.ORIGIN_EXPOSURE=1]="ORIGIN_EXPOSURE",t[t.EXPOSURE=2]="EXPOSURE",t[t.PLAY_BACK=3]="PLAY_BACK",t[t.EMPTY=4]="EMPTY",t[t.EFFECT=5]="EFFECT",t[t.FEEDBACK=6]="FEEDBACK",t[t.CLICK=7]="CLICK",t[t.RANGE_EXPOSURE=8]="RANGE_EXPOSURE",t[t.RANGE_PLAY=9]="RANGE_PLAY",t[t.PLUGIN=10]="PLUGIN"}(qo||(qo={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.COMMON_EXPOSURE_CLICK=1]="COMMON_EXPOSURE_CLICK",t[t.HEADER_CLICK=2]="HEADER_CLICK",t[t.ACTION_BTN_CLICK=3]="ACTION_BTN_CLICK",t[t.POSTER_CLICK=4]="POSTER_CLICK",t[t.COMMON_PLAY=5]="COMMON_PLAY",t[t.COMMON_DOWNLOAD=6]="COMMON_DOWNLOAD",t[t.COMMON=7]="COMMON",t[t.SKIP_CLICK=9]="SKIP_CLICK"}(jo||(jo={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.PICTURE=1]="PICTURE",t[t.QRCODE=2]="QRCODE"}(Qo||(Qo={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.IMAGE=1]="IMAGE",t[t.VIDEO=2]="VIDEO"}(Zo||(Zo={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VIDEO_TIME=1]="VIDEO_TIME",t[t.TIMESTAMP=2]="TIMESTAMP"}(Xo||(Xo={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.LEFT_TOP=1]="LEFT_TOP",t[t.LEFT_MIDDLE=2]="LEFT_MIDDLE",t[t.LEFT_BOTTOM=3]="LEFT_BOTTOM",t[t.RIGHT_MIDDLE=4]="RIGHT_MIDDLE"}(Jo||(Jo={})),function(t){t.SD="sd",t.HD="hd",t.SHD="shd",t.FHD="fhd",t.UHD="uhd",t.HDR10="hdr10",t.DOLBY_VISION="dolby"}(ti||(ti={}));var ni,ri,ai,si,di,li,ci,pi,ui,hi,fi=((zo={})[ti.SD]=ti.HD,zo[ti.HD]=ti.HD,zo[ti.SHD]=ti.SHD,zo[ti.FHD]=ti.FHD,zo[ti.UHD]=ti.FHD,zo[ti.HDR10]=ti.FHD,zo[ti.DOLBY_VISION]=ti.FHD,zo);!function(t){t[t.NORMAL=0]="NORMAL",t[t.SOLO=1]="SOLO"}(ni||(ni={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.FIX=1]="FIX",t[t.FIX_REALTIME=2]="FIX_REALTIME",t[t.DYNAMIC=3]="DYNAMIC"}(ri||(ri={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.LEFT_BOTTOM=1]="LEFT_BOTTOM",t[t.RIGHT_BOTTOM=2]="RIGHT_BOTTOM"}(ai||(ai={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.INTEGRATE=1]="INTEGRATE",t[t.DIRECTLY=2]="DIRECTLY"}(si||(si={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.CARD_BACKGROUND=1]="CARD_BACKGROUND",t[t.CARD_NO_BACKGROUND=2]="CARD_NO_BACKGROUND"}(di||(di={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.RIGHT_VERTICAL=1]="RIGHT_VERTICAL",t[t.RIGHT_HORIZONTAL=2]="RIGHT_HORIZONTAL",t[t.LEFT_HORIZONTAL=3]="LEFT_HORIZONTAL",t[t.LEFT_HORIZONTAL_BROKEN=4]="LEFT_HORIZONTAL_BROKEN"}(li||(li={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.SSO=1]="SSO"}(ci||(ci={}));var vi,mi,yi=((pi={})[Ho.LD]=Wo.PRE,pi[Ho.KB]=Wo.BROADCAST,pi[Ho.HT]=Wo.TAIL,pi),gi=((ui={})[Bo.LD]=Wo.PRE,ui[Bo.HT]=Wo.TAIL,ui[Bo.ZC]=Wo.MID,ui[Bo.CZC]=Wo.CREATIVE_MID,ui[Bo.ZT]=Wo.PAUSE,ui[Bo.KB]=Wo.BROADCAST,ui[Bo.PSJ]=Wo.CORNER,ui[Bo.PLJ]=Wo.LIVE_CORNER,ui[Bo.PPB]=Wo.PROGRESS_PREVIEW,ui[Bo.PVL]=Wo.LOADING,ui[Bo.PDF]=Wo.VIDEO_RESOLUTION,ui[Bo.BS]=Wo.WATCH_BUY,ui[Bo.VIN]=Wo.VIDEO_IN,ui[Bo.PHLS]=Wo.HLS_MID,ui[Bo.DER]=Wo.ANCHOR_EMPTY,ui[Bo.YXT]=Wo.CONTINUED_POST,ui),_i=((hi={})[Wo.PRE]="preAd",hi[Wo.BROADCAST]="preAd",hi[Wo.TAIL]="postAd",hi[Wo.MID]="ZC",hi[Wo.PAUSE]="ZT",hi),Ai={toAdCoreType:function(t){var e=gi[t];if(e)return e;if(e=yi[t])return e;var o=Object.entries(_i).find((function(e){return e[1]===t}));return o?Number(o[0]):Wo.UNKNOWN},toAdTypeV:function(t){var e=Object.entries(gi).find((function(e){return e[1]===t}));if(e)return e[0]},toAdTypeM:function(t){var e=Object.entries(yi).find((function(e){return e[1]===t}));if(e)return e[0]},toThumbPlayerAdType:function(t){return _i[t]},getAdScene:function(t){if("number"==typeof t)return t;var e=Ai.toAdCoreType(t);return e===Wo.MID?Ko.DYNAMIC_MID:e===Wo.PRE?Ko.PRE:e===Wo.TAIL?Ko.TAIL:Ko.PRE}};!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.REQUEST=1]="REQUEST",t[t.EXPOSURE=2]="EXPOSURE",t[t.CLICK=3]="CLICK",t[t.FEEDBACK=4]="FEEDBACK"}(vi||(vi={}));var Ei=((mi={})[Ko.PRE]="pre_ad_params",mi[Ko.TAIL]="tail_ad_params",mi[Ko.ANCHOR]="anchor_ad_params",mi[Ko.PAUSE]="pause_ad_params",mi[Ko.PROGRESS_PREVIEW]="progress_preview_ad_params",mi[Ko.VIDEO_RESOLUTION]="video_resolution_ad_params",mi[Ko.DYNAMIC_MID]="mid_ad_params",mi);window.QimeiWeb||function(t,e,o){var i=document.createElement("script");i.type="text/javascript",i.charset="UTF-8",i.src=t;if(i.onerror=function(t){!0},void(i.addEventListener?i.addEventListener("load",(function(){!0}),!1):i.attachEvent&&i.attachEvent("onreadystatechange",(function(){"complete"===window.event.srcElement.readyState&&!0})))){var n=document.createElement("base");n.href=i.src.match(/.+\//)[0],o.doc.getElementsByTagName("head")[0].appendChild(n)}document.getElementsByTagName("head")[0].appendChild(i),setTimeout((function(){}),5e3)}("https://staticfile.qq.com/qimei/qimeisdk-web/0.6.3/index.js");var Ci=function(){function t(){this.name="module"}return t.prototype.setOptions=function(t){this.options=t},t.prototype.setAdCore=function(t){this.adCore=t,this.logger=t.logger.createLogger(this.name)},t.prototype.init=function(){},t}(),Ii=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="adCtrlModule",e.runningSingleAdMap=new Map,e.runningMultipleAdMap=new Map,e}return i(e,t),e.prototype.destroyAd=function(t){var e;this.logger.log("".concat(t.adType," 类型广告销毁"));var o=this.adCore.plugin.getAdPlugin(t.adType);if(null==o?void 0:o.isMultiple){var i=null===(e=t.adInfo)||void 0===e?void 0:e.orderId;if(i){var n=this.runningMultipleAdMap.get(t.adType);n&&(n.delete(i),0===n.size&&this.runningMultipleAdMap.delete(t.adType))}}else{this.runningSingleAdMap.get(t.adType)===t&&this.runningSingleAdMap.delete(t.adType)}},e.prototype.loadAd=function(t){this.logger.log("loadAd",t);var e=this.adCore.plugin.getAdPlugin(t);if(!e)return this.logger.warn("'".concat(t,"' 类型的广告未注册")),Promise.reject();if(e.isPointAd)return this.logger.warn("点位广告请使用 `loadAdOrder` 方法"),Promise.reject();var o=this.adCore.order.getAdOrder(t);return o?this.loadAdOrder(o):(this.logger.warn("没有找到 '".concat(t,"' 类型的广告订单")),Promise.reject())},e.prototype.loadAdOrder=function(t){var e=t.adType;this.logger.log("loadAdOrder",e);var o=this.adCore.plugin.getAdPlugin(e);return o?t?o.isMultiple?this.createMultipleAd(e,o,t):this.createSingleAd(e,o,t):(this.logger.warn("没有找到 '".concat(e,"' 类型的广告订单")),Promise.reject()):(this.logger.warn("'".concat(e,"' 类型的广告未注册")),Promise.reject())},e.prototype.getSingleAds=function(){return Array.from(this.runningSingleAdMap.values())},e.prototype.getMultipleAds=function(){return Array.from(this.runningMultipleAdMap.entries())},e.prototype.getRunningAds=function(t,e){var o=this.adCore.plugin.getAdPlugin(t);if(!(null==o?void 0:o.isMultiple))return(i=this.runningSingleAdMap.get(t))?[i]:[];var i,n=this.runningMultipleAdMap.get(t);return(null==n?void 0:n.size)?e?(i=n.get(e))?[i]:[]:Array.from(n.values()):[]},e.prototype.stopAllAd=function(){this.logger.log("stopAllAd"),this.forEachAd((function(t){t.stop(!0)})),this.runningSingleAdMap.clear(),this.runningMultipleAdMap.clear()},e.prototype.forEachAd=function(t){this.runningSingleAdMap.forEach((function(e){t(e)})),this.runningMultipleAdMap.forEach((function(e){e.forEach((function(e){t(e)}))}))},e.prototype.createMultipleAd=function(t,e,o){var i=this,n=this.runningMultipleAdMap.get(t);n||(n=new Map,this.runningMultipleAdMap.set(t,n));var r=o.orders.filter((function(t){return!n.has(t.orderId)}));if(0===r.length)return Promise.resolve(!0);try{return r.forEach((function(t){var r=e.creator(i.adCore,D(D({},o),{orders:[t],empty:[]}));r&&(n.set(t.orderId,r),r.load())})),Promise.resolve(!0)}catch(e){this.adCore.event.emit(Ge.AD_ERROR,{adType:t,msg:"load ".concat(t," ad error"),event:e})}return Promise.reject()},e.prototype.createSingleAd=function(t,e,o){var i=this.runningSingleAdMap.get(t);i&&i.stop(!0);try{var n=e.creator(this.adCore,D({},o));if(n)return this.runningSingleAdMap.set(t,n),n.load(),Promise.resolve(0!==n.order.orders.length)}catch(e){this.adCore.event.emit(Ge.AD_ERROR,{adType:t,msg:"load ".concat(t," ad error"),event:e})}return Promise.reject()},e}(Ci),xi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="adPluginModule",e.adPluginMap=new Map,e}return i(e,t),e.prototype.register=function(t){var e=this;t.forEach((function(t){e.adPluginMap.set(t.adType,t),t.watcher&&e.adCore.watcher.register(t.watcher)}))},e.prototype.getAdPlugin=function(t){var e;return null!==(e=this.adPluginMap.get(t))&&void 0!==e?e:null},e.prototype.getAllPlugin=function(){return Array.from(this.adPluginMap.values())},e}(Ci),Ti=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="adblockCheckerModule",e.hasCallDetectAdBlock=!1,e.enabled=!1,e}return i(e,t),e.prototype.init=function(){this.detectReady=this.doCheckAdblock()},Object.defineProperty(e.prototype,"adBlockEnabled",{get:function(){return this.enabled},enumerable:!1,configurable:!0}),e.prototype.checkAdblock=function(){return w(this,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return[4,this.detectReady];case 1:return t.sent(),[2,this.adBlockEnabled]}}))}))},e.prototype.adblockDetect=function(){return w(this,void 0,void 0,(function(){var t=this;return S(this,(function(e){return/mobile|mqqbrowser|android|iphone/gi.test(navigator.userAgent)?[2]:(this.logger.log("adblock 检查"),[2,new Promise((function(e){try{var o=document.createElement("div");o.className="adsbox txp_ad_center",o.style.cssText+="position:absolute;left:-9999px;top:-9999px;width:1px;height:1px;";var i=document.createElement("div");i.className="side_ad txp_ad_center",i.style.cssText+="position:absolute;left:-9999px;top:-9999px;width:1px;height:1px;",document.body.appendChild(o),document.body.appendChild(i),setTimeout((function(){try{t.hasCallDetectAdBlock=!0,0!==o.offsetHeight&&null!==i.offsetParent||(t.logger.log("adBlockEnabled",!0),t.enabled=!0,window.__adBlockEnabled=t.enabled,t.options.onAdBlockEnabledChange(!0)),o.remove(),i.remove(),e()}catch(t){e()}}),100)}catch(t){e()}}))])}))}))},e.prototype.doCheckAdblock=function(){return w(this,void 0,void 0,(function(){var t=this;return S(this,(function(e){return window.document&&document.body?[2,this.adblockDetect()]:[2,new Promise((function(e){window.document.addEventListener("readystatechange",(function(){t.hasCallDetectAdBlock||"interactive"!==document.readyState&&"complete"!==document.readyState||e(t.adblockDetect())}))}))]}))}))},e}(Ci),bi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="apiModule",e}return i(e,t),e.prototype.setAdOrder=function(t){this.logger.log("setAdOrder",t),this.adCore.order.setAdOrder(t)},e.prototype.loadAd=function(t){return w(this,void 0,void 0,(function(){return S(this,(function(e){return this.logger.log("loadAd",t),[2,this.adCore.ctrl.loadAd(t)]}))}))},e.prototype.playAd=function(t,e){this.logger.log("playAd",t);var o=this.adCore.ctrl.getRunningAds(t,e);0!==o.length?null==o||o.forEach((function(t){t.play()})):this.adCore.event.emit(Ge.AD_STOP,{adType:t})},e.prototype.pauseAd=function(t,e){(this.logger.log("pauseAd",t,e),t)?this.adCore.ctrl.getRunningAds(t,e).forEach((function(t){t.pause()})):this.adCore.ctrl.forEachAd((function(t){t.pause()}))},e.prototype.resumeAd=function(t,e){(this.logger.log("resumeAd",t,e),t)?this.adCore.ctrl.getRunningAds(t,e).forEach((function(t){t.resume()})):this.adCore.ctrl.forEachAd((function(t){t.resume()}))},e.prototype.stopAd=function(t,e){(this.logger.log("stopAd",t,e),t)?this.adCore.ctrl.getRunningAds(t,e).forEach((function(t){t.stop()})):this.stopAllAd()},e.prototype.stopAllAd=function(){this.logger.log("stopAllAd"),this.adCore.event.emit(Ge.AD_STOP_ALL,null),this.reset()},e.prototype.muteAd=function(){this.logger.log("muteAd"),this.adCore.ctrl.forEachAd((function(t){t.mute()}))},e.prototype.unMuteAd=function(){this.logger.log("unMuteAd"),this.adCore.ctrl.forEachAd((function(t){t.unMute()}))},e.prototype.setVolume=function(t){this.logger.log("setVolume",t),this.adCore.ctrl.forEachAd((function(e){e.setVolume(t)}))},e.prototype.reset=function(){this.logger.log("reset"),this.adCore.ctrl.stopAllAd(),this.adCore.order.reset(),this.adCore.watcher.reset()},e.prototype.resizeAd=function(t){this.logger.log("resizeAd",t),this.adCore.ctrl.forEachAd((function(e){e.resize(t)}))},e.prototype.adjustUI=function(t){this.logger.log("adjustUI",t),this.adCore.ctrl.forEachAd((function(e){e.adjustUI(t)}))},e.prototype.setAdSmallWindow=function(t){this.logger.log("setAdSmallWindow",t),this.adCore.ctrl.forEachAd((function(e){e.setAdSmallWindow(t)}))},e.prototype.hideAdBeforeResize=function(){this.logger.log("hideAdBeforeResize"),this.adCore.ctrl.forEachAd((function(t){t.hideAdBeforeResize()}))},e.prototype.seekStart=function(){this.logger.log("seekStart"),this.adCore.ctrl.forEachAd((function(t){t.seekStart()}))},e.prototype.reportAd=function(t,e,o){this.logger.log("reportAd",t,e),this.adCore.ctrl.getRunningAds(t,o).forEach((function(t){t.report(e)}))},e}(Ci),Li=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="cgiReportModule",e.urlList=[],e.timer=null,e}return i(e,t),e.prototype.getOriginReportUrl=function(t,e,o){var i=this.getFullUrl(t,e);return(null==o?void 0:o.replaceDict)&&(i=Le(t,o.replaceDict)),(null==o?void 0:o.appendParams)&&(i=Pe(i,o.appendParams)),i},e.prototype.getOtherReportUrl=function(t,e){var o=t;return(null==e?void 0:e.replaceDict)&&(o=Le(t,e.replaceDict)),o},e.prototype.reportOriginUrl=function(t,e,o){var i=this.getOriginReportUrl(t,e,o);this.logger.log("上报链接",i),this.requestReportUrl(i)},e.prototype.reportOtherUrl=function(t,e){var o=this.getOtherReportUrl(t,e);this.logger.log("上报链接",o),this.requestReportUrl(o)},e.prototype.requestReportUrl=function(t){var e=this,o=t;-1===o.indexOf("uniquetimestamp")&&(o=Pe(o,{uniquetimestamp:Date.now()})),this.timer?this.urlList.push(o):(this.timer=+setTimeout((function(){e.timeoutHandler()}),1e3),this.options.reportUrl(o).then((function(){e.timeoutHandler()})))},e.prototype.getFullUrl=function(t,e){var o=e.oadId,i=e.orderIdx,n={oadid:o||"",url:window.location.href,lcount:i||1,t:0},r=function(t){var e=t.indexOf("?"),o=t.substring(e+1),i={};return o.split("&").forEach((function(t){var e=t.split("=");e.length>=2&&(i[e.shift()]=e.join("="))})),i}(t),a=t.split("?")[0],s=D(D(D({},n),this.options.getConfig()),r);return Pe(a,s,!0)},e.prototype.timeoutHandler=function(){0!==this.urlList.length?(this.timer&&clearTimeout(this.timer),this.timer=null,this.requestReportUrl(this.urlList.shift())):this.timer=null},e}(Ci),Pi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="configModule",e}return i(e,t),Object.defineProperty(e.prototype,"clientVersion",{get:function(){return this.options.clientVersion||""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"forbidLinkJump",{get:function(){return!!this.options.forbidLinkJump},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobile",{get:function(){return!!this.options.isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showCloseButton",{get:function(){return this.options.showCloseButton},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disablePauseAd",{get:function(){return!!this.options.disablePauseAd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerData",{get:function(){return this.options.getPlayerData()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outerPlayerData",{get:function(){return this.options.getOuterPlayerData()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"phlsConfig",{get:function(){return this.options.phlsConfig||{}},enumerable:!1,configurable:!0}),e.prototype.showOpenVIPGuide=function(){return this.options.showOpenVIPGuide()},e.prototype.resetBarrageZindex=function(){var t,e;return null===(e=(t=this.options).resetBarrageZindex)||void 0===e?void 0:e.call(t)},e.prototype.renderQrCode=function(t,e,o){var i,n;return null===(n=(i=this.options).renderQrCode)||void 0===n?void 0:n.call(i,t,e,o)},e.prototype.getPlayerSize=function(){return this.options.getPlayerSize()},e.prototype.setPHLSConfig=function(t){this.options.phlsConfig=D(D({},this.options.phlsConfig),t)},e.prototype.requestProxyHttp=function(t,e){return w(this,void 0,void 0,(function(){var o,i;return S(this,(function(n){return[2,null===(i=(o=this.options).requestProxyHttp)||void 0===i?void 0:i.call(o,t,e)]}))}))},e.prototype.createPlayer=function(t,e,o){return this.options.createPlayer(t,e,o)},e.prototype.launchMiniProgram=function(t){return!!this.options.launchMiniProgram&&this.options.launchMiniProgram(t)},e.prototype.openQQLive=function(t){this.options.openQQLive&&this.options.openQQLive(t)},e.prototype.amsLinkReportClick=function(t,e){var o,i;null===(i=(o=this.options).amsLinkReportClick)||void 0===i||i.call(o,t,e)},e.prototype.openHintBrowser=function(t){return!!this.options.openHintBrowser&&this.options.openHintBrowser(t)},e.prototype.getContainerSize=function(){return this.options.getContainerSize()},e}(Ci),Ni=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="eventModule",e.eventEmitter=new de,e}return i(e,t),e.prototype.on=function(t,e){this.eventEmitter.on(t,e)},e.prototype.off=function(t,e){this.eventEmitter.off(t,e)},e.prototype.emit=function(t,e){this.eventEmitter.emit(t,e)},e}(Ci);var Di,Oi,wi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="loggerModule",e}return i(e,t),e.create=function(t,o){var i=o||e.originLogger;return{info:function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];e.LOCAL_LOG,null==i||i.info.apply(i,R(["<".concat(t,">")],o,!1))},log:function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];e.LOCAL_LOG,null==i||i.log.apply(i,R(["<".concat(t,">")],o,!1))},warn:function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];e.LOCAL_LOG,null==i||i.warn.apply(i,R(["<".concat(t,">")],o,!1))},error:function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];e.LOCAL_LOG,null==i||i.error.apply(i,R(["<".concat(t,">")],o,!1))}}},e.prototype.init=function(){e.originLogger=this.options},e.prototype.createLogger=function(t){return e.create(t,this.options)},e.LOCAL_LOG=!0,e}(Ci),Si=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="orderModule",e.adOrderMap=new Map,e.adExtraDataMap=new Map,e.adPointMap=new Map,e.setAdOrderMap=function(t){e.adOrderMap.set(t.adType,t),e.adCore.event.emit(Ge.AD_ORDER_SET,{adType:t.adType,adOrder:t})},e}return i(e,t),e.prototype.setAdOrder=function(t){var e,o,i=this;if(this.adCore.vrBase.setIsVip(!!(null===(e=t.auth)||void 0===e?void 0:e.is_vip)),this.adCore.vrBase.setStrategyIds(null!==(o=t.strategy_ids)&&void 0!==o?o:[]),t.ad_scene!==s.ANCHOR){var n=this.adCore.plugin.getAllPlugin();null==n||n.forEach((function(e){var o=e.getOrderData(i.adCore,t);if(o){var n=o.adData,r=o.extraData;(null==n?void 0:n.length)&&n.forEach(i.setAdOrderMap),(null==r?void 0:r.length)&&r.forEach((function(t){var e=t.adType,o=t.data;i.addExtraData(e,o)}))}}))}else this.handleAnchorAdOrder(t)},e.prototype.getAdOrder=function(t){var e;return null!==(e=this.adOrderMap.get(t))&&void 0!==e?e:null},e.prototype.getPreAdOrder=function(){var t=this.getAdOrder(p.PRE),e=this.getAdOrder(p.BROADCAST);if(t||e)return D(D({},t||e),{adType:p.PRE,orders:R(R([],(null==t?void 0:t.orders)||[],!0),(null==e?void 0:e.orders)||[],!0),empty:R(R([],(null==t?void 0:t.empty)||[],!0),(null==e?void 0:e.empty)||[],!0)})},e.prototype.getPoints=function(t){var e,o=this.adPointMap.get(t);return Array.from(null!==(e=null==o?void 0:o.keys())&&void 0!==e?e:[])},e.prototype.getExtraData=function(t){return this.adExtraDataMap.get(t)},e.prototype.getPointOrderFromPoint=function(t,e){var o=this.adPointMap.get(t);if(o)return o.get(e)},e.prototype.deleteOrders=function(t){this.adOrderMap.delete(t)},e.prototype.reset=function(){this.adOrderMap.clear(),this.adPointMap.clear(),this.adExtraDataMap.clear()},e.prototype.checkPointConflict=function(t,e,o){var i=[];return this.adPointMap.forEach((function(n){n.forEach((function(n,r){(r.type===y.TIMESTAMP?e:t)>=r.begin-o&&t<=r.end+o&&i.push(n)}))})),i},e.prototype.addExtraData=function(t,e){var o=this.adExtraDataMap.get(t);o||(o={}),o=D(D({},o),e),this.adExtraDataMap.set(t,o)},e.prototype.handleAnchorAdOrder=function(t){var e=this,o=this.adCore.plugin.getAllPlugin();this.adPointMap.clear(),null==o||o.forEach((function(t){t.isPointAd&&e.adOrderMap.delete(t.adType)})),null==o||o.forEach((function(o){var i=o.getOrderData(e.adCore,t);if(i){var n=i.pointAdData;(null==n?void 0:n.length)&&n.forEach((function(t){var o=e.adPointMap.get(t.adType);o||(o=new Map,e.adPointMap.set(t.adType,o)),o.set(t.point,t)}))}})),this.adPointMap.forEach((function(t,o){var i={adType:o,orders:[],empty:[]};t.forEach((function(t){var e,o;(e=i.empty).push.apply(e,t.empty),(o=i.orders).push.apply(o,t.orders)})),e.setAdOrderMap(i)}))},e}(Ci),Ri=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="outerEventModule",e.eventEmitter=new de,e}return i(e,t),e.prototype.init=function(){this.initEvents()},Object.defineProperty(e.prototype,"ctrlBarVisible",{get:function(){return this.options.getCtrlBarVisible()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMimiPlayer",{get:function(){return this.options.getIsMimiPlayer()},enumerable:!1,configurable:!0}),e.prototype.on=function(t,e){this.eventEmitter.on(t,e)},e.prototype.off=function(t,e){this.eventEmitter.off(t,e)},e.prototype.emit=function(t,e){this.eventEmitter.emit(t,e)},e.prototype.destroy=function(){this.eventEmitter.removeAllListeners(),this.options.removeAllEvents()},e.prototype.initEvents=function(){var t=this,e=this.options.getEvents();Object.entries(e).forEach((function(e){var o=e[0];(0,e[1])((function(e){t.eventEmitter.emit(o,{event:o,data:e})}))}))},e}(Ci);!function(t){t.VIDEO_START_PLAY="ad_pc_playbox_player_start_play",t.VIDEO_PAUSE="ad_pc_playbox_player_pause",t.VIDEO_NEAR_END="ad_pc_playbox_player_near_end",t.REQUEST_FIXED_MIDDLE="ad_pc_playbox_sdk_req_fixed_zc",t.REQUEST_DYNAMIC_MIDDLE="ad_pc_playbox_sdk_req_dynamically_zc",t.CALL_GET_AD_PARAMS="ad_pc_playbox_player_call_sdk",t.PROXY_REQUEST="ad_pc_playbox_player_request",t.PROXY_RESPONSE="ad_pc_playbox_player_response",t.SET_AD_ORDER="ad_pc_playbox_plugin_get_order",t.AD_CREATED="ad_pc_playbox_receive_order",t.AD_ENDED="ad_pc_playbox_exposure_close",t.AD_LOADED="ad_pc_playbox_creative_loading",t.AD_PLAY_ERROR="ad_pc_playbox_play_error",t.AD_SHOW="ad_pc_playbox_plugin_ad_show",t.AD_EXPOSURE="originalexposure",t.AD_CLICK="dt_clck",t.PICTURE="ad_pc_playbox_picture",t.TECH_PARAM="ad_tech_param_report",t.NON_STANDARD_EXPOSURE="ad_exposure_unnormal"}(Di||(Di={}));var Mi=((Oi={})[p.UNKNOWN]="unknown",Oi[p.PRE]="pre",Oi[p.BROADCAST]="broadcast",Oi[p.TAIL]="tail",Oi[p.LOADING]="loading",Oi[p.MID]="mid",Oi[p.HLS_MID]="hls_mid",Oi[p.CORNER]="corner",Oi[p.VIDEO_IN]="video_in",Oi[p.ANCHOR_EMPTY]="anchor_empty",Oi[p.VIDEO_RESOLUTION]="video_resolution",Oi[p.PROGRESS_PREVIEW]="progress_preview",Oi[p.PAUSE]="pause",Oi[p.CREATIVE_MID]="czc",Oi[p.WATCH_BUY]="bs",Oi[p.LIVE_CORNER]="plj",Oi[p.NON_STANDARD]="non_standard",Oi[p.DYNAMIC_MID]="mid",Oi);var Vi,ki,Ui={getAdScene:function(t){var e;return null!==(e=Ui.jsonParse(t).ad_scene)&&void 0!==e?e:"parse error"},jsonParse:function(t){try{return JSON.parse(t)}catch(e){return{data:t,error:"json parse error"}}},parseProxyAdResponse:function(t,e){var o,i;if(!t.ad_scene)return{ad_scene:null!=e?e:-1,strategy_ids:t.strategy_ids};var n={};switch(t.ad_scene){case s.PRE:case s.TAIL:case s.DYNAMIC_MID:n=function(t){var e,o={};return null===(e=t.ads)||void 0===e||e.forEach((function(t){var e,i,n=Mi[t.ad_type];if(n){o[n]||(o[n]={ad_type:t.ad_type,empty:null!==(i=null===(e=t.empty)||void 0===e?void 0:e.length)&&void 0!==i?i:0,orders:0});var r=t[n];r&&(o[n].orders=r.length)}})),o}(t);break;case s.ANCHOR:n=function(t){var e,o={};return null===(e=t.anchor_ads)||void 0===e||e.forEach((function(t){var e,i,n=Mi[t.ad_type];if(n){o[n]||(o[n]={ad_type:t.ad_type,empty:null!==(i=null===(e=t.empty)||void 0===e?void 0:e.length)&&void 0!==i?i:0,orders:0});var r=t[n];r&&(o[n].orders=r.length)}})),o}(t);break;case s.PROGRESS_PREVIEW:case s.VIDEO_RESOLUTION:case s.PAUSE:n=function(t){var e={},o=t.ad;if(!o)return e;var i=Mi[o.ad_type];return i?(e[i]||(e[i]={ad_type:o.ad_type,empty:o.empty?1:0,orders:0}),o[i]&&(e[i].orders=1),e):e}(t)}var r=Object.values(n).some((function(t){return t.orders>0}))?"0":"1";return{ad_scene:null!==(i=null!==(o=t.ad_scene)&&void 0!==o?o:e)&&void 0!==i?i:-1,ad_data:n,is_empty:r,strategy_ids:t.strategy_ids}}},Bi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="vrReportModule",e}return i(e,t),Object.defineProperty(e.prototype,"vrBase",{get:function(){return this.adCore.modules.vrBase},enumerable:!1,configurable:!0}),e.prototype.reportVideoStartPlay=function(){this.vrBase.reportEvent(Di.VIDEO_START_PLAY,{})},e.prototype.reportVideoPause=function(){this.vrBase.reportEvent(Di.VIDEO_PAUSE,{})},e.prototype.reportVideoNearEnd=function(){this.vrBase.reportEvent(Di.VIDEO_NEAR_END,{})},e.prototype.reportRequestFixedMiddle=function(){this.vrBase.reportEvent(Di.REQUEST_FIXED_MIDDLE,{})},e.prototype.reportRequestDynamicMiddle=function(){this.vrBase.reportEvent(Di.REQUEST_DYNAMIC_MIDDLE,{})},e.prototype.reportCallGetAdParams=function(t){this.vrBase.reportEvent(Di.CALL_GET_AD_PARAMS,t)},e.prototype.reportRequest=function(t){this.vrBase.reportEvent(Di.PROXY_REQUEST,t)},e.prototype.reportResponse=function(t){this.vrBase.reportEvent(Di.PROXY_RESPONSE,t)},e.prototype.reportSetAdOrder=function(t){var e=Ui.parseProxyAdResponse(t);this.vrBase.reportEvent(Di.SET_AD_ORDER,e)},e.prototype.reportCreated=function(t,e){var o,i=D({ad_type:t.adType,ad_report_params:this.vrBase.getAdReportParams(t),adid:null===(o=t.auth)||void 0===o?void 0:o.adid},e);this.vrBase.reportEvent(Di.AD_CREATED,i)},e.prototype.reportLoaded=function(t,e,o){var i={};Object.entries(e).forEach((function(t){var e=t[0],o=t[1],n=e.replace(/([A-Z])/g,"_$1").toLowerCase();i[n]=o})),i.ad_type=t.adType,i.loading_time=i.loading_time||-1,i.material_duration&&(i.material_duration=1e3*i.material_duration),this.vrBase.reportNormalEvent(Di.AD_LOADED,t,D(D({},i),o))},e.prototype.reportAdShow=function(t,e,o){this.vrBase.reportNormalEvent(Di.AD_SHOW,t,D({material_type:e},o))},e.prototype.reportPlayError=function(t,e){this.vrBase.reportNormalEvent(Di.AD_PLAY_ERROR,t,e)},e.prototype.reportClick=function(t,e,o){var i=e.actionType,n=e.playTime,r=O(e,["actionType","playTime"]);this.vrBase.reportNormalEvent(Di.AD_CLICK,t,D(D({ad_type:t.adType,ad_playtime:n,ad_act_type:i},r),o))},e.prototype.reportExposure=function(t,e,o){void 0===e&&(e=!0),this.vrBase.reportNormalEvent(Di.AD_EXPOSURE,t,D({ad_type:t.adType,is_first_exposure:e?"1":"0"},o))},e.prototype.reportEnded=function(t,e,o){var i;this.vrBase.reportEvent(Di.AD_ENDED,D(D({ad_type:t.adType,ad_report_params:this.vrBase.getAdReportParams(t),adid:null===(i=t.auth)||void 0===i?void 0:i.adid},e),o))},e.prototype.reportTechParam=function(t,e){void 0===e&&(e={}),this.vrBase.reportEvent(Di.TECH_PARAM,D(D({plugin:"new"},e),{name:t}))},e.prototype.reportNonStandard=function(t){void 0===t&&(t={}),this.vrBase.reportEvent(Di.NON_STANDARD_EXPOSURE,D({},t))},e}(Ci),Hi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="vrBaseModule",e.pgid="ad_plugin",e.appKey="JS0081LY3JY6J3",e.publicParams={},e.pageParams={},e.businessParams={},e.reportList=[],e.isLoadError=!1,e.strategyIds=[],e}return i(e,t),e.prototype.init=function(){this.initReport()},e.prototype.setIsVip=function(t){this.publicParams=D(D({},this.publicParams),{is_vip:t})},e.prototype.setStrategyIds=function(t){this.strategyIds=Array.from(new Set(R(R([],this.strategyIds,!0),t,!0)))},e.prototype.updateParams=function(t){var e;this.publicParams=D(D({},this.publicParams),{v_channel_id:t.platform.channel_id,pt:t.player.play_type,app_vr:t.player.plugin,dt_mainlogin:null===(e=t.token)||void 0===e?void 0:e.type,dt_guid:t.platform.guid,guid:t.platform.guid}),this.pageParams=D(D({},this.pageParams),{play_platform:t.platform.play_platform,platform:t.platform.platform,flow_id:t.video.flow_id,live:t.video.is_live?"1":"0",pg_vid:t.video.base.vid,vid:t.video.base.vid,pg_cid:t.video.base.cid,pg_lid:t.video.base.lid,pid:t.video.pid,client_vr:t.player.version}),this.businessParams=D(D({},this.businessParams),{flow_id:t.video.flow_id})},e.prototype.getAdReportParams=function(t){var e=this,o=[];return t.empty.forEach((function(t,e){var i=t.getVrReportData();o.push(D({ad_post_idx:e,type:t.adType},i))})),t.orders.forEach((function(t){o.push(e.getAdReportParamsFromOrder(t.data,t.orderIdx))})),o},e.prototype.reportNormalEvent=function(t,e,o){var i;this.report({pgid:this.pgid,eventName:t,eventTime:Date.now(),pageParams:this.getPageParams(),businessParams:D(D(D({},this.getBusinessParams()),{ad_report_params:e?this.getAdReportParamsFromOrder(e.data,e.orderIdx):null,adid:null===(i=null==e?void 0:e.auth)||void 0===i?void 0:i.adid}),o)})},e.prototype.reportEvent=function(t,e){this.report({pgid:this.pgid,eventName:t,eventTime:Date.now(),pageParams:this.getPageParams(),businessParams:D(D({},this.getBusinessParams()),e)})},e.prototype.getAdReportParamsFromOrder=function(t,e){var o,i;void 0===e&&(e=0);var n=null===(i=null===(o=t.order.vr_report_dict)||void 0===o?void 0:o[f.COMMON])||void 0===i?void 0:i.report_dict;return D({ad_post_idx:e,type:t.order.ad_type},n)},e.prototype.getBusinessParams=function(){return D(D({},this.businessParams),{ad_request_id:this.adCore.config.playerData.playerFlowid,business:"ad",strategy_ids:this.strategyIds})},e.prototype.getPageParams=function(){return D({is_mobile:this.adCore.config.isMobile?"1":"0",guid:this.adCore.config.playerData.playerGuid,pgid:this.pgid,playtime:this.adCore.config.outerPlayerData.playtime,host:window.location.host,ua:window.navigator.userAgent,client_version:this.adCore.config.clientVersion,player_version:this.adCore.config.playerData.playerVersion,expid:Ht("tab_experiment_str")||""},this.pageParams)},e.prototype.getPublicParams=function(){var t=Ht("vqq_vuserid");return D(D({lm_experiment_id:"-1",vuserid:t||"-1",ctime:Date.now()},this.publicParams),{is_vip:t?this.publicParams.isVip?1:0:-1})},e.prototype.report=function(t){if(this.reporter)try{this.reporter.reportEvent(D(D({},t),{publicParams:this.getPublicParams()}))}catch(t){this.logger.error("大同上报出错")}else this.isLoadError||this.reportList.push(t)},e.prototype.initReport=function(){return w(this,void 0,void 0,(function(){var t;return S(this,(function(e){switch(e.label){case 0:return[4,this.loadUniversalReport()];case 1:e.sent();try{this.reporter=new window.UniversalReport({beacon:this.appKey,channel:"beacon",formatMode:1,isDisableInitPage:!0,isDisableObserver:!0})}catch(t){this.logger.error("UniversalReport 初始化失败")}for(;this.reportList.length>0;)t=this.reportList.shift(),this.report(t);return[2]}}))}))},e.prototype.loadUniversalReport=function(){return w(this,void 0,void 0,(function(){var t=this;return S(this,(function(e){return window.UniversalReport?[2,window.UniversalReport]:[2,new Promise((function(e){ge("https://staticfile.qq.com/datong/universalReportH5/v1.0.3/universal-report-lite.min.js",(function(o){if(null==o?void 0:o.error)return t.logger.warn("加载大同 sdk 失败"),t.isLoadError=!0,void(t.reportList=[]);window.UniversalReport&&e(window.UniversalReport)}),{crossOrigin:"anonymous"})}))]}))}))},e}(Ci),zi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="watcherModule",e.watcherList=[],e}return i(e,t),e.prototype.register=function(t){var e=t(this.adCore);this.watcherList.push(e),e.startWatch()},e.prototype.reset=function(){this.watcherList.forEach((function(t){t.reset()}))},e.prototype.destroy=function(){this.watcherList.forEach((function(t){t.endWatch()}))},e}(Ci),Ki=function(){function t(t){var e=this;this.options=t,this.modules={logger:new wi,ctrl:new Ii,event:new Ni,plugin:new xi,order:new Si,api:new bi,watcher:new zi,cgi:new Li,config:new Pi,adblock:new Ti,outerEvent:new Ri,vrBase:new Hi,vr:new Bi},this.adCoreApi=this.createAdCoreApi(),Object.entries(this.modules).forEach((function(o){var i,n=o[0],r=o[1],a=t.moduleOptions[n];a&&r.setOptions(a),r.setAdCore(e.adCoreApi),null===(i=r.init)||void 0===i||i.call(r)}))}return Object.defineProperty(t.prototype,"api",{get:function(){return this.modules.api},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){Object.entries(this.modules).forEach((function(t){t[1].destroy()}))},t.prototype.createAdCoreApi=function(){var t=this;return D({get modules(){return t.modules}},t.modules)},t}(),$i=((Vi={})[Ge.AD_STOP]=e.H5_PLAY_EVENT.AD_END,Vi[Ge.AD_LOAD_START]=e.H5_PLAY_EVENT.AD_REQ_ASSETS_START,Vi[Ge.AD_LOAD_COMPLETE]=e.H5_PLAY_EVENT.AD_ASSETS_LOADED,Vi[Ge.AD_PAUSE]=e.H5_PLAY_EVENT.AD_PAUSE,Vi[Ge.AD_RESUME]=e.H5_PLAY_EVENT.AD_RESUME,Vi[Ge.AD_PLAYING]=e.H5_PLAY_EVENT.AD_PLAYING,Vi[Ge.AD_TIME_UPDATE]=e.H5_PLAY_EVENT.AD_TIME_UPDATE,Vi[Ge.AD_VOLUME_CHANGE]=e.H5_PLAY_EVENT.AD_VOLUME_CHANGE,Vi[Ge.AD_SET_LOADING]=e.H5_EXT_EVENT.SET_LOADING,Vi[Ge.AD_AUTOPLAY_BLOCKED]=e.H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED,Vi[Ge.AD_COUNTDOWN_CHANGE]="AD_COUNTDOWN_CHANGE",Vi[Ge.AD_ENTER_COUNTDOWN]="enterCountdownEvt",Vi[Ge.AD_ENTER_COUNTDOWN_COMPLETE]="enterCountdownCompleteEvt",Vi[Ge.AD_PLAYER_SESSION_START]="adPlayerSessionStartEvt",Vi[Ge.AD_PLAYER_SESSION_END]="adPlayerSessionEndEvt",Vi),Gi="abcdefghijklmnopqrstuvwxy".split("");!function(t){t.SET_LOADING="SET_LOADING",t.VIDEO_TIMEUPDATE="VIDEO_TIMEUPDATE",t.VIDEO_PLAYING="VIDEO_PLAYING",t.VIDEO_PAUSE="VIDEO_PAUSE",t.CTRL_SHOW="CTRL_SHOW",t.CTRL_HIDE="CTRL_HIDE",t.HOVER_PROGRESS="HOVER_PROGRESS",t.SHOW_LEVELS="SHOW_LEVELS",t.TOGGLE_MINI_PLAYER="TOGGLE_MINI_PLAYER",t.AD_SESSION_ID_CHANGE="AD_SESSION_ID_CHANGE",t.VIDEO_PLAY_SESSION_END="VIDEO_PLAY_SESSION_END",t.VIDEO_SETLEVEL_END="VIDEO_SETLEVEL_END"}(ki||(ki={}));var Yi,Wi,Fi,qi,ji=function(){function t(t,o){var i=this;this.player=t,this.options=o,this.destroyEvents=[],this.ctrlBarVisible=!0,this.isMiniPlayerOpened=!1,this.startPlaytimeData={vid:"",playtime:0,setTime:0},this.getStartPlaytime=function(){return i.startPlaytimeData.playtime},this.getCtrlBarVisible=function(){return i.ctrlBarVisible},this.getIsMimiPlayer=function(){return i.isMiniPlayerOpened},this.destroy=function(){i.destroyEvents.forEach((function(t){t()}))},this.getEvents=function(){var t;return(t={})[ki.SET_LOADING]=function(t){var o;i.listenEvent(null===(o=i.player)||void 0===o?void 0:o.pluginMsg,e.H5_EXT_EVENT.SET_LOADING,(function(e){t(e.data)}))},t[ki.VIDEO_TIMEUPDATE]=function(t){i.listenEvent(i.player,e.H5_PLAY_EVENT.VIDEO_TIMEUPDATE,(function(e){i.options.updatePlaytime(e.data.playtime),t(e.data)}))},t[ki.VIDEO_PLAYING]=function(t){i.listenEvent(i.player,e.H5_PLAY_EVENT.VIDEO_PLAYING,(function(e){var o="".concat(i.player.vid);(i.startPlaytimeData.vid!==o||Date.now()-i.startPlaytimeData.setTime<1e3)&&(i.startPlaytimeData={vid:o,playtime:i.player.playtime,setTime:Date.now()}),t(e.data)}))},t[ki.VIDEO_PAUSE]=function(t){i.listenEvent(i.player,e.H5_PLAY_EVENT.VIDEO_PAUSE,(function(e){t(e.data)}))},t[ki.CTRL_SHOW]=function(t){i.listenCtrlBarEvent("ctrl:show",(function(e){i.ctrlBarVisible=!0,t(e.data)}))},t[ki.CTRL_HIDE]=function(t){i.listenCtrlBarEvent("ctrl:hide",(function(e){i.ctrlBarVisible=!1,t(e.data)}))},t[ki.HOVER_PROGRESS]=function(t){i.listenCtrlBarEvent("ctrl:hover-progress",t)},t[ki.SHOW_LEVELS]=function(t){i.listenCtrlBarEvent("ctrl:show-levels",t)},t[ki.TOGGLE_MINI_PLAYER]=function(t){var e;i.listenEvent(null===(e=i.player)||void 0===e?void 0:e.miniPlayerPlugin,"toggle",(function(e){i.isMiniPlayerOpened!==e.data.isOpened&&(i.isMiniPlayerOpened=e.data.isOpened,t(e.data))}))},t[ki.AD_SESSION_ID_CHANGE]=function(t){i.listenEvent(i.player,e.H5_PLAY_EVENT.VIDEO_SETLEVEL_END,(function(e){var o,n,r,a;"0"===(null===(o=e.data)||void 0===o?void 0:o.code)&&((null!==(n=i.options.getPlayerData().playerSessionId)&&void 0!==n?n:"")!==(null!==(a=null===(r=i.player.getCommonKv("getinfoAdInfo"))||void 0===r?void 0:r.adsid)&&void 0!==a?a:"")&&t(e.data))}))},t[ki.VIDEO_PLAY_SESSION_END]=function(t){i.listenPlayerEvent(e.H5_PLAY_EVENT.PLAY_SESSION_END,t)},t[ki.VIDEO_SETLEVEL_END]=function(t){i.listenPlayerEvent(e.H5_PLAY_EVENT.VIDEO_SETLEVEL_END,t)},t}}return t.prototype.listenPlayerEvent=function(t,e){this.listenEvent(this.player,t,(function(t){e(t.data)}))},t.prototype.listenCtrlBarEvent=function(t,e){var o=this,i=function(){e({})};this.getCtrlBar().then((function(e){o.listenEvent(e,t,i)}))},t.prototype.listenEvent=function(t,e,o){null==t||t.on(e,o),this.destroyEvents.push((function(){null==t||t.off(e,o)}))},t.prototype.getCtrlBar=function(){var t=this;return new Promise((function(e){var o=t.player.plugins.ctrlbar;if(o)e(o);else{var i=function(){e(t.player.plugins.ctrlbar),t.player.pluginMsg.off("pluginsetup:ctrlbar",i)};t.player.pluginMsg.on("pluginsetup:ctrlbar",i)}}))},t}(),Qi={playerMethod:{},playerData:{playerPf:void 0,playerPfEx:ei(),playerWidth:0,playerHeight:0,playerLeft:0,playerTop:0,playtime:0,playerEndTime:0,playerDuration:0,playerPlatform:"",playerFrom:null,playerVersion:"",playerCid:"",playerVid:"",playerFlowid:"",playerGuid:"",playerPt:"",playerPu:"",playerTrialerMode:!1,playerAdExt:"",playerType:"",playerIsSkipPrelude:!1,playerVptag:"",playerOHeight:0,playerOWidth:0,playerTpid:""},touchPlayer:!1,forbidLinkJump:!1};!function(t){t.bind="on",t.unbind="off"}(Yi||(Yi={})),function(t){t[t.LOAD_FREEZE=2201]="LOAD_FREEZE",t[t.LOAD_FAIL=2301]="LOAD_FAIL",t[t.AD_BLOCKED=6]="AD_BLOCKED",t[t.TIMEOUT=10]="TIMEOUT",t[t.PRELOAD_TIMEOUT=20]="PRELOAD_TIMEOUT",t[t.HLS_PLAY_ERROR=30]="HLS_PLAY_ERROR",t[t.FINAL_ERROR=40]="FINAL_ERROR",t[t.EMPTY_URL=50]="EMPTY_URL",t[t.PRELOAD_EMPTY_URL=60]="PRELOAD_EMPTY_URL",t[t.BACKUP_URL_PLAY_ERROR=70]="BACKUP_URL_PLAY_ERROR"}(Wi||(Wi={})),function(t){t.LOADSTART="loadstart",t.PROGRESS="progress",t.CANPLAY="canplay",t.PLAYING="playing",t.PLAY="play",t.PAUSE="pause",t.TIMEUPDATE="timeupdate",t.ENDED="ended",t.ERROR="error",t.AUTOPLAY_BLOCKED="autoplayBlocked",t.WATCH_LOAD_PROGRESS="watchLoadProgress",t.ALL_ENDED="allEnded",t.ALL_LOAD_COMPLETE="allLoadComplete",t.AD_AUTOPLAY_BLOCKED="autoplayBlockedAd",t.SET_LOADING="setLoading"}(Fi||(Fi={})),function(t){t.IDLE="idle",t.LOAD_START="loadStart",t.CANPLAY="canplay",t.LOADING="loading",t.LOAD_READY="loadReady",t.PLAYING="playing",t.PAUSE="pause",t.SEEKING="seeking",t.SEEKED="seeked",t.BUFFERING="buffering",t.END="end"}(qi||(qi={}));var Zi,Xi=function(t){var e="";try{window.localStorage&&(e=window.localStorage[t])}catch(t){}return e},Ji=function(){function o(t,e){this.adCore=t,this.adVideoInfoList=[],this.logger=this.adCore.logger.createLogger("ThumbplayerAdapter"),this.currentAdIndex=0,this.urls=[],this.hasCallPlay=!1,this.eventEmitter=new de,this.container=e.container,this.options=e,this.player=this.createPlayer(),this.bindPlayerEvent()}return o.prototype.on=function(t,e){this.eventEmitter.on(t,e)},o.prototype.off=function(t,e){this.eventEmitter.off(t,e)},o.prototype.removeAllListeners=function(){this.eventEmitter.removeAllListeners()},o.prototype.setOptions=function(t){this.options=D(D({},this.options),t)},o.prototype.destroy=function(){var t,e;null===(t=this.player)||void 0===t||t.removeAllListeners(),null===(e=this.player)||void 0===e||e.destroy(),this.player=void 0},o.prototype.load=function(t){var e;this.adVideoInfoList=t.map((function(t,e){return D({index:e,status:qi.IDLE},t)})),this.urls=t.map((function(t){return D(D({},t),{autoPreloadLeftTime:5})})),this.logger.log("player load: ".concat(st(t))),this.currentAdIndex=0,null===(e=this.player)||void 0===e||e.load(this.urls,this.getKernelConfig())},o.prototype.pause=function(){var t;null===(t=this.player)||void 0===t||t.pause()},o.prototype.resume=function(){var t;this.hasCallPlay=!0,null===(t=this.player)||void 0===t||t.play()},o.prototype.play=function(){var t;this.hasCallPlay||this.emit(Fi.WATCH_LOAD_PROGRESS,{index:0,adVideoInfo:this.adVideoInfoList[0]}),this.hasCallPlay=!0,null===(t=this.player)||void 0===t||t.play()},o.prototype.stop=function(){var t;null===(t=this.player)||void 0===t||t.stop(),this.hasCallPlay=!1,this.urls=[],this.adVideoInfoList=[],this.currentAdIndex=0,this.errorVideoInfo=void 0},Object.defineProperty(o.prototype,"currentVideoElement",{get:function(){var t;return null===(t=this.player)||void 0===t?void 0:t.currentVideoElement},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"currentTime",{get:function(){var t;return null===(t=this.player)||void 0===t?void 0:t.playtime},set:function(t){t&&this.player&&this.player.seek(t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"volume",{get:function(){var t;return null===(t=this.player)||void 0===t?void 0:t.volume},set:function(t){var e,o;this.player&&"number"==typeof t&&(this.player.volume=t,null===(o=(e=this.options).onVolumeChange)||void 0===o||o.call(e,t))},enumerable:!1,configurable:!0}),o.prototype.preloadNext=function(t,e){return!0},o.prototype.playNext=function(e,o){var i,n=this;void 0===o&&(o=!1);var r=this.adVideoInfoList.length,a=this.adVideoInfoList[r-1].index;if(this.logger.log("当前播放: ".concat(st({kernelName:null===(i=this.player)||void 0===i?void 0:i.kernelName,nextPlayVideoIndex:e,len:r}))),e&&e>a)return this.logger.log("当前播放的是最后一个, 不再播放下一个"),!1;if(this.urls.shift(),this.urls.length<=0)return!1;this.currentAdIndex=e,this.emit(Fi.WATCH_LOAD_PROGRESS,{index:e,adVideoInfo:this.adVideoInfoList[e]});var s=this.adVideoInfoList[e-1];return setTimeout((function(){var i,r,a;(o||(null===(i=n.player)||void 0===i?void 0:i.kernelName)===t.KERNEL_NAME.HLS_JS||s.backupUrlData)&&0!==e?(n.logger.log("重新播放: ".concat(st(n.urls))),null===(r=n.player)||void 0===r||r.play(n.urls,n.getKernelConfig())):null===(a=n.player)||void 0===a||a.play()})),!0},o.prototype.setAdVideoSrcEmpty=function(t){var e=this.adVideoInfoList[t];if(e){var o={config:{uid:e.uid}};this.errorVideoInfo=o,e.errorCode="srcEmpty",this.handleVideoError(e,!0)}},o.prototype.tryPlayBackupUrl=function(t){t.tryBackupUrlsPending||(t.backupUrlData?this.playUrl(t):this.getBackupUrl(t))},o.prototype.playUrl=function(t){this.logger.log("播放备用地址");var e=t,o=t.backupUrlData,i=o.urls;if(!i||i.length<=0)this.handleVideoError(t,!1);else if("hls"===o.type){if(this.unbindHlsEvents(),this.bindHlsEvents(e),o.m3u8&&!o.tryM3u8Flag)return this.replacePlay(t,i,!0,o.m3u8),void(o.tryM3u8Flag=!0);this.replacePlay(t,i,!0)}else this.replacePlay(t,i,!1)},o.prototype.getKernelConfig=function(e){return this.options.isMobile?{}:"hls"===e?{kernelName:t.KERNEL_NAME.HLS_JS}:{kernelName:this.options.isUseDemuxKernel?t.KERNEL_NAME.DEMUX_2_FMP4:t.KERNEL_NAME.ORIGIN}},o.prototype.bindPlayerEvent=function(){var e=this;this.player&&(this.player.on(t.PLAY_EVENT.VIDEO_BUFFER_CHANGE,(function(t){e.handleVideoProgress(t)})),this.player.on(t.PLAY_EVENT.STATE_CHANGE,(function(o){o.data.new===t.VIDEO_STATE.LOAD_START&&e.handleVideoLoadStart(o),o.data.new===t.VIDEO_STATE.CANPLAY&&e.handleVideoCanPlay(o),o.data.new===t.VIDEO_STATE.PAUSE&&e.handleVideoPause(o),o.data.new===t.VIDEO_STATE.PLAYING&&(o.data.old===t.VIDEO_STATE.PAUSE&&e.handleVideoResume(o),e.handleVideoPlaying(o)),o.data.new===t.VIDEO_STATE.END&&o.data.videoInfo&&e.handleVideoEnd(o)})),this.player.on(t.PLAY_EVENT.TIME_UPDATE,(function(t){e.handleVideoTimeupdate(t)})),this.player.on(t.PLAY_EVENT.ERROR,(function(t){var o,i,n,r,a,s=t.data.videoInfo;e.errorVideoInfo=s.config?s:null!==(o=e.errorVideoInfo)&&void 0!==o?o:D(D({},s),{config:null!==(i=e.adVideoInfoList[e.currentAdIndex])&&void 0!==i?i:e.urls[0],errorCode:"not has videoInfo"});var d=e.transformAdVideoInfo(e.errorVideoInfo);e.logger.error("播放器错误: ".concat(st(s.error))),d.errorCode=null!==(r=null===(n=s.error)||void 0===n?void 0:n.code)&&void 0!==r?r:"not has errorCode",d.errorMsg=null===(a=s.error)||void 0===a?void 0:a.message,e.handleVideoError(d,!0)})),this.player.on(t.PLAY_EVENT.AUTOPLAY_BLOCKED,(function(t){e.handleVideoAutoplayBlocked(t)})),this.player.on(t.PLAY_EVENT.SET_LOADING,(function(){e.emit(Fi.SET_LOADING)})))},o.prototype.handleVideoLoadStart=function(t){var e=this.transformAdVideoInfo(t.data.videoInfo);this.transparentEvent(Fi.LOADSTART,e)},o.prototype.handleVideoCanPlay=function(t){this.transparentEvent(Fi.CANPLAY,this.transformAdVideoInfo(t.data.videoInfo),t.target)},o.prototype.handleVideoProgress=function(t){this.transparentEvent(Fi.PROGRESS,this.transformAdVideoInfo(t.data.videoInfo),t.target)},o.prototype.handleVideoTimeupdate=function(t){this.transparentEvent(Fi.TIMEUPDATE,this.transformAdVideoInfo(t.data.videoInfo),t.target)},o.prototype.handleVideoPlaying=function(t){var e=this.transformAdVideoInfo(t.data.videoInfo);e.played||(e.played=!0,this.transparentEvent(Fi.PLAYING,e))},o.prototype.handleVideoPause=function(t){this.transparentEvent(Fi.PAUSE,this.transformAdVideoInfo(t.data.videoInfo))},o.prototype.handleVideoResume=function(t){this.transparentEvent(Fi.PLAY,this.transformAdVideoInfo(t.data.videoInfo))},o.prototype.handleVideoEnd=function(t){this.transparentEvent(Fi.ENDED,this.transformAdVideoInfo(t.data.videoInfo))},o.prototype.handleVideoError=function(t,e){this.transparentEvent(Fi.ERROR,t,void 0,{canTryBackup:e})},o.prototype.handleVideoAutoplayBlocked=function(t){this.logger.log("自动播放器被阻止");var e=this.transformAdVideoInfo(t.data.videoInfo);this.transparentEvent(Fi.AD_AUTOPLAY_BLOCKED,e)},o.prototype.transparentEvent=function(t,e,o,i){var n,r,a=e.duration,s=null!==(r=null===(n=null==o?void 0:o.videoBuffered)||void 0===n?void 0:n.reduce((function(t,e){var o=null!=e?e:{},i=o.start,n=void 0===i?0:i,r=o.end;return t+((void 0===r?0:r)-n)}),0))&&void 0!==r?r:0,d=s/a;this.updateOrderInfoStatus(e,t,d);var l=null==o?void 0:o.currentVideoElement;this.emit(t,D({index:Number(e.index),adVideoInfo:xe(e,{loadedPercent:d,buffered:s,playTime:null==o?void 0:o.playtime,readyState:null==l?void 0:l.readyState,networkState:null==l?void 0:l.networkState})},i))},o.prototype.updateOrderInfoStatus=function(t,e,o){e!==Fi.PLAYING&&e!==Fi.PLAY||(t.status=qi.PLAYING),e===Fi.PAUSE&&(t.status=qi.PAUSE),e===Fi.ENDED&&(t.status=qi.END),e!==Fi.PROGRESS&&e!==Fi.TIMEUPDATE||o>.99&&(t.status=qi.LOAD_READY)},o.prototype.getBackupUrl=function(t){var e=this;this.logger.log("开始请求备用地址, 第 ".concat(t.index," 个, vid: ").concat(t.vid)),t.tryBackupUrlsPending=!0,this.requestVideoUrlsByVid(t.vid).then((function(o){t.tryBackupUrlsPending=!1,e.getBackupUrlSuccess(t,o)})).catch((function(o){t.tryBackupUrlsPending=!1,e.getBackupUrlFailed(t)}))},o.prototype.getBackupUrlSuccess=function(t,e){var o;this.logger.log("请求备用地址成功, 第".concat(t.index,"个, vid: ").concat(t.vid,",备份地址数：").concat((null==e?void 0:e.urls)?e.urls.length:0)),(null===(o=e.urls)||void 0===o?void 0:o.length)?(t.backupUrlData=e,this.playUrl(t)):(t.errorCode="backupUrlEmpty",this.handleVideoError(t,!1))},o.prototype.getBackupUrlFailed=function(t){this.logger.log("请求备用地址失败, 第 ".concat(t.index,"个")),t.errorCode="backupUrlFailed",this.handleVideoError(t,!1)},o.prototype.bindHlsEvents=function(t){var e=this,o=t;this.hlsEvt={hlsError:function(i){var n=i.data;e.logger.error("重试播放 hls error: ".concat(st({index:o.index,vid:o.vid})," ").concat(n)),o.detailErrorCode=Wi.HLS_PLAY_ERROR,t.errorCode+="-hlsError",e.handleVideoError(t,!1)}},Object.keys(this.hlsEvt).forEach((function(t){var o;null===(o=e.player)||void 0===o||o.on(t,e.hlsEvt[t])}))},o.prototype.unbindHlsEvents=function(){var t=this;this.hlsEvt&&(Object.keys(this.hlsEvt).forEach((function(e){var o;null===(o=t.player)||void 0===o||o.off(e,t.hlsEvt[e])})),this.hlsEvt=void 0)},o.prototype.replacePlay=function(t,e,o,i){var n,r,a=this;void 0===i&&(i=""),this.logger.log("替换 url 播放: ".concat(e," ").concat(i));var s=e.shift(),d={backupUrls:e,url:s,autoPreloadLeftTime:5};i&&(d.m3u8=((n={})[s]=i,n)),Object.assign(this.urls[0],d);var l=this.getKernelConfig(o?"hls":"");this.hasCallPlay?(this.emit(Fi.WATCH_LOAD_PROGRESS,{index:t.index,adVideoInfo:xe(t,{status:t.status})}),setTimeout((function(){var t;a.logger.log("播放重试 url: ".concat(st(a.urls[0])," ").concat(st(l))),null===(t=a.player)||void 0===t||t.play(a.urls[0],l)}))):(this.logger.log("加载重试 url: ".concat(st(this.urls[0])," ").concat(st(l))),null===(r=this.player)||void 0===r||r.load(this.urls[0],l))},o.prototype.transformAdVideoInfo=function(t){var e,o=t.config.uid.split("-")[1];return xe(null!==(e=this.adVideoInfoList.find((function(e){return e.uid===t.config.uid})))&&void 0!==e?e:{vid:o},{status:t.status})},o.prototype.requestVideoUrlsByVid=function(t){var o,i=this.options.plugin.player,n=(null===(o=i.getinfoPlugin)||void 0===o?void 0:o.request)||this.options.requestUrlByVid;if(!n)return Promise.reject();var r=i.getCommonKv(e.COMMON_DATA_KEY.guid);return n(t,{defnpayver:0,defn:"",dtype:3,fhdswitch:0,platform:"10201",sdtfrom:"v1010",spwm:0,unid:Xi("txp-unid"),vid:t,sphls:2}).then((function(t){return!t||t.error?Promise.reject():ye(t.resData,r)}))},o.prototype.createPlayer=function(){return this.options.createPlayer(D({container:this.container,originKernelConfig:{maxVideoNodeCount:this.options.playerVideoDom?1:2},opencache:!this.options.isMobile&&this.options.isOpenCache&&this.options.isUseDemuxKernel,videoElements:this.options.playerVideoDom?[this.options.playerVideoDom]:void 0,createVideoNodeWhenLoad:!!this.options.playerVideoDom},this.options.kernelOptions))},o.prototype.emit=function(t,e){this.eventEmitter.emit(t,e)},o}(),tn=function(o){function n(t,i){var n=o.call(this,t)||this;return n.config=D({},Qi),n.isMobile=!1,n.getLogger=function(){var t={info:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.info.apply(n,t)},log:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.log.apply(n,t)},warn:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.warn.apply(n,t)},error:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.error.apply(n,t)}};return t},n.getPlayerSize=function(){var t=n.player,e=t.container,o=t.currentVideoElement,i=(null==o?void 0:o.offsetWidth)||(null==e?void 0:e.offsetWidth),r=(null==o?void 0:o.offsetHeight)||(null==e?void 0:e.offsetHeight),a=n.player.videoSize;return{playerWidth:i,playerHeight:r,playerOWidth:a.width,playerOHeight:a.height}},n.getContainerSize=function(){var t=n.player.videoElementsContainer,e=null==t?void 0:t.parentElement;if(!e){var o=n.getPlayerSize();return{width:o.playerWidth,height:o.playerHeight}}return{width:e.offsetWidth,height:e.offsetHeight}},n.createLayer=function(t){var e=document.createElement("div");return e.className="creative-player-".concat(t,"-layer"),n.layer.appendChild(e),e},n.onPlaySessionStart=function(t){var e;n.reset(),n.setConf({playerData:{playerFlowid:null===(e=t.data)||void 0===e?void 0:e.flowid}})},n.safePrependEle=function(t,e,o,i){var r;void 0===i&&(i="container");var a=n.player;(null===(r=a.plugins[t])||void 0===r?void 0:r[e])&&"function"==typeof a.plugins[t][e]?a.plugins[t][e](o,i):a.pluginMsg.on("pluginsetup:".concat(t),(function(){a.plugins[t][e](o,i)}))},n.launchMiniProgram=function(t){var e,o,i,r,a="SHOW-MINI-PROGRAM-POPUP-DETAIL",s=function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat(t.getMonth(),"-").concat(t.getDate())}(),d=localStorage.getItem(a),l="in"===(null===(o=null===(e=n.config)||void 0===e?void 0:e.playerData)||void 0===o?void 0:o.playerPf)&&t.show_popup&&d!==s;return je(t.url_scheme,t.amsLinkParams,{isClient:!1,appVersion:(null===(r=null===(i=n.config)||void 0===i?void 0:i.playerData)||void 0===r?void 0:r.playerVersion)||"",showPopup:l,popupAutoCloseMs:t.auto_close_ms}),l&&localStorage.setItem(a,s),!0},n.amsLinkReportClick=function(t,e){var o,i;qe(t,e,{isClient:!1,appVersion:(null===(i=null===(o=n.config)||void 0===o?void 0:o.playerData)||void 0===i?void 0:i.playerVersion)||""})},n.setConf(i),n.layer=n.createElement(),n.outerEventHelper=new ji(t,{getPlayerData:function(){var t;return null!==(t=n.config.playerData)&&void 0!==t?t:{}},updatePlaytime:function(t){var e;n.config.playerData&&(null===(e=n.config.playerData)||void 0===e?void 0:e.playtime)!==t&&(n.config.playerData.playtime=t)}}),n.adCore=n.createAdCore(),n.logger=n.adCore.modules.logger.createLogger("VideoAdWebPlugin"),n.logger.log("config",i),n.bindReportEvent(),n.player.on(e.H5_PLAY_EVENT.PLAY_SESSION_START,n.onPlaySessionStart),n.registerAd(),n.bindPlayerEvent(),n}return i(n,o),n.prototype.reset=function(){this.adCore.api.reset()},n.prototype.getConf=function(){return this.config},n.prototype.setConf=function(t){if(this.config){var e=t.playerData,o=t.playerMethod,i=t.embedAdDom,n=O(t,["playerData","playerMethod","embedAdDom"]);this.config=D(D(D({},this.config),n),{playerData:D(D({},this.config.playerData),e),playerMethod:D(D({},this.config.playerMethod),o),embedAdDom:D(D({},this.config.embedAdDom),i)})}else this.config=t},n.prototype.setAdInfo=function(t){try{this.adCore.api.setAdOrder(t)}catch(t){}},n.prototype.getOrdersByType=function(t){var e=H.toAdCoreType(t);if(e)return this.adCore.modules.order.getAdOrder(e)},n.prototype.isOrderEmpty=function(t){if(!t)return!0;var e=this.getOrdersByType(t);return!e||0===e.orders.length},n.prototype.loadAd=function(t){return w(this,arguments,void 0,(function(t){var e,o=t.adType;return S(this,(function(t){return this.logger.log("loadAd",{adType:o}),e=H.toAdCoreType(o),this.reportTech("loadAd",o),e&&this.hasAdOrder(e)?[2,this.adCore.api.loadAd(e)]:(this.logger.log("未找到广告订单",{adType:o,adCoreType:e}),[2,Promise.reject()])}))}))},n.prototype.playAd=function(t){return w(this,arguments,void 0,(function(t){var e,o=this,i=t.adType;return S(this,(function(t){return this.logger.log("playAd",{adType:i}),e=H.toAdCoreType(i),this.reportTech("playAd",i),e&&this.hasAdOrder(e)?this.adCore.modules.ctrl.getRunningAds(e).length?(this.adCore.api.playAd(e),[2,Promise.resolve()]):[2,this.loadAd({adType:i}).finally((function(){return o.adCore.api.playAd(e)}))]:(this.logger.log("未找到广告订单",{adType:i,adCoreType:e}),[2,Promise.reject()])}))}))},n.prototype.pauseAd=function(t){this.adCore.api.pauseAd(t&&H.toAdCoreType(t))},n.prototype.resumeAd=function(t){this.adCore.api.resumeAd(t&&H.toAdCoreType(t))},n.prototype.stopAd=function(t){var e=(null==t?void 0:t.adType)||t;this.adCore.api.stopAd(e&&H.toAdCoreType(e))},n.prototype.readRfId=function(){return function(){try{return window.localStorage.getItem(Vt)||""}catch(t){return""}}()},n.prototype.muteAd=function(){this.adCore.api.muteAd()},n.prototype.unMuteAd=function(){this.adCore.api.unMuteAd()},n.prototype.setAdVolume=function(t){this.adCore.api.setVolume(t)},n.prototype.getAdVolume=function(){return this.postVolume},n.prototype.resizeAd=function(t){var e=this.getPlayerSize();this.adCore.api.resizeAd(D({width:e.playerWidth,height:e.playerHeight,oWidth:e.playerOWidth,oHeight:e.playerOHeight},t))},n.prototype.adjustUI=function(t){this.adCore.api.adjustUI(t)},n.prototype.setAdSmallWindow=function(t){this.adCore.api.setAdSmallWindow(t)},n.prototype.hideAdBeforeResize=function(){this.adCore.api.hideAdBeforeResize()},n.prototype.seekStart=function(){this.adCore.api.seekStart()},n.prototype.reportAd=function(t,e){this.adCore.api.reportAd(H.toAdCoreType(t),e)},n.prototype.getAdParams=function(o){var i=function(o,i,n){var r,a,s,d,l,c,p,u,h,f,v,m=Ai.getAdScene(o.adType),y=o.fmt||i.getCommonKv(e.COMMON_DATA_KEY.currentDefn)||i.getCommonKv(e.PersistedUserSettings.definition),g={base:{vid:o.vid||i.getCommonKv(e.COMMON_DATA_KEY.vid),cid:o.coverId||i.getCommonKv(e.COMMON_DATA_KEY.cid)},is_live:"1"===o.live||i.config.type===t.PLAY_MODE.LIVE,type_id:Number(o.tpId||n.playerTpid)||0,referer:o.refer||i.getCommonKv(e.COMMON_DATA_KEY.referrer)||"",url:o.url||i.getCommonKv(e.COMMON_DATA_KEY.url),flow_id:o.flowId||i.getCommonKv(e.COMMON_DATA_KEY.flowid),refresh_id:"",fmt:y?fi[y]:ti.HD||ti.HD};o.livePid&&(g.pid=o.livePid,g.base.pid=o.livePid);var _=null===(r=i.getCommonKv("getinfoAdInfo"))||void 0===r?void 0:r.adsid;m===Ko.ANCHOR&&_&&(g.session_id=_);var A=o.pf||n.playerPf||function(e){if(t.uaTool.mobile)return Oo.H5;var o=window.location.hostname;return"v.qq.com"===o||"film.qq.com"===o||8===e?Oo.IN:Oo.OUT}(oi(n)),E={guid:o.guId||i.getCommonKv(e.COMMON_DATA_KEY.guid),channel_id:o.chId||oi(n),site:o.ty||"web",platform:A,from:Number(o.from)||Number(t.uaTool.os.iphone?"3":t.uaTool.os.ipad?"6":t.uaTool.os.android?"4":"0"),device:o.pfEx||n.playerPfEx||ei(),play_platform:Number(null!==(a=o.platform)&&void 0!==a?a:i.getCommonKv(e.COMMON_DATA_KEY.platform)),pv_tag:o.vpTag||n.playerVptag||ii(),support_click_scan_integration:"in"===A,vip_page_channel_id:o.vip_page_channel_id};n.launchChannel&&(E.launch_channel=n.launchChannel),1===o.disable_time_offset&&(E.disable_time_offset=!0);var C=n.qimei32||function(){try{return window.qb_external.getQ16()}catch(t){return window.QimeiWeb?new window.QimeiWeb({appKey:"fc347096e93d8844"}).getLocalQimei36().q32||null:Po("_qimei_q32")}}();C&&(E.qimei32=C),n.qimei36&&(E.qimei36=n.qimei36),1===o.disable_time_offset&&(E.disable_time_offset=!0);var I={version:o.v||n.playerVersion||i.getCommonKv(e.COMMON_DATA_KEY.playerver),plugin:o.appVersion||"4.1.13",switch:Number(null!==(s=o.adaptor)&&void 0!==s?s:1),play_type:"".concat(null!==(l=null!==(d=o.pt)&&void 0!==d?d:i.getCommonKv(e.COMMON_DATA_KEY.playertype))&&void 0!==l?l:"")};!0===Ro()&&(I.img_type="webp");var x={type:So(o.lt||wo("main_login")),vuid:Number(null!==(p=null!==(c=o.userId)&&void 0!==c?c:wo("vuserid"))&&void 0!==p?p:0),vuser_session:null!==(u=o.token)&&void 0!==u?u:wo("vusession"),app_id:null!==(h=o.appId)&&void 0!==h?h:wo("appid"),open_id:null!==(f=o.openId)&&void 0!==f?f:wo("openid"),access_token:null!==(v=o.accessToken)&&void 0!==v?v:wo("access_token")};n.wuid&&(x.wuid=n.wuid);var T=o.pu||n.playerPu,b={ad_scene:m,user_type:""===T?$o.UNKNOWN:Number(T),video:g,platform:E,player:I,token:x,req_extra_info:{now_timestamp_s:Math.floor(Date.now()/1e3),ad_frequency_control_time_list:No()}},L={ad_scene:m};if(L.ad_scene===Ko.PRE&&(b.video.refresh_id=function(){try{return window.localStorage.getItem("TxpCreativePlayer-rfid")||""}catch(t){return""}}()),b.extra_info=function(t){var e={};t.isTodayFirstShortVideo&&(e.is_today_first_short_video=!0);var o=t.watchCompleteTimestamp,i=t.refreshVideoNum,n=t.freeAdTime,r=t.refreshFreeAdNum,a=[o,i,n,r].some((function(t){return void 0!==t}));return a&&(e.news_frequency_info={watch_complete_timestamp_ms:o,refresh_video_num:i,free_ad_time_ms:n,refresh_free_ad_num:r}),e}(n),m===Ko.DYNAMIC_MID){var P=Number(window.sessionStorage.getItem(Lo)||0);b.dynamic={dynamic_mid_ad_request_num:P}}L.ad_scene===Ko.DYNAMIC_MID&&(P=Number(window.sessionStorage.getItem(Lo)||0),b.dynamic={dynamic_mid_ad_request_num:P});var N=Ei[m];return N&&(L[N]=b),L}(o,this.player,this.config.playerData||{}),n=i[z[i.ad_scene]];n&&this.adCore.modules.vrBase.updateParams(n),this.adCore.modules.vr.reportCallGetAdParams({ad_scene:i.ad_scene,params:o});var r=function(t){void 0===t&&(t=4);for(var e="",o=0;o<t;o++)e+=Gi[Math.floor(Math.random()*Gi.length)];return e}();return this.updateConfig(i.ad_scene,n),this.logger.log("getAdParams",o,i),{adparam:D(D({},o),{sspKey:r}),sspAdParam:i}},n.prototype.destroy=function(){o.prototype.destroy.call(this),this.adCore.destroy(),this.player.off(e.H5_PLAY_EVENT.PLAY_SESSION_START,this.onPlaySessionStart)},n.prototype.setPhlsPlayType=function(t){void 0===t&&(t=A.SOLO),this.adCore.modules.config.setPHLSConfig({phlsPlayType:t})},n.prototype.startSoloPlayPhls=function(t){this.adCore.modules.config.setPHLSConfig({isSoloPlayingPhls:!0,soloPlayPhlsTimeOffset:1e3*t})},n.prototype.endSoloPlayPhls=function(){this.adCore.modules.config.setPHLSConfig({isSoloPlayingPhls:!1,soloPlayPhlsTimeOffset:void 0})},n.prototype.bindPlayerEvent=function(){var t=this;Object.entries($i).forEach((function(o){var i=o[0],n=o[1];t.adCore.modules.event.on(i,(function(o){i!==Ge.AD_LOAD_START?(i!==Ge.AD_LOAD_COMPLETE||void 0===o.isAllLoaded||o.isAllLoaded)&&t.emit(n,t.transformEventData(o)):"number"==typeof o.index&&t.emit(e.H5_PLAY_EVENT.AD_REQ_ASSETS_START,t.transformEventData(o))}))}))},n.prototype.reportUrl=function(t){return new Promise((function(e){var o=document.createElement("img"),i=function(){o.onerror=null,o.onload=null,e()};o.onerror=i,o.onload=i,o.src=t}))},n.prototype.transformEventData=function(t){return(null==t?void 0:t.adType)?D(D({},t),{adType:this.transformToThumbPlayerAdType(t.adType),coreAdType:t.adType,h5AdType:this.transformToH5Type(t.adType)}):t},n.prototype.updateConfig=function(t,e){var o,i,n;if(e){var r={playerVersion:e.player.version,playerPf:e.platform.platform,playerPfEx:e.platform.device,playerFlowid:e.video.flow_id,playerGuid:e.platform.guid,playerCid:e.video.base.cid,playerVid:e.video.base.vid,playerPt:e.player.play_type,playerPu:e.user_type,playerPlatform:"".concat(null!==(o=e.platform.play_platform)&&void 0!==o?o:""),playerTpid:"".concat(null!==(i=e.video.type_id)&&void 0!==i?i:"")};t===s.ANCHOR&&(r.playerSessionId=null!==(n=e.video.session_id)&&void 0!==n?n:""),this.setConf({playerData:r})}},n.prototype.transformToThumbPlayerAdType=function(t){var e,o;return null!==(o=null!==(e=H.toThumbPlayerAdType(t))&&void 0!==e?e:H.toAdTypeV(t))&&void 0!==o?o:"".concat(t)},n.prototype.bindReportEvent=function(){var t=this;this.player.pluginMsg.on(e.H5_EXT_EVENT.PROXY_HTTP_START,(function(e){var o,i=e.data;(null===(o=null==i?void 0:i.buid)||void 0===o?void 0:o.includes("ad"))&&i.sspAdParam&&t.adCore.modules.vr.reportRequest(Ui.jsonParse(i.sspAdParam))})),this.player.pluginMsg.on(e.H5_EXT_EVENT.PROXY_HTTP_END,(function(e){var o,i,n,r,a,s=e.data;if(null===(i=null===(o=null==s?void 0:s.reqParams)||void 0===o?void 0:o.buid)||void 0===i?void 0:i.includes("ad")){var d=Ui.getAdScene(null===(n=s.reqParams)||void 0===n?void 0:n.sspAdParam);(null===(r=s.parseData)||void 0===r?void 0:r.ad)?(t.adCore.modules.vrBase.setStrategyIds(null!==(a=s.parseData.ad.strategy_ids)&&void 0!==a?a:[]),t.adCore.modules.vr.reportResponse(Ui.parseProxyAdResponse(s.parseData.ad,d))):t.adCore.modules.vr.reportResponse({ad_scene:null!=d?d:-1,has_error:"1",url:window.location.href,resData:s.resData,xhrReqData:s.xhrReqData,reqParams:s.reqParams,error:s.error})}})),this.player.pluginMsg.on(e.H5_EXT_EVENT.FLOW_NODE_END,(function(e){var o,i;"VideoFlowNode"===(null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.name)&&"normal"===(null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.videoEndState)&&t.adCore.modules.vr.reportVideoNearEnd()}))},n.prototype.hasAdOrder=function(t){var e=function(t){return!!t&&(!!t.empty.length||!!t.orders.length)};return t===p.PRE?e(this.adCore.modules.order.getPreAdOrder()):e(this.adCore.modules.order.getAdOrder(t))},n.prototype.createElement=function(){var t=document.createElement("div");return t.className="plugin-creative-player",this.player.container.appendChild(t),t},n.prototype.transformToH5Type=function(t){var e;return null!==(e=H.toAdTypeV(t))&&void 0!==e?e:"".concat(t)},n.prototype.createAdCore=function(){var t=this,e=this.player;return new Ki({moduleOptions:{logger:this.getLogger(),config:this.getConfig(),cgi:{reportUrl:function(e){return t.reportUrl(e)},getConfig:function(){var o=t.config.playerData;return{from:null==o?void 0:o.playerFrom,pf:null==o?void 0:o.playerPf,v:null==o?void 0:o.playerVersion,dura:e.duration,coverid:(null==o?void 0:o.playerCid)||"",pf_ex:null==o?void 0:o.playerPfEx,chid:(null==o?void 0:o.playerChid)||0,tpid:(null==o?void 0:o.playerTpid)||"",vptag:(null==o?void 0:o.playerVptag)||ii()||"",appversion:"4.1.13"}}},adblock:{onAdBlockEnabledChange:function(e){t.adBlockEnabled=e}},outerEvent:{getEvents:function(){return t.outerEventHelper.getEvents()},getCtrlBarVisible:function(){return t.outerEventHelper.getCtrlBarVisible()},removeAllEvents:function(){return t.outerEventHelper.destroy()},getIsMimiPlayer:function(){return t.outerEventHelper.getIsMimiPlayer()}}}})},n.prototype.getConfig=function(){var o,i=this;return{isMobile:this.isMobile,disablePauseAd:this.config.disablePauseAd,getContainerSize:this.getContainerSize,forbidLinkJump:!!this.config.forbidLinkJump,showCloseButton:"function"==typeof(null===(o=this.config.playerMethod)||void 0===o?void 0:o.showOpenVIPGuide),phlsConfig:{phlsPlayType:A.NORMAL},getPlayerData:function(){var t;return null!==(t=i.config.playerData)&&void 0!==t?t:{}},showOpenVIPGuide:function(){var t,e;null===(e=null===(t=i.config.playerMethod)||void 0===t?void 0:t.showOpenVIPGuide)||void 0===e||e.call(t)},getOuterPlayerData:function(){var t,e;return{volume:i.player.volume,duration:i.player.duration,playerVid:"".concat(i.player.vid),playtime:(i.player.playtime||0)+((null===(t=i.adCore.modules.config.phlsConfig)||void 0===t?void 0:t.soloPlayPhlsTimeOffset)||0)/1e3,type:null===(e=i.player.config)||void 0===e?void 0:e.type,state:i.player.state,startPlaytime:i.outerEventHelper.getStartPlaytime()}},renderQrCode:function(t,e,o){var i=t;return i.innerHTML="",new at(i,{text:e,width:o,height:o})},requestProxyHttp:this.config.requestProxyHttp,getPlayerSize:function(){return i.getPlayerSize()},resetBarrageZindex:function(){var t,e;null===(e=null===(t=i.config.playerMethod)||void 0===t?void 0:t.resetBarrageZindex)||void 0===e||e.call(t)},createPlayer:function(o,n,r){var a,s,d,l,c={container:r,plugin:i,isMobile:i.isMobile,flowId:null!==(s=null===(a=i.config.playerData)||void 0===a?void 0:a.playerFlowid)&&void 0!==s?s:i.player.getCommonKv(e.COMMON_DATA_KEY.flowid),guId:null!==(l=null===(d=i.config.playerData)||void 0===d?void 0:d.playerGuid)&&void 0!==l?l:i.player.getCommonKv(e.COMMON_DATA_KEY.guid),isOpenCache:i.config.opencache,isUseDemuxKernel:i.config.isUseDemuxKernel,createPlayer:function(e){return i.config.createPlayer?i.config.createPlayer(e):(i.logger.log("未传入创建 KernelProxy 的方法, 自己创建"),new t.KernelProxy(e))},requestUrlByVid:i.config.requestUrlByVid};return n===p.PAUSE?new Ji(o,D(D({},c),{kernelOptions:{createVideoNodeWhenLoad:!1,videoElements:void 0,originKernelConfig:{maxVideoNodeCount:1}}})):new Ji(o,D(D({},c),{onVolumeChange:function(t){i.postVolume=t}}))},amsLinkReportClick:this.amsLinkReportClick,launchMiniProgram:this.launchMiniProgram}},n.prototype.reportTech=function(t,e){try{var o=H.toAdCoreType(e),i=this.adCore.modules.order,n=o===p.PRE?i.getPreAdOrder():i.getAdOrder(o);this.adCore.modules.vr.reportTechParam("playerCall-".concat(t),{paramAdType:e,adType:o,hasOrder:!!n,orderLen:(null==n?void 0:n.orders.length)||0,emptyLen:(null==n?void 0:n.empty.length)||0})}catch(t){}},n.pluginName=e.AdPluginName,n.VERSION="4.1.13",n}(e.Plugin);!function(t){t[t.INIT=0]="INIT",t[t.LOADING=1]="LOADING",t[t.LOAD_READY=2]="LOAD_READY",t[t.PLAYING=3]="PLAYING",t[t.PAUSED=4]="PAUSED",t[t.END=-1]="END",t[t.WAIT_FOR_STOP=-2]="WAIT_FOR_STOP",t[t.ERROR=5]="ERROR"}(Zi||(Zi={}));var en,on=function(){this.createTime=Date.now(),this.state=Zi.INIT,this.isShow=!1},nn=function(){function t(t){this.adCore=t.adCore,this.order=t.order,this.config=t.config,this.logger=this.adCore.logger.createLogger("AbstractAd"),this.adInfo=this.getInitAdInfo(),this.data=this.initData(),this.setState(Zi.INIT),this.logger.log("创建广告实例: ".concat(this.adType)),this.adCore.vr.reportCreated(this.order,this.getVrExtraData())}return Object.defineProperty(t.prototype,"adType",{get:function(){return this.order.adType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){var t;return null!==(t=this.data.state)&&void 0!==t?t:Zi.INIT},enumerable:!1,configurable:!0}),t.prototype.load=function(){this.setState(Zi.LOADING),this.adCore.event.emit(Ge.AD_LOAD_START,{adType:this.adType,adOrder:this.order,adInfo:this.adInfo})},t.prototype.play=function(){this.setState(Zi.PLAYING),this.data.hasCallPlay=!0,this.data.isStart||(this.data.isStart=!0)},t.prototype.pause=function(){this.setState(Zi.PAUSED)},t.prototype.resume=function(){this.setState(Zi.PLAYING)},t.prototype.mute=function(){},t.prototype.unMute=function(){},t.prototype.setVolume=function(t){},t.prototype.stop=function(t,e){this.data.isStart=!1,this.setState(Zi.END),this.adCore.event.emit(Ge.AD_STOP,{adType:this.adType,adOrder:this.order,adInfo:this.adInfo,index:this.adInfo.orderIdx,forceStop:t,unloadTrigger:e})},t.prototype.destroy=function(){this.data.hasDestroy||(this.data.hasDestroy=!0,this.order.orders.forEach((function(t){t.reporter.reset()})),this.order.empty.forEach((function(t){t.reporter.reset()})),this.adCore.ctrl.destroyAd(this),this.adCore.event.emit(Ge.AD_DESTROY,{adType:this.adType,adOrder:this.order,adInfo:this.adInfo}))},t.prototype.show=function(){var t,e;this.data.isShow||(this.data.isShow=!0,this.adCore.vr.reportAdShow(this.adInfo,(null===(e=null===(t=this.adInfo.data)||void 0===t?void 0:t.material)||void 0===e?void 0:e.type)||m.UNKNOWN),this.adCore.event.emit(Ge.AD_SHOW,{adType:this.adType,adOrder:this.order,adInfo:this.adInfo}),this.data.showTime||(this.data.showTime=Date.now()))},t.prototype.hide=function(){this.data.isShow=!1,this.adCore.event.emit(Ge.AD_HIDE,{adType:this.adType,adOrder:this.order,adInfo:this.adInfo})},t.prototype.setAdFullScreen=function(t){},t.prototype.setAdSmallWindow=function(t){this.data.isSmallWindow=t.isSmallWindow},t.prototype.report=function(t){},t.prototype.resize=function(t){},t.prototype.adjustUI=function(t){},t.prototype.hideAdBeforeResize=function(){},t.prototype.seekStart=function(){},t.prototype.setState=function(t){this.data.state=t},t.prototype.canplayHandler=function(t){this.data.canPlay||(this.logger.log("广告可播: ".concat(st(t))),this.data.canPlay=!0,this.setState(Zi.LOAD_READY),this.adCore.event.emit(Ge.AD_CAN_PLAY,D({adType:this.adType,adInfo:this.adInfo},t)))},t.prototype.loadCompleteHandle=function(t){this.adCore.event.emit(Ge.AD_LOAD_COMPLETE,t),t.adInfo;var e=t.adOrder,o=t.isAllLoaded,i=O(t,["adInfo","adOrder","isAllLoaded"]);this.logger.log("素材加载完成: ".concat(st(D(D({},i),{adOrder:e,isAllLoaded:o})))),this.adCore.vr.reportLoaded(t.adInfo,i,this.getVrExtraData())},t.prototype.doClickAction=function(t,e){var o,i=Date.now();if(!(this.data.lastClickTime&&i-this.data.lastClickTime<300)&&(this.data.lastClickTime=i,t.clickable&&(this.adCore.vr.reportClick(t,e,this.getVrExtraData()),t.data.order.ad_action.type!==u.SCAN||t.landing.enable_click))){this.adCore.config.amsLinkReportClick(4e6,t.amsLinkParams);var n=t.landing,r=n.landing_page_popup_url,a=n.landing_page_type,s=n.enable_terminal_inside_open_mini_game,d=e.actionType,l=Le(r||"",{__ACTTYPE__:"".concat(d),__AMS_LINK_PARAMS__:encodeURIComponent(JSON.stringify(t.amsLinkParams))});if(a===b.SSO&&l)return this.logger.log("sso 方式打开落地页：".concat(r)),this.adCore.config.openQQLive(l),void t.reporter.reportClick();if(a===b.NORMAL&&l)if(this.adCore.config.openHintBrowser(l))return void t.reporter.reportClick();if(s&&t.miniProgramData||(null===(o=t.miniProgramData)||void 0===o?void 0:o.url_scheme))if(this.adCore.config.launchMiniProgram(t.miniProgramData))return void this.jumpNormal(t,e,{linkOnlyReport:!0});this.jumpNormal(t,e)}},t.prototype.getJumpLink=function(t,e){var o=t.landing.link;if(o){var i=this.adCore.config.playerData.playerPfEx||"";return o=(o=Pe(o,{pf_ex:i,version:"4.1.13"})).replace("__RETURN_TYPE__","2"),e&&(o=o.replace("__ACTTYPE__",e)),o}},t.prototype.doExposure=function(t,e){t.reporter.reportExposure(e),pe(M.EXPOSURE,t.frequencyControlConfig)},t.prototype.getVrExtraData=function(){return{}},t.prototype.initData=function(){return new on},t.prototype.getInitAdInfo=function(){return this.order.orders[0]||this.order.empty[0]},t.prototype.jumpNormal=function(t,e,o){var i,n=this.getJumpLink(t,e.actionType);n&&(null!==(i=null==o?void 0:o.linkOnlyReport)&&void 0!==i&&i?this.adCore.cgi.requestReportUrl(n):this.adCore.config.forbidLinkJump||(window.open(n),t.reporter.reportClick()))},t}(),rn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.load=function(){t.prototype.load.call(this),this.play()},e.prototype.play=function(){t.prototype.play.call(this),this.show();var e=this.adCore.config.playerData.playtime||this.adCore.config.outerPlayerData.playtime,o=this.adCore.config.outerPlayerData.startPlaytime;this.logger.log("der report: ".concat(st({playtime:e,startPlaytime:o}))),this.doExposure(this.adInfo,{__TIME_OFFSET__:"".concat(Math.floor(1e3*e)),__START_TIME__:"".concat(Math.floor(1e3*o))}),this.adCore.vr.reportExposure(this.adInfo),this.stop()},e.prototype.stop=function(){var e;t.prototype.stop.call(this),this.adCore.vr.reportEnded(this.order,{ad_playtime:-1,first_view:null!==(e=this.data.showTime)&&void 0!==e?e:-1}),this.destroy()},e}(nn);!function(t){t[t.INIT=0]="INIT",t[t.LOADING=2]="LOADING",t[t.PLAYING=6]="PLAYING",t[t.END=-1]="END"}(en||(en={}));var an,sn=function(t,e){var o;if(e.ad_scene!==s.ANCHOR)return{};var i={},n=[];return null===(o=e.anchor_ads)||void 0===o||o.forEach((function(o){if(o.ad_type===p.ANCHOR_EMPTY)if(o.point){var i=ze(o);n.push({adType:o.ad_type,auth:e.auth,empty:Ke(t,e,o.empty),orders:He(t,i,e,o.anchor_empty),point:i,pointStatus:en.INIT})}else $e(t,e,o.empty)})),n.length>0&&(i.pointAdData=n),i},dn=function(){function t(t){this.adCore=t,this.name="AdWatcher",this.logger=this.adCore.logger.createLogger(this.name)}return t.prototype.reset=function(){},t}(),ln=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleVideoTimeupdate=function(t){var o=t.data.playtime;e.timeupdate(1e3*o)},e}return i(e,t),e.prototype.startWatch=function(){this.adCore.outerEvent.on(ki.VIDEO_TIMEUPDATE,this.handleVideoTimeupdate)},e.prototype.endWatch=function(){this.adCore.outerEvent.off(ki.VIDEO_TIMEUPDATE,this.handleVideoTimeupdate)},e}(dn),cn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleVideoPlaySessionEnd=function(){var t=e.adCore.order.getPoints(p.ANCHOR_EMPTY);(null==t?void 0:t.length)&&t.forEach((function(t){var o=e.adCore.order.getPointOrderFromPoint(p.ANCHOR_EMPTY,t);o&&0!==o.orders.length&&o.pointStatus===en.INIT&&(o.pointStatus=en.LOADING,e.adCore.ctrl.loadAdOrder(o).then((function(){o.pointStatus=en.END})).catch((function(t){})))}))},e}return i(e,t),e.prototype.startWatch=function(){t.prototype.startWatch.call(this),this.adCore.outerEvent.on(ki.VIDEO_PLAY_SESSION_END,this.handleVideoPlaySessionEnd),this.adCore.event.on(Ge.AD_STOP_ALL,this.handleVideoPlaySessionEnd)},e.prototype.endWatch=function(){t.prototype.endWatch.call(this),this.adCore.outerEvent.off(ki.VIDEO_PLAY_SESSION_END,this.handleVideoPlaySessionEnd),this.adCore.event.off(Ge.AD_STOP_ALL,this.handleVideoPlaySessionEnd)},e.prototype.timeupdate=function(t){var e=this;this.adCore.config.phlsConfig.isSoloPlayingPhls||this.adCore.order.getPoints(p.ANCHOR_EMPTY).forEach((function(o){var i=e.adCore.order.getPointOrderFromPoint(p.ANCHOR_EMPTY,o);i&&0!==i.orders.length&&t>=o.begin&&i.pointStatus===en.INIT&&(i.pointStatus=en.LOADING,e.adCore.ctrl.loadAdOrder(i).then((function(){i.pointStatus=en.END})).catch((function(t){})))}))},e}(ln),pn=function(t){function e(e,o){var i=t.call(this,e)||this;return i.adCore=e,i.options=o,i.name="AnchorWatcher",i.requestAnchorOrder=function(t){t.data.isFirst&&(i.options.disable||"vod"!==i.adCore.config.outerPlayerData.type||i.adCore.config.requestProxyHttp(s.ANCHOR))},i}return i(e,t),e.prototype.startWatch=function(){this.adCore.outerEvent.on(ki.VIDEO_PLAYING,this.requestAnchorOrder),this.adCore.outerEvent.on(ki.AD_SESSION_ID_CHANGE,this.requestAnchorOrder)},e.prototype.endWatch=function(){this.adCore.outerEvent.off(ki.VIDEO_PLAYING,this.requestAnchorOrder),this.adCore.outerEvent.off(ki.AD_SESSION_ID_CHANGE,this.requestAnchorOrder)},e}(dn);!function(t){t[t.START=0]="START",t[t.PAUSED=1]="PAUSED"}(an||(an={}));var un,hn=function(){function t(t,e){var o;this.isRunning=!1,this.timeList=[],this.prevTime=null,this.interval=null,this.options=t,this.logger=e,this.options.timeout=null!==(o=this.options.timeout)&&void 0!==o?o:200}return Object.defineProperty(t.prototype,"time",{get:function(){var t;return null!==(t=this.prevTime)&&void 0!==t?t:0},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.isRunning||(this.timeList.push({time:Date.now(),type:an.START}),this.startInterval())},t.prototype.pause=function(){this.isRunning&&(this.timeList.push({time:Date.now(),type:an.PAUSED}),this.clearInterval())},t.prototype.clear=function(){this.clearInterval(),this.timeList=[],this.prevTime=null},t.prototype.startInterval=function(){var t=this;this.interval||(this.interval=window.setInterval((function(){var e=t.getRunningTime(),o=t.options.onChange;t.prevTime!==e&&(t.prevTime=e,null==o||o(t.prevTime))}),this.options.timeout),this.isRunning=!0)},t.prototype.clearInterval=function(){this.interval&&(clearInterval(this.interval),this.interval=null,this.isRunning=!1)},t.prototype.getRunningTime=function(){var t=null,e=[];return this.timeList.forEach((function(o){o.type!==an.START||t?o.type===an.PAUSED&&t&&(e.push(o.time-t),t=null):t=o.time})),t&&e.push(Date.now()-t),Math.floor(e.reduce((function(t,e){return t+e}),0)/1e3)},t}();function fn(t,e){void 0===e&&(e={});var o=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===o&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}!function(t){t.ADVERTISER_LOGO="1002",t.ADVERTISER_NAME="1003",t.AD_TITLE="1011",t.AD_VIEW_AREA="1014",t.AD_DETAIL="1024",t.LD_DOWNLOAD_BANNER="1025",t.AD_ACTION_BUTTON="1021",t.CONTINUED_POST="1043"}(un||(un={}));var vn;fn('txp,txpdiv{-webkit-box-sizing:border-box;box-sizing:border-box;display:block}.txp_ad{color:#fff;font-family:sans-serif;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%;z-index:4}.txp_ad a{text-decoration:none}.txp_ad .txp_btn_close{color:#fff;cursor:pointer;display:inline-block;height:28px;margin-left:3px;pointer-events:auto;position:relative;vertical-align:top;width:14px}.txp_ad .txp_btn_close:before{background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMiAxMiI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTEwLjUgMTAtLjUuNS00LTQtNCA0LS41LS41IDQtNC00LTQgLjUtLjUgNCA0IDQtNCAuNS41LTQgNCA0IDR6Ii8+PC9zdmc+) 50% no-repeat;content:"";height:12px;left:0;position:absolute;top:7px;width:12px}.txp_ad img{max-width:100%;pointer-events:auto}.txp_ad .txp_ad_inner{height:100%;left:0;overflow:hidden;pointer-events:none;position:absolute;top:0;width:100%}.txp_ad .txp_ad_inner .txp_creative_link{cursor:auto;display:block;height:100%;pointer-events:auto;width:100%}.txp_ad .txp_btn{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:none;cursor:pointer;font-family:inherit;position:relative}.txp_ad .txp_ad_dialog{background-color:#242424;background-color:rgba(36,36,36,.98);left:50%;margin:auto;padding-bottom:25px;padding-top:40px;pointer-events:auto;position:absolute;text-align:center;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:420px;z-index:7}.txp_ad .txp_ad_dialog .txp_ad_btn{background-color:#ff7800;border-radius:1px;cursor:pointer;display:block;font-size:14px;line-height:34px;margin:25px auto 0;overflow:hidden;text-align:center;width:100px}.txp_ad .txp_ad_dialog .txp_ad_fb{display:inline-block;font-size:12px;margin:15px auto 0;text-align:center}.txp_ad .txp_ad_dialog .txp_dialog_bd{color:#fff;display:block;font-size:14px;line-height:1.5;margin:auto 30px;text-align:left}.txp_ad .txp_ad_dialog .txp_btn_close{color:#848484;cursor:pointer;font-size:0;position:absolute;right:8px;top:2px;-webkit-transform:scale(1.5);transform:scale(1.5)}.txp_ad_countdown{color:#ff6e0b;display:inline-block;font-family:Helvetica,arial;font-size:14px;font-weight:400;line-height:26px;padding-left:3px;position:relative;vertical-align:top}.txp_ad_countdown:after{background-color:#fff;background-color:hsla(0,0%,100%,.6);background-size:1px 100%;bottom:9px;content:"";position:absolute;right:-9px;top:9px;width:1px}.txp_ad_skip_text{line-height:26px;margin-left:6px;padding-left:10px}.txp_ad_skip_text,.txp_btn_hint{display:inline-block;position:relative;vertical-align:top}.txp_btn_hint{background-color:#ff6e0b;border-radius:100%;height:14px;margin-left:3px;margin-top:6px;width:14px}.txp_btn_hint:after{content:"?";left:0;line-height:14px;position:absolute;text-align:center;top:0;width:100%}.txp_ad_more,.txp_ad_skip{background-color:#252525;background-color:rgba(37,37,37,.7);border-radius:1px;color:#fff!important;display:inline-block;font-size:12px;height:26px;line-height:26px;overflow:hidden;padding:0 5px;pointer-events:auto;position:relative;vertical-align:top;white-space:nowrap;z-index:100}.txp_ad .txp_ad_inner .txp_creative_link.txp_none,.txp_ad .txp_none,.txp_none,txpdiv .txp_none{display:none}.plugin-creative-player .txp_none{display:none!important}'),function(t){t.CLICK="click",t.MOUSE_ENTER="mouseenter",t.LOAD="load",t.ERROR="error"}(vn||(vn={}));var mn,yn=function(t){return function(e){return function(t,e){return"".concat("creative-player","-").concat(t,"-").concat(e)}(t,e)}},gn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAJKADAAQAAAABAAAAJAAAAAAqDuP8AAACHklEQVRYCe2YPU7DQBCFY5ASCUGLAgUdNIRDIAqgyC04CAplOkRyBlpygQghQUOJkGiQIEBHwU8VCvM9sKXVZuPYziaxBCO9eD078/yy3h2vXSr9W/IIBMndg71hGJbxboM6qIEVsApkLxFuOXZANwiCPkf/hpAqaIF3kNbeCGyDqjdFkFXAEfgEeU25DVAZSxgEGpVL4MuuIMo3WiTWQG+Ikkf8J2AfbIDFCGrLp75hufJvZR4pki6AbU84DsD8KELFRLHPHG2TqGwjRcKNxdLhfGmUELtfOeDM4tKpbl/6OUVwHWhFfQFNyDn7YmnPlQuOgW2NtBw/cWSXwYIrCf8yaEZYdsWYPuIkyh4prb5st84kNdsQnYPY7mmsmf2uNjG6ffacartiM/sgtgtkWlFaFKapeKr6j2eQuObESFHkafVplZm2O54asmET8anJGrXTiFKdMq01tiARwJhLFHkqnqZ1nYKI2AOqwj5MI+VcffhV0U27GybowYzy0G66LgSvHjWmfcRxuYtdTODpGDp5kFysW+ZUmeDkD0x2Uidce6ArrxgRket/2UNauMJYuEfH9B+u3BZtGZybKPzT3X5wwR3wCvrgEOSuWcoFrjmXfoMGwTUwrcPJTLewXVNN1J7pJn8TET2HKLn0AFYt0VN7HUz+NSgqYMV5UYxLM/++OK/SsShjtCb+scHH5xh9itEnGdn0Psf8Xu8P/n4D4PsXcaUqP5MAAAAASUVORK5CYII=",_n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAz0lEQVRIDe1V2w3CMAxs2IGBYOduUDZgC35gAnOuUpFYxvGhSvw0khulvjsn5z6m6RiMAyIyIxbEmeEpVjmVO3/lVgAmuSPSRRRbOZhkiQq0wFQRIz7mMAQG250qQ8xgOlG7iASinNUJ156Qdy8UGSUdQW2kjnFDR+JbHmLt00WJnzaRv81m92rLfhY54mpVa9fvfYiEolzK6oxABuMWY4gMdi1GE8CiOADrv0AH1Tzg28Z3n2v7HrywqRviUkp5rMdKXCr2WrnPBOWAfBx4A/82CR3u3683AAAAAElFTkSuQmCC",An="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAJKADAAQAAAABAAAAJAAAAAAqDuP8AAAAg0lEQVRYCe2WQQqAMAwEix8r+BnBg7/2G8YVPRVa2pNbmEAubaDDNISkRGAAAxiY0EBEZOVqgy6YU3kpNwsogezKJ6ygjpcJqHaXyBKm2oq+W0x1aVJRYWp4eC69D01ZV9j5d4oDU+shzMxixmv9UN/YLWhZUMNTuPb9nGMAAxhwMnADTiAA962llmkAAAAASUVORK5CYII=",En="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAABGElEQVRYCe1VwQrCMAxdBfHixY8RYf/PQPYxXryMHWaea2CWpkkKTg8NZNM2L+81ybaua9Yq0Crw4wqEEv+yLDfaP5KPIYSpFJvuEfZEa1fymbD3dJ//H/iHcAf5hbyPCYWwz+UY20cscoimCRgJ+SQ/k5tEbMiBARY5RCu2AKhMwkFqhyeWFakCrCJqyJHbJEATUUvuEiCJwDoZBo57LrboHZlczBVgXOa02KoiB9AtAKBEBJYw7a6TAwTTHsM16otXdwWS0+PksH1akCEfVv4dhjBHzi+k0l4UKN5MLbAQWGJyKlQBnsSeWBZTFFCT0IvRHkN8z10THucCw8lfUeQQTRMwE/JB7nrJbEQAixzNWgVaBf63Ai9zOaAYWlyyrgAAAABJRU5ErkJggg==",Cn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACAUlEQVRYCcVXsU7DMBC109JKFWVALPADfAE7zCyVKCNLi/goBgZYO7Cws/MF/EQlaFWppdS858ZplLiNL6jJk44YN3fv2Tmfba0yMMY00dWBtWANWATTsDIwcFrBfmEL2ExrvcQzQRIYxGwfwrrJr/tpTBB2CiEUtx5ZTH6M/9vsrABzcIwpgtNLcORVkZOPXORUUfzN9z3t5MqiS27OABOuLnQogNleF1oUwKXmx/3Vsxpcvqq3FyaoDPShL2NsR4MCaH6szJH5mV+o0eNIJILk8LG+iOEPbnsjkie1IPfizXCgm81Ps1yeB4tw5PChr0KMXNxNh94+er50fTdW/Yd+sIgsOXxtjA1hrrVbgERECXKGLxYQIqIkOUNrFIMzNoLgI6IjE85984BpT3PJBNAzKwJdZckZTi6AXikRNgizXThy+hFhObB+dy9/5QJSo+fyDF6iW+TLBGTI7bRL6oRHBI9fYfCRs1Ct0dduJbBsK1VYgBxp2AzsJpdXTMeOZ7GAInIXTFq2Y7/dAkLJ/yGCdeAU/v4dEfs5t1S7q0nWeVr4QftDPb33nMbM0x5KeW73I9LfmgEk5IzEz9Eb3lpfrb/8wW3vijNwgmZdx7IFc4A3lrpgBczqYgfvLIrvarwuVY0Jud0ynIKd16WqQC5ybpYfkrG+y2l62BBS6fX8Dz8LYXDqX2E6AAAAAElFTkSuQmCC",In=function(){function t(t){this.options=t,this.$domNodes={},this.eventEmitter=new de,this.logger=this.adCore.logger.createLogger("ui")}return Object.defineProperty(t.prototype,"adCore",{get:function(){return this.options.adCore},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this.options.container},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.mount(),this.logger.log("ui 创建"),this.domEvents=this.getDomEvents(),this.bindUIEvent()},t.prototype.destroy=function(){this.unbindUIEvent(),this.$domNodes.layer&&(this.logger.log("ui 销毁并移除"),this.$domNodes.layer.remove()),this.eventEmitter.removeAllListeners(),this.container.remove()},t.prototype.on=function(t,e){this.eventEmitter.on("".concat(t),e)},t.prototype.off=function(t,e){this.eventEmitter.off("".concat(t),e)},t.prototype.emit=function(t,e){this.eventEmitter.emit("".concat(t),e)},t.prototype.setDomVisible=function(t,e){e?oe(t):ee(t)},t.prototype.mount=function(){if(!this.$domNodes.layer){var t=document.createElement("div");t.dataset.role=this.roleMap.layer,this.container.appendChild(t),this.$domNodes.layer=t}this.appendDom(this.$domNodes.layer)},t.prototype.appendDom=function(t,e){var o=this;void 0===e&&(e=this.$domNodes);var i=this.getTemplate();i&&(t.innerHTML=i,Object.keys(this.roleMap).forEach((function(i){o.setDomNodes(t,e,i)})))},t.prototype.setDomNodes=function(t,e,o){void 0===e&&(e=this.$domNodes);var i=t.querySelector('[data-role="'.concat(this.roleMap[o],'"]'));i&&(e[o]=i)},t.prototype.bindUIEvent=function(){var t;null===(t=this.domEvents)||void 0===t||t.forEach((function(t){ie(t.el,t.eventName,t.listener)}))},t.prototype.unbindUIEvent=function(){var t;null===(t=this.domEvents)||void 0===t||t.forEach((function(t){ne(t.el,t.eventName,t.listener)}))},t.prototype.forwardDomEvent=function(t,e,o,i){var n=this;return void 0===o&&(o=vn.CLICK),{el:t,eventName:o,listener:function(t){i&&t.stopPropagation(),n.emit(e,{target:t.target})}}},t.prototype.getDomEvents=function(){return[]},t}(),xn=function(){function t(t,e){this.props=t,this.children=e,this.el=null,this.created=!1,this.state={}}return Object.defineProperty(t.prototype,"$el",{get:function(){return this.el},enumerable:!1,configurable:!0}),t.prototype.create=function(){this.el=this.render(),this.updateConfig=this.getUpdate(),this.created=!0},t.prototype.mount=function(t){this.created||this.create(),this.el&&(t.innerHTML="",t.appendChild(this.el)),this.mounted()},t.prototype.mounted=function(){},t.prototype.getState=function(t){return t in this.state?this.state[t]:this.props&&t in this.props?this.props[t]:void 0},t.prototype.setState=function(t){var e=this;Object.keys(t).forEach((function(o){var i,n=null===(i=e.updateConfig)||void 0===i?void 0:i[o],r=e.getState(o),a=t[o];e.state[o]=a,null==n||n(a,r)}))},t.prototype.getUpdate=function(){return{}},t.prototype.createRef=function(){var t;function e(e){t=e}return Object.defineProperty(e,"value",{get:function(){return t}}),e},t}();function Tn(t,e,o){if(function(t,e){return"function"==typeof e&&t.startsWith("on")}(e,o)){var i=e.slice(2).toLowerCase();t.__handlers=t.__handlers||{},t.removeEventListener(i,t.__handlers[i]),t.__handlers[i]=o,t.addEventListener(i,t.__handlers[i])}else["checked","value","className"].includes(e)?t[e]=o:!function(t,e){return"ref"===t&&"function"==typeof e}(e,o)?t.setAttribute(e,String(o)):o(t)}function bn(t,e){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];var n=document.createElementNS("http://www.w3.org/2000/svg",t);return e&&Object.entries(e).forEach((function(t){var e=t[0],o=t[1];Tn(n,e,o)})),o.forEach((function(t){n.appendChild(t)})),n}function Ln(t,e){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];if(function(t){return["svg","rect","circle","ellipse","line","polyline","polygon","path","clipPath","defs","g"].includes(t)}(t))return bn.apply(void 0,R([t,e],o,!1));var n="fragment"===t,r=n?document.createDocumentFragment():document.createElement(t);return!n&&e&&Object.entries(e).forEach((function(t){var e=t[0],o=t[1];Tn(r,e,o)})),function t(e){e.forEach((function(e){if(e)if(Array.isArray(e))t(e);else if("string"!=typeof e)r.appendChild(e);else{var o=document.createTextNode(e);r.appendChild(o)}}))}(o),r}function Pn(t,e){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];if("string"==typeof t)return Ln.apply(void 0,R([t,e||{}],o,!1));if("function"==typeof t){var n=new t(e||{},o);n.create();var r=null==e?void 0:e.ref;return"function"==typeof r&&r(n),n.$el}}function Nn(t,e){void 0===e&&(e=un.AD_DETAIL);var o=t.dataset.acttype;return o||(t.parentElement?Nn(t.parentElement):e)}function Dn(t){var e=t.dataset.eid;return e||(t.parentElement?Dn(t.parentElement):"whole_ad")}function On(t,e,o){e!==o&&(e?te(t,"txp_none"):Jt(t,"txp_none"))}function wn(t){var e=t.width,o=t.height;return e<480||o<270?mn.SIZE_480_270:e<590||o<328?mn.SIZE_590_328:e<1110||o<624?mn.SIZE_1110_624:e<1920||o<1080?mn.SIZE_1920_1080:mn.DEFAULT}!function(t){t.SIZE_480_270="size_480_270",t.SIZE_590_328="size_590_328",t.SIZE_1110_624="size_1110_624",t.SIZE_1920_1080="size_1920_1080",t.DEFAULT="default"}(mn||(mn={}));fn("div[data-role=creative-player-continued-post-layer]{height:100%;pointer-events:none;position:absolute;width:100%;z-index:3}div[data-role=creative-player-continued-post-layer] .txp_scan_card{background:rgba(0,0,0,.7);border-radius:8px;bottom:64px;height:206px;pointer-events:auto;position:absolute;right:10px;width:162px}div[data-role=creative-player-continued-post-layer] .txp_scan_card_title{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:#000;border-radius:8px 8px 0 0;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;height:40px;padding:10px}div[data-role=creative-player-continued-post-layer] .txp_scan_card_title>img{border-radius:3px;height:20px;width:20px}div[data-role=creative-player-continued-post-layer] .txp_scan_card_title>div{color:#fff;font-size:14px;margin-left:6px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}div[data-role=creative-player-continued-post-layer] .txp_scan_card_qrcode_container{text-align:center}div[data-role=creative-player-continued-post-layer] .txp_scan_card_qrcode{margin-top:12px;width:100%}div[data-role=creative-player-continued-post-layer] .txp_scan_card_qrcode,div[data-role=creative-player-continued-post-layer] .txp_scan_card_qrcode>div{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;border-radius:4px;display:-webkit-box;display:-ms-flexbox;display:flex;height:110px;justify-content:center}div[data-role=creative-player-continued-post-layer] .txp_scan_card_qrcode>div{background:#fff;width:110px}div[data-role=creative-player-continued-post-layer] .txp_scan_card_qrcode_text{color:#fff;font-size:12px;margin-top:10px;opacity:.5;white-space:nowrap}div[data-role=creative-player-continued-post-layer] .txp_scan_card.txp_scan_card_left{left:10px;right:unset}div[data-role=creative-player-continued-post-layer] .txp_scan_card.txp_scan_card_left .txp_scan_card_flag{left:0;right:unset}div[data-role=creative-player-continued-post-layer] .txp_scan_card_flag{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background:rgba(0,0,0,.7);border-radius:4px;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;height:18px;justify-content:center;pointer-events:auto;position:absolute;right:0;top:-25px;width:46px}div[data-role=creative-player-continued-post-layer] .txp_scan_card_flag>span{color:#8b8b8b;font-size:12px;margin-right:4px}div[data-role=creative-player-continued-post-layer] .txp_scan_card_flag>img{height:8px;opacity:.7;width:8px}div[data-role=creative-player-continued-post-layer] .txp_scan_card.txp_autohide{bottom:10px}.simple-white-theme txpdiv[data-role=creative-player-continued-post-layer] .txp_scan_card{bottom:100px}.simple-white-theme txpdiv[data-role=creative-player-continued-post-layer] .txp_scan_card.txp_autohide{bottom:10px}");var Sn,Rn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs={container:e.createRef(),icon:e.createRef(),name:e.createRef(),code:e.createRef(),text:e.createRef()},e.onClick=function(t){var o;t.stopPropagation();var i=t.target,n=Nn(i),r=Dn(i);null===(o=e.props)||void 0===o||o.onClick(n,r)},e.onCloseClick=function(t){var o;t.stopPropagation(),null===(o=e.props)||void 0===o||o.onCloseClick()},e}return i(e,t),e.prototype.renderQrCode=function(t){var e,o;this.$refs.code.value.innerHTML="",this.$refs.code.value&&t&&(null===(o=null===(e=this.props)||void 0===e?void 0:e.renderQrCode)||void 0===o||o.call(e,this.$refs.code.value,t,100))},e.prototype.setContainerBottom=function(t){this.$refs.container&&Xt(this.$refs.container.value,"bottom",t)},e.prototype.render=function(){var t,e,o,i;return Pn("div",{ref:this.$refs.container,class:"txp_scan_card ".concat(this.getLocationClass()," ").concat((null===(t=this.props)||void 0===t?void 0:t.visible)?"":"txp_none"),onClick:this.onClick,"data-eid":"poster_rlt","data-acttype":un.AD_DETAIL},Pn("div",{class:"txp_scan_card_title"},Pn("img",{ref:this.$refs.icon,alt:"",src:(null===(e=this.props)||void 0===e?void 0:e.iconUrl)||"","data-eid":"ad_head","data-acttype":un.ADVERTISER_LOGO}),Pn("div",{ref:this.$refs.name,"data-eid":"ad_name","data-acttype":un.ADVERTISER_NAME},null===(o=this.props)||void 0===o?void 0:o.name)),Pn("div",{class:"txp_scan_card_qrcode_container"},Pn("div",{class:"txp_scan_card_qrcode"},Pn("div",{ref:this.$refs.code,"data-eid":"poster","data-acttype":un.AD_VIEW_AREA})),Pn("div",{class:"txp_scan_card_qrcode_text",ref:this.$refs.text,"data-eid":"ad_title"},null===(i=this.props)||void 0===i?void 0:i.qrcodeTip)),Pn("div",{class:"txp_scan_card_flag",onClick:this.onCloseClick},Pn("span",null,"广告"),Pn("img",{class:"close_icon",src:_n,alt:""})))},e.prototype.getUpdate=function(){var t=this;return{visible:function(e,o){e!==o&&(e?te(t.$refs.container.value,"txp_none"):Jt(t.$refs.container.value,"txp_none"))},name:function(e,o){e!==o&&(t.$refs.name.value.innerText=e||"")},iconUrl:function(e,o){e!==o&&(t.$refs.icon.value.src=e)},qrcodeTip:function(e,o){e!==o&&(t.$refs.text.value.innerText=e||"")},ctrlBarVisible:function(e,o){e!==o&&(e?te(t.$refs.container.value,"txp_autohide"):Jt(t.$refs.container.value,"txp_autohide"))},location:function(e,o){e!==o&&(e===C.LEFT_BOTTOM?Jt(t.$refs.container.value,"txp_scan_card_left"):te(t.$refs.container.value,"txp_scan_card_left"))}}},e.prototype.getLocationClass=function(){var t;return(null===(t=this.props)||void 0===t?void 0:t.location)===C.LEFT_BOTTOM?"txp_scan_card_left":""},e}(xn),Mn={layer:yn("continued-post")("layer")};!function(t){t.CLOSE_CLICK="CLOSE_CLICK",t.CLICK="CLICK"}(Sn||(Sn={}));var Vn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleMap=Mn,e.handleCtrlBarShow=function(){var t;null===(t=e.scanCard)||void 0===t||t.setState({ctrlBarVisible:!0})},e.handleCtrlBarHide=function(){var t;null===(t=e.scanCard)||void 0===t||t.setState({ctrlBarVisible:!1})},e}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.bindOwnEvent()},e.prototype.destroy=function(){this.unbindOwnEvent(),t.prototype.destroy.call(this)},e.prototype.show=function(){var t;null===(t=this.scanCard)||void 0===t||t.setState({visible:!0})},e.prototype.hide=function(){var t;null===(t=this.scanCard)||void 0===t||t.setState({visible:!1})},e.prototype.setLocation=function(t){var e;void 0===t&&(t=C.RIGHT_BOTTOM),null===(e=this.scanCard)||void 0===e||e.setState({location:t})},e.prototype.updateUI=function(t){var e,o;null===(e=this.scanCard)||void 0===e||e.setState({name:t.name,iconUrl:t.iconUrl,qrcodeTip:t.qrcodeTip||"微信扫码了解详情",ctrlBarVisible:this.adCore.outerEvent.ctrlBarVisible}),t.qrcodeUrl&&(null===(o=this.scanCard)||void 0===o||o.renderQrCode(t.qrcodeUrl))},e.prototype.setContainerBottom=function(t){var e;t&&(null===(e=this.scanCard)||void 0===e||e.setContainerBottom(t))},e.prototype.appendDom=function(t){var e=this;this.scanCard=new Rn({renderQrCode:function(t,o,i){return e.adCore.config.renderQrCode(t,o,i)},visible:!1,onCloseClick:function(){e.emit(Sn.CLOSE_CLICK)},onClick:function(t,o){e.emit(Sn.CLICK,{actType:t,eid:o})}}),this.scanCard.mount(t)},e.prototype.getTemplate=function(){return""},e.prototype.bindOwnEvent=function(){this.adCore.outerEvent.on(ki.CTRL_SHOW,this.handleCtrlBarShow),this.adCore.outerEvent.on(ki.CTRL_HIDE,this.handleCtrlBarHide)},e.prototype.unbindOwnEvent=function(){this.adCore.outerEvent.off(ki.CTRL_SHOW,this.handleCtrlBarShow),this.adCore.outerEvent.off(ki.CTRL_HIDE,this.handleCtrlBarHide)},e}(In);function kn(t,e){var o=t.order.getExtraData(p.CONTINUED_POST);return e===p.PRE?null==o?void 0:o.pre:e===p.MID?null==o?void 0:o.mid:void 0}var Un=function(t){function e(e){var o=t.call(this,e)||this;return o.handleClose=function(){var t;o.stop(),pe(M.FEEDBACK,null===(t=o.adInfo)||void 0===t?void 0:t.frequencyControlConfig)},o.handleClick=function(t){var e=t.actType,i=t.eid;if(o.data.isShow){var n=o.adInfo;o.doClickAction(n,D({eid:i,actionType:un.CONTINUED_POST,ad_act_type:e,order_type:n.orderType},o.getVrReportData()))}},o.getVrReportData=function(){return{ad_type:"ad_continue_paste",mod_id:"ad_bottom_float",ad_ref_equip:"PC",ad_jump_type:o.continuedPost.landing_page_type===I.DIRECTLY?"2":"1",fromscene:o.fromAd===p.MID?"2":"1"}},o.logger=o.adCore.logger.createLogger("ContinuedPostAd"),o.continuedPostUI=new Vn({adCore:o.adCore,container:o.config.createLayer(o.adType)}),o.continuedPostUI.init(),o}return i(e,t),Object.defineProperty(e.prototype,"fromAd",{get:function(){var t;return(null===(t=this.order.config)||void 0===t?void 0:t.fromAd)||p.PRE},enumerable:!1,configurable:!0}),e.prototype.load=function(){var e,o=this;if(t.prototype.load.call(this),!this.fromAd)return this.logger.log("广告初始化参数错误: config: ".concat(st(this.config))),void this.stop();this.continuedPost=kn(this.adCore,this.fromAd),(null===(e=this.continuedPost)||void 0===e?void 0:e.enable)?(this.continuedPostUI.setLocation(this.continuedPost.location),this.countdown=new hn({timeout:500,onChange:function(t){var e=1e3*t;if(e>o.continuedPost.display_time)o.stop();else{var i=Math.floor(e/o.continuedPost.rotate_speed)%o.order.orders.length;i!==o.curIdx&&o.updateUI(i)}}},this.logger),this.updateUI(0),this.bindEvent(),this.canplayHandler()):this.stop()},e.prototype.play=function(e){var o,i;t.prototype.play.call(this),(null===(o=this.continuedPost)||void 0===o?void 0:o.enable)&&(e?(this.show(),null===(i=this.countdown)||void 0===i||i.start()):this.pause())},e.prototype.show=function(){t.prototype.show.call(this),this.continuedPostUI.show(),this.data.hasReportView||(this.data.hasReportView=!0,this.adCore.vr.reportExposure(this.adInfo,0===this.curIdx,D({eid:"whole_ad"},this.getVrReportData())))},e.prototype.hide=function(){t.prototype.hide.call(this),this.continuedPostUI.hide()},e.prototype.pause=function(){var e;this.state===Zi.PLAYING&&(t.prototype.pause.call(this),this.hide(),null===(e=this.countdown)||void 0===e||e.pause())},e.prototype.resume=function(){var e;this.state===Zi.PAUSED&&(t.prototype.resume.call(this),this.show(),null===(e=this.countdown)||void 0===e||e.start())},e.prototype.stop=function(){this.state!==Zi.END&&(this.hide(),t.prototype.stop.call(this),this.destroy())},e.prototype.destroy=function(){var e;null===(e=this.countdown)||void 0===e||e.clear(),this.unbindEvent(),this.continuedPostUI.destroy(),t.prototype.destroy.call(this)},e.prototype.resize=function(t){t.width&&t.width<600?this.pause():this.canShow()&&this.resume()},e.prototype.setAdSmallWindow=function(t){t.isSmallWindow?this.pause():this.canShow()&&this.resume()},e.prototype.adjustUI=function(t){if(this.logger.log("调用 adjustUI: ".concat(st(t))),null==t?void 0:t.bottom){var e="".concat(t.bottom||10,"px");this.continuedPostUI.setContainerBottom(e)}},e.prototype.updateUI=function(t){var e,o,i,n;this.logger.log("updateUI: ".concat(t));var r=this.order.orders[t];if(r){this.curIdx=t,this.adInfo=r;var a=null===(e=r.data.order.ad_action.scan)||void 0===e?void 0:e.short_link;if(a&&(a=Pe(a,{act:"1043"})),1!==this.order.orders.length){var s=(null===(i=this.continuedPost)||void 0===i?void 0:i.landing_page_type)===I.INTEGRATE?this.continuedPost.qrcode:a;this.continuedPostUI.updateUI({name:r.data.poster.advertiser.name,iconUrl:r.data.poster.advertiser.icon_url,qrcodeTip:null===(n=r.data.order.ad_action.scan)||void 0===n?void 0:n.qrcode_tips,qrcodeUrl:s})}else this.continuedPostUI.updateUI({name:r.data.poster.advertiser.name,iconUrl:r.data.poster.advertiser.icon_url,qrcodeTip:null===(o=r.data.order.ad_action.scan)||void 0===o?void 0:o.qrcode_tips,qrcodeUrl:a})}},e.prototype.bindEvent=function(){this.continuedPostUI.on(Sn.CLOSE_CLICK,this.handleClose),this.continuedPostUI.on(Sn.CLICK,this.handleClick)},e.prototype.unbindEvent=function(){this.continuedPostUI.off(Sn.CLOSE_CLICK,this.handleClose),this.continuedPostUI.off(Sn.CLICK,this.handleClick)},e.prototype.canShow=function(){var t=!0;return this.adCore.ctrl.forEachAd((function(e){(e.adType===p.CORNER&&e.adInfo.isWholeScene||[p.CORNER,p.MID,p.PAUSE,p.HLS_MID].includes(e.adType)&&e.data.isShow)&&(t=!1)})),t},e}(nn),Bn=function(t){return function(e,o){return new Un({adCore:e,order:o,config:t})}};var Hn,zn,Kn=function(t,e){return e.ad_scene===s.PRE?function(t,e){var o,i={};return null===(o=e.ads)||void 0===o||o.forEach((function(t){t.ad_type===p.CONTINUED_POST&&t.continued_ad&&(i.extraData=[{adType:p.CONTINUED_POST,data:{pre:D({},t.continued_ad)}}])})),i}(0,e):e.ad_scene===s.ANCHOR?function(t,e){var o,i={};return null===(o=e.anchor_ads)||void 0===o||o.forEach((function(t){t.ad_type===p.CONTINUED_POST&&t.continued_ad&&(i.extraData=[{adType:p.CONTINUED_POST,data:{mid:D({},t.continued_ad)}}])})),i}(0,e):e.ad_scene===s.DYNAMIC_MID?function(t,e){var o,i={};return null===(o=e.ads)||void 0===o||o.forEach((function(t){t.ad_type===p.CONTINUED_POST&&t.continued_ad&&(i.extraData=[{adType:p.CONTINUED_POST,data:{mid:D({},t.continued_ad)}}])})),i}(0,e):void 0},$n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canShow=!0,e.handleAdShow=function(t){var o=t.adType;[p.PRE,p.MID].includes(o)&&(e.canShow=!0,e.loadContinueAd(o)),o===p.CORNER&&t.adInfo.isWholeScene||[p.CORNER,p.MID,p.PAUSE,p.HLS_MID].includes(o)&&(e.canShow=!1,e.adCore.api.pauseAd(p.CONTINUED_POST))},e.handleAdHide=function(t){var o=t.adType;o===p.CORNER&&t.adInfo.isWholeScene||[p.CORNER,p.MID,p.PAUSE,p.HLS_MID].includes(o)&&(e.canShow=!0,e.adCore.api.resumeAd(p.CONTINUED_POST))},e.handleVideoPlaying=function(){var t=e.adCore.ctrl.getRunningAds(p.CONTINUED_POST)[0];t&&[Zi.LOAD_READY,Zi.PAUSED].includes(t.state)&&t.play(e.canShow)},e.handleVideoPause=function(){e.adCore.api.pauseAd(p.CONTINUED_POST)},e}return i(e,t),e.prototype.startWatch=function(){this.adCore.event.on(Ge.AD_SHOW,this.handleAdShow),this.adCore.event.on(Ge.AD_HIDE,this.handleAdHide),this.adCore.outerEvent.on(ki.VIDEO_PLAYING,this.handleVideoPlaying),this.adCore.outerEvent.on(ki.VIDEO_PAUSE,this.handleVideoPause)},e.prototype.endWatch=function(){this.adCore.event.off(Ge.AD_SHOW,this.handleAdShow),this.adCore.event.off(Ge.AD_HIDE,this.handleAdHide),this.adCore.outerEvent.off(ki.VIDEO_PLAYING,this.handleVideoPlaying),this.adCore.outerEvent.off(ki.VIDEO_PAUSE,this.handleVideoPause)},e.prototype.loadContinueAd=function(t){var e=kn(this.adCore,t);if(this.logger.log("continuePost: ".concat(st(e))),null==e?void 0:e.enable){var o=this.adCore.order.getAdOrder(t),i=(null==o?void 0:o.orders.filter((function(t){return t.isScanActive})))||[];if(this.logger.log("scanOrder: ".concat(i.length)),i.length){var n={adType:p.CONTINUED_POST,auth:null==o?void 0:o.auth,empty:[],orders:i,config:{fromAd:t}};this.adCore.ctrl.loadAdOrder(n)}}},e}(dn),Gn=function(t){return{adType:p.CONTINUED_POST,isPointAd:!1,isMultiple:!1,getOrderData:Kn,creator:Bn(t),watcher:function(t){return new $n(t)}}},Yn=function(){function t(t,e){this.options=t,this.logger=e}return Object.defineProperty(t.prototype,"materialUrl",{get:function(){return this.loadedUrl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadTime",{get:function(){return this.loadEndTime&&this.loadStartTime?this.loadEndTime-this.loadStartTime:-1},enumerable:!1,configurable:!0}),t.prototype.load=function(t){var e=this;if(this.loadedUrl)return Promise.resolve(this.loadedUrl);this.loadStartTime=Date.now();var o=this.options.url,i=new XMLHttpRequest,n=o.replace("http://","https://");return i.open("GET",n,!0),i.responseType="arraybuffer",i.timeout=6e4,i.send(),new Promise((function(o,n){i.onload=function(){if(e.logger.log("请求素材文件成功"),200===i.status){e.logger.log("回包正确");var r=new Uint8Array(i.response),a=window.URL.createObjectURL(new Blob([r],t));e.logger.log("生成blob成功"),e.loadedUrl=a,e.loadEndTime=Date.now(),o(a)}else n()},i.onerror=function(t){e.logger.error("请求素材文件失败: ".concat(st(t))),e.loadEndTime=Date.now(),n("error")},i.ontimeout=function(){e.logger.error("请求素材文件超时"),e.loadEndTime=Date.now(),n("timeout")}}))},t}(),Wn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.load=function(){return t.prototype.load.call(this,{type:"video/mp4"})},e.prototype.destroy=function(){this.loadedUrl&&(this.loadedUrl=void 0)},e}(Yn),Fn=function(){function t(t,e){void 0===e&&(e=20);var o=this;this.state={isRunning:!1,runningTime:0,startTime:0},this.requestAnimationFrameId=null,this.timeupdate=function(){if(o.state.isRunning){var t=Date.now(),e=o.state.startTime,i=t-o.state.startTime;i>o.interval&&(o.state.startTime=t-i%o.interval,o.state.runningTime=Math.floor(o.state.runningTime+(o.state.startTime-e)),o.callback(o.state.runningTime)),o.requestAnimationFrameId=window.requestAnimationFrame(o.timeupdate)}},this.fps=e,this.interval=1e3/e,this.callback=t}return Object.defineProperty(t.prototype,"isRunning",{get:function(){return this.state.isRunning},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.state.runningTime},enumerable:!1,configurable:!0}),t.prototype.seek=function(t){this.state.runningTime=t},t.prototype.start=function(){this.state.isRunning||(this.state.isRunning=!0,this.state.startTime=Date.now(),this.callback(this.state.runningTime),this.timeupdate())},t.prototype.pause=function(){this.state.isRunning&&(this.state.isRunning=!1,this.requestAnimationFrameId&&window.cancelAnimationFrame(this.requestAnimationFrameId),this.state.startTime=0)},t.prototype.stop=function(){this.pause(),this.state.runningTime=0},t}();!function(t){t.CACHE="cache",t.VIDEO="video"}(Hn||(Hn={})),function(t){t.CANPLAY="tp-canplay",t.LOADED="tp-loaded",t.PLAY="tp-play",t.PAUSE="tp-pause",t.ENDED="tp-ended",t.ERROR="tp-error",t.TIMEUPDATE="tp-timeupdate"}(zn||(zn={}));var qn={autoplay:!0,loop:!1,useCache:!1,fps:20,width:0,height:0},jn=function(){function t(t){var e=this;this.eventEmitter=new de,this.replayTimer=null,this.videoSize={width:0,height:0},this.displayOffset={scale:1,width:0,height:0},this.unbindVideoEvent=function(){e.$domNodes.video&&(e.$domNodes.video.removeEventListener("canplaythrough",e.handleVideoCanplay),e.$domNodes.video.removeEventListener("playing",e.handleVideoPlaying),e.$domNodes.video.removeEventListener("play",e.handleVideoPlay),e.$domNodes.video.removeEventListener("pause",e.handleVideoPause),e.$domNodes.video.removeEventListener("ended",e.handleVideoEnded),e.$domNodes.video.removeEventListener("error",e.handleVideoError),e.$domNodes.video.removeEventListener("progress",e.handleVideoProgress))},this.bindCacheVideoEvent=function(){e.$domNodes.cacheVideo&&e.$domNodes.cacheVideo.addEventListener("canplaythrough",e.handleCacheVideoCanplay)},this.unbindCacheVideoEvent=function(){e.$domNodes.cacheVideo&&e.$domNodes.cacheVideo.removeEventListener("canplaythrough",e.handleCacheVideoCanplay)},this.handleVideoCanplay=function(){e.emit(zn.CANPLAY,{playType:Hn.VIDEO,currentTime:e.fpsTimer.currentTime})},this.handleVideoPlay=function(){e.emit(zn.PLAY,{playType:Hn.VIDEO,currentTime:e.fpsTimer.currentTime})},this.handleVideoPlaying=function(){var t=e.$domNodes.video;t&&(e.updateBufferVideoUI(t),e.fpsTimer.start())},this.handleVideoPause=function(){e.$domNodes.video&&(e.fpsTimer.pause(),e.emit(zn.PAUSE,{playType:Hn.VIDEO,currentTime:Math.floor(1e3*e.$domNodes.video.currentTime)}))},this.handleVideoEnded=function(){if(e.$domNodes.video){var t=e.$domNodes.video.currentTime;e.$domNodes.video.currentTime=0,e.doEnded(t)}},this.handleVideoError=function(t){e.emit(zn.ERROR,{playType:Hn.VIDEO,currentTime:0,msg:t.message}),e.destroy()},this.handleVideoProgress=function(t){if(!e.isVideoLoaded){for(var o=t.target,i=o.duration,n=o.buffered,r=0,a=0;r<n.length;)a+=n.end(r)-n.start(r),r+=1;a/i>.99&&(e.isVideoLoaded=!0,e.emit(zn.LOADED,{playType:Hn.VIDEO,currentTime:1e3*o.currentTime}))}},this.handleCacheEnded=function(){e.cacheData&&(e.cacheData.isCached=!0,e.destroyCacheVideo())},this.handleCacheVideoCanplay=function(){var t=e.$domNodes.cacheVideo;if(t&&e.cacheData&&e.bufferContext){e.updateBufferVideoUI(t);var o=e.cacheData.currentIndex;e.cacheData.currentIndex+=1;var i=e.getFrameImageData(t,e.bufferContext);e.cacheData.imageDataList[o]=i;var n=1e3*t.duration;e.cacheData.currentTime+=e.cacheData.fpsInterval,e.cacheData.currentTime=Math.min(e.cacheData.currentTime,n),e.cacheData.currentTime>=n?e.handleCacheEnded():t.currentTime=e.cacheData.currentTime/1e3}},this.handleTimeUpdate=function(t){var o;if(e.fpsTimer.isRunning)if(null===(o=e.cacheData)||void 0===o?void 0:o.isRunning){var i=e.getCacheDataIndex(t);if(i>e.cacheData.imageDataList.length)return void e.doEnded(t/1e3);var n=e.cacheData.imageDataList[i];e.drawDisplayFrame(n),e.emit(zn.TIMEUPDATE,{playType:Hn.CACHE,currentTime:t})}else{var r=e.$domNodes.video;if(!r||!e.bufferContext)return;n=e.getFrameImageData(r,e.bufferContext);e.drawDisplayFrame(n),e.emit(zn.TIMEUPDATE,{playType:Hn.VIDEO,currentTime:1e3*r.currentTime})}},this.options=D(D({},qn),t),this.$domNodes=this.createUI(),this.bufferContext=this.$domNodes.bufferCanvas.getContext("2d"),this.displayContext=this.$domNodes.displayCanvas.getContext("2d"),this.fpsTimer=new Fn(this.handleTimeUpdate,this.options.fps),this.bindVideoEvent(),this.options.useCache&&this.runCache()}return Object.defineProperty(t.prototype,"logger",{get:function(){return this.options.logger},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playtime",{get:function(){var t;if(null===(t=this.cacheData)||void 0===t?void 0:t.isRunning)return this.fpsTimer.currentTime;var e=this.$domNodes.video;return e?1e3*e.currentTime:-1},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e){this.eventEmitter.on(t,e)},t.prototype.off=function(t,e){this.eventEmitter.off(t,e)},t.prototype.play=function(){this.fpsTimer.isRunning||this.startPlay()},t.prototype.pause=function(){var t,e;this.fpsTimer.isRunning&&((null===(t=this.cacheData)||void 0===t?void 0:t.isRunning)?this.fpsTimer.pause():null===(e=this.$domNodes.video)||void 0===e||e.pause())},t.prototype.seek=function(t){this.fpsTimer.seek(1e3*t),this.$domNodes.video&&(this.$domNodes.video.currentTime=t)},t.prototype.stop=function(){var t;this.fpsTimer.stop(),!(null===(t=this.cacheData)||void 0===t?void 0:t.isRunning)&&this.$domNodes.video&&(this.$domNodes.video.currentTime=0,this.$domNodes.video.pause()),this.displayContext.clearRect(0,0,this.videoSize.width/2,this.videoSize.height)},t.prototype.resize=function(t,e){this.options.width=t,this.options.height=e;var o=this.displayContext.getImageData(this.displayOffset.width,this.displayOffset.height,Math.floor(this.videoSize.width/2),this.videoSize.height);this.updateDisplayUI(),this.drawDisplayFrame(o)},t.prototype.destroy=function(){this.stop(),this.replayTimer&&clearTimeout(this.replayTimer),this.destroyVideo(),this.destroyCacheVideo(),this.destroyBufferCanvas()},t.prototype.createVideo=function(t){var e=document.createElement("video");return e.autoplay=t,e.controls=!1,e.crossOrigin="*",e.playsInline=!0,e.style.cssText=jt({position:"absolute",backgroundColor:"rgb(255, 255, 255)",zIndex:"-1",visibility:"hidden"}),e.muted=!0,e.src=this.options.url,e},t.prototype.createUI=function(){var t=document.createDocumentFragment(),e=this.createVideo(!!this.options.autoplay);t.appendChild(e);var o=document.createElement("canvas"),i=document.createElement("canvas");t.appendChild(i);var n,r=this.options.container;return(n="string"==typeof r?document.querySelector(r):r).style.overflow="hidden",n.appendChild(t),{container:n,video:e,bufferCanvas:o,displayCanvas:i}},t.prototype.destroyVideo=function(){var t,e=this.$domNodes.video;e&&(this.unbindVideoEvent(),e.removeAttribute("src"),null===(t=e.parentNode)||void 0===t||t.removeChild(e),this.$domNodes.video=void 0,this.destroyBufferCanvas())},t.prototype.destroyCacheVideo=function(){var t,e=this.$domNodes.cacheVideo;e&&(this.unbindCacheVideoEvent(),e.removeAttribute("src"),null===(t=e.parentNode)||void 0===t||t.removeChild(e),this.$domNodes.cacheVideo=void 0,this.destroyBufferCanvas())},t.prototype.destroyBufferCanvas=function(){this.$domNodes.video||this.$domNodes.cacheVideo||(this.$domNodes.bufferCanvas=void 0,this.bufferContext=void 0)},t.prototype.updateBufferVideoUI=function(t){if(!this.videoSize.width){this.videoSize={width:Math.floor(t.videoWidth),height:Math.floor(t.videoHeight)};var e=this.$domNodes.bufferCanvas;e&&(e.width=this.videoSize.width,e.height=this.videoSize.height),this.updateDisplayUI()}},t.prototype.updateDisplayUI=function(){var t={width:Math.floor(this.videoSize.width/2),height:this.videoSize.height},e=t.width/t.height,o=this.options.width||this.options.height*e||t.width,i=o/Math.floor(this.options.height||this.options.width/e||t.height),n={width:t.width,height:t.height};e>i?n.height=Math.floor(n.width/i):n.width=n.height*i;var r=this.$domNodes.displayCanvas;r.setAttribute("width","".concat(n.width)),r.setAttribute("height","".concat(n.height));var a={position:"absolute",left:0,bottom:0,width:"".concat(n.width,"px"),height:"".concat(n.height,"px"),display:"block","transform-origin":"0 100%"};r.style.cssText=jt(a),this.displayOffset={scale:o/n.width,width:Math.floor((n.width-t.width)/2),height:Math.floor((n.height-t.height)/2)}},t.prototype.bindVideoEvent=function(){this.$domNodes.video&&(this.$domNodes.video.addEventListener("canplaythrough",this.handleVideoCanplay),this.$domNodes.video.addEventListener("playing",this.handleVideoPlaying),this.$domNodes.video.addEventListener("play",this.handleVideoPlay),this.$domNodes.video.addEventListener("pause",this.handleVideoPause),this.$domNodes.video.addEventListener("ended",this.handleVideoEnded),this.$domNodes.video.addEventListener("error",this.handleVideoError),this.$domNodes.video.addEventListener("progress",this.handleVideoProgress))},t.prototype.startPlay=function(){var t,e;if(null===(t=this.cacheData)||void 0===t?void 0:t.isCached)return this.cacheData.isRunning=!0,this.emit(zn.PLAY,{playType:Hn.CACHE,currentTime:this.fpsTimer.currentTime}),this.fpsTimer.start(),void this.destroyVideo();null===(e=this.$domNodes.video)||void 0===e||e.play()},t.prototype.doEnded=function(t){var e;this.fpsTimer.stop(),this.options.loop?this.replay():this.stop(),this.emit(zn.ENDED,{playType:(null===(e=this.cacheData)||void 0===e?void 0:e.isRunning)?Hn.CACHE:Hn.VIDEO,currentTime:t})},t.prototype.replay=function(){var t=this;this.options.loopInterval?(this.stop(),this.replayTimer=window.setTimeout((function(){t.startPlay(),t.replayTimer=null}),Number(this.options.loopInterval))):this.startPlay()},t.prototype.drawDisplayFrame=function(t){t&&this.displayContext.putImageData(t,this.displayOffset.width,this.displayOffset.height),this.$domNodes.displayCanvas.style.transform="scale(".concat(this.displayOffset.scale,")")},t.prototype.emit=function(t,e){this.eventEmitter.emit(t,e)},t.prototype.getFrameImageData=function(t,e){var o;try{var i=this.videoSize,n=i.width,r=i.height;e.drawImage(t,0,0,n,r);for(var a=e.getImageData(n/2,0,n/2,r),s=e.getImageData(0,0,n/2,r),d=s.data.length/4,l=0;l<d;l++)s.data[4*l+3]=a.data[4*l+1];return s}catch(e){this.emit(zn.ERROR,{playType:(null===(o=this.cacheData)||void 0===o?void 0:o.isRunning)?Hn.CACHE:Hn.VIDEO,currentTime:t.currentTime,msg:String(e)||"合成透明帧失败"})}},t.prototype.runCache=function(){if(this.cacheData={currentTime:0,fpsInterval:Math.floor(1e3/this.options.fps),imageDataList:[],isCached:!1,isRunning:!1,currentIndex:0},!this.$domNodes.cacheVideo){var t=this.createVideo(!1);this.$domNodes.container.appendChild(t),this.$domNodes.cacheVideo=t,t.currentTime=.001,this.bindCacheVideoEvent()}},t.prototype.getCacheDataIndex=function(t){return this.cacheData?Math.floor(t/this.cacheData.fpsInterval):0},t}(),Qn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.firstStartTime=-1,e}return i(e,t),e}(on);fn(".close-icon-circle{stroke-dasharray:114,114;stroke-dashoffset:114}.mod_player_float ._txp_ad_psj{display:none}.flow-close{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.flow-close,.flow-close-icon-area{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;height:48px}.flow-close-icon-area{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:48px}.flow-close-icon-area svg{height:36px;width:36px}.flow-flag-text{color:#fff;font-size:20px;font-weight:500;text-shadow:0 2px 4px rgba(0,0,0,.5)}.flow-flag-text-area{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;height:48px;justify-content:center;width:52px}");var Zn=yn("corner"),Xn={layer:Zn("layer"),container:Zn("container")},Jn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleMap=Xn,e.cornerMap=new Map,e}return i(e,t),e.prototype.setContainerVisible=function(t){this.setDomVisible(this.$domNodes.container,t)},e.prototype.destroyCorner=function(t){var e=this.cornerMap.get(t);this.$domNodes.container&&e&&(this.$domNodes.container.removeChild(e.container),this.cornerMap.delete(t))},e.prototype.renderCorner=function(t){var e=this;if(this.$domNodes.container&&!this.cornerMap.has(t)){var o={container:t,close:"".concat(t,"-close"),closeArea:"".concat(t,"-close-area"),player:"".concat(t,"-player"),closeRate:"".concat(t,"-close-rate"),hotArea:"".concat(t,"-hot-area"),hotFlag:"".concat(t,"-hot-flag")},i='\n      <div data-role="'.concat(o.container,'" style="position: absolute;" class="txp_none">\n        <div data-role="').concat(o.hotArea,'" class="yaliu-hot-area txp_none" style="position:absolute;pointer-events:auto;cursor:pointer;z-index:2;display: block;" ></div>\n        <div data-role="').concat(o.close,'" class="flow-close " style="position:absolute;z-index:2;" title="关闭该广告">\n          <div class="flow-flag-text-area" data-role="').concat(o.hotFlag,'">\n            <span class="flow-flag-text">广告</span>\n          </div>\n          <div data-role="').concat(o.closeArea,'" class="flow-close-icon-area txp_none" style="pointer-events:auto;cursor:pointer;">\n          <svg width="39" height="39" viewBox="0 0 39 39" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <circle cx="19.5" cy="19.6738" r="18" fill="#161622" fill-opacity="0.85" style="fill:#161622;fill-opacity:0.85;"/>\n            <rect x="11.4844" y="13.7676" width="2.98438" height="19.6875" rx="1.49219" transform="rotate(-45 11.4844 13.7676)" fill="white" style="fill:white;fill-opacity:1;"/>\n            <rect x="13.5938" y="27.6895" width="2.98438" height="19.6875" rx="1.49219" transform="rotate(-135 13.5938 27.6895)" fill="white" style="fill:white;fill-opacity:1;"/>\n            <circle data-role="').concat(o.closeRate,'" class="close-icon-circle" cx="19.5" cy="19.6738" r="18" stroke="white" style="stroke:white;stroke-opacity:1;" stroke-width="2" stroke-linecap="round" fill="none"/>\n          </svg>\n          </div>\n        </div>\n        <div data-role="').concat(o.player,'" />\n      </div>\n    '),n=document.createElement("div");n.innerHTML=i,this.$domNodes.container.appendChild(n.children[0]);var r={};Object.keys(o).forEach((function(t){r[t]=e.$domNodes.container.querySelector('[data-role="'.concat(o[t],'"]'))})),this.cornerMap.set(t,r)}},e.prototype.getCornerDomNodes=function(t){return this.cornerMap.get(t)},e.prototype.getTemplate=function(){return'\n      <txpdiv data-role="'.concat(this.roleMap.container,'" class="txp_ad _txp_ad_psj" style="position: absolute; z-index: 2;">\n      </txpdiv>\n    ')},e}(In),tr=function(t){function e(e){var o=t.call(this,e)||this;return o.handleCloseBtnClick=function(t){var e;o.logger.log("角标用户点击关闭"),t.stopPropagation(),o.data.closeBtnClicked=!0,o.stop(),pe(M.FEEDBACK,null===(e=o.adInfo)||void 0===e?void 0:e.frequencyControlConfig)},o.handleAdClick=function(){o.doClickAction(o.adInfo,{actionType:un.AD_VIEW_AREA,playTime:o.data.showTime?Date.now()-o.data.showTime:-1})},o.handleCloseRatePercentTimeupdate=function(t){if(!o.adInfo.isWholeScene){var e=o.cornerUI.getCornerDomNodes(o.cornerAdId);if(null==e?void 0:e.closeRate){var i=1e3*o.adInfo.material.duration,n=Math.min(t/i,1);e.closeRate.style.strokeDashoffset="".concat(114-114*n)}}},o.handleTransparentPlayerCanPlay=function(){o.canplayHandler()},o.handleTransparentPlayerPlay=function(){o.show(),o.data.hasReportView||(o.data.hasReportView=!0,o.doExposure(o.adInfo),o.adCore.vr.reportExposure(o.adInfo))},o.logger=o.adCore.logger.createLogger("CornerAd"),o.cornerUI=new Jn({adCore:o.adCore,container:o.config.createLayer(o.adType)}),o.cornerUI.init(),o.fpsTimer=new Fn(o.handleCloseRatePercentTimeupdate,20),o.init(),o}return i(e,t),Object.defineProperty(e.prototype,"cornerAdId",{get:function(){return"corner-ad-".concat(this.adInfo.orderId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this.cornerUI.container},enumerable:!1,configurable:!0}),e.prototype.load=function(){var e,o=this;if((null===(e=this.adInfo)||void 0===e?void 0:e.material)&&this.adInfo.point){var i=this.adInfo.material.url;i=this.adInfo.material.enable_crt_cached?Ve(this.adInfo.material.vid,i,this.adInfo.adType):i,this.videoMaterial=new Wn({url:i},this.logger);var n=this.cornerUI.getCornerDomNodes(this.cornerAdId);this.videoMaterial.load().then((function(e){var i,r,a,s;o.transparentPlayer=new jn({url:e,width:o.containerSize.width,height:o.containerSize.height,container:n.player,loop:!0,useCache:o.adInfo.isWholeScene,autoplay:!1,fps:20,loopInterval:o.adInfo.data.poster.play.interval||0}),o.bindTransparentPlayerEvent(),o.loadCompleteHandle({adType:o.adType,adInfo:o.adInfo,index:o.adInfo.orderIdx,loadingTime:null===(i=o.videoMaterial)||void 0===i?void 0:i.loadTime,materialUrl:null===(r=o.adInfo.material)||void 0===r?void 0:r.url,materialVid:null===(a=o.adInfo.material)||void 0===a?void 0:a.vid,materialDuration:null===(s=o.adInfo.material)||void 0===s?void 0:s.duration,materialType:m.VIDEO}),t.prototype.load.call(o)})).catch((function(t){var e,i,n,r;o.loadCompleteHandle({adType:o.adType,adInfo:o.adInfo,index:o.adInfo.orderIdx,hasError:"1",detailErrorCode:Wi.LOAD_FAIL,loadingTime:null===(e=o.videoMaterial)||void 0===e?void 0:e.loadTime,materialUrl:null===(i=o.adInfo.material)||void 0===i?void 0:i.url,materialVid:null===(n=o.adInfo.material)||void 0===n?void 0:n.vid,materialDuration:null===(r=o.adInfo.material)||void 0===r?void 0:r.duration,materialType:m.VIDEO}),o.stop()}))}else this.stop()},e.prototype.play=function(){var e,o,i=this,n=this.adCore.config.outerPlayerData.playtime;this.adInfo.reporter.setVideoPlaytime(1e3*n),this.data.firstStartTime<0&&this.transparentPlayerSeek(),this.fpsTimer.seek(Math.floor(1e3*n)-this.adInfo.point.begin),this.fpsTimer.start(),setTimeout((function(){i.fpsTimer.pause()}),0),this.state!==Zi.PLAYING&&this.state!==Zi.PAUSED&&(this.data.isForceHide||(t.prototype.play.call(this),(null===(e=this.adInfo)||void 0===e?void 0:e.point)?null===(o=this.transparentPlayer)||void 0===o||o.play():this.stop()))},e.prototype.pause=function(){var e;null===(e=this.transparentPlayer)||void 0===e||e.pause(),this.fpsTimer.pause(),t.prototype.pause.call(this)},e.prototype.resume=function(){var e;null===(e=this.transparentPlayer)||void 0===e||e.play(),t.prototype.resume.call(this)},e.prototype.show=function(e){var o,i=this;if(e&&(this.data.isForceHide=!0,this.transparentPlayerSeek(),null===(o=this.transparentPlayer)||void 0===o||o.play(),this.adInfo.isWholeScene&&setTimeout((function(){i.adCore.event.emit(Ge.AD_MOVE_IN,{adType:i.adType,adInfo:i.adInfo})}),200)),!this.data.isShow){var n=this.cornerUI.getCornerDomNodes(this.cornerAdId);n&&oe(n.container),this.setCloseVisible(!0),t.prototype.show.call(this),this.adCore.config.resetBarrageZindex()}},e.prototype.hide=function(e){var o;if(e&&(this.data.isForceHide=!0,null===(o=this.transparentPlayer)||void 0===o||o.stop(),this.adInfo.isWholeScene&&this.adCore.event.emit(Ge.AD_MOVE_OUT,{adType:this.adType,adInfo:this.adInfo})),this.data.isShow){var i=this.cornerUI.getCornerDomNodes(this.cornerAdId);i&&ee(i.container),this.setCloseVisible(!1),t.prototype.hide.call(this),this.adCore.config.resetBarrageZindex()}},e.prototype.stop=function(){var e,o,i,n,r;if(this.state!==Zi.END){this.logger.log("角标 stop");var a=this.data.closeBtnClicked&&!this.adInfo.isWholeScene&&null!==(o=null===(e=this.transparentPlayer)||void 0===e?void 0:e.playtime)&&void 0!==o?o:-1;this.hide(),null===(i=this.transparentPlayer)||void 0===i||i.stop(),t.prototype.stop.call(this),this.adCore.vr.reportEnded(this.order,{ad_playtime:this.data.showTime&&!this.adInfo.isWholeScene?Date.now()-this.data.showTime:-1,ad_duration:null===(n=this.adInfo.material)||void 0===n?void 0:n.duration,first_view:null!==(r=this.data.showTime)&&void 0!==r?r:-1,user_close:!!this.data.closeBtnClicked,close_time:a}),this.destroy()}},e.prototype.destroy=function(){var e,o;this.data.hasDestroy||(this.logger.log("角标销毁"),this.unbindEvent(),this.adCore.ctrl.getRunningAds(p.CORNER).length<=1&&this.cornerUI.setContainerVisible(!1),this.fpsTimer.stop(),this.cornerUI.destroyCorner(this.cornerAdId),null===(e=this.transparentPlayer)||void 0===e||e.destroy(),null===(o=this.videoMaterial)||void 0===o||o.destroy(),this.cornerUI.destroy(),t.prototype.destroy.call(this))},e.prototype.resize=function(t){var e;if(t&&(this.playerSize.width=t.width||t.oWidth||this.playerSize.width,this.playerSize.height=t.height||t.oHeight||this.playerSize.height,this.playerSize.left=t.left||0,this.playerSize.top=t.top||0,this.setFlowSize(),this.setCloseBtnSizeAndPosition(),null===(e=this.transparentPlayer)||void 0===e||e.resize(this.containerSize.width,this.containerSize.height)),!this.data.isForceHide){var o=this.cornerUI.getCornerDomNodes(this.cornerAdId);oe(null==o?void 0:o.container)}},e.prototype.hideAdBeforeResize=function(){var t=this.cornerUI.getCornerDomNodes(this.cornerAdId);t&&ee(t.container)},e.prototype.initData=function(){return new Qn},e.prototype.init=function(){this.setPlayerSize(),this.cornerUI.setContainerVisible(!0),this.cornerUI.renderCorner(this.cornerAdId),this.updateAdFlag(),this.setFlowSize(),this.setCloseBtnSizeAndPosition(),this.bindEvent()},e.prototype.bindEvent=function(){var t=this.cornerUI.getCornerDomNodes(this.cornerAdId);t&&(this.logger.log("角标绑定关闭事件:".concat(!!t.closeArea)),t.closeArea.addEventListener("click",this.handleCloseBtnClick),this.adInfo.data.poster.click_hot_area?t.hotArea.addEventListener("click",this.handleAdClick):t.container.addEventListener("click",this.handleAdClick))},e.prototype.unbindEvent=function(){var t,e;null===(t=this.transparentPlayer)||void 0===t||t.off(zn.CANPLAY,this.handleTransparentPlayerCanPlay),null===(e=this.transparentPlayer)||void 0===e||e.off(zn.PLAY,this.handleTransparentPlayerPlay);var o=this.cornerUI.getCornerDomNodes(this.cornerAdId);o&&(this.logger.log("角标解绑关闭事件:".concat(!!o.closeArea)),o.closeArea.removeEventListener("click",this.handleCloseBtnClick),this.adInfo.data.poster.click_hot_area?o.hotArea.removeEventListener("click",this.handleAdClick):o.container.removeEventListener("click",this.handleAdClick))},e.prototype.setFlowSize=function(){var t,e=this.cornerUI.getCornerDomNodes(this.cornerAdId);if(e){var o=this.playerSize,i=o.width,n=o.height,r=o.top,a=o.left,s=this.adInfo.data.poster.position,d=Math.ceil(i*Number(s.width)),l=Math.ceil(n*Number(s.height)),c=Number(s.width)/Number(s.height)*(i/n),p=this.adInfo.material.width/2/this.adInfo.material.height;1!==Number(s.width)&&(c>p||1===Number(s.height))?d=Math.ceil(l*p):l=Math.ceil(d/p);var u=Math.floor(d)%2==0?d:d+1,h=l,f=i*Number(s.x_axis)+a,v=n*Number(s.y_axis)+r,m=n-h+r;v=Math.min(v,m);var y={position:"absolute",left:"".concat(f,"px"),top:"".concat(v,"px"),width:"".concat(u,"px"),height:"".concat(h,"px"),cursor:"auto","pointer-events":"none"};if(!this.adInfo.data.poster.click_hot_area&&this.adInfo.clickable&&(y.cursor="pointer",y["pointer-events"]="auto"),e.container.style.cssText=jt(y),this.adInfo.data.poster.click_hot_area){var g=null!==(t=this.adInfo.data.poster.click_hot_area)&&void 0!==t?t:{},_=g.height_rate,A=void 0===_?0:_,E=g.margin_bottom_rate,C=void 0===E?0:E,I=g.margin_left_rate,x=void 0===I?0:I,T=g.margin_right_rate,b=void 0===T?0:T,L={position:"absolute",left:"".concat(Math.round(u*x),"px"),right:"".concat(Math.round(u*b),"px"),bottom:"".concat(Math.round(h*C),"px"),height:"".concat(Math.round(h*A),"px"),display:"block","z-index":"1",cursor:"auto","pointer-events":"none"};this.adInfo.clickable&&(L.cursor="pointer",L["pointer-events"]="auto"),e.hotArea.style.cssText=jt(L)}this.containerSize={width:u,height:h,top:v,left:f},this.transparentPlayer&&this.transparentPlayer.resize(u,h)}},e.prototype.setCloseBtnSizeAndPosition=function(){var t=this.cornerUI.getCornerDomNodes(this.cornerAdId);if(null==t?void 0:t.close){var e=this.adInfo.data.poster.close_button;if((null==e?void 0:e.top)||(null==e?void 0:e.right)||(null==e?void 0:e.bottom)||(null==e?void 0:e.left)){var o={top:e.top?"".concat(Number(e.top)*this.playerSize.height,"px"):"auto",right:e.right?"".concat(Number(e.right)*this.playerSize.width,"px"):"auto",bottom:e.bottom?"".concat(Number(e.bottom)*this.playerSize.height,"px"):"auto",left:e.left?"".concat(Number(e.left)*this.playerSize.width,"px"):"auto"};t.close.style.cssText+=jt(o)}else{t.close.style.cssText+=jt({top:"8px",right:"8px",bottom:"auto",left:"auto"})}}},e.prototype.setCloseVisible=function(t){var e=this.cornerUI.getCornerDomNodes(this.cornerAdId);if(null==e?void 0:e.closeArea)if(t){var o=this.adInfo.data.poster.close_button;(null==o?void 0:o.is_show)?oe(e.closeArea):ee(e.closeArea)}else ee(e.closeArea)},e.prototype.updateAdFlag=function(){var t=this.cornerUI.getCornerDomNodes(this.cornerAdId);(null==t?void 0:t.hotFlag)&&!this.adInfo.data.poster.show_ad_icon_type&&ee(t.hotFlag)},e.prototype.setPlayerSize=function(){var t=this.adCore.config.getPlayerSize();this.playerSize={width:t.playerWidth||t.playerOWidth,height:t.playerHeight||t.playerOHeight,left:0,top:0};var e=this.playerSize,o=e.width,i=e.height,n=t.playerOWidth||t.playerWidth,r=t.playerOHeight||t.playerHeight;if(o/i<n/r){this.playerSize.left=0;var a=o/n;this.playerSize.height=r*a,this.playerSize.top=(i-this.playerSize.height)/2}else{this.playerSize.top=0;a=i/r;this.playerSize.width=n*a,this.playerSize.left=(o-this.playerSize.width)/2}},e.prototype.transparentPlayerSeek=function(){var t;if(!this.adInfo.isWholeScene){var e=this.adCore.config.outerPlayerData.playtime-this.adInfo.point.begin/1e3;this.data.firstStartTime=e,e>0&&(null===(t=this.transparentPlayer)||void 0===t||t.seek(e))}},e.prototype.bindTransparentPlayerEvent=function(){this.transparentPlayer.on(zn.CANPLAY,this.handleTransparentPlayerCanPlay),this.transparentPlayer.on(zn.PLAY,this.handleTransparentPlayerPlay)},e}(nn),er=function(t){return function(e,o){return new tr({adCore:e,order:o,config:t})}},or=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"material",{get:function(){return G(this.data.material)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWholeScene",{get:function(){var t;return!!(null===(t=this.point)||void 0===t?void 0:t.is_whole_scene)},enumerable:!1,configurable:!0}),e}(Be),ir=function(t,e){var o;if(e.ad_scene!==s.ANCHOR)return{};var i={},n=[];return null===(o=e.anchor_ads)||void 0===o||o.forEach((function(o){if(o.ad_type===p.CORNER)if(o.point){var i=ze(o);n.push({adType:o.ad_type,auth:e.auth,empty:Ke(t,e,o.empty),orders:o.corner.map((function(o,n){return new or({data:o,orderIdx:n,adCore:t,auth:e.auth,extraInfo:e.extra_info,point:i})})),point:i,pointStatus:en.INIT})}else $e(t,e,o.empty)})),n.length>0&&(i.pointAdData=n),i},nr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleAdShow=function(t){t.adInfo;e.isNeedCheckType(t.adType)&&e.checkSceneShow()},e.handleAdHide=function(t){!t.adInfo.isWholeScene&&e.isNeedCheckType(t.adType)&&e.checkSceneShow()},e.handleAdPause=function(){e.adCore.api.pauseAd(p.CORNER)},e.handleAdResume=function(){e.adCore.api.resumeAd(p.CORNER)},e}return i(e,t),e.prototype.startWatch=function(){t.prototype.startWatch.call(this),this.adCore.event.on(Ge.AD_SHOW,this.handleAdShow),this.adCore.event.on(Ge.AD_HIDE,this.handleAdHide),this.adCore.outerEvent.on(ki.VIDEO_PAUSE,this.handleAdPause),this.adCore.outerEvent.on(ki.VIDEO_PLAYING,this.handleAdResume)},e.prototype.endWatch=function(){t.prototype.endWatch.call(this),this.adCore.event.off(Ge.AD_SHOW,this.handleAdShow),this.adCore.event.off(Ge.AD_HIDE,this.handleAdHide),this.adCore.outerEvent.off(ki.VIDEO_PAUSE,this.handleAdPause),this.adCore.outerEvent.off(ki.VIDEO_PLAYING,this.handleAdResume)},e.prototype.timeupdate=function(t){var e=this;this.adCore.config.phlsConfig.isSoloPlayingPhls||this.adCore.order.getPoints(p.CORNER).forEach((function(o){var i=o.type===y.TIMESTAMP?Date.now():t,n=e.adCore.order.getPointOrderFromPoint(p.CORNER,o);n&&0!==n.orders.length&&e.checkTime(n,i)}))},e.prototype.checkTime=function(t,e){var o=this,i=t.point;e>=i.begin-6e3&&e<i.begin?this.handlePreLoad(t):e>=i.begin&&e<=i.end?this.handlePlaying(t,e):t.pointStatus!==en.INIT&&(t.pointStatus=en.INIT,t.orders.forEach((function(t){o.adCore.api.stopAd(p.CORNER,t.orderId)})))},e.prototype.handlePreLoad=function(t){var e=this;t.pointStatus!==en.INIT?t.pointStatus===en.PLAYING&&(t.pointStatus=en.INIT,t.orders.forEach((function(t){e.adCore.api.stopAd(p.CORNER,t.orderId)}))):this.load(t)},e.prototype.handlePlaying=function(t,e){var o=this;e===t.point.begin&&t.pointStatus===en.PLAYING&&(t.pointStatus=en.INIT,t.orders.forEach((function(t){o.adCore.api.stopAd(p.CORNER,t.orderId)}))),t.pointStatus!==en.INIT?[en.LOADING,en.PLAYING].includes(t.pointStatus)&&(t.pointStatus=en.PLAYING,t.orders.forEach((function(t){o.adCore.api.playAd(p.CORNER,t.orderId)}))):this.load(t)},e.prototype.load=function(t){var e=this,o=this.adCore.ctrl.getRunningAds(p.CORNER);t.orders.forEach((function(i){i.point.type===y.TIMESTAMP&&o.some((function(t){return!t.adInfo.isWholeScene}))||(i.isWholeScene||o.forEach((function(t){t.adInfo.point.type===y.TIMESTAMP&&t.stop()})),t.pointStatus=en.LOADING,e.adCore.ctrl.loadAdOrder(D(D({},t),{orders:[i],empty:[]})).catch((function(){var t;null===(t=e.logger)||void 0===t||t.error("角标 loadAd 失败")})))}))},e.prototype.isNeedCheckType=function(t){return[p.PAUSE,p.CORNER,p.HLS_MID,p.MID].includes(t)},e.prototype.checkSceneShow=function(){var t=this.adCore.ctrl.getRunningAds(p.CORNER),e=this.hasOtherShow();t.forEach((function(t){t.adInfo.isWholeScene&&(e&&t.data.isShow?t.hide(!0):t.data.isShow||t.show(!0))}))},e.prototype.hasOtherShow=function(){return!!this.adCore.ctrl.getSingleAds().some((function(t){return t.data.isShow&&![p.PROGRESS_PREVIEW,p.VIDEO_RESOLUTION].includes(t.adType)}))||this.adCore.ctrl.getMultipleAds().some((function(t){var e=t[0],o=t[1];return[p.CORNER].includes(e)?Array.from(o.values()).some((function(t){return t.data.isShow&&!t.adInfo.isWholeScene})):Array.from(o.values()).some((function(t){return t.data.isShow}))}))},e}(ln),rr=function(t){return{adType:p.CORNER,isPointAd:!0,isMultiple:!0,getOrderData:ir,creator:er(t),watcher:function(t){return new nr(t)}}},ar=yn("hls-mid"),sr={layer:ar("layer"),clickHotArea:ar("click-hot-area")},dr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleMap=sr,e.eventMap=new Map,e}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.$domNodes.layer&&(this.$domNodes.layer.style.cssText+="position: absolute; width: 100%; height: 100%; pointer-events: auto; z-index: 3;")},e.prototype.onMaskClick=function(t,e){var o=this.eventMap.get(t);o||(o=new Set),o.add(e),this.eventMap.set(t,o)},e.prototype.offMaskClick=function(t,e){var o=this.eventMap.get(t);o&&o.delete(e)},e.prototype.hideLayer=function(){ee(this.$domNodes.layer)},e.prototype.showJumpMaskOnly=function(){Xt(this.$domNodes.layer,{pointerEvents:"auto",cursor:"pointer"}),oe(this.$domNodes.layer),ee(this.$domNodes.clickHotArea)},e.prototype.showHotArea=function(){Xt(this.$domNodes.layer,{pointerEvents:"none",cursor:"auto"}),Xt(this.$domNodes.clickHotArea,{pointerEvents:"auto",cursor:"pointer"}),oe(this.$domNodes.layer),oe(this.$domNodes.clickHotArea)},e.prototype.getDomEvents=function(){var t=this;return[{el:this.$domNodes.layer,eventName:vn.CLICK,listener:function(e){e.target.dataset.role===t.roleMap.layer&&t.eventMap.forEach((function(e){if(e.size>0){var o=Array.from(e.values())[0];null==o||o({role:t.roleMap.layer})}}))}},{el:this.$domNodes.clickHotArea,eventName:vn.CLICK,listener:function(){t.eventMap.forEach((function(e){if(e.size>0){var o=Array.from(e.values())[0];null==o||o({role:t.roleMap.clickHotArea})}}))}}]},e.prototype.getTemplate=function(){return'<txpdiv data-role="'.concat(this.roleMap.clickHotArea,'" style="position: absolute; pointer-events: auto"></txpdiv>')},e}(In),lr=function(t){function e(e){var o=t.call(this,e)||this;return o.handleClick=function(t){o.adInfo.clickable&&(o.adInfo.hasHotArea||t.role!==sr.layer||o.open(),o.adInfo.hasHotArea&&t.role===sr.clickHotArea&&o.open())},o.hlsMidUI=new dr({adCore:o.adCore,container:o.config.createLayer(o.adType)}),o.hlsMidUI.init(),o.init(),o}return i(e,t),e.prototype.show=function(){this.data.isShow||(this.setJumpMaskVisible(!0),t.prototype.show.call(this))},e.prototype.hide=function(){this.data.isShow&&(this.setJumpMaskVisible(!1),t.prototype.hide.call(this))},e.prototype.load=function(){var e;t.prototype.load.call(this),(null===(e=this.adInfo)||void 0===e?void 0:e.point)||this.stop()},e.prototype.play=function(){var e,o=this.adCore.config.outerPlayerData.playtime;this.adInfo.reporter.setVideoPlaytime(1e3*o),this.state!==Zi.PLAYING&&this.state!==Zi.PAUSED&&((null===(e=this.adInfo)||void 0===e?void 0:e.point)?(t.prototype.play.call(this),this.show(),this.doExposure(this.adInfo),this.adCore.vr.reportExposure(this.adInfo)):this.stop())},e.prototype.stop=function(){var e;this.state!==Zi.END&&(this.hide(),t.prototype.stop.call(this),this.adCore.vr.reportEnded(this.order,{ad_playtime:this.data.showTime?Date.now()-this.data.showTime:-1,first_view:null!==(e=this.data.showTime)&&void 0!==e?e:-1}),this.destroy())},e.prototype.destroy=function(){this.data.hasDestroy||(this.unbindUIEvent(),this.hlsMidUI.destroy(),t.prototype.destroy.call(this))},e.prototype.resize=function(){this.resizeHotArea()},e.prototype.init=function(){this.setJumpMaskVisible(!1),this.bindUIEvent()},e.prototype.bindUIEvent=function(){this.hlsMidUI.onMaskClick(this.adInfo.orderId,this.handleClick)},e.prototype.unbindUIEvent=function(){this.hlsMidUI.offMaskClick(this.adInfo.orderId,this.handleClick)},e.prototype.open=function(){this.doClickAction(this.adInfo,{actionType:un.AD_VIEW_AREA,playTime:this.data.showTime?Date.now()-this.data.showTime:-1})},e.prototype.setJumpMaskVisible=function(t){this.adInfo.clickable&&t?this.adInfo.hasHotArea?(this.resizeHotArea(),this.hlsMidUI.showHotArea()):this.hlsMidUI.showJumpMaskOnly():this.hlsMidUI.hideLayer()},e.prototype.resizeHotArea=function(){if(this.adInfo.hasHotArea&&this.adInfo.material){var t,e,o,i,n=this.adInfo.material,r=n.width/n.height,a=this.adCore.config.getPlayerSize(),s=a.playerWidth,d=a.playerHeight,l=a.playerOWidth,c=a.playerOHeight,p=s||l,u=d||c;r>p/u?(t=p,i=0,o=(u-(e=p/r))/2):(e=u,i=(p-(t=u*r))/2,o=0);var h=this.adInfo.clickHotArea,f=h.height_rate,v=void 0===f?0:f,m=h.margin_bottom_rate,y=h.margin_left_rate,g=h.margin_right_rate,_={position:"absolute",left:"".concat(Math.round(t*y+i),"px"),right:"".concat(Math.round(t*g+i),"px"),bottom:"".concat(Math.round(e*m+o),"px"),height:"".concat(Math.round(e*v),"px"),cursor:"pointer","pointer-events":"auto"};this.hlsMidUI.$domNodes.clickHotArea&&(this.hlsMidUI.$domNodes.clickHotArea.style.cssText=jt(_))}},e}(nn),cr=function(t){return function(e,o){return new lr({adCore:e,order:o,config:t})}},pr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"clickable",{get:function(){return this.data.order.ad_action.type===u.CLICK},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return G(this.data.material)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasHotArea",{get:function(){var t;return!!(null===(t=this.clickHotArea)||void 0===t?void 0:t.height_rate)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clickHotArea",{get:function(){var t;return null===(t=this.data.poster)||void 0===t?void 0:t.click_hot_area},enumerable:!1,configurable:!0}),e}(Be),ur=function(t,e){var o;if(e.ad_scene!==s.ANCHOR)return{};var i={},n=[];return null===(o=e.anchor_ads)||void 0===o||o.forEach((function(o){if(o.ad_type===p.HLS_MID)if(o.point){var i=ze(o);n.push({adType:o.ad_type,auth:e.auth,empty:Ke(t,e,o.empty),orders:o.hls_mid.map((function(o,n){return new pr({data:o,orderIdx:n,adCore:t,auth:e.auth,point:i})})),point:i,pointStatus:en.INIT})}else $e(t,e,o.empty)})),n.length>0&&(i.pointAdData=n),i},hr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.timeupdate=function(t){var e=this,o=this.adCore.order.getPoints(p.HLS_MID),i=this.adCore.config.phlsConfig,n=i.phlsPlayType,r=i.isSoloPlayingPhls,a=i.soloPlayPhlsTimeOffset,s=void 0===a?0:a;(n!==A.SOLO||r)&&(r&&s>=0&&(t+=s),o.forEach((function(o){var i=e.adCore.order.getPointOrderFromPoint(p.HLS_MID,o);i&&0!==i.orders.length&&e.checkTime(i,t)})))},e.prototype.checkTime=function(t,e){var o=this,i=t.point;e>=i.begin-2e3&&e<=i.begin?this.handlePreLoad(t):e>=i.begin&&e<=i.end?this.handlePlaying(t):t.pointStatus!==en.INIT&&(t.pointStatus=en.INIT,t.orders.forEach((function(t){o.adCore.api.stopAd(p.HLS_MID,t.orderId)})))},e.prototype.handlePreLoad=function(t){var e=this;t.pointStatus!==en.INIT?t.pointStatus===en.PLAYING&&(t.pointStatus=en.INIT,t.orders.forEach((function(t){e.adCore.api.stopAd(p.HLS_MID,t.orderId)}))):this.load(t)},e.prototype.handlePlaying=function(t){var e=this;t.pointStatus!==en.INIT?[en.LOADING,en.PLAYING].includes(t.pointStatus)&&(t.pointStatus=en.PLAYING,t.orders.forEach((function(t){e.adCore.api.playAd(p.HLS_MID,t.orderId)}))):this.load(t)},e.prototype.load=function(t){var e=this;t.orders.forEach((function(o){e.adCore.ctrl.loadAdOrder(D(D({},t),{orders:[o],empty:[]})).then((function(){t.pointStatus=en.LOADING})).catch((function(){var t;null===(t=e.logger)||void 0===t||t.error("loadAd 失败: ".concat(p.HLS_MID))}))}))},e}(ln),fr=function(t){return{adType:p.HLS_MID,isPointAd:!0,isMultiple:!0,getOrderData:ur,creator:cr(t),watcher:function(t){return new hr(t)}}},vr=0,mr=Date.now(),yr=function(){function t(t){this.image=null,this.options=t}return Object.defineProperty(t.prototype,"loadTime",{get:function(){return this.loadEndTime&&this.loadStartTime?this.loadEndTime-this.loadStartTime:-1},enumerable:!1,configurable:!0}),t.prototype.load=function(){var t=this;if(this.image)return Promise.resolve(this.image);var e=this.options;return new Promise((function(o,i){var n=new Image;n.id="ad_player_image_material_".concat(mr,"_").concat(vr),n.style.width="100%",n.style.height="100%",e.style&&Object.entries(e.style).forEach((function(t){var e=t[0],o=t[1];n.style[e]=o})),n.onload=function(){t.image=n,vr+=1,t.loadEndTime=Date.now(),o(t.image)},n.onerror=function(t){i(t)},t.loadStartTime=Date.now(),n.src=e.url}))},t.prototype.destroy=function(){this.image&&(this.image.src="",this.image=null)},t}(),gr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.load=function(){var t=this;this.adInfo.isEmpty&&this.doExposure(this.adInfo),this.loadMaterial().then((function(){t.loadMaterialSuccess()})).catch((function(e){t.loadMaterialFail()}))},e.prototype.play=function(){t.prototype.play.call(this),this.show()},e.prototype.stop=function(){this.state!==Zi.END&&(this.hide(),this.adCore.vr.reportEnded(this.order,{ad_playtime:-1}),t.prototype.stop.call(this),this.destroy())},e.prototype.show=function(){this.data.isShow||(this.ui.setLayerVisible(!0),t.prototype.show.call(this))},e.prototype.hide=function(){this.data.isShow&&(this.ui.setLayerVisible(!1),t.prototype.hide.call(this))},e.prototype.destroy=function(){var e;null===(e=this.imageMaterial)||void 0===e||e.destroy(),this.ui.destroy(),t.prototype.destroy.call(this)},e.prototype.report=function(){this.doExposure(this.adInfo),this.adInfo.isEmpty||this.adCore.vr.reportExposure(this.adInfo)},e.prototype.loadMaterialSuccess=function(){},e.prototype.loadMaterialFail=function(){var t;null===(t=this.imageMaterial)||void 0===t||t.destroy(),this.stop()},e.prototype.loadMaterial=function(){return w(this,void 0,void 0,(function(){var t;return S(this,(function(e){switch(e.label){case 0:if(!(null===(t=this.adInfo.material)||void 0===t?void 0:t.url))return[2,Promise.reject("no url")];this.imageMaterial=new yr({url:this.adInfo.material.url}),this.adCore.event.emit(Ge.AD_LOAD_START,{adType:this.order.adType,adInfo:this.adInfo}),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.imageMaterial.load()];case 2:return e.sent(),this.canplayHandler(),this.loadCompleteHandle({adType:this.adType,adInfo:this.adInfo,index:this.adInfo.orderIdx,loadingTime:this.imageMaterial.loadTime,materialUrl:this.adInfo.material.url,materialType:m.IMAGE}),[3,4];case 3:return e.sent(),this.loadCompleteHandle({adType:this.adType,adInfo:this.adInfo,index:this.adInfo.orderIdx,hasError:"1",detailErrorCode:Wi.LOAD_FAIL,loadingTime:this.imageMaterial.loadTime,materialUrl:this.adInfo.material.url,materialType:m.IMAGE}),[2,Promise.reject("image load failed")];case 4:return[2]}}))}))},e}(nn);fn(".txp_overlay_loading_ad{left:50%;margin-top:-144px;max-width:38%;position:absolute;top:50%;-webkit-transform:translate(-50%);transform:translate(-50%);width:200px}.txp_popup_definition .txp_menuitem_ad{border-bottom:1px solid hsla(0,0%,100%,.08);cursor:default!important;font-size:12px;height:30px;line-height:30px;margin-bottom:6px;padding:0 10px 6px}.txp_popup_definition .txp_definition_ad{margin-right:6px}.txp_popup_definition .txp_definition_ad_text{color:#fff;max-width:124px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.txp_tooltip_preview_ad{height:24px;left:0;position:absolute;top:-26px;white-space:nowrap;width:100%}.txp_tooltip_preview_ad .txp_ad_mark{bottom:2px;display:inline-block;left:0;position:relative;right:auto}.txp_tooltip_preview_ad .txp_ad_mark.txp_none{display:none}.txp_ad_mark{bottom:0;color:#fff;font-size:12px;line-height:1;opacity:.8;position:absolute;right:2px;-webkit-transform:scale(.7);transform:scale(.7)}");var _r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.setLayerVisible=function(t){this.setDomVisible(this.$domNodes.layer,t)},e}(In),Ar=yn("loading"),Er={layer:Ar("layer"),img:Ar("img"),adFlag:Ar("flag")},Cr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleMap=Er,e}return i(e,t),e.prototype.update=function(t){var e=t.url,o=t.hasAdFlag;this.$domNodes.img&&(this.$domNodes.img.src=e),o?oe(this.$domNodes.adFlag):ee(this.$domNodes.adFlag)},e.prototype.mount=function(){if(!this.$domNodes.layer){var t=document.createElement("div");t.className="txp_overlay_loading_ad txp_none",t.dataset.role=this.roleMap.layer,this.options.prependEle(t),this.$domNodes.layer=t}this.appendDom(this.$domNodes.layer)},e.prototype.getTemplate=function(){return'\n      <img data-role="'.concat(this.roleMap.img,'" width="200" class="txp_img" />\n      <txpdiv data-role="').concat(this.roleMap.adFlag,'" class="txp_ad_mark txp_none">广告</txpdiv>\n    ')},e}(_r),Ir=function(t){function e(e){var o=t.call(this,e)||this;return o.ui=new Cr({adCore:o.adCore,container:o.config.createLayer(o.adType),prependEle:o.config.prependEle}),o.ui.init(),o}return i(e,t),e.prototype.loadMaterialSuccess=function(){this.ui.update({url:this.adInfo.material.url,hasAdFlag:this.adInfo.hasFlag}),this.show(),this.doExposure(this.adInfo),this.adCore.vr.reportExposure(this.adInfo)},e}(gr),xr=function(t){return function(e,o){return new Ir({adCore:e,order:o,config:t})}},Tr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"material",{get:function(){return Y(this.data.material)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasFlag",{get:function(){var t;return null===(t=this.data.poster)||void 0===t?void 0:t.ad_flag},enumerable:!1,configurable:!0}),e}(Be);function br(t,e,o){return Ie(o).map((function(o,i){return new Tr({data:o,orderIdx:i,adCore:t,auth:null==e?void 0:e.auth,extraInfo:null==e?void 0:e.extra_info})}))}var Lr,Pr=function(t,e){var o;if(e.ad_scene!==s.PRE)return{};var i={},n=[];return null===(o=e.ads)||void 0===o||o.forEach((function(o){o.ad_type===p.LOADING&&n.push({adType:o.ad_type,auth:e.auth,empty:Ke(t,e,o.empty),orders:br(t,e,o.loading)})})),n.length>0&&(i.adData=n),i},Nr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadLoadingAd=function(t){var o=t.data;(null==o?void 0:o.value)&&(e.adCore.ctrl.getRunningAds(p.LOADING).length&&e.adCore.api.reportAd(p.LOADING))},e.handleAdOrderSet=function(t){return w(e,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:if(t.adType!==p.LOADING)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.adCore.api.loadAd(p.LOADING)];case 2:return e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}}))}))},e}return i(e,t),e.prototype.startWatch=function(){this.adCore.outerEvent.on(ki.SET_LOADING,this.loadLoadingAd),this.adCore.event.on(Ge.AD_ORDER_SET,this.handleAdOrderSet)},e.prototype.endWatch=function(){this.adCore.outerEvent.off(ki.SET_LOADING,this.loadLoadingAd),this.adCore.event.off(Ge.AD_ORDER_SET,this.handleAdOrderSet)},e}(dn),Dr=function(t){return{adType:p.LOADING,isPointAd:!1,isMultiple:!1,getOrderData:Pr,creator:xr(t),watcher:function(t){return new Nr(t)}}},Or=function(t){function e(e){var o=t.call(this)||this;return o.ad=e,o.duration=0,o.showCountdown=0,o.urlList=[],o.volume=0,o.isMute=!1,o.isLoadComplete=!1,o.prevPlayTime=0,o.hasReportVideoEnd=!1,o.hasAdPlayingEmit=!1,o.adIndex=0,o.isFirstExposure=!0,o}return i(e,t),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.ad.order.orders.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentAdInfo",{get:function(){return this.ad.order.orders[this.adIndex]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentVideoInfo",{get:function(){var t;return this.ad.getVideoInfoByOrderId(null===(t=this.currentAdInfo)||void 0===t?void 0:t.orderId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoInfoList",{get:function(){var t;return(null===(t=this.ad.playerService)||void 0===t?void 0:t.postPlayer.adVideoInfoList)||[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstLoadTime",{get:function(){return this.firstLoadingEndTime&&this.firstLoadingStartTime?Math.abs(this.firstLoadingEndTime-this.firstLoadingStartTime):-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTrueView",{get:function(){var t,e,o;if(1===this.ad.order.orders.length&&(null===(e=null===(t=this.ad.adInfo)||void 0===t?void 0:t.data.poster)||void 0===e?void 0:e.skip)){var i=null===(o=this.ad.adInfo)||void 0===o?void 0:o.data.poster.skip,n=i.duration,r=i.sub_title;return n>0&&!!r}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trueViewCountDown",{get:function(){return this.isTrueView?this.currentAdInfo.data.poster.skip.duration/1e3:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skipAdTitle",{get:function(){var t,e,o,i;return null!==(i=null===(o=null===(e=null===(t=this.currentAdInfo)||void 0===t?void 0:t.data.poster)||void 0===e?void 0:e.skip)||void 0===o?void 0:o.title)&&void 0!==i?i:"关闭该广告"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skipAdSubTitle",{get:function(){var t,e,o,i;return null!==(i=null===(o=null===(e=null===(t=this.currentAdInfo)||void 0===t?void 0:t.data.poster)||void 0===e?void 0:e.skip)||void 0===o?void 0:o.sub_title)&&void 0!==i?i:"关闭该广告"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canClickToStopAd",{get:function(){return this.isTrueView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rfid",{get:function(){var t,e;return null!==(t=this.refresh_id)&&void 0!==t?t:null===(e=this.ad.order.auth)||void 0===e?void 0:e.refresh_id},enumerable:!1,configurable:!0}),e}(on),wr=function(){function t(t){this.videoAdInterface=t,this.ready=Promise.resolve()}return Object.defineProperty(t.prototype,"logger",{get:function(){return this.adInterface.logger},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adCore",{get:function(){return this.videoAdInterface.adCore},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adInterface",{get:function(){return this.videoAdInterface},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoUI",{get:function(){return this.videoAdInterface.videoUI},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoCountdown",{get:function(){return this.videoAdInterface.videoCountdown},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blockScreen",{get:function(){return this.videoAdInterface.blockScreen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playerService",{get:function(){return this.videoAdInterface.playerService},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adEndService",{get:function(){return this.videoAdInterface.adEndService},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateUIService",{get:function(){return this.videoAdInterface.updateUIService},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoUIEventService",{get:function(){return this.videoAdInterface.videoUIEventService},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"browserEventService",{get:function(){return this.videoAdInterface.browserEventService},enumerable:!1,configurable:!0}),t}(),Sr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.handleAdEnd=function(t,e){var o=this;this.logger.log("handleAdEnd: ".concat(st({forceStop:t,unloadTrigger:e}),"}")),this.blockScreen&&!t?this.blockScreen.check((function(){o.doAdEnd()})):this.doAdEnd(t,e)},e.prototype.doAdEnd=function(t,e){var o=this.getDurations();if(this.logger.log("所有广告播放完成: ".concat(st(o))),e){this.reportAdEndToVr(o,t,e);var i=this.adInterface.data,n=i.currentVideoInfo,r=i.currentAdInfo;(null==n?void 0:n.playTime)&&n.playTime<n.duration&&(null==r||r.reporter.reportPlay({playType:De.INTERRUPT,timeOffset:n.playTime}))}else if(!this.adInterface.data.hasReportVideoEnd){this.adInterface.data.hasReportVideoEnd=!0,this.videoCountdown.stopCountdown(),this.adInterface.hide(),this.reportAdEndToVr(o,t,e);var a=o.adDurationsTotal,s=o.adViewTimeTotal;this.adCore.event.emit(Ge.AD_STOP,{adType:this.adInterface.order.adType,adInfo:this.adInterface.data.currentAdInfo,adOrder:this.adInterface.order,index:this.adInterface.data.adIndex,rfid:this.adInterface.data.rfid,isAllAdEnd:Math.abs(a-s)<5e3}),this.adInterface.destroy()}},e.prototype.reportAdEndToVr=function(t,e,o){var i,n=t.adDurationList,r=t.adViewTimeList,a=t.adRealViewTimeTotal,s=t.adDurationsTotal,d={first_view:null!==(i=this.adInterface.data.showTime)&&void 0!==i?i:-1,force_stop:!!e,unload_trigger:!!o,user_close:!!this.adInterface.data.userCloseOrderId,close_time:this.adInterface.data.userCloseOrderId?1e3*(this.adInterface.data.duration-this.videoCountdown.remainingCountdown):-1,load_to_view_time:this.adInterface.data.isEmpty?-1:this.adInterface.data.firstLoadTime,ad_playtime:a,ad_playtime_list:r,ad_duration_list:n,ad_duration:s,is_trueview:this.adInterface.data.isTrueView?"1":"0",error_code:this.adInterface.data.errorCode,block_time:this.adInterface.data.blockTime,start_to_end_time:this.adInterface.data.showTime?Date.now()-this.adInterface.data.showTime:-1,order_len:this.adInterface.order.orders.length,play_len:this.adInterface.data.videoInfoList.filter((function(t){return t.status===qi.END})).length};this.adCore.vr.reportEnded(this.adInterface.order,d)},e.prototype.getDurations=function(){var t=this,e=this.adInterface.data.isEmpty?[]:this.adInterface.order.orders.map((function(t){return 1e3*t.material.duration})),o=e.reduce((function(t,e){return t+e}),0),i=this.adInterface.data.isEmpty?[]:this.adInterface.order.orders.map((function(e){var o=t.adInterface.getVideoInfoByOrderId(e.orderId);return void 0!==(null==o?void 0:o.playTime)?1e3*o.playTime:0})),n=i.reduce((function(t,e){return t+e}),0);return{adDurationList:e,adDurationsTotal:o,adViewTimeList:i,adViewTimeTotal:n,adRealViewTimeTotal:this.adInterface.order.orders.reduce((function(e,o){var i=t.adInterface.getVideoInfoByOrderId(o.orderId);return(null==i?void 0:i.viewTime)?e+1e3*i.viewTime:(null==i?void 0:i.viewStartTime)?e+(Date.now()-i.viewStartTime):e}),0)}},e}(wr),Rr=function(t){function e(e){var o=t.call(this,e)||this;return o.lsKey="gp-cacdc",o.filmFirstPlay=!1,o.showing=!1,o.errorByADBlock=!1,o.isShow=!1,o.startCountdownID=null,o.handleFilmFirstPlayListener=function(t){t.data.isFirst&&!o.filmFirstPlay&&(o.filmFirstPlay=!0,o.reset())},o.reset(),o.bindPlayerEvent(),o}return i(e,t),Object.defineProperty(e.prototype,"$dom",{get:function(){return this.videoUI.$domNodes.videoBlackScreen},enumerable:!1,configurable:!0}),e.prototype.check=function(t){return w(this,void 0,void 0,(function(){var e,o,i,n,r,a;return S(this,(function(s){switch(s.label){case 0:return[4,this.adCore.adblock.checkAdblock()];case 1:return e=s.sent(),this.logger.log("是否使用 adblock: ".concat(e)),e?this.showing?[2]:(o=null!==(a=null===(r=this.adInterface.data.videoInfoList)||void 0===r?void 0:r.filter((function(t){return!t.viewTime||t.viewTime<1})))&&void 0!==a?a:[],this.logger.log("被 adblock 拦截的广告: ".concat(st(o))),i=o.length,this.setLSValue(i),0===(n=this.getBlockTime(i))?(t(),[2]):(this.adInterface.data.blockTime=n,this.startCountdown(t,n),[2])):(t(),[2])}}))}))},e.prototype.getLSValue=function(){var t;try{if(window.localStorage)return+(null!==(t=window.localStorage.getItem(this.lsKey))&&void 0!==t?t:0)}catch(t){return 0}return 0},e.prototype.setLSValue=function(t){try{window.localStorage&&window.localStorage.setItem(this.lsKey,"".concat(t))}catch(e){this.logger.error("localStorage.setItem 出错: ".concat(st({lsKey:this.lsKey,value:t})))}},e.prototype.setErrorByADBlock=function(t){this.errorByADBlock=t},e.prototype.reset=function(){this.unBindPlayerEvent(),this.filmFirstPlay=!1,this.errorByADBlock=!1,this.isShow=!1,this.showing=!1,this.$dom&&Jt(this.$dom,"txp_none"),Number(this.startCountdownID)>0&&(this.startCountdownID&&clearInterval(this.startCountdownID),this.startCountdownID=null)},e.prototype.bindPlayerEvent=function(){this.adCore.outerEvent.on(ki.VIDEO_PLAYING,this.handleFilmFirstPlayListener)},e.prototype.unBindPlayerEvent=function(){this.adCore.outerEvent.off(ki.VIDEO_PLAYING,this.handleFilmFirstPlayListener)},e.prototype.getBlockTime=function(t){return 1===t?30:2===t?45:t>=3?60:0},e.prototype.startCountdown=function(t,e){var o=this;this.isShow=!0,this.showing=!0;var i=e;this.videoUI.setVideoBlackScreenVisible(!0),this.videoUI.updateVideoBlackScreen("".concat(i)),this.adCore.event.emit(Ge.AD_BLACK_SCREEN,{adInfo:this.adInterface.data.currentAdInfo,adType:this.adInterface.order.adType,bc:this.getLSValue()}),this.startCountdownID=+setInterval((function(){i>0?(i-=1,o.videoUI.updateVideoBlackScreen("".concat(i))):(Number(o.startCountdownID)>0&&(o.startCountdownID&&clearInterval(o.startCountdownID),o.startCountdownID=null),t(),o.videoUI.setVideoBlackScreenVisible(!1),o.showing=!1)}),1e3)},e}(wr),Mr=function(t){function e(e){var o=t.call(this,e)||this;return o.bindBrowserEvent(),o}return i(e,t),e.prototype.destroy=function(){this.unbindBrowserEvent()},e.prototype.unbindBrowserEvent=function(){this.browserBeforeUnload&&window.removeEventListener("beforeunload",this.browserBeforeUnload)},e.prototype.bindBrowserEvent=function(){var t=this;this.unbindBrowserEvent(),this.browserBeforeUnload=function(){t.unbindBrowserEvent();var e=t.adInterface.data,o=e.currentAdInfo,i=e.currentVideoInfo;i&&(i.viewStartTime&&(i.viewTime=(Date.now()-i.viewStartTime)/1e3),t.adInterface.data.userCloseOrderId=null==o?void 0:o.orderId,t.adInterface.setRfid(""),t.adEndService.handleAdEnd(!0,!0))},window.addEventListener("beforeunload",this.browserBeforeUnload)},e}(wr),Vr=function(){function t(){this.timer=NaN,this.startTime=NaN,this.during=0,this.remain=-1,this.callback=void 0}return t.prototype.on=function(t,e){var o=this;t<0||"function"==typeof e&&(this.clearTimer(),this.during=t,this.callback=e,this.timer=+setTimeout((function(){var t;null===(t=o.callback)||void 0===t||t.call(o),o.clear()}),t),this.startTime=Date.now())},t.prototype.pause=function(){var t=Date.now()-this.startTime;t>this.during||(this.remain=this.during-t,this.clearTimer())},t.prototype.go=function(){this.remain<0||this.on(this.remain,this.callback)},t.prototype.clear=function(){this.clearTimer(),this.callback=void 0,this.remain=-1},t.prototype.clearTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=NaN),this.startTime=NaN,this.during=0},t}(),kr=function(){function t(t){t&&(this.api={url:"https://ra.gtimg.com/web/viewability/viewabilityalone.js",startMonitor:null},this.target=t)}return t.prototype.start=function(t){var e=this;if(this.api){var o=this.getReportData(t);o&&(this.api.startMonitor?this.api.startMonitor(o):this.initApi().then((function(){e.api.startMonitor(o)})))}},t.prototype.initApi=function(){var t=this;return new Promise((function(e,o){ge(t.api.url,(function(i){var n;i?o():(null===(n=window.crystalViewModule)||void 0===n?void 0:n.startviewability)?(t.api.startMonitor=window.crystalViewModule.startviewability,e()):o()}))}))},t.prototype.getReportData=function(t){var e=[],o=t.reporter.pluginReportList;return o&&o.length>0?(o.forEach((function(t){e.push(t.reportUrl)})),{reportItemUrl:e,objectID:[this.target],oid:t.orderId,duration:1e3*parseInt("".concat(t.material.duration),10),retry:0}):null},t}(),Ur=function(t){function e(e){var o=t.call(this,e)||this;return o.errorCount=0,o.handleVideoLoadStart=function(t){var e=t.index,i=t.adVideoInfo;if(i.url){o.adInterface.data.firstLoadingStartTime||(o.adInterface.data.firstLoadingStartTime=Date.now()),o.logger.log("开始加载第 ".concat(e," 个"));var n=o.adInterface.order.orders[e];n&&(i.loadStartTime=Date.now(),o.adCore.event.emit(Ge.AD_LOAD_START,{adInfo:n,adType:o.adInterface.order.adType,index:n.orderIdx}))}},o.handleVideoProgress=function(t){var e=t.index,i=t.adVideoInfo,n=o.adInterface.order.orders[e];if(n){var r=i.loadedPercent;i.buffered,i.duration;if(r){var a=Date.now();r&&i.loadStartTime&&(i.speed=i.fileSize/(a-i.loadStartTime)*1e3),o.adCore.event.emit(Ge.AD_LOAD_PROGRESS,{adInfo:n,adType:o.adInterface.order.adType,speed:i.speed,loadedPercent:i.loadedPercent,buffered:i.buffered}),o.handleVideoLoadComplete(i,n),o.adInterface.adType===p.MID&&r>=.05&&o.adInterface.canplayHandler()}}},o.handleVideoCanPlay=function(t){var e=t.index,i=t.adVideoInfo;if(o.adInterface.order.orders[e]){var n=i.loadedPercent,r=void 0===n?0:n;o.logger.log("广告视频可播: index: ".concat(t.index,"  percent: ").concat(r)),(o.adInterface.adType!==p.MID||r>=.05)&&o.adInterface.canplayHandler()}},o.handleVideoPlaying=function(t){var e,i=t.index,n=t.adVideoInfo,r=o.adInterface.order.orders[i];if(r){r.reporter.reportPlay({playType:De.AUTO_PLAY,timeOffset:n.playTime}),o.clearAdTimer(n,i),o.videoCountdown.updateCountdownUI(),o.updateUIService.updateVideoUI(r),o.adInterface.setState(Zi.PLAYING);var a={adInfo:r,adType:o.adInterface.order.adType};o.adCore.event.emit(Ge.AD_PLAY_START,a),o.adInterface.show(),n&&!n.viewStartTime&&(n.viewStartTime=Date.now()),o.adInterface.data.hasAdPlayingEmit||(o.adInterface.data.showTime=Date.now(),o.adInterface.data.hasAdPlayingEmit=!0,o.adCore.event.emit(Ge.AD_PLAYING,{adType:o.adInterface.order.adType,adInfo:o.adInterface.data.currentAdInfo})),o.adCore.vr.reportTechParam("playStart",{errorTimes:n.errorTimes,adType:o.adInterface.order.adType,index:n.index,orderType:null==r?void 0:r.orderType,hasReportView:n.hasReportView,playtime:n.playTime,readyState:n.readyState,networkState:n.networkState}),n.hasReportView||(n.hasReportView=!0,o.adInterface.doExposure(r),o.adCore.vr.reportExposure(r,o.adInterface.data.isFirstExposure,{order_type:r.orderType}),o.adInterface.data.isFirstExposure&&(o.adInterface.data.isFirstExposure=!1)),o.adInterface.data.firstViewTime||(o.adInterface.data.firstViewTime=Date.now()),o.adInterface.data.firstLoadingEndTime||(o.adInterface.data.firstLoadingEndTime=Date.now()),o.logger.log("开始播放, 第 ".concat(i," 个开播了")),o.videoCountdown.startCountdown(),null===(e=o.adViewMonitor)||void 0===e||e.start(r)}},o.handleVideoResume=function(t){var e=t.index;o.logger.log("广告恢复播放: ".concat(e)),o.adInterface.resume(),o.videoUI.setCenterQrcodeVisible(!1);var i=o.adInterface.order.orders[e];i&&(i.reporter.reportPlay({playType:De.RESUME,timeOffset:Date.now()}),o.adCore.event.emit(Ge.AD_RESUME,{adInfo:i,adType:o.adInterface.order.adType}))},o.handleVideoPause=function(t){var e=t.index,i=t.adVideoInfo;o.logger.log("广告暂停: ".concat(e)),o.adInterface.pause();var n=o.adInterface.order.orders[e];n&&(n.reporter.reportPlay({playType:De.PAUSE,timeOffset:null==i?void 0:i.playTime}),o.adCore.event.emit(Ge.AD_PAUSE,{adInfo:n,adType:o.adInterface.order.adType}))},o.handleVideoTimeupdate=function(t){var e=t.index,i=t.adVideoInfo,n=o.adInterface.order.orders[e];if(n){var r=i.playTime,a=i.loadedPercent,s=Math.floor(null!=r?r:0);s&&a&&s!==o.adInterface.data.prevPlayTime&&(Math.abs(s-o.adInterface.data.prevPlayTime)>1?o.postPlayer.currentTime=o.adInterface.data.prevPlayTime+.5:(i.viewStartTime&&(i.viewTime=(Date.now()-i.viewStartTime)/1e3),o.adInterface.data.prevPlayTime=s,o.unfoldActiveDetail(n,1e3*r),o.handleVideoLoadComplete(i,n),o.adCore.event.emit(Ge.AD_TIME_UPDATE,{adType:o.adInterface.order.adType,adInfo:n,playTime:r})))}},o.handleVideoError=function(t){var e=t.index,i=t.adVideoInfo,n=o.adInterface.order.orders[e];if(i.errorTimes=(i.errorTimes||1)+1,o.adCore.vr.reportPlayError(n,{errorCode:i.errorCode,errorMsg:i.errorMsg,errorTimes:i.errorTimes,adType:o.adInterface.order.adType,index:i.index,orderType:null==n?void 0:n.orderType,materialVid:null==n?void 0:n.material.vid,materialUrl:null==n?void 0:n.material.url,eventTime:Date.now()-o.adInterface.data.createTime,hasReportView:i.hasReportView,playtime:i.playTime,isLoadComplete:o.adInterface.data.isLoadComplete,readyState:i.readyState,networkState:i.networkState}),!o.adInterface.data.isLoadComplete)if(o.errorCount===o.adInterface.order.orders.length&&(o.adInterface.data.errorCode=Wi.LOAD_FREEZE),o.clearAdTimer(i,e),t.canTryBackup)i.backupUrlData?o.postPlayer.playUrl(i):o.postPlayer.tryPlayBackupUrl(i);else if(o.logger.error("广告播放报错: ".concat(st(i))),n){i.viewStartTime&&(i.viewTime=(Date.now()-i.viewStartTime)/1e3),o.adInterface.setState(Zi.ERROR),o.adInterface.data.prevPlayTime=0,o.errorCount+=1,!i.loadCompleteTime&&i.loadStartTime&&(i.loadCompleteTime=Date.now(),i.loadTime=i.loadCompleteTime-i.loadStartTime);var r=i.errorMsg,a=i.readyState,s=i.networkState;if(i.url||(r="MEDIA_ELEMENT_ERROR: Empty src attribute",i.detailErrorCode=Wi.EMPTY_URL),a&&(r+=";readyState:".concat(a)),s&&(r+=";networkState:".concat(s)),o.adCore.event.emit(Ge.AD_PLAY_ERROR,{index:e,errorCode:i.errorCode,detailErrorCode:i.detailErrorCode,errorMsg:r||"",adInfo:n,adType:o.adInterface.order.adType,isAllAdEnd:e===o.adInterface.order.orders.length-1,preload:e!==o.adInterface.data.adIndex}),n.reporter.reportPlay({playType:De.FAIL,failReason:Oe.PLAY}),i.hasReportLoadComplete||(i.hasReportLoadComplete=!0,o.adInterface.loadCompleteHandle(D(D({},o.getLoadCompleteParams(i,n)),{hasError:"1",eventName:"onVideoError"}))),!i.isComputedCountdown){i.isComputedCountdown=!0;var d=n.material.duration-Math.ceil(i.playTime||0),l=o.videoCountdown.countdown-d;if(o.videoCountdown.setCountdown(l),![p.BROADCAST].includes(n.adType)){var c=o.videoCountdown.showCountdown-d;o.videoCountdown.setShowCountdown(c)}}e===o.adInterface.data.adIndex?o.adInterface.data.currentPlayAdType?(o.logger.log("当前视频失败了，当前已经准备好了，直接播放下一个"),o.playNext(o.adInterface.data.adIndex+1,!0)):(o.logger.log("当前视频失败了，但是还没有调用过play，直接预加载下一个."),o.adInterface.data.adIndex<=o.adInterface.order.orders.length-1?(o.adInterface.setAdIndex(o.adInterface.data.adIndex+1),o.preloadNext(e+1,!1)):(o.logger.log("所有都播完了"),o.adEndService.handleAdEnd())):o.preloadNext(e+1,!1)}},o.handleVideoEnded=function(t){o.videoCountdown.stopCountdown();var e=t.index,i=t.adVideoInfo,n=o.adInterface.order.orders[e];n&&(n.reporter.reportPlay({playType:De.END,timeOffset:null==i?void 0:i.duration}),o.logger.log("播放完成: 第 ".concat(e," 个")),o.adCore.vr.reportTechParam("playEnd",{errorTimes:i.errorTimes,adType:o.adInterface.order.adType,index:i.index,orderType:null==n?void 0:n.orderType,playtime:i.playTime,readyState:i.readyState,networkState:i.networkState,endType:"videoEnd"}),o.clearAdTimer(i,e),i.viewStartTime&&(i.viewTime=(Date.now()-i.viewStartTime)/1e3),o.adCore.event.emit(Ge.AD_PLAY_END,{adInfo:n,adType:o.adInterface.order.adType}),o.playNext(o.adInterface.data.adIndex+1),o.adInterface.data.prevPlayTime=0)},o.startAdTimer=function(t,e){void 0===e&&(e=14);var i=t.index,n=t.adVideoInfo;o.logger.log("开始卡顿定时器: ".concat(i));var r=o.adInterface.order.orders[i];r&&(n.loadProgressTimer||(n.loadProgressTimer=new Vr),n.loadProgressTimer.clear(),n.loadProgressTimer.on(1e3*e,(function(){o.logger.log("订单超时: ".concat(i));var t=n.loadedPercent;n.status===qi.PLAYING&&(!n||0!==t&&n.playTime||(o.videoCountdown.setCountdown(o.videoCountdown.countdown+e),n.detailErrorCode=Wi.TIMEOUT)),n.status===qi.BUFFERING&&0===t&&(n.detailErrorCode=Wi.PRELOAD_TIMEOUT),o.adCore.vr.reportPlayError(r,{errorCode:"timeout",adType:o.adInterface.order.adType,index:n.index,orderType:r.orderType,materialVid:r.material.vid,materialUrl:r.material.url,eventTime:Date.now()-o.adInterface.data.createTime}),o.postPlayer.setAdVideoSrcEmpty(i)})))},o.handleAutoplayBlockedAd=function(){var t;o.adCore.event.emit(Ge.AD_AUTOPLAY_BLOCKED,{adType:o.adInterface.order.adType,adInfo:o.adInterface.data.currentAdInfo}),null===(t=o.adInterface.data.videoInfoList)||void 0===t||t.forEach((function(t){o.clearAdTimer(t,t.index)}))},o.handleSetLoading=function(){o.adCore.event.emit(Ge.AD_SET_LOADING,{adType:o.adInterface.order.adType,adInfo:o.adInterface.data.currentAdInfo})},o.postPlayer=o.initPlayer(),o.initVolume(),o.bindVideoAdPlayerEvent(),o}return i(e,t),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.postPlayer.currentTime},enumerable:!1,configurable:!0}),e.prototype.setVolume=function(t){var e=Math.max(0,Math.min(1,t));this.adInterface.data.volume=e;var o=0===this.adInterface.data.volume;this.postPlayer.volume=e,this.adInterface.data.volume!==e&&(o!==this.adInterface.data.isMute&&(this.adInterface.data.isMute=o,this.adInterface.data.isMute?this.mute():this.unMute(),this.videoUI.updateVideoVolumeBtn(this.adInterface.data.isMute)),this.adCore.event.emit(Ge.AD_VOLUME_CHANGE,{volume:t,adType:this.adInterface.order.adType,adInfo:this.adInterface.data.currentAdInfo,orderList:this.adInterface.order.orders}))},e.prototype.mute=function(){this.postPlayer.volume=0;var t=this.adInterface.data,e=t.currentAdInfo;t.hasAdPlayingEmit&&!this.adInterface.data.hasDestroy&&(null==e||e.reporter.reportPlay({playType:De.MUTE}))},e.prototype.unMute=function(){this.postPlayer.volume=this.adInterface.data.volume;var t=this.adInterface.data,e=t.currentAdInfo;t.hasAdPlayingEmit&&!this.adInterface.data.hasDestroy&&(null==e||e.reporter.reportPlay({playType:De.UNMUTE}))},e.prototype.play=function(){this.postPlayer.play()},e.prototype.resume=function(){this.postPlayer.resume()},e.prototype.pause=function(){this.postPlayer.pause(),this.videoCountdown.stopCountdown()},e.prototype.load=function(){this.adCore.event.emit(Ge.AD_PLAYER_SESSION_START,{adType:this.adInterface.adType,vids:this.adInterface.data.urlList.map((function(t){return t.vid}))}),this.postPlayer.load(R([],this.adInterface.data.urlList,!0))},e.prototype.start=function(){this.adViewMonitor||(this.adViewMonitor=new kr(this.videoUI.$domNodes.videoContainer)),this.play()},e.prototype.destroy=function(){var t,e=this,o=this.adInterface.data,i=o.currentVideoInfo,n=o.currentAdInfo;(null==i?void 0:i.playTime)&&(this.videoCountdown.remainingCountdown>0&&(i.index!==this.postPlayer.adVideoInfoList.length-1||i.status!==qi.END)&&(null==n||n.reporter.reportPlay({playType:De.INTERRUPT,timeOffset:i.playTime}),this.adCore.vr.reportTechParam("playEnd",{errorTimes:i.errorTimes,adType:this.adInterface.order.adType,index:i.index,orderType:null==n?void 0:n.orderType,playtime:i.playTime,readyState:i.readyState,networkState:i.networkState,endType:"interrupt"})),this.videoCountdown.remainingCountdown<=0&&i.status!==qi.END&&(null==n||n.reporter.reportPlay({playType:De.END,timeOffset:null==i?void 0:i.duration}),this.adCore.vr.reportTechParam("playEnd",{errorTimes:i.errorTimes,adType:this.adInterface.order.adType,index:i.index,orderType:null==n?void 0:n.orderType,playtime:i.playTime,readyState:i.readyState,networkState:i.networkState,endType:"countdown"}))),this.postPlayer.stop(),this.postPlayer.removeAllListeners(),this.postPlayer.destroy(),this.unbindVideoAdPlayerEvent(),this.adCore.event.emit(Ge.AD_PLAYER_SESSION_END,{adType:this.adInterface.adType,vids:this.adInterface.data.urlList.map((function(t){return t.vid}))}),null===(t=this.adInterface.data.videoInfoList)||void 0===t||t.forEach((function(t){e.clearAdTimer(t,t.index)}))},e.prototype.bindVideoAdPlayerEvent=function(){this.forEachEvent(Yi.bind)},e.prototype.unbindVideoAdPlayerEvent=function(){this.forEachEvent(Yi.unbind)},e.prototype.forEachEvent=function(t){this.postPlayer[t](Fi.LOADSTART,this.handleVideoLoadStart),this.postPlayer[t](Fi.PROGRESS,this.handleVideoProgress),this.postPlayer[t](Fi.CANPLAY,this.handleVideoCanPlay),this.postPlayer[t](Fi.PLAYING,this.handleVideoPlaying),this.postPlayer[t](Fi.PLAY,this.handleVideoResume),this.postPlayer[t](Fi.PAUSE,this.handleVideoPause),this.postPlayer[t](Fi.TIMEUPDATE,this.handleVideoTimeupdate),this.postPlayer[t](Fi.ERROR,this.handleVideoError),this.postPlayer[t](Fi.ENDED,this.handleVideoEnded),this.postPlayer[t](Fi.WATCH_LOAD_PROGRESS,this.startAdTimer),this.postPlayer[t](Fi.AD_AUTOPLAY_BLOCKED,this.handleAutoplayBlockedAd),this.postPlayer[t](Fi.SET_LOADING,this.handleSetLoading)},e.prototype.getLoadCompleteParams=function(t,e){return{adInfo:e,adType:this.adInterface.order.adType,index:t.index,isAllLoaded:t.index===this.adInterface.order.orders.length-1,loadingTime:t.loadTime,errorCode:t.errorCode,detailErrorCode:t.detailErrorCode,hasTryBackupUrls:!!t.backupUrlData,materialDuration:e.material.duration,orderType:e.orderType,materialVid:e.material.vid,materialUrl:e.material.url,materialType:m.VIDEO,adblock:this.adCore.adblock.adBlockEnabled?"1":"0",load_start_time:t.loadStartTime,load_complete_time:t.loadCompleteTime,start_playtime:t.viewStartTime,playtime:t.playTime,hasReportView:t.hasReportView,errorTimes:t.errorTimes}},e.prototype.handleVideoLoadComplete=function(t,e){var o;if(!this.adInterface.data.isLoadComplete&&!t.loadCompleteTime&&(null!==(o=t.loadedPercent)&&void 0!==o?o:0)>.99){var i=t.index;this.logger.log("加载完成第 ".concat(i," 个"));var n=i===this.adInterface.data.adIndex;if(t.loadCompleteTime=Date.now(),t.loadStartTime&&(t.loadTime=t.loadCompleteTime-t.loadStartTime),t.hasReportLoadComplete||(t.hasReportLoadComplete=!0,this.adInterface.loadCompleteHandle(D(D({},this.getLoadCompleteParams(t,e)),{eventName:"onVideoProgress"}))),this.adInterface.data.isLoadComplete=i>=this.adInterface.order.orders.length-1,this.adInterface.data.isLoadComplete)this.logger.log("所有广告加载完成");else{var r=n?this.adInterface.data.adIndex+1:i+1;this.preloadNext(r,n)}}},e.prototype.playNext=function(t,e){void 0===e&&(e=!1),this.logger.log("播放下一个：".concat(t)),this.videoCountdown.stopCountdown(),this.postPlayer.playNext(t,e)?this.adInterface.setAdIndex(this.adInterface.data.adIndex+1):this.adEndService.handleAdEnd()},e.prototype.preloadNext=function(t,e){this.adInterface.order.orders&&0!==this.adInterface.order.orders.length?t>=this.adInterface.order.orders.length?this.adEndService.handleAdEnd():this.postPlayer.preloadNext(t,e)&&this.adInterface.order.orders[t]||this.adEndService.handleAdEnd():this.adEndService.handleAdEnd()},e.prototype.clearAdTimer=function(t,e){var o;t.loadProgressTimer&&(this.logger.log("清除卡顿定时器: ".concat(e)),null===(o=t.loadProgressTimer)||void 0===o||o.clear())},e.prototype.initPlayer=function(){var t;return(null===(t=this.videoUI)||void 0===t?void 0:t.$domNodes.videoAdContainer)?this.adCore.config.createPlayer(this.adCore,this.adInterface.adType,this.videoUI.$domNodes.videoAdContainer):(this.logger.error("'videoAdContainer' dom 节点不存在"),void this.adInterface.stop())},e.prototype.initVolume=function(){var t=this.adCore.config.outerPlayerData.volume;this.adInterface.data.volume=Math.min(1,Math.max(0,void 0===t?1:t)),this.postPlayer.volume=this.adInterface.data.volume,this.adInterface.data.volume?this.unMute():this.mute()},e.prototype.unfoldActiveDetail=function(t,e){var o,i,n=t.data.poster.action_button,r=null===(o=n.picture)||void 0===o?void 0:o.display_interval,a=null===(i=n.qrcode)||void 0===i?void 0:i.display_interval;(t.isPictureActive&&r&&e>=r||t.isScanActive&&a&&e>=a)&&this.videoUI.unfoldActiveDetail()},e}(wr),Br=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.updateVideoUI=function(t){this.videoUI.resetVideoUI(),t&&(this.videoUI.setVideoLayerVisible(!0),this.videoUI.setVideoAdInnerVisible(!0),this.videoUI.setVideoAdControlVisible(!0),this.videoUI.setVideoAdLayerVisible(!0),this.videoUI.setLinkAreaVisible(t.clickable),this.updateTitle(t),this.updateSkipButton(t),this.updateActionButton(t))},e.prototype.updateTitle=function(t){this.videoUI.updateVideoDSP(t.data.poster.title.dsp_name)},e.prototype.updateSkipButton=function(t){if(this.videoUI.updateVideoVolumeBtn(this.adInterface.data.isMute),this.videoUI.setVideoCountdownVisible(this.videoCountdown.remainingShowCountdown>0),p.BROADCAST===t.adType)return this.adCore.config.showCloseButton?void this.videoUI.updateCloseButton({text:this.adInterface.data.skipAdTitle,show:!0}):void this.videoUI.updateCloseButton({show:!1});this.adInterface.data.isTrueView?this.videoUI.updateTrueview({countdown:this.videoCountdown.remainingSkipCountdown,showCloseButton:this.adCore.config.showCloseButton,skipAdTitle:this.adInterface.data.skipAdTitle,skipAdSubTitle:this.adInterface.data.skipAdSubTitle}):this.videoUI.updateCloseButton({text:this.adInterface.data.skipAdTitle,show:this.adCore.config.showCloseButton})},e.prototype.updateActionButton=function(t){var e,o=t.data.poster.action_button;if(o.display_none)this.videoUI.setVideoDetailVisible(!1);else{this.videoUI.setVideoDetailVisible(!0);var i=null!==(e=t.data.poster.action_button.base.action_title.first_title)&&void 0!==e?e:"点击按钮，查看详情",n=t.data.poster.advertiser;if(this.videoUI.updateActionButton({btnText:i,bgColor:o.base.bg_color,textColor:o.base.text_color}),t.isPictureActive)this.videoUI.updateActionPicture(D(D({},n),{btnText:i}));else if(t.isScanActive){var r=t.data.order.ad_action.scan,a=D(D({},n),{btnText:i,qrcodeUrl:null==r?void 0:r.short_link,qrcodeTips:(null==r?void 0:r.qrcode_tips)||"微信扫码查看更多"});this.videoUI.updateActionQrcode(a),this.videoUI.updateCenterQrcode(a);var s=r.url;this.videoUI.setScanCanOpenVisible(t.isActive&&t.isScanActive&&!(!s||-1!==s.indexOf("http://")))}}},e}(wr),Hr=function(t){function e(e){var o=t.call(this,e)||this;if(o.state={showCountdown:0,countdown:0,skipCountdown:0,showSkipCountdown:!1},o.handleCountdownChange=function(t){if(o.adCore.event.emit(Ge.AD_COUNTDOWN_CHANGE,{adType:o.adInterface.adType,countdown:o.state.countdown-t}),t<=o.state.showCountdown)o.updateCountdownUI(t);else{if(t<=o.state.countdown)return o.videoUI.updateVideoCountdown(""),void o.videoUI.setVideoCountdownVisible(!1);if(o.countdownInterval.pause(),o.videoUI.resetVideoUI(),o.videoUI.updateVideoCountdown(""),o.adInterface.order.orders.length>0&&!o.adInterface.data.hasReportVideoEnd){o.logger.log("倒计时结束了");var e=o.adInterface.order.orders.length-1;if(o.adInterface.data.currentAdInfo&&o.playerService.currentTime&&o.adInterface.data.adIndex===e){var i=o.playerService.currentTime/o.adInterface.data.currentAdInfo.material.duration;i>=0&&i<.5&&(o.adInterface.data.errorCode=Wi.LOAD_FREEZE)}o.adInterface.data.adIndex<e&&(o.adInterface.data.errorCode=Wi.LOAD_FREEZE),o.adEndService.handleAdEnd()}}},o.countdownInterval=new hn({onChange:o.handleCountdownChange},o.adCore.logger.createLogger("CountdownInterval")),o.setCountdown(o.adInterface.data.duration),o.setShowCountdown(o.adInterface.data.showCountdown),o.state.showSkipCountdown=o.adInterface.data.isTrueView,o.adInterface.data.isTrueView){var i=o.adInterface.data.duration-o.adInterface.data.trueViewCountDown;o.state.skipCountdown=o.adInterface.data.duration<=i?0:o.adInterface.data.trueViewCountDown}return o}return i(e,t),e.prototype.startCountdown=function(){this.countdownInterval.start()},e.prototype.stopCountdown=function(){this.countdownInterval.pause()},e.prototype.updateCountdownUI=function(t){void 0===t&&(t=this.countdownInterval.time);var e=this.state.showCountdown-t;this.adCore.config.showCloseButton?this.videoUI.updateVideoCountdown("".concat(e)):this.videoUI.updateVideoCountdownHtml('<span style="color:#fff;">广告剩余: </span><span>'.concat(e,'</span><span style="color:#fff;">秒</span>')),this.updateTrueViewUI(t)},e.prototype.updateTrueViewUI=function(t){if(this.state.showSkipCountdown){var e=this.state.skipCountdown-t;this.videoUI.updateTrueview({countdown:e>0?e:0,showCloseButton:this.adCore.config.showCloseButton,skipAdTitle:this.adInterface.data.skipAdTitle,skipAdSubTitle:this.adInterface.data.skipAdSubTitle})}},Object.defineProperty(e.prototype,"countdown",{get:function(){return this.state.countdown},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showCountdown",{get:function(){return this.state.showCountdown},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skipCountdown",{get:function(){return this.state.skipCountdown},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remainingSkipCountdown",{get:function(){return this.state.skipCountdown-this.countdownInterval.time},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remainingCountdown",{get:function(){return this.state.countdown-this.countdownInterval.time},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remainingShowCountdown",{get:function(){return this.state.showCountdown-this.countdownInterval.time},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canSkipClose",{get:function(){return!this.state.showSkipCountdown||this.state.skipCountdown-this.countdownInterval.time<=0},enumerable:!1,configurable:!0}),e.prototype.setShowCountdown=function(t){this.state.showCountdown=Math.floor(t)},e.prototype.setCountdown=function(t){this.state.countdown=Math.floor(t)},e}(wr);fn(".txp-center-code{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background-color:rgba(0,0,0,.3);bottom:0;display:none;justify-content:center;left:0;pointer-events:auto;position:absolute;right:0;top:0}.txp-center-code-content{text-align:center}.txp-center-code-name{color:#fff;font-size:20px;line-height:normal;margin-bottom:12px;overflow:hidden;text-align:center;text-overflow:ellipsis;text-shadow:0 1px 3px rgba(0,0,0,.2);white-space:nowrap}.txp-center-code-card{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background-color:#fff;border-radius:8px;-webkit-box-shadow:0 0 20px 0 rgba(0,0,0,.2);box-shadow:0 0 20px 0 rgba(0,0,0,.2);display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;justify-content:center;padding:20px 16px;position:relative;width:240px}.txp-center-code-qr-tips{color:rgba(0,0,0,.4);font-size:16px;line-height:normal;margin-top:12px}.txp-center-code-qr-icon{border:2px solid #fff;border-radius:4px;height:48px;left:96px;position:absolute;top:96px;width:48px}.txp-center-code-close{cursor:pointer;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;margin-top:12px}.txp-center-code-close:hover path{fill:#fe5c38}.txp-center-code-close-tag{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:rgba(0,0,0,.5);border-radius:4px;cursor:pointer;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;padding:2px 4px 2px 6px;position:absolute;right:-6px;top:0;-webkit-transform:translateX(100%);transform:translateX(100%)}.txp-center-code-close-tag>span{color:#fff;font-size:12px;font-style:normal;font-weight:500;line-height:16px}.txp-center-code-close-tag>svg{height:12px;margin-left:2px;width:12px}.txp-center-code[data-mode=size_480_270],.txp-center-code[data-mode=size_590_328]{display:-webkit-box;display:-ms-flexbox;display:flex}.txp-center-code[data-mode=size_480_270] .txp-center-code-card,.txp-center-code[data-mode=size_590_328] .txp-center-code-card{padding:10px 10px 8px;width:110px}.txp-center-code[data-mode=size_480_270] .txp-center-code-name,.txp-center-code[data-mode=size_590_328] .txp-center-code-name{display:none}.txp-center-code[data-mode=size_480_270] .txp-center-code-qr-tips,.txp-center-code[data-mode=size_590_328] .txp-center-code-qr-tips{font-size:10px;margin-top:4px}.txp-center-code[data-mode=size_480_270] .txp-center-code-close,.txp-center-code[data-mode=size_480_270] .txp-center-code-qr-icon,.txp-center-code[data-mode=size_590_328] .txp-center-code-close,.txp-center-code[data-mode=size_590_328] .txp-center-code-qr-icon{display:none}.txp-center-code[data-mode=size_480_270] .txp-center-code-close-tag,.txp-center-code[data-mode=size_590_328] .txp-center-code-close-tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.txp-center-code[data-mode=size_1110_624]{display:-webkit-box;display:-ms-flexbox;display:flex}.txp-center-code[data-mode=size_1110_624] .txp-center-code-card{padding:12px;width:152px}.txp-center-code[data-mode=size_1110_624] .txp-center-code-name{display:none}.txp-center-code[data-mode=size_1110_624] .txp-center-code-qr-tips{font-size:12px;margin-top:10px}.txp-center-code[data-mode=size_1110_624] .txp-center-code-close,.txp-center-code[data-mode=size_1110_624] .txp-center-code-qr-icon{display:none}.txp-center-code[data-mode=size_1110_624] .txp-center-code-close-tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.txp-center-code[data-mode=size_1920_1080]{display:-webkit-box;display:-ms-flexbox;display:flex}.txp-center-code[data-mode=size_1920_1080] .txp-center-code-close-tag{display:none}.txp-center-code[data-mode=default]{display:-webkit-box;display:-ms-flexbox;display:flex}.txp-center-code[data-mode=default] .txp-center-code-name{margin-bottom:16px}.txp-center-code[data-mode=default] .txp-center-code-card{padding:20px;width:280px}.txp-center-code[data-mode=default] .txp-center-code-qr-tips{font-size:18px}.txp-center-code[data-mode=default] .txp-center-code-qr-icon{height:56px;left:112px;top:112px;width:56px}.txp-center-code[data-mode=default] .txp-center-code-close-tag{display:none}");var zr=((Lr={})[mn.SIZE_480_270]=90,Lr[mn.SIZE_590_328]=90,Lr[mn.SIZE_1110_624]=128,Lr[mn.SIZE_1920_1080]=208,Lr[mn.DEFAULT]=240,Lr),Kr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs={container:e.createRef(),code:e.createRef(),name:e.createRef(),iconUrl:e.createRef(),qrcodeTips:e.createRef()},e.handleClick=function(t){t.stopPropagation()},e.handleClose=function(t){t.stopPropagation(),e.props.onClose()},e}return i(e,t),e.prototype.resize=function(t){var e=wn(t);this.playerMode!==e&&(this.playerMode=e,this.$refs.container.value.setAttribute("data-mode",this.playerMode),this.renderQrCode())},e.prototype.render=function(){var t="txp-center-code";return Pn("div",{ref:this.$refs.container,class:"".concat(t," ").concat(this.props.visible?"":"txp_none"),onClick:this.handleClick},Pn("div",{class:"".concat(t,"-content")},Pn("div",{ref:this.$refs.name,class:"".concat(t,"-name")},this.props.name),Pn("div",{class:"".concat(t,"-card")},Pn("div",{ref:this.$refs.code,class:"".concat(t,"-qr-code")}),Pn("img",{ref:this.$refs.iconUrl,class:"".concat(t,"-qr-icon"),alt:"",src:this.props.iconUrl||""}),Pn("div",{ref:this.$refs.qrcodeTips,class:"".concat(t,"-qr-tips")},this.props.qrcodeTips),Pn("div",{class:"".concat(t,"-close-tag"),onClick:this.handleClose},Pn("span",null,"广告"),Pn("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},Pn("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.46967 8.23008C2.17678 8.52297 2.17678 8.99784 2.46967 9.29074C2.76256 9.58363 3.23744 9.58363 3.53033 9.29074L6.00526 6.81581L8.48021 9.29076C8.7731 9.58365 9.24798 9.58365 9.54087 9.29076C9.83376 8.99787 9.83376 8.52299 9.54087 8.2301L7.06592 5.75515L9.54074 3.28033C9.83363 2.98744 9.83363 2.51256 9.54074 2.21967C9.24784 1.92678 8.77297 1.92678 8.48008 2.21967L6.00526 4.69449L3.53046 2.21969C3.23757 1.9268 2.76269 1.9268 2.4698 2.21969C2.17691 2.51259 2.17691 2.98746 2.4698 3.28035L4.9446 5.75515L2.46967 8.23008Z",fill:"white"})))),Pn("div",{class:"".concat(t,"-close"),onClick:this.handleClose},Pn("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 26 26",fill:"none"},Pn("rect",{width:"26",height:"26",rx:"13",fill:"black","fill-opacity":"0.3"}),Pn("path",{d:"M8.64645 8.64645L8.29289 8.29289L8.29289 8.29289L8.64645 8.64645ZM8.64645 9.35355L8.29289 9.70711L8.29289 9.70711L8.64645 9.35355ZM9.35355 8.64645L9 9L9 9L9.35355 8.64645ZM13 12.2929L12.6464 12.6464L13 13L13.3536 12.6464L13 12.2929ZM16.6464 8.64645L17 9V9L16.6464 8.64645ZM17.3536 8.64645L17.7071 8.29289L17.7071 8.29289L17.3536 8.64645ZM17.3536 9.35355L17.7071 9.70711V9.70711L17.3536 9.35355ZM13.7071 13L13.3536 12.6464L13 13L13.3536 13.3536L13.7071 13ZM17.3536 16.6464L17.7071 16.2929L17.7071 16.2929L17.3536 16.6464ZM17.3536 17.3536L17.7071 17.7071L17.7071 17.7071L17.3536 17.3536ZM16.6464 17.3536L16.2929 17.7071L16.2929 17.7071L16.6464 17.3536ZM13 13.7071L13.3536 13.3536L13 13L12.6464 13.3536L13 13.7071ZM9.35355 17.3536L9.70711 17.7071H9.70711L9.35355 17.3536ZM8.64645 17.3536L8.29289 17.7071L8.29289 17.7071L8.64645 17.3536ZM8.64645 16.6464L8.29289 16.2929L8.29289 16.2929L8.64645 16.6464ZM12.2929 13L12.6464 13.3536L13 13L12.6464 12.6464L12.2929 13ZM8.29289 8.29289C7.90237 8.68342 7.90237 9.31658 8.29289 9.70711L9 9L9 9L8.29289 8.29289ZM9.70711 8.29289C9.31658 7.90237 8.68342 7.90237 8.29289 8.29289L9 9L9 9L9.70711 8.29289ZM13.3536 11.9393L9.70711 8.29289L9 9L12.6464 12.6464L13.3536 11.9393ZM13.3536 12.6464L17 9L16.2929 8.29289L12.6464 11.9393L13.3536 12.6464ZM17 9V9L17.7071 8.29289C17.3166 7.90237 16.6834 7.90237 16.2929 8.29289L17 9ZM17 9V9L17.7071 9.70711C18.0976 9.31658 18.0976 8.68342 17.7071 8.29289L17 9ZM17 9L13.3536 12.6464L14.0607 13.3536L17.7071 9.70711L17 9ZM17.7071 16.2929L14.0607 12.6464L13.3536 13.3536L17 17L17.7071 16.2929ZM17.7071 17.7071C18.0976 17.3166 18.0976 16.6834 17.7071 16.2929L17 17V17L17.7071 17.7071ZM16.2929 17.7071C16.6834 18.0976 17.3166 18.0976 17.7071 17.7071L17 17H17L16.2929 17.7071ZM12.6464 14.0607L16.2929 17.7071L17 17L13.3536 13.3536L12.6464 14.0607ZM12.6464 13.3536L9 17L9.70711 17.7071L13.3536 14.0607L12.6464 13.3536ZM9 17H9L8.29289 17.7071C8.68342 18.0976 9.31658 18.0976 9.70711 17.7071L9 17ZM9 17V17L8.29289 16.2929C7.90237 16.6834 7.90237 17.3166 8.29289 17.7071L9 17ZM9 17L12.6464 13.3536L11.9393 12.6464L8.29289 16.2929L9 17ZM8.29289 9.70711L11.9393 13.3536L12.6464 12.6464L9 9L8.29289 9.70711Z",fill:"white"})))))},e.prototype.getUpdate=function(){var t=this;return{visible:function(e,o){On(t.$refs.container.value,e,o)},name:function(e,o){e!==o&&(t.$refs.name.value.innerText=e||"")},iconUrl:function(e,o){e!==o&&Qt(t.$refs.iconUrl.value,"src",e||"")},qrcodeUrl:function(e,o){e!==o&&t.renderQrCode()},qrcodeTips:function(e,o){e!==o&&(t.$refs.qrcodeTips.value.innerText=e||"")}}},e.prototype.renderQrCode=function(){var t=this.getState("qrcodeUrl");if(t&&this.playerMode){var e=this.getCodeSize(this.playerMode);this.props.renderQrCode(this.$refs.code.value,t,e)}},e.prototype.getCodeSize=function(t){return zr[t]},e}(xn);fn(".game-card{border-radius:8px;cursor:pointer;height:132px;overflow:hidden;position:relative;width:346px}.game-card.can-anim{opacity:0;-webkit-transform:scale(.3);transform:scale(.3);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;-webkit-transition:opacity .5s ease-in-out .3s,-webkit-transform .5s ease-in-out .3s;transition:opacity .5s ease-in-out .3s,-webkit-transform .5s ease-in-out .3s;transition:transform .5s ease-in-out .3s,opacity .5s ease-in-out .3s;transition:transform .5s ease-in-out .3s,opacity .5s ease-in-out .3s,-webkit-transform .5s ease-in-out .3s}.game-card.can-anim.show-anim{opacity:1;-webkit-transform:scale(1);transform:scale(1)}.game-card-main{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:rgba(0,0,0,.8);display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;padding:16px;position:relative;width:100%}.game-card-logo{height:100px;width:100px}.game-card-info{-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:16px}.game-card-title{font-size:18px;font-weight:500;width:142px}.game-card-desc,.game-card-title{color:#fff;font-style:normal;height:18px;line-height:18px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.game-card-desc{font-size:14px;font-weight:400;margin-top:8px;opacity:.6;width:176px}.game-card-btn{-ms-flex-negative:0;-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background:#fe5c38;border-radius:24px;color:#fff;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;flex-shrink:0;font-size:14px;font-style:normal;font-weight:500;height:34px;justify-content:center;line-height:16px;margin-top:14px;padding:9px 16px;text-align:center}.game-card-small-qrcode{background:hsla(0,0%,100%,.1);height:48px;overflow:hidden;padding:2px 2px 6px 6px;position:absolute;right:0;top:0;width:48px}.game-card-small-qrcode,.game-card-small-qrcode svg{border-radius:0 0 0 48px}.game-card-qrcode{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);background:rgba(0,0,0,.8);border-radius:8px;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;left:0;padding:10px;position:absolute;right:0;top:0}.game-card-qrcode-text{-webkit-box-flex:1;color:#fff;-ms-flex:1;flex:1;font-size:18px;font-style:normal;font-weight:500;line-height:18px;overflow:hidden;padding-left:4px;text-overflow:ellipsis;white-space:nowrap}.game-card-qrcode-code,.game-card-qrcode-text{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;justify-content:center}.game-card-qrcode-code{background:#fff;border-radius:4px;height:112px;padding:6px;width:112px}.game-card-bg{-webkit-box-align:center;-ms-flex-align:center;align-items:center;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;left:0;position:absolute;right:0;top:0}.game-card-bg img{width:100%}");var $r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs={container:e.createRef(),qrcodeCard:e.createRef(),logo:e.createRef(),name:e.createRef(),desc:e.createRef(),btn:e.createRef(),code:e.createRef(),codeTip:e.createRef(),bg:e.createRef(),bgImg:e.createRef()},e.isShowQrcode=!1,e.handleMouseEnter=function(){e.isShowQrcode||(e.isShowQrcode=!0,oe(e.$refs.qrcodeCard.value))},e.handleMouseLeave=function(){e.isShowQrcode&&(e.isShowQrcode=!1,ee(e.$refs.qrcodeCard.value))},e.handleClick=function(t){var o;t.stopPropagation();var i=Nn(t.target);null===(o=e.props)||void 0===o||o.onClick(i)},e}return i(e,t),e.prototype.renderQrCode=function(t){var e,o;this.$refs.code.value.innerHTML="",this.$refs.code.value&&t&&(null===(o=null===(e=this.props)||void 0===e?void 0:e.renderQrCode)||void 0===o||o.call(e,this.$refs.code.value,t,100))},e.prototype.show=function(){var t,e=this;(null===(t=this.props)||void 0===t?void 0:t.canAnim)&&setTimeout((function(){Jt(e.$refs.container.value,"show-anim")}),60)},e.prototype.hide=function(){var t;(null===(t=this.props)||void 0===t?void 0:t.canAnim)&&te(this.$refs.container.value,"show-anim")},e.prototype.destroy=function(){this.$refs.container.value.remove()},e.prototype.render=function(){var t,e,o,i,n,r,a,s,d;return Pn("div",{ref:this.$refs.container,class:"game-card ".concat((null===(t=this.props)||void 0===t?void 0:t.canAnim)?"can-anim":""," ").concat((null===(e=this.props)||void 0===e?void 0:e.visible)?"":"txp_none"),onMouseLeave:this.handleMouseLeave,onClick:this.handleClick,"data-acttype":un.AD_DETAIL},(null===(o=this.props)||void 0===o?void 0:o.hasBg)?Pn("div",{ref:this.$refs.bg,class:"game-card-bg"},Pn("img",{ref:this.$refs.bgImg,alt:"bg",src:(null===(i=this.props)||void 0===i?void 0:i.icon_url)||""})):null,Pn("div",{class:"game-card-main"},Pn("img",{ref:this.$refs.logo,class:"game-card-logo",src:(null===(n=this.props)||void 0===n?void 0:n.icon_url)||"",alt:"logo","data-acttype":un.ADVERTISER_LOGO}),Pn("div",{class:"game-card-info"},Pn("div",{class:"game-card-name"},Pn("span",{ref:this.$refs.name,"data-acttype":un.ADVERTISER_NAME},null===(r=this.props)||void 0===r?void 0:r.name)),Pn("div",{class:"game-card-desc"},Pn("span",{ref:this.$refs.desc,"data-acttype":un.AD_TITLE},null===(a=this.props)||void 0===a?void 0:a.desc)),Pn("div",{ref:this.$refs.btn,class:"game-card-btn","data-acttype":un.AD_ACTION_BUTTON},null===(s=this.props)||void 0===s?void 0:s.btnText)),Pn("div",{class:"game-card-small-qrcode",onMouseEnter:this.handleMouseEnter},Pn("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Pn("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.2222 7.55556H7.55556V18.2222H18.2222V7.55556ZM4.88889 4C4.39797 4 4 4.39797 4 4.88889V20.8889C4 21.3798 4.39797 21.7778 4.88889 21.7778H20.8889C21.3798 21.7778 21.7778 21.3798 21.7778 20.8889V4.88889C21.7778 4.39797 21.3798 4 20.8889 4H4.88889ZM11.1111 28.8889H7.55556V32.4444H11.1111V28.8889ZM4.88889 25.3333C4.39797 25.3333 4 25.7313 4 26.2222V35.1111C4 35.602 4.39797 36 4.88889 36H13.7778C14.2687 36 14.6667 35.602 14.6667 35.1111V26.2222C14.6667 25.7313 14.2687 25.3333 13.7778 25.3333H4.88889ZM28.8889 28.8889H32.4444V32.4444H28.8889V28.8889ZM25.3333 26.2222C25.3333 25.7313 25.7313 25.3333 26.2222 25.3333H35.1111C35.602 25.3333 36 25.7313 36 26.2222V35.1111C36 35.602 35.602 36 35.1111 36H26.2222C25.7313 36 25.3333 35.602 25.3333 35.1111V26.2222ZM32.4444 7.55556H28.8889V11.1111H32.4444V7.55556ZM26.2222 4C25.7313 4 25.3333 4.39797 25.3333 4.88889V13.7778C25.3333 14.2687 25.7313 14.6667 26.2222 14.6667H35.1111C35.602 14.6667 36 14.2687 36 13.7778V4.88889C36 4.39797 35.602 4 35.1111 4H26.2222ZM28.8889 18.2222H25.3333V21.7778H28.8889V18.2222ZM18.2222 25.3333H21.7778V28.8889H18.2222V25.3333ZM10.2222 10.2222H15.5556V15.5556H10.2222V10.2222ZM18.2222 32.4444H21.7778V36H18.2222V32.4444ZM36 18.2222H32.4444V21.7778H36V18.2222Z",fill:"white","fill-opacity":"0.5"})))),Pn("div",{ref:this.$refs.qrcodeCard,class:"game-card-qrcode txp_none"},Pn("div",{ref:this.$refs.codeTip,class:"game-card-qrcode-text"},null===(d=this.props)||void 0===d?void 0:d.qrcodeTip),Pn("div",{ref:this.$refs.code,"data-acttype":un.AD_ACTION_BUTTON,class:"game-card-qrcode-code"})))},e.prototype.getUpdate=function(){var t=this;return{visible:function(e,o){e!==o&&(e?te(t.$refs.container.value,"txp_none"):Jt(t.$refs.container.value,"txp_none"))},icon_url:function(e,o){e!==o&&(t.$refs.logo.value.src=e||"",t.$refs.bgImg.value&&(t.$refs.bgImg.value.src=e||""))},name:function(e,o){e!==o&&(t.$refs.name.value.innerText=e||"")},desc:function(e,o){e!==o&&(t.$refs.desc.value.innerText=e||"")},btnText:function(e,o){e!==o&&(t.$refs.btn.value.innerText=e||"")},qrcodeTip:function(e,o){e!==o&&(t.$refs.codeTip.value.innerText=e||"微信扫一扫查看详情")}}},e}(xn);fn(".txp_btn_ad_volume{background:rgba(37,37,37,.7) url(https://ca.gtimg.com/adplugin/js/imgs/mutes.png) no-repeat;border:none;border-radius:14px;cursor:pointer;display:inline-block;height:28px;margin-left:8px;outline:none;-webkit-user-select:initial;-moz-user-select:initial;-ms-user-select:initial;user-select:auto;vertical-align:top;width:28px}.txp_btn_ad_mute{background-position-y:-28px}.txp_cac_black_screen{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-box-pack:center;-ms-flex-pack:center;background-color:#000;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;justify-content:center;left:0;line-height:1.5;position:absolute;text-align:center;top:0;width:100%;z-index:1000}.txp_cac_black_screen .txp_cac_black_screen_title{color:#fff;font-size:16px;margin-bottom:15px;text-align:center}.txp_cac_black_screen .txp_cac_black_screen_em{color:#ff7000;display:inline}.txp_is_mobile .txp_ad_skip{background-color:rgba(0,0,0,.5);border-radius:14px;font-size:13px;height:26px;line-height:28px;overflow:hidden;padding:0 8px;position:absolute;right:12px;top:10px;vertical-align:top;white-space:nowrap}.txp_is_mobile .txp_ad_detail{bottom:8px;right:8px}.txp_is_mobile .txp_ad_detail .txp_ad_more{background-color:rgba(255,112,0,.75);border-radius:15px;font-size:14px;height:30px;padding:0 12px;text-decoration:none}.txp_is_mobile .txp_ad_detail .txp_ad_more txpdiv{line-height:30px}.txp_play_icon{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:10%}.txp_ad_detail,.txp_play_icon{pointer-events:auto;position:absolute}.txp_ad_detail{background-color:transparent;border-radius:8px;bottom:64px;height:34px;left:auto;overflow:hidden;right:10px;top:auto;z-index:10}.txp_ad_detail.txp_ad_active_normal{background-color:rgba(0,0,0,.8);height:124px;-webkit-transition:width .7s ease-in-out .8s,height .7s ease-in-out .8s,background-color 1s ease-in-out .6s;transition:width .7s ease-in-out .8s,height .7s ease-in-out .8s,background-color 1s ease-in-out .6s;width:340px}.txp_ad_detail.txp_ad_active_normal:hover{background-color:#000}.txp_ad_detail.txp_ad_active_normal .active_normal{-webkit-box-orient:vertical;-webkit-box-direction:normal;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;margin:10px;opacity:0}.txp_ad_detail.txp_ad_active_normal .active_normal .txp_ad_active_close{cursor:pointer;height:16px;line-height:8px;position:absolute;right:3px;top:3px;width:16px}.txp_ad_detail.txp_ad_active_normal .active_normal .txp_ad_active_close:hover img.hover{display:block}.txp_ad_detail.txp_ad_active_normal .active_normal .txp_ad_active_close img.hover,.txp_ad_detail.txp_ad_active_normal .active_normal .txp_ad_active_close:hover img.not-hover{display:none}.txp_ad_detail.txp_ad_active_normal .active_normal .content{display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:10px}.txp_ad_detail.txp_ad_active_normal .active_normal .content .txp_ad_active_img{border-radius:4px;height:60px;margin-right:10px;overflow:hidden;width:60px}.txp_ad_detail.txp_ad_active_normal .active_normal .content .txp_ad_active_normal_text{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-box-pack:justify;-ms-flex-pack:justify;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;font-size:14px;height:60px;justify-content:space-between;line-height:18px;width:240px}.txp_ad_detail.txp_ad_active_normal .active_normal .content .txp_ad_active_normal_text .vendor{font-size:12px;opacity:.5}.txp_ad_detail.txp_ad_active_normal .active_normal .txp_ad_more{opacity:1}.txp_ad_detail.txp_ad_active_scan{background-color:rgba(0,0,0,.8);height:207px;-webkit-transition:width .3s ease-in-out,height .3s ease-in-out;transition:width .3s ease-in-out,height .3s ease-in-out;width:162px}.txp_ad_detail.txp_ad_active_scan.has-transition{-webkit-transition:width .7s ease-in-out .8s,height .7s ease-in-out .8s,background-color 1s ease-in-out .6s;transition:width .7s ease-in-out .8s,height .7s ease-in-out .8s,background-color 1s ease-in-out .6s}.txp_ad_detail.txp_ad_active_scan.has-transition .qr-code{opacity:0}.txp_ad_detail.txp_ad_active_scan .active_scan{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:justify;-ms-flex-pack:justify;align-items:center;color:hsla(0,0%,100%,.5);display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;font-size:12px;height:100%;justify-content:space-between;opacity:0;padding-bottom:15px;-webkit-transition:padding-bottom .3s ease-in-out;transition:padding-bottom .3s ease-in-out;width:100%}.txp_ad_detail.txp_ad_active_scan .active_scan .txp_ad_more{-webkit-box-pack:start;-ms-flex-pack:start;background-color:#000;border-radius:0;display:-webkit-box;display:-ms-flexbox;display:flex;height:40px;justify-content:flex-start;line-height:40px;opacity:1;padding:0 9px;-webkit-transition:padding .3s ease-in-out,background .3s ease-in-out;transition:padding .3s ease-in-out,background .3s ease-in-out;width:100%}.txp_ad_detail.txp_ad_active_scan .active_scan .txp_ad_more txpdiv{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;text-align:left}.txp_ad_detail.txp_ad_active_scan .active_scan .txp_ad_more:hover{background-color:#000}.txp_ad_detail.txp_ad_active_scan .active_scan .item-icon{border-radius:2px;height:20px;margin-right:5px;min-width:20px;overflow:hidden;width:20px}.txp_ad_detail.txp_ad_active_scan .active_scan .item-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.txp_ad_detail.txp_ad_active_scan .active_scan .qr-code{background-color:#fff;border-radius:4px;height:110px;padding:4px;-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-transition:-webkit-transform .3s ease-in-out;transition:-webkit-transform .3s ease-in-out;transition:transform .3s ease-in-out;transition:transform .3s ease-in-out,-webkit-transform .3s ease-in-out;width:110px}.txp_ad_detail.txp_ad_active_scan .active_scan .qr-code .code{height:100%;width:100%}.txp_ad_detail.txp_ad_active_scan .txp_ad_more:hover{background-color:#000}.txp_ad_detail.txp_ad_active_game{height:auto}.txp_ad_detail.txp_ad_active_game .txp_none{display:none!important}.txp_ad_detail.can-not-open a{cursor:default}.txp_ad_detail .txp_ad_more{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background-color:#fe5c38;border-radius:16px;bottom:unset;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:14px;height:34px;justify-content:center;left:auto;line-height:34px;opacity:0;padding:0 16px;pointer-events:auto;position:relative;right:unset;text-align:center;top:auto;-webkit-transition:opacity .5s ease-in-out;transition:opacity .5s ease-in-out}.txp_ad_detail .txp_ad_more:hover{background-color:#ff183e}.txp_ad_detail .txp_ad_more img{height:16px;margin-right:8px;width:16px}.txp_ad_detail .active_show{opacity:1!important;-webkit-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out}.txp_ad_control{cursor:default;pointer-events:auto;position:absolute;right:10px;top:10px;z-index:2}.txp_ad_control .txp_ad_skip{border-radius:12px;padding:0 12px}.txp_ad_control .txp_ad_skip .txp_ad_countdown{color:#fe5c38;font-size:12px}.plugin_ctrl--large .txp_ad_detail{bottom:104px}.txp_autohide .txp_ad_detail{bottom:10px}.txp_autohide .txp_ad_more{bottom:unset}.cant-open-toast{background-color:rgba(0,0,0,.9);border-radius:20px;color:#fff;font-size:14px;height:40px;left:50%;line-height:40px;padding:0 20px;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.txp-post-ad:not([data-mode=size_480_270]).txp_ad:hover .txp_ad_active_scan:not(.has-transition){height:219px;width:170px}.txp-post-ad:not([data-mode=size_480_270]).txp_ad:hover .txp_ad_active_scan:not(.has-transition) .active_scan{padding-bottom:8px}.txp-post-ad:not([data-mode=size_480_270]).txp_ad:hover .txp_ad_active_scan:not(.has-transition) .active_scan .txp_ad_more{background:transparent;padding:0 20px}.txp-post-ad:not([data-mode=size_480_270]).txp_ad:hover .txp_ad_active_scan:not(.has-transition) .qr-code{-webkit-transform:scale(1.27);transform:scale(1.27)}.txp-post-ad:not([data-mode=size_480_270]).txp_ad:hover .txp_ad_active_scan:not(.has-transition):hover{height:292px;width:240px}.txp-post-ad:not([data-mode=size_480_270]).txp_ad:hover .txp_ad_active_scan:not(.has-transition):hover .active_scan{padding-bottom:15px}.txp-post-ad:not([data-mode=size_480_270]).txp_ad:hover .txp_ad_active_scan:not(.has-transition):hover .qr-code{-webkit-transform:scale(1.82);transform:scale(1.82)}.txp-post-ad.txp_ad[data-mode=size_480_270] .txp_ad_detail.txp_ad_active_scan{-webkit-transform:scale(.6763);transform:scale(.6763);-webkit-transform-origin:100% 100%;transform-origin:100% 100%}.txp-post-ad.txp_ad[data-mode=size_480_270] .txp_ad_detail.txp_ad_active_normal{-webkit-transform:scale(.5882);transform:scale(.5882);-webkit-transform-origin:100% 100%;transform-origin:100% 100%}.txp-post-ad.txp_ad[data-mode=size_480_270]>.txp_ad_inner>.txp_ad_detail>.txp_ad_more{-webkit-transform:scale(.8235);transform:scale(.8235);-webkit-transform-origin:100% 100%;transform-origin:100% 100%}");var Gr,Yr,Wr,Fr=yn("video"),qr={layer:Fr("layer"),videoContainer:Fr("container"),videoAdInner:Fr("inner"),videoAdContainer:Fr("ad-container"),videoAdControl:Fr("ad-control"),videoCountdown:Fr("countdown"),videoCloseBtn:Fr("close-btn"),videoSkipText:Fr("skip-text"),videoNoSkipBtn:Fr("no-skip-btn"),videoDetail:Fr("detail"),videoDetailBtn:Fr("detail-btn"),videoDetailBtnText:Fr("detail-btn-text"),activeNormalVideoDetail:Fr("active-normal-video-detail"),activeNormalVideoDetailCloseBtn:Fr("active-normal-video-detail-close-btn"),activeNormalVideoDetailItemImg:Fr("active-normal-video-detail-item-img"),activeNormalVideoDetailItemDesc:Fr("active-normal-video-detail-item-desc"),activeNormalVideoDetailItemName:Fr("active-normal-video-detail-item-name"),activeNormalVideoDetailBtn:Fr("active-normal-video-detail-btn"),activeNormalVideoDetailBtnText:Fr("active-normal-video-detail-btn-text"),activeScanVideoDetail:Fr("active-scan-video-detail"),activeScanVideoDetailBtn:Fr("active-scan-video-detail-btn"),activeScanVideoDetailBtnText:Fr("active-scan-video-detail-btn-text"),activeScanVideoDetailBtnImg:Fr("active-scan-video-detail-btn-img"),activeScanVideoDetailQrCode:Fr("active-scan-video-detail-qr-code"),activeScanVideoDetailQrCodeText:Fr("active-scan-video-detail-qr-code-text"),cantOpenToast:Fr("active-cant-open-toast"),activeScanCanOpenArrow:Fr("active-can-open-arrow"),gameDetail:Fr("game-detail"),videoLinkArea:Fr("link-area"),videoVolumeBtn:Fr("volume-btn"),videoNoSkipDialog:Fr("no-skip-dialog"),videoNoSkipAuthor:Fr("no-skip-author"),videoNoSkipKnowBtn:Fr("no-skip-know-btn"),videoNoSkipCloseBtn:Fr("no-skip-close-btn"),videoDspNameText:Fr("dsp-name-text"),videoBlackScreen:Fr("black-screen"),videoBlackScreenCount:Fr("black-screen-count"),centerQrcode:Fr("center-qrcode")};!function(t){t.VIDEO_SKIP_TEXT_CLICK="VIDEO_SKIP_TEXT_CLICK",t.VIDEO_CLOSE_BUTTON_CLICK="VIDEO_CLOSE_BUTTON_CLICK",t.VIDEO_NO_SKIP_CLOSE_BUTTON_CLICK="VIDEO_NO_SKIP_CLOSE_BUTTON_CLICK",t.VIDEO_NO_SKIP_KNOW_BUTTON_CLICK="VIDEO_NO_SKIP_KNOW_BUTTON_CLICK",t.VIDEO_NO_SKIP_BUTTON_CLICK="VIDEO_NO_SKIP_BUTTON_CLICK",t.VIDEO_LINK_AREA_CLICK="VIDEO_LINK_AREA_CLICK",t.VIDEO_DETAIL_BUTTON_CLICK="VIDEO_DETAIL_BUTTON_CLICK",t.VIDEO_VOLUME_BUTTON_CLICK="VIDEO_VOLUME_BUTTON_CLICK",t.VIDEO_PLAY_ICON_CLICK="VIDEO_PLAY_ICON_CLICK",t.ACTIVE_SCAN_DETAIL_BUTTON_CLICK="ACTIVE_SCAN_DETAIL_BUTTON_CLICK",t.CENTER_QRCODE_CLOSE_BUTTON_CLICK="CENTER_QRCODE_CLOSE_BUTTON_CLICK"}(Gr||(Gr={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.WARNER=1]="WARNER",t[t.COPYRIGHT=2]="COPYRIGHT"}(Yr||(Yr={})),function(t){t.NORMAL="Normal",t.SCAN="Scan",t.GAME="Game"}(Wr||(Wr={}));var jr,Qr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleMap=qr,e.activeType=null,e.hasUnfoldActiveDetail=!1,e.handleCtrlBarShow=function(){te(e.$domNodes.videoAdInner,"txp_autohide")},e.handleCtrlBarHide=function(){Jt(e.$domNodes.videoAdInner,"txp_autohide")},e}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.adCore.config.isMobile&&Jt(this.$domNodes.videoContainer,"txp_is_mobile"),Xt(this.$domNodes.layer,{position:"absolute",width:"100%",height:"100%",zIndex:"5",pointerEvents:"none"}),this.bindOwnEvent()},e.prototype.destroy=function(){this.unbindOwnEvent(),t.prototype.destroy.call(this)},e.prototype.on=function(t,e){this.eventEmitter.on(t,e)},e.prototype.off=function(t,e){this.eventEmitter.off(t,e)},e.prototype.updateVideoContainerSize=function(t,e){Xt(this.$domNodes.videoContainer,{width:t,height:e})},e.prototype.setVideoAdInnerVisible=function(t){this.setDomVisible(this.$domNodes.videoAdInner,t)},e.prototype.setVideoAdControlVisible=function(t){this.setDomVisible(this.$domNodes.videoAdControl,t)},e.prototype.setVideoLayerVisible=function(t){this.setDomVisible(this.$domNodes.videoContainer,t),t&&this.resize()},e.prototype.adjustVideoAdControl=function(t){t&&(this.$domNodes.videoAdControl&&Xt(this.$domNodes.videoAdControl,"top",t.top),this.$domNodes.videoDetail&&Xt(this.$domNodes.videoDetail,"bottom",t.bottom))},e.prototype.setVideoAdLayerVisible=function(t){this.setDomVisible(this.$domNodes.videoAdContainer,t),t&&this.resize()},e.prototype.updateVideoDSP=function(t){t?(re(this.$domNodes.videoDspNameText,t),oe(this.$domNodes.videoDspNameText)):(re(this.$domNodes.videoDspNameText,""),ee(this.$domNodes.videoDspNameText))},e.prototype.setLinkAreaVisible=function(t){this.$domNodes.videoLinkArea&&(this.adCore.config.isMobile||Xt(this.$domNodes.videoLinkArea,"cursor",t?"pointer":"auto"))},e.prototype.showVideoForbidSkipAd=function(t){t===Yr.COPYRIGHT?(re(this.$domNodes.videoNoSkipAuthor,"内容方"),re(this.$domNodes.videoSkipText,"应内容方要求，VIP无法免该片广告"),oe(this.$domNodes.videoSkipText),oe(this.$domNodes.videoNoSkipBtn)):t===Yr.WARNER&&(re(this.$domNodes.videoNoSkipAuthor,"版权方（华纳）"),re(this.$domNodes.videoSkipText,"应版权方要求，VIP无法免该片广告"),oe(this.$domNodes.videoSkipText),oe(this.$domNodes.videoNoSkipBtn)),oe(this.$domNodes.videoNoSkipCloseBtn),oe(this.$domNodes.videoNoSkipKnowBtn)},e.prototype.updateCloseButton=function(t){var e=this.$domNodes.videoCloseBtn,o=this.$domNodes.videoSkipText;t.show?(oe(e),oe(o)):(ee(e),ee(o)),void 0!==t.text&&re(o,t.text)},e.prototype.updateActionButton=function(t){t.btnText&&(re(this.$domNodes.videoDetailBtnText,t.btnText),Xt(this.$domNodes.videoDetailBtn,{color:t.textColor,backgroundColor:t.bgColor}))},e.prototype.updateActionPicture=function(t){this.activeType&&this.foldActiveDetail(),this.activeType=Wr.NORMAL,re(this.$domNodes.activeNormalVideoDetailBtnText,t.btnText),Qt(this.$domNodes.activeNormalVideoDetailItemImg,"src",t.icon_url),re(this.$domNodes.activeNormalVideoDetailItemDesc,t.description),re(this.$domNodes.activeNormalVideoDetailItemName,t.name)},e.prototype.updateActionQrcode=function(t){var e=this;if(this.activeType&&this.foldActiveDetail(),[x.CARD_BACKGROUND,x.CARD_NO_BACKGROUND].includes(t.mini_game_ui_type))return this.activeType=Wr.GAME,ee(this.$domNodes.activeScanVideoDetail),this.gameCard||(this.gameCard=new $r({visible:!0,canAnim:!0,icon_url:t.icon_url,name:t.name,desc:t.description,btnText:t.btnText,qrcodeTip:t.qrcodeTips||"微信扫一扫查看详情",hasBg:t.mini_game_ui_type===x.CARD_BACKGROUND,renderQrCode:function(t,o,i){e.renderQrCode(t,o,i)},onClick:function(t){e.emit(Gr.VIDEO_DETAIL_BUTTON_CLICK,{actionType:t})}}),this.gameCard.mount(this.$domNodes.gameDetail)),void(t.qrcodeUrl&&this.gameCard.renderQrCode(Pe(t.qrcodeUrl,{act:"1025"})));this.activeType=Wr.SCAN,re(this.$domNodes.videoDetailBtnText,t.btnText),re(this.$domNodes.activeScanVideoDetailBtnText,t.name),Qt(this.$domNodes.activeScanVideoDetailBtnImg,"src",t.icon_url),re(this.$domNodes.activeScanVideoDetailQrCodeText,t.qrcodeTips),t.qrcodeUrl&&this.renderQrCode(this.$domNodes.activeScanVideoDetailQrCode,Pe(t.qrcodeUrl,{act:"1025"}),102)},e.prototype.updateCenterQrcode=function(t){var e=this;this.centerCode||(this.centerCode=new Kr({visible:!0,onClose:function(){e.emit(Gr.CENTER_QRCODE_CLOSE_BUTTON_CLICK)},renderQrCode:function(t,o,i){e.renderQrCode(t,Pe(o,{act:"1026"}),i)}}),this.centerCode.mount(this.$domNodes.centerQrcode)),this.centerCode.setState({name:t.name,qrcodeUrl:t.qrcodeUrl,qrcodeTips:t.qrcodeTips,iconUrl:t.icon_url}),this.resize()},e.prototype.resize=function(){var t;if(this.$domNodes.videoContainer){var e={width:this.$domNodes.videoContainer.offsetWidth,height:this.$domNodes.videoContainer.offsetHeight};null===(t=this.centerCode)||void 0===t||t.resize(e);var o=wn(e);this.playerMode!==o&&(this.playerMode=o,this.$domNodes.videoContainer.setAttribute("data-mode",this.playerMode))}},e.prototype.setScanCanOpenVisible=function(t){t?(oe(this.$domNodes.activeScanCanOpenArrow),this.setLinkAreaVisible(!0),te(this.$domNodes.videoDetail,"can-not-open")):(ee(this.$domNodes.activeScanCanOpenArrow),this.setLinkAreaVisible(!1),Jt(this.$domNodes.videoDetail,"can-not-open"))},e.prototype.setVideoDetailVisible=function(t){this.setDomVisible(this.$domNodes.videoDetail,t)},e.prototype.updateTrueview=function(t){var e;if(t.showCloseButton||[3,2020].includes(null!==(e=this.adCore.config.playerData.playerChid)&&void 0!==e?e:0)){var o=t.countdown;o>0?(re(this.$domNodes.videoSkipText,t.skipAdTitle.replace("__second__","".concat(o))),oe(this.$domNodes.videoSkipText),ee(this.$domNodes.videoCloseBtn)):(re(this.$domNodes.videoSkipText,t.skipAdSubTitle),oe(this.$domNodes.videoSkipText),oe(this.$domNodes.videoCloseBtn))}else ee(this.$domNodes.videoSkipText)},e.prototype.updateVideoVolumeBtn=function(t){ee(this.$domNodes.videoVolumeBtn),t?Jt(this.$domNodes.videoVolumeBtn,"txp_btn_ad_mute"):te(this.$domNodes.videoVolumeBtn,"txp_btn_ad_mute")},e.prototype.unfoldActiveDetail=function(t){var e=this;if(void 0===t&&(t=this.activeType),t&&!this.hasUnfoldActiveDetail){this.hasUnfoldActiveDetail=!0;var o=this.getActiveDetailConfig(t);Jt(this.$domNodes.videoDetail,"".concat(o.videoDetailClass," has-transition")),this.$domNodes.videoDetailBtn&&(this.$domNodes.videoDetailBtn.className="txp_ad_more"),setTimeout((function(){var i;ee(e.$domNodes.videoDetailBtn),oe(o.videoDetailDom),t===Wr.GAME&&(null===(i=e.gameCard)||void 0===i||i.show())}),500),setTimeout((function(){Jt(o.videoDetailDom,"active_show"),te(e.$domNodes.videoDetail,"has-transition")}),1500)}},e.prototype.foldActiveDetail=function(t){var e;if(void 0===t&&(t=this.activeType),t){this.hasUnfoldActiveDetail=!1;var o=this.getActiveDetailConfig(t);this.$domNodes.videoDetail&&(this.$domNodes.videoDetail.className="txp_ad_detail"),te(this.$domNodes.videoDetail,o.videoDetailClass),ee(o.videoDetailDom),te(o.videoDetailDom,"active_show"),this.$domNodes.videoDetailBtn&&(this.$domNodes.videoDetailBtn.className="txp_ad_more active_show"),t===Wr.GAME&&(null===(e=this.gameCard)||void 0===e||e.hide()),this.activeType=null}},e.prototype.showCantOpenToast=function(){var t=this;oe(this.$domNodes.cantOpenToast),setTimeout((function(){ee(t.$domNodes.cantOpenToast)}),2e3)},e.prototype.setCenterQrcodeVisible=function(t){this.setDomVisible(this.$domNodes.videoDetail,!t),this.setDomVisible(this.$domNodes.centerQrcode,t)},e.prototype.resetVideoUI=function(t){var e=[this.$domNodes.videoCountdown,this.$domNodes.videoCloseBtn,this.$domNodes.videoSkipText,this.$domNodes.videoAdControl,this.$domNodes.videoNoSkipBtn,this.$domNodes.videoNoSkipDialog,this.$domNodes.videoNoSkipKnowBtn,this.$domNodes.videoNoSkipCloseBtn,this.$domNodes.centerQrcode];t&&e.push(this.$domNodes.videoContainer,this.$domNodes.videoAdContainer),e.forEach((function(t){ee(t)})),re(this.$domNodes.videoSkipText,""),re(this.$domNodes.activeScanVideoDetailQrCodeText,"微信扫码查看更多"),this.activeType&&this.foldActiveDetail(),this.gameCard&&(this.gameCard.destroy(),this.gameCard=void 0)},e.prototype.updateVideoCountdown=function(t){ae(this.$domNodes.videoCountdown,t)},e.prototype.updateVideoCountdownHtml=function(t){ae(this.$domNodes.videoCountdown,"".concat(t,"<style>.txp_ad_countdown:after{display:none}</style>"))},e.prototype.setVideoCountdownVisible=function(t){this.setDomVisible(this.$domNodes.videoCountdown,t)},e.prototype.setNoSkipDialogVisible=function(t){this.setDomVisible(this.$domNodes.videoNoSkipDialog,t)},e.prototype.setVideoBlackScreenVisible=function(t){t&&this.setDomVisible(this.$domNodes.videoContainer,!0),this.setDomVisible(this.$domNodes.videoBlackScreen,!0)},e.prototype.updateVideoBlackScreen=function(t){re(this.$domNodes.videoBlackScreenCount,t)},e.prototype.getTemplate=function(){return'\n      <txpdiv data-role="'.concat(this.roleMap.videoContainer,'"class="txp-post-ad txp_ad txp_none" style="width: 100%; height: 100%; background-color: #000;">\n        \x3c!-- 广告 video 标签容器--\x3e\n        <txpdiv\n          data-role="').concat(this.roleMap.videoAdContainer,'"\n          style="width: 100%; height: 100%; position: relative; background-color: #000"\n        ></txpdiv>\n        \x3c!-- 拦截黑屏 --\x3e\n        <txp data-role="').concat(this.roleMap.videoBlackScreen,'" class="txp_cac_black_screen txp_none">\n          <txp class="txp_cac_black_screen_title">\n            广告被拦截插件误伤啦，\n            <txp data-role="').concat(this.roleMap.videoBlackScreenCount,'" class="txp_cac_black_screen_em">1</txp>\n            秒后播放\n          </txp>\n          <txp>关闭拦截插件恢复正常</txp>\n        </txp>\n    \n        \x3c!-- 内部区域 --\x3e\n        <txpdiv data-role="').concat(this.roleMap.videoAdInner,'" class="txp_ad_inner txp_none">\n          \x3c!-- 广告点击区域 --\x3e\n          <a data-role="').concat(this.roleMap.videoLinkArea,'" href="javascript:;" class="txp_creative_link"></a>\n    \n          \x3c!-- 不能打开落地页toast提示 --\x3e\n          <txpdiv data-role="').concat(this.roleMap.cantOpenToast,'" class="cant-open-toast txp_none">暂不支持打开，请用微信扫码浏览</txpdiv>\n    \n        \x3c!-- 居中展示的二维码 --\x3e\n        <txpdiv data-role="').concat(this.roleMap.centerQrcode,'" class="txp_none center-qrcode">\n       \n        </txpdiv>\n    \n        \x3c!-- 详情点击 --\x3e\n        <txpdiv data-role="').concat(this.roleMap.videoDetail,'" class="txp_ad_detail">\n          \x3c!-- 竞价内容 --\x3e\n          \x3c!-- 普通竞价 --\x3e\n          <txpdiv data-role="').concat(this.roleMap.activeNormalVideoDetail,'" class="active_normal txp_none">\n            \x3c!-- 关闭按钮 --\x3e\n            <txpdiv data-role="').concat(this.roleMap.activeNormalVideoDetailCloseBtn,'" class="txp_ad_active_close">\n              <img\n                class="not-hover"\n                src="').concat(En,'"\n                alt=""\n              />\n              <img\n                class="hover"\n                src="').concat(Cn,'"\n                alt=""\n              />\n            </txpdiv>\n            <txpdiv class="content">\n              \x3c!-- 图片 --\x3e\n              <txpdiv class="txp_ad_active_img"><img data-role="').concat(this.roleMap.activeNormalVideoDetailItemImg,'" /></txpdiv>\n              \x3c!-- 文本 --\x3e\n              <txpdiv class="txp_ad_active_normal_text">\n                \x3c!-- 描述 --\x3e\n                <txpdiv class="desc" data-role="').concat(this.roleMap.activeNormalVideoDetailItemDesc,'"></txpdiv>\n                \x3c!-- 厂商 --\x3e\n                <txpdiv class="vendor">\n                  <span data-role="').concat(this.roleMap.activeNormalVideoDetailItemName,'"></span>\n                </txpdiv>\n              </txpdiv>\n            </txpdiv>\n            <a data-role="').concat(this.roleMap.activeNormalVideoDetailBtn,'" class="txp_ad_more" href="javascript:;">\n              <img\n                src="').concat(gn,'"\n                alt=""\n              />\n              <txpdiv data-role="').concat(this.roleMap.activeNormalVideoDetailBtnText,'"></txpdiv>\n            </a>\n          </txpdiv>\n          \x3c!-- 扫码竞价 --\x3e\n          <txpdiv data-role="').concat(this.roleMap.activeScanVideoDetail,'" class="active_scan txp_none">\n            \x3c!-- 跳转按钮 --\x3e\n            <a data-role="').concat(this.roleMap.activeScanVideoDetailBtn,'" class="txp_ad_more" href="javascript:;">\n              <img data-role="').concat(this.roleMap.activeScanVideoDetailBtnImg,'" class="item-icon" alt="" />\n              <txpdiv data-role="').concat(this.roleMap.activeScanVideoDetailBtnText,'" class="item-text"></txpdiv>\n              <img\n                data-role="').concat(this.roleMap.activeScanCanOpenArrow,'"\n                src="').concat(An,'"\n                style="margin: 0"\n                alt=""\n              />\n            </a>\n            \x3c!-- 二维码 --\x3e\n            <txpdiv class="qr-code"><txpdiv data-role="').concat(this.roleMap.activeScanVideoDetailQrCode,'" class="code"></txpdiv></txpdiv>\n            <txpdiv class="text" data-role="').concat(this.roleMap.activeScanVideoDetailQrCodeText,'">微信扫码查看更多</txpdiv>\n          </txpdiv>\n          \x3c!-- 小游戏样式 --\x3e\n          <div data-role="').concat(this.roleMap.gameDetail,'" class="game_detail txp_none">\n          </div>\n          \x3c!-- 单按钮 --\x3e\n          <a data-role="').concat(this.roleMap.videoDetailBtn,'" class="txp_ad_more active_show" href="javascript:;">\n            <img\n              src="').concat(gn,'"\n              alt=""\n            />\n            <txpdiv data-role="').concat(this.roleMap.videoDetailBtnText,'"></txpdiv>\n          </a>\n        </txpdiv>\n    \n          \x3c!-- 底部介绍 --\x3e\n          <txpdiv\n            data-role="').concat(this.roleMap.videoDspNameText,'"\n            style="\n              left: 10px;\n              bottom: 10px;\n              position: absolute;\n              opacity: 0.6;\n              font-size: 12px;\n              text-shadow: 2px 2px #000;\n            "\n          ></txpdiv>\n    \n          \x3c!-- 无法跳过广告按钮 --\x3e\n          <txpdiv class="txp_ad_control" data-role="').concat(this.roleMap.videoAdControl,'">\n            <txpdiv class="txp_ad_skip">\n              \x3c!-- 倒计时 --\x3e\n              <txpdiv data-role="').concat(this.roleMap.videoCountdown,'" class="txp_ad_countdown"></txpdiv>\n    \n              \x3c!-- 跳过广告文案或者进入广告文案 --\x3e\n              <txpdiv\n                data-role="').concat(this.roleMap.videoSkipText,'"\n                class="txp_ad_skip_text"\n                style="cursor: pointer"\n              ></txpdiv>\n    \n              \x3c!-- 关闭广告按钮 --\x3e\n              <button data-role="').concat(this.roleMap.videoCloseBtn,'" class="txp_btn txp_btn_close"></button>\n    \n              \x3c!-- 无法免广告说明 --\x3e\n              <button\n                data-role="').concat(this.roleMap.videoNoSkipBtn,'"\n                class="txp_btn txp_btn_hint"\n                title="无法跳过广告说明"\n              ></button>\n            </txpdiv>\n            <button\n              data-role="').concat(this.roleMap.videoVolumeBtn,'"\n              class="txp_btn txp_btn_ad_volume txp_none"\n              style="z-index: 10; position: relative"\n            ></button>\n          </txpdiv>\n    \n          \x3c!-- 无法免广告弹窗说明 --\x3e\n          <txpdiv data-role="').concat(this.roleMap.videoNoSkipDialog,'" class="txp_ad_dialog txp_none">\n            <txpdiv class="txp_dialog_bd"> 无法关闭广告……继续争取广告权益…… </txpdiv>\n            <txpdiv data-role="').concat(this.roleMap.videoNoSkipKnowBtn,'" class="txp_ad_btn">我知道了!</txpdiv>\n            <a class="txp_ad_fb" target="_blank" href="http://support.qq.com/write.shtml?fid=850">\n              意见反馈\n            </a>\n            <button data-role="').concat(this.roleMap.videoNoSkipCloseBtn,'" class="txp_btn txp_btn_close"></button>\n          </txpdiv>\n        </txpdiv>\n      </txpdiv>\n    ')},e.prototype.getDomEvents=function(){var t=this;return[this.forwardDomEvent(this.$domNodes.videoSkipText,Gr.VIDEO_SKIP_TEXT_CLICK),this.forwardDomEvent(this.$domNodes.videoCloseBtn,Gr.VIDEO_CLOSE_BUTTON_CLICK),this.forwardDomEvent(this.$domNodes.videoNoSkipBtn,Gr.VIDEO_NO_SKIP_BUTTON_CLICK),this.forwardDomEvent(this.$domNodes.videoNoSkipCloseBtn,Gr.VIDEO_NO_SKIP_CLOSE_BUTTON_CLICK),this.forwardDomEvent(this.$domNodes.videoNoSkipKnowBtn,Gr.VIDEO_NO_SKIP_KNOW_BUTTON_CLICK),{el:this.$domNodes.videoLinkArea,eventName:vn.CLICK,listener:function(e){t.emit(Gr.VIDEO_LINK_AREA_CLICK,{target:e.target,actionType:un.AD_VIEW_AREA})}},this.forwardActionTypeDomEvent(this.$domNodes.videoDetailBtn,un.AD_ACTION_BUTTON,!0),this.forwardActionTypeDomEvent(this.$domNodes.activeNormalVideoDetailBtn,un.AD_ACTION_BUTTON,!0),this.forwardActionTypeDomEvent(this.$domNodes.activeScanVideoDetailBtn,un.ADVERTISER_NAME,!0),this.forwardActionTypeDomEvent(this.$domNodes.activeScanVideoDetailBtnImg,un.ADVERTISER_LOGO,!0),this.forwardActionTypeDomEvent(this.$domNodes.activeNormalVideoDetailItemName,un.ADVERTISER_NAME,!0),this.forwardActionTypeDomEvent(this.$domNodes.activeNormalVideoDetailItemImg,un.ADVERTISER_LOGO,!0),this.forwardActionTypeDomEvent(this.$domNodes.activeNormalVideoDetailItemDesc,un.AD_TITLE,!0),this.forwardActionTypeDomEvent(this.$domNodes.activeNormalVideoDetail,un.AD_DETAIL,!0),this.forwardActionTypeDomEvent(this.$domNodes.videoDetail,un.AD_DETAIL),this.forwardDomEvent(this.$domNodes.videoVolumeBtn,Gr.VIDEO_VOLUME_BUTTON_CLICK),this.forwardDomEvent(this.$domNodes.activeScanVideoDetail,Gr.ACTIVE_SCAN_DETAIL_BUTTON_CLICK),{el:this.$domNodes.activeNormalVideoDetailCloseBtn,eventName:vn.CLICK,listener:function(e){e.stopPropagation(),t.foldActiveDetail()}},this.forwardActionTypeDomEvent(this.$domNodes.activeScanVideoDetailQrCode,un.AD_ACTION_BUTTON,!0)]},e.prototype.forwardActionTypeDomEvent=function(t,e,o){var i=this;return{el:t,eventName:vn.CLICK,listener:function(t){o&&t.stopPropagation(),i.emit(Gr.VIDEO_DETAIL_BUTTON_CLICK,{target:t.target,actionType:e})}}},e.prototype.renderQrCode=function(t,e,o){return this.adCore.config.renderQrCode(t,e,o)},e.prototype.getActiveDetailConfig=function(t){return t===Wr.SCAN?{videoDetailClass:"txp_ad_active_scan",videoDetailDom:this.$domNodes.activeScanVideoDetail}:t===Wr.GAME?{videoDetailClass:"txp_ad_active_game",videoDetailDom:this.$domNodes.gameDetail}:{videoDetailClass:"txp_ad_active_normal",videoDetailDom:this.$domNodes.activeNormalVideoDetail}},e.prototype.bindOwnEvent=function(){this.adCore.outerEvent.on(ki.CTRL_SHOW,this.handleCtrlBarShow),this.adCore.outerEvent.on(ki.CTRL_HIDE,this.handleCtrlBarHide)},e.prototype.unbindOwnEvent=function(){this.adCore.outerEvent.off(ki.CTRL_SHOW,this.handleCtrlBarShow),this.adCore.outerEvent.off(ki.CTRL_HIDE,this.handleCtrlBarHide)},e}(In),Zr=function(t){function e(e){var o=t.call(this,e)||this;return o.handleVideoSkipTextClick=function(){var t;o.videoCountdown.canSkipClose&&(o.handleClose(),pe(M.FEEDBACK,null===(t=o.adInterface.data.currentAdInfo)||void 0===t?void 0:t.frequencyControlConfig))},o.handleVideoCloseButtonClick=function(){var t;o.handleClose(),pe(M.FEEDBACK,null===(t=o.adInterface.data.currentAdInfo)||void 0===t?void 0:t.frequencyControlConfig)},o.handleVideoLinkAreaClick=function(t){var e=t.actionType,i=o.adInterface.data.currentAdInfo;(null==i?void 0:i.isFullscreenClick)&&o.handleDetail(e)},o.handleVideoDetailButtonClick=function(t){var e=t.actionType;o.handleDetail(e)},o.handleVideoNoSkipButtonClick=function(){o.handleToggleNoSkipDialog(!0)},o.handleVideoNoSkipKnowButtonClick=function(){o.handleToggleNoSkipDialog(!1)},o.handleVideoNoSkipCloseButtonClick=function(){o.handleToggleNoSkipDialog(!1)},o.handleVideoVolumeButtonClick=function(){var t;o.adInterface.data.isMute=!o.adInterface.data.isMute,o.adInterface.data.isMute?o.playerService.setVolume(0):o.playerService.setVolume(Math.min(100,Math.max(0,null!==(t=o.adCore.config.outerPlayerData.volume)&&void 0!==t?t:1))),o.videoUI.updateVideoVolumeBtn(o.adInterface.data.isMute)},o.handleVideoPlayIconClick=function(){o.adInterface.resume()},o.handleActiveScanDetailButtonClick=function(){},o.handleCenterQrcodeButtonClick=function(){o.adInterface.resume()},o}return i(e,t),e.prototype.destroy=function(){this.unbindVideoUIEvent()},e.prototype.unbindVideoUIEvent=function(){this.forEachEvent(Yi.unbind)},e.prototype.bindVideoUIEvent=function(){this.forEachEvent(Yi.bind)},e.prototype.forEachEvent=function(t){this.videoUI[t](Gr.VIDEO_SKIP_TEXT_CLICK,this.handleVideoSkipTextClick),this.videoUI[t](Gr.VIDEO_CLOSE_BUTTON_CLICK,this.handleVideoCloseButtonClick),this.videoUI[t](Gr.VIDEO_LINK_AREA_CLICK,this.handleVideoLinkAreaClick),this.videoUI[t](Gr.VIDEO_DETAIL_BUTTON_CLICK,this.handleVideoDetailButtonClick),this.videoUI[t](Gr.VIDEO_NO_SKIP_BUTTON_CLICK,this.handleVideoNoSkipButtonClick),this.videoUI[t](Gr.VIDEO_NO_SKIP_KNOW_BUTTON_CLICK,this.handleVideoNoSkipKnowButtonClick),this.videoUI[t](Gr.VIDEO_NO_SKIP_CLOSE_BUTTON_CLICK,this.handleVideoNoSkipCloseButtonClick),this.videoUI[t](Gr.VIDEO_VOLUME_BUTTON_CLICK,this.handleVideoVolumeButtonClick),this.videoUI[t](Gr.VIDEO_PLAY_ICON_CLICK,this.handleVideoPlayIconClick),this.videoUI[t](Gr.ACTIVE_SCAN_DETAIL_BUTTON_CLICK,this.handleActiveScanDetailButtonClick),this.videoUI[t](Gr.CENTER_QRCODE_CLOSE_BUTTON_CLICK,this.handleCenterQrcodeButtonClick)},e.prototype.handleClose=function(){if(this.adInterface.data.canClickToStopAd){var t=this.adInterface.data,e=t.currentVideoInfo,o=t.currentAdInfo;return(null==e?void 0:e.viewStartTime)&&(e.viewTime=(Date.now()-e.viewStartTime)/1e3),this.adInterface.data.userCloseOrderId=null==o?void 0:o.orderId,this.logger.log("用户点击了关闭"),void this.adEndService.handleAdEnd()}this.adCore.config.showCloseButton&&(this.adInterface.pause(),this.adInterface.data.pauseWhenVipPanelShow=!0,this.adCore.config.showOpenVIPGuide())},e.prototype.handleDetail=function(t){var e;void 0===t&&(t=un.AD_DETAIL);var o=this.adInterface.data.currentAdInfo;o&&(!o.isScanActive||o.enableClick&&!(null===(e=o.miniProgramData)||void 0===e?void 0:e.url_scheme)?this.adInterface.resume():(this.adInterface.pause(),this.videoUI.setCenterQrcodeVisible(!0),o.reporter.reportEffects()),this.adInterface.doClickAction(o,{actionType:t,playTime:this.playerService.currentTime,order_type:o.orderType}))},e.prototype.handleToggleNoSkipDialog=function(t){t?this.adInterface.pause():this.adInterface.resume(),this.videoUI.setNoSkipDialogVisible(t)},e}(wr),Xr=function(t){function e(e){var o=t.call(this,e)||this;return o.logger=o.adCore.logger.createLogger("PostAd"),o.videoUI=new Qr({adCore:o.adCore,container:o.config.createLayer(o.adType)}),o.videoUI.init(),o.playerService=new Ur(o),o.blockScreen=new Rr(o),o.adEndService=new Sr(o),o.updateUIService=new Br(o),o.videoUIEventService=new Zr(o),o.browserEventService=new Mr(o),o.parseOrder(),o.videoCountdown=new Hr(o),o.videoUIEventService.bindVideoUIEvent(),o}return i(e,t),e.prototype.load=function(){this.logger.log("调用 load"),this.state!==Zi.WAIT_FOR_STOP?(this.setState(Zi.LOADING),this.data.isEmpty||this.playerService.load()):this.logger.log("调用 load 方法, ".concat(Zi.WAIT_FOR_STOP," 状态的广告不需要执行 load"))},e.prototype.play=function(){if(this.logger.log("调用 play, isEmpty: ".concat(this.data.isEmpty)),this.data.isEmpty)this.adEndService.handleAdEnd();else{if(this.data.currentPlayAdType=this.order.adType,[p.TAIL].includes(this.order.adType)&&this.state===Zi.WAIT_FOR_STOP)return t.prototype.pause.call(this),void this.adEndService.handleAdEnd();if(this.state!==Zi.PLAYING){if(this.logger.log("调用 play: state: ".concat(this.state,"  pauseWhenVipPanelShow: ").concat(this.data.pauseWhenVipPanelShow)),this.state===Zi.PAUSED||this.data.pauseWhenVipPanelShow)return this.data.pauseWhenVipPanelShow=!1,void this.resume();this.playerService.start()}}},e.prototype.resume=function(){this.logger.log("调用 resume"),t.prototype.resume.call(this),this.data.currentAdInfo&&(this.playerService.resume(),this.videoCountdown.startCountdown())},e.prototype.pause=function(){(this.logger.log("调用 pause"),this.state!==Zi.PAUSED)&&(t.prototype.pause.call(this),this.data.currentAdInfo&&(this.playerService.pause(),this.videoCountdown.stopCountdown()))},e.prototype.mute=function(){this.logger.log("调用 mute"),this.playerService.mute()},e.prototype.unMute=function(){this.logger.log("调用 unMute"),this.playerService.unMute()},e.prototype.stop=function(t){this.logger.log("调用 stop"),this.blockScreen&&this.blockScreen.reset(),this.adEndService.handleAdEnd(t)},e.prototype.resize=function(t){this.logger.log("调用 resize , ".concat(st(t))),this.videoUI.resize()},e.prototype.adjustUI=function(t){if(this.logger.log("调用 adjustUI, ".concat(st(t))),t){var e="".concat(t.top||10,"px"),o="".concat(t.bottom||10,"px");this.videoUI.adjustVideoAdControl({top:e,bottom:o})}},e.prototype.setVolume=function(t){this.playerService.setVolume(t)},e.prototype.report=function(){this.logger.log("调用 report"),this.data.currentAdInfo&&this.doExposure(this.data.currentAdInfo)},e.prototype.reset=function(){var t;null===(t=this.data.videoInfoList)||void 0===t||t.forEach((function(t){var e;null===(e=t.loadProgressTimer)||void 0===e||e.clear()}))},e.prototype.destroy=function(){this.logger.log("调用 destroy"),this.data.hasDestroy||(this.pause(),this.videoUI.resetVideoUI(!0),this.playerService.destroy(),this.browserEventService.destroy(),this.reset(),this.videoUIEventService.destroy(),this.videoUI.destroy(),this.setState(Zi.END),t.prototype.destroy.call(this))},e.prototype.setAdIndex=function(t){this.data.adIndex=t,this.adInfo=this.order.orders[t]},e.prototype.getVideoInfoByOrderId=function(t){var e;return null===(e=this.playerService)||void 0===e?void 0:e.postPlayer.adVideoInfoList.find((function(e){return e.orderId===t}))},e.prototype.setRfid=function(t){this.data.refresh_id=t},e.prototype.initData=function(){return new Or(this)},e.prototype.getVrExtraData=function(){var t={sum:this.order.orders.length};return this.order.orders.forEach((function(e){t[e.orderType]||(t[e.orderType]=0),t[e.orderType]+=1})),{order_types:t}},e.prototype.parseOrder=function(){var t=this;this.order.empty.forEach((function(e){t.logger.log("上报空单，index: ".concat(e.orderIdx)),e.reporter.reportExposure()})),this.data.duration=this.order.orders.reduce((function(t,e){return t+e.material.duration}),0),this.data.showCountdown=this.order.orders.reduce((function(t,e){return p.BROADCAST===e.adType?t:t+e.material.duration}),0),0!==this.order.orders.length?(this.logger.log("一共有[".concat(this.order.orders.length,"]个非空订单，总时长: ").concat(this.data.duration," s")),this.data.urlList=this.order.orders.map((function(t,e){var o=t.material,i=t.orderId,n=Te("fmt",o.url)||_.SHD;return{fmt:n,orderId:i,uid:"".concat(n,"-").concat(o.vid,"-").concat(e),vid:o.vid,url:o.enable_crt_cached?Ve(o.vid,o.url,t.adType):o.url,fileSize:o.file_size,duration:o.duration}}))):this.logger.log("整体空订单")},e}(nn),Jr=yn("enter-countdown"),ta={layer:Jr("layer"),container:Jr("container"),countdownNum:Jr("num")},ea=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleMap=ta,e}return i(e,t),e.prototype.updateCountdown=function(t){re(this.$domNodes.countdownNum,t),this.setDomVisible(this.$domNodes.container,!0)},e.prototype.reset=function(){re(this.$domNodes.countdownNum,""),this.setDomVisible(this.$domNodes.container,!1)},e.prototype.getTemplate=function(){return'\n      <txpdiv class="txp_ad_control txp_none" data-role="'.concat(this.roleMap.container,'">\n        <txpdiv class="txp_ad_skip">\n          <txpdiv class="txp_ad_countdown" data-role="').concat(this.roleMap.countdownNum,'"></txpdiv>\n          <txpdiv class="txp_ad_skip_text">进入广告</txpdiv>\n        </txpdiv>\n      </txpdiv>\n    ')},e}(In),oa=function(t){function e(e){var o=t.call(this,e)||this;return o.countdown=10,o.handleCountdownChange=function(t){var e=o.countdown-t;e>=0?o.enterCountdownUI.updateCountdown("".concat(e)):(o.countdownInterval.pause(),o.enterCountdownUI.reset(),o.adCore.event.emit(Ge.AD_ENTER_COUNTDOWN_COMPLETE,{adType:o.adType}))},o.enterCountdownUI=new ea({adCore:o.adCore,container:o.config.createLayer(o.adType)}),o.enterCountdownUI.init(),o.countdownInterval=new hn({onChange:o.handleCountdownChange},o.logger),o}return i(e,t),e.prototype.pauseCountdown=function(){this.countdownInterval.pause()},e.prototype.resumeCountdown=function(){this.countdownInterval.time<=this.countdown&&this.countdownInterval.start()},e.prototype.stop=function(){this.enterCountdownUI.reset(),this.countdownInterval.clear(),t.prototype.stop.call(this)},e.prototype.destroy=function(){this.enterCountdownUI.destroy(),t.prototype.destroy.call(this)},e.prototype.startEnterCountdown=function(){this.adCore.event.emit(Ge.AD_ENTER_COUNTDOWN,{adType:this.adType}),this.countdownInterval.start()},e}(Xr),ia=function(t){return function(e,o){return new oa({adCore:e,order:o,config:t})}};!function(t){t.CONTRACT="Contract",t.ACTIVE_PICTURE="ActivePicture",t.ACTIVE_SCAN_JUMP="ActiveScanJump",t.ACTIVE_SCAN="ActiveScan"}(jr||(jr={}));var na=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"material",{get:function(){var t=G(this.data.material);return t||{duration:0,url:"",vid:"",file_size:0,is_transparent:!1,enable_crt_cached:!1,width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFullscreenClick",{get:function(){return!!this.data.poster.enable_fullscreen_click},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return[v.PICTURE,v.QRCODE].includes(this.data.poster.action_button.action_type)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPictureActive",{get:function(){return this.data.poster.action_button.action_type===v.PICTURE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isScanActive",{get:function(){return this.data.poster.action_button.action_type===v.QRCODE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableClick",{get:function(){var t;return!0===(null===(t=this.data.order.ad_action.scan)||void 0===t?void 0:t.enable_click)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"orderType",{get:function(){return this.isActive?this.isScanActive?this.enableClick?jr.ACTIVE_SCAN_JUMP:jr.ACTIVE_SCAN:jr.ACTIVE_PICTURE:jr.CONTRACT},enumerable:!1,configurable:!0}),e}(Be);function ra(t,e,o){return Ie(o).map((function(o,i){return new na({data:o,orderIdx:i,adCore:t,auth:null==e?void 0:e.auth,extraInfo:null==e?void 0:e.extra_info})}))}var aa,sa=function(t,e){return e.ad_scene===s.PRE?function(t,e){var o,i={};return null===(o=e.ads)||void 0===o||o.forEach((function(t){t.ad_type===p.DYNAMIC_MID&&t.dynamic&&(i.extraData=[{adType:p.DYNAMIC_MID,data:D({},t.dynamic)}])})),i}(0,e):e.ad_scene===s.ANCHOR?function(t,e){var o,i={},n=[];return null===(o=e.anchor_ads)||void 0===o||o.forEach((function(o){if(o.ad_type===p.MID)if(o.point){var i=ze(o);o.mid.length>0?n.push({adType:o.ad_type,auth:e.auth,empty:Ke(t,e,o.empty),orders:o.mid.map((function(o,n){return new na({data:o,orderIdx:n,adCore:t,point:i,auth:e.auth,extraInfo:e.extra_info})})),point:i,pointStatus:en.INIT}):0===o.mid.length&&[E.FIX_REALTIME,E.DYNAMIC].includes(o.point.mid_type)&&n.push({adType:o.ad_type,auth:e.auth,empty:[],orders:[],point:i,pointStatus:en.INIT})}else $e(t,e,o.empty)})),n.length>0&&(i.pointAdData=n),i}(t,e):e.ad_scene===s.DYNAMIC_MID?function(t,e){var o,i={},n=[];return null===(o=e.ads)||void 0===o||o.forEach((function(o){var r,a;o.ad_type===p.DYNAMIC_MID&&(((null===(r=o.mid)||void 0===r?void 0:r.length)||(null===(a=o.empty)||void 0===a?void 0:a.length))&&n.push({adType:p.MID,auth:e.auth,empty:Ke(t,e,o.empty),orders:ra(t,e,o.mid)}),o.dynamic&&(i.extraData=[{adType:p.DYNAMIC_MID,data:D({},o.dynamic)}]))})),n.length>0&&(i.adData=n),i}(t,e):void 0};!function(t){t[t.INIT=0]="INIT",t[t.REQUEST=1]="REQUEST",t[t.LOADING=2]="LOADING",t[t.PLAYING=3]="PLAYING"}(aa||(aa={}));var da=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.countdownInterval=null,e.dynamicMidStatus=aa.INIT,e.checkDynamicMid=function(t){return w(e,void 0,void 0,(function(){var e,o,i,n,r,a,s=this;return S(this,(function(d){switch(d.label){case 0:return e=1e3*t,o=this.dynamicInfo.next_request_interval,this.dynamicMidStatus!==aa.INIT?[3,3]:e>=o-15e3?(this.dynamicMidStatus=aa.REQUEST,this.adCore.vr.reportRequestDynamicMiddle(),[4,this.requestDynamicMid()]):[3,2];case 1:d.sent(),d.label=2;case 2:return[2];case 3:return this.dynamicMidStatus===aa.REQUEST?(this.loadDynamicMid(),[2]):(this.dynamicMidStatus===aa.LOADING&&(i=1e3*this.adCore.config.outerPlayerData.playtime,n=Math.max(o-e,0),this.adCore.order.checkPointConflict(i+n,Date.now()+n,this.conflictInterval).forEach((function(t){if(!(t.adType===p.MID||t.adType===p.CORNER&&t.point.is_whole_scene)){var e=t.point.end+s.conflictInterval-(t.point.type===y.TIMESTAMP?Date.now():i);e>n&&(n=e)}})),r=this.getAd(),n<=1e4&&(null==r?void 0:r.data.canPlay)&&(null==r||r.startEnterCountdown(),null===(a=this.countdownInterval)||void 0===a||a.clear(),this.dynamicMidStatus=aa.PLAYING)),[2])}}))}))},e.handleVideoPause=function(){var t;null===(t=e.countdownInterval)||void 0===t||t.pause();var o=e.getAd();null==o||o.pauseCountdown()},e.handleVideoResume=function(){var t;null===(t=e.countdownInterval)||void 0===t||t.start();var o=e.getAd();null==o||o.resumeCountdown()},e.handleAdStop=function(t){[p.MID,p.DYNAMIC_MID].includes(t.adType)&&(e.clear(),e.isDynamicMid&&e.doDynamicMid())},e}return i(e,t),Object.defineProperty(e.prototype,"needCheckPlaytime",{get:function(){var t=this.adCore.ctrl.getRunningAds(p.TAIL);return!t.length||!t.some((function(t){return t.data.hasCallPlay}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dynamicMidPoint",{get:function(){return this.adCore.order.getPoints(p.MID).find((function(t){return t.mid_type===E.DYNAMIC}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDynamicMid",{get:function(){return!!this.dynamicMidPoint},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conflictInterval",{get:function(){var t;return(null===(t=this.dynamicMidPoint)||void 0===t?void 0:t.conflict_interval)||1e4},enumerable:!1,configurable:!0}),e.prototype.startWatch=function(){t.prototype.startWatch.call(this),this.adCore.outerEvent.on(ki.VIDEO_PAUSE,this.handleVideoPause),this.adCore.outerEvent.on(ki.VIDEO_PLAYING,this.handleVideoResume),this.adCore.event.on(Ge.AD_STOP,this.handleAdStop)},e.prototype.endWatch=function(){t.prototype.endWatch.call(this),this.adCore.outerEvent.off(ki.VIDEO_PAUSE,this.handleVideoPause),this.adCore.outerEvent.off(ki.VIDEO_PLAYING,this.handleVideoResume),this.adCore.event.off(Ge.AD_STOP,this.handleAdStop)},e.prototype.timeupdate=function(t){var e=this;this.adCore.config.phlsConfig.isSoloPlayingPhls||this.needCheckPlaytime&&(this.isDynamicMid?this.doDynamicMid():this.adCore.order.getPoints(p.MID).forEach((function(o){var i=e.adCore.order.getPointOrderFromPoint(p.MID,o);if(o.mid_type!==E.FIX_REALTIME){if(0!==i.point.begin)if(i.pointStatus!==en.INIT){if(i.pointStatus===en.LOADING){var n=e.getAd();t>=i.point.begin-1e4&&(null==n?void 0:n.data.canPlay)&&(null==n||n.startEnterCountdown(),i.pointStatus=en.PLAYING)}}else t>=i.point.begin-15e3&&t<=i.point.begin+15e3&&(i.pointStatus=en.LOADING,e.adCore.ctrl.loadAdOrder(i).catch((function(){var t;null===(t=e.logger)||void 0===t||t.error("中插广告 loadAd 失败")})))}else e.checkFixRealTimeMid(t,i)})))},e.prototype.reset=function(){this.clear(),window.sessionStorage.removeItem(Bt)},e.prototype.clear=function(){this.dynamicMidStatus=aa.INIT,this.countdownInterval&&(this.countdownInterval.clear(),this.countdownInterval=null)},e.prototype.requestDynamicMid=function(t){return w(this,void 0,void 0,(function(){var e,o;return S(this,(function(i){switch(i.label){case 0:this.adCore.order.deleteOrders(p.MID),(null==t?void 0:t.mid_type)===E.FIX_REALTIME?e=null!==(o=t.zcindex)&&void 0!==o?o:0:(e=Number(window.sessionStorage.getItem(Bt)||-1),e+=1),window.sessionStorage.setItem(Bt,"".concat(e)),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.adCore.config.requestProxyHttp(s.DYNAMIC_MID)];case 2:return i.sent(),[3,4];case 3:return i.sent(),this.clear(),[3,4];case 4:return[2]}}))}))},e.prototype.doDynamicMid=function(){var t;if(this.dynamicMidStatus===aa.INIT){var e=this.adCore.order.getExtraData(p.DYNAMIC_MID);if(e)return e.stop_request_dynamic_ad?(null===(t=this.countdownInterval)||void 0===t||t.clear(),void(this.countdownInterval=null)):void(this.countdownInterval||(this.countdownInterval=new hn({timeout:1e3,onChange:this.checkDynamicMid},this.logger),this.dynamicInfo=e,this.countdownInterval.start()))}},e.prototype.getAd=function(){var t=this.adCore.ctrl.getRunningAds(p.MID);if(t.length>0)return t[0]},e.prototype.checkFixRealTimeMid=function(t,e){if(this.dynamicMidStatus!==aa.INIT||e.pointStatus!==en.INIT)if(this.dynamicMidStatus!==aa.REQUEST){if(this.dynamicMidStatus===aa.LOADING){var o=this.getAd();t>=e.point.begin-1e4&&(null==o?void 0:o.data.canPlay)&&(null==o||o.startEnterCountdown(),this.dynamicMidStatus=aa.PLAYING)}}else this.loadDynamicMid();else t>=e.point.begin-15e3&&t<=e.point.begin+15e3&&(this.adCore.vr.reportRequestFixedMiddle(),this.requestDynamicMid(e.point),this.dynamicMidStatus=aa.REQUEST,e.pointStatus=en.LOADING)},e.prototype.loadDynamicMid=function(){var t=this,e=this.adCore.order.getAdOrder(p.MID);e&&(0===this.adCore.ctrl.getRunningAds(p.MID).length&&(this.adCore.ctrl.loadAdOrder(e).catch((function(){var e;null===(e=t.logger)||void 0===e||e.error("中插 loadAd 失败")})),this.dynamicMidStatus=aa.LOADING))},e}(ln),la=function(t){return{adType:p.MID,isPointAd:!0,isMultiple:!1,getOrderData:sa,creator:ia(t),watcher:function(t){return new da(t)}}},ca=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.load=function(){var e;t.prototype.load.call(this),(null===(e=this.adInfo)||void 0===e?void 0:e.point)||this.stop()},e.prototype.play=function(){var e,o=this.adCore.config.outerPlayerData.playtime;if(this.adInfo.reporter.setVideoPlaytime(1e3*o),this.state!==Zi.PLAYING&&this.state!==Zi.PAUSED)if(null===(e=this.adInfo)||void 0===e?void 0:e.point){t.prototype.play.call(this),this.show(),this.adCore.vr.reportExposure(this.adInfo);var i=this.adCore.config.playerData,n=i.playerVid,r=i.playerCid,a=i.playerFlowid,s=this.adInfo.point.time_offset,d=void 0===s?0:s;this.adCore.vr.reportNonStandard(D({vid:n,cid:r,flow_id:a,ad_exposure_position:(1e3*o-d).toFixed(0)},this.adInfo.getVrReportData()))}else this.stop()},e.prototype.stop=function(){var e;this.state!==Zi.END&&(this.hide(),t.prototype.stop.call(this),this.adCore.vr.reportEnded(this.order,{ad_playtime:this.data.showTime?Date.now()-this.data.showTime:-1,first_view:null!==(e=this.data.showTime)&&void 0!==e?e:-1}),this.destroy())},e.isPointAd=!0,e.isMultiple=!0,e}(nn),pa=function(t,e){var o;if(e.ad_scene!==s.ANCHOR)return{};var i={},n=[];return null===(o=e.anchor_ads)||void 0===o||o.forEach((function(o){if(o.ad_type===p.NON_STANDARD)if(o.point){var i=ze(o);n.push({adType:o.ad_type,auth:e.auth,empty:Ke(t,e,o.empty),orders:He(t,i,e,o.non_standard),point:i,pointStatus:en.INIT})}else $e(t,e,o.empty)})),n.length>0&&(i.pointAdData=n),i},ua=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.timeupdate=function(t){var e=this;this.adCore.config.phlsConfig.isSoloPlayingPhls||this.adCore.order.getPoints(p.NON_STANDARD).forEach((function(o){var i=e.adCore.order.getPointOrderFromPoint(p.NON_STANDARD,o);i&&0!==i.orders.length&&(t>=o.begin&&t<=o.end?(i.pointStatus===en.INIT&&(i.orders.forEach((function(t){e.adCore.ctrl.loadAdOrder(D(D({},i),{orders:[t]})).catch((function(t){}))})),i.pointStatus=en.PLAYING),i.pointStatus===en.PLAYING&&i.orders.forEach((function(t){e.adCore.api.playAd(p.NON_STANDARD,t.orderId)}))):i.pointStatus!==en.INIT&&(i.pointStatus=en.INIT,i.orders.forEach((function(t){e.adCore.api.stopAd(p.NON_STANDARD,t.orderId)}))))}))},e}(ln),ha=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handlePlaying=function(t){var o;!0===(null===(o=t.data)||void 0===o?void 0:o.isFirst)&&e.adCore.vr.reportVideoStartPlay()},e.handlePause=function(){e.adCore.vr.reportVideoPause()},e}return i(e,t),e.prototype.startWatch=function(){this.adCore.outerEvent.on(ki.VIDEO_PLAYING,this.handlePlaying),this.adCore.outerEvent.on(ki.VIDEO_PAUSE,this.handlePause)},e.prototype.endWatch=function(){this.adCore.outerEvent.off(ki.VIDEO_PLAYING,this.handlePlaying),this.adCore.outerEvent.off(ki.VIDEO_PAUSE,this.handlePause)},e}(dn);fn(".game-pause-card{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:rgba(0,0,0,.802);bottom:0;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;position:absolute;right:0;top:0;width:270px}.game-pause-card-logo{-ms-flex-negative:0;border-radius:100%;flex-shrink:0;height:48px;margin-top:90px;overflow:hidden;width:48px}.game-pause-card-logo img{height:100%;width:100%}.game-pause-card-name{-ms-flex-negative:0;color:#fff;flex-shrink:0;font-size:14px;font-style:normal;font-weight:500;line-height:14px;margin-top:15px;text-align:center}.game-pause-card-desc{-webkit-box-orient:vertical;-webkit-line-clamp:2;display:-webkit-box;line-height:22px;max-width:212px;overflow:hidden;text-overflow:ellipsis;word-break:break-all}.game-pause-card-btn,.game-pause-card-desc{-ms-flex-negative:0;color:#fff;flex-shrink:0;font-size:14px;font-style:normal;margin-top:20px;text-align:center}.game-pause-card-btn{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background:#fe5c38;border-radius:24px;font-weight:500;gap:10px;justify-content:center;line-height:14px;padding:10px 36px}.game-pause-card-btn,.game-pause-card-close{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.game-pause-card-close{opacity:.6;position:absolute;right:18px;top:12px}.game-pause-card-close span{color:#fff;font-size:12px;font-style:normal;font-weight:400;line-height:12px;text-align:right}.game-pause-card-close img{height:12px;margin-left:4px;width:12px}.game-pause-card-code-icon{background:hsla(0,0%,100%,.1);border-radius:4px;bottom:15px;height:48px;position:absolute;right:15px;width:48px}.game-pause-card-code,.game-pause-card.code-show .game-pause-card-code-icon{display:none}.game-pause-card.code-show .game-pause-card-code{-ms-flex-negative:0;-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background:#fff;border-radius:6px;display:-webkit-box;display:-ms-flexbox;display:flex;flex-shrink:0;height:160px;justify-content:center;margin-top:20px;padding:8px;width:160px}.game-pause-card.code-show .game-pause-card-logo{margin-top:32px}.game-pause-card.code-show .game-pause-card-desc,.game-pause-card.code-show .game-pause-card-name{margin-top:10px}.game-pause-card.code-show .game-pause-card-btn{margin-top:15px}");var fa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs={container:e.createRef(),code:e.createRef()},e.handleSmallCodeHover=function(){Jt(e.$refs.container.value,"code-show")},e.handleContainerLeave=function(){te(e.$refs.container.value,"code-show")},e.handleClick=function(t){var o;t.stopPropagation();var i=Nn(t.target);null===(o=e.props)||void 0===o||o.onClick(i)},e.handleClose=function(t){var o,i;t.stopPropagation(),null===(i=null===(o=e.props)||void 0===o?void 0:o.onClose)||void 0===i||i.call(o)},e}return i(e,t),e.prototype.renderQrCode=function(t){var e,o;this.$refs.code.value.innerHTML="",this.$refs.code.value&&t&&(null===(o=null===(e=this.props)||void 0===e?void 0:e.renderQrCode)||void 0===o||o.call(e,this.$refs.code.value,t,144))},e.prototype.resetHover=function(){te(this.$refs.container.value,"code-show")},e.prototype.render=function(){var t,e,o,i,n;return Pn("div",{ref:this.$refs.container,class:"game-pause-card ".concat((null===(t=this.props)||void 0===t?void 0:t.visible)?"":"txp_none"),onMouseLeave:this.handleContainerLeave,onClick:this.handleClick,"data-acttype":un.AD_DETAIL},Pn("div",{class:"game-pause-card-logo"},Pn("img",{"data-acttype":un.ADVERTISER_LOGO,src:(null===(e=this.props)||void 0===e?void 0:e.icon_url)||"",alt:""})),Pn("div",{class:"game-pause-card-name"},Pn("span",{"data-acttype":un.ADVERTISER_NAME},null===(o=this.props)||void 0===o?void 0:o.name)),Pn("div",{class:"game-pause-card-desc"},Pn("span",{"data-acttype":un.AD_TITLE},null===(i=this.props)||void 0===i?void 0:i.desc)),Pn("div",{ref:this.$refs.code,"data-acttype":un.AD_ACTION_BUTTON,class:"game-pause-card-code"}),Pn("div",{class:"game-pause-card-btn","data-acttype":un.AD_ACTION_BUTTON},null===(n=this.props)||void 0===n?void 0:n.btnText),Pn("div",{class:"game-pause-card-close",onClick:this.handleClose},Pn("span",null,"广告"),Pn("img",{src:_n,alt:""})),Pn("div",{class:"game-pause-card-code-icon",onMouseEnter:this.handleSmallCodeHover},Pn("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Pn("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M22 10H10V22H22V10ZM7 6C6.44772 6 6 6.44772 6 7V25C6 25.5523 6.44772 26 7 26H25C25.5523 26 26 25.5523 26 25V7C26 6.44772 25.5523 6 25 6H7ZM14 34H10V38H14V34ZM7 30C6.44772 30 6 30.4477 6 31V41C6 41.5523 6.44772 42 7 42H17C17.5523 42 18 41.5523 18 41V31C18 30.4477 17.5523 30 17 30H7ZM34 34H38V38H34V34ZM30 31C30 30.4477 30.4477 30 31 30H41C41.5523 30 42 30.4477 42 31V41C42 41.5523 41.5523 42 41 42H31C30.4477 42 30 41.5523 30 41V31ZM38 10H34V14H38V10ZM31 6C30.4477 6 30 6.44772 30 7V17C30 17.5523 30.4477 18 31 18H41C41.5523 18 42 17.5523 42 17V7C42 6.44772 41.5523 6 41 6H31ZM34 22H30V26H34V22ZM22 30H26V34H22V30ZM13 13H19V19H13V13ZM22 38H26V42H22V38ZM42 22H38V26H42V22Z",fill:"white","fill-opacity":"0.5"}))))},e.prototype.getUpdate=function(){var t=this;return{visible:function(e,o){e!==o&&(e?te(t.$refs.container.value,"txp_none"):Jt(t.$refs.container.value,"txp_none"))}}},e}(xn);fn(".game-pause-ui{bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.game-pause-ui .game-pause-card{-webkit-transform:translateX(100%);transform:translateX(100%);-webkit-transition:all .3s ease;transition:all .3s ease;will-change:transform}.game-pause-ui .game-card{bottom:10px;opacity:1;position:absolute;right:10px;-webkit-transition:all .3s ease;transition:all .3s ease;will-change:opacity}.game-pause-ui.can-hover:hover .game-pause-card{-webkit-transform:translateX(0);transform:translateX(0)}.game-pause-ui.can-hover:hover .game-card,.game-pause-ui.can-hover:hover .game-pause-ui-close{opacity:0}.game-pause-ui-close{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background:rgba(0,0,0,.5);border-radius:2px;display:-webkit-box;display:-ms-flexbox;display:flex;height:26px;justify-content:center;opacity:1;position:absolute;right:5px;top:5px;-webkit-transition:opacity .3s ease;transition:opacity .3s ease;width:58px}.game-pause-ui-close span{color:#fff;font-size:12px;font-style:normal;font-weight:400;line-height:12px;margin-right:4px;text-align:right}.game-pause-ui-btn{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background:#fe5c38;border-radius:24px;bottom:20px;color:#fff;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;font-size:14px;font-style:normal;font-weight:500;height:36px;justify-content:center;line-height:14px;padding:0 30px;position:absolute;right:20px}.game-pause-ui-btn img{height:16px;margin-right:4px;width:16px}");var va=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs={gamePauseCard:e.createRef(),gameCard:e.createRef(),container:e.createRef(),btn:e.createRef()},e.handleBtnClick=function(t){var o;t.stopPropagation(),null===(o=e.props)||void 0===o||o.onClick(un.AD_ACTION_BUTTON)},e.handleClose=function(t){t.stopPropagation(),e.props.onClose()},e}return i(e,t),e.prototype.renderQrCode=function(t){this.$refs.gamePauseCard.value.renderQrCode(t),this.$refs.gameCard.value.renderQrCode(t)},e.prototype.setSize=function(t){var e=t>602,o=602===t;this.$refs.gameCard.value.setState({visible:e||o}),this.$refs.gamePauseCard.value.setState({visible:e}),e?Jt(this.$refs.container.value,"can-hover"):te(this.$refs.container.value,"can-hover"),e||o?ee(this.$refs.btn.value):oe(this.$refs.btn.value)},e.prototype.render=function(){var t,e,o,i,n,r,a,s,d,l;return Pn("div",{ref:this.$refs.container,class:"game-pause-ui can-hover"},Pn($r,{ref:this.$refs.gameCard,visible:!0,icon_url:null===(t=this.props)||void 0===t?void 0:t.icon_url,name:null===(e=this.props)||void 0===e?void 0:e.name,desc:null===(o=this.props)||void 0===o?void 0:o.desc,btnText:null===(i=this.props)||void 0===i?void 0:i.btnText,qrcodeTip:null===(n=this.props)||void 0===n?void 0:n.qrcodeTip,hasBg:this.props.hasBg,renderQrCode:this.props.renderQrCode,onClick:this.props.onClick}),Pn(fa,{ref:this.$refs.gamePauseCard,icon_url:null===(r=this.props)||void 0===r?void 0:r.icon_url,name:null===(a=this.props)||void 0===a?void 0:a.name,desc:null===(s=this.props)||void 0===s?void 0:s.desc,btnText:null===(d=this.props)||void 0===d?void 0:d.btnText,renderQrCode:this.props.renderQrCode,onClose:this.props.onClose,onClick:this.props.onClick}),Pn("div",{ref:this.$refs.btn,class:"game-pause-ui-btn txp_none",onClick:this.handleBtnClick},Pn("img",{src:gn,alt:""}),Pn("div",null," ",null===(l=this.props)||void 0===l?void 0:l.btnText)),Pn("div",{class:"game-pause-ui-close",onClick:this.handleClose},Pn("span",null,"广告"),Pn("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},Pn("path",{d:"M1.64645 1.64645L1.29289 1.29289L1.29289 1.29289L1.64645 1.64645ZM1.64645 2.35355L1.29289 2.70711L1.29289 2.70711L1.64645 2.35355ZM2.35355 1.64645L2 2L2 2L2.35355 1.64645ZM6 5.29289L5.64645 5.64645L6 6L6.35355 5.64645L6 5.29289ZM9.64645 1.64645L10 2V2L9.64645 1.64645ZM10.3536 1.64645L10.7071 1.29289L10.7071 1.29289L10.3536 1.64645ZM10.3536 2.35355L10.7071 2.70711V2.70711L10.3536 2.35355ZM6.70711 6L6.35355 5.64645L6 6L6.35355 6.35355L6.70711 6ZM10.3536 9.64645L10.7071 9.29289L10.7071 9.29289L10.3536 9.64645ZM10.3536 10.3536L10.7071 10.7071L10.7071 10.7071L10.3536 10.3536ZM9.64645 10.3536L9.29289 10.7071L9.29289 10.7071L9.64645 10.3536ZM6 6.70711L6.35355 6.35355L6 6L5.64645 6.35355L6 6.70711ZM2.35355 10.3536L2.70711 10.7071H2.70711L2.35355 10.3536ZM1.64645 10.3536L1.29289 10.7071L1.29289 10.7071L1.64645 10.3536ZM1.64645 9.64645L1.29289 9.29289L1.29289 9.29289L1.64645 9.64645ZM5.29289 6L5.64645 6.35355L6 6L5.64645 5.64645L5.29289 6ZM1.29289 1.29289C0.902369 1.68342 0.902369 2.31658 1.29289 2.70711L2 2L2 2L1.29289 1.29289ZM2.70711 1.29289C2.31658 0.902368 1.68342 0.90237 1.29289 1.29289L2 2L2 2L2.70711 1.29289ZM6.35355 4.93934L2.70711 1.29289L2 2L5.64645 5.64645L6.35355 4.93934ZM6.35355 5.64645L10 2L9.29289 1.29289L5.64645 4.93934L6.35355 5.64645ZM10 2V2L10.7071 1.29289C10.3166 0.90237 9.68342 0.902368 9.29289 1.29289L10 2ZM10 2V2L10.7071 2.70711C11.0976 2.31658 11.0976 1.68342 10.7071 1.29289L10 2ZM10 2L6.35355 5.64645L7.06066 6.35355L10.7071 2.70711L10 2ZM10.7071 9.29289L7.06066 5.64645L6.35355 6.35355L10 10L10.7071 9.29289ZM10.7071 10.7071C11.0976 10.3166 11.0976 9.68342 10.7071 9.29289L10 10V10L10.7071 10.7071ZM9.29289 10.7071C9.68342 11.0976 10.3166 11.0976 10.7071 10.7071L10 10H10L9.29289 10.7071ZM5.64645 7.06066L9.29289 10.7071L10 10L6.35355 6.35355L5.64645 7.06066ZM5.64645 6.35355L2 10L2.70711 10.7071L6.35355 7.06066L5.64645 6.35355ZM2 10H2L1.29289 10.7071C1.68342 11.0976 2.31658 11.0976 2.70711 10.7071L2 10ZM2 10V10L1.29289 9.29289C0.90237 9.68342 0.90237 10.3166 1.29289 10.7071L2 10ZM2 10L5.64645 6.35355L4.93934 5.64645L1.29289 9.29289L2 10ZM1.29289 2.70711L4.93934 6.35355L5.64645 5.64645L2 2L1.29289 2.70711Z",fill:"white"}))))},e}(xn);fn(".txp_zt{color:#fff;height:100%;position:absolute;width:100%;z-index:2}.txp_zt .txp_zt_ad_mask{background-color:rgba(0,0,0,.5);height:100%;pointer-events:none;width:100%}.txp_zt .txp_zt_content{background-color:#1c1c1c;border-radius:4px;cursor:pointer;left:50%;overflow:hidden;pointer-events:auto;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.txp_zt .txp_zt_content.txp_ad_active_normal .txp_zt_progress{bottom:66px}.txp_zt .txp_zt_content.txp_ad_active_normal .txp_zt_mute{bottom:82px}.txp_zt .txp_zt_content.txp_ad_active_normal .bottom_desc_text_container,.txp_zt .txp_zt_content.txp_ad_active_normal .bottom_desc_text_container .bottom_desc_text{display:block}.txp_zt .txp_zt_content .txp_zt_loading{background-color:#1c1c1c;background-position:50%;background-repeat:no-repeat;background-size:100% 100%;cursor:auto;pointer-events:unset;z-index:2}.txp_zt .txp_zt_content .txp_zt_err_tips{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background-color:#1c1c1c;cursor:auto;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%;justify-content:center;position:absolute;width:100%;z-index:2}.txp_zt .txp_zt_content .txp_zt_err_tips .txp_zt_err_tips_text{font-size:16px;margin-bottom:20px}.txp_zt .txp_zt_content .txp_zt_err_tips .txp_zt_err_tips_btn{background-color:hsla(0,0%,100%,.1);border-radius:15px;cursor:pointer;font-size:12px;height:30px;line-height:30px;text-align:center;width:90px}.txp_zt .txp_zt_content .txp_zt_image_material,.txp_zt .txp_zt_content .txp_zt_video_material{height:100%;width:100%}.txp_zt .txp_zt_content .txp_zt_close{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:rgba(0,0,0,.5);border-radius:2px;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:12px;height:26px;line-height:26px;padding-left:10px;position:absolute;right:5px;top:5px;width:58px;z-index:3}.txp_zt .txp_zt_content .txp_zt_close:hover{background-color:rgba(0,0,0,.8)}.txp_zt .txp_zt_content .txp_zt_close img{display:block;height:14px;margin-left:2px;width:14px}.txp_zt .txp_zt_content .txp_zt_detail{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#fe5c38;border-radius:15px;bottom:12px;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:12px;height:30px;line-height:30px;padding:0 15px;position:absolute;right:10px}.txp_zt .txp_zt_content .txp_zt_detail:hover{background-color:#ff183e}.txp_zt .txp_zt_content .txp_zt_detail img{height:16px;margin-right:6px;width:16px}.txp_zt .txp_zt_content .txp_zt_mute{fill:#fff;border-radius:50%;bottom:12px;cursor:pointer;height:30px;left:10px;padding:5px;position:absolute;width:30px}.txp_zt .txp_zt_content .txp_zt_mute:hover{background-color:rgba(0,0,0,.8)}.txp_zt .txp_zt_content .txp_zt_mute.mute .txp_svg_volume_mute,.txp_zt .txp_zt_content .txp_zt_mute.volume .txp_svg_volume{display:block}.txp_zt .txp_zt_content .txp_zt_mute .txp_svg_symbol{display:none}.txp_zt .txp_zt_content .txp_zt_progress{background-color:hsla(0,0%,100%,.45);bottom:0;cursor:auto;height:4px;left:0;position:absolute;width:100%}.txp_zt .txp_zt_content .txp_zt_progress .progress{background-color:#fe5c38;border-bottom-right-radius:2px;border-top-right-radius:2px;height:4px;-webkit-transition:width .15s;transition:width .15s;width:0}.txp_zt .txp_zt_content .bottom_desc_text_container{background-color:rgba(31,31,31,.9);bottom:0;display:none;height:66px;left:0;position:absolute;width:100%}.txp_zt .txp_zt_content .bottom_desc_text_container .bottom_desc_text{color:#fff;font-size:18px;height:66px;line-height:66px;overflow:hidden;text-indent:15px;text-overflow:ellipsis;white-space:nowrap}.txp_zt .txp_zt_content .bottom_desc_text_container .bottom_desc_text.level-full{width:645px}.txp_zt .txp_zt_content .bottom_desc_text_container .bottom_desc_text.level-high-hd{width:447px}.txp_zt .txp_zt_content .bottom_desc_text_container .bottom_desc_text.level-hd{width:306px}.txp_zt .txp_zt_content .bottom_desc_text_container .bottom_desc_text.level-normal{width:180px}.txp_zt .txp_zt_content .translucent-top-text-container{background-image:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.5)),color-stop(93%,transparent));background-image:linear-gradient(180deg,rgba(0,0,0,.5),transparent 93%);border-radius:4px 4px 0 0;height:80px;left:0;position:absolute;top:0;-webkit-transition:all .3s ease;transition:all .3s ease;width:100%}.txp_zt .txp_zt_content .translucent-top-text-container .translucent-top-text{color:#fff;font-size:18px;letter-spacing:0;line-height:48px;overflow:hidden;text-indent:15px;text-overflow:ellipsis;text-shadow:0 1px 2px rgba(0,0,0,.25);white-space:nowrap}.txp_zt .txp_zt_content .translucent-top-text-container .translucent-top-text.level-full{width:540px}.txp_zt .txp_zt_content .translucent-top-text-container .translucent-top-text.level-high-hd{width:468px}.txp_zt .txp_zt_content .translucent-top-text-container .translucent-top-text.level-hd{width:342px}.txp_zt .txp_zt_content .translucent-top-text-container .translucent-top-text.level-normal{width:252px}.txp_zt .txp_zt_content .float-qrcode{background-color:rgba(0,0,0,.8);border-radius:4px;bottom:10px;height:134px;position:absolute;right:10px;-webkit-transition:all .3s ease;transition:all .3s ease;width:110px}.txp_zt .txp_zt_content .float-qrcode .float-code{background-color:#fff;height:90px;left:10px;position:absolute;top:10px;width:90px}.txp_zt .txp_zt_content .float-qrcode .float-code img{height:90%;margin:5%;width:90%}.txp_zt .txp_zt_content .float-qrcode .scan-tips{bottom:10px;color:#fff;height:14px;left:0;letter-spacing:1px;position:absolute;white-space:nowrap;width:110px}.txp_zt .txp_zt_content .float-qrcode .scan-tips span{font-size:20px;left:50%;line-height:14px;position:absolute;-webkit-transform:scale(.5) translateX(-100%);transform:scale(.5) translateX(-100%);-webkit-transform-origin:50% 50%;transform-origin:50% 50%}.txp_zt .txp_zt_content .right-qrcode{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background-color:rgba(0,0,0,.5);display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%;justify-content:center;pointer-events:auto;position:absolute;right:-270px;top:0;-webkit-transition:all .3s ease;transition:all .3s ease;width:270px}.txp_zt .txp_zt_content .right-qrcode.level-high-hd .item-avatar-box{margin-top:20px}.txp_zt .txp_zt_content .right-qrcode.level-high-hd .item-text{display:none}.txp_zt .txp_zt_content .right-qrcode.level-high-hd .right-code{margin-top:10px}.txp_zt .txp_zt_content .right-qrcode.level-hd .item-avatar-box{margin-top:15px}.txp_zt .txp_zt_content .right-qrcode.level-hd .item-title{margin-top:5px}.txp_zt .txp_zt_content .right-qrcode.level-hd .item-text{display:none}.txp_zt .txp_zt_content .right-qrcode.level-hd .right-code{height:136px;margin-top:5px;width:136px}.txp_zt .txp_zt_content .right-qrcode.level-normal .item-avatar-box,.txp_zt .txp_zt_content .right-qrcode.level-normal .item-text,.txp_zt .txp_zt_content .right-qrcode.level-normal .item-title{display:none}.txp_zt .txp_zt_content .right-qrcode.level-normal .right-code{height:136px;margin-top:10px;width:136px}.txp_zt .txp_zt_content .right-qrcode .item-avatar-box{border-radius:50%;height:40px;margin-top:35px;overflow:hidden;width:40px}.txp_zt .txp_zt_content .right-qrcode .item-avatar-box .item-avatar{height:100%;width:100%}.txp_zt .txp_zt_content .right-qrcode .item-title{color:#fff;font-size:14px;margin-top:10px;overflow:hidden;text-align:center;text-overflow:ellipsis;white-space:nowrap;width:190px}.txp_zt .txp_zt_content .right-qrcode .item-text{-webkit-line-clamp:2;-webkit-box-orient:vertical;color:#fff;display:-webkit-box;font-size:14px;line-height:22px;margin-top:15px;overflow:hidden;text-align:center;text-overflow:ellipsis;text-overflow:-o-ellipsis-lastline;width:200px}.txp_zt .txp_zt_content .right-qrcode .right-code{background-color:#fff;height:200px;margin-top:20px;width:200px}.txp_zt .txp_zt_content .right-qrcode .right-code img{height:90%;margin:5%;width:90%}.txp_zt .txp_zt_content .right-qrcode .scan-tips{color:#fff;font-size:14px;letter-spacing:1px;line-height:14px;margin-bottom:10px;margin-top:10px;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,.25);white-space:nowrap;width:200px}.txp_zt .txp_zt_content:hover .translucent-top-text-container{top:-80px;-webkit-transition:all .3s ease;transition:all .3s ease}.txp_zt .txp_zt_content:hover .float-qrcode{right:-120px;-webkit-transition:all .3s ease;transition:all .3s ease}.txp_zt .txp_zt_content:hover .right-qrcode{right:0;-webkit-transition:all .3s ease;transition:all .3s ease}.txp_zt .txp_play_icon{left:50%;pointer-events:auto;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:10%}.txp_zt .txp_none{display:none!important}.txp_zt.txp_zt_3d_video .txp_zt_content{background-color:transparent;max-height:522px;max-width:932px}.txp_zt.txp_zt_3d_video .txp_zt_content .txp_zt_loading{background-color:transparent}.txp_ad .txp_btn_close_ad{background-color:#000;background-color:rgba(0,0,0,.7);height:26px;position:absolute;right:0;top:0;width:26px;z-index:2}.txp_ad .txp_btn_close_ad:after,.txp_ad .txp_btn_close_ad:before{left:7px}");var ma,ya,ga,_a=yn("pause"),Aa={layer:_a("layer"),pauseContainer:_a("container"),pauseMask:_a("mask"),pauseContent:_a("content"),pauseLoading:_a("loading"),pauseErrorTips:_a("error-tips"),pauseErrorTipsBtn:_a("error-tips-btn"),pauseVideoMaterialContainer:_a("video-material-container"),pauseImageMaterialContainer:_a("image-material-container"),pauseImageMaterialImg:_a("image-material-img"),pauseTopTextContainer:_a("top-text-container"),pauseTopText:_a("top-text"),pauseFloatQrcode:_a("float-qrcode"),pauseFloatQrcodeContainer:_a("float-qrcode-container"),pauseFloatQrcodeScanTips:_a("float-qrcode-scan-tips"),pauseRightQrcode:_a("right-qrcode"),pauseCenterQrcodeItemAvatar:_a("center-qrcode-item-avatar"),pauseRightQrcodeItemTitle:_a("center-qrcode-item-title"),pauseRightQrcodeItemText:_a("center-qrcode-item-text"),pauseCenterQrcodeContainer:_a("center-qrcode-container"),pauseCenterQrcodeScanTips:_a("center-qrcode-scan-tips"),pauseClose:_a("close"),pauseMute:_a("mute"),pauseProgressContainer:_a("progress-container"),pauseProgress:_a("progress"),pauseBottomTextContainer:_a("bottom-text-container"),pauseBottomText:_a("bottom-text"),pauseBottomTextSpan:_a("bottom-text-span"),pauseDetailBtn:_a("detail-btn"),pauseDetailBtnText:_a("detail-btn-text"),pausePictureContainer:_a("picture-container"),pausePictureImg:_a("picture-img"),pausePictureClose:_a("picture-close"),pausePictureDspName:_a("picture-dsp-name"),pausePictureVpaidContainer:_a("picture-vpaid-container"),gameDetail:_a("game-detail")};!function(t){t.PAUSE_CONTENT_HOVER="PAUSE_CONTENT_HOVER",t.PAUSE_CLOSE_CLICK="PAUSE_CLOSE_CLICK",t.PAUSE_MUTE_CLICK="PAUSE_MUTE_CLICK",t.PAUSE_RETRY_CLICK="PAUSE_RETRY_CLICK",t.PAUSE_LINK_AREA_CLICK="PAUSE_LINK_AREA_CLICK",t.PAUSE_DETAIL_BTN_CLICK="PAUSE_DETAIL_BTN_CLICK",t.PAUSE_IMAGE_MATERIAL_IMG_LOAD="PAUSE_IMAGE_MATERIAL_IMG_LOAD",t.PAUSE_IMAGE_MATERIAL_IMG_ERROR="PAUSE_IMAGE_MATERIAL_IMG_ERROR"}(ma||(ma={})),function(t){t.LEVEL_FULL="levelFullHd",t.LEVEL_HIGH_HD="levelHighHd",t.LEVEL_HD="levelHd",t.LEVEL_NORMAL="levelNormal"}(ya||(ya={})),function(t){t[t.LEVEL_FULL=1/0]="LEVEL_FULL",t[t.LEVEL_HIGH_HD=1390]="LEVEL_HIGH_HD",t[t.LEVEL_HD=1180]="LEVEL_HD",t[t.LEVEL_NORMAL=880]="LEVEL_NORMAL"}(ga||(ga={}));var Ea,Ca=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleMap=Aa,e}return i(e,t),e.prototype.getPlayerMode=function(){var t;return null!==(t=this.playerMode)&&void 0!==t?t:mn.DEFAULT},e.prototype.setContainerVisible=function(t){this.setDomVisible(this.$domNodes.pauseContainer,t)},e.prototype.setPauseContentVisible=function(t){this.setDomVisible(this.$domNodes.pauseContent,t)},e.prototype.setMaskVisible=function(t){this.setDomVisible(this.$domNodes.pauseMask,t)},e.prototype.setErrorTipsVisible=function(t){this.setDomVisible(this.$domNodes.pauseErrorTips,t)},e.prototype.setLoadingVisible=function(t){this.setDomVisible(this.$domNodes.pauseLoading,t)},e.prototype.toggleMute=function(t){t?(te(this.$domNodes.pauseMute,"volume"),Jt(this.$domNodes.pauseMute,"mute")):(te(this.$domNodes.pauseMute,"mute"),Jt(this.$domNodes.pauseMute,"volume"))},e.prototype.setVideoMaterialVisible=function(t){t?(oe(this.$domNodes.pauseVideoMaterialContainer),oe(this.$domNodes.pauseProgressContainer),oe(this.$domNodes.pauseMute)):(ee(this.$domNodes.pauseVideoMaterialContainer),ee(this.$domNodes.pauseProgressContainer),ee(this.$domNodes.pauseMute),this.setLoadingVisible(!1))},e.prototype.setImageMaterialVisible=function(t){this.setDomVisible(this.$domNodes.pauseImageMaterialContainer,t)},e.prototype.setTransparentVideoMaterialVisible=function(t){this.setDomVisible(this.$domNodes.pauseVideoMaterialContainer,t)},e.prototype.setPausePictureMaterialVisible=function(t){this.setDomVisible(this.$domNodes.pausePictureContainer,t)},e.prototype.updateTransparentVideoContainer=function(){Jt(this.$domNodes.pauseContainer,"txp_zt_3d_video")},e.prototype.updateImageMaterial=function(t){Qt(this.$domNodes.pauseImageMaterialImg,"src",t)},e.prototype.updateClickable=function(t){Xt(this.$domNodes.pauseContent,"cursor",t?"pointer":"auto")},e.prototype.updateActionButton=function(t){t.btnText&&t.show&&(re(this.$domNodes.pauseDetailBtnText,t.btnText),Xt(this.$domNodes.pauseDetailBtn,{color:t.textColor,backgroundColor:t.bgColor}),oe(this.$domNodes.pauseDetailBtn))},e.prototype.updateProgress=function(t){Xt(this.$domNodes.pauseProgress,"width",t)},e.prototype.resizeMaterialContainerSize=function(t,e){var o;void 0===t&&(t=!1),void 0===e&&(e=this.$domNodes.pauseContainer.offsetWidth);var i=783,n=439;e<1390&&(i=602,n=338),e<1180&&(i=463,n=260),e<880&&(i=356,n=200),Xt(this.$domNodes.pauseContent,{width:i,height:n}),this.$domNodes.pauseContent.setAttribute("data-width","".concat(i)),null===(o=this.gamePauseUI)||void 0===o||o.setSize(i),t&&(e>=ga.LEVEL_HIGH_HD&&e<ga.LEVEL_FULL&&(this.showQrcodeTypeWith(ya.LEVEL_FULL),this.showWebpageGameAdTypeWith(ya.LEVEL_FULL)),e>=ga.LEVEL_HD&&e<ga.LEVEL_HIGH_HD&&(this.showQrcodeTypeWith(ya.LEVEL_HIGH_HD),this.showWebpageGameAdTypeWith(ya.LEVEL_HIGH_HD)),e>=ga.LEVEL_NORMAL&&e<ga.LEVEL_HD&&(this.showQrcodeTypeWith(ya.LEVEL_HD),this.showWebpageGameAdTypeWith(ya.LEVEL_HD)),e<ga.LEVEL_NORMAL&&(this.showQrcodeTypeWith(ya.LEVEL_NORMAL),this.showWebpageGameAdTypeWith(ya.LEVEL_NORMAL)))},e.prototype.updateVideoPost=function(t){t&&Xt(this.$domNodes.pauseLoading,"background-image","url('".concat(t,"')"))},e.prototype.updateActivePicture=function(t){Jt(this.$domNodes.pauseContent,"txp_ad_active_normal"),re(this.$domNodes.pauseBottomTextSpan,t),oe(this.$domNodes.pauseBottomTextContainer)},e.prototype.updateActiveQrcode=function(t){var e=this;if([x.CARD_BACKGROUND,x.CARD_NO_BACKGROUND].includes(t.mini_game_ui_type))this.gamePauseUI||(this.gamePauseUI=new va({hasBg:t.mini_game_ui_type===x.CARD_BACKGROUND,icon_url:t.icon_url,name:t.name,desc:t.description,btnText:t.btnText,qrcodeTip:t.qrcodeTips||"微信扫一扫查看详情",renderQrCode:function(t,o,i){e.adCore.config.renderQrCode(t,Pe(o,{act:"1025"}),i)},onClick:function(t){e.emit(ma.PAUSE_DETAIL_BTN_CLICK,t)},onClose:function(){e.emit(ma.PAUSE_CLOSE_CLICK)}}),this.gamePauseUI.mount(this.$domNodes.gameDetail),oe(this.$domNodes.gameDetail),ee(this.$domNodes.pauseClose),t.qrcodeUrl&&this.gamePauseUI.renderQrCode(Pe(t.qrcodeUrl,{act:"1025"})));else{this.$domNodes.pauseFloatQrcodeContainer&&t.qrcodeUrl&&this.adCore.config.renderQrCode(this.$domNodes.pauseFloatQrcodeContainer,Pe(t.qrcodeUrl,{act:"1025"}),90),this.$domNodes.pauseCenterQrcodeContainer&&t.qrcodeUrl&&this.adCore.config.renderQrCode(this.$domNodes.pauseCenterQrcodeContainer,Pe(t.qrcodeUrl,{act:"1026"}),200);var o=t.qrcodeTips||"扫码了解详情";re(this.$domNodes.pauseCenterQrcodeScanTips,o),re(this.$domNodes.pauseFloatQrcodeScanTips,o),oe(this.$domNodes.pauseFloatQrcode),oe(this.$domNodes.pauseRightQrcode),oe(this.$domNodes.pauseTopTextContainer),re(this.$domNodes.pauseTopText,t.description),Qt(this.$domNodes.pauseCenterQrcodeItemAvatar,"src",t.icon_url),re(this.$domNodes.pauseRightQrcodeItemTitle,t.name),re(this.$domNodes.pauseRightQrcodeItemText,t.description)}},e.prototype.adjustDomNodes=function(){this.$domNodes.layer&&this.setDomNodes(this.$domNodes.layer,this.$domNodes,"pauseVideoMaterialContainer")},e.prototype.computedPlayerMode=function(t){var e,o=wn(t);this.playerMode!==o&&(this.playerMode=o,null===(e=this.$domNodes.pauseContainer)||void 0===e||e.setAttribute("data-mode",this.playerMode))},e.prototype.reset=function(){this.setMaskVisible(!1),this.setContainerVisible(!1),this.setPauseContentVisible(!1),this.setErrorTipsVisible(!1),this.setVideoMaterialVisible(!1),this.setImageMaterialVisible(!1),this.setTransparentVideoMaterialVisible(!1),this.setPausePictureMaterialVisible(!1),Xt(this.$domNodes.pauseLoading,"background-image",""),te(this.$domNodes.pauseContainer,"txp_zt_3d_video"),Zt(this.$domNodes.pauseImageMaterialImg,"src"),ae(this.$domNodes.pauseVideoMaterialContainer,""),te(this.$domNodes.pauseContent,"txp_ad_active_normal"),re(this.$domNodes.pauseBottomTextSpan,""),ee(this.$domNodes.pauseDetailBtn),ee(this.$domNodes.pauseFloatQrcode),ee(this.$domNodes.pauseRightQrcode),ee(this.$domNodes.pauseTopTextContainer),re(this.$domNodes.pauseTopText,""),Qt(this.$domNodes.pauseCenterQrcodeItemAvatar,"src",""),re(this.$domNodes.pauseRightQrcodeItemTitle,""),re(this.$domNodes.pauseRightQrcodeItemText,""),oe(this.$domNodes.pauseClose),this.$domNodes.gameDetail.innerHTML="",this.gamePauseUI=void 0},e.prototype.resizePausePictureContainer=function(t,e){Xt(this.$domNodes.pausePictureContainer,{width:"".concat(t,"px"),height:"".concat(e,"px"),top:"0px",left:"0px",right:"0px",bottom:"0px",margin:"auto"}),Xt(this.$domNodes.pausePictureImg,{width:"".concat(t,"px"),height:"".concat(e,"px")})},e.prototype.updatePausePictureDspName=function(t){ae(this.$domNodes.pausePictureDspName,t)},e.prototype.updatePausePictureImgCursor=function(t){Xt(this.$domNodes.pausePictureImg,"cursor",t)},e.prototype.updatePausePictureImgSrc=function(t){this.$domNodes.pausePictureImg&&(t?this.$domNodes.pausePictureImg.src=t:Zt(this.$domNodes.pausePictureImg,"src"))},e.prototype.mount=function(){t.prototype.mount.call(this),this.$domNodes.layer&&(this.$domNodes.layer.style.cssText="position: absolute; top: 0px; right: 0px; width: 100%; height: 100%; z-index: 4; pointer-events: none;")},e.prototype.getDomEvents=function(){var t=this,e=!1;return[{el:this.$domNodes.pauseContent,eventName:vn.MOUSE_ENTER,listener:function(o){o.stopPropagation(),e||(t.emit(ma.PAUSE_CONTENT_HOVER),e=!0,setTimeout((function(){e=!1}),1e3))}},{el:this.$domNodes.pauseClose,eventName:vn.CLICK,listener:function(e){e.stopPropagation(),t.emit(ma.PAUSE_CLOSE_CLICK)}},{el:this.$domNodes.pauseMute,eventName:vn.CLICK,listener:function(e){e.stopPropagation(),t.emit(ma.PAUSE_MUTE_CLICK)}},{el:this.$domNodes.pauseErrorTipsBtn,eventName:vn.CLICK,listener:function(e){e.stopPropagation(),t.emit(ma.PAUSE_RETRY_CLICK)}},{el:this.$domNodes.pauseContent,eventName:vn.CLICK,listener:function(e){e.stopPropagation(),t.emit(ma.PAUSE_LINK_AREA_CLICK,un.AD_VIEW_AREA)}},this.forwardActionTypeDomEvent(this.$domNodes.pauseTopTextContainer,un.AD_DETAIL),this.forwardActionTypeDomEvent(this.$domNodes.pauseFloatQrcode,un.AD_DETAIL),this.forwardActionTypeDomEvent(this.$domNodes.pauseRightQrcode,un.AD_DETAIL),this.forwardActionTypeDomEvent(this.$domNodes.pauseBottomTextContainer,un.AD_DETAIL),this.forwardActionTypeDomEvent(this.$domNodes.pauseDetailBtn,un.AD_ACTION_BUTTON),this.forwardActionTypeDomEvent(this.$domNodes.pauseCenterQrcodeItemAvatar,un.ADVERTISER_LOGO),this.forwardActionTypeDomEvent(this.$domNodes.pauseRightQrcodeItemTitle,un.ADVERTISER_NAME),this.forwardActionTypeDomEvent(this.$domNodes.pauseRightQrcodeItemText,un.AD_TITLE),this.forwardActionTypeDomEvent(this.$domNodes.pauseBottomTextSpan,un.AD_TITLE),this.forwardActionTypeDomEvent(this.$domNodes.pauseTopText,un.AD_TITLE),this.forwardActionTypeDomEvent(this.$domNodes.pauseCenterQrcodeContainer,un.AD_ACTION_BUTTON),this.forwardActionTypeDomEvent(this.$domNodes.pauseFloatQrcodeContainer,un.AD_ACTION_BUTTON),{el:this.$domNodes.pauseErrorTips,eventName:vn.CLICK,listener:function(t){t.stopPropagation()}},{el:this.$domNodes.pauseLoading,eventName:vn.CLICK,listener:function(t){t.stopPropagation()}},{el:this.$domNodes.pauseImageMaterialImg,eventName:vn.LOAD,listener:function(e){t.emit(ma.PAUSE_IMAGE_MATERIAL_IMG_LOAD,e)}},{el:this.$domNodes.pauseImageMaterialImg,eventName:vn.ERROR,listener:function(){t.emit(ma.PAUSE_IMAGE_MATERIAL_IMG_ERROR)}},this.forwardDomEvent(this.$domNodes.pausePictureImg,ma.PAUSE_LINK_AREA_CLICK),this.forwardDomEvent(this.$domNodes.pausePictureImg,ma.PAUSE_IMAGE_MATERIAL_IMG_LOAD,vn.LOAD),this.forwardDomEvent(this.$domNodes.pausePictureImg,ma.PAUSE_IMAGE_MATERIAL_IMG_ERROR,vn.ERROR),this.forwardDomEvent(this.$domNodes.pausePictureClose,ma.PAUSE_CLOSE_CLICK)]},e.prototype.getTemplate=function(){var t=this.roleMap;return'\n      <txpdiv data-role="'.concat(t.pauseContainer,'" class="txp_zt txp_none">\n        \x3c!-- 遮罩层 --\x3e\n        <txpdiv data-role="').concat(t.pauseMask,'" class="txp_zt_ad_mask txp_none"></txpdiv>\n    \n        \x3c!-- 内容区域 --\x3e\n        <txpdiv data-role="').concat(t.pauseContent,'" class="txp_zt_content txp_none">\n          \x3c!-- loading 提示 --\x3e\n          <txpdiv data-role="').concat(t.pauseLoading,'" class="txp_zt_loading txp_overlay_loading txp_none">\n            <txpdiv class="txp_icon_loading"></txpdiv>\n          </txpdiv>\n          \x3c!-- 错误提示 --\x3e\n          <txpdiv data-role="').concat(t.pauseErrorTips,'" class="txp_zt_err_tips txp_none">\n            <txpdiv class="txp_zt_err_tips_text">视频加载失败，请点击重试</txpdiv>\n            <txpdiv data-role="').concat(t.pauseErrorTipsBtn,'" class="txp_zt_err_tips_btn">点击重试</txpdiv>\n          </txpdiv>\n          \x3c!-- 视频素材容器 --\x3e\n          <txpdiv data-role="').concat(t.pauseVideoMaterialContainer,'" class="txp_zt_video_material txp_none"></txpdiv>\n          \x3c!-- 图片素材容器 --\x3e\n          <txpdiv data-role="').concat(t.pauseImageMaterialContainer,'" class="txp_zt_image_material txp_none">\n            <img data-role="').concat(t.pauseImageMaterialImg,'" style="width:100%; height:100%;" alt="" />\n          </txpdiv>\n          \n          \x3c!-- 顶部半透明文案（仅二维码广告展示） --\x3e\n          <txpdiv data-role="').concat(t.pauseTopTextContainer,'" class="txp_none translucent-top-text-container">\n            <txpdiv data-role="').concat(t.pauseTopText,'" class="translucent-top-text"></txpdiv>\n          </txpdiv>\n    \n          \x3c!-- 右下方悬浮展示的二维码 --\x3e\n          <txpdiv data-role="').concat(t.pauseFloatQrcode,'" class="txp_none float-qrcode">\n            \x3c!-- 二维码容器 --\x3e\n            <txpdiv data-role="').concat(t.pauseFloatQrcodeContainer,'" class="float-code"></txpdiv>\n            \x3c!-- 提示 --\x3e\n            <txpdiv class="scan-tips"><span data-role="').concat(t.pauseFloatQrcodeScanTips,'">扫码了解详情</span></txpdiv>\n          </txpdiv>\n    \n          \x3c!-- 右侧展示的二维码 --\x3e\n          <txpdiv data-role="').concat(t.pauseRightQrcode,'" class="txp_none right-qrcode">\n            \x3c!-- 商品头像 --\x3e\n            <div class="item-avatar-box">\n              <img\n                data-role="').concat(t.pauseCenterQrcodeItemAvatar,'"\n                class="item-avatar"\n                alt=""\n                src="').concat(gn,'"\n              />\n            </div>\n            \x3c!-- 商品名称 --\x3e\n            <div data-role="').concat(t.pauseRightQrcodeItemTitle,'" class="item-title"></div>\n            <div data-role="').concat(t.pauseRightQrcodeItemText,'" class="item-text"></div>\n            \x3c!-- 二维码容器 --\x3e\n            <txpdiv data-role="').concat(t.pauseCenterQrcodeContainer,'" class="right-code"></txpdiv>\n            \x3c!-- 提示 --\x3e\n            <txpdiv data-role="').concat(t.pauseCenterQrcodeScanTips,'" class="scan-tips">扫码了解详情</txpdiv>\n          </txpdiv>\n    \n          \x3c!-- 小游戏样式 --\x3e\n          <div data-role="').concat(this.roleMap.gameDetail,'" class="game_detail txp_none"></div>\n    \n          \x3c!-- 关闭按钮 --\x3e\n          <txpdiv data-role="').concat(t.pauseClose,'" class="txp_zt_close">\n            广告\n            <txpidv class="close">\n              <img\n                class="not-hover"\n                src="').concat(_n,'"\n                alt=""\n              />\n            </txpidv>\n          </txpdiv>\n          \x3c!-- 静音切换 --\x3e\n          <txpdiv data-role="').concat(t.pauseMute,'" class="txp_zt_mute volume txp_none">\n            <svg viewBox="0 0 20 20" class="txp_svg_volume txp_svg_symbol">\n              <path\n                d="M16.714 15.593l-.01-.01a1 1 0 0 1-1.705-.708c0-.287.124-.542.317-.724C16.354 13.073 17 11.614 17 10s-.645-3.072-1.682-4.151A.993.993 0 0 1 15 5.125a1 1 0 0 1 1-1c.3 0 .561.139.744.348l.017-.016A7.969 7.969 0 0 1 19 10c0 2.178-.874 4.15-2.286 5.593zm-3.999 3.122a.956.956 0 0 1-.688.28c-.009 0-.018.005-.027.005a.984.984 0 0 1-.75-.357L5.818 15H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h3.818l5.432-3.643A.984.984 0 0 1 12 1c.009 0 .017.005.026.005a.954.954 0 0 1 .968.967c.001.01.006.018.006.028v16c0 .009-.005.017-.005.026a.959.959 0 0 1-.28.689zM6.75 6.643A.984.984 0 0 1 6 7H3v6h3c.304 0 .567.143.75.357l4.25 2.85V3.792L6.75 6.643z"\n              ></path>\n            </svg>\n            <svg viewBox="0 0 20 20" class="txp_svg_volume_mute txp_svg_symbol">\n              <path\n                d="M16.394 12.566A5.88 5.88 0 0 0 17 10a5.97 5.97 0 0 0-1.682-4.151.993.993 0 0 1-.318-.724 1 1 0 0 1 1-1c.3 0 .561.139.745.348l.016-.016A7.969 7.969 0 0 1 19 10a7.934 7.934 0 0 1-1.116 4.055l-1.49-1.489zM11 3.792L8.978 5.149 7.62 3.792l3.63-2.435A.984.984 0 0 1 12 1c.009 0 .017.005.026.005a.954.954 0 0 1 .968.967c.001.01.006.018.006.028v7.171l-2-2V3.792zm7.864 14.072a.999.999 0 0 1-1.414 0L2.136 2.55a1 1 0 1 1 1.415-1.415L18.864 16.45a1 1 0 0 1 0 1.414zM3.171 5l2 2H3v6h3c.304 0 .567.143.75.357l4.25 2.85v-3.379l2 2V18c0 .009-.005.017-.005.027a.955.955 0 0 1-.967.968c-.01 0-.019.005-.028.005a.984.984 0 0 1-.75-.357L5.818 15H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.171z"\n              ></path>\n            </svg>\n          </txpdiv>\n          \x3c!-- 进度条 --\x3e\n          <txpdiv data-role="').concat(t.pauseProgressContainer,'" class="txp_zt_progress txp_none">\n            <txpdiv data-role="').concat(t.pauseProgress,'" class="progress"></txpdiv>\n          </txpdiv>\n          \x3c!-- 底部文案 --\x3e\n          <txpdiv data-role="').concat(t.pauseBottomTextContainer,'" class="bottom_desc_text_container txp_none">\n            <txpdiv data-role="').concat(t.pauseBottomText,'" class="bottom_desc_text">\n              <span data-role="').concat(t.pauseBottomTextSpan,'"></span>\n            </txpdiv>\n          </txpdiv>\n          \x3c!-- 查看详情 --\x3e\n          <txpdiv data-role="').concat(t.pauseDetailBtn,'" class="txp_zt_detail txp_none">\n            <img\n              src="').concat(gn,'"\n              alt=""\n            />\n            <txpidv data-role="').concat(t.pauseDetailBtnText,'"></txpidv>\n          </txpdiv>\n        </txpdiv>\n        \n        \x3c!-- 合约图片区域  --\x3e\n        <txpdiv data-role="').concat(t.pausePictureContainer,'" class="txp_ad txp_none" style="position: absolute;z-index: 2; cursor: pointer;">\n          <button data-role="').concat(t.pausePictureClose,'" class="txp_btn txp_btn_close txp_btn_close_ad" title="关闭该广告" ></button>\n          <img data-role="').concat(t.pausePictureImg,'" alt="" />\n          <txpdiv style="left:8px;bottom:8px;position:absolute;opacity:0.6;font-size:12px;z-index:99">\n            <txpdiv style="background:#000;display:inline-block;box-shadow:2px 2px #000">广告</txpdiv>\n            <txpdiv data-role="').concat(t.pausePictureDspName,'" style="display:inline-block;margin-left:10px;text-shadow:2px 2px #000" />\n          </txpdiv>\n          <txpdiv data-role="').concat(t.pausePictureVpaidContainer,'" />\n        </txpdiv>\n      </txpdiv>\n    ')},e.prototype.showQrcodeTypeWith=function(t){this.resizeShowType(this.$domNodes.pauseRightQrcode,t),this.resizeShowType(this.$domNodes.pauseTopText,t)},e.prototype.showWebpageGameAdTypeWith=function(t){this.resizeShowType(this.$domNodes.pauseBottomText,t)},e.prototype.resizeShowType=function(t,e){t&&(te(t,"level-full"),te(t,"level-high-hd"),te(t,"level-hd"),te(t,"level-normal"),e===ya.LEVEL_FULL?Jt(t,"level-full"):e===ya.LEVEL_HIGH_HD?Jt(t,"level-high-hd"):e===ya.LEVEL_HD?Jt(t,"level-hd"):e===ya.LEVEL_NORMAL&&Jt(t,"level-normal"))},e.prototype.forwardActionTypeDomEvent=function(t,e){var o=this;return{el:t,eventName:vn.CLICK,listener:function(t){t.stopPropagation(),o.emit(ma.PAUSE_DETAIL_BTN_CLICK,e)}}},e}(In),Ia=function(t){function e(e){var o=t.call(this,e)||this;return o.handleCloseClick=function(){var t;o.data.closeBtnClicked=!0,o.stop(),pe(M.FEEDBACK,null===(t=o.adInfo)||void 0===t?void 0:t.frequencyControlConfig)},o.handleDetailClick=function(t){void 0===t&&(t=un.AD_VIEW_AREA);var e=o.data.showTime?Date.now()-o.data.showTime:-1;o.doClickAction(o.adInfo,{actionType:t,playTime:e,order_type:o.adInfo.orderType})},o.handleContentHover=function(){o.adInfo.data.poster.action_button.action_type===v.QRCODE&&o.adInfo.reporter.reportEffects()},o.handleImageLoad=function(){var t;o.data.endLoadTime=Date.now(),o.canplayHandler(),o.loadCompleteHandle({adType:o.adType,adInfo:o.adInfo,index:o.adInfo.orderIdx,loadingTime:o.data.endLoadTime-o.data.startLoadTime,materialUrl:null===(t=o.adInfo.imageMaterial)||void 0===t?void 0:t.url,materialType:o.adInfo.materialType}),o.show()},o.handleImageError=function(){var t;o.data.endLoadTime=Date.now(),o.data.errorCode=Wi.LOAD_FAIL,o.loadCompleteHandle({adType:o.adType,adInfo:o.adInfo,index:o.adInfo.orderIdx,hasError:"1",detailErrorCode:Wi.LOAD_FAIL,loadingTime:o.data.endLoadTime-o.data.startLoadTime,materialUrl:null===(t=o.adInfo.imageMaterial)||void 0===t?void 0:t.url,materialType:o.adInfo.materialType}),o.stop()},o.handleToggleMiniPlayer=function(t){t.data.isOpened&&o.stop()},o.pauseUI=new Ca({adCore:o.adCore,container:o.config.createLayer(o.adType)}),o.pauseUI.init(),o.pauseUI.reset(),o.data.startTime=Date.now(),o.adCore.outerEvent.on(ki.TOGGLE_MINI_PLAYER,o.handleToggleMiniPlayer),o}return i(e,t),e.prototype.stop=function(){this.state!==Zi.END&&(this.hide(),t.prototype.stop.call(this),this.vrReportEnded(),this.destroy())},e.prototype.destroy=function(){this.pauseUI.destroy(),this.adCore.outerEvent.off(ki.TOGGLE_MINI_PLAYER,this.handleToggleMiniPlayer),t.prototype.destroy.call(this)},e.prototype.updateUI=function(){var t,e,o,i=this.adInfo.data.poster.action_button,n=(null===(t=i.base)||void 0===t?void 0:t.action_title.first_title)||"了解详情";this.pauseUI.updateClickable(this.adInfo.clickable);var r=this.adInfo.data.poster.advertiser;if(i.action_type!==v.QRCODE)i.action_type===v.PICTURE&&this.pauseUI.updateActivePicture(r.description),this.pauseUI.updateActionButton({btnText:n,textColor:null===(e=i.base)||void 0===e?void 0:e.text_color,bgColor:null===(o=i.base)||void 0===o?void 0:o.bg_color,show:!i.display_none});else{var a=this.adInfo.data.order.ad_action.scan,s=D(D({},r),{btnText:n,qrcodeUrl:null==a?void 0:a.short_link,qrcodeTips:null==a?void 0:a.qrcode_tips});this.pauseUI.updateActiveQrcode(s)}},e.prototype.bindUIEvent=function(){this.pauseUI.on(ma.PAUSE_CLOSE_CLICK,this.handleCloseClick),this.pauseUI.on(ma.PAUSE_LINK_AREA_CLICK,this.handleDetailClick),this.pauseUI.on(ma.PAUSE_DETAIL_BTN_CLICK,this.handleDetailClick),this.pauseUI.on(ma.PAUSE_CONTENT_HOVER,this.handleContentHover)},e.prototype.unbindUIEvent=function(){this.pauseUI.off(ma.PAUSE_CLOSE_CLICK,this.handleCloseClick),this.pauseUI.off(ma.PAUSE_LINK_AREA_CLICK,this.handleDetailClick),this.pauseUI.off(ma.PAUSE_DETAIL_BTN_CLICK,this.handleDetailClick),this.pauseUI.off(ma.PAUSE_CONTENT_HOVER,this.handleContentHover)},e.prototype.getLoadTime=function(){var t=this.data;return t.startLoadTime&&t.endLoadTime?t.endLoadTime-t.startLoadTime:-1},e.prototype.vrReportEnded=function(){var t;if(!this.data.isFirstClose&&this.data.showTime){var e=this.data;this.adCore.vr.reportEnded(this.order,{load_time:this.getLoadTime(),close_time:e.closeBtnClicked&&this.data.showTime?Date.now()-this.data.showTime:-1,ad_playtime:e.startTime?Date.now()-e.startTime:-1,error_code:this.data.errorCode,first_view:null!==(t=e.showTime)&&void 0!==t?t:-1},this.getVrExtraData()),e.isFirstClose=!0}},e.prototype.getVrExtraData=function(){return{order_type:this.adInfo.orderType,is_active_scan:this.adInfo.isScanActive}},e.prototype.reportExposure=function(){this.data.hasReportView||(this.data.hasReportView=!0,this.doExposure(this.adInfo),this.adCore.vr.reportExposure(this.adInfo,!0,this.getVrExtraData()))},e}(nn),xa=function(t){function e(e){var o=t.call(this,e)||this;return o.pauseUI.setPauseContentVisible(!0),o.updateUI(),o.bindUIEvent(),o}return i(e,t),e.prototype.load=function(){var e,o;(null===(o=null===(e=this.adInfo)||void 0===e?void 0:e.imageMaterial)||void 0===o?void 0:o.url)?(t.prototype.load.call(this),this.adCore.event.emit(Ge.AD_LOAD_START,{adType:this.order.adType,adInfo:this.adInfo}),this.data.startLoadTime=Date.now(),this.pauseUI.setImageMaterialVisible(!0),this.pauseUI.updateImageMaterial(this.adInfo.imageMaterial.url)):this.stop()},e.prototype.show=function(){t.prototype.show.call(this),this.pauseUI.setContainerVisible(!0),this.pauseUI.setLoadingVisible(!1),this.pauseUI.resizeMaterialContainerSize(this.adInfo.isActive),this.reportExposure()},e.prototype.hide=function(){t.prototype.hide.call(this),this.pauseUI.setContainerVisible(!1)},e.prototype.destroy=function(){this.data.hasDestroy||(this.unbindUIEvent(),this.pauseUI.reset(),t.prototype.destroy.call(this))},e.prototype.resize=function(t){!t||t.left&&t.top||this.pauseUI.resizeMaterialContainerSize(this.adInfo.isActive,t.width)},e.prototype.bindUIEvent=function(){t.prototype.bindUIEvent.call(this),this.pauseUI.on(ma.PAUSE_IMAGE_MATERIAL_IMG_LOAD,this.handleImageLoad),this.pauseUI.on(ma.PAUSE_IMAGE_MATERIAL_IMG_ERROR,this.handleImageError)},e.prototype.unbindUIEvent=function(){t.prototype.unbindUIEvent.call(this),this.pauseUI.off(ma.PAUSE_IMAGE_MATERIAL_IMG_LOAD,this.handleImageLoad),this.pauseUI.off(ma.PAUSE_IMAGE_MATERIAL_IMG_ERROR,this.handleImageError)},e}(Ia);var Ta=((Ea={})[mn.SIZE_480_270]=120,Ea[mn.SIZE_590_328]=160,Ea[mn.SIZE_1110_624]=210,Ea[mn.SIZE_1920_1080]=340,Ea[mn.DEFAULT]=540,Ea),ba=function(t){function e(e){var o=t.call(this,e)||this;return o.logger=o.adCore.logger.createLogger("ContractPicturePauseAd"),o.imgSizePromise=new _e,o.handlePicImageLoad=function(t){var e=t.target;o.imgSizePromise.resolve({width:e.width,height:e.height}),o.handleImageLoad()},o.bindUIEvent(),o}return i(e,t),e.prototype.load=function(){var e,o,i,n;if(null===(o=null===(e=this.adInfo)||void 0===e?void 0:e.imageMaterial)||void 0===o?void 0:o.url){t.prototype.load.call(this),this.adCore.event.emit(Ge.AD_LOAD_START,{adType:this.order.adType,adInfo:this.adInfo}),this.pauseUI.updatePausePictureDspName(null===(n=null===(i=this.adInfo.data.poster)||void 0===i?void 0:i.title)||void 0===n?void 0:n.dsp_name);var r=this.adCore.config.getPlayerSize(),a=r.playerWidth,s=r.playerHeight;this.resize({width:a,height:s}),this.pauseUI.updatePausePictureImgCursor(this.adInfo.clickable?"pointer":"auto"),this.data.startLoadTime=Date.now(),this.pauseUI.updatePausePictureImgSrc(this.adInfo.imageMaterial.url)}else this.stop()},e.prototype.show=function(){t.prototype.show.call(this),this.pauseUI.setPausePictureMaterialVisible(!0),this.pauseUI.setContainerVisible(!0),this.adCore.config.resetBarrageZindex(),this.reportExposure()},e.prototype.hide=function(){this.data.isShow&&(this.pauseUI.setPausePictureMaterialVisible(!1),this.pauseUI.setContainerVisible(!1),t.prototype.hide.call(this))},e.prototype.destroy=function(){this.pauseUI.updatePausePictureImgSrc(),this.unbindUIEvent(),this.pauseUI.reset(),t.prototype.destroy.call(this)},e.prototype.setAdSmallWindow=function(t){t&&this.resize(t)},e.prototype.resize=function(t){var e=this;if(!(!t||t.left&&t.top)&&t.width&&t.height&&this.adInfo.imageMaterial){var o=this.adInfo.imageMaterial,i=o.width,n=o.height;i&&n?(this.pauseUI.computedPlayerMode({width:t.width,height:t.height}),this.getPicSize().then((function(t){var o=t.width,r=t.height;if(i>o||n>r){var a=function(t,e,o,i){if(t<=0||e<=0||o<=0||i<=0)return 0;var n=o/t,r=i/e;return Math.min(n,r)||1}(i,n,o,r);i*=a,n*=a}e.pauseUI.resizePausePictureContainer(i,n)}))):this.updateContentSize({width:t.width,height:t.height})}},e.prototype.bindUIEvent=function(){this.pauseUI.on(ma.PAUSE_LINK_AREA_CLICK,this.handleDetailClick),this.pauseUI.on(ma.PAUSE_CLOSE_CLICK,this.handleCloseClick),this.pauseUI.on(ma.PAUSE_IMAGE_MATERIAL_IMG_LOAD,this.handlePicImageLoad),this.pauseUI.on(ma.PAUSE_IMAGE_MATERIAL_IMG_ERROR,this.handleImageError)},e.prototype.unbindUIEvent=function(){this.pauseUI.off(ma.PAUSE_LINK_AREA_CLICK,this.handleDetailClick),this.pauseUI.off(ma.PAUSE_CLOSE_CLICK,this.handleCloseClick),this.pauseUI.off(ma.PAUSE_IMAGE_MATERIAL_IMG_LOAD,this.handlePicImageLoad),this.pauseUI.off(ma.PAUSE_IMAGE_MATERIAL_IMG_ERROR,this.handleImageError)},e.prototype.updateContentSize=function(t){var e=this;this.pauseUI.computedPlayerMode(t),this.getPicSize().then((function(t){e.pauseUI.resizePausePictureContainer(t.width,t.height)}))},e.prototype.getPicSize=function(){var t=this;return this.imgSizePromise.then((function(e){var o=Ta[t.pauseUI.getPlayerMode()];return{height:o,width:o/e.height*e.width}}))},e}(Ia),La="txp_full_screen_pause";fn(".txp_full_screen_pause-btn{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background-color:rgba(51,51,51,.6);border-radius:48px;color:#fff;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:14px;font-style:normal;font-weight:500;height:40px;justify-content:center;line-height:22px;padding:0 16px;-webkit-transition:background-color .3s ease-in-out;transition:background-color .3s ease-in-out;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.txp_full_screen_pause-btn img{height:20px;margin-right:4px;width:20px}.txp_full_screen_pause-btn:hover{background-color:#ff183e!important}");var Pa,Na=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs={detailBtn:e.createRef(),btnText:e.createRef()},e}return i(e,t),e.prototype.render=function(){var t=La,e=this.props,o=e.acttype,i=e.eid,n=e.onClick,r=e.btnText,a=e.cssText;return Pn("div",{ref:this.$refs.detailBtn,class:"".concat(t,"-btn txp_none"),"data-acttype":o,"data-eid":i,onClick:n,style:a},Pn("img",{src:gn,alt:""}),Pn("div",{ref:this.$refs.btnText},r||""))},e.prototype.getUpdate=function(){var t=this;return{visible:function(e,o){On(t.$refs.detailBtn.value,e,o)},btnText:function(e,o){e!==o&&(t.$refs.btnText.value.innerText=e||"")},cssText:function(e){t.$refs.detailBtn.value.style.cssText=e||""}}},e}(xn);fn(".txp-center-code{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background-color:rgba(0,0,0,.3);bottom:0;display:none;justify-content:center;left:0;pointer-events:auto;position:absolute;right:0;top:0}.txp-center-code-content{text-align:center}.txp-center-code-name{color:#fff;font-size:20px;line-height:normal;margin-bottom:12px;overflow:hidden;text-align:center;text-overflow:ellipsis;text-shadow:0 1px 3px rgba(0,0,0,.2);white-space:nowrap}.txp-center-code-card{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background-color:#fff;border-radius:8px;-webkit-box-shadow:0 0 20px 0 rgba(0,0,0,.2);box-shadow:0 0 20px 0 rgba(0,0,0,.2);display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;justify-content:center;padding:20px 16px;position:relative;width:240px}.txp-center-code-qr-tips{color:rgba(0,0,0,.4);font-size:16px;line-height:normal;margin-top:12px}.txp-center-code-qr-icon{border:2px solid #fff;border-radius:4px;height:48px;left:96px;position:absolute;top:96px;width:48px}.txp-center-code-close{cursor:pointer;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;margin-top:12px}.txp-center-code-close:hover path{fill:#fe5c38}.txp-center-code-close-tag{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:rgba(0,0,0,.5);border-radius:4px;cursor:pointer;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;padding:2px 4px 2px 6px;position:absolute;right:-6px;top:0;-webkit-transform:translateX(100%);transform:translateX(100%)}.txp-center-code-close-tag>span{color:#fff;font-size:12px;font-style:normal;font-weight:500;line-height:16px}.txp-center-code-close-tag>svg{height:12px;margin-left:2px;width:12px}.txp-center-code[data-mode=size_480_270],.txp-center-code[data-mode=size_590_328]{display:-webkit-box;display:-ms-flexbox;display:flex}.txp-center-code[data-mode=size_480_270] .txp-center-code-card,.txp-center-code[data-mode=size_590_328] .txp-center-code-card{padding:10px 10px 8px;width:110px}.txp-center-code[data-mode=size_480_270] .txp-center-code-name,.txp-center-code[data-mode=size_590_328] .txp-center-code-name{display:none}.txp-center-code[data-mode=size_480_270] .txp-center-code-qr-tips,.txp-center-code[data-mode=size_590_328] .txp-center-code-qr-tips{font-size:10px;margin-top:4px}.txp-center-code[data-mode=size_480_270] .txp-center-code-close,.txp-center-code[data-mode=size_480_270] .txp-center-code-qr-icon,.txp-center-code[data-mode=size_590_328] .txp-center-code-close,.txp-center-code[data-mode=size_590_328] .txp-center-code-qr-icon{display:none}.txp-center-code[data-mode=size_480_270] .txp-center-code-close-tag,.txp-center-code[data-mode=size_590_328] .txp-center-code-close-tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.txp-center-code[data-mode=size_1110_624]{display:-webkit-box;display:-ms-flexbox;display:flex}.txp-center-code[data-mode=size_1110_624] .txp-center-code-card{padding:12px;width:152px}.txp-center-code[data-mode=size_1110_624] .txp-center-code-name{display:none}.txp-center-code[data-mode=size_1110_624] .txp-center-code-qr-tips{font-size:12px;margin-top:10px}.txp-center-code[data-mode=size_1110_624] .txp-center-code-close,.txp-center-code[data-mode=size_1110_624] .txp-center-code-qr-icon{display:none}.txp-center-code[data-mode=size_1110_624] .txp-center-code-close-tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.txp-center-code[data-mode=size_1920_1080]{display:-webkit-box;display:-ms-flexbox;display:flex}.txp-center-code[data-mode=size_1920_1080] .txp-center-code-close-tag{display:none}.txp-center-code[data-mode=default]{display:-webkit-box;display:-ms-flexbox;display:flex}.txp-center-code[data-mode=default] .txp-center-code-name{margin-bottom:16px}.txp-center-code[data-mode=default] .txp-center-code-card{padding:20px;width:280px}.txp-center-code[data-mode=default] .txp-center-code-qr-tips{font-size:18px}.txp-center-code[data-mode=default] .txp-center-code-qr-icon{height:56px;left:112px;top:112px;width:56px}.txp-center-code[data-mode=default] .txp-center-code-close-tag{display:none}");var Da=((Pa={})[mn.SIZE_480_270]=90,Pa[mn.SIZE_590_328]=90,Pa[mn.SIZE_1110_624]=128,Pa[mn.SIZE_1920_1080]=208,Pa[mn.DEFAULT]=240,Pa),Oa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs={container:e.createRef(),code:e.createRef(),name:e.createRef(),iconUrl:e.createRef(),qrcodeTips:e.createRef()},e.handleClick=function(t){t.stopPropagation()},e.handleClose=function(t){t.stopPropagation(),e.props.onClose()},e}return i(e,t),e.prototype.resize=function(t){var e=wn(t);this.playerMode!==e&&(this.playerMode=e,this.$refs.container.value.setAttribute("data-mode",this.playerMode),this.renderQrCode())},e.prototype.render=function(){var t="txp-center-code";return Pn("div",{ref:this.$refs.container,class:"".concat(t," ").concat(this.props.visible?"":"txp_none"),onClick:this.handleClick},Pn("div",{class:"".concat(t,"-content")},Pn("div",{ref:this.$refs.name,class:"".concat(t,"-name")},this.props.name),Pn("div",{class:"".concat(t,"-card")},Pn("div",{ref:this.$refs.code,class:"".concat(t,"-qr-code")}),Pn("img",{ref:this.$refs.iconUrl,class:"".concat(t,"-qr-icon"),alt:"",src:this.props.iconUrl||""}),Pn("div",{ref:this.$refs.qrcodeTips,class:"".concat(t,"-qr-tips")},this.props.qrcodeTips),Pn("div",{class:"".concat(t,"-close-tag"),onClick:this.handleClose},Pn("span",null,"广告"),Pn("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},Pn("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.46967 8.23008C2.17678 8.52297 2.17678 8.99784 2.46967 9.29074C2.76256 9.58363 3.23744 9.58363 3.53033 9.29074L6.00526 6.81581L8.48021 9.29076C8.7731 9.58365 9.24798 9.58365 9.54087 9.29076C9.83376 8.99787 9.83376 8.52299 9.54087 8.2301L7.06592 5.75515L9.54074 3.28033C9.83363 2.98744 9.83363 2.51256 9.54074 2.21967C9.24784 1.92678 8.77297 1.92678 8.48008 2.21967L6.00526 4.69449L3.53046 2.21969C3.23757 1.9268 2.76269 1.9268 2.4698 2.21969C2.17691 2.51259 2.17691 2.98746 2.4698 3.28035L4.9446 5.75515L2.46967 8.23008Z",fill:"white"})))),Pn("div",{class:"".concat(t,"-close"),onClick:this.handleClose},Pn("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 26 26",fill:"none"},Pn("rect",{width:"26",height:"26",rx:"13",fill:"black","fill-opacity":"0.3"}),Pn("path",{d:"M8.64645 8.64645L8.29289 8.29289L8.29289 8.29289L8.64645 8.64645ZM8.64645 9.35355L8.29289 9.70711L8.29289 9.70711L8.64645 9.35355ZM9.35355 8.64645L9 9L9 9L9.35355 8.64645ZM13 12.2929L12.6464 12.6464L13 13L13.3536 12.6464L13 12.2929ZM16.6464 8.64645L17 9V9L16.6464 8.64645ZM17.3536 8.64645L17.7071 8.29289L17.7071 8.29289L17.3536 8.64645ZM17.3536 9.35355L17.7071 9.70711V9.70711L17.3536 9.35355ZM13.7071 13L13.3536 12.6464L13 13L13.3536 13.3536L13.7071 13ZM17.3536 16.6464L17.7071 16.2929L17.7071 16.2929L17.3536 16.6464ZM17.3536 17.3536L17.7071 17.7071L17.7071 17.7071L17.3536 17.3536ZM16.6464 17.3536L16.2929 17.7071L16.2929 17.7071L16.6464 17.3536ZM13 13.7071L13.3536 13.3536L13 13L12.6464 13.3536L13 13.7071ZM9.35355 17.3536L9.70711 17.7071H9.70711L9.35355 17.3536ZM8.64645 17.3536L8.29289 17.7071L8.29289 17.7071L8.64645 17.3536ZM8.64645 16.6464L8.29289 16.2929L8.29289 16.2929L8.64645 16.6464ZM12.2929 13L12.6464 13.3536L13 13L12.6464 12.6464L12.2929 13ZM8.29289 8.29289C7.90237 8.68342 7.90237 9.31658 8.29289 9.70711L9 9L9 9L8.29289 8.29289ZM9.70711 8.29289C9.31658 7.90237 8.68342 7.90237 8.29289 8.29289L9 9L9 9L9.70711 8.29289ZM13.3536 11.9393L9.70711 8.29289L9 9L12.6464 12.6464L13.3536 11.9393ZM13.3536 12.6464L17 9L16.2929 8.29289L12.6464 11.9393L13.3536 12.6464ZM17 9V9L17.7071 8.29289C17.3166 7.90237 16.6834 7.90237 16.2929 8.29289L17 9ZM17 9V9L17.7071 9.70711C18.0976 9.31658 18.0976 8.68342 17.7071 8.29289L17 9ZM17 9L13.3536 12.6464L14.0607 13.3536L17.7071 9.70711L17 9ZM17.7071 16.2929L14.0607 12.6464L13.3536 13.3536L17 17L17.7071 16.2929ZM17.7071 17.7071C18.0976 17.3166 18.0976 16.6834 17.7071 16.2929L17 17V17L17.7071 17.7071ZM16.2929 17.7071C16.6834 18.0976 17.3166 18.0976 17.7071 17.7071L17 17H17L16.2929 17.7071ZM12.6464 14.0607L16.2929 17.7071L17 17L13.3536 13.3536L12.6464 14.0607ZM12.6464 13.3536L9 17L9.70711 17.7071L13.3536 14.0607L12.6464 13.3536ZM9 17H9L8.29289 17.7071C8.68342 18.0976 9.31658 18.0976 9.70711 17.7071L9 17ZM9 17V17L8.29289 16.2929C7.90237 16.6834 7.90237 17.3166 8.29289 17.7071L9 17ZM9 17L12.6464 13.3536L11.9393 12.6464L8.29289 16.2929L9 17ZM8.29289 9.70711L11.9393 13.3536L12.6464 12.6464L9 9L8.29289 9.70711Z",fill:"white"})))))},e.prototype.getUpdate=function(){var t=this;return{visible:function(e,o){On(t.$refs.container.value,e,o)},name:function(e,o){e!==o&&(t.$refs.name.value.innerText=e||"")},iconUrl:function(e,o){e!==o&&Qt(t.$refs.iconUrl.value,"src",e||"")},qrcodeUrl:function(e,o){e!==o&&t.renderQrCode()},qrcodeTips:function(e,o){e!==o&&(t.$refs.qrcodeTips.value.innerText=e||"")}}},e.prototype.renderQrCode=function(){var t=this.getState("qrcodeUrl");if(t&&this.playerMode){var e=this.getCodeSize(this.playerMode);this.props.renderQrCode(this.$refs.code.value,t,e)}},e.prototype.getCodeSize=function(t){return Da[t]},e}(xn);fn(".txp_full_screen_pause-close{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background:rgba(51,51,51,.6);border-radius:18px;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;height:36px;justify-content:center;position:absolute;right:24px;top:16px;width:89px;z-index:1000}");var wa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs={btn:e.createRef()},e.handleClick=function(t){var o,i;t.stopPropagation(),null===(i=(o=e.props).onClick)||void 0===i||i.call(o)},e}return i(e,t),e.prototype.render=function(){return Pn("div",{ref:this.$refs.btn,class:"".concat(La,"-close"),onClick:this.handleClick,style:"top:".concat(this.props.top||"",";left:").concat(this.props.left||"")},"关闭广告")},e.prototype.getUpdate=function(){var t=this;return{top:function(e){e&&(t.$refs.btn.value.style.top=e)},left:function(e){e&&(t.$refs.btn.value.style.left=e)}}},e}(xn);fn(".txp_full_screen_pause-material-container{background-size:100% 100%;height:100%;width:100%}.txp_full_screen_pause-material-container video{background:#000}");var Sa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs={pictureContainer:e.createRef(),videoContainer:e.createRef(),pictureImg:e.createRef()},e}return i(e,t),e.prototype.getVideoContainer=function(){return this.$refs.videoContainer.value},e.prototype.render=function(){var t,e=La;return Pn("fragment",null,Pn("div",{ref:this.$refs.videoContainer,class:"".concat(e,"-material-container txp_none"),"data-acttype":un.AD_VIEW_AREA,"data-eid":"poster"}),Pn("div",{ref:this.$refs.pictureContainer,class:"".concat(e,"-material-container txp_none"),"data-acttype":un.AD_VIEW_AREA,"data-eid":"poster"},Pn("img",{ref:this.$refs.pictureImg,style:"width:100%; height:100%;",alt:"",src:null!==(t=this.props.imgSrc)&&void 0!==t?t:"",onLoad:this.props.onImgLoad})))},e.prototype.getUpdate=function(){var t=this;return{pictureVisible:function(e,o){On(t.$refs.pictureContainer.value,e,o)},videoVisible:function(e,o){On(t.$refs.videoContainer.value,e,o)},imgSrc:function(e){t.$refs.pictureImg.value&&(e?t.$refs.pictureImg.value.src=e:Zt(t.$refs.pictureImg.value,"src"))},postSrc:function(e){Xt(t.$refs.videoContainer.value,"background-image","url('".concat(e,"')"))}}},e}(xn),Ra=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs=e.getRefs(),e.handlePlayIconClick=function(t){t.stopPropagation(),e.props.onPlayIconClick()},e.handleClick=function(t){t.stopPropagation();var o=t.target,i=Nn(o),n=Dn(o);e.props.onClick(i,n)},e.handleBtnClick=function(t){t.stopPropagation(),e.props.onBtnClick(un.AD_ACTION_BUTTON,"ad_action")},e}return i(e,t),Object.defineProperty(e.prototype,"logger",{get:function(){return this.props.logger},enumerable:!1,configurable:!0}),e.prototype.getVideoContainer=function(){return this.$refs.materialContainer.value.getVideoContainer()},e.prototype.updateActionButton=function(t){var e;this.$refs.detailBtn.value.setState({visible:t.show,btnText:null!==(e=t.btnText)&&void 0!==e?e:"点击视频，了解详情"})},e.prototype.updatePlayMask=function(t){this.$refs.playerMask.value.show(t)},e.prototype.hidePlayMask=function(){this.$refs.playerMask.value.hide()},e.prototype.toggleMute=function(t){this.$refs.muteIcon.value.setState({mute:t})},e.prototype.setContainerCursor=function(t){Xt(this.$refs.container.value,"cursor",t)},e.prototype.setMiniPlayer=function(t){t?Jt(this.$refs.container.value,"mini-player"):te(this.$refs.container.value,"mini-player")},e.prototype.getRefs=function(){return{container:this.createRef(),playerMask:this.createRef(),detailBtn:this.createRef(),muteIcon:this.createRef(),materialContainer:this.createRef()}},e.prototype.renderMaterialContainer=function(){return Pn(Sa,{ref:this.$refs.materialContainer,pictureVisible:this.props.pictureVisible,videoVisible:this.props.videoVisible,imgSrc:this.props.imgSrc,postSrc:this.props.postSrc,onImgLoad:this.props.onImgLoad})},e.prototype.getUpdate=function(){var t=this;return{visible:function(e,o){On(t.$refs.container.value,e,o)},muteVisible:function(e){t.$refs.muteIcon.value.setState({visible:e})},playIconVisible:function(e){t.$refs.playerMask.value.setState({visible:e})},pictureVisible:function(e){t.$refs.materialContainer.value.setState({pictureVisible:e})},videoVisible:function(e){t.$refs.materialContainer.value.setState({videoVisible:e})},imgSrc:function(e){t.$refs.materialContainer.value.setState({imgSrc:e})},postSrc:function(e){t.$refs.materialContainer.value.setState({postSrc:e})}}},e}(xn);fn(".txp_full_screen_pause-active{background-color:#000;height:100%;overflow:hidden;position:absolute;width:100%;z-index:1000}.txp_full_screen_pause-active-content,.txp_full_screen_pause-active-mask,.txp_full_screen_pause-active-mask-inner{bottom:0;left:0;position:absolute;right:0;top:0}.txp_full_screen_pause-active-mask{display:none}.txp_full_screen_pause-active-content{-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:14px;font-weight:500;padding:20px}.txp_full_screen_pause-active-left{-webkit-box-orient:vertical;-webkit-box-direction:normal;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:200px}.txp_full_screen_pause-active-info{-webkit-box-flex:1;-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;justify-content:center;-webkit-transform-origin:0 0;transform-origin:0 0}.txp_full_screen_pause-active-info>div{text-align:center;width:100%}.txp_full_screen_pause-active-logo{height:84px;width:84px}.txp_full_screen_pause-active-code{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background:#fff;border-radius:4px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-direction:column;flex-direction:column;justify-content:center;padding:2px;width:84px}.txp_full_screen_pause-active-code .qrcode{height:80px;width:80px}.txp_full_screen_pause-active-code .qrcode-tips{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;color:#000;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:10px;justify-content:center;margin-top:2px}.txp_full_screen_pause-active-only-code .txp_full_screen_pause-active-code{height:84px}.txp_full_screen_pause-active-only-code .qrcode-tips{color:#fff;font-size:14px;line-height:22px;margin-top:12px;text-align:center}.txp_full_screen_pause-active-name{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:20px;justify-content:center;line-height:28px;margin-top:12px}.txp_full_screen_pause-active-name img{height:24px;margin-right:8px;width:24px}.txp_full_screen_pause-active-desc{font-size:16px;line-height:24px;margin-top:10px;opacity:.7}.txp_full_screen_pause-active-right{border-radius:12px;margin-left:16px;overflow:hidden;position:relative}.txp_full_screen_pause-active-right .txp_full_screen_pause-close{right:16px;top:16px}.txp_full_screen_pause-active-right>.txp_full_screen_pause-mute{bottom:12px;left:12px;margin-left:0;position:absolute}.txp_full_screen_pause-active-detail-box{-webkit-box-align:center;-ms-flex-align:center;align-items:center;bottom:16px;display:-webkit-box;display:-ms-flexbox;display:flex;position:absolute;right:16px}.txp_full_screen_pause-active .txp_none,.txp_full_screen_pause-active.txp_none{display:none!important}.txp_full_screen_pause-active.mini-player .txp_full_screen_pause-active-desc{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@supports ((-webkit-backdrop-filter:blur(10px)) or (backdrop-filter:blur(10px))){.txp_full_screen_pause-active-mask{display:block}.txp_full_screen_pause-active-mask-inner{-webkit-backdrop-filter:blur(35px);backdrop-filter:blur(35px);background:rgba(0,0,0,.4)}}");fn(".txp_full_screen_pause-mute{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background:rgba(51,51,51,.6);border-radius:18px;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;height:36px;justify-content:center;margin-left:12px;width:36px}.txp_full_screen_pause-mute .txp_svg_symbol{height:18px;width:18px}.txp_full_screen_pause-mute.volume .txp_svg_volume{display:block}.txp_full_screen_pause-mute.mute .txp_svg_volume,.txp_full_screen_pause-mute.volume .txp_svg_volume_mute{display:none}.txp_full_screen_pause-mute.mute .txp_svg_volume_mute{display:block}");var Ma,Va=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs={container:e.createRef()},e.handleClick=function(t){var o,i;t.stopPropagation(),null===(i=(o=e.props).onToggle)||void 0===i||i.call(o,!e.props.mute)},e}return i(e,t),e.prototype.render=function(){return Pn("div",{ref:this.$refs.container,class:"".concat(La,"-mute ").concat(this.props.visible?"":"txp_none"," ").concat(this.props.mute?"mute":"volume"),onClick:this.handleClick,style:this.props.cssText},Pn("svg",{viewBox:"0 0 20 20",class:"txp_svg_volume txp_svg_symbol",fill:"currentColor"},Pn("path",{d:"M16.714 15.593l-.01-.01a1 1 0 0 1-1.705-.708c0-.287.124-.542.317-.724C16.354 13.073 17 11.614 17 10s-.645-3.072-1.682-4.151A.993.993 0 0 1 15 5.125a1 1 0 0 1 1-1c.3 0 .561.139.744.348l.017-.016A7.969 7.969 0 0 1 19 10c0 2.178-.874 4.15-2.286 5.593zm-3.999 3.122a.956.956 0 0 1-.688.28c-.009 0-.018.005-.027.005a.984.984 0 0 1-.75-.357L5.818 15H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h3.818l5.432-3.643A.984.984 0 0 1 12 1c.009 0 .017.005.026.005a.954.954 0 0 1 .968.967c.001.01.006.018.006.028v16c0 .009-.005.017-.005.026a.959.959 0 0 1-.28.689zM6.75 6.643A.984.984 0 0 1 6 7H3v6h3c.304 0 .567.143.75.357l4.25 2.85V3.792L6.75 6.643z"})),Pn("svg",{viewBox:"0 0 20 20",class:"txp_svg_volume_mute txp_svg_symbol",fill:"currentColor"},Pn("path",{d:"M16.394 12.566A5.88 5.88 0 0 0 17 10a5.97 5.97 0 0 0-1.682-4.151.993.993 0 0 1-.318-.724 1 1 0 0 1 1-1c.3 0 .561.139.745.348l.016-.016A7.969 7.969 0 0 1 19 10a7.934 7.934 0 0 1-1.116 4.055l-1.49-1.489zM11 3.792L8.978 5.149 7.62 3.792l3.63-2.435A.984.984 0 0 1 12 1c.009 0 .017.005.026.005a.954.954 0 0 1 .968.967c.001.01.006.018.006.028v7.171l-2-2V3.792zm7.864 14.072a.999.999 0 0 1-1.414 0L2.136 2.55a1 1 0 1 1 1.415-1.415L18.864 16.45a1 1 0 0 1 0 1.414zM3.171 5l2 2H3v6h3c.304 0 .567.143.75.357l4.25 2.85v-3.379l2 2V18c0 .009-.005.017-.005.027a.955.955 0 0 1-.967.968c-.01 0-.019.005-.028.005a.984.984 0 0 1-.75-.357L5.818 15H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.171z"})))},e.prototype.getUpdate=function(){var t=this;return{mute:function(e,o){e!==o&&(e?(te(t.$refs.container.value,"volume"),Jt(t.$refs.container.value,"mute")):(te(t.$refs.container.value,"mute"),Jt(t.$refs.container.value,"volume")))},visible:function(e,o){On(t.$refs.container.value,e,o)},cssText:function(e){t.$refs.container.value.style.cssText=e||""}}},e}(xn);fn(".txp_full_screen_pause-player-mask{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background-color:rgba(0,0,0,.3);border-radius:12px;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;justify-content:center;opacity:0;position:absolute;-webkit-transition:opacity 50ms ease-in;transition:opacity 50ms ease-in;z-index:10000}.txp_full_screen_pause-player-mask>svg{height:32px;width:32px}.txp_full_screen_pause-player-mask-btn{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background:rgba(51,51,51,.6);border-radius:48px;display:-webkit-box;display:-ms-flexbox;display:flex;height:40px;justify-content:center;width:113px}.txp_full_screen_pause-player-mask-btn>svg{height:16px;width:16px}.txp_full_screen_pause-player-mask-btn>span{color:#fff;font-size:14px;font-style:normal;font-weight:500;line-height:22px;margin-left:6px}"),function(t){t.ICON="icon",t.BTN="btn"}(Ma||(Ma={}));var ka=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs={playerMask:e.createRef()},e}return i(e,t),e.prototype.show=function(t){this.$refs.playerMask.value&&(this.$refs.playerMask.value.style.cssText=jt({width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),top:"".concat(t.top,"px"),left:"".concat(t.left,"px"),opacity:"1"}))},e.prototype.hide=function(){this.$refs.playerMask.value&&(this.$refs.playerMask.value.style.opacity="0")},e.prototype.render=function(){var t="".concat(La,"-player-mask"),e=this.props,o=e.styleType,i=void 0===o?Ma.ICON:o,n=e.onClick;return Pn("div",{ref:this.$refs.playerMask,class:"".concat(t," txp_none"),"style-type":i,onClick:n},i===Ma.BTN?Pn("div",{class:"".concat(t,"-btn")},this.renderSvg(),Pn("span",null,"继续播放")):this.renderSvg())},e.prototype.getUpdate=function(){var t=this;return{visible:function(e,o){On(t.$refs.playerMask.value,e,o)}}},e.prototype.renderSvg=function(){return Pn("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Pn("g",{"clip-path":"url(#clip0_404_5155)"},Pn("path",{d:"M23.5 11.402C25.5 12.5567 25.5 15.4435 23.5 16.5982L8 25.5471C6 26.7018 3.5 25.2584 3.5 22.949L3.5 5.05115C3.5 2.74175 6 1.29838 8 2.45308L23.5 11.402Z",fill:"white"})),Pn("defs",null,Pn("clipPath",{id:"clip0_404_5155"},Pn("rect",{width:"28",height:"28",fill:"white"}))))},e}(xn),Ua=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs=D(D({},e.getRefs()),{mask:e.createRef(),content:e.createRef(),left:e.createRef(),right:e.createRef(),player:e.createRef(),code:e.createRef(),info:e.createRef(),centerCode:e.createRef()}),e.handleCenterCodeClose=function(){e.setState({centerCodeVisible:!1})},e.handleImgError=function(t){var e=t.target;e&&(e.style.opacity="0")},e}return i(e,t),e.prototype.mounted=function(){var t;(null===(t=this.props.uiData)||void 0===t?void 0:t.qrcodeUrl)&&this.$refs.code.value&&this.props.renderQrCode(this.$refs.code.value,this.props.uiData.qrcodeUrl,80)},e.prototype.setContainerCursor=function(t){Xt(this.$refs.content.value,"cursor",t)},e.prototype.updateSize=function(t){var e,o;null===(e=this.$refs.centerCode.value)||void 0===e||e.resize(t);var i=(null===(o=this.props.uiData)||void 0===o?void 0:o.scale_ratio)||.3,n=Math.floor(t.width*i),r=Math.floor(t.height*i),a=t.width-56-n,s=a/16*9;this.$refs.left.value.style.width="".concat(n,"px"),this.$refs.left.value.style.height="".concat(s,"px"),this.$refs.right.value.style.width="".concat(a,"px"),this.$refs.right.value.style.height="".concat(s,"px"),this.$refs.player.value.style.width="".concat(n,"px"),this.$refs.player.value.style.height="".concat(r,"px");var d=n/328;return this.$refs.info.value.style.cssText=d<.92?jt({width:"328px",transform:"scale(".concat(d,")")}):"",{width:n,height:r,left:20,top:t.height-(t.height-s)/2-r}},e.prototype.adjustAd=function(){},e.prototype.render=function(){var t,e,o="".concat(La,"-active"),i=this.props.uiData;return Pn("fragment",null,Pn("div",{ref:this.$refs.container,class:"".concat(o," txp_none"),"data-acttype":un.AD_VIEW_AREA,"data-eid":"poster",onClick:this.handleClick},Pn("div",{ref:this.$refs.mask,class:"".concat(o,"-mask")},Pn("div",{class:"".concat(o,"-mask-inner"),style:"background: ".concat((null==i?void 0:i.background_color)||"")})),Pn("div",{ref:this.$refs.content,class:"".concat(o,"-content")},Pn("div",{ref:this.$refs.left,class:"".concat(o,"-left")},Pn("div",{ref:this.$refs.info,class:"".concat(o,"-info")},this.renderInfo()),Pn("div",{ref:this.$refs.player,class:"".concat(o,"-player")})),Pn("div",{ref:this.$refs.right,class:"".concat(o,"-right")},this.renderMaterialContainer(),Pn(wa,{onClick:this.props.onClose}),Pn("div",{class:"".concat(o,"-detail-box")},Pn(Na,{ref:this.$refs.detailBtn,acttype:un.AD_ACTION_BUTTON,eid:"ad_action",onClick:this.handleBtnClick}),(null===(t=this.props.uiData)||void 0===t?void 0:t.split_view_type)===T.RIGHT_HORIZONTAL?Pn(Va,{ref:this.$refs.muteIcon,onToggle:this.props.onMuteClick}):null),(null===(e=this.props.uiData)||void 0===e?void 0:e.split_view_type)===T.RIGHT_VERTICAL?Pn(Va,{ref:this.$refs.muteIcon,onToggle:this.props.onMuteClick}):null)),(null==i?void 0:i.hasCenterCode)?Pn(Oa,{ref:this.$refs.centerCode,qrcodeUrl:i.qrcodeUrl,qrcodeTips:i.qrcodeTips,iconUrl:i.icon_url,name:i.name,onClose:this.handleCenterCodeClose,renderQrCode:this.props.renderQrCode}):null),Pn(ka,{ref:this.$refs.playerMask,onClick:this.handlePlayIconClick}))},e.prototype.renderInfo=function(){var t,e,o="".concat(La,"-active"),i=this.props.uiData;return(null==i?void 0:i.split_view_type)===T.RIGHT_HORIZONTAL?Pn("div",null,(null==i?void 0:i.qrcodeUrl)?Pn("div",{class:"".concat(o,"-code")},Pn("div",{"data-acttype":un.AD_ACTION_BUTTON,"data-eid":"ad_action",class:"qrcode",ref:this.$refs.code}),Pn("div",{class:"qrcode-tips"},null!==(t=i.qrcodeTips)&&void 0!==t?t:"扫码了解详情")):Pn("img",{class:"".concat(o,"-logo"),src:(null==i?void 0:i.icon_url)||"",alt:"logo","data-acttype":un.ADVERTISER_LOGO,"data-eid":"ad_head",onError:this.handleImgError}),Pn("div",{class:"".concat(o,"-name")},(null==i?void 0:i.qrcodeUrl)?Pn("img",{class:"".concat(o,"-logo"),src:(null==i?void 0:i.icon_url)||"",alt:"logo","data-acttype":un.ADVERTISER_LOGO,"data-eid":"ad_head",onError:this.handleImgError}):null,Pn("div",{"data-acttype":un.ADVERTISER_NAME,"data-eid":"ad_name"},null==i?void 0:i.name)),Pn("div",{class:"".concat(o,"-desc"),"data-acttype":un.AD_TITLE,"data-eid":"ad_title"},null==i?void 0:i.description)):(null==i?void 0:i.split_view_type)===T.RIGHT_VERTICAL?Pn("div",null,Pn("div",{class:"".concat(o,"-only-code")},Pn("div",{class:"".concat(o,"-code")},Pn("div",{"data-acttype":un.AD_ACTION_BUTTON,"data-eid":"ad_action",class:"qrcode",ref:this.$refs.code})),Pn("div",{class:"qrcode-tips"},null!==(e=i.qrcodeTips)&&void 0!==e?e:"扫码了解详情"))):null},e.prototype.getUpdate=function(){var e=this;return D(D({},t.prototype.getUpdate.call(this)),{postSrc:function(t){e.$refs.materialContainer.value.setState({postSrc:t}),Xt(e.$refs.mask.value,"background-image","url('".concat(t,"')"))},centerCodeVisible:function(t){var o;null===(o=e.$refs.centerCode.value)||void 0===o||o.setState({visible:t})}})},e}(Ra);fn(".txp_full_screen_pause-bg{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;justify-content:center;overflow:hidden;position:absolute;width:100%;z-index:1000}.txp_full_screen_pause-bg video{background:transparent}.txp_full_screen_pause-bg-mask{background:#000;height:100%;position:absolute;width:100%;z-index:0}.txp_full_screen_pause-bg-mask img{height:100%;width:100%}.txp_full_screen_pause-bg-content{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;justify-content:center;width:100%;z-index:100}.txp_full_screen_pause-bg-left{border-radius:12px;overflow:hidden;position:relative}.txp_full_screen_pause-bg-right{margin-left:22px}.txp_full_screen_pause-bg-product-url{border-radius:12px;overflow:hidden;width:100%}.txp_full_screen_pause-bg-product-url img{width:100%}.txp_full_screen_pause-bg .txp_full_screen_pause-ad-flag{left:42px;position:absolute;top:32px}.txp_full_screen_pause-bg .txp_full_screen_pause-close{right:42px;top:32px}.txp_full_screen_pause-bg .txp_none,.txp_full_screen_pause-bg.txp_none{display:none!important}.txp_full_screen_pause-bg .txp_full_screen_pause-mute{bottom:18px;left:18px;margin:0;position:absolute;z-index:1000}.txp_full_screen_pause-bg .txp_full_screen_pause-btn{bottom:16px;position:absolute;right:18px;z-index:1000}");var Ba=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs=D(D({},e.getRefs()),{mask:e.createRef(),content:e.createRef(),bgImg:e.createRef(),left:e.createRef(),right:e.createRef(),productImg:e.createRef(),closeButton:e.createRef()}),e.handleImgError=function(){e.$refs.bgImg.value.style.opacity="0",On(e.$refs.mask.value,!0)},e.handleImgLoad=function(){On(e.$refs.mask.value,!0)},e}return i(e,t),e.prototype.setContainerCursor=function(t){Xt(this.$refs.left.value,"cursor",t),Xt(this.$refs.productImg.value,"cursor",t)},e.prototype.updateActionButton=function(t){var e;this.$refs.detailBtn.value.setState({visible:t.show,btnText:null!==(e=t.btnText)&&void 0!==e?e:"了解详情"})},e.prototype.updateSize=function(t){var e=Math.floor(.564*t.width),o=Math.floor(.288*t.width),i=e/16*9,n=o,r=n/16*9;this.$refs.content.value.style.height="".concat(i,"px"),this.$refs.left.value.style.width="".concat(e,"px"),this.$refs.left.value.style.height="".concat(i,"px"),this.$refs.right.value.style.width="".concat(o,"px"),this.$refs.right.value.style.height="".concat(i,"px");var a=(t.height-i)/2,s=(t.width-e-o-22)/2;return this.$refs.productImg.value.style.maxHeight="".concat(i-22-r,"px"),{width:n,height:r,top:t.height-a-r,left:s+e+22}},e.prototype.adjustAd=function(t){if(null==t?void 0:t.top){var e=t.top.replace("16px","48px");this.$refs.closeButton.value.setState({top:e})}},e.prototype.render=function(){var t="".concat(La,"-bg"),e=this.props.uiData;return Pn("fragment",null,Pn("div",{ref:this.$refs.container,class:"".concat(t," txp_none"),"data-acttype":un.AD_DETAIL,"data-eid":"whole_ad"},Pn("div",{ref:this.$refs.mask,class:"".concat(t,"-mask txp_none")},Pn("img",{ref:this.$refs.bgImg,src:(null==e?void 0:e.background_url)||"",alt:"",onError:this.handleImgError,onLoad:this.handleImgLoad})),Pn("div",{ref:this.$refs.content,class:"".concat(t,"-content")},Pn("div",{ref:this.$refs.left,class:"".concat(t,"-left"),onClick:this.handleClick},this.renderMaterialContainer(),Pn(Na,{ref:this.$refs.detailBtn,acttype:un.AD_ACTION_BUTTON,onClick:this.handleBtnClick}),Pn(Va,{ref:this.$refs.muteIcon,onToggle:this.props.onMuteClick})),Pn("div",{ref:this.$refs.right,class:"".concat(t,"-right")},Pn("div",{ref:this.$refs.productImg,class:"".concat(t,"-product-url"),onClick:this.handleClick,"data-acttype":un.ADVERTISER_LOGO},Pn("img",{src:(null==e?void 0:e.product_url)||"",alt:""})))),Pn(wa,{ref:this.$refs.closeButton,top:"48px",onClick:this.props.onClose})),Pn(ka,{ref:this.$refs.playerMask,styleType:Ma.BTN,onClick:this.handlePlayIconClick}))},e}(Ra);fn(".txp_full_screen_pause-bg-v2{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background:#000;display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;justify-content:center;overflow:hidden;position:absolute;width:100%;z-index:1000}.txp_full_screen_pause-bg-v2 video{background:transparent}.txp_full_screen_pause-bg-v2-content{position:relative;z-index:10}.txp_full_screen_pause-bg-v2 .txp_full_screen_pause-mute{margin:0;position:absolute;z-index:1000}.txp_full_screen_pause-bg-v2 .txp_full_screen_pause-btn{position:absolute;z-index:1000}.txp_full_screen_pause-bg-v2-click-hot-area{position:absolute;z-index:100}");var Ha={width:1920,height:1080},za={width:1083,height:610,top:235,left:122},Ka={width:554,height:260,left:1243,top:235},$a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs=D(D({},e.getRefs()),{content:e.createRef(),tvc:e.createRef(),product:e.createRef(),closeButton:e.createRef()}),e.handleContentClick=function(t){var o,i;t.stopPropagation();var n=Dn(t.target),r=t.offsetX,a=t.offsetY,s=e.getClickActtype(r,a);e.logger.log("clickArea acttype: ".concat(s)),(null===(i=null===(o=e.props.uiData)||void 0===o?void 0:o.clickHotAreaList)||void 0===i?void 0:i.length)||e.props.onClick(s,n)},e.handleHotAreaClick=function(t){t.stopPropagation();var o=t.target,i=Dn(o),n=t.offsetX,r=t.offsetY,a=e.getClickActtype(n+o.offsetLeft,r+o.offsetTop);e.logger.log("clickArea acttype: ".concat(a)),e.props.onBtnClick(a,i)},e.checkInArea=function(t,e,o){var i=o.top,n=o.width,r=o.height,a=o.left;return t>=a&&t<=a+n&&e>=i&&e<=i+r},e.getClickActtype=function(t,o){return e.checkFromConfig(t,o,za)?un.AD_VIEW_AREA:e.checkFromConfig(t,o,Ka)?un.ADVERTISER_LOGO:un.AD_DETAIL},e.checkFromConfig=function(t,o,i){var n=e.$refs.content.value.offsetWidth/Ha.width,r={width:Math.round(i.width*n),height:Math.round(i.height*n),top:Math.round(i.top*n),left:Math.round(i.left*n)},a=e.checkInArea(t,o,r);return e.logger.log("checkFromConfig ".concat(st({click:{x:t,y:o},config:i,sizeAndPosition:r,inArea:a}))),a},e.updateClickArea=function(t){var o,i,n=e.$refs.content.value.querySelectorAll('div[data-eid="click-area"]');null===(i=null===(o=e.props.uiData)||void 0===o?void 0:o.clickHotAreaList)||void 0===i||i.forEach((function(e,o){var i=n[o];i&&se(i,{size:t,hotArea:e})}))},e}return i(e,t),e.prototype.adjustAd=function(){},e.prototype.updateSize=function(t){var e=t.width/Ha.width,o=Math.round(t.width/16*9);return this.$refs.content.value.style.cssText=jt({width:"".concat(t.width,"px"),height:"".concat(o,"px")}),this.$refs.muteIcon.value.setState({cssText:jt({bottom:"".concat(Math.round(235*e)+18,"px"),left:"".concat(Math.round(122*e)+18,"px")})}),this.$refs.detailBtn.value.setState({cssText:jt({right:"".concat(Math.round(715*e)+18,"px"),bottom:"".concat(Math.round(235*e)+16,"px")})}),this.$refs.closeButton.value.setState({top:"".concat(o>t.height?(o-t.height)/2+16:Math.round(119*e-36),"px")}),this.updateClickArea({width:t.width,height:o}),{width:Math.round(554*e),height:Math.round(312*e),top:Math.round(533*e)+(t.height-o)/2,left:Math.round(1243*e)}},e.prototype.render=function(){var t,e,o=this,i="".concat(La,"-bg-v2");return Pn("fragment",null,Pn("div",{ref:this.$refs.container,class:"".concat(i," txp_none"),"data-acttype":un.AD_DETAIL,onClick:this.handleClick,"data-eid":"whole_ad"},Pn("div",{ref:this.$refs.content,class:"".concat(i,"-content"),onClick:this.handleContentClick},this.renderMaterialContainer(),Pn(Va,{ref:this.$refs.muteIcon,onToggle:this.props.onMuteClick}),Pn(Na,{ref:this.$refs.detailBtn,acttype:un.AD_ACTION_BUTTON,onClick:this.handleBtnClick}),Pn(wa,{ref:this.$refs.closeButton,top:"48px",onClick:this.props.onClose}),null===(e=null===(t=this.props.uiData)||void 0===t?void 0:t.clickHotAreaList)||void 0===e?void 0:e.map((function(){return Pn("div",{"data-eid":"click-area",class:"".concat(i,"-click-hot-area"),onClick:o.handleHotAreaClick})})))),Pn(ka,{ref:this.$refs.playerMask,styleType:Ma.BTN,onClick:this.handlePlayIconClick}))},e}(Ra);fn(".txp_full_screen_pause-ad-flag{left:16px;position:absolute;top:16px;z-index:3}");var Ga=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs={adFlag:e.createRef()},e}return i(e,t),e.prototype.render=function(){return Pn("svg",{ref:this.$refs.adFlag,class:"".concat(La,"-ad-flag"),width:"30",height:"16",viewBox:"0 0 30 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:"top:".concat(this.props.top||"")},Pn("rect",{width:"30",height:"16",rx:"3",fill:"#333333","fill-opacity":"0.6",style:"fill:#333333;fill-opacity:0.6;"}),Pn("path",{d:"M10.8 3.04V3.8H14.56V5.05H6.88V9.56C6.88 9.99333 6.84 10.4 6.76 10.78C6.68667 11.16 6.57 11.4967 6.41 11.79C6.25 12.0833 6.04667 12.33 5.8 12.53C5.56 12.7367 5.27 12.8833 4.93 12.97V11.34C5.18333 11.1533 5.34667 10.8967 5.42 10.57C5.49333 10.2367 5.53 9.83333 5.53 9.36V3.8H9.45V3.04H10.8ZM24.42 12.84H16.07V8.96H24.42V12.84ZM18 3.37C17.98 3.62333 17.94 3.87 17.88 4.11H19.57V3.09H20.91V4.11H24.63V5.36H20.91V6.92H24.89V8.17H15.6V6.92H19.57V5.36H17.34C17.1467 5.63333 16.9133 5.86333 16.64 6.05C16.3667 6.23 16.05 6.34667 15.69 6.4V5.13C15.9833 5.01 16.2167 4.79 16.39 4.47C16.5633 4.15 16.6667 3.78333 16.7 3.37H18ZM23.07 10.2H17.42V11.59H23.07V10.2Z",fill:"white",style:"fill:white;fill-opacity:1;"}))},e.prototype.getUpdate=function(){var t=this;return{top:function(e){e&&(t.$refs.adFlag.value.style.top=e)}}},e}(xn);fn(".txp_full_screen_pause{background:#000;color:#fff;font-size:14px;font-weight:500;height:100%;position:absolute;width:100%;z-index:1000}.txp_full_screen_pause .txp_full_screen_pause-ad-flag{left:16px;position:absolute;top:16px}.txp_full_screen_pause .txp_full_screen_pause-btn{background-color:#fe5c38;border-radius:18px;height:36px;padding:0 12px 0 10px}.txp_full_screen_pause-detail-box{-webkit-box-align:center;-ms-flex-align:center;align-items:center;bottom:16px;display:-webkit-box;display:-ms-flexbox;display:flex;position:absolute;right:24px}.txp_full_screen_pause .txp_none,.txp_full_screen_pause.txp_none{display:none!important}");var Ya,Wa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$refs=D(D({},e.getRefs()),{detailBox:e.createRef(),closeButton:e.createRef()}),e}return i(e,t),e.prototype.updateSize=function(t){var e,o,i,n,r=null!==(o=null===(e=this.props.uiData)||void 0===e?void 0:e.split_type)&&void 0!==o?o:g.LEFT_BOTTOM,a=null!==(n=null===(i=this.props.uiData)||void 0===i?void 0:i.scale_ratio)&&void 0!==n?n:.3,s={width:Math.floor(t.width*a),height:Math.floor(t.height*a),top:16,left:16};switch(r){case g.LEFT_TOP:s.top=16,s.left=16;break;case g.LEFT_MIDDLE:s.top=t.height/2-s.height/2,s.left=16;break;case g.LEFT_BOTTOM:s.top=t.height-s.height-16,s.left=16;break;case g.RIGHT_MIDDLE:s.top=t.height/2-s.height/2,s.left=t.width-s.width-16}return s},e.prototype.adjustAd=function(t){t&&(this.$refs.closeButton.value.setState({top:t.top}),this.$refs.detailBox.value.style.bottom=t.bottom)},e.prototype.render=function(){var t=La;return Pn("fragment",null,Pn("div",{ref:this.$refs.container,class:"".concat(t," txp_none"),"data-acttype":un.AD_VIEW_AREA,"data-eid":"poster",onClick:this.handleClick},this.renderMaterialContainer(),Pn(Ga,null),Pn(wa,{ref:this.$refs.closeButton,onClick:this.props.onClose}),Pn("div",{ref:this.$refs.detailBox,class:"".concat(t,"-detail-box")},Pn(Na,{ref:this.$refs.detailBtn,acttype:un.AD_ACTION_BUTTON,onClick:this.handleBtnClick}),Pn(Va,{ref:this.$refs.muteIcon,onToggle:this.props.onMuteClick}))),Pn(ka,{ref:this.$refs.playerMask,onClick:this.handlePlayIconClick}))},e}(Ra),Fa={layer:yn("full-screen-pause")("layer")};!function(t){t.IMAGE_LOAD="FULL_SCREEN_PAUSE_IMAGE_LOAD",t.CLOSE_CLICK="FULL_SCREEN_PAUSE_CLOSE_CLICK",t.PLAY_CLICK="FULL_SCREEN_PAUSE_PLAY_ICON_CLICK",t.LINK_AREA_CLICK="FULL_SCREEN_PAUSE_LINK_AREA_CLICK",t.DETAIL_BTN_CLICK="FULL_SCREEN_PAUSE_DETAIL_BTN_CLICK",t.MUTE_CLICK="FULL_SCREEN_PAUSE_MUTE_CLICK"}(Ya||(Ya={}));var qa=function(t){function e(e,o){var i=t.call(this,e)||this;return i.roleMap=Fa,i.uiData=o,i}return i(e,t),e.prototype.getVideoContainer=function(){var t;return null===(t=this.ui)||void 0===t?void 0:t.getVideoContainer()},e.prototype.setContainerVisible=function(t){var e;null===(e=this.ui)||void 0===e||e.setState({visible:t})},e.prototype.setMuteVisible=function(t){var e;null===(e=this.ui)||void 0===e||e.setState({muteVisible:t})},e.prototype.setPictureVisible=function(t){var e;null===(e=this.ui)||void 0===e||e.setState({pictureVisible:t})},e.prototype.setVideoVisible=function(t){var e;null===(e=this.ui)||void 0===e||e.setState({videoVisible:t})},e.prototype.setPlayIconVisible=function(t){var e;null===(e=this.ui)||void 0===e||e.setState({playIconVisible:t})},e.prototype.setMiniPlayer=function(t){var e;this.setPlayIconVisible(!t),null===(e=this.ui)||void 0===e||e.setMiniPlayer(t)},e.prototype.updateActionButton=function(t){var e;null===(e=this.ui)||void 0===e||e.updateActionButton(t)},e.prototype.adjustDomNodes=function(){},e.prototype.updatePlayMask=function(t){var e;null===(e=this.ui)||void 0===e||e.updatePlayMask(t)},e.prototype.hidePlayMask=function(){var t;null===(t=this.ui)||void 0===t||t.hidePlayMask()},e.prototype.toggleMute=function(t){var e;null===(e=this.ui)||void 0===e||e.toggleMute(t)},e.prototype.setContainerCursor=function(t){var e;null===(e=this.ui)||void 0===e||e.setContainerCursor(t)},e.prototype.adjustAd=function(t){var e;null===(e=this.ui)||void 0===e||e.adjustAd(t)},e.prototype.updateImgSrc=function(t){var e;null===(e=this.ui)||void 0===e||e.setState({imgSrc:t})},e.prototype.updatePostSrc=function(t){var e;null===(e=this.ui)||void 0===e||e.setState({postSrc:t})},e.prototype.reset=function(){this.destroy(),this.ui=void 0},e.prototype.updateSize=function(t){var e;return null===(e=this.ui)||void 0===e?void 0:e.updateSize(t)},e.prototype.showCenterCode=function(){var t;null===(t=this.ui)||void 0===t||t.setState({centerCodeVisible:!0})},e.prototype.appendDom=function(t){var e=this,o={logger:this.logger,uiData:this.uiData,onClose:function(){e.emit(Ya.CLOSE_CLICK)},onMuteClick:function(){e.emit(Ya.MUTE_CLICK)},onClick:function(t,o){e.emit(Ya.LINK_AREA_CLICK,{actType:t,eid:o})},onBtnClick:function(t,o){e.emit(Ya.DETAIL_BTN_CLICK,{actType:t,eid:o})},onPlayIconClick:function(){e.emit(Ya.PLAY_CLICK)},onImgLoad:function(){e.emit(Ya.IMAGE_LOAD)},renderQrCode:function(t,o,i){e.adCore.config.renderQrCode(t,Pe(o,{act:"1025"}),i)}};this.ui=this.renderFullPauseUI(o),this.ui.mount(t)},e.prototype.getTemplate=function(){return""},e.prototype.renderFullPauseUI=function(t){var e=this.uiData.split_view_type;return e===T.LEFT_HORIZONTAL_BROKEN?new $a(t):[T.RIGHT_HORIZONTAL,T.RIGHT_VERTICAL].includes(e)?new Ua(t):T.LEFT_HORIZONTAL===e?new Ba(t):new Wa(t)},e}(In),ja=function(t){function e(e){var o=t.call(this,e)||this;o.resizeRunning=!1,o.needRunResize=!1,o.handleCloseClick=function(){var t;o.logger.log("全屏暂停点击关闭按钮"),o.data.closeBtnClicked=!0,o.adCore.vr.reportClick(o.adInfo,{eid:"close"}),o.pauseUI.hidePlayMask(),o.config.resetVideoContainer().catch((function(t){var e;o.logger.error("resetVideoContainer error: ".concat(null!==(e=null==t?void 0:t.message)&&void 0!==e?e:t))})).finally((function(){o.stop()})),pe(M.FEEDBACK,null===(t=o.adInfo)||void 0===t?void 0:t.frequencyControlConfig)},o.handlePlayClick=function(){o.logger.log("全屏暂停点击播放按钮"),o.pauseUI.hidePlayMask(),o.config.resetVideoContainer(!0).catch((function(t){var e;o.logger.error("resetVideoContainer error: ".concat(null!==(e=null==t?void 0:t.message)&&void 0!==e?e:t))})).finally((function(){o.stop()}))},o.handleLinkAreaClick=function(t){o.adInfo.data.poster.enable_fullscreen_click&&o.handleDetailClick(t)},o.handleDetailClick=function(t){var e=t.actType,i=t.eid;if(o.adInfo.clickable){o.adInfo.isScanActive&&!o.adInfo.enableClick&&o.pauseUI.showCenterCode();var n=o.data.showTime?Date.now()-o.data.showTime:-1;o.doClickAction(o.adInfo,{actionType:e,eid:i,playTime:n,order_type:o.adInfo.orderType})}},o.handleToggleMiniPlayer=function(t){o.pauseUI.setMiniPlayer(!!t.data.isOpened),t.data.isOpened&&(o.logger.log("切换 MiniPlayer 关闭暂停广告"),o.stop(!0))};var i=o.adInfo.data.poster;return o.pauseUI=new qa({adCore:o.adCore,container:o.config.createLayer(o.adType)},D(D(D({},i.advertiser),i.split_control_info),{qrcodeUrl:o.adInfo.landing.short_link,qrcodeTips:o.adInfo.landing.qrcode_tips,hasCenterCode:o.adInfo.isScanActive&&!o.adInfo.enableClick,clickHotAreaList:i.enable_fullscreen_click?void 0:i.click_hot_area_list})),o.pauseUI.init(),o.updateUISize(),o.data.startTime=Date.now(),o.adCore.outerEvent.on(ki.TOGGLE_MINI_PLAYER,o.handleToggleMiniPlayer),o}return i(e,t),e.prototype.stop=function(e,o){var i=this,n=function(){i.hide(),t.prototype.stop.call(i),i.vrReportEnded(),i.destroy()};if(this.logger.log("全屏暂停广告 stop: ".concat(e," ").concat(o)),e||o)return this.setState(Zi.END),this.pauseUI.hidePlayMask(),this.config.resetVideoContainer(!1,!0),void n();this.state!==Zi.END&&(this.setState(Zi.END),this.pauseUI.hidePlayMask(),this.config.resetVideoContainer().catch((function(t){var e;i.logger.error("resetVideoContainer error: ".concat(null!==(e=null==t?void 0:t.message)&&void 0!==e?e:t))})).finally((function(){i.logger.log("resetVideoContainer finally"),n()})))},e.prototype.destroy=function(){this.adCore.outerEvent.off(ki.TOGGLE_MINI_PLAYER,this.handleToggleMiniPlayer),this.pauseUI.destroy(),this.logger.log("全屏暂停广告 destroy"),t.prototype.destroy.call(this)},e.prototype.setAdSmallWindow=function(t){t&&this.resize()},e.prototype.resize=function(){if(!this.resizeRunning)return this.updateUISize(),this.resizeVideoContainer(),void(this.needRunResize=!1);this.needRunResize=!0},e.prototype.adjustUI=function(t){this.adjustFullPauseUI(t)},e.prototype.adjustFullPauseUI=function(t){if(t){var e="".concat(t.top||16,"px"),o="".concat(t.bottom||16,"px");this.pauseUI.adjustAd({top:e,bottom:o})}},e.prototype.resizeVideoContainer=function(){var t=this;this.playerSizeAndPosition&&(this.resizeRunning=!0,this.pauseUI.hidePlayMask(),this.config.resizeVideoContainer(this.playerSizeAndPosition).then((function(e){t.adCore.outerEvent.isMimiPlayer||t.pauseUI.updatePlayMask(e)})).catch((function(e){var o;t.logger.error("resizeVideoContainer error: ".concat(null!==(o=null==e?void 0:e.message)&&void 0!==o?o:e))})).finally((function(){t.resizeRunning=!1,t.needRunResize&&t.resize()})))},e.prototype.updateUI=function(){var t,e,o,i=this.adInfo.data.poster.action_button,n=(null===(t=i.base)||void 0===t?void 0:t.action_title.first_title)||"了解详情";this.pauseUI.updateActionButton({btnText:n,textColor:null===(e=i.base)||void 0===e?void 0:e.text_color,bgColor:null===(o=i.base)||void 0===o?void 0:o.bg_color,show:!i.display_none}),this.pauseUI.toggleMute(this.adInfo.muted),this.pauseUI.setContainerCursor(this.adInfo.data.poster.enable_fullscreen_click?"pointer":"auto"),this.pauseUI.setPlayIconVisible(!0)},e.prototype.shrinkPlayer=function(){var t=this;this.playerSizeAndPosition&&(this.resizeRunning=!0,this.config.shrinkVideoContainer(this.playerSizeAndPosition).then((function(e){t.adCore.outerEvent.isMimiPlayer||t.pauseUI.updatePlayMask(e)})).catch((function(e){var o;t.logger.error("shrinkVideoContainer error: ".concat(null!==(o=null==e?void 0:e.message)&&void 0!==o?o:e)),t.stop()})).finally((function(){t.resizeRunning=!1,t.needRunResize&&t.resize()})))},e.prototype.bindUIEvent=function(){this.pauseUI.on(Ya.CLOSE_CLICK,this.handleCloseClick),this.pauseUI.on(Ya.PLAY_CLICK,this.handlePlayClick),this.pauseUI.on(Ya.LINK_AREA_CLICK,this.handleLinkAreaClick),this.pauseUI.on(Ya.DETAIL_BTN_CLICK,this.handleDetailClick)},e.prototype.unbindUIEvent=function(){this.pauseUI.off(Ya.CLOSE_CLICK,this.handleCloseClick),this.pauseUI.off(Ya.PLAY_CLICK,this.handlePlayClick),this.pauseUI.off(Ya.LINK_AREA_CLICK,this.handleLinkAreaClick),this.pauseUI.off(Ya.DETAIL_BTN_CLICK,this.handleDetailClick)},e.prototype.getVrExtraData=function(){return{order_type:this.adInfo.orderType,is_active_scan:this.adInfo.isScanActive}},e.prototype.reportExposure=function(){this.data.hasReportView||(this.data.hasReportView=!0,this.doExposure(this.adInfo),this.adCore.vr.reportExposure(this.adInfo,!0,D(D({},this.getVrExtraData()),{eid:"whole_playbox_ad"})))},e.prototype.vrReportEnded=function(){var t;if(!this.data.isFirstClose&&this.data.showTime){var e=this.data;this.adCore.vr.reportEnded(this.order,{load_time:this.getLoadTime(),close_time:e.closeBtnClicked&&this.data.showTime?Date.now()-this.data.showTime:-1,ad_playtime:e.startTime?Date.now()-e.startTime:-1,error_code:this.data.errorCode,first_view:null!==(t=e.showTime)&&void 0!==t?t:-1},this.getVrExtraData()),e.isFirstClose=!0}},e.prototype.updateUISize=function(){this.playerSizeAndPosition=this.pauseUI.updateSize(this.adCore.config.getContainerSize())},e}(nn),Qa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleImageLoad=function(){var t;e.data.endLoadTime=Date.now(),null===(t=e.capturePlayerPromise)||void 0===t||t.then((function(){var t;e.shrinkPlayer(),e.pauseUI.setContainerVisible(!0),e.show(),e.reportExposure(),e.canplayHandler(),e.loadCompleteHandle({adType:e.adType,adInfo:e.adInfo,index:e.adInfo.orderIdx,loadingTime:e.getLoadTime(),materialUrl:null===(t=e.adInfo.imageMaterial)||void 0===t?void 0:t.url,materialType:e.adInfo.materialType})})).catch((function(t){e.logger.log("截图接口出错：".concat((null==t?void 0:t.message)||t)),e.stop()}))},e.handleImageError=function(){var t;e.data.endLoadTime=Date.now(),e.data.errorCode=Wi.LOAD_FAIL,e.loadCompleteHandle({adType:e.adType,adInfo:e.adInfo,index:e.adInfo.orderIdx,hasError:"1",detailErrorCode:Wi.LOAD_FAIL,loadingTime:e.getLoadTime(),materialUrl:null===(t=e.adInfo.imageMaterial)||void 0===t?void 0:t.url,materialType:e.adInfo.materialType}),e.logger.log("图片素材加载出错"),e.stop()},e}return i(e,t),e.prototype.load=function(){var e,o,i=this;if(!(null===(o=null===(e=this.adInfo)||void 0===e?void 0:e.imageMaterial)||void 0===o?void 0:o.url))return this.logger.log("没有广告素材链接"),void this.stop();t.prototype.load.call(this),this.bindUIEvent(),this.adCore.event.emit(Ge.AD_LOAD_START,{adType:this.order.adType,adInfo:this.adInfo}),this.imageMaterial=new yr({url:this.adInfo.imageMaterial.url}),this.imageMaterial.load().then((function(t){i.pauseUI.updateImgSrc(t.src),i.pauseUI.setPictureVisible(!0),i.updateUI()})).catch((function(t){i.handleImageError()})),this.capturePlayerPromise=this.config.capturePlayer()},e.prototype.destroy=function(){this.pauseUI.updateImgSrc(),this.unbindUIEvent(),this.pauseUI.reset(),t.prototype.destroy.call(this)},e.prototype.updateUI=function(){t.prototype.updateUI.call(this),this.pauseUI.setMuteVisible(!1)},e.prototype.bindUIEvent=function(){t.prototype.bindUIEvent.call(this),this.pauseUI.on(Ya.IMAGE_LOAD,this.handleImageLoad)},e.prototype.unbindUIEvent=function(){t.prototype.unbindUIEvent.call(this),this.pauseUI.off(Ya.IMAGE_LOAD,this.handleImageLoad)},e.prototype.getLoadTime=function(){var t,e;return null!==(e=null===(t=this.imageMaterial)||void 0===t?void 0:t.loadTime)&&void 0!==e?e:-1},e}(ja),Za=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(on),Xa=function(){function t(t){var e=this;this.data={volume:0,playTimes:0},this.handleVideoLoadStart=function(t){var o=t.adVideoInfo;o.loadStartTime||(o.loadStartTime=Date.now(),e.adCore.event.emit(Ge.AD_LOAD_START,{adInfo:e.adInfo,adType:e.adInfo.adType,index:e.adInfo.orderIdx}))},this.handleVideoProcess=function(t){var o=t.adVideoInfo,i=o.loadedPercent;o.buffered,o.duration;if(i){var n=Date.now();i&&o.loadStartTime&&(o.speed=o.fileSize/(n-o.loadStartTime)*1e3);var r=i>.99;e.adCore.event.emit(Ge.AD_LOAD_PROGRESS,{adInfo:e.adInfo,adType:e.adInfo.adType,speed:o.speed,loadedPercent:o.loadedPercent,buffered:o.buffered}),r&&!e.data.endLoadTime&&e.handleVideoLoadComplete(o)}},this.handleVideoLoadComplete=function(t,o){var i,n,r;t.loadCompleteTime||(t.loadCompleteTime=Date.now(),e.data.endLoadTime=t.loadCompleteTime),t.loadStartTime&&(t.loadTime=t.loadCompleteTime-t.loadStartTime),t.hasReportLoadComplete||(t.hasReportLoadComplete=!0,e.adInterface.loadCompleteHandle({adInfo:e.adInfo,adType:e.adInfo.adType,index:0,hasError:o?"1":void 0,loadingTime:t.loadTime,errorCode:o?null==t?void 0:t.errorCode:void 0,hasTryBackupUrls:!!(null==t?void 0:t.backupUrlData),materialVid:null===(i=e.adInfo.videoMaterial)||void 0===i?void 0:i.vid,materialUrl:null===(n=e.adInfo.videoMaterial)||void 0===n?void 0:n.url,materialDuration:null===(r=e.adInfo.videoMaterial)||void 0===r?void 0:r.duration,materialType:m.VIDEO}))},this.handleVideoCanplay=function(){e.adInterface.canplayHandler(),e.adPlayer.play()},this.handleVideoPlaying=function(t){var o,i,n=t.adVideoInfo;null===(i=(o=e.options).onVideoPlayStart)||void 0===i||i.call(o,n),e.data.startPlayTime||(e.data.startPlayTime=Date.now()),e.canPlayReport&&e.adInfo.reporter.reportPlay({playType:0===e.data.playTimes?De.AUTO_PLAY:De.AUTO_REPLAY,timeOffset:e.adPlayer.currentTime})},this.handleVideoTimeupdate=function(t){var o,i,n=t.adVideoInfo;null===(i=(o=e.options).onTimeUpdate)||void 0===i||i.call(o,e.adPlayer.currentTime,e.adInfo.videoMaterial.duration);var r=n.loadedPercent;r&&(r>.99&&!e.data.endLoadTime&&(e.canPlayReport&&e.adInfo.reporter.reportPlay({playType:De.FAIL,failReason:Oe.PLAY}),e.handleVideoLoadComplete(n)))},this.handleVideoPause=function(){e.adPlayer.play()},this.handleVideoError=function(t){var o=t.adVideoInfo;t.canTryBackup?o.backupUrlData?e.adPlayer.playUrl(o):e.adPlayer.tryPlayBackupUrl(o):(e.handleVideoLoadComplete(o,!0),e.adInterface.stop())},this.handleVideoEnd=function(){var t;e.canPlayReport&&e.adInfo.reporter.reportPlay({playType:De.END,timeOffset:null===(t=e.adInfo.videoMaterial)||void 0===t?void 0:t.duration}),e.data.playTimes+=1,e.retry()},this.browserBeforeUnload=function(){e.adInterface.stop(!0,!0)},this.options=t,this.logger=this.adCore.logger.createLogger("PausePlayer"),this.adPlayer=this.initPlayer(),this.bindVideoEvent(),window.addEventListener("beforeunload",this.browserBeforeUnload)}return Object.defineProperty(t.prototype,"loadTime",{get:function(){return this.data.startLoadTime&&this.data.endLoadTime?this.data.endLoadTime-this.data.startLoadTime:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adCore",{get:function(){return this.options.adCore},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adInfo",{get:function(){return this.options.adInfo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adInterface",{get:function(){return this.options.adInterface},enumerable:!1,configurable:!0}),t.prototype.load=function(t){var e=t.url,o=Te("fmt",e=t.enable_crt_cached?Ve(t.vid,e,this.adInfo.adType):e)||_.SHD;this.data.urlConfig={uid:"".concat(o,"-").concat(t.vid),url:e,duration:t.duration,vid:t.vid,fileSize:t.file_size,orderId:this.adInfo.orderId},this.adCore.event.emit(Ge.AD_PLAYER_SESSION_START,{adType:this.adInfo.adType,vids:[this.data.urlConfig.vid]}),this.adPlayer.load([this.data.urlConfig]),this.data.startLoadTime=Date.now()},t.prototype.setVolume=function(t){this.data.volume=Math.min(1,Math.max(0,void 0===t?1:t)),this.adPlayer.volume=this.data.muted?0:this.data.volume},t.prototype.toggleMute=function(){var t,e;this.data.muted=!this.data.muted,this.adPlayer.volume=this.data.muted?0:this.data.volume,null===(e=(t=this.options).toggleMute)||void 0===e||e.call(t,this.data.muted),this.canPlayReport&&this.data.startPlayTime&&this.adInfo.reporter.reportPlay({playType:this.data.muted?De.MUTE:De.UNMUTE,timeOffset:this.adPlayer.currentTime})},t.prototype.retry=function(){var t,e;this.data.urlConfig&&(this.adPlayer.load([this.data.urlConfig]),null===(e=(t=this.options).onTimeUpdate)||void 0===e||e.call(t,0,this.adInfo.videoMaterial.duration),this.adPlayer.play())},t.prototype.destroy=function(){var t=this.adPlayer.currentTime;this.canPlayReport&&this.data.startPlayTime&&t&&t<this.adInfo.videoMaterial.duration&&this.adInfo.reporter.reportPlay({playType:De.INTERRUPT,timeOffset:t}),this.adPlayer.removeAllListeners(),this.unbindVideoEvent(),this.adPlayer.stop(),window.removeEventListener("beforeunload",this.browserBeforeUnload),this.adCore.event.emit(Ge.AD_PLAYER_SESSION_END,{adType:this.adInfo.adType,vids:[this.data.urlConfig.vid]}),this.adPlayer.destroy()},t.prototype.initPlayer=function(){var t,e,o=this.adCore.config.createPlayer(this.adCore,this.adInfo.adType,this.options.container),i=this.adCore.config.outerPlayerData.volume;return this.data.volume=Math.min(1,Math.max(0,void 0===i?1:i)),this.data.muted=this.adInfo.muted,o.volume=this.data.muted?0:this.data.volume,null===(e=(t=this.options).toggleMute)||void 0===e||e.call(t,this.data.muted),o},t.prototype.bindVideoEvent=function(){this.adPlayer.on(Fi.PROGRESS,this.handleVideoProcess),this.adPlayer.on(Fi.LOADSTART,this.handleVideoLoadStart),this.adPlayer.on(Fi.CANPLAY,this.handleVideoCanplay),this.adPlayer.on(Fi.PLAYING,this.handleVideoPlaying),this.adPlayer.on(Fi.PAUSE,this.handleVideoPause),this.adPlayer.on(Fi.TIMEUPDATE,this.handleVideoTimeupdate),this.adPlayer.on(Fi.ENDED,this.handleVideoEnd),this.adPlayer.on(Fi.ERROR,this.handleVideoError)},t.prototype.unbindVideoEvent=function(){this.adPlayer.off(Fi.PROGRESS,this.handleVideoProcess),this.adPlayer.off(Fi.LOADSTART,this.handleVideoLoadStart),this.adPlayer.off(Fi.CANPLAY,this.handleVideoCanplay),this.adPlayer.off(Fi.PLAYING,this.handleVideoPlaying),this.adPlayer.off(Fi.PAUSE,this.handleVideoPause),this.adPlayer.off(Fi.TIMEUPDATE,this.handleVideoTimeupdate),this.adPlayer.on(Fi.ENDED,this.handleVideoEnd),this.adPlayer.off(Fi.ERROR,this.handleVideoError)},Object.defineProperty(t.prototype,"canPlayReport",{get:function(){return this.data.playTimes<this.adInfo.maxPlayReportCycles},enumerable:!1,configurable:!0}),t}();!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}i(e,t)}(Za);var Ja=function(t){function e(e){var o=t.call(this,e)||this;return o.handleMuteClick=function(){o.pausePlayer.toggleMute()},o.pausePlayer=new Xa({container:o.pauseUI.getVideoContainer(),adInterface:o,adInfo:o.adInfo,adCore:o.adCore,toggleMute:function(t){o.pauseUI.toggleMute(t),o.adCore.vr.reportClick(o.adInfo,{eid:"ad_sound",status:t?1:0})},onVideoPlayStart:function(e){o.showAd(),t.prototype.play.call(o),t.prototype.show.call(o),e.hasReportView||(o.logger.log("可见曝光"),e.hasReportView=!0,o.reportExposure())}}),o}return i(e,t),e.prototype.load=function(){var e,o;if(!(null===(o=null===(e=this.adInfo)||void 0===e?void 0:e.videoMaterial)||void 0===o?void 0:o.url))return this.logger.log("没有广告素材链接"),void this.stop();t.prototype.load.call(this),this.bindUIEvent(),this.adCore.event.emit(Ge.AD_LOAD_START,{adType:this.order.adType,adInfo:this.adInfo}),this.loadPoster(),this.pausePlayer.load(this.adInfo.videoMaterial),this.capturePlayerPromise=this.config.capturePlayer()},e.prototype.setVolume=function(t){this.pausePlayer.setVolume(t)},e.prototype.destroy=function(){this.data.hasDestroy||(this.unbindUIEvent(),this.pausePlayer.destroy(),this.pauseUI.adjustDomNodes(),this.pauseUI.reset(),t.prototype.destroy.call(this))},e.prototype.updateUI=function(){t.prototype.updateUI.call(this),this.pauseUI.setMuteVisible(!0)},e.prototype.bindUIEvent=function(){t.prototype.bindUIEvent.call(this),this.pauseUI.on(Ya.MUTE_CLICK,this.handleMuteClick)},e.prototype.unbindUIEvent=function(){t.prototype.unbindUIEvent.call(this),this.pauseUI.off(Ya.MUTE_CLICK,this.handleMuteClick)},e.prototype.getLoadTime=function(){return this.pausePlayer.loadTime},e.prototype.loadPoster=function(){var t,e=this,o=null===(t=this.adInfo.data.cover_picture)||void 0===t?void 0:t.url;o&&(this.imageMaterial=new yr({url:o}),this.imageMaterial.load().then((function(t){e.pauseUI.updatePostSrc(t.src),e.showAd()})).catch((function(t){})))},e.prototype.showAd=function(){var t=this;!this.data.fullScreenIsShow&&this.capturePlayerPromise&&this.capturePlayerPromise.then((function(){t.data.fullScreenIsShow=!0,t.pauseUI.setVideoVisible(!0),t.updateUI(),t.shrinkPlayer(),t.pauseUI.setContainerVisible(!0),t.show()})).catch((function(e){t.logger.log("截图接口出错：".concat((null==e?void 0:e.message)||e)),t.stop()}))},e}(ja),ts=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playTimes=0,e}return i(e,t),e}(Za),es=function(t){function e(e){var o=t.call(this,e)||this;o.handleRetryClick=function(){o.pauseUI.setLoadingVisible(!0),o.pauseUI.setErrorTipsVisible(!1),o.createTransparentPlayer()},o.handlePlayerCanplay=function(){var t;o.canplayHandler(),null===(t=o.transparentPlayer)||void 0===t||t.play()},o.handlePlayerLoaded=function(){var t,e,i;o.data.endLoadTime=Date.now(),o.loadCompleteHandle({adInfo:o.adInfo,adType:o.adType,index:0,loadingTime:o.data.endLoadTime-o.data.startLoadTime,materialVid:null===(t=o.adInfo.videoMaterial)||void 0===t?void 0:t.vid,materialUrl:null===(e=o.adInfo.videoMaterial)||void 0===e?void 0:e.url,materialDuration:null===(i=o.adInfo.videoMaterial)||void 0===i?void 0:i.duration,materialType:m.VIDEO})},o.handlePlayerPlay=function(){o.data.startPlayTime||(o.data.startPlayTime=Date.now()),o.pauseUI.setLoadingVisible(!1),o.data.isReportView||(o.data.isReportView=!0,o.reportExposure()),o.canPlayReport&&o.adInfo.reporter.reportPlay({playType:0===o.data.playTimes?De.AUTO_PLAY:De.AUTO_REPLAY})},o.handlePlayerEnded=function(){o.canPlayReport&&o.adInfo.reporter.reportPlay({playType:De.END,timeOffset:o.adInfo.videoMaterial.duration}),o.data.playTimes+=1},o.handlePlayerError=function(){var t,e,i;o.pauseUI.setErrorTipsVisible(!0),o.pauseUI.setMaskVisible(!1),o.canPlayReport&&o.adInfo.reporter.reportPlay({playType:De.FAIL,failReason:Oe.PLAY}),o.data.endLoadTime||(o.data.endLoadTime=Date.now(),o.data.errorCode=Wi.LOAD_FAIL,o.loadCompleteHandle({adInfo:o.adInfo,adType:o.adType,index:0,hasError:"1",loadingTime:o.data.endLoadTime-o.data.startLoadTime,materialVid:null===(t=o.adInfo.videoMaterial)||void 0===t?void 0:t.vid,materialUrl:null===(e=o.adInfo.videoMaterial)||void 0===e?void 0:e.url,materialDuration:null===(i=o.adInfo.videoMaterial)||void 0===i?void 0:i.duration,detailErrorCode:o.data.errorCode,materialType:m.VIDEO}))},o.browserBeforeUnload=function(){o.stop()},o.pauseUI.reset(),o.pauseUI.setPauseContentVisible(!0);var i=o.adCore.config.getPlayerSize();return o.playerSize={width:i.playerWidth||i.playerOWidth,height:i.playerHeight||i.playerOHeight},o.init(),o}return i(e,t),e.prototype.load=function(){this.adInfo&&this.data.videoUrl&&-1!==this.data.videoUrl.indexOf("http")?(t.prototype.load.call(this),this.pauseUI.setTransparentVideoMaterialVisible(!0),this.show(),this.adCore.event.emit(Ge.AD_LOAD_START,{adType:this.adType,adInfo:this.adInfo}),this.data.startLoadTime=Date.now(),this.createTransparentPlayer()):this.stop()},e.prototype.show=function(){t.prototype.show.call(this),this.pauseUI.setContainerVisible(!0)},e.prototype.hide=function(){t.prototype.hide.call(this),this.pauseUI.setContainerVisible(!1)},e.prototype.stop=function(){this.state!==Zi.END&&(this.reportPlayNotEnd(),t.prototype.stop.call(this))},e.prototype.destroy=function(){var e,o;if(!this.data.hasDestroy){var i=null===(e=this.transparentPlayer)||void 0===e?void 0:e.playtime;this.canPlayReport&&this.data.startPlayTime&&i&&i<this.adInfo.videoMaterial.duration&&this.adInfo.reporter.reportPlay({playType:De.INTERRUPT,timeOffset:i}),this.unbindPlayEvent(),this.unbindUIEvent(),window.removeEventListener("beforeunload",this.browserBeforeUnload),null===(o=this.transparentPlayer)||void 0===o||o.destroy(),this.pauseUI.reset(),t.prototype.destroy.call(this)}},e.prototype.resize=function(t){!t||t.left&&t.top||this.setContainerSize()},e.prototype.initData=function(){return new ts},e.prototype.bindUIEvent=function(){this.pauseUI.on(ma.PAUSE_CLOSE_CLICK,this.handleCloseClick),this.pauseUI.on(ma.PAUSE_RETRY_CLICK,this.handleRetryClick),this.pauseUI.on(ma.PAUSE_LINK_AREA_CLICK,this.handleDetailClick)},e.prototype.unbindUIEvent=function(){this.pauseUI.off(ma.PAUSE_CLOSE_CLICK,this.handleCloseClick),this.pauseUI.off(ma.PAUSE_RETRY_CLICK,this.handleRetryClick),this.pauseUI.off(ma.PAUSE_LINK_AREA_CLICK,this.handleDetailClick)},e.prototype.init=function(){var t;if(this.pauseUI.updateTransparentVideoContainer(),this.pauseUI.updateVideoPost(null===(t=this.adInfo.data.cover_picture)||void 0===t?void 0:t.url),this.pauseUI.setLoadingVisible(!0),this.pauseUI.setMaskVisible(!0),this.pauseUI.updateClickable(this.adInfo.clickable),this.adInfo.videoMaterial){var e=this.adInfo.videoMaterial,o=e.url,i=e.enable_crt_cached,n=e.vid;this.data.videoUrl=i?Ve(n,o,this.adInfo.adType):o}this.pauseUI.setErrorTipsVisible(!1),this.setContainerSize(),this.bindUIEvent(),window.addEventListener("beforeunload",this.browserBeforeUnload)},e.prototype.setContainerSize=function(){var t,e=this.playerSize.width,o=932,i=522;e<1390&&(o=716,i=402),e<1180&&(o=550,i=309),e<880&&(o=424,i=238),this.containerSize={width:o,height:i},Xt(this.pauseUI.$domNodes.pauseContent,{width:o,height:i}),null===(t=this.transparentPlayer)||void 0===t||t.resize(o,i)},e.prototype.createTransparentPlayer=function(){var t;null===(t=this.transparentPlayer)||void 0===t||t.destroy(),this.transparentPlayer=new jn({url:this.data.videoUrl,width:this.containerSize.width,height:this.containerSize.height,container:this.pauseUI.$domNodes.pauseVideoMaterialContainer,loop:!0,useCache:!0,autoplay:!0,fps:20,loopInterval:0}),this.transparentPlayer.on(zn.CANPLAY,this.handlePlayerCanplay),this.transparentPlayer.on(zn.PLAY,this.handlePlayerPlay),this.transparentPlayer.on(zn.ENDED,this.handlePlayerEnded),this.transparentPlayer.on(zn.ERROR,this.handlePlayerError),this.transparentPlayer.on(zn.LOADED,this.handlePlayerLoaded)},e.prototype.unbindPlayEvent=function(){var t,e,o,i,n;null===(t=this.transparentPlayer)||void 0===t||t.off(zn.CANPLAY,this.handlePlayerCanplay),null===(e=this.transparentPlayer)||void 0===e||e.off(zn.PLAY,this.handlePlayerPlay),null===(o=this.transparentPlayer)||void 0===o||o.off(zn.ENDED,this.handlePlayerEnded),null===(i=this.transparentPlayer)||void 0===i||i.off(zn.ERROR,this.handlePlayerError),null===(n=this.transparentPlayer)||void 0===n||n.off(zn.LOADED,this.handlePlayerLoaded)},e.prototype.reportPlayNotEnd=function(){var t;if(this.canPlayReport&&this.adInfo.videoMaterial&&this.data.startPlayTime){var e=Math.floor((null===(t=this.transparentPlayer)||void 0===t?void 0:t.playtime)||0);e<this.adInfo.videoMaterial.duration&&this.adInfo.reporter.reportPlay({playType:De.INTERRUPT,timeOffset:e})}},Object.defineProperty(e.prototype,"canPlayReport",{get:function(){return this.data.playTimes<this.adInfo.maxPlayReportCycles},enumerable:!1,configurable:!0}),e}(Ia);!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}i(e,t)}(Za);var os,is=function(t){function e(e){var o,i=t.call(this,e)||this;i.logger=i.adCore.logger.createLogger("VideoPauseAd"),i.handleMuteClick=function(){i.pausePlayer.toggleMute()},i.handleRetryClick=function(){i.pauseUI.setLoadingVisible(!0),i.pauseUI.setErrorTipsVisible(!1),i.pausePlayer.retry()},i.pauseUI.setPauseContentVisible(!0),i.updateUI();var n=null===(o=i.adInfo.data.cover_picture)||void 0===o?void 0:o.url;return i.pauseUI.updateVideoPost(n),i.bindUIEvent(),i.pauseUI.updateProgress("0%"),i.pauseUI.setLoadingVisible(!0),i.pausePlayer=new Xa({container:i.pauseUI.$domNodes.pauseVideoMaterialContainer,adInterface:i,adInfo:i.adInfo,adCore:i.adCore,toggleMute:function(t){i.pauseUI.toggleMute(t)},onVideoPlayStart:function(e){i.pauseUI.setLoadingVisible(!1),i.pauseUI.setMaskVisible(!0),t.prototype.play.call(i),e.hasReportView||(i.logger.log("可见曝光"),e.hasReportView=!0,i.reportExposure())},onTimeUpdate:function(t,e){i.pauseUI.updateProgress("".concat(t/e*100,"%"))}}),i.bindVideoUIEvent(),i}return i(e,t),e.prototype.getLoadTime=function(){return this.pausePlayer.loadTime},e.prototype.load=function(){var e,o;if(null===(o=null===(e=this.adInfo)||void 0===e?void 0:e.videoMaterial)||void 0===o?void 0:o.url){var i=this.adInfo.videoMaterial,n=i.url,r=Te("fmt",n=i.enable_crt_cached?Ve(i.vid,n,this.adInfo.adType):n)||_.SHD;this.data.urlConfig={uid:"".concat(r,"-").concat(i.vid),url:n,duration:i.duration,vid:i.vid,fileSize:i.file_size,orderId:this.adInfo.orderId},t.prototype.load.call(this),this.pauseUI.setVideoMaterialVisible(!0),this.show(),this.canplayHandler(),this.pausePlayer.load(this.adInfo.videoMaterial)}else this.stop()},e.prototype.show=function(){t.prototype.show.call(this),this.pauseUI.setContainerVisible(!0),this.pauseUI.resizeMaterialContainerSize(this.adInfo.isActive)},e.prototype.hide=function(){t.prototype.hide.call(this),this.pauseUI.setContainerVisible(!1)},e.prototype.resize=function(t){!t||t.left&&t.top||this.pauseUI.resizeMaterialContainerSize(this.adInfo.isActive,t.width)},e.prototype.setVolume=function(t){this.pausePlayer.setVolume(t)},e.prototype.destroy=function(){this.data.hasDestroy||(this.pauseUI.updateProgress("0%"),this.unbindUIEvent(),this.unbindVideoUIEvent(),this.pausePlayer.destroy(),this.pauseUI.adjustDomNodes(),this.pauseUI.reset(),t.prototype.destroy.call(this))},e.prototype.bindVideoUIEvent=function(){this.pauseUI.on(ma.PAUSE_MUTE_CLICK,this.handleMuteClick),this.pauseUI.on(ma.PAUSE_RETRY_CLICK,this.handleRetryClick)},e.prototype.unbindVideoUIEvent=function(){this.pauseUI.off(ma.PAUSE_MUTE_CLICK,this.handleMuteClick),this.pauseUI.off(ma.PAUSE_RETRY_CLICK,this.handleRetryClick)},e}(Ia),ns=((os={})[ke.UNKNOWN]=ba,os[ke.EMPTY]=ba,os[ke.CONTRACT_PICTURE]=ba,os[ke.TRANSPARENT_VIDEO]=es,os[ke.ACTIVE_VIDEO]=is,os[ke.CONTRACT_VIDEO]=is,os[ke.ACTIVE_PICTURE]=xa,os[ke.FULL_SCREEN_PICTURE]=Qa,os[ke.FULL_SCREEN_VIDEO]=Ja,os),rs=function(t){return function(e,o){var i,n;if(e.config.disablePauseAd)return null;var r=null!==(i=o.orders[0])&&void 0!==i?i:o.empty[0];if(!r)return new ba({adCore:e,order:o,config:t});r.isEmpty&&r.reporter.reportExposure();var a=r.orderType;return new(null!==(n=ns[a])&&void 0!==n?n:ba)({adCore:e,order:o,config:t})}},as=function(t,e){if(e.ad_scene===s.PAUSE){var o=e.ad,i=e.auth;if(o&&(o.empty||o.pause))return{adData:[{adType:o.ad_type,auth:i,empty:Ke(t,e,o.empty),orders:Ie(o.pause).map((function(o,n){return new Ye({adCore:t,orderIdx:n,data:o,auth:i,extraInfo:e.extra_info})}))}]}}},ss=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadPauseAd=function(t){return w(e,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:return"user-click"!==t.data.pauseType||this.adCore.outerEvent.isMimiPlayer?[2]:[4,this.adCore.config.requestProxyHttp(s.PAUSE)];case 1:if(e.sent(),"pause"!==this.adCore.config.outerPlayerData.state)return[2];e.label=2;case 2:return e.trys.push([2,4,,5]),[4,this.adCore.api.loadAd(p.PAUSE)];case 3:return e.sent(),[3,5];case 4:return e.sent(),[3,5];case 5:return[2]}}))}))},e.stopPauseAd=function(){e.adCore.api.stopAd(p.PAUSE)},e}return i(e,t),e.prototype.startWatch=function(){this.adCore.config.disablePauseAd||(this.adCore.outerEvent.on(ki.VIDEO_PAUSE,this.loadPauseAd),this.adCore.outerEvent.on(ki.VIDEO_PLAYING,this.stopPauseAd))},e.prototype.endWatch=function(){this.adCore.config.disablePauseAd||(this.adCore.outerEvent.off(ki.VIDEO_PAUSE,this.loadPauseAd),this.adCore.outerEvent.off(ki.VIDEO_PLAYING,this.stopPauseAd))},e}(dn),ds=function(t){return{adType:p.PAUSE,isPointAd:!1,isMultiple:!1,getOrderData:as,creator:rs(t),watcher:function(t){return new ss(t)}}},ls=function(t){function e(e){var o=t.call(this,e)||this;return o.logger=o.adCore.logger.createLogger("PreAd"),o.handleAdStop=function(t){t.adType===p.PRE&&t.isAllAdEnd&&t.rfid&&(o.logger.log("设置 rfid: ".concat(t.rfid)),window.localStorage.setItem(Vt,t.rfid||""))},o.bindAdEnd(),o}return i(e,t),e.prototype.destroy=function(){this.unbindAdEnd(),t.prototype.destroy.call(this)},e.prototype.bindAdEnd=function(){this.adCore.event.on(Ge.AD_STOP,this.handleAdStop)},e.prototype.unbindAdEnd=function(){this.adCore.event.off(Ge.AD_STOP,this.handleAdStop)},e}(Xr),cs=function(t){return function(e,o){var i,n,r=D(D({},o),{orders:R([],o.orders,!0),empty:R([],o.empty,!0)}),a=e.order.getAdOrder(p.BROADCAST);return a&&((i=r.orders).push.apply(i,a.orders),(n=r.empty).push.apply(n,a.empty)),new ls({adCore:e,order:r,config:t})}},ps=function(t,e){var o;if(e.ad_scene!==s.PRE)return{};var i={},n=[];return null===(o=e.ads)||void 0===o||o.forEach((function(o){o.ad_type!==p.PRE?o.ad_type===p.BROADCAST&&n.push({adType:p.BROADCAST,auth:e.auth,empty:Ke(t,e,o.empty),orders:ra(t,e,o.broadcast)}):n.push({adType:p.PRE,auth:e.auth,empty:Ke(t,e,o.empty),orders:ra(t,e,o.pre)})})),n.length>0&&(i.adData=n),i},us=yn("progress-preview"),hs={layer:us("layer"),img:us("img"),adFlag:us("flag")},fs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$domNodes2={},e.roleMap=hs,e}return i(e,t),e.prototype.setLayerVisible=function(t){this.setDomVisible(this.$domNodes.layer,t),this.setDomVisible(this.$domNodes2.layer,t)},e.prototype.update=function(t){var e=t.url,o=t.hasAdFlag;this.$domNodes.img&&(this.$domNodes.img.src=e),this.$domNodes2.img&&(this.$domNodes2.img.src=e),o?(oe(this.$domNodes.adFlag),oe(this.$domNodes2.adFlag)):(ee(this.$domNodes.adFlag),ee(this.$domNodes2.adFlag))},e.prototype.mount=function(){if(!this.$domNodes.layer){var t=document.createElement("div");t.className="txp_tooltip_preview_ad txp_none",t.dataset.role=this.roleMap.layer;var e=document.createElement("div");e.className="txp_tooltip_preview_ad txp_none",e.dataset.role=this.roleMap.layer,this.options.prependEle(t,e),this.$domNodes.layer=t,this.$domNodes2.layer=e}this.appendDom(this.$domNodes.layer,this.$domNodes),this.appendDom(this.$domNodes2.layer,this.$domNodes2)},e.prototype.getTemplate=function(){return'\n      <img data-role="'.concat(this.roleMap.img,'" />\n      <txpdiv data-role="').concat(this.roleMap.adFlag,'" class="txp_ad_mark txp_none">广告</txpdiv>\n    ')},e}(_r),vs=function(t){function e(e){var o=t.call(this,e)||this;return o.ui=new fs({adCore:o.adCore,container:o.config.createLayer(o.adType),prependEle:o.config.prependEle}),o.ui.init(),o}return i(e,t),e.prototype.loadMaterialSuccess=function(){this.ui.update({url:this.adInfo.material.url,hasAdFlag:this.adInfo.hasFlag}),this.show()},e}(gr),ms=function(t){return function(e,o){return new vs({adCore:e,order:o,config:t})}},ys=function(t,e){if(e.ad_scene===s.PROGRESS_PREVIEW){var o=e.ad,i=e.auth;if(o&&(o.empty||o.progress_preview))return{adData:[{adType:o.ad_type,auth:i,empty:Ke(t,e,o.empty),orders:br(t,e,o.progress_preview)}]}}},gs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasLoadAd=!1,e.throttleReportAd=Ee((function(){e.adCore.api.reportAd(p.PROGRESS_PREVIEW)}),2e3),e.loadProgressPreviewAd=function(){return w(e,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return this.adCore.config.requestProxyHttp?this.hasLoadAd?[3,5]:(this.hasLoadAd=!0,[4,this.adCore.config.requestProxyHttp(s.PROGRESS_PREVIEW)]):[2];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.adCore.api.loadAd(p.PROGRESS_PREVIEW)];case 3:return t.sent(),[3,5];case 4:return t.sent(),[3,5];case 5:return this.throttleReportAd(),[2]}}))}))},e}return i(e,t),e.prototype.startWatch=function(){this.adCore.outerEvent.on(ki.HOVER_PROGRESS,this.loadProgressPreviewAd)},e.prototype.endWatch=function(){this.adCore.outerEvent.off(ki.HOVER_PROGRESS,this.loadProgressPreviewAd)},e.prototype.reset=function(){this.hasLoadAd=!1,this.throttleReportAd.cancel()},e}(dn),_s=function(t){return{adType:p.PROGRESS_PREVIEW,isPointAd:!1,isMultiple:!1,getOrderData:ys,creator:ms(t),watcher:function(t){return new gs(t)}}},As=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(Xr),Es=function(t){return function(e,o){return new As({adCore:e,order:o,config:t})}},Cs=function(t,e){var o;if(e.ad_scene===s.TAIL){var i={},n=[];return null===(o=e.ads)||void 0===o||o.forEach((function(o){o.ad_type===p.TAIL&&n.push({adType:o.ad_type,auth:e.auth,empty:Ke(t,e,o.empty),orders:ra(t,e,o.tail)})})),n.length>0&&(i.adData=n),i}},Is=function(t){return{adType:p.TAIL,isPointAd:!1,isMultiple:!1,getOrderData:Cs,creator:Es(t)}},xs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.play=function(){var e,o=this.adCore.config.outerPlayerData.playtime;this.adInfo.reporter.setVideoPlaytime(1e3*o),this.state!==Zi.PLAYING&&this.state!==Zi.PAUSED&&((null===(e=this.adInfo)||void 0===e?void 0:e.point)?(t.prototype.play.call(this),this.show(),this.doExposure(this.adInfo),this.adCore.vr.reportExposure(this.adInfo)):this.stop())},e.prototype.stop=function(){var e;t.prototype.stop.call(this),this.adCore.vr.reportEnded(this.order,{first_view:null!==(e=this.data.showTime)&&void 0!==e?e:-1,ad_playtime:-1}),this.destroy()},e}(nn),Ts=function(t,e){var o;if(e.ad_scene===s.ANCHOR){var i={},n=[];return null===(o=e.anchor_ads)||void 0===o||o.forEach((function(o){if(o.ad_type===p.VIDEO_IN)if(o.point){var i=ze(o);n.push({adType:o.ad_type,auth:e.auth,empty:Ke(t,e,o.empty),orders:He(t,i,e,o.video_in),point:i,pointStatus:en.INIT})}else $e(t,e,o.empty)})),n.length>0&&(i.pointAdData=n),i}},bs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.timeupdate=function(t){var e=this;this.adCore.config.phlsConfig.isSoloPlayingPhls||this.adCore.order.getPoints(p.VIDEO_IN).forEach((function(o){var i=e.adCore.order.getPointOrderFromPoint(p.VIDEO_IN,o);i&&0!==i.orders.length&&(t>=o.begin&&t<=o.end?i.pointStatus===en.INIT?(i.orders.forEach((function(t){e.adCore.ctrl.loadAdOrder(D(D({},i),{orders:[t]})).catch((function(t){}))})),i.pointStatus=en.PLAYING):i.pointStatus===en.PLAYING&&i.orders.forEach((function(t){e.adCore.api.playAd(p.VIDEO_IN,t.orderId)})):i.pointStatus!==en.INIT&&(i.pointStatus=en.INIT,i.orders.forEach((function(t){e.adCore.api.stopAd(p.VIDEO_IN,t.orderId)}))))}))},e}(ln),Ls=yn("video-resolution"),Ps={layer:Ls("layer"),img:Ls("img"),title:Ls("title"),adFlag:Ls("flag")},Ns=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleMap=Ps,e}return i(e,t),e.prototype.update=function(t){var e=t.url,o=t.hasAdFlag,i=t.title;this.$domNodes.img&&(this.$domNodes.img.src=e),re(this.$domNodes.title,i),o?oe(this.$domNodes.adFlag):ee(this.$domNodes.adFlag)},e.prototype.mount=function(){if(!this.$domNodes.layer){var t=document.createElement("div");t.className="txp_menuitem txp_menuitem_ad txp_none",t.dataset.role=this.roleMap.layer,this.options.prependEle(t),this.$domNodes.layer=t}this.appendDom(this.$domNodes.layer)},e.prototype.getTemplate=function(){return'\n      <img data-role="'.concat(this.roleMap.img,'" class="txp_definition_ad" style="width: 40px; height: 23px;" />\n      <txpdiv data-role="').concat(this.roleMap.title,'" class="txp_definition_ad_text"></txpdiv>\n      <txpdiv data-role="').concat(this.roleMap.adFlag,'" class="txp_ad_mark txp_none">广告</txpdiv>\n    ')},e}(_r),Ds=function(t){function e(e){var o=t.call(this,e)||this;return o.ui=new Ns({adCore:o.adCore,container:o.config.createLayer(o.adType),prependEle:o.config.prependEle}),o.ui.init(),o}return i(e,t),e.prototype.loadMaterialSuccess=function(){var t=this.adInfo.data;this.ui.update({title:t.poster.title,url:this.adInfo.material.url,hasAdFlag:this.adInfo.hasFlag}),this.show()},e}(gr),Os=function(t){return function(e,o){return new Ds({adCore:e,order:o,config:t})}},ws=function(t,e){if(e.ad_scene===s.VIDEO_RESOLUTION){var o=e.ad,i=e.auth;if(o&&(o.empty||o.video_resolution))return{adData:[{adType:o.ad_type,auth:i,empty:Ke(t,e,o.empty),orders:br(t,e,o.video_resolution)}]}}},Ss=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasLoadAd=!1,e.throttleReportAd=Ee((function(){e.adCore.api.reportAd(p.VIDEO_RESOLUTION)}),2e3),e.loadVideoResolutionAd=function(){return w(e,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return this.adCore.config.requestProxyHttp?this.hasLoadAd?[3,5]:(this.hasLoadAd=!0,[4,this.adCore.config.requestProxyHttp(s.VIDEO_RESOLUTION)]):[2];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.adCore.ctrl.loadAd(p.VIDEO_RESOLUTION)];case 3:return t.sent(),[3,5];case 4:return t.sent(),[3,5];case 5:return this.throttleReportAd(),[2]}}))}))},e}return i(e,t),e.prototype.startWatch=function(){this.adCore.outerEvent.on(ki.SHOW_LEVELS,this.loadVideoResolutionAd)},e.prototype.endWatch=function(){this.adCore.outerEvent.off(ki.SHOW_LEVELS,this.loadVideoResolutionAd)},e.prototype.reset=function(){this.hasLoadAd=!1,this.throttleReportAd.cancel()},e}(dn),Rs=function(t){return{adType:p.VIDEO_RESOLUTION,isPointAd:!1,isMultiple:!1,getOrderData:ws,creator:Os(t),watcher:function(t){return new Ss(t)}}},Ms=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.registerAd=function(){var e,o=this,i=new We({player:this.player,adCore:this.adCore.adCoreApi,getContainerSize:this.getContainerSize});this.adCore.modules.watcher.register((function(t){return new ha(t)})),this.adCore.modules.watcher.register((function(e){return new pn(e,{disable:t.uaTool.mobile})})),this.adCore.modules.plugin.register([(e={createLayer:this.createLayer},{adType:p.PRE,isPointAd:!1,isMultiple:!1,getOrderData:ps,creator:cs(e)}),Is({createLayer:this.createLayer}),la({createLayer:this.createLayer}),Gn({createLayer:this.createLayer}),Dr({createLayer:this.createLayer,prependEle:function(t){o.safePrependEle("ui-loading","prependElement",t)}}),_s({createLayer:this.createLayer,prependEle:function(t,e){o.safePrependEle("ui-preview","prependElement",t),o.safePrependEle("ui-preview-list","prependElement",e,"current")}}),Rs({createLayer:this.createLayer,prependEle:function(t){o.safePrependEle("ctrlbar","prependElementToLevels",t)}}),ds({createLayer:this.createLayer,resetVideoContainer:i.resetVideoContainer,resizeVideoContainer:i.resizeVideoContainer,shrinkVideoContainer:i.shrinkVideoContainer,capturePlayer:i.capturePlayer}),rr({createLayer:this.createLayer}),{adType:p.ANCHOR_EMPTY,isPointAd:!0,isMultiple:!1,getOrderData:sn,creator:function(t,e){return new rn({adCore:t,order:e,config:void 0})},watcher:function(t){return new cn(t)}},{adType:p.VIDEO_IN,isPointAd:!0,isMultiple:!0,getOrderData:Ts,creator:function(t,e){return new xs({adCore:t,order:e,config:void 0})},watcher:function(t){return new bs(t)}},fr({createLayer:this.createLayer}),{adType:p.NON_STANDARD,isPointAd:!0,isMultiple:!0,getOrderData:pa,creator:function(t,e){return new ca({adCore:t,order:e,config:void 0})},watcher:function(t){return new ua(t)}}])},o}(tn);e.H5Player.registerPlugin(e.AdPluginName,Ms),window.CreativePlayerPlugin=Ms}(ThumbPlayerCore,ThumbPlayerH5);
