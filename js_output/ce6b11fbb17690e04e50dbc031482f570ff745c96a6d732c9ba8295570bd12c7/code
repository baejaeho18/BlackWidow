/*! For license information please see scripts.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={757:(e,t,n)=>{e.exports=n(666)},729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,i,s,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new r(i,s||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,a=new Array(s);r<s;r++)a[r]=i[r].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,r,s,a){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,h=this._events[o],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,i),!0;case 4:return h.fn.call(h.context,t,i,r),!0;case 5:return h.fn.call(h.context,t,i,r,s),!0;case 6:return h.fn.call(h.context,t,i,r,s,a),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];h.fn.apply(h.context,l)}else{var d,p=h.length;for(c=0;c<p;c++)switch(h[c].once&&this.removeListener(e,h[c].fn,void 0,!0),u){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,t);break;case 3:h[c].fn.call(h[c].context,t,i);break;case 4:h[c].fn.call(h[c].context,t,i,r);break;default:if(!l)for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];h[c].fn.apply(h[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,i,r){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||r&&!o.once||i&&o.context!==i||a(this,s);else{for(var l=0,c=[],h=o.length;l<h;l++)(o[l].fn!==t||r&&!o[l].once||i&&o[l].context!==i)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},496:e=>{e.exports=function(){var e={};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function(e){return!(!e||!e.Window)&&e instanceof e.Window};var t={};Object.defineProperty(t,"__esModule",{value:!0}),t.getWindow=function(t){return(0,e.default)(t)?t:(t.ownerDocument||t).defaultView||i.window},t.init=r,t.window=t.realWindow=void 0;var n=void 0;t.realWindow=n;var i=void 0;function r(e){t.realWindow=n=e;var r=e.document.createTextNode("");r.ownerDocument!==e.document&&"function"==typeof e.wrap&&e.wrap(r)===r&&(e=e.wrap(e)),t.window=i=e}t.window=i,"undefined"!=typeof window&&window&&r(window);var s={};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=function(e){return!!e&&"object"===a(e)},l=function(e){return"function"==typeof e},c={window:function(n){return n===t.window||(0,e.default)(n)},docFrag:function(e){return o(e)&&11===e.nodeType},object:o,func:l,number:function(e){return"number"==typeof e},bool:function(e){return"boolean"==typeof e},string:function(e){return"string"==typeof e},element:function(e){if(!e||"object"!==a(e))return!1;var n=t.getWindow(e)||t.window;return/object|function/.test("undefined"==typeof Element?"undefined":a(Element))?e instanceof Element||e instanceof n.Element:1===e.nodeType&&"string"==typeof e.nodeName},plainObject:function(e){return o(e)&&!!e.constructor&&/function Object\b/.test(e.constructor.toString())},array:function(e){return o(e)&&void 0!==e.length&&l(e.splice)}};s.default=c;var h={};function u(e){var t=e.interaction;if("drag"===t.prepared.name){var n=t.prepared.axis;"x"===n?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):"y"===n&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}}function d(e){var t=e.iEvent,n=e.interaction;if("drag"===n.prepared.name){var i=n.prepared.axis;if("x"===i||"y"===i){var r="x"===i?"y":"x";t.page[r]=n.coords.start.page[r],t.client[r]=n.coords.start.client[r],t.delta[r]=0}}}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var p={id:"actions/drag",install:function(e){var t=e.actions,n=e.Interactable,i=e.defaults;n.prototype.draggable=p.draggable,t.map.drag=p,t.methodDict.drag="draggable",i.actions.drag=p.defaults},listeners:{"interactions:before-action-move":u,"interactions:action-resume":u,"interactions:action-move":d,"auto-start:check":function(e){var t=e.interaction,n=e.interactable,i=e.buttons,r=n.options.drag;if(r&&r.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||0!=(i&n.options.drag.mouseButtons)))return e.action={name:"drag",axis:"start"===r.lockAxis?r.startAxis:r.lockAxis},!1}},draggable:function(e){return s.default.object(e)?(this.options.drag.enabled=!1!==e.enabled,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):s.default.bool(e)?(this.options.drag.enabled=e,this):this.options.drag},beforeMove:u,move:d,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},f=p;h.default=f;var m={};Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var g={init:function(e){var t=e;g.document=t.document,g.DocumentFragment=t.DocumentFragment||v,g.SVGElement=t.SVGElement||v,g.SVGSVGElement=t.SVGSVGElement||v,g.SVGElementInstance=t.SVGElementInstance||v,g.Element=t.Element||v,g.HTMLElement=t.HTMLElement||g.Element,g.Event=t.Event,g.Touch=t.Touch||v,g.PointerEvent=t.PointerEvent||t.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function v(){}var y=g;m.default=y;var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var b={init:function(e){var t=m.default.Element,n=e.navigator||{};b.supportsTouch="ontouchstart"in e||s.default.func(e.DocumentTouch)&&m.default.document instanceof e.DocumentTouch,b.supportsPointerEvent=!1!==n.pointerEnabled&&!!m.default.PointerEvent,b.isIOS=/iP(hone|od|ad)/.test(n.platform),b.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),b.isIe9=/MSIE 9/.test(n.userAgent),b.isOperaMobile="Opera"===n.appName&&b.supportsTouch&&/Presto/.test(n.userAgent),b.prefixedMatchesSelector="matches"in t.prototype?"matches":"webkitMatchesSelector"in t.prototype?"webkitMatchesSelector":"mozMatchesSelector"in t.prototype?"mozMatchesSelector":"oMatchesSelector"in t.prototype?"oMatchesSelector":"msMatchesSelector",b.pEventTypes=b.supportsPointerEvent?m.default.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,b.wheelEvent=m.default.document&&"onmousewheel"in m.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},x=b;_.default=x;var S={};function E(e){var t=e.parentNode;if(s.default.docFrag(t)){for(;(t=t.host)&&s.default.docFrag(t););return t}return t}function w(e,n){return t.window!==t.realWindow&&(n=n.replace(/\/deep\//g," ")),e[_.default.prefixedMatchesSelector](n)}Object.defineProperty(S,"__esModule",{value:!0}),S.closest=function(e,t){for(;s.default.element(e);){if(w(e,t))return e;e=E(e)}return null},S.getActualElement=function(e){return e.correspondingUseElement||e},S.getElementClientRect=P,S.getElementRect=function(e){var n=P(e);if(!_.default.isIOS7&&n){var i=A(t.getWindow(e));n.left+=i.x,n.right+=i.x,n.top+=i.y,n.bottom+=i.y}return n},S.getPath=function(e){for(var t=[];e;)t.push(e),e=E(e);return t},S.getScrollXY=A,S.indexOfDeepestElement=function(e){for(var n,i=[],r=0;r<e.length;r++){var s=e[r],a=e[n];if(s&&r!==n)if(a){var o=T(s),l=T(a);if(o!==s.ownerDocument)if(l!==s.ownerDocument)if(o!==l){i=i.length?i:M(a);var c=void 0;if(a instanceof m.default.HTMLElement&&s instanceof m.default.SVGElement&&!(s instanceof m.default.SVGSVGElement)){if(s===l)continue;c=s.ownerSVGElement}else c=s;for(var h=M(c,a.ownerDocument),u=0;h[u]&&h[u]===i[u];)u++;var d=[h[u-1],h[u],i[u]];if(d[0])for(var p=d[0].lastChild;p;){if(p===d[1]){n=r,i=h;break}if(p===d[2])break;p=p.previousSibling}}else f=s,g=a,(parseInt(t.getWindow(f).getComputedStyle(f).zIndex,10)||0)>=(parseInt(t.getWindow(g).getComputedStyle(g).zIndex,10)||0)&&(n=r);else n=r}else n=r}var f,g;return n},S.matchesSelector=w,S.matchesUpTo=function(e,t,n){for(;s.default.element(e);){if(w(e,t))return!0;if((e=E(e))===n)return w(e,t)}return!1},S.nodeContains=function(e,t){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1},S.parentNode=E,S.trySelector=function(e){return!!s.default.string(e)&&(m.default.document.querySelector(e),!0)};var T=function(e){return e.parentNode||e.host};function M(e,t){for(var n,i=[],r=e;(n=T(r))&&r!==t&&n!==r.ownerDocument;)i.unshift(r),r=n;return i}function A(e){return{x:(e=e||t.window).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function P(e){var t=e instanceof m.default.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}var C={};Object.defineProperty(C,"__esModule",{value:!0}),C.default=function(e,t){for(var n in t)e[n]=t[n];return e};var I={};function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function D(e,t,n){return"parent"===e?(0,S.parentNode)(n):"self"===e?t.getRect(n):(0,S.closest)(n,e)}Object.defineProperty(I,"__esModule",{value:!0}),I.addEdges=function(e,t,n){e.left&&(t.left+=n.x),e.right&&(t.right+=n.x),e.top&&(t.top+=n.y),e.bottom&&(t.bottom+=n.y),t.width=t.right-t.left,t.height=t.bottom-t.top},I.getStringOptionResult=D,I.rectToXY=function(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}},I.resolveRectLike=function(e,t,n,i){var r,a=e;return s.default.string(a)?a=D(a,t,n):s.default.func(a)&&(a=a.apply(void 0,function(e){if(Array.isArray(e))return L(e)}(r=i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),s.default.element(a)&&(a=(0,S.getElementRect)(a)),a},I.tlbrToXywh=function(e){return!e||"x"in e&&"y"in e||((e=(0,C.default)({},e)).x=e.left||0,e.y=e.top||0,e.width=e.width||(e.right||0)-e.x,e.height=e.height||(e.bottom||0)-e.y),e},I.xywhToTlbr=function(e){return!e||"left"in e&&"top"in e||((e=(0,C.default)({},e)).left=e.x||0,e.top=e.y||0,e.right=e.right||e.left+e.width,e.bottom=e.bottom||e.top+e.height),e};var R={};Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(e,t,n){var i=e.options[n],r=i&&i.origin||e.options.origin,s=(0,I.resolveRectLike)(r,e,t,[e&&t]);return(0,I.rectToXY)(s)||{x:0,y:0}};var k={};function O(e){return e.trim().split(/ +/)}Object.defineProperty(k,"__esModule",{value:!0}),k.default=function e(t,n,i){if(i=i||{},s.default.string(t)&&-1!==t.search(" ")&&(t=O(t)),s.default.array(t))return t.reduce((function(t,r){return(0,C.default)(t,e(r,n,i))}),i);if(s.default.object(t)&&(n=t,t=""),s.default.func(n))i[t]=i[t]||[],i[t].push(n);else if(s.default.array(n))for(var r=0;r<n.length;r++){var a;a=n[r],e(t,a,i)}else if(s.default.object(n))for(var o in n){var l=O(o).map((function(e){return"".concat(t).concat(e)}));e(l,n[o],i)}return i};var F={};Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0,F.default=function(e,t){return Math.sqrt(e*e+t*t)};var N={};Object.defineProperty(N,"__esModule",{value:!0}),N.default=function(e,t){e.__set||(e.__set={});var n=function(n){"function"!=typeof e[n]&&"__set"!==n&&Object.defineProperty(e,n,{get:function(){return n in e.__set?e.__set[n]:e.__set[n]=t[n]},set:function(t){e.__set[n]=t},configurable:!0})};for(var i in t)n(i);return e};var B={};function z(e){return e instanceof m.default.Event||e instanceof m.default.Touch}function U(e,t,n){return e=e||"page",(n=n||{}).x=t[e+"X"],n.y=t[e+"Y"],n}function V(e,t){return t=t||{x:0,y:0},_.default.isOperaMobile&&z(e)?(U("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):U("page",e,t),t}function H(e,t){return t=t||{},_.default.isOperaMobile&&z(e)?U("screen",e,t):U("client",e,t),t}function G(e){var t=[];return s.default.array(e)?(t[0]=e[0],t[1]=e[1]):"touchend"===e.type?1===e.touches.length?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):0===e.touches.length&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function j(e){for(var t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<e.length;n++){var i=e[n];for(var r in t)t[r]+=i[r]}for(var s in t)t[s]/=e.length;return t}Object.defineProperty(B,"__esModule",{value:!0}),B.coordsToEvent=function(e){return{coords:e,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},B.copyCoords=function(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp},B.getClientXY=H,B.getEventTargets=function(e){var t=s.default.func(e.composedPath)?e.composedPath():e.path;return[S.getActualElement(t?t[0]:e.target),S.getActualElement(e.currentTarget)]},B.getPageXY=V,B.getPointerId=function(e){return s.default.number(e.pointerId)?e.pointerId:e.identifier},B.getPointerType=function(e){return s.default.string(e.pointerType)?e.pointerType:s.default.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type||"")||e instanceof m.default.Touch?"touch":"mouse"},B.getTouchPair=G,B.getXY=U,B.isNativePointer=z,B.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},B.pointerAverage=j,Object.defineProperty(B,"pointerExtend",{enumerable:!0,get:function(){return N.default}}),B.setCoordDeltas=function(e,t,n){e.page.x=n.page.x-t.page.x,e.page.y=n.page.y-t.page.y,e.client.x=n.client.x-t.client.x,e.client.y=n.client.y-t.client.y,e.timeStamp=n.timeStamp-t.timeStamp},B.setCoordVelocity=function(e,t){var n=Math.max(t.timeStamp/1e3,.001);e.page.x=t.page.x/n,e.page.y=t.page.y/n,e.client.x=t.client.x/n,e.client.y=t.client.y/n,e.timeStamp=n},B.setCoords=function(e,t,n){var i=t.length>1?j(t):t[0];V(i,e.page),H(i,e.client),e.timeStamp=n},B.setZeroCoords=function(e){e.page.x=0,e.page.y=0,e.client.x=0,e.client.y=0},B.touchAngle=function(e,t){var n=t+"X",i=t+"Y",r=G(e),s=r[1][n]-r[0][n],a=r[1][i]-r[0][i];return 180*Math.atan2(a,s)/Math.PI},B.touchBBox=function(e){if(!e.length)return null;var t=G(e),n=Math.min(t[0].pageX,t[1].pageX),i=Math.min(t[0].pageY,t[1].pageY),r=Math.max(t[0].pageX,t[1].pageX),s=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:i,left:n,top:i,right:r,bottom:s,width:r-n,height:s-i}},B.touchDistance=function(e,t){var n=t+"X",i=t+"Y",r=G(e),s=r[0][n]-r[1][n],a=r[0][i]-r[1][i];return(0,F.default)(s,a)};var W={};function q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(W,"__esModule",{value:!0}),W.BaseEvent=void 0;var Y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),X(this,"immediatePropagationStopped",!1),X(this,"propagationStopped",!1),this._interaction=t}var t,n;return t=e,(n=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();W.BaseEvent=Y,Object.defineProperty(Y.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var $={};Object.defineProperty($,"__esModule",{value:!0}),$.remove=$.merge=$.from=$.findIndex=$.find=$.contains=void 0,$.contains=function(e,t){return-1!==e.indexOf(t)},$.remove=function(e,t){return e.splice(e.indexOf(t),1)};var K=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}return e};$.merge=K,$.from=function(e){return K([],e)};var Z=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1};$.findIndex=Z,$.find=function(e,t){return e[Z(e,t)]};var Q={};function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function ee(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function ne(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ie(e)}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Q,"__esModule",{value:!0}),Q.DropEvent=void 0;var ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(a,e);var t,n,i,r,s=(i=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=re(i);if(r){var n=re(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ne(this,e)});function a(e,t,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),se(ie(i=s.call(this,t._interaction)),"dropzone",void 0),se(ie(i),"dragEvent",void 0),se(ie(i),"relatedTarget",void 0),se(ie(i),"draggable",void 0),se(ie(i),"propagationStopped",!1),se(ie(i),"immediatePropagationStopped",!1);var r="dragleave"===n?e.prev:e.cur,o=r.element,l=r.dropzone;return i.type=n,i.target=o,i.currentTarget=o,i.dropzone=l,i.dragEvent=t,i.relatedTarget=t.target,i.draggable=t.interactable,i.timeStamp=t.timeStamp,i}return t=a,(n=[{key:"reject",value:function(){var e=this,t=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&t.cur.dropzone===this.dropzone&&t.cur.element===this.target)if(t.prev.dropzone=this.dropzone,t.prev.element=this.target,t.rejected=!0,t.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var n=t.activeDrops,i=$.findIndex(n,(function(t){var n=t.dropzone,i=t.element;return n===e.dropzone&&i===e.target}));t.activeDrops.splice(i,1);var r=new a(t,this.dragEvent,"dropdeactivate");r.dropzone=this.dropzone,r.target=this.target,this.dropzone.fire(r)}else this.dropzone.fire(new a(t,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&ee(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(W.BaseEvent);Q.DropEvent=ae;var oe={};function le(e,t){for(var n=0;n<e.slice().length;n++){var i=e.slice()[n],r=i.dropzone,s=i.element;t.dropzone=r,t.target=s,r.fire(t),t.propagationStopped=t.immediatePropagationStopped=!1}}function ce(e,t){for(var n=function(e,t){for(var n=e.interactables,i=[],r=0;r<n.list.length;r++){var a=n.list[r];if(a.options.drop.enabled){var o=a.options.drop.accept;if(!(s.default.element(o)&&o!==t||s.default.string(o)&&!S.matchesSelector(t,o)||s.default.func(o)&&!o({dropzone:a,draggableElement:t})))for(var l=s.default.string(a.target)?a._context.querySelectorAll(a.target):s.default.array(a.target)?a.target:[a.target],c=0;c<l.length;c++){var h=l[c];h!==t&&i.push({dropzone:a,element:h,rect:a.getRect(h)})}}}return i}(e,t),i=0;i<n.length;i++){var r=n[i];r.rect=r.dropzone.getRect(r.element)}return n}function he(e,t,n){for(var i=e.dropState,r=e.interactable,s=e.element,a=[],o=0;o<i.activeDrops.length;o++){var l=i.activeDrops[o],c=l.dropzone,h=l.element,u=l.rect;a.push(c.dropCheck(t,n,r,s,h,u)?h:null)}var d=S.indexOfDeepestElement(a);return i.activeDrops[d]||null}function ue(e,t,n){var i=e.dropState,r={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===n.type&&(r.activate=new Q.DropEvent(i,n,"dropactivate"),r.activate.target=null,r.activate.dropzone=null),"dragend"===n.type&&(r.deactivate=new Q.DropEvent(i,n,"dropdeactivate"),r.deactivate.target=null,r.deactivate.dropzone=null),i.rejected||(i.cur.element!==i.prev.element&&(i.prev.dropzone&&(r.leave=new Q.DropEvent(i,n,"dragleave"),n.dragLeave=r.leave.target=i.prev.element,n.prevDropzone=r.leave.dropzone=i.prev.dropzone),i.cur.dropzone&&(r.enter=new Q.DropEvent(i,n,"dragenter"),n.dragEnter=i.cur.element,n.dropzone=i.cur.dropzone)),"dragend"===n.type&&i.cur.dropzone&&(r.drop=new Q.DropEvent(i,n,"drop"),n.dropzone=i.cur.dropzone,n.relatedTarget=i.cur.element),"dragmove"===n.type&&i.cur.dropzone&&(r.move=new Q.DropEvent(i,n,"dropmove"),r.move.dragmove=n,n.dropzone=i.cur.dropzone)),r}function de(e,t){var n=e.dropState,i=n.activeDrops,r=n.cur,s=n.prev;t.leave&&s.dropzone.fire(t.leave),t.enter&&r.dropzone.fire(t.enter),t.move&&r.dropzone.fire(t.move),t.drop&&r.dropzone.fire(t.drop),t.deactivate&&le(i,t.deactivate),n.prev.dropzone=r.dropzone,n.prev.element=r.element}function pe(e,t){var n=e.interaction,i=e.iEvent,r=e.event;if("dragmove"===i.type||"dragend"===i.type){var s=n.dropState;t.dynamicDrop&&(s.activeDrops=ce(t,n.element));var a=i,o=he(n,a,r);s.rejected=s.rejected&&!!o&&o.dropzone===s.cur.dropzone&&o.element===s.cur.element,s.cur.dropzone=o&&o.dropzone,s.cur.element=o&&o.element,s.events=ue(n,0,a)}}Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=void 0;var fe={id:"actions/drop",install:function(e){var t=e.actions,n=e.interactStatic,i=e.Interactable,r=e.defaults;e.usePlugin(h.default),i.prototype.dropzone=function(e){return function(e,t){if(s.default.object(t)){if(e.options.drop.enabled=!1!==t.enabled,t.listeners){var n=(0,k.default)(t.listeners),i=Object.keys(n).reduce((function(e,t){return e[/^(enter|leave)/.test(t)?"drag".concat(t):/^(activate|deactivate|move)/.test(t)?"drop".concat(t):t]=n[t],e}),{});e.off(e.options.drop.listeners),e.on(i),e.options.drop.listeners=i}return s.default.func(t.ondrop)&&e.on("drop",t.ondrop),s.default.func(t.ondropactivate)&&e.on("dropactivate",t.ondropactivate),s.default.func(t.ondropdeactivate)&&e.on("dropdeactivate",t.ondropdeactivate),s.default.func(t.ondragenter)&&e.on("dragenter",t.ondragenter),s.default.func(t.ondragleave)&&e.on("dragleave",t.ondragleave),s.default.func(t.ondropmove)&&e.on("dropmove",t.ondropmove),/^(pointer|center)$/.test(t.overlap)?e.options.drop.overlap=t.overlap:s.default.number(t.overlap)&&(e.options.drop.overlap=Math.max(Math.min(1,t.overlap),0)),"accept"in t&&(e.options.drop.accept=t.accept),"checker"in t&&(e.options.drop.checker=t.checker),e}return s.default.bool(t)?(e.options.drop.enabled=t,e):e.options.drop}(this,e)},i.prototype.dropCheck=function(e,t,n,i,r,a){return function(e,t,n,i,r,a,o){var l=!1;if(!(o=o||e.getRect(a)))return!!e.options.drop.checker&&e.options.drop.checker(t,n,l,e,a,i,r);var c=e.options.drop.overlap;if("pointer"===c){var h=(0,R.default)(i,r,"drag"),u=B.getPageXY(t);u.x+=h.x,u.y+=h.y;var d=u.x>o.left&&u.x<o.right,p=u.y>o.top&&u.y<o.bottom;l=d&&p}var f=i.getRect(r);if(f&&"center"===c){var m=f.left+f.width/2,g=f.top+f.height/2;l=m>=o.left&&m<=o.right&&g>=o.top&&g<=o.bottom}return f&&s.default.number(c)&&(l=Math.max(0,Math.min(o.right,f.right)-Math.max(o.left,f.left))*Math.max(0,Math.min(o.bottom,f.bottom)-Math.max(o.top,f.top))/(f.width*f.height)>=c),e.options.drop.checker&&(l=e.options.drop.checker(t,n,l,e,a,i,r)),l}(this,e,t,n,i,r,a)},n.dynamicDrop=function(t){return s.default.bool(t)?(e.dynamicDrop=t,n):e.dynamicDrop},(0,C.default)(t.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),t.methodDict.drop="dropzone",e.dynamicDrop=!1,r.actions.drop=fe.defaults},listeners:{"interactions:before-action-start":function(e){var t=e.interaction;"drag"===t.prepared.name&&(t.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(e,t){var n=e.interaction,i=(e.event,e.iEvent);if("drag"===n.prepared.name){var r=n.dropState;r.activeDrops=null,r.events=null,r.activeDrops=ce(t,n.element),r.events=ue(n,0,i),r.events.activate&&(le(r.activeDrops,r.events.activate),t.fire("actions/drop:start",{interaction:n,dragEvent:i}))}},"interactions:action-move":pe,"interactions:after-action-move":function(e,t){var n=e.interaction,i=e.iEvent;"drag"===n.prepared.name&&(de(n,n.dropState.events),t.fire("actions/drop:move",{interaction:n,dragEvent:i}),n.dropState.events={})},"interactions:action-end":function(e,t){if("drag"===e.interaction.prepared.name){var n=e.interaction,i=e.iEvent;pe(e,t),de(n,n.dropState.events),t.fire("actions/drop:end",{interaction:n,dragEvent:i})}},"interactions:stop":function(e){var t=e.interaction;if("drag"===t.prepared.name){var n=t.dropState;n&&(n.activeDrops=null,n.events=null,n.cur.dropzone=null,n.cur.element=null,n.prev.dropzone=null,n.prev.element=null,n.rejected=!1)}}},getActiveDrops:ce,getDrop:he,getDropEvents:ue,fireDropEvents:de,defaults:{enabled:!1,accept:null,overlap:"pointer"}},me=fe;oe.default=me;var ge={};function ve(e){var t=e.interaction,n=e.iEvent,i=e.phase;if("gesture"===t.prepared.name){var r=t.pointers.map((function(e){return e.pointer})),a="start"===i,o="end"===i,l=t.interactable.options.deltaSource;if(n.touches=[r[0],r[1]],a)n.distance=B.touchDistance(r,l),n.box=B.touchBBox(r),n.scale=1,n.ds=0,n.angle=B.touchAngle(r,l),n.da=0,t.gesture.startDistance=n.distance,t.gesture.startAngle=n.angle;else if(o){var c=t.prevEvent;n.distance=c.distance,n.box=c.box,n.scale=c.scale,n.ds=0,n.angle=c.angle,n.da=0}else n.distance=B.touchDistance(r,l),n.box=B.touchBBox(r),n.scale=n.distance/t.gesture.startDistance,n.angle=B.touchAngle(r,l),n.ds=n.scale-t.gesture.scale,n.da=n.angle-t.gesture.angle;t.gesture.distance=n.distance,t.gesture.angle=n.angle,s.default.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(t.gesture.scale=n.scale)}}Object.defineProperty(ge,"__esModule",{value:!0}),ge.default=void 0;var ye={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(e){var t=e.actions,n=e.Interactable,i=e.defaults;n.prototype.gesturable=function(e){return s.default.object(e)?(this.options.gesture.enabled=!1!==e.enabled,this.setPerAction("gesture",e),this.setOnEvents("gesture",e),this):s.default.bool(e)?(this.options.gesture.enabled=e,this):this.options.gesture},t.map.gesture=ye,t.methodDict.gesture="gesturable",i.actions.gesture=ye.defaults},listeners:{"interactions:action-start":ve,"interactions:action-move":ve,"interactions:action-end":ve,"interactions:new":function(e){e.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(e){if(!(e.interaction.pointers.length<2)){var t=e.interactable.options.gesture;if(t&&t.enabled)return e.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}},_e=ye;ge.default=_e;var be={};function xe(e,t,n,i,r,a,o){if(!t)return!1;if(!0===t){var l=s.default.number(a.width)?a.width:a.right-a.left,c=s.default.number(a.height)?a.height:a.bottom-a.top;if(o=Math.min(o,Math.abs(("left"===e||"right"===e?l:c)/2)),l<0&&("left"===e?e="right":"right"===e&&(e="left")),c<0&&("top"===e?e="bottom":"bottom"===e&&(e="top")),"left"===e){var h=l>=0?a.left:a.right;return n.x<h+o}if("top"===e){var u=c>=0?a.top:a.bottom;return n.y<u+o}if("right"===e)return n.x>(l>=0?a.right:a.left)-o;if("bottom"===e)return n.y>(c>=0?a.bottom:a.top)-o}return!!s.default.element(i)&&(s.default.element(t)?t===i:S.matchesUpTo(i,t,r))}function Se(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.resizeAxes){var i=t;n.interactable.options.resize.square?("y"===n.resizeAxes?i.delta.x=i.delta.y:i.delta.y=i.delta.x,i.axes="xy"):(i.axes=n.resizeAxes,"x"===n.resizeAxes?i.delta.y=0:"y"===n.resizeAxes&&(i.delta.x=0))}}Object.defineProperty(be,"__esModule",{value:!0}),be.default=void 0;var Ee={id:"actions/resize",before:["actions/drag"],install:function(e){var t=e.actions,n=e.browser,i=e.Interactable,r=e.defaults;Ee.cursors=function(e){return e.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(n),Ee.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,i.prototype.resizable=function(t){return function(e,t,n){return s.default.object(t)?(e.options.resize.enabled=!1!==t.enabled,e.setPerAction("resize",t),e.setOnEvents("resize",t),s.default.string(t.axis)&&/^x$|^y$|^xy$/.test(t.axis)?e.options.resize.axis=t.axis:null===t.axis&&(e.options.resize.axis=n.defaults.actions.resize.axis),s.default.bool(t.preserveAspectRatio)?e.options.resize.preserveAspectRatio=t.preserveAspectRatio:s.default.bool(t.square)&&(e.options.resize.square=t.square),e):s.default.bool(t)?(e.options.resize.enabled=t,e):e.options.resize}(this,t,e)},t.map.resize=Ee,t.methodDict.resize="resizable",r.actions.resize=Ee.defaults},listeners:{"interactions:new":function(e){e.interaction.resizeAxes="xy"},"interactions:action-start":function(e){!function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var i=t,r=n.rect;n._rects={start:(0,C.default)({},r),corrected:(0,C.default)({},r),previous:(0,C.default)({},r),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},i.edges=n.prepared.edges,i.rect=n._rects.corrected,i.deltaRect=n._rects.delta}}(e),Se(e)},"interactions:action-move":function(e){!function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var i=t,r=n.interactable.options.resize.invert,s="reposition"===r||"negate"===r,a=n.rect,o=n._rects,l=o.start,c=o.corrected,h=o.delta,u=o.previous;if((0,C.default)(u,c),s){if((0,C.default)(c,a),"reposition"===r){if(c.top>c.bottom){var d=c.top;c.top=c.bottom,c.bottom=d}if(c.left>c.right){var p=c.left;c.left=c.right,c.right=p}}}else c.top=Math.min(a.top,l.bottom),c.bottom=Math.max(a.bottom,l.top),c.left=Math.min(a.left,l.right),c.right=Math.max(a.right,l.left);for(var f in c.width=c.right-c.left,c.height=c.bottom-c.top,c)h[f]=c[f]-u[f];i.edges=n.prepared.edges,i.rect=c,i.deltaRect=h}}(e),Se(e)},"interactions:action-end":function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var i=t;i.edges=n.prepared.edges,i.rect=n._rects.corrected,i.deltaRect=n._rects.delta}},"auto-start:check":function(e){var t=e.interaction,n=e.interactable,i=e.element,r=e.rect,a=e.buttons;if(r){var o=(0,C.default)({},t.coords.cur.page),l=n.options.resize;if(l&&l.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||0!=(a&l.mouseButtons))){if(s.default.object(l.edges)){var c={left:!1,right:!1,top:!1,bottom:!1};for(var h in c)c[h]=xe(h,l.edges[h],o,t._latestPointer.eventTarget,i,r,l.margin||Ee.defaultMargin);c.left=c.left&&!c.right,c.top=c.top&&!c.bottom,(c.left||c.right||c.top||c.bottom)&&(e.action={name:"resize",edges:c})}else{var u="y"!==l.axis&&o.x>r.right-Ee.defaultMargin,d="x"!==l.axis&&o.y>r.bottom-Ee.defaultMargin;(u||d)&&(e.action={name:"resize",axes:(u?"x":"")+(d?"y":"")})}return!e.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(e){var t=e.edges,n=e.axis,i=e.name,r=Ee.cursors,s=null;if(n)s=r[i+n];else if(t){for(var a="",o=["top","bottom","left","right"],l=0;l<o.length;l++){var c=o[l];t[c]&&(a+=c)}s=r[a]}return s},defaultMargin:null},we=Ee;be.default=we;var Te={};Object.defineProperty(Te,"__esModule",{value:!0}),Te.default=void 0;var Me={id:"actions",install:function(e){e.usePlugin(ge.default),e.usePlugin(be.default),e.usePlugin(h.default),e.usePlugin(oe.default)}};Te.default=Me;var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.default=void 0;var Pe,Ce,Ie=0,Le={request:function(e){return Pe(e)},cancel:function(e){return Ce(e)},init:function(e){if(Pe=e.requestAnimationFrame,Ce=e.cancelAnimationFrame,!Pe)for(var t=["ms","moz","webkit","o"],n=0;n<t.length;n++){var i=t[n];Pe=e["".concat(i,"RequestAnimationFrame")],Ce=e["".concat(i,"CancelAnimationFrame")]||e["".concat(i,"CancelRequestAnimationFrame")]}Pe=Pe&&Pe.bind(e),Ce=Ce&&Ce.bind(e),Pe||(Pe=function(t){var n=Date.now(),i=Math.max(0,16-(n-Ie)),r=e.setTimeout((function(){t(n+i)}),i);return Ie=n+i,r},Ce=function(e){return clearTimeout(e)})}};Ae.default=Le;var De={};Object.defineProperty(De,"__esModule",{value:!0}),De.default=void 0,De.getContainer=ke,De.getScroll=Oe,De.getScrollSize=function(e){return s.default.window(e)&&(e=window.document.body),{x:e.scrollWidth,y:e.scrollHeight}},De.getScrollSizeDelta=function(e,t){var n=e.interaction,i=e.element,r=n&&n.interactable.options[n.prepared.name].autoScroll;if(!r||!r.enabled)return t(),{x:0,y:0};var s=ke(r.container,n.interactable,i),a=Oe(s);t();var o=Oe(s);return{x:o.x-a.x,y:o.y-a.y}};var Re={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(e){Re.isScrolling=!0,Ae.default.cancel(Re.i),e.autoScroll=Re,Re.interaction=e,Re.prevTime=Re.now(),Re.i=Ae.default.request(Re.scroll)},stop:function(){Re.isScrolling=!1,Re.interaction&&(Re.interaction.autoScroll=null),Ae.default.cancel(Re.i)},scroll:function(){var e=Re.interaction,t=e.interactable,n=e.element,i=e.prepared.name,r=t.options[i].autoScroll,a=ke(r.container,t,n),o=Re.now(),l=(o-Re.prevTime)/1e3,c=r.speed*l;if(c>=1){var h={x:Re.x*c,y:Re.y*c};if(h.x||h.y){var u=Oe(a);s.default.window(a)?a.scrollBy(h.x,h.y):a&&(a.scrollLeft+=h.x,a.scrollTop+=h.y);var d=Oe(a),p={x:d.x-u.x,y:d.y-u.y};(p.x||p.y)&&t.fire({type:"autoscroll",target:n,interactable:t,delta:p,interaction:e,container:a})}Re.prevTime=o}Re.isScrolling&&(Ae.default.cancel(Re.i),Re.i=Ae.default.request(Re.scroll))},check:function(e,t){var n;return null==(n=e.options[t].autoScroll)?void 0:n.enabled},onInteractionMove:function(e){var t=e.interaction,n=e.pointer;if(t.interacting()&&Re.check(t.interactable,t.prepared.name))if(t.simulation)Re.x=Re.y=0;else{var i,r,a,o,l=t.interactable,c=t.element,h=t.prepared.name,u=l.options[h].autoScroll,d=ke(u.container,l,c);if(s.default.window(d))o=n.clientX<Re.margin,i=n.clientY<Re.margin,r=n.clientX>d.innerWidth-Re.margin,a=n.clientY>d.innerHeight-Re.margin;else{var p=S.getElementClientRect(d);o=n.clientX<p.left+Re.margin,i=n.clientY<p.top+Re.margin,r=n.clientX>p.right-Re.margin,a=n.clientY>p.bottom-Re.margin}Re.x=r?1:o?-1:0,Re.y=a?1:i?-1:0,Re.isScrolling||(Re.margin=u.margin,Re.speed=u.speed,Re.start(t))}}};function ke(e,n,i){return(s.default.string(e)?(0,I.getStringOptionResult)(e,n,i):e)||(0,t.getWindow)(i)}function Oe(e){return s.default.window(e)&&(e=window.document.body),{x:e.scrollLeft,y:e.scrollTop}}var Fe={id:"auto-scroll",install:function(e){var t=e.defaults,n=e.actions;e.autoScroll=Re,Re.now=function(){return e.now()},n.phaselessTypes.autoscroll=!0,t.perAction.autoScroll=Re.defaults},listeners:{"interactions:new":function(e){e.interaction.autoScroll=null},"interactions:destroy":function(e){e.interaction.autoScroll=null,Re.stop(),Re.interaction&&(Re.interaction=null)},"interactions:stop":Re.stop,"interactions:action-move":function(e){return Re.onInteractionMove(e)}}},Ne=Fe;De.default=Ne;var Be={};Object.defineProperty(Be,"__esModule",{value:!0}),Be.copyAction=function(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e},Be.sign=void 0,Be.warnOnce=function(e,n){var i=!1;return function(){return i||(t.window.console.warn(n),i=!0),e.apply(this,arguments)}},Be.sign=function(e){return e>=0?1:-1};var ze={};function Ue(e){return s.default.bool(e)?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor}function Ve(e){return s.default.func(e)?(this.options.actionChecker=e,this):null===e?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=void 0;var He={id:"auto-start/interactableMethods",install:function(e){var t=e.Interactable;t.prototype.getAction=function(t,n,i,r){var s=function(e,t,n,i,r){var s=e.getRect(i),a={action:null,interactable:e,interaction:n,element:i,rect:s,buttons:t.buttons||{0:1,1:4,3:8,4:16}[t.button]};return r.fire("auto-start:check",a),a.action}(this,n,i,r,e);return this.options.actionChecker?this.options.actionChecker(t,n,s,this,r,i):s},t.prototype.ignoreFrom=(0,Be.warnOnce)((function(e){return this._backCompatOption("ignoreFrom",e)}),"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),t.prototype.allowFrom=(0,Be.warnOnce)((function(e){return this._backCompatOption("allowFrom",e)}),"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),t.prototype.actionChecker=Ve,t.prototype.styleCursor=Ue}};ze.default=He;var Ge={};function je(e,t,n,i,r){return t.testIgnoreAllow(t.options[e.name],n,i)&&t.options[e.name].enabled&&Ye(t,n,e,r)?e:null}function We(e,t,n,i,r,s,a){for(var o=0,l=i.length;o<l;o++){var c=i[o],h=r[o],u=c.getAction(t,n,e,h);if(u){var d=je(u,c,h,s,a);if(d)return{action:d,interactable:c,element:h}}}return{action:null,interactable:null,element:null}}function qe(e,t,n,i,r){var a=[],o=[],l=i;function c(e){a.push(e),o.push(l)}for(;s.default.element(l);){a=[],o=[],r.interactables.forEachMatch(l,c);var h=We(e,t,n,a,o,i,r);if(h.action&&!h.interactable.options[h.action.name].manualStart)return h;l=S.parentNode(l)}return{action:null,interactable:null,element:null}}function Xe(e,t,n){var i=t.action,r=t.interactable,s=t.element;i=i||{name:null},e.interactable=r,e.element=s,(0,Be.copyAction)(e.prepared,i),e.rect=r&&i.name?r.getRect(s):null,Ze(e,n),n.fire("autoStart:prepared",{interaction:e})}function Ye(e,t,n,i){var r=e.options,s=r[n.name].max,a=r[n.name].maxPerElement,o=i.autoStart.maxInteractions,l=0,c=0,h=0;if(!(s&&a&&o))return!1;for(var u=0;u<i.interactions.list.length;u++){var d=i.interactions.list[u],p=d.prepared.name;if(d.interacting()){if(++l>=o)return!1;if(d.interactable===e){if((c+=p===n.name?1:0)>=s)return!1;if(d.element===t&&(h++,p===n.name&&h>=a))return!1}}}return o>0}function $e(e,t){return s.default.number(e)?(t.autoStart.maxInteractions=e,this):t.autoStart.maxInteractions}function Ke(e,t,n){var i=n.autoStart.cursorElement;i&&i!==e&&(i.style.cursor=""),e.ownerDocument.documentElement.style.cursor=t,e.style.cursor=t,n.autoStart.cursorElement=t?e:null}function Ze(e,t){var n=e.interactable,i=e.element,r=e.prepared;if("mouse"===e.pointerType&&n&&n.options.styleCursor){var a="";if(r.name){var o=n.options[r.name].cursorChecker;a=s.default.func(o)?o(r,n,i,e._interacting):t.actions.map[r.name].getCursor(r)}Ke(e.element,a||"",t)}else t.autoStart.cursorElement&&Ke(t.autoStart.cursorElement,"",t)}Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.default=void 0;var Qe={id:"auto-start/base",before:["actions"],install:function(e){var t=e.interactStatic,n=e.defaults;e.usePlugin(ze.default),n.base.actionChecker=null,n.base.styleCursor=!0,(0,C.default)(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),t.maxInteractions=function(t){return $e(t,e)},e.autoStart={maxInteractions:1/0,withinInteractionLimit:Ye,cursorElement:null}},listeners:{"interactions:down":function(e,t){var n=e.interaction,i=e.pointer,r=e.event,s=e.eventTarget;n.interacting()||Xe(n,qe(n,i,r,s,t),t)},"interactions:move":function(e,t){!function(e,t){var n=e.interaction,i=e.pointer,r=e.event,s=e.eventTarget;"mouse"!==n.pointerType||n.pointerIsDown||n.interacting()||Xe(n,qe(n,i,r,s,t),t)}(e,t),function(e,t){var n=e.interaction;if(n.pointerIsDown&&!n.interacting()&&n.pointerWasMoved&&n.prepared.name){t.fire("autoStart:before-start",e);var i=n.interactable,r=n.prepared.name;r&&i&&(i.options[r].manualStart||!Ye(i,n.element,n.prepared,t)?n.stop():(n.start(n.prepared,i,n.element),Ze(n,t)))}}(e,t)},"interactions:stop":function(e,t){var n=e.interaction,i=n.interactable;i&&i.options.styleCursor&&Ke(n.element,"",t)}},maxInteractions:$e,withinInteractionLimit:Ye,validateAction:je},Je=Qe;Ge.default=Je;var et={};Object.defineProperty(et,"__esModule",{value:!0}),et.default=void 0;var tt={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(e,t){var n=e.interaction,i=e.eventTarget,r=e.dx,a=e.dy;if("drag"===n.prepared.name){var o=Math.abs(r),l=Math.abs(a),c=n.interactable.options.drag,h=c.startAxis,u=o>l?"x":o<l?"y":"xy";if(n.prepared.axis="start"===c.lockAxis?u[0]:c.lockAxis,"xy"!==u&&"xy"!==h&&h!==u){n.prepared.name=null;for(var d=i,p=function(e){if(e!==n.interactable){var r=n.interactable.options.drag;if(!r.manualStart&&e.testIgnoreAllow(r,d,i)){var s=e.getAction(n.downPointer,n.downEvent,n,d);if(s&&"drag"===s.name&&function(e,t){if(!t)return!1;var n=t.options.drag.startAxis;return"xy"===e||"xy"===n||n===e}(u,e)&&Ge.default.validateAction(s,e,d,i,t))return e}}};s.default.element(d);){var f=t.interactables.forEachMatch(d,p);if(f){n.prepared.name="drag",n.interactable=f,n.element=d;break}d=(0,S.parentNode)(d)}}}}}};et.default=tt;var nt={};function it(e){var t=e.prepared&&e.prepared.name;if(!t)return null;var n=e.interactable.options;return n[t].hold||n[t].delay}Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=void 0;var rt={id:"auto-start/hold",install:function(e){var t=e.defaults;e.usePlugin(Ge.default),t.perAction.hold=0,t.perAction.delay=0},listeners:{"interactions:new":function(e){e.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(e){var t=e.interaction,n=it(t);n>0&&(t.autoStartHoldTimer=setTimeout((function(){t.start(t.prepared,t.interactable,t.element)}),n))},"interactions:move":function(e){var t=e.interaction,n=e.duplicate;t.autoStartHoldTimer&&t.pointerWasMoved&&!n&&(clearTimeout(t.autoStartHoldTimer),t.autoStartHoldTimer=null)},"autoStart:before-start":function(e){var t=e.interaction;it(t)>0&&(t.prepared.name=null)}},getHoldDuration:it},st=rt;nt.default=st;var at={};Object.defineProperty(at,"__esModule",{value:!0}),at.default=void 0;var ot={id:"auto-start",install:function(e){e.usePlugin(Ge.default),e.usePlugin(nt.default),e.usePlugin(et.default)}};at.default=ot;var lt={};function ct(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):s.default.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault}function ht(e){var t=e.interaction,n=e.event;t.interactable&&t.interactable.checkAndPreventDefault(n)}function ut(e){var n=e.Interactable;n.prototype.preventDefault=ct,n.prototype.checkAndPreventDefault=function(n){return function(e,n,i){var r=e.options.preventDefault;if("never"!==r)if("always"!==r){if(n.events.supportsPassive&&/^touch(start|move)$/.test(i.type)){var a=(0,t.getWindow)(i.target).document,o=n.getDocOptions(a);if(!o||!o.events||!1!==o.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(i.type)||s.default.element(i.target)&&(0,S.matchesSelector)(i.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||i.preventDefault()}else i.preventDefault()}(this,e,n)},e.interactions.docEvents.push({type:"dragstart",listener:function(t){for(var n=0;n<e.interactions.list.length;n++){var i=e.interactions.list[n];if(i.element&&(i.element===t.target||(0,S.nodeContains)(i.element,t.target)))return void i.interactable.checkAndPreventDefault(t)}}})}Object.defineProperty(lt,"__esModule",{value:!0}),lt.default=void 0,lt.install=ut;var dt={id:"core/interactablePreventDefault",install:ut,listeners:["down","move","up","cancel"].reduce((function(e,t){return e["interactions:".concat(t)]=ht,e}),{})};lt.default=dt;var pt={};Object.defineProperty(pt,"__esModule",{value:!0}),pt.default=void 0,pt.default={};var ft,mt={};Object.defineProperty(mt,"__esModule",{value:!0}),mt.default=void 0,function(e){e.touchAction="touchAction",e.boxSizing="boxSizing",e.noListeners="noListeners"}(ft||(ft={})),ft.touchAction,ft.boxSizing,ft.noListeners;var gt={id:"dev-tools",install:function(){}};mt.default=gt;var vt={};Object.defineProperty(vt,"__esModule",{value:!0}),vt.default=function e(t){var n={};for(var i in t){var r=t[i];s.default.plainObject(r)?n[i]=e(r):s.default.array(r)?n[i]=$.from(r):n[i]=r}return n};var yt={};function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function xt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(yt,"__esModule",{value:!0}),yt.default=void 0,yt.getRectOffset=Tt;var Et=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),St(this,"states",[]),St(this,"startOffset",{left:0,right:0,top:0,bottom:0}),St(this,"startDelta",void 0),St(this,"result",void 0),St(this,"endResult",void 0),St(this,"edges",void 0),St(this,"interaction",void 0),this.interaction=t,this.result=wt()}var t,n;return t=e,(n=[{key:"start",value:function(e,t){var n=e.phase,i=this.interaction,r=function(e){var t=e.interactable.options[e.prepared.name],n=t.modifiers;return n&&n.length?n:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map((function(e){var n=t[e];return n&&n.enabled&&{options:n,methods:n._methods}})).filter((function(e){return!!e}))}(i);this.prepareStates(r),this.edges=(0,C.default)({},i.edges),this.startOffset=Tt(i.rect,t),this.startDelta={x:0,y:0};var s=this.fillArg({phase:n,pageCoords:t,preEnd:!1});return this.result=wt(),this.startAll(s),this.result=this.setAll(s)}},{key:"fillArg",value:function(e){var t=this.interaction;return e.interaction=t,e.interactable=t.interactable,e.element=t.element,e.rect=e.rect||t.rect,e.edges=this.edges,e.startOffset=this.startOffset,e}},{key:"startAll",value:function(e){for(var t=0;t<this.states.length;t++){var n=this.states[t];n.methods.start&&(e.state=n,n.methods.start(e))}}},{key:"setAll",value:function(e){var t=e.phase,n=e.preEnd,i=e.skipModifiers,r=e.rect;e.coords=(0,C.default)({},e.pageCoords),e.rect=(0,C.default)({},r);for(var s=i?this.states.slice(i):this.states,a=wt(e.coords,e.rect),o=0;o<s.length;o++){var l,c=s[o],h=c.options,u=(0,C.default)({},e.coords),d=null;null!=(l=c.methods)&&l.set&&this.shouldDo(h,n,t)&&(e.state=c,d=c.methods.set(e),I.addEdges(this.interaction.edges,e.rect,{x:e.coords.x-u.x,y:e.coords.y-u.y})),a.eventProps.push(d)}a.delta.x=e.coords.x-e.pageCoords.x,a.delta.y=e.coords.y-e.pageCoords.y,a.rectDelta.left=e.rect.left-r.left,a.rectDelta.right=e.rect.right-r.right,a.rectDelta.top=e.rect.top-r.top,a.rectDelta.bottom=e.rect.bottom-r.bottom;var p=this.result.coords,f=this.result.rect;if(p&&f){var m=a.rect.left!==f.left||a.rect.right!==f.right||a.rect.top!==f.top||a.rect.bottom!==f.bottom;a.changed=m||p.x!==a.coords.x||p.y!==a.coords.y}return a}},{key:"applyToInteraction",value:function(e){var t=this.interaction,n=e.phase,i=t.coords.cur,r=t.coords.start,s=this.result,a=this.startDelta,o=s.delta;"start"===n&&(0,C.default)(this.startDelta,s.delta);for(var l=0;l<[[r,a],[i,o]].length;l++){var c=_t([[r,a],[i,o]][l],2),h=c[0],u=c[1];h.page.x+=u.x,h.page.y+=u.y,h.client.x+=u.x,h.client.y+=u.y}var d=this.result.rectDelta,p=e.rect||t.rect;p.left+=d.left,p.right+=d.right,p.top+=d.top,p.bottom+=d.bottom,p.width=p.right-p.left,p.height=p.bottom-p.top}},{key:"setAndApply",value:function(e){var t=this.interaction,n=e.phase,i=e.preEnd,r=e.skipModifiers,s=this.setAll(this.fillArg({preEnd:i,phase:n,pageCoords:e.modifiedCoords||t.coords.cur.page}));if(this.result=s,!s.changed&&(!r||r<this.states.length)&&t.interacting())return!1;if(e.modifiedCoords){var a=t.coords.cur.page,o={x:e.modifiedCoords.x-a.x,y:e.modifiedCoords.y-a.y};s.coords.x+=o.x,s.coords.y+=o.y,s.delta.x+=o.x,s.delta.y+=o.y}this.applyToInteraction(e)}},{key:"beforeEnd",value:function(e){var t=e.interaction,n=e.event,i=this.states;if(i&&i.length){for(var r=!1,s=0;s<i.length;s++){var a=i[s];e.state=a;var o=a.options,l=a.methods,c=l.beforeEnd&&l.beforeEnd(e);if(c)return this.endResult=c,!1;r=r||!r&&this.shouldDo(o,!0,e.phase,!0)}r&&t.move({event:n,preEnd:!0})}}},{key:"stop",value:function(e){var t=e.interaction;if(this.states&&this.states.length){var n=(0,C.default)({states:this.states,interactable:t.interactable,element:t.element,rect:null},e);this.fillArg(n);for(var i=0;i<this.states.length;i++){var r=this.states[i];n.state=r,r.methods.stop&&r.methods.stop(n)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(e){this.states=[];for(var t=0;t<e.length;t++){var n=e[t],i=n.options,r=n.methods,s=n.name;this.states.push({options:i,methods:r,index:t,name:s})}return this.states}},{key:"restoreInteractionCoords",value:function(e){var t=e.interaction,n=t.coords,i=t.rect,r=t.modification;if(r.result){for(var s=r.startDelta,a=r.result,o=a.delta,l=a.rectDelta,c=[[n.start,s],[n.cur,o]],h=0;h<c.length;h++){var u=_t(c[h],2),d=u[0],p=u[1];d.page.x-=p.x,d.page.y-=p.y,d.client.x-=p.x,d.client.y-=p.y}i.left-=l.left,i.right-=l.right,i.top-=l.top,i.bottom-=l.bottom}}},{key:"shouldDo",value:function(e,t,n,i){return!(!e||!1===e.enabled||i&&!e.endOnly||e.endOnly&&!t||"start"===n&&!e.setStart)}},{key:"copyFrom",value:function(e){this.startOffset=e.startOffset,this.startDelta=e.startDelta,this.edges=e.edges,this.states=e.states.map((function(e){return(0,vt.default)(e)})),this.result=wt((0,C.default)({},e.result.coords),(0,C.default)({},e.result.rect))}},{key:"destroy",value:function(){for(var e in this)this[e]=null}}])&&xt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wt(e,t){return{rect:t,coords:e,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Tt(e,t){return e?{left:t.x-e.left,top:t.y-e.top,right:e.right-t.x,bottom:e.bottom-t.y}:{left:0,top:0,right:0,bottom:0}}yt.default=Et;var Mt={};function At(e){var t=e.iEvent,n=e.interaction.modification.result;n&&(t.modifiers=n.eventProps)}Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.addEventModifiers=At,Mt.default=void 0,Mt.makeModifier=function(e,t){var n=e.defaults,i={start:e.start,set:e.set,beforeEnd:e.beforeEnd,stop:e.stop},r=function(e){var r=e||{};for(var s in r.enabled=!1!==r.enabled,n)s in r||(r[s]=n[s]);var a={options:r,methods:i,name:t,enable:function(){return r.enabled=!0,a},disable:function(){return r.enabled=!1,a}};return a};return t&&"string"==typeof t&&(r._defaults=n,r._methods=i),r};var Pt={id:"modifiers/base",before:["actions"],install:function(e){e.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(e){var t=e.interaction;t.modification=new yt.default(t)},"interactions:before-action-start":function(e){var t=e.interaction.modification;t.start(e,e.interaction.coords.start.page),e.interaction.edges=t.edges,t.applyToInteraction(e)},"interactions:before-action-move":function(e){return e.interaction.modification.setAndApply(e)},"interactions:before-action-end":function(e){return e.interaction.modification.beforeEnd(e)},"interactions:action-start":At,"interactions:action-move":At,"interactions:action-end":At,"interactions:after-action-start":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-move":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:stop":function(e){return e.interaction.modification.stop(e)}}},Ct=Pt;Mt.default=Ct;var It={};Object.defineProperty(It,"__esModule",{value:!0}),It.defaults=void 0,It.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var Lt={};function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function Rt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function kt(e,t){return kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kt(e,t)}function Ot(e,t){if(t&&("object"===Dt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ft(e)}function Ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nt(e){return Nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nt(e)}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.InteractEvent=void 0;var zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kt(e,t)}(a,e);var t,n,i,r,s=(i=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nt(i);if(r){var n=Nt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ot(this,e)});function a(e,t,n,i,r,o,l){var c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Bt(Ft(c=s.call(this,e)),"relatedTarget",null),Bt(Ft(c),"screenX",void 0),Bt(Ft(c),"screenY",void 0),Bt(Ft(c),"button",void 0),Bt(Ft(c),"buttons",void 0),Bt(Ft(c),"ctrlKey",void 0),Bt(Ft(c),"shiftKey",void 0),Bt(Ft(c),"altKey",void 0),Bt(Ft(c),"metaKey",void 0),Bt(Ft(c),"page",void 0),Bt(Ft(c),"client",void 0),Bt(Ft(c),"delta",void 0),Bt(Ft(c),"rect",void 0),Bt(Ft(c),"x0",void 0),Bt(Ft(c),"y0",void 0),Bt(Ft(c),"t0",void 0),Bt(Ft(c),"dt",void 0),Bt(Ft(c),"duration",void 0),Bt(Ft(c),"clientX0",void 0),Bt(Ft(c),"clientY0",void 0),Bt(Ft(c),"velocity",void 0),Bt(Ft(c),"speed",void 0),Bt(Ft(c),"swipe",void 0),Bt(Ft(c),"axes",void 0),Bt(Ft(c),"preEnd",void 0),r=r||e.element;var h=e.interactable,u=(h&&h.options||It.defaults).deltaSource,d=(0,R.default)(h,r,n),p="start"===i,f="end"===i,m=p?Ft(c):e.prevEvent,g=p?e.coords.start:f?{page:m.page,client:m.client,timeStamp:e.coords.cur.timeStamp}:e.coords.cur;return c.page=(0,C.default)({},g.page),c.client=(0,C.default)({},g.client),c.rect=(0,C.default)({},e.rect),c.timeStamp=g.timeStamp,f||(c.page.x-=d.x,c.page.y-=d.y,c.client.x-=d.x,c.client.y-=d.y),c.ctrlKey=t.ctrlKey,c.altKey=t.altKey,c.shiftKey=t.shiftKey,c.metaKey=t.metaKey,c.button=t.button,c.buttons=t.buttons,c.target=r,c.currentTarget=r,c.preEnd=o,c.type=l||n+(i||""),c.interactable=h,c.t0=p?e.pointers[e.pointers.length-1].downTime:m.t0,c.x0=e.coords.start.page.x-d.x,c.y0=e.coords.start.page.y-d.y,c.clientX0=e.coords.start.client.x-d.x,c.clientY0=e.coords.start.client.y-d.y,c.delta=p||f?{x:0,y:0}:{x:c[u].x-m[u].x,y:c[u].y-m[u].y},c.dt=e.coords.delta.timeStamp,c.duration=c.timeStamp-c.t0,c.velocity=(0,C.default)({},e.coords.velocity[u]),c.speed=(0,F.default)(c.velocity.x,c.velocity.y),c.swipe=f||"inertiastart"===i?c.getSwipe():null,c}return t=a,(n=[{key:"getSwipe",value:function(){var e=this._interaction;if(e.prevEvent.speed<600||this.timeStamp-e.prevEvent.timeStamp>150)return null;var t=180*Math.atan2(e.prevEvent.velocityY,e.prevEvent.velocityX)/Math.PI;t<0&&(t+=360);var n=112.5<=t&&t<247.5,i=202.5<=t&&t<337.5;return{up:i,down:!i&&22.5<=t&&t<157.5,left:n,right:!n&&(292.5<=t||t<67.5),angle:t,speed:e.prevEvent.speed,velocity:{x:e.prevEvent.velocityX,y:e.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&Rt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(W.BaseEvent);Lt.InteractEvent=zt,Object.defineProperties(zt.prototype,{pageX:{get:function(){return this.page.x},set:function(e){this.page.x=e}},pageY:{get:function(){return this.page.y},set:function(e){this.page.y=e}},clientX:{get:function(){return this.client.x},set:function(e){this.client.x=e}},clientY:{get:function(){return this.client.y},set:function(e){this.client.y=e}},dx:{get:function(){return this.delta.x},set:function(e){this.delta.x=e}},dy:{get:function(){return this.delta.y},set:function(e){this.delta.y=e}},velocityX:{get:function(){return this.velocity.x},set:function(e){this.velocity.x=e}},velocityY:{get:function(){return this.velocity.y},set:function(e){this.velocity.y=e}}});var Ut={};function Vt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ht(e,t,n){return t&&Vt(e.prototype,t),n&&Vt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.PointerInfo=void 0;var jt=Ht((function e(t,n,i,r,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Gt(this,"id",void 0),Gt(this,"pointer",void 0),Gt(this,"event",void 0),Gt(this,"downTime",void 0),Gt(this,"downTarget",void 0),this.id=t,this.pointer=n,this.event=i,this.downTime=r,this.downTarget=s}));Ut.PointerInfo=jt;var Wt,qt,Xt={};function Yt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.Interaction=void 0,Object.defineProperty(Xt,"PointerInfo",{enumerable:!0,get:function(){return Ut.PointerInfo}}),Xt.default=Xt._ProxyValues=Xt._ProxyMethods=void 0,Xt._ProxyValues=Wt,function(e){e.interactable="",e.element="",e.prepared="",e.pointerIsDown="",e.pointerWasMoved="",e._proxy=""}(Wt||(Xt._ProxyValues=Wt={})),Xt._ProxyMethods=qt,function(e){e.start="",e.move="",e.end="",e.stop="",e.interacting=""}(qt||(Xt._ProxyMethods=qt={}));var Kt=0,Zt=function(){function e(t){var n=this,i=t.pointerType,r=t.scopeFire;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$t(this,"interactable",null),$t(this,"element",null),$t(this,"rect",null),$t(this,"_rects",void 0),$t(this,"edges",null),$t(this,"_scopeFire",void 0),$t(this,"prepared",{name:null,axis:null,edges:null}),$t(this,"pointerType",void 0),$t(this,"pointers",[]),$t(this,"downEvent",null),$t(this,"downPointer",{}),$t(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),$t(this,"prevEvent",null),$t(this,"pointerIsDown",!1),$t(this,"pointerWasMoved",!1),$t(this,"_interacting",!1),$t(this,"_ending",!1),$t(this,"_stopped",!0),$t(this,"_proxy",null),$t(this,"simulation",null),$t(this,"doMove",(0,Be.warnOnce)((function(e){this.move(e)}),"The interaction.doMove() method has been renamed to interaction.move()")),$t(this,"coords",{start:B.newCoords(),prev:B.newCoords(),cur:B.newCoords(),delta:B.newCoords(),velocity:B.newCoords()}),$t(this,"_id",Kt++),this._scopeFire=r,this.pointerType=i;var s=this;this._proxy={};var a=function(e){Object.defineProperty(n._proxy,e,{get:function(){return s[e]}})};for(var o in Wt)a(o);var l=function(e){Object.defineProperty(n._proxy,e,{value:function(){return s[e].apply(s,arguments)}})};for(var c in qt)l(c);this._scopeFire("interactions:new",{interaction:this})}var t,n;return t=e,n=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(e,t,n){var i=this.updatePointer(e,t,n,!0),r=this.pointers[i];this._scopeFire("interactions:down",{pointer:e,event:t,eventTarget:n,pointerIndex:i,pointerInfo:r,type:"down",interaction:this})}},{key:"start",value:function(e,t,n){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===e.name?2:1)||!t.options[e.name].enabled)&&((0,Be.copyAction)(this.prepared,e),this.interactable=t,this.element=n,this.rect=t.getRect(n),this.edges=this.prepared.edges?(0,C.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(e,t,n){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(e,t,n,!1);var i,r,s=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(i=this.coords.cur.client.x-this.coords.start.client.x,r=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=(0,F.default)(i,r)>this.pointerMoveTolerance);var a=this.getPointerIndex(e),o={pointer:e,pointerIndex:a,pointerInfo:this.pointers[a],event:t,type:"move",eventTarget:n,dx:i,dy:r,duplicate:s,interaction:this};s||B.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",o),s||this.simulation||(this.interacting()&&(o.type=null,this.move(o)),this.pointerWasMoved&&B.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(e){e&&e.event||B.setZeroCoords(this.coords.delta),(e=(0,C.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},e||{})).phase="move",this._doPhase(e)}},{key:"pointerUp",value:function(e,t,n,i){var r=this.getPointerIndex(e);-1===r&&(r=this.updatePointer(e,t,n,!1));var s=/cancel$/i.test(t.type)?"cancel":"up";this._scopeFire("interactions:".concat(s),{pointer:e,pointerIndex:r,pointerInfo:this.pointers[r],event:t,eventTarget:n,type:s,curEventTarget:i,interaction:this}),this.simulation||this.end(t),this.removePointer(e,t)}},{key:"documentBlur",value:function(e){this.end(e),this._scopeFire("interactions:blur",{event:e,type:"blur",interaction:this})}},{key:"end",value:function(e){var t;this._ending=!0,e=e||this._latestPointer.event,this.interacting()&&(t=this._doPhase({event:e,interaction:this,phase:"end"})),this._ending=!1,!0===t&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(e){var t=B.getPointerId(e);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:$.findIndex(this.pointers,(function(e){return e.id===t}))}},{key:"getPointerInfo",value:function(e){return this.pointers[this.getPointerIndex(e)]}},{key:"updatePointer",value:function(e,t,n,i){var r=B.getPointerId(e),s=this.getPointerIndex(e),a=this.pointers[s];return i=!1!==i&&(i||/(down|start)$/i.test(t.type)),a?a.pointer=e:(a=new Ut.PointerInfo(r,e,t,null,null),s=this.pointers.length,this.pointers.push(a)),B.setCoords(this.coords.cur,this.pointers.map((function(e){return e.pointer})),this._now()),B.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),i&&(this.pointerIsDown=!0,a.downTime=this.coords.cur.timeStamp,a.downTarget=n,B.pointerExtend(this.downPointer,e),this.interacting()||(B.copyCoords(this.coords.start,this.coords.cur),B.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=t,this.pointerWasMoved=!1)),this._updateLatestPointer(e,t,n),this._scopeFire("interactions:update-pointer",{pointer:e,event:t,eventTarget:n,down:i,pointerInfo:a,pointerIndex:s,interaction:this}),s}},{key:"removePointer",value:function(e,t){var n=this.getPointerIndex(e);if(-1!==n){var i=this.pointers[n];this._scopeFire("interactions:remove-pointer",{pointer:e,event:t,eventTarget:null,pointerIndex:n,pointerInfo:i,interaction:this}),this.pointers.splice(n,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(e,t,n){this._latestPointer.pointer=e,this._latestPointer.event=t,this._latestPointer.eventTarget=n}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(e,t,n,i){return new Lt.InteractEvent(this,e,this.prepared.name,t,this.element,n,i)}},{key:"_fireEvent",value:function(e){var t;null==(t=this.interactable)||t.fire(e),(!this.prevEvent||e.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=e)}},{key:"_doPhase",value:function(e){var t=e.event,n=e.phase,i=e.preEnd,r=e.type,s=this.rect;if(s&&"move"===n&&(I.addEdges(this.edges,s,this.coords.delta[this.interactable.options.deltaSource]),s.width=s.right-s.left,s.height=s.bottom-s.top),!1===this._scopeFire("interactions:before-action-".concat(n),e))return!1;var a=e.iEvent=this._createPreparedEvent(t,n,i,r);return this._scopeFire("interactions:action-".concat(n),e),"start"===n&&(this.prevEvent=a),this._fireEvent(a),this._scopeFire("interactions:after-action-".concat(n),e),!0}},{key:"_now",value:function(){return Date.now()}}],n&&Yt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();Xt.Interaction=Zt;var Qt=Zt;Xt.default=Qt;var Jt={};function en(e){e.pointerIsDown&&(sn(e.coords.cur,e.offset.total),e.offset.pending.x=0,e.offset.pending.y=0)}function tn(e){nn(e.interaction)}function nn(e){if(!function(e){return!(!e.offset.pending.x&&!e.offset.pending.y)}(e))return!1;var t=e.offset.pending;return sn(e.coords.cur,t),sn(e.coords.delta,t),I.addEdges(e.edges,e.rect,t),t.x=0,t.y=0,!0}function rn(e){var t=e.x,n=e.y;this.offset.pending.x+=t,this.offset.pending.y+=n,this.offset.total.x+=t,this.offset.total.y+=n}function sn(e,t){var n=e.page,i=e.client,r=t.x,s=t.y;n.x+=r,n.y+=s,i.x+=r,i.y+=s}Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.addTotal=en,Jt.applyPending=nn,Jt.default=void 0,Xt._ProxyMethods.offsetBy="";var an={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(e){e.Interaction.prototype.offsetBy=rn},listeners:{"interactions:new":function(e){e.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(e){return en(e.interaction)},"interactions:before-action-start":tn,"interactions:before-action-move":tn,"interactions:before-action-end":function(e){var t=e.interaction;if(nn(t))return t.move({offset:!0}),t.end(),!1},"interactions:stop":function(e){var t=e.interaction;t.offset.total.x=0,t.offset.total.y=0,t.offset.pending.x=0,t.offset.pending.y=0}}},on=an;Jt.default=on;var ln={};function cn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(ln,"__esModule",{value:!0}),ln.default=ln.InertiaState=void 0;var un=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),hn(this,"active",!1),hn(this,"isModified",!1),hn(this,"smoothEnd",!1),hn(this,"allowResume",!1),hn(this,"modification",void 0),hn(this,"modifierCount",0),hn(this,"modifierArg",void 0),hn(this,"startCoords",void 0),hn(this,"t0",0),hn(this,"v0",0),hn(this,"te",0),hn(this,"targetOffset",void 0),hn(this,"modifiedOffset",void 0),hn(this,"currentOffset",void 0),hn(this,"lambda_v0",0),hn(this,"one_ve_v0",0),hn(this,"timeout",void 0),hn(this,"interaction",void 0),this.interaction=t}var t,n;return t=e,(n=[{key:"start",value:function(e){var t=this.interaction,n=dn(t);if(!n||!n.enabled)return!1;var i=t.coords.velocity.client,r=(0,F.default)(i.x,i.y),s=this.modification||(this.modification=new yt.default(t));if(s.copyFrom(t.modification),this.t0=t._now(),this.allowResume=n.allowResume,this.v0=r,this.currentOffset={x:0,y:0},this.startCoords=t.coords.cur.page,this.modifierArg=s.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-t.coords.cur.timeStamp<50&&r>n.minSpeed&&r>n.endSpeed)this.startInertia();else{if(s.result=s.setAll(this.modifierArg),!s.result.changed)return!1;this.startSmoothEnd()}return t.modification.result.rect=null,t.offsetBy(this.targetOffset),t._doPhase({interaction:t,event:e,phase:"inertiastart"}),t.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),t.modification.result.rect=null,this.active=!0,t.simulation=this,!0}},{key:"startInertia",value:function(){var e=this,t=this.interaction.coords.velocity.client,n=dn(this.interaction),i=n.resistance,r=-Math.log(n.endSpeed/this.v0)/i;this.targetOffset={x:(t.x-r)/i,y:(t.y-r)/i},this.te=r,this.lambda_v0=i/this.v0,this.one_ve_v0=1-n.endSpeed/this.v0;var s=this.modification,a=this.modifierArg;a.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},s.result=s.setAll(a),s.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+s.result.delta.x,y:this.targetOffset.y+s.result.delta.y}),this.onNextFrame((function(){return e.inertiaTick()}))}},{key:"startSmoothEnd",value:function(){var e=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame((function(){return e.smoothEndTick()}))}},{key:"onNextFrame",value:function(e){var t=this;this.timeout=Ae.default.request((function(){t.active&&e()}))}},{key:"inertiaTick",value:function(){var e,t,n,i,r,s=this,a=this.interaction,o=dn(a).resistance,l=(a._now()-this.t0)/1e3;if(l<this.te){var c,h=1-(Math.exp(-o*l)-this.lambda_v0)/this.one_ve_v0;this.isModified?(e=this.targetOffset.x,t=this.targetOffset.y,n=this.modifiedOffset.x,i=this.modifiedOffset.y,c={x:fn(r=h,0,e,n),y:fn(r,0,t,i)}):c={x:this.targetOffset.x*h,y:this.targetOffset.y*h};var u={x:c.x-this.currentOffset.x,y:c.y-this.currentOffset.y};this.currentOffset.x+=u.x,this.currentOffset.y+=u.y,a.offsetBy(u),a.move(),this.onNextFrame((function(){return s.inertiaTick()}))}else a.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var e=this,t=this.interaction,n=t._now()-this.t0,i=dn(t).smoothEndDuration;if(n<i){var r={x:mn(n,0,this.targetOffset.x,i),y:mn(n,0,this.targetOffset.y,i)},s={x:r.x-this.currentOffset.x,y:r.y-this.currentOffset.y};this.currentOffset.x+=s.x,this.currentOffset.y+=s.y,t.offsetBy(s),t.move({skipModifiers:this.modifierCount}),this.onNextFrame((function(){return e.smoothEndTick()}))}else t.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(e){var t=e.pointer,n=e.event,i=e.eventTarget,r=this.interaction;r.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),r.updatePointer(t,n,i,!0),r._doPhase({interaction:r,event:n,phase:"resume"}),(0,B.copyCoords)(r.coords.prev,r.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Ae.default.cancel(this.timeout)}}])&&cn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dn(e){var t=e.interactable,n=e.prepared;return t&&t.options&&n.name&&t.options[n.name].inertia}ln.InertiaState=un;var pn={id:"inertia",before:["modifiers","actions"],install:function(e){var t=e.defaults;e.usePlugin(Jt.default),e.usePlugin(Mt.default),e.actions.phases.inertiastart=!0,e.actions.phases.resume=!0,t.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(e){var t=e.interaction;t.inertia=new un(t)},"interactions:before-action-end":function(e){var t=e.interaction,n=e.event;return(!t._interacting||t.simulation||!t.inertia.start(n))&&null},"interactions:down":function(e){var t=e.interaction,n=e.eventTarget,i=t.inertia;if(i.active)for(var r=n;s.default.element(r);){if(r===t.element){i.resume(e);break}r=S.parentNode(r)}},"interactions:stop":function(e){var t=e.interaction.inertia;t.active&&t.stop()},"interactions:before-action-resume":function(e){var t=e.interaction.modification;t.stop(e),t.start(e,e.interaction.coords.cur.page),t.applyToInteraction(e)},"interactions:before-action-inertiastart":function(e){return e.interaction.modification.setAndApply(e)},"interactions:action-resume":Mt.addEventModifiers,"interactions:action-inertiastart":Mt.addEventModifiers,"interactions:after-action-inertiastart":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-resume":function(e){return e.interaction.modification.restoreInteractionCoords(e)}}};function fn(e,t,n,i){var r=1-e;return r*r*t+2*r*e*n+e*e*i}function mn(e,t,n,i){return-n*(e/=i)*(e-2)+t}var gn=pn;ln.default=gn;var vn={};function yn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bn(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(e.immediatePropagationStopped)break;i(e)}}Object.defineProperty(vn,"__esModule",{value:!0}),vn.Eventable=void 0;var xn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_n(this,"options",void 0),_n(this,"types",{}),_n(this,"propagationStopped",!1),_n(this,"immediatePropagationStopped",!1),_n(this,"global",void 0),this.options=(0,C.default)({},t||{})}var t,n;return t=e,(n=[{key:"fire",value:function(e){var t,n=this.global;(t=this.types[e.type])&&bn(e,t),!e.propagationStopped&&n&&(t=n[e.type])&&bn(e,t)}},{key:"on",value:function(e,t){var n=(0,k.default)(e,t);for(e in n)this.types[e]=$.merge(this.types[e]||[],n[e])}},{key:"off",value:function(e,t){var n=(0,k.default)(e,t);for(e in n){var i=this.types[e];if(i&&i.length)for(var r=0;r<n[e].length;r++){var s=n[e][r],a=i.indexOf(s);-1!==a&&i.splice(a,1)}}}},{key:"getRect",value:function(e){return null}}])&&yn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();vn.Eventable=xn;var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.default=function(e,t){if(t.phaselessTypes[e])return!0;for(var n in t.map)if(0===e.indexOf(n)&&e.substr(n.length)in t.phases)return!0;return!1};var En={};Object.defineProperty(En,"__esModule",{value:!0}),En.createInteractStatic=function(e){var t=function t(n,i){var r=e.interactables.get(n,i);return r||((r=e.interactables.new(n,i)).events.global=t.globalEvents),r};return t.getPointerAverage=B.pointerAverage,t.getTouchBBox=B.touchBBox,t.getTouchDistance=B.touchDistance,t.getTouchAngle=B.touchAngle,t.getElementRect=S.getElementRect,t.getElementClientRect=S.getElementClientRect,t.matchesSelector=S.matchesSelector,t.closest=S.closest,t.globalEvents={},t.version="1.10.17",t.scope=e,t.use=function(e,t){return this.scope.usePlugin(e,t),this},t.isSet=function(e,t){return!!this.scope.interactables.get(e,t&&t.context)},t.on=(0,Be.warnOnce)((function(e,t,n){if(s.default.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),s.default.array(e)){for(var i=0;i<e.length;i++){var r=e[i];this.on(r,t,n)}return this}if(s.default.object(e)){for(var a in e)this.on(a,e[a],t);return this}return(0,Sn.default)(e,this.scope.actions)?this.globalEvents[e]?this.globalEvents[e].push(t):this.globalEvents[e]=[t]:this.scope.events.add(this.scope.document,e,t,{options:n}),this}),"The interact.on() method is being deprecated"),t.off=(0,Be.warnOnce)((function(e,t,n){if(s.default.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),s.default.array(e)){for(var i=0;i<e.length;i++){var r=e[i];this.off(r,t,n)}return this}if(s.default.object(e)){for(var a in e)this.off(a,e[a],t);return this}var o;return(0,Sn.default)(e,this.scope.actions)?e in this.globalEvents&&-1!==(o=this.globalEvents[e].indexOf(t))&&this.globalEvents[e].splice(o,1):this.scope.events.remove(this.scope.document,e,t,n),this}),"The interact.off() method is being deprecated"),t.debug=function(){return this.scope},t.supportsTouch=function(){return _.default.supportsTouch},t.supportsPointerEvent=function(){return _.default.supportsPointerEvent},t.stop=function(){for(var e=0;e<this.scope.interactions.list.length;e++)this.scope.interactions.list[e].stop();return this},t.pointerMoveTolerance=function(e){return s.default.number(e)?(this.scope.interactions.pointerMoveTolerance=e,this):this.scope.interactions.pointerMoveTolerance},t.addDocument=function(e,t){this.scope.addDocument(e,t)},t.removeDocument=function(e){this.scope.removeDocument(e)},t};var wn={};function Tn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(wn,"__esModule",{value:!0}),wn.Interactable=void 0;var An=function(){function e(n,i,r,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Mn(this,"options",void 0),Mn(this,"_actions",void 0),Mn(this,"target",void 0),Mn(this,"events",new vn.Eventable),Mn(this,"_context",void 0),Mn(this,"_win",void 0),Mn(this,"_doc",void 0),Mn(this,"_scopeEvents",void 0),Mn(this,"_rectChecker",void 0),this._actions=i.actions,this.target=n,this._context=i.context||r,this._win=(0,t.getWindow)((0,S.trySelector)(n)?this._context:n),this._doc=this._win.document,this._scopeEvents=s,this.set(i)}var n,i;return n=e,(i=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(e,t){return s.default.func(t.onstart)&&this.on("".concat(e,"start"),t.onstart),s.default.func(t.onmove)&&this.on("".concat(e,"move"),t.onmove),s.default.func(t.onend)&&this.on("".concat(e,"end"),t.onend),s.default.func(t.oninertiastart)&&this.on("".concat(e,"inertiastart"),t.oninertiastart),this}},{key:"updatePerActionListeners",value:function(e,t,n){(s.default.array(t)||s.default.object(t))&&this.off(e,t),(s.default.array(n)||s.default.object(n))&&this.on(e,n)}},{key:"setPerAction",value:function(e,t){var n=this._defaults;for(var i in t){var r=i,a=this.options[e],o=t[r];"listeners"===r&&this.updatePerActionListeners(e,a.listeners,o),s.default.array(o)?a[r]=$.from(o):s.default.plainObject(o)?(a[r]=(0,C.default)(a[r]||{},(0,vt.default)(o)),s.default.object(n.perAction[r])&&"enabled"in n.perAction[r]&&(a[r].enabled=!1!==o.enabled)):s.default.bool(o)&&s.default.object(n.perAction[r])?a[r].enabled=o:a[r]=o}}},{key:"getRect",value:function(e){return e=e||(s.default.element(this.target)?this.target:null),s.default.string(this.target)&&(e=e||this._context.querySelector(this.target)),(0,S.getElementRect)(e)}},{key:"rectChecker",value:function(e){var t=this;return s.default.func(e)?(this._rectChecker=e,this.getRect=function(e){var n=(0,C.default)({},t._rectChecker(e));return"width"in n||(n.width=n.right-n.left,n.height=n.bottom-n.top),n},this):null===e?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(e,t){if((0,S.trySelector)(t)||s.default.object(t)){for(var n in this.options[e]=t,this._actions.map)this.options[n][e]=t;return this}return this.options[e]}},{key:"origin",value:function(e){return this._backCompatOption("origin",e)}},{key:"deltaSource",value:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(e){return this._context===e.ownerDocument||(0,S.nodeContains)(this._context,e)}},{key:"testIgnoreAllow",value:function(e,t,n){return!this.testIgnore(e.ignoreFrom,t,n)&&this.testAllow(e.allowFrom,t,n)}},{key:"testAllow",value:function(e,t,n){return!e||!!s.default.element(n)&&(s.default.string(e)?(0,S.matchesUpTo)(n,e,t):!!s.default.element(e)&&(0,S.nodeContains)(e,n))}},{key:"testIgnore",value:function(e,t,n){return!(!e||!s.default.element(n))&&(s.default.string(e)?(0,S.matchesUpTo)(n,e,t):!!s.default.element(e)&&(0,S.nodeContains)(e,n))}},{key:"fire",value:function(e){return this.events.fire(e),this}},{key:"_onOff",value:function(e,t,n,i){s.default.object(t)&&!s.default.array(t)&&(i=n,n=null);var r="on"===e?"add":"remove",a=(0,k.default)(t,n);for(var o in a){"wheel"===o&&(o=_.default.wheelEvent);for(var l=0;l<a[o].length;l++){var c=a[o][l];(0,Sn.default)(o,this._actions)?this.events[e](o,c):s.default.string(this.target)?this._scopeEvents["".concat(r,"Delegate")](this.target,this._context,o,c,i):this._scopeEvents[r](this.target,o,c,i)}}return this}},{key:"on",value:function(e,t,n){return this._onOff("on",e,t,n)}},{key:"off",value:function(e,t,n){return this._onOff("off",e,t,n)}},{key:"set",value:function(e){var t=this._defaults;for(var n in s.default.object(e)||(e={}),this.options=(0,vt.default)(t.base),this._actions.methodDict){var i=n,r=this._actions.methodDict[i];this.options[i]={},this.setPerAction(i,(0,C.default)((0,C.default)({},t.perAction),t.actions[i])),this[r](e[i])}for(var a in e)s.default.func(this[a])&&this[a](e[a]);return this}},{key:"unset",value:function(){if(s.default.string(this.target))for(var e in this._scopeEvents.delegatedEvents)for(var t=this._scopeEvents.delegatedEvents[e],n=t.length-1;n>=0;n--){var i=t[n],r=i.selector,a=i.context,o=i.listeners;r===this.target&&a===this._context&&t.splice(n,1);for(var l=o.length-1;l>=0;l--)this._scopeEvents.removeDelegate(this.target,this._context,e,o[l][0],o[l][1])}else this._scopeEvents.remove(this.target,"all")}}])&&Tn(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),e}();wn.Interactable=An;var Pn={};function Cn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function In(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.InteractableSet=void 0;var Ln=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),In(this,"list",[]),In(this,"selectorMap",{}),In(this,"scope",void 0),this.scope=t,t.addListeners({"interactable:unset":function(e){var t=e.interactable,i=t.target,r=t._context,a=s.default.string(i)?n.selectorMap[i]:i[n.scope.id],o=$.findIndex(a,(function(e){return e.context===r}));a[o]&&(a[o].context=null,a[o].interactable=null),a.splice(o,1)}})}var t,n;return t=e,(n=[{key:"new",value:function(e,t){t=(0,C.default)(t||{},{actions:this.scope.actions});var n=new this.scope.Interactable(e,t,this.scope.document,this.scope.events),i={context:n._context,interactable:n};return this.scope.addDocument(n._doc),this.list.push(n),s.default.string(e)?(this.selectorMap[e]||(this.selectorMap[e]=[]),this.selectorMap[e].push(i)):(n.target[this.scope.id]||Object.defineProperty(e,this.scope.id,{value:[],configurable:!0}),e[this.scope.id].push(i)),this.scope.fire("interactable:new",{target:e,options:t,interactable:n,win:this.scope._win}),n}},{key:"get",value:function(e,t){var n=t&&t.context||this.scope.document,i=s.default.string(e),r=i?this.selectorMap[e]:e[this.scope.id];if(!r)return null;var a=$.find(r,(function(t){return t.context===n&&(i||t.interactable.inContext(e))}));return a&&a.interactable}},{key:"forEachMatch",value:function(e,t){for(var n=0;n<this.list.length;n++){var i=this.list[n],r=void 0;if((s.default.string(i.target)?s.default.element(e)&&S.matchesSelector(e,i.target):e===i.target)&&i.inContext(e)&&(r=t(i)),void 0!==r)return r}}}])&&Cn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();Pn.InteractableSet=Ln;var Dn={};function Rn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function On(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.default=void 0;var Nn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),kn(this,"currentTarget",void 0),kn(this,"originalEvent",void 0),kn(this,"type",void 0),this.originalEvent=t,(0,N.default)(this,t)}var t,n;return t=e,(n=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&Rn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Bn(e){if(!s.default.object(e))return{capture:!!e,passive:!1};var t=(0,C.default)({},e);return t.capture=!!e.capture,t.passive=!!e.passive,t}var zn={id:"events",install:function(e){var t,n=[],i={},r=[],a={add:o,remove:l,addDelegate:function(e,t,n,s,a){var l=Bn(a);if(!i[n]){i[n]=[];for(var u=0;u<r.length;u++){var d=r[u];o(d,n,c),o(d,n,h,!0)}}var p=i[n],f=$.find(p,(function(n){return n.selector===e&&n.context===t}));f||(f={selector:e,context:t,listeners:[]},p.push(f)),f.listeners.push([s,l])},removeDelegate:function(e,t,n,r,s){var a,o=Bn(s),u=i[n],d=!1;if(u)for(a=u.length-1;a>=0;a--){var p=u[a];if(p.selector===e&&p.context===t){for(var f=p.listeners,m=f.length-1;m>=0;m--){var g=On(f[m],2),v=g[0],y=g[1],_=y.capture,b=y.passive;if(v===r&&_===o.capture&&b===o.passive){f.splice(m,1),f.length||(u.splice(a,1),l(t,n,c),l(t,n,h,!0)),d=!0;break}}if(d)break}}},delegateListener:c,delegateUseCapture:h,delegatedEvents:i,documents:r,targets:n,supportsOptions:!1,supportsPassive:!1};function o(e,t,i,r){var s=Bn(r),o=$.find(n,(function(t){return t.eventTarget===e}));o||(o={eventTarget:e,events:{}},n.push(o)),o.events[t]||(o.events[t]=[]),e.addEventListener&&!$.contains(o.events[t],i)&&(e.addEventListener(t,i,a.supportsOptions?s:s.capture),o.events[t].push(i))}function l(e,t,i,r){var s=Bn(r),o=$.findIndex(n,(function(t){return t.eventTarget===e})),c=n[o];if(c&&c.events)if("all"!==t){var h=!1,u=c.events[t];if(u){if("all"===i){for(var d=u.length-1;d>=0;d--)l(e,t,u[d],s);return}for(var p=0;p<u.length;p++)if(u[p]===i){e.removeEventListener(t,i,a.supportsOptions?s:s.capture),u.splice(p,1),0===u.length&&(delete c.events[t],h=!0);break}}h&&!Object.keys(c.events).length&&n.splice(o,1)}else for(t in c.events)c.events.hasOwnProperty(t)&&l(e,t,"all")}function c(e,t){for(var n=Bn(t),r=new Nn(e),a=i[e.type],o=On(B.getEventTargets(e),1)[0],l=o;s.default.element(l);){for(var c=0;c<a.length;c++){var h=a[c],u=h.selector,d=h.context;if(S.matchesSelector(l,u)&&S.nodeContains(d,o)&&S.nodeContains(d,l)){var p=h.listeners;r.currentTarget=l;for(var f=0;f<p.length;f++){var m=On(p[f],2),g=m[0],v=m[1],y=v.capture,_=v.passive;y===n.capture&&_===n.passive&&g(r)}}}l=S.parentNode(l)}}function h(e){return c(e,!0)}return null==(t=e.document)||t.createElement("div").addEventListener("test",null,{get capture(){return a.supportsOptions=!0},get passive(){return a.supportsPassive=!0}}),e.events=a,a}};Dn.default=zn;var Un={};Object.defineProperty(Un,"__esModule",{value:!0}),Un.default=void 0;var Vn={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e){for(var t=0;t<Vn.methodOrder.length;t++){var n;n=Vn.methodOrder[t];var i=Vn[n](e);if(i)return i}return null},simulationResume:function(e){var t=e.pointerType,n=e.eventType,i=e.eventTarget,r=e.scope;if(!/down|start/i.test(n))return null;for(var s=0;s<r.interactions.list.length;s++){var a=r.interactions.list[s],o=i;if(a.simulation&&a.simulation.allowResume&&a.pointerType===t)for(;o;){if(o===a.element)return a;o=S.parentNode(o)}}return null},mouseOrPen:function(e){var t,n=e.pointerId,i=e.pointerType,r=e.eventType,s=e.scope;if("mouse"!==i&&"pen"!==i)return null;for(var a=0;a<s.interactions.list.length;a++){var o=s.interactions.list[a];if(o.pointerType===i){if(o.simulation&&!Hn(o,n))continue;if(o.interacting())return o;t||(t=o)}}if(t)return t;for(var l=0;l<s.interactions.list.length;l++){var c=s.interactions.list[l];if(!(c.pointerType!==i||/down/i.test(r)&&c.simulation))return c}return null},hasPointer:function(e){for(var t=e.pointerId,n=e.scope,i=0;i<n.interactions.list.length;i++){var r=n.interactions.list[i];if(Hn(r,t))return r}return null},idle:function(e){for(var t=e.pointerType,n=e.scope,i=0;i<n.interactions.list.length;i++){var r=n.interactions.list[i];if(1===r.pointers.length){var s=r.interactable;if(s&&(!s.options.gesture||!s.options.gesture.enabled))continue}else if(r.pointers.length>=2)continue;if(!r.interacting()&&t===r.pointerType)return r}return null}};function Hn(e,t){return e.pointers.some((function(e){return e.id===t}))}var Gn=Vn;Un.default=Gn;var jn={};function Wn(e){return Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wn(e)}function qn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Yn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Kn(e,t){return Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kn(e,t)}function Zn(e,t){if(t&&("object"===Wn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Qn(e){return Qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qn(e)}Object.defineProperty(jn,"__esModule",{value:!0}),jn.default=void 0;var Jn=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function ei(e,t){return function(n){var i=t.interactions.list,r=B.getPointerType(n),s=qn(B.getEventTargets(n),2),a=s[0],o=s[1],l=[];if(/^touch/.test(n.type)){t.prevTouchTime=t.now();for(var c=0;c<n.changedTouches.length;c++){var h=n.changedTouches[c],u={pointer:h,pointerId:B.getPointerId(h),pointerType:r,eventType:n.type,eventTarget:a,curEventTarget:o,scope:t},d=ti(u);l.push([u.pointer,u.eventTarget,u.curEventTarget,d])}}else{var p=!1;if(!_.default.supportsPointerEvent&&/mouse/.test(n.type)){for(var f=0;f<i.length&&!p;f++)p="mouse"!==i[f].pointerType&&i[f].pointerIsDown;p=p||t.now()-t.prevTouchTime<500||0===n.timeStamp}if(!p){var m={pointer:n,pointerId:B.getPointerId(n),pointerType:r,eventType:n.type,curEventTarget:o,eventTarget:a,scope:t},g=ti(m);l.push([m.pointer,m.eventTarget,m.curEventTarget,g])}}for(var v=0;v<l.length;v++){var y=qn(l[v],4),b=y[0],x=y[1],S=y[2];y[3][e](b,n,x,S)}}}function ti(e){var t=e.pointerType,n=e.scope,i={interaction:Un.default.search(e),searchDetails:e};return n.fire("interactions:find",i),i.interaction||n.interactions.new({pointerType:t})}function ni(e,t){var n=e.doc,i=e.scope,r=e.options,s=i.interactions.docEvents,a=i.events,o=a[t];for(var l in i.browser.isIOS&&!r.events&&(r.events={passive:!1}),a.delegatedEvents)o(n,l,a.delegateListener),o(n,l,a.delegateUseCapture,!0);for(var c=r&&r.events,h=0;h<s.length;h++){var u=s[h];o(n,u.type,u.listener,c)}}var ii={id:"core/interactions",install:function(e){for(var t={},n=0;n<Jn.length;n++){var i=Jn[n];t[i]=ei(i,e)}var r,s=_.default.pEventTypes;function a(){for(var t=0;t<e.interactions.list.length;t++){var n=e.interactions.list[t];if(n.pointerIsDown&&"touch"===n.pointerType&&!n._interacting)for(var i=function(){var t=n.pointers[r];e.documents.some((function(e){var n=e.doc;return(0,S.nodeContains)(n,t.downTarget)}))||n.removePointer(t.pointer,t.event)},r=0;r<n.pointers.length;r++)i()}}(r=m.default.PointerEvent?[{type:s.down,listener:a},{type:s.down,listener:t.pointerDown},{type:s.move,listener:t.pointerMove},{type:s.up,listener:t.pointerUp},{type:s.cancel,listener:t.pointerUp}]:[{type:"mousedown",listener:t.pointerDown},{type:"mousemove",listener:t.pointerMove},{type:"mouseup",listener:t.pointerUp},{type:"touchstart",listener:a},{type:"touchstart",listener:t.pointerDown},{type:"touchmove",listener:t.pointerMove},{type:"touchend",listener:t.pointerUp},{type:"touchcancel",listener:t.pointerUp}]).push({type:"blur",listener:function(t){for(var n=0;n<e.interactions.list.length;n++)e.interactions.list[n].documentBlur(t)}}),e.prevTouchTime=0,e.Interaction=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kn(e,t)}(o,t);var n,i,r,s,a=(r=o,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qn(r);if(s){var n=Qn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Zn(this,e)});function o(){return Yn(this,o),a.apply(this,arguments)}return n=o,(i=[{key:"pointerMoveTolerance",get:function(){return e.interactions.pointerMoveTolerance},set:function(t){e.interactions.pointerMoveTolerance=t}},{key:"_now",value:function(){return e.now()}}])&&$n(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),o}(Xt.default),e.interactions={list:[],new:function(t){t.scopeFire=function(t,n){return e.fire(t,n)};var n=new e.Interaction(t);return e.interactions.list.push(n),n},listeners:t,docEvents:r,pointerMoveTolerance:1},e.usePlugin(lt.default)},listeners:{"scope:add-document":function(e){return ni(e,"add")},"scope:remove-document":function(e){return ni(e,"remove")},"interactable:unset":function(e,t){for(var n=e.interactable,i=t.interactions.list.length-1;i>=0;i--){var r=t.interactions.list[i];r.interactable===n&&(r.stop(),t.fire("interactions:destroy",{interaction:r}),r.destroy(),t.interactions.list.length>2&&t.interactions.list.splice(i,1))}}},onDocSignal:ni,doOnInteractions:ei,methodNames:Jn},ri=ii;jn.default=ri;var si={};function ai(e){return ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ai(e)}function oi(){return oi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=li(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},oi.apply(this,arguments)}function li(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ui(e)););return e}function ci(e,t){return ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ci(e,t)}function hi(e,t){if(t&&("object"===ai(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ui(e){return ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ui(e)}function di(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fi(e,t,n){return t&&pi(e.prototype,t),n&&pi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(si,"__esModule",{value:!0}),si.Scope=void 0,si.initScope=vi;var gi=function(){function e(){var t=this;di(this,e),mi(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),mi(this,"isInitialized",!1),mi(this,"listenerMaps",[]),mi(this,"browser",_.default),mi(this,"defaults",(0,vt.default)(It.defaults)),mi(this,"Eventable",vn.Eventable),mi(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),mi(this,"interactStatic",(0,En.createInteractStatic)(this)),mi(this,"InteractEvent",Lt.InteractEvent),mi(this,"Interactable",void 0),mi(this,"interactables",new Pn.InteractableSet(this)),mi(this,"_win",void 0),mi(this,"document",void 0),mi(this,"window",void 0),mi(this,"documents",[]),mi(this,"_plugins",{list:[],map:{}}),mi(this,"onWindowUnload",(function(e){return t.removeDocument(e.target)}));var n=this;this.Interactable=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ci(e,t)}(s,e);var t,i,r=(t=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=ui(t);if(i){var r=ui(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return hi(this,e)});function s(){return di(this,s),r.apply(this,arguments)}return fi(s,[{key:"_defaults",get:function(){return n.defaults}},{key:"set",value:function(e){return oi(ui(s.prototype),"set",this).call(this,e),n.fire("interactable:set",{options:e,interactable:this}),this}},{key:"unset",value:function(){oi(ui(s.prototype),"unset",this).call(this);var e=n.interactables.list.indexOf(this);e<0||(oi(ui(s.prototype),"unset",this).call(this),n.interactables.list.splice(e,1),n.fire("interactable:unset",{interactable:this}))}}]),s}(wn.Interactable)}return fi(e,[{key:"addListeners",value:function(e,t){this.listenerMaps.push({id:t,map:e})}},{key:"fire",value:function(e,t){for(var n=0;n<this.listenerMaps.length;n++){var i=this.listenerMaps[n].map[e];if(i&&!1===i(t,this,e))return!1}}},{key:"init",value:function(e){return this.isInitialized?this:vi(this,e)}},{key:"pluginIsInstalled",value:function(e){return this._plugins.map[e.id]||-1!==this._plugins.list.indexOf(e)}},{key:"usePlugin",value:function(e,t){if(!this.isInitialized)return this;if(this.pluginIsInstalled(e))return this;if(e.id&&(this._plugins.map[e.id]=e),this._plugins.list.push(e),e.install&&e.install(this,t),e.listeners&&e.before){for(var n=0,i=this.listenerMaps.length,r=e.before.reduce((function(e,t){return e[t]=!0,e[yi(t)]=!0,e}),{});n<i;n++){var s=this.listenerMaps[n].id;if(r[s]||r[yi(s)])break}this.listenerMaps.splice(n,0,{id:e.id,map:e.listeners})}else e.listeners&&this.listenerMaps.push({id:e.id,map:e.listeners});return this}},{key:"addDocument",value:function(e,n){if(-1!==this.getDocIndex(e))return!1;var i=t.getWindow(e);n=n?(0,C.default)({},n):{},this.documents.push({doc:e,options:n}),this.events.documents.push(e),e!==this.document&&this.events.add(i,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:e,window:i,scope:this,options:n})}},{key:"removeDocument",value:function(e){var n=this.getDocIndex(e),i=t.getWindow(e),r=this.documents[n].options;this.events.remove(i,"unload",this.onWindowUnload),this.documents.splice(n,1),this.events.documents.splice(n,1),this.fire("scope:remove-document",{doc:e,window:i,scope:this,options:r})}},{key:"getDocIndex",value:function(e){for(var t=0;t<this.documents.length;t++)if(this.documents[t].doc===e)return t;return-1}},{key:"getDocOptions",value:function(e){var t=this.getDocIndex(e);return-1===t?null:this.documents[t].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),e}();function vi(e,n){return e.isInitialized=!0,s.default.window(n)&&t.init(n),m.default.init(n),_.default.init(n),Ae.default.init(n),e.window=n,e.document=n.document,e.usePlugin(jn.default),e.usePlugin(Dn.default),e}function yi(e){return e&&e.replace(/\/.*$/,"")}si.Scope=gi;var _i={};Object.defineProperty(_i,"__esModule",{value:!0}),_i.default=void 0;var bi=new si.Scope,xi=bi.interactStatic;_i.default=xi;var Si="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0;bi.init(Si);var Ei={};Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.default=void 0,Ei.default=function(){};var wi={};Object.defineProperty(wi,"__esModule",{value:!0}),wi.default=void 0,wi.default=function(){};var Ti={};function Mi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ai(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ai(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ai(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.default=void 0,Ti.default=function(e){var t=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter((function(t){var n=Mi(t,2),i=n[0],r=n[1];return i in e||r in e})),n=function(n,i){for(var r=e.range,s=e.limits,a=void 0===s?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:s,o=e.offset,l=void 0===o?{x:0,y:0}:o,c={range:r,grid:e,x:null,y:null},h=0;h<t.length;h++){var u=Mi(t[h],2),d=u[0],p=u[1],f=Math.round((n-l.x)/e[d]),m=Math.round((i-l.y)/e[p]);c[d]=Math.max(a.left,Math.min(a.right,f*e[d]+l.x)),c[p]=Math.max(a.top,Math.min(a.bottom,m*e[p]+l.y))}return c};return n.grid=e,n.coordFields=t,n};var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0}),Object.defineProperty(Pi,"edgeTarget",{enumerable:!0,get:function(){return Ei.default}}),Object.defineProperty(Pi,"elements",{enumerable:!0,get:function(){return wi.default}}),Object.defineProperty(Pi,"grid",{enumerable:!0,get:function(){return Ti.default}});var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.default=void 0;var Ii={id:"snappers",install:function(e){var t=e.interactStatic;t.snappers=(0,C.default)(t.snappers||{},Pi),t.createSnapGrid=t.snappers.grid}},Li=Ii;Ci.default=Li;var Di={};function Ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ki(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ri(Object(n),!0).forEach((function(t){Oi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Di,"__esModule",{value:!0}),Di.default=Di.aspectRatio=void 0;var Fi={start:function(e){var t=e.state,n=e.rect,i=e.edges,r=e.pageCoords,s=t.options.ratio,a=t.options,o=a.equalDelta,l=a.modifiers;"preserve"===s&&(s=n.width/n.height),t.startCoords=(0,C.default)({},r),t.startRect=(0,C.default)({},n),t.ratio=s,t.equalDelta=o;var c=t.linkedEdges={top:i.top||i.left&&!i.bottom,left:i.left||i.top&&!i.right,bottom:i.bottom||i.right&&!i.top,right:i.right||i.bottom&&!i.left};if(t.xIsPrimaryAxis=!(!i.left&&!i.right),t.equalDelta){var h=(c.left?1:-1)*(c.top?1:-1);t.edgeSign={x:h,y:h}}else t.edgeSign={x:c.left?-1:1,y:c.top?-1:1};if((0,C.default)(e.edges,c),l&&l.length){var u=new yt.default(e.interaction);u.copyFrom(e.interaction.modification),u.prepareStates(l),t.subModification=u,u.startAll(ki({},e))}},set:function(e){var t=e.state,n=e.rect,i=e.coords,r=(0,C.default)({},i),s=t.equalDelta?Ni:Bi;if(s(t,t.xIsPrimaryAxis,i,n),!t.subModification)return null;var a=(0,C.default)({},n);(0,I.addEdges)(t.linkedEdges,a,{x:i.x-r.x,y:i.y-r.y});var o=t.subModification.setAll(ki(ki({},e),{},{rect:a,edges:t.linkedEdges,pageCoords:i,prevCoords:i,prevRect:a})),l=o.delta;return o.changed&&(s(t,Math.abs(l.x)>Math.abs(l.y),o.coords,o.rect),(0,C.default)(i,o.coords)),o.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Ni(e,t,n){var i=e.startCoords,r=e.edgeSign;t?n.y=i.y+(n.x-i.x)*r.y:n.x=i.x+(n.y-i.y)*r.x}function Bi(e,t,n,i){var r=e.startRect,s=e.startCoords,a=e.ratio,o=e.edgeSign;if(t){var l=i.width/a;n.y=s.y+(l-r.height)*o.y}else{var c=i.height*a;n.x=s.x+(c-r.width)*o.x}}Di.aspectRatio=Fi;var zi=(0,Mt.makeModifier)(Fi,"aspectRatio");Di.default=zi;var Ui={};Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.default=void 0;var Vi=function(){};Vi._defaults={};var Hi=Vi;Ui.default=Hi;var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0}),Object.defineProperty(Gi,"default",{enumerable:!0,get:function(){return Ui.default}});var ji={};function Wi(e,t,n){return s.default.func(e)?I.resolveRectLike(e,t.interactable,t.element,[n.x,n.y,t]):I.resolveRectLike(e,t.interactable,t.element)}Object.defineProperty(ji,"__esModule",{value:!0}),ji.default=void 0,ji.getRestrictionRect=Wi,ji.restrict=void 0;var qi={start:function(e){var t=e.rect,n=e.startOffset,i=e.state,r=e.interaction,s=e.pageCoords,a=i.options,o=a.elementRect,l=(0,C.default)({left:0,top:0,right:0,bottom:0},a.offset||{});if(t&&o){var c=Wi(a.restriction,r,s);if(c){var h=c.right-c.left-t.width,u=c.bottom-c.top-t.height;h<0&&(l.left+=h,l.right+=h),u<0&&(l.top+=u,l.bottom+=u)}l.left+=n.left-t.width*o.left,l.top+=n.top-t.height*o.top,l.right+=n.right-t.width*(1-o.right),l.bottom+=n.bottom-t.height*(1-o.bottom)}i.offset=l},set:function(e){var t=e.coords,n=e.interaction,i=e.state,r=i.options,s=i.offset,a=Wi(r.restriction,n,t);if(a){var o=I.xywhToTlbr(a);t.x=Math.max(Math.min(o.right-s.right,t.x),o.left+s.left),t.y=Math.max(Math.min(o.bottom-s.bottom,t.y),o.top+s.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};ji.restrict=qi;var Xi=(0,Mt.makeModifier)(qi,"restrict");ji.default=Xi;var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.restrictEdges=Yi.default=void 0;var $i={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Ki={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Zi(e,t){for(var n=["top","left","bottom","right"],i=0;i<n.length;i++){var r=n[i];r in e||(e[r]=t[r])}return e}var Qi={noInner:$i,noOuter:Ki,start:function(e){var t,n=e.interaction,i=e.startOffset,r=e.state,s=r.options;if(s){var a=(0,ji.getRestrictionRect)(s.offset,n,n.coords.start.page);t=I.rectToXY(a)}t=t||{x:0,y:0},r.offset={top:t.y+i.top,left:t.x+i.left,bottom:t.y-i.bottom,right:t.x-i.right}},set:function(e){var t=e.coords,n=e.edges,i=e.interaction,r=e.state,s=r.offset,a=r.options;if(n){var o=(0,C.default)({},t),l=(0,ji.getRestrictionRect)(a.inner,i,o)||{},c=(0,ji.getRestrictionRect)(a.outer,i,o)||{};Zi(l,$i),Zi(c,Ki),n.top?t.y=Math.min(Math.max(c.top+s.top,o.y),l.top+s.top):n.bottom&&(t.y=Math.max(Math.min(c.bottom+s.bottom,o.y),l.bottom+s.bottom)),n.left?t.x=Math.min(Math.max(c.left+s.left,o.x),l.left+s.left):n.right&&(t.x=Math.max(Math.min(c.right+s.right,o.x),l.right+s.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};Yi.restrictEdges=Qi;var Ji=(0,Mt.makeModifier)(Qi,"restrictEdges");Yi.default=Ji;var er={};Object.defineProperty(er,"__esModule",{value:!0}),er.restrictRect=er.default=void 0;var tr=(0,C.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(e){}},ji.restrict.defaults),nr={start:ji.restrict.start,set:ji.restrict.set,defaults:tr};er.restrictRect=nr;var ir=(0,Mt.makeModifier)(nr,"restrictRect");er.default=ir;var rr={};Object.defineProperty(rr,"__esModule",{value:!0}),rr.restrictSize=rr.default=void 0;var sr={width:-1/0,height:-1/0},ar={width:1/0,height:1/0},or={start:function(e){return Yi.restrictEdges.start(e)},set:function(e){var t=e.interaction,n=e.state,i=e.rect,r=e.edges,s=n.options;if(r){var a=I.tlbrToXywh((0,ji.getRestrictionRect)(s.min,t,e.coords))||sr,o=I.tlbrToXywh((0,ji.getRestrictionRect)(s.max,t,e.coords))||ar;n.options={endOnly:s.endOnly,inner:(0,C.default)({},Yi.restrictEdges.noInner),outer:(0,C.default)({},Yi.restrictEdges.noOuter)},r.top?(n.options.inner.top=i.bottom-a.height,n.options.outer.top=i.bottom-o.height):r.bottom&&(n.options.inner.bottom=i.top+a.height,n.options.outer.bottom=i.top+o.height),r.left?(n.options.inner.left=i.right-a.width,n.options.outer.left=i.right-o.width):r.right&&(n.options.inner.right=i.left+a.width,n.options.outer.right=i.left+o.width),Yi.restrictEdges.set(e),n.options=s}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};rr.restrictSize=or;var lr=(0,Mt.makeModifier)(or,"restrictSize");rr.default=lr;var cr={};Object.defineProperty(cr,"__esModule",{value:!0}),Object.defineProperty(cr,"default",{enumerable:!0,get:function(){return Ui.default}});var hr={};Object.defineProperty(hr,"__esModule",{value:!0}),hr.snap=hr.default=void 0;var ur={start:function(e){var t,n=e.interaction,i=e.interactable,r=e.element,s=e.rect,a=e.state,o=e.startOffset,l=a.options,c=l.offsetWithOrigin?function(e){var t=e.interaction.element;return(0,I.rectToXY)((0,I.resolveRectLike)(e.state.options.origin,null,null,[t]))||(0,R.default)(e.interactable,t,e.interaction.prepared.name)}(e):{x:0,y:0};if("startCoords"===l.offset)t={x:n.coords.start.page.x,y:n.coords.start.page.y};else{var h=(0,I.resolveRectLike)(l.offset,i,r,[n]);(t=(0,I.rectToXY)(h)||{x:0,y:0}).x+=c.x,t.y+=c.y}var u=l.relativePoints;a.offsets=s&&u&&u.length?u.map((function(e,n){return{index:n,relativePoint:e,x:o.left-s.width*e.x+t.x,y:o.top-s.height*e.y+t.y}})):[{index:0,relativePoint:null,x:t.x,y:t.y}]},set:function(e){var t=e.interaction,n=e.coords,i=e.state,r=i.options,a=i.offsets,o=(0,R.default)(t.interactable,t.element,t.prepared.name),l=(0,C.default)({},n),c=[];r.offsetWithOrigin||(l.x-=o.x,l.y-=o.y);for(var h=0;h<a.length;h++)for(var u=a[h],d=l.x-u.x,p=l.y-u.y,f=0,m=r.targets.length;f<m;f++){var g,v=r.targets[f];(g=s.default.func(v)?v(d,p,t._proxy,u,f):v)&&c.push({x:(s.default.number(g.x)?g.x:d)+u.x,y:(s.default.number(g.y)?g.y:p)+u.y,range:s.default.number(g.range)?g.range:r.range,source:v,index:f,offset:u})}for(var y={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},_=0;_<c.length;_++){var b=c[_],x=b.range,S=b.x-l.x,E=b.y-l.y,w=(0,F.default)(S,E),T=w<=x;x===1/0&&y.inRange&&y.range!==1/0&&(T=!1),y.target&&!(T?y.inRange&&x!==1/0?w/x<y.distance/y.range:x===1/0&&y.range!==1/0||w<y.distance:!y.inRange&&w<y.distance)||(y.target=b,y.distance=w,y.range=x,y.inRange=T,y.delta.x=S,y.delta.y=E)}return y.inRange&&(n.x=y.target.x,n.y=y.target.y),i.closest=y,y},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};hr.snap=ur;var dr=(0,Mt.makeModifier)(ur,"snap");hr.default=dr;var pr={};function fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(pr,"__esModule",{value:!0}),pr.snapSize=pr.default=void 0;var mr={start:function(e){var t=e.state,n=e.edges,i=t.options;if(!n)return null;e.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:i.offset||"self",origin:{x:0,y:0},range:i.range}},t.targetFields=t.targetFields||[["width","height"],["x","y"]],hr.snap.start(e),t.offsets=e.state.offsets,e.state=t},set:function(e){var t,n,i=e.interaction,r=e.state,a=e.coords,o=r.options,l=r.offsets,c={x:a.x-l[0].x,y:a.y-l[0].y};r.options=(0,C.default)({},o),r.options.targets=[];for(var h=0;h<(o.targets||[]).length;h++){var u=(o.targets||[])[h],d=void 0;if(d=s.default.func(u)?u(c.x,c.y,i):u){for(var p=0;p<r.targetFields.length;p++){var f=(n=2,function(e){if(Array.isArray(e))return e}(t=r.targetFields[p])||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw r}}return s}}(t,n)||function(e,t){if(e){if("string"==typeof e)return fr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fr(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],g=f[1];if(m in d||g in d){d.x=d[m],d.y=d[g];break}}r.options.targets.push(d)}}var v=hr.snap.set(e);return r.options=o,v},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};pr.snapSize=mr;var gr=(0,Mt.makeModifier)(mr,"snapSize");pr.default=gr;var vr={};Object.defineProperty(vr,"__esModule",{value:!0}),vr.snapEdges=vr.default=void 0;var yr={start:function(e){var t=e.edges;return t?(e.state.targetFields=e.state.targetFields||[[t.left?"left":"right",t.top?"top":"bottom"]],pr.snapSize.start(e)):null},set:pr.snapSize.set,defaults:(0,C.default)((0,vt.default)(pr.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};vr.snapEdges=yr;var _r=(0,Mt.makeModifier)(yr,"snapEdges");vr.default=_r;var br={};Object.defineProperty(br,"__esModule",{value:!0}),Object.defineProperty(br,"default",{enumerable:!0,get:function(){return Ui.default}});var xr={};Object.defineProperty(xr,"__esModule",{value:!0}),Object.defineProperty(xr,"default",{enumerable:!0,get:function(){return Ui.default}});var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.default=void 0;var Er={aspectRatio:Di.default,restrictEdges:Yi.default,restrict:ji.default,restrictRect:er.default,restrictSize:rr.default,snapEdges:vr.default,snap:hr.default,snapSize:pr.default,spring:br.default,avoid:Gi.default,transform:xr.default,rubberband:cr.default};Sr.default=Er;var wr={};Object.defineProperty(wr,"__esModule",{value:!0}),wr.default=void 0;var Tr={id:"modifiers",install:function(e){var t=e.interactStatic;for(var n in e.usePlugin(Mt.default),e.usePlugin(Ci.default),t.modifiers=Sr.default,Sr.default){var i=Sr.default[n],r=i._defaults,s=i._methods;r._methods=s,e.defaults.perAction[n]=r}}},Mr=Tr;wr.default=Mr;var Ar={};function Pr(e){return Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pr(e)}function Cr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ir(e,t){return Ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ir(e,t)}function Lr(e,t){if(t&&("object"===Pr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Dr(e)}function Dr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rr(e){return Rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rr(e)}Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.default=Ar.PointerEvent=void 0;var kr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ir(e,t)}(a,e);var t,n,i,r,s=(i=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Rr(i);if(r){var n=Rr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Lr(this,e)});function a(e,t,n,i,r,o){var l;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),l=s.call(this,r),B.pointerExtend(Dr(l),n),n!==t&&B.pointerExtend(Dr(l),t),l.timeStamp=o,l.originalEvent=n,l.type=e,l.pointerId=B.getPointerId(t),l.pointerType=B.getPointerType(t),l.target=i,l.currentTarget=null,"tap"===e){var c=r.getPointerIndex(t);l.dt=l.timeStamp-r.pointers[c].downTime;var h=l.timeStamp-r.tapTime;l.double=!!r.prevTap&&"doubletap"!==r.prevTap.type&&r.prevTap.target===l.target&&h<500}else"doubletap"===e&&(l.dt=t.timeStamp-r.tapTime,l.double=!0);return l}return t=a,(n=[{key:"_subtractOrigin",value:function(e){var t=e.x,n=e.y;return this.pageX-=t,this.pageY-=n,this.clientX-=t,this.clientY-=n,this}},{key:"_addOrigin",value:function(e){var t=e.x,n=e.y;return this.pageX+=t,this.pageY+=n,this.clientX+=t,this.clientY+=n,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&Cr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(W.BaseEvent);Ar.PointerEvent=Ar.default=kr;var Or={};Object.defineProperty(Or,"__esModule",{value:!0}),Or.default=void 0;var Fr={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(e){e.pointerEvents=Fr,e.defaults.actions.pointerEvents=Fr.defaults,(0,C.default)(e.actions.phaselessTypes,Fr.types)},listeners:{"interactions:new":function(e){var t=e.interaction;t.prevTap=null,t.tapTime=0},"interactions:update-pointer":function(e){var t=e.down,n=e.pointerInfo;!t&&n.hold||(n.hold={duration:1/0,timeout:null})},"interactions:move":function(e,t){var n=e.interaction,i=e.pointer,r=e.event,s=e.eventTarget;e.duplicate||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&zr(e),Nr({interaction:n,pointer:i,event:r,eventTarget:s,type:"move"},t))},"interactions:down":function(e,t){!function(e,t){for(var n=e.interaction,i=e.pointer,r=e.event,s=e.eventTarget,a=e.pointerIndex,o=n.pointers[a].hold,l=S.getPath(s),c={interaction:n,pointer:i,event:r,eventTarget:s,type:"hold",targets:[],path:l,node:null},h=0;h<l.length;h++){var u=l[h];c.node=u,t.fire("pointerEvents:collect-targets",c)}if(c.targets.length){for(var d=1/0,p=0;p<c.targets.length;p++){var f=c.targets[p].eventable.options.holdDuration;f<d&&(d=f)}o.duration=d,o.timeout=setTimeout((function(){Nr({interaction:n,eventTarget:s,pointer:i,event:r,type:"hold"},t)}),d)}}(e,t),Nr(e,t)},"interactions:up":function(e,t){zr(e),Nr(e,t),function(e,t){var n=e.interaction,i=e.pointer,r=e.event,s=e.eventTarget;n.pointerWasMoved||Nr({interaction:n,eventTarget:s,pointer:i,event:r,type:"tap"},t)}(e,t)},"interactions:cancel":function(e,t){zr(e),Nr(e,t)}},PointerEvent:Ar.PointerEvent,fire:Nr,collectEventTargets:Br,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Nr(e,t){var n=e.interaction,i=e.pointer,r=e.event,s=e.eventTarget,a=e.type,o=e.targets,l=void 0===o?Br(e,t):o,c=new Ar.PointerEvent(a,i,r,s,n,t.now());t.fire("pointerEvents:new",{pointerEvent:c});for(var h={interaction:n,pointer:i,event:r,eventTarget:s,targets:l,type:a,pointerEvent:c},u=0;u<l.length;u++){var d=l[u];for(var p in d.props||{})c[p]=d.props[p];var f=(0,R.default)(d.eventable,d.node);if(c._subtractOrigin(f),c.eventable=d.eventable,c.currentTarget=d.node,d.eventable.fire(c),c._addOrigin(f),c.immediatePropagationStopped||c.propagationStopped&&u+1<l.length&&l[u+1].node!==c.currentTarget)break}if(t.fire("pointerEvents:fired",h),"tap"===a){var m=c.double?Nr({interaction:n,pointer:i,event:r,eventTarget:s,type:"doubletap"},t):c;n.prevTap=m,n.tapTime=m.timeStamp}return c}function Br(e,t){var n=e.interaction,i=e.pointer,r=e.event,s=e.eventTarget,a=e.type,o=n.getPointerIndex(i),l=n.pointers[o];if("tap"===a&&(n.pointerWasMoved||!l||l.downTarget!==s))return[];for(var c=S.getPath(s),h={interaction:n,pointer:i,event:r,eventTarget:s,type:a,path:c,targets:[],node:null},u=0;u<c.length;u++){var d=c[u];h.node=d,t.fire("pointerEvents:collect-targets",h)}return"hold"===a&&(h.targets=h.targets.filter((function(e){var t;return e.eventable.options.holdDuration===(null==(t=n.pointers[o])?void 0:t.hold.duration)}))),h.targets}function zr(e){var t=e.interaction,n=e.pointerIndex,i=t.pointers[n].hold;i&&i.timeout&&(clearTimeout(i.timeout),i.timeout=null)}var Ur=Fr;Or.default=Ur;var Vr={};function Hr(e){var t=e.interaction;t.holdIntervalHandle&&(clearInterval(t.holdIntervalHandle),t.holdIntervalHandle=null)}Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.default=void 0;var Gr={id:"pointer-events/holdRepeat",install:function(e){e.usePlugin(Or.default);var t=e.pointerEvents;t.defaults.holdRepeatInterval=0,t.types.holdrepeat=e.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce((function(e,t){return e["pointerEvents:".concat(t)]=Hr,e}),{"pointerEvents:new":function(e){var t=e.pointerEvent;"hold"===t.type&&(t.count=(t.count||0)+1)},"pointerEvents:fired":function(e,t){var n=e.interaction,i=e.pointerEvent,r=e.eventTarget,s=e.targets;if("hold"===i.type&&s.length){var a=s[0].eventable.options.holdRepeatInterval;a<=0||(n.holdIntervalHandle=setTimeout((function(){t.pointerEvents.fire({interaction:n,eventTarget:r,type:"hold",pointer:i,event:i},t)}),a))}}})},jr=Gr;Vr.default=jr;var Wr={};function qr(e){return(0,C.default)(this.events.options,e),this}Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.default=void 0;var Xr={id:"pointer-events/interactableTargets",install:function(e){var t=e.Interactable;t.prototype.pointerEvents=qr;var n=t.prototype._backCompatOption;t.prototype._backCompatOption=function(e,t){var i=n.call(this,e,t);return i===this&&(this.events.options[e]=t),i}},listeners:{"pointerEvents:collect-targets":function(e,t){var n=e.targets,i=e.node,r=e.type,s=e.eventTarget;t.interactables.forEachMatch(i,(function(e){var t=e.events,a=t.options;t.types[r]&&t.types[r].length&&e.testIgnoreAllow(a,i,s)&&n.push({node:i,eventable:t,props:{interactable:e}})}))},"interactable:new":function(e){var t=e.interactable;t.events.getRect=function(e){return t.getRect(e)}},"interactable:set":function(e,t){var n=e.interactable,i=e.options;(0,C.default)(n.events.options,t.pointerEvents.defaults),(0,C.default)(n.events.options,i.pointerEvents||{})}}},Yr=Xr;Wr.default=Yr;var $r={};Object.defineProperty($r,"__esModule",{value:!0}),$r.default=void 0;var Kr={id:"pointer-events",install:function(e){e.usePlugin(Or),e.usePlugin(Vr.default),e.usePlugin(Wr.default)}},Zr=Kr;$r.default=Zr;var Qr={};function Jr(e){var t=e.Interactable;e.actions.phases.reflow=!0,t.prototype.reflow=function(t){return function(e,t,n){for(var i=s.default.string(e.target)?$.from(e._context.querySelectorAll(e.target)):[e.target],r=n.window.Promise,a=r?[]:null,o=function(){var s=i[l],o=e.getRect(s);if(!o)return"break";var c=$.find(n.interactions.list,(function(n){return n.interacting()&&n.interactable===e&&n.element===s&&n.prepared.name===t.name})),h=void 0;if(c)c.move(),a&&(h=c._reflowPromise||new r((function(e){c._reflowResolve=e})));else{var u=(0,I.tlbrToXywh)(o),d={page:{x:u.x,y:u.y},client:{x:u.x,y:u.y},timeStamp:n.now()},p=B.coordsToEvent(d);h=function(e,t,n,i,r){var s=e.interactions.new({pointerType:"reflow"}),a={interaction:s,event:r,pointer:r,eventTarget:n,phase:"reflow"};s.interactable=t,s.element=n,s.prevEvent=r,s.updatePointer(r,r,n,!0),B.setZeroCoords(s.coords.delta),(0,Be.copyAction)(s.prepared,i),s._doPhase(a);var o=e.window.Promise,l=o?new o((function(e){s._reflowResolve=e})):void 0;return s._reflowPromise=l,s.start(i,t,n),s._interacting?(s.move(a),s.end(r)):(s.stop(),s._reflowResolve()),s.removePointer(r,r),l}(n,e,s,t,p)}a&&a.push(h)},l=0;l<i.length&&"break"!==o();l++);return a&&r.all(a).then((function(){return e}))}(this,t,e)}}Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.default=void 0,Qr.install=Jr;var es={id:"reflow",install:Jr,listeners:{"interactions:stop":function(e,t){var n=e.interaction;"reflow"===n.pointerType&&(n._reflowResolve&&n._reflowResolve(),$.remove(t.interactions.list,n))}}},ts=es;Qr.default=ts;var ns={exports:{}};function is(e){return is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},is(e)}Object.defineProperty(ns.exports,"__esModule",{value:!0}),ns.exports.default=void 0,_i.default.use(lt.default),_i.default.use(Jt.default),_i.default.use($r.default),_i.default.use(ln.default),_i.default.use(wr.default),_i.default.use(at.default),_i.default.use(Te.default),_i.default.use(De.default),_i.default.use(Qr.default);var rs=_i.default;if(ns.exports.default=rs,"object"===is(ns)&&ns)try{ns.exports=_i.default}catch(e){}_i.default.default=_i.default,Te.default,De.default,at.default,lt.default,mt.default,ln.default,_i.default,wr.default,Jt.default,$r.default,Qr.default,ns=ns.exports;var ss={exports:{}};function as(e){return as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},as(e)}Object.defineProperty(ss.exports,"__esModule",{value:!0}),ss.exports.default=void 0;var os=ns.default;if(ss.exports.default=os,"object"===as(ss)&&ss)try{ss.exports=ns.default}catch(e){}return ns.default.default=ns.default,ss.exports}()},705:(e,t,n)=>{var i=n(639).Symbol;e.exports=i},239:(e,t,n)=>{var i=n(705),r=n(607),s=n(333),a=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?r(e):s(e)}},259:e=>{e.exports=function(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(r);++i<r;)s[i]=e[i+t];return s}},561:(e,t,n)=>{var i=n(990),r=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(r,""):e}},957:(e,t,n)=>{var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=i},607:(e,t,n)=>{var i=n(705),r=Object.prototype,s=r.hasOwnProperty,a=r.toString,o=i?i.toStringTag:void 0;e.exports=function(e){var t=s.call(e,o),n=e[o];try{e[o]=void 0;var i=!0}catch(e){}var r=a.call(e);return i&&(t?e[o]=n:delete e[o]),r}},776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var i=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&t.test(e))&&e>-1&&e%1==0&&e<n}},612:(e,t,n)=>{var i=n(813),r=n(240),s=n(776),a=n(218);e.exports=function(e,t,n){if(!a(n))return!1;var o=typeof t;return!!("number"==o?r(n)&&s(t,n.length):"string"==o&&t in n)&&i(n[t],e)}},333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},639:(e,t,n)=>{var i=n(957),r="object"==typeof self&&self&&self.Object===Object&&self,s=i||r||Function("return this")();e.exports=s},990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},400:(e,t,n)=>{var i=n(259),r=n(612),s=n(554),a=Math.ceil,o=Math.max;e.exports=function(e,t,n){t=(n?r(e,t,n):void 0===t)?1:o(s(t),0);var l=null==e?0:e.length;if(!l||t<1)return[];for(var c=0,h=0,u=Array(a(l/t));c<l;)u[h++]=i(e,c,c+=t);return u}},813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},240:(e,t,n)=>{var i=n(560),r=n(780);e.exports=function(e){return null!=e&&r(e.length)&&!i(e)}},560:(e,t,n)=>{var i=n(239),r=n(218);e.exports=function(e){if(!r(e))return!1;var t=i(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},5:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},448:(e,t,n)=>{var i=n(239),r=n(5);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==i(e)}},601:(e,t,n)=>{var i=n(841),r=1/0;e.exports=function(e){return e?(e=i(e))===r||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},554:(e,t,n)=>{var i=n(601);e.exports=function(e){var t=i(e),n=t%1;return t==t?n?t-n:t:0}},841:(e,t,n)=>{var i=n(561),r=n(218),s=n(448),a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=o.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},248:function(module,exports,__webpack_require__){var factory;"undefined"!=typeof navigator&&(factory=function(){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(e){_useWebWorker=!!e},getWebWorker=function(){return _useWebWorker},setLocationHref=function(e){locationHref=e},getLocationHref=function(){return locationHref};function createTag(e){return document.createElement(e)}function extendPrototype(e,t){var n,i,r=e.length;for(n=0;n<r;n+=1)for(var s in i=e[n].prototype)Object.prototype.hasOwnProperty.call(i,s)&&(t.prototype[s]=i[s])}function getDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)}function createProxyFunction(e){function t(){}return t.prototype=e,t}var audioControllerFactory=function(){function e(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return e.prototype={addAudio:function(e){this.audios.push(e)},pause:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].pause()},resume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].resume()},setRate:function(e){var t,n=this.audios.length;for(t=0;t<n;t+=1)this.audios[t].setRate(e)},createAudio:function(e){return this.audioFactory?this.audioFactory(e):window.Howl?new window.Howl({src:[e]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(e){this.audioFactory=e},setVolume:function(e){this._volume=e,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].volume(this._volume*(this._isMuted?0:1))}},function(){return new e}}(),createTypedArray=function(){function e(e,t){var n,i=0,r=[];switch(e){case"int16":case"uint8c":n=1;break;default:n=1.1}for(i=0;i<t;i+=1)r.push(n);return r}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(t,n){return"float32"===t?new Float32Array(n):"int16"===t?new Int16Array(n):"uint8c"===t?new Uint8ClampedArray(n):e(t,n)}:e}();function createSizedArray(e){return Array.apply(null,{length:e})}function _typeof$6(e){return _typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$6(e)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface$1(){return{}}!function(){var e,t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],n=t.length;for(e=0;e<n;e+=1)BMMath[t[e]]=Math[t[e]]}(),BMMath.random=Math.random,BMMath.abs=function(e){if("object"===_typeof$6(e)&&e.length){var t,n=createSizedArray(e.length),i=e.length;for(t=0;t<i;t+=1)n[t]=Math.abs(e[t]);return n}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(e){_shouldRoundValues=!!e}function bmRnd(e){return _shouldRoundValues?Math.round(e):e}function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin="0 0",e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility="visible",e.style.webkitBackfaceVisibility="visible",e.style.transformStyle="preserve-3d",e.style.webkitTransformStyle="preserve-3d",e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(e,t,n,i){this.type=e,this.currentTime=t,this.totalTime=n,this.direction=i<0?-1:1}function BMCompleteEvent(e,t){this.type=e,this.direction=t<0?-1:1}function BMCompleteLoopEvent(e,t,n,i){this.type=e,this.currentLoop=n,this.totalLoops=t,this.direction=i<0?-1:1}function BMSegmentStartEvent(e,t,n){this.type=e,this.firstFrame=t,this.totalFrames=n}function BMDestroyEvent(e,t){this.type=e,this.target=t}function BMRenderFrameErrorEvent(e,t){this.type="renderFrameError",this.nativeError=e,this.currentTime=t}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}function BMAnimationConfigErrorEvent(e,t){this.type=e,this.nativeError=t}var createElementID=(_count=0,function(){return idPrefix$1+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(e,t,n){var i,r,s,a,o,l,c,h;switch(l=n*(1-t),c=n*(1-(o=6*e-(a=Math.floor(6*e)))*t),h=n*(1-(1-o)*t),a%6){case 0:i=n,r=h,s=l;break;case 1:i=c,r=n,s=l;break;case 2:i=l,r=n,s=h;break;case 3:i=l,r=c,s=n;break;case 4:i=h,r=l,s=n;break;case 5:i=n,r=l,s=c}return[i,r,s]}function RGBtoHSV(e,t,n){var i,r=Math.max(e,t,n),s=Math.min(e,t,n),a=r-s,o=0===r?0:a/r,l=r/255;switch(r){case s:i=0;break;case e:i=t-n+a*(t<n?6:0),i/=6*a;break;case t:i=n-e+2*a,i/=6*a;break;case n:i=e-t+4*a,i/=6*a}return[i,o,l]}function addSaturationToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[1]+=t,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[2]+=t,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[0]+=t/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}var rgbToHex=function(){var e,t,n=[];for(e=0;e<256;e+=1)t=e.toString(16),n[e]=1===t.length?"0"+t:t;return function(e,t,i){return e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),"#"+n[e]+n[t]+n[i]}}(),setSubframeEnabled=function(e){subframeEnabled=!!e},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(e){expressionsPlugin=e},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(e){expressionsInterfaces=e},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(e){defaultCurveSegments=e},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(e){idPrefix$1=e},getIdPrefix=function(){return idPrefix$1};function createNS(e){return document.createElementNS(svgNS,e)}function _typeof$5(e){return _typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$5(e)}var dataManager=function(){var e,t,n=1,i=[],r={onmessage:function(){},postMessage:function(t){e({data:t})}},s={postMessage:function(e){r.onmessage({data:e})}};function a(){t||(t=function(t){if(window.Worker&&window.Blob&&getWebWorker()){var n=new Blob(["var _workerSelf = self; self.onmessage = ",t.toString()],{type:"text/javascript"}),i=URL.createObjectURL(n);return new Worker(i)}return e=t,r}((function(e){if(s.dataManager||(s.dataManager=function(){function e(r,s){var a,o,l,c,h,d,p=r.length;for(o=0;o<p;o+=1)if("ks"in(a=r[o])&&!a.completed){if(a.completed=!0,a.hasMask){var f=a.masksProperties;for(c=f.length,l=0;l<c;l+=1)if(f[l].pt.k.i)i(f[l].pt.k);else for(d=f[l].pt.k.length,h=0;h<d;h+=1)f[l].pt.k[h].s&&i(f[l].pt.k[h].s[0]),f[l].pt.k[h].e&&i(f[l].pt.k[h].e[0])}0===a.ty?(a.layers=t(a.refId,s),e(a.layers,s)):4===a.ty?n(a.shapes):5===a.ty&&u(a)}}function t(e,t){var n=function(e,t){for(var n=0,i=t.length;n<i;){if(t[n].id===e)return t[n];n+=1}return null}(e,t);return n?n.layers.__used?JSON.parse(JSON.stringify(n.layers)):(n.layers.__used=!0,n.layers):null}function n(e){var t,r,s;for(t=e.length-1;t>=0;t-=1)if("sh"===e[t].ty)if(e[t].ks.k.i)i(e[t].ks.k);else for(s=e[t].ks.k.length,r=0;r<s;r+=1)e[t].ks.k[r].s&&i(e[t].ks.k[r].s[0]),e[t].ks.k[r].e&&i(e[t].ks.k[r].e[0]);else"gr"===e[t].ty&&n(e[t].it)}function i(e){var t,n=e.i.length;for(t=0;t<n;t+=1)e.i[t][0]+=e.v[t][0],e.i[t][1]+=e.v[t][1],e.o[t][0]+=e.v[t][0],e.o[t][1]+=e.v[t][1]}function r(e,t){var n=t?t.split("."):[100,100,100];return e[0]>n[0]||!(n[0]>e[0])&&(e[1]>n[1]||!(n[1]>e[1])&&(e[2]>n[2]||!(n[2]>e[2])&&null))}var s,a=function(){var e=[4,4,14];function t(e){var t,n,i,r=e.length;for(t=0;t<r;t+=1)5===e[t].ty&&(i=void 0,i=(n=e[t]).t.d,n.t.d={k:[{s:i,t:0}]})}return function(n){if(r(e,n.v)&&(t(n.layers),n.assets)){var i,s=n.assets.length;for(i=0;i<s;i+=1)n.assets[i].layers&&t(n.assets[i].layers)}}}(),o=(s=[4,7,99],function(e){if(e.chars&&!r(s,e.v)){var t,i=e.chars.length;for(t=0;t<i;t+=1){var a=e.chars[t];a.data&&a.data.shapes&&(n(a.data.shapes),a.data.ip=0,a.data.op=99999,a.data.st=0,a.data.sr=1,a.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},e.chars[t].t||(a.data.shapes.push({ty:"no"}),a.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),l=function(){var e=[5,7,15];function t(e){var t,n,i=e.length;for(t=0;t<i;t+=1)5===e[t].ty&&(n=void 0,"number"==typeof(n=e[t].t.p).a&&(n.a={a:0,k:n.a}),"number"==typeof n.p&&(n.p={a:0,k:n.p}),"number"==typeof n.r&&(n.r={a:0,k:n.r}))}return function(n){if(r(e,n.v)&&(t(n.layers),n.assets)){var i,s=n.assets.length;for(i=0;i<s;i+=1)n.assets[i].layers&&t(n.assets[i].layers)}}}(),c=function(){var e=[4,1,9];function t(e){var n,i,r,s=e.length;for(n=0;n<s;n+=1)if("gr"===e[n].ty)t(e[n].it);else if("fl"===e[n].ty||"st"===e[n].ty)if(e[n].c.k&&e[n].c.k[0].i)for(r=e[n].c.k.length,i=0;i<r;i+=1)e[n].c.k[i].s&&(e[n].c.k[i].s[0]/=255,e[n].c.k[i].s[1]/=255,e[n].c.k[i].s[2]/=255,e[n].c.k[i].s[3]/=255),e[n].c.k[i].e&&(e[n].c.k[i].e[0]/=255,e[n].c.k[i].e[1]/=255,e[n].c.k[i].e[2]/=255,e[n].c.k[i].e[3]/=255);else e[n].c.k[0]/=255,e[n].c.k[1]/=255,e[n].c.k[2]/=255,e[n].c.k[3]/=255}function n(e){var n,i=e.length;for(n=0;n<i;n+=1)4===e[n].ty&&t(e[n].shapes)}return function(t){if(r(e,t.v)&&(n(t.layers),t.assets)){var i,s=t.assets.length;for(i=0;i<s;i+=1)t.assets[i].layers&&n(t.assets[i].layers)}}}(),h=function(){var e=[4,4,18];function t(e){var n,i,r;for(n=e.length-1;n>=0;n-=1)if("sh"===e[n].ty)if(e[n].ks.k.i)e[n].ks.k.c=e[n].closed;else for(r=e[n].ks.k.length,i=0;i<r;i+=1)e[n].ks.k[i].s&&(e[n].ks.k[i].s[0].c=e[n].closed),e[n].ks.k[i].e&&(e[n].ks.k[i].e[0].c=e[n].closed);else"gr"===e[n].ty&&t(e[n].it)}function n(e){var n,i,r,s,a,o,l=e.length;for(i=0;i<l;i+=1){if((n=e[i]).hasMask){var c=n.masksProperties;for(s=c.length,r=0;r<s;r+=1)if(c[r].pt.k.i)c[r].pt.k.c=c[r].cl;else for(o=c[r].pt.k.length,a=0;a<o;a+=1)c[r].pt.k[a].s&&(c[r].pt.k[a].s[0].c=c[r].cl),c[r].pt.k[a].e&&(c[r].pt.k[a].e[0].c=c[r].cl)}4===n.ty&&t(n.shapes)}}return function(t){if(r(e,t.v)&&(n(t.layers),t.assets)){var i,s=t.assets.length;for(i=0;i<s;i+=1)t.assets[i].layers&&n(t.assets[i].layers)}}}();function u(e){0===e.t.a.length&&e.t.p}var d={completeData:function(n){n.__complete||(c(n),a(n),o(n),l(n),h(n),e(n.layers,n.assets),function(n,i){if(n){var r=0,s=n.length;for(r=0;r<s;r+=1)1===n[r].t&&(n[r].data.layers=t(n[r].data.refId,i),e(n[r].data.layers,i))}}(n.chars,n.assets),n.__complete=!0)}};return d.checkColors=c,d.checkChars=o,d.checkPathProperties=l,d.checkShapes=h,d.completeLayers=e,d}()),s.assetLoader||(s.assetLoader=function(){function e(e){var t=e.getResponseHeader("content-type");return t&&"json"===e.responseType&&-1!==t.indexOf("json")||e.response&&"object"===_typeof$5(e.response)?e.response:e.response&&"string"==typeof e.response?JSON.parse(e.response):e.responseText?JSON.parse(e.responseText):null}return{load:function(t,n,i,r){var s,a=new XMLHttpRequest;try{a.responseType="json"}catch(e){}a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status)s=e(a),i(s);else try{s=e(a),i(s)}catch(e){r&&r(e)}};try{a.open(["G","E","T"].join(""),t,!0)}catch(e){a.open(["G","E","T"].join(""),n+"/"+t,!0)}a.send()}}}()),"loadAnimation"===e.data.type)s.assetLoader.load(e.data.path,e.data.fullPath,(function(t){s.dataManager.completeData(t),s.postMessage({id:e.data.id,payload:t,status:"success"})}),(function(){s.postMessage({id:e.data.id,status:"error"})}));else if("complete"===e.data.type){var t=e.data.animation;s.dataManager.completeData(t),s.postMessage({id:e.data.id,payload:t,status:"success"})}else"loadData"===e.data.type&&s.assetLoader.load(e.data.path,e.data.fullPath,(function(t){s.postMessage({id:e.data.id,payload:t,status:"success"})}),(function(){s.postMessage({id:e.data.id,status:"error"})}))})),t.onmessage=function(e){var t=e.data,n=t.id,r=i[n];i[n]=null,"success"===t.status?r.onComplete(t.payload):r.onError&&r.onError()})}function o(e,t){var r="processId_"+(n+=1);return i[r]={onComplete:e,onError:t},r}return{loadAnimation:function(e,n,i){a();var r=o(n,i);t.postMessage({type:"loadAnimation",path:e,fullPath:window.location.origin+window.location.pathname,id:r})},loadData:function(e,n,i){a();var r=o(n,i);t.postMessage({type:"loadData",path:e,fullPath:window.location.origin+window.location.pathname,id:r})},completeAnimation:function(e,n,i){a();var r=o(n,i);t.postMessage({type:"complete",animation:e,id:r})}}}(),ImagePreloader=function(){var e=function(){var e=createTag("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),e}();function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function i(e,t,n){var i="";if(e.e)i=e.p;else if(t){var r=e.p;-1!==r.indexOf("images/")&&(r=r.split("/")[1]),i=t+r}else i=n,i+=e.u?e.u:"",i+=e.p;return i}function r(e){var t=0,n=setInterval(function(){(e.getBBox().width||t>500)&&(this._imageLoaded(),clearInterval(n)),t+=1}.bind(this),50)}function s(e){var t={assetData:e},n=i(e,this.assetsPath,this.path);return dataManager.loadData(n,function(e){t.img=e,this._footageLoaded()}.bind(this),function(){t.img={},this._footageLoaded()}.bind(this)),t}function a(){this._imageLoaded=t.bind(this),this._footageLoaded=n.bind(this),this.testImageLoaded=r.bind(this),this.createFootageData=s.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return a.prototype={loadAssets:function(e,t){var n;this.imagesLoadedCb=t;var i=e.length;for(n=0;n<i;n+=1)e[n].layers||(e[n].t&&"seq"!==e[n].t?3===e[n].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(e[n]))):(this.totalImages+=1,this.images.push(this._createImageData(e[n]))))},setAssetsPath:function(e){this.assetsPath=e||""},setPath:function(e){this.path=e||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(e){for(var t=0,n=this.images.length;t<n;){if(this.images[t].assetData===e)return this.images[t].img;t+=1}return null},createImgData:function(t){var n=i(t,this.assetsPath,this.path),r=createTag("img");r.crossOrigin="anonymous",r.addEventListener("load",this._imageLoaded,!1),r.addEventListener("error",function(){s.img=e,this._imageLoaded()}.bind(this),!1),r.src=n;var s={img:r,assetData:t};return s},createImageData:function(t){var n=i(t,this.assetsPath,this.path),r=createNS("image");isSafari?this.testImageLoaded(r):r.addEventListener("load",this._imageLoaded,!1),r.addEventListener("error",function(){s.img=e,this._imageLoaded()}.bind(this),!1),r.setAttributeNS("http://www.w3.org/1999/xlink","href",n),this._elementHelper.append?this._elementHelper.append(r):this._elementHelper.appendChild(r);var s={img:r,assetData:t};return s},imageLoaded:t,footageLoaded:n,setCacheType:function(e,t){"svg"===e?(this._elementHelper=t,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},a}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,t){if(this._cbs[e])for(var n=this._cbs[e],i=0;i<n.length;i+=1)n[i](t)},addEventListener:function(e,t){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t),function(){this.removeEventListener(e,t)}.bind(this)},removeEventListener:function(e,t){if(t){if(this._cbs[e]){for(var n=0,i=this._cbs[e].length;n<i;)this._cbs[e][n]===t&&(this._cbs[e].splice(n,1),n-=1,i-=1),n+=1;this._cbs[e].length||(this._cbs[e]=null)}}else this._cbs[e]=null}};var markerParser=function(){function e(e){for(var t,n=e.split("\r\n"),i={},r=0,s=0;s<n.length;s+=1)2===(t=n[s].split(":")).length&&(i[t[0]]=t[1].trim(),r+=1);if(0===r)throw new Error;return i}return function(t){for(var n=[],i=0;i<t.length;i+=1){var r=t[i],s={time:r.tm,duration:r.dr};try{s.payload=JSON.parse(t[i].cm)}catch(n){try{s.payload=e(t[i].cm)}catch(e){s.payload={name:t[i].cm}}}n.push(s)}return n}}(),ProjectInterface=function(){function e(e){this.compositions.push(e)}return function(){function t(e){for(var t=0,n=this.compositions.length;t<n;){if(this.compositions[t].data&&this.compositions[t].data.nm===e)return this.compositions[t].prepareFrame&&this.compositions[t].data.xt&&this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}return null}return t.compositions=[],t.currentFrame=0,t.registerComposition=e,t}}(),renderers={},registerRenderer=function(e,t){renderers[e]=t};function getRenderer(e){return renderers[e]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var e in renderers)if(renderers[e])return e;return""}function _typeof$4(e){return _typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$4(e)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0)};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(e){(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var t="svg";e.animType?t=e.animType:e.renderer&&(t=e.renderer);var n=getRenderer(t);this.renderer=new n(this,e.rendererSettings),this.imagePreloader.setCacheType(t,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=t,""===e.loop||null===e.loop||void 0===e.loop||!0===e.loop?this.loop=!0:!1===e.loop?this.loop=!1:this.loop=parseInt(e.loop,10),this.autoplay=!("autoplay"in e)||e.autoplay,this.name=e.name?e.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(e,"autoloadSegments")||e.autoloadSegments,this.assetsPath=e.assetsPath,this.initialSegment=e.initialSegment,e.audioFactory&&this.audioController.setAudioFactory(e.audioFactory),e.animationData?this.setupAnimation(e.animationData):e.path&&(-1!==e.path.lastIndexOf("\\")?this.path=e.path.substr(0,e.path.lastIndexOf("\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf("/")+1),this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(e.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(e){dataManager.completeAnimation(e,this.configAnimation)},AnimationItem.prototype.setData=function(e,t){t&&"object"!==_typeof$4(t)&&(t=JSON.parse(t));var n={wrapper:e,animationData:t},i=e.attributes;n.path=i.getNamedItem("data-animation-path")?i.getNamedItem("data-animation-path").value:i.getNamedItem("data-bm-path")?i.getNamedItem("data-bm-path").value:i.getNamedItem("bm-path")?i.getNamedItem("bm-path").value:"",n.animType=i.getNamedItem("data-anim-type")?i.getNamedItem("data-anim-type").value:i.getNamedItem("data-bm-type")?i.getNamedItem("data-bm-type").value:i.getNamedItem("bm-type")?i.getNamedItem("bm-type").value:i.getNamedItem("data-bm-renderer")?i.getNamedItem("data-bm-renderer").value:i.getNamedItem("bm-renderer")?i.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var r=i.getNamedItem("data-anim-loop")?i.getNamedItem("data-anim-loop").value:i.getNamedItem("data-bm-loop")?i.getNamedItem("data-bm-loop").value:i.getNamedItem("bm-loop")?i.getNamedItem("bm-loop").value:"";"false"===r?n.loop=!1:"true"===r?n.loop=!0:""!==r&&(n.loop=parseInt(r,10));var s=i.getNamedItem("data-anim-autoplay")?i.getNamedItem("data-anim-autoplay").value:i.getNamedItem("data-bm-autoplay")?i.getNamedItem("data-bm-autoplay").value:!i.getNamedItem("bm-autoplay")||i.getNamedItem("bm-autoplay").value;n.autoplay="false"!==s,n.name=i.getNamedItem("data-name")?i.getNamedItem("data-name").value:i.getNamedItem("data-bm-name")?i.getNamedItem("data-bm-name").value:i.getNamedItem("bm-name")?i.getNamedItem("bm-name").value:"","false"===(i.getNamedItem("data-anim-prerender")?i.getNamedItem("data-anim-prerender").value:i.getNamedItem("data-bm-prerender")?i.getNamedItem("data-bm-prerender").value:i.getNamedItem("bm-prerender")?i.getNamedItem("bm-prerender").value:"")&&(n.prerender=!1),n.path?this.setParams(n):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));var t,n,i=this.animationData.layers,r=i.length,s=e.layers,a=s.length;for(n=0;n<a;n+=1)for(t=0;t<r;){if(i[t].id===s[n].id){i[t]=s[n];break}t+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(r=e.assets.length,t=0;t<r;t+=1)this.animationData.assets.push(e.assets[t]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(e){this.animationData=e;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||0===e.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var t=e.shift();this.timeCompleted=t.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(n,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.markers=markerParser(e.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(e,t){var n="number"==typeof e?e:void 0,i="number"==typeof t?t:void 0;this.renderer.updateContainerSize(n,i)},AnimationItem.prototype.setSubframe=function(e){this.isSubframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){e&&this.name!==e||!0===this.isPaused&&(this.isPaused=!1,this.trigger("_pause"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!==e||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_play"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(e){e&&this.name!==e||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!==e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(e){for(var t,n=0;n<this.markers.length;n+=1)if((t=this.markers[n]).payload&&t.payload.name===e)return t;return null},AnimationItem.prototype.goToAndStop=function(e,t,n){if(!n||this.name===n){var i=Number(e);if(isNaN(i)){var r=this.getMarkerData(e);r&&this.goToAndStop(r.time,!0)}else t?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(e,t,n){if(!n||this.name===n){var i=Number(e);if(isNaN(i)){var r=this.getMarkerData(e);r&&(r.duration?this.playSegments([r.time,r.time+r.duration],!0):this.goToAndStop(r.time,!0))}else this.goToAndStop(i,t,n);this.play()}},AnimationItem.prototype.advanceTime=function(e){if(!0!==this.isPaused&&!1!==this.isLoaded){var t=this.currentRawFrame+e*this.frameModifier,n=!1;t>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(n=!0,t=this.totalFrames-1):t<0?this.checkSegments(t%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(n=!0,t=0):(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(t),n&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(e,t){this.playCount=0,e[1]<e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.timeCompleted=this.totalFrames,this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.timeCompleted=this.totalFrames,this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,t){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?n=e:this.currentRawFrame+this.firstFrame>t&&(n=t-e)),this.firstFrame=e,this.totalFrames=t-e,this.timeCompleted=this.totalFrames,-1!==n&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(e,t){if(t&&(this.segments.length=0),"object"===_typeof$4(e[0])){var n,i=e.length;for(n=0;n<i;n+=1)this.segments.push(e[n])}else this.segments.push(e);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),e),!0)},AnimationItem.prototype.destroy=function(e){e&&this.name!==e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(e){this.loop=e},AnimationItem.prototype.setVolume=function(e,t){t&&this.name!==t||this.audioController.setVolume(e)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(e){e&&this.name!==e||this.audioController.mute()},AnimationItem.prototype.unmute=function(e){e&&this.name!==e||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var t="";if(e.e)t=e.p;else if(this.assetsPath){var n=e.p;-1!==n.indexOf("images/")&&(n=n.split("/")[1]),t=this.assetsPath+n}else t=this.path,t+=e.u?e.u:"",t+=e.p;return t},AnimationItem.prototype.getAssetData=function(e){for(var t=0,n=this.assets.length;t<n;){if(e===this.assets[t].id)return this.assets[t];t+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(e,t,n){try{this.renderer.getElementByPath(e).updateDocumentData(t,n)}catch(e){}},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(e,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}"enterFrame"===e&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===e&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),"complete"===e&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),"segmentStart"===e&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),"destroy"===e&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(e){var t=new BMRenderFrameErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(e){var t=new BMConfigErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var animationManager=function(){var e={},t=[],n=0,i=0,r=0,s=!0,a=!1;function o(e){for(var n=0,r=e.target;n<i;)t[n].animation===r&&(t.splice(n,1),n-=1,i-=1,r.isPaused||h()),n+=1}function l(e,n){if(!e)return null;for(var r=0;r<i;){if(t[r].elem===e&&null!==t[r].elem)return t[r].animation;r+=1}var s=new AnimationItem;return u(s,e),s.setData(e,n),s}function c(){r+=1,f()}function h(){r-=1}function u(e,n){e.addEventListener("destroy",o),e.addEventListener("_active",c),e.addEventListener("_idle",h),t.push({elem:n,animation:e}),i+=1}function d(e){var o,l=e-n;for(o=0;o<i;o+=1)t[o].animation.advanceTime(l);n=e,r&&!a?window.requestAnimationFrame(d):s=!0}function p(e){n=e,window.requestAnimationFrame(d)}function f(){!a&&r&&s&&(window.requestAnimationFrame(p),s=!1)}return e.registerAnimation=l,e.loadAnimation=function(e){var t=new AnimationItem;return u(t,null),t.setParams(e),t},e.setSpeed=function(e,n){var r;for(r=0;r<i;r+=1)t[r].animation.setSpeed(e,n)},e.setDirection=function(e,n){var r;for(r=0;r<i;r+=1)t[r].animation.setDirection(e,n)},e.play=function(e){var n;for(n=0;n<i;n+=1)t[n].animation.play(e)},e.pause=function(e){var n;for(n=0;n<i;n+=1)t[n].animation.pause(e)},e.stop=function(e){var n;for(n=0;n<i;n+=1)t[n].animation.stop(e)},e.togglePause=function(e){var n;for(n=0;n<i;n+=1)t[n].animation.togglePause(e)},e.searchAnimations=function(e,t,n){var i,r=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),s=r.length;for(i=0;i<s;i+=1)n&&r[i].setAttribute("data-bm-type",n),l(r[i],e);if(t&&0===s){n||(n="svg");var a=document.getElementsByTagName("body")[0];a.innerText="";var o=createTag("div");o.style.width="100%",o.style.height="100%",o.setAttribute("data-bm-type",n),a.appendChild(o),l(o,e)}},e.resize=function(){var e;for(e=0;e<i;e+=1)t[e].animation.resize()},e.goToAndStop=function(e,n,r){var s;for(s=0;s<i;s+=1)t[s].animation.goToAndStop(e,n,r)},e.destroy=function(e){var n;for(n=i-1;n>=0;n-=1)t[n].animation.destroy(e)},e.freeze=function(){a=!0},e.unfreeze=function(){a=!1,f()},e.setVolume=function(e,n){var r;for(r=0;r<i;r+=1)t[r].animation.setVolume(e,n)},e.mute=function(e){var n;for(n=0;n<i;n+=1)t[n].animation.mute(e)},e.unmute=function(e){var n;for(n=0;n<i;n+=1)t[n].animation.unmute(e)},e.getRegisteredAnimations=function(){var e,n=t.length,i=[];for(e=0;e<n;e+=1)i.push(t[e].animation);return i},e}(),BezierFactory=function(){var e={getBezierEasing:function(e,n,i,r,s){var a=s||("bez_"+e+"_"+n+"_"+i+"_"+r).replace(/\./g,"p");if(t[a])return t[a];var o=new c([e,n,i,r]);return t[a]=o,o}},t={},n=.1,i="function"==typeof Float32Array;function r(e,t){return 1-3*t+3*e}function s(e,t){return 3*t-6*e}function a(e){return 3*e}function o(e,t,n){return((r(t,n)*e+s(t,n))*e+a(t))*e}function l(e,t,n){return 3*r(t,n)*e*e+2*s(t,n)*e+a(t)}function c(e){this._p=e,this._mSampleValues=i?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return c.prototype={get:function(e){var t=this._p[0],n=this._p[1],i=this._p[2],r=this._p[3];return this._precomputed||this._precompute(),t===n&&i===r?e:0===e?0:1===e?1:o(this._getTForX(e),n,r)},_precompute:function(){var e=this._p[0],t=this._p[1],n=this._p[2],i=this._p[3];this._precomputed=!0,e===t&&n===i||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],i=0;i<11;++i)this._mSampleValues[i]=o(i*n,e,t)},_getTForX:function(e){for(var t=this._p[0],i=this._p[2],r=this._mSampleValues,s=0,a=1;10!==a&&r[a]<=e;++a)s+=n;var c=s+(e-r[--a])/(r[a+1]-r[a])*n,h=l(c,t,i);return h>=.001?function(e,t,n,i){for(var r=0;r<4;++r){var s=l(t,n,i);if(0===s)return t;t-=(o(t,n,i)-e)/s}return t}(e,c,t,i):0===h?c:function(e,t,n,i,r){var s,a,l=0;do{(s=o(a=t+(n-t)/2,i,r)-e)>0?n=a:t=a}while(Math.abs(s)>1e-7&&++l<10);return a}(e,s,s+n,t,i)}},e}(),pooling={double:function(e){return e.concat(createSizedArray(e.length))}},poolFactory=function(e,t,n){var i=0,r=e,s=createSizedArray(r);return{newElement:function(){return i?s[i-=1]:t()},release:function(e){i===r&&(s=pooling.double(s),r*=2),n&&n(e),s[i]=e,i+=1}}},bezierLengthPool=poolFactory(8,(function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}})),segmentsLengthPool=poolFactory(8,(function(){return{lengths:[],totalLength:0}}),(function(e){var t,n=e.lengths.length;for(t=0;t<n;t+=1)bezierLengthPool.release(e.lengths[t]);e.lengths.length=0}));function bezFunction(){var e=Math;function t(e,t,n,i,r,s){var a=e*i+t*r+n*s-r*i-s*e-n*t;return a>-.001&&a<.001}var n=function(e,t,n,i){var r,s,a,o,l,c,h=getDefaultCurveSegments(),u=0,d=[],p=[],f=bezierLengthPool.newElement();for(a=n.length,r=0;r<h;r+=1){for(l=r/(h-1),c=0,s=0;s<a;s+=1)o=bmPow(1-l,3)*e[s]+3*bmPow(1-l,2)*l*n[s]+3*(1-l)*bmPow(l,2)*i[s]+bmPow(l,3)*t[s],d[s]=o,null!==p[s]&&(c+=bmPow(d[s]-p[s],2)),p[s]=d[s];c&&(u+=c=bmSqrt(c)),f.percents[r]=l,f.lengths[r]=u}return f.addedLength=u,f};function i(e){this.segmentLength=0,this.points=new Array(e)}function r(e,t){this.partialLength=e,this.point=t}var s,a=(s={},function(e,n,a,o){var l=(e[0]+"_"+e[1]+"_"+n[0]+"_"+n[1]+"_"+a[0]+"_"+a[1]+"_"+o[0]+"_"+o[1]).replace(/\./g,"p");if(!s[l]){var c,h,u,d,p,f,m,g=getDefaultCurveSegments(),v=0,y=null;2===e.length&&(e[0]!==n[0]||e[1]!==n[1])&&t(e[0],e[1],n[0],n[1],e[0]+a[0],e[1]+a[1])&&t(e[0],e[1],n[0],n[1],n[0]+o[0],n[1]+o[1])&&(g=2);var _=new i(g);for(u=a.length,c=0;c<g;c+=1){for(m=createSizedArray(u),p=c/(g-1),f=0,h=0;h<u;h+=1)d=bmPow(1-p,3)*e[h]+3*bmPow(1-p,2)*p*(e[h]+a[h])+3*(1-p)*bmPow(p,2)*(n[h]+o[h])+bmPow(p,3)*n[h],m[h]=d,null!==y&&(f+=bmPow(m[h]-y[h],2));v+=f=bmSqrt(f),_.points[c]=new r(f,m),y=m}_.segmentLength=v,s[l]=_}return s[l]});function o(e,t){var n=t.percents,i=t.lengths,r=n.length,s=bmFloor((r-1)*e),a=e*t.addedLength,o=0;if(s===r-1||0===s||a===i[s])return n[s];for(var l=i[s]>a?-1:1,c=!0;c;)if(i[s]<=a&&i[s+1]>a?(o=(a-i[s])/(i[s+1]-i[s]),c=!1):s+=l,s<0||s>=r-1){if(s===r-1)return n[s];c=!1}return n[s]+(n[s+1]-n[s])*o}var l=createTypedArray("float32",8);return{getSegmentsLength:function(e){var t,i=segmentsLengthPool.newElement(),r=e.c,s=e.v,a=e.o,o=e.i,l=e._length,c=i.lengths,h=0;for(t=0;t<l-1;t+=1)c[t]=n(s[t],s[t+1],a[t],o[t+1]),h+=c[t].addedLength;return r&&l&&(c[t]=n(s[t],s[0],a[t],o[0]),h+=c[t].addedLength),i.totalLength=h,i},getNewSegment:function(t,n,i,r,s,a,c){s<0?s=0:s>1&&(s=1);var h,u=o(s,c),d=o(a=a>1?1:a,c),p=t.length,f=1-u,m=1-d,g=f*f*f,v=u*f*f*3,y=u*u*f*3,_=u*u*u,b=f*f*m,x=u*f*m+f*u*m+f*f*d,S=u*u*m+f*u*d+u*f*d,E=u*u*d,w=f*m*m,T=u*m*m+f*d*m+f*m*d,M=u*d*m+f*d*d+u*m*d,A=u*d*d,P=m*m*m,C=d*m*m+m*d*m+m*m*d,I=d*d*m+m*d*d+d*m*d,L=d*d*d;for(h=0;h<p;h+=1)l[4*h]=e.round(1e3*(g*t[h]+v*i[h]+y*r[h]+_*n[h]))/1e3,l[4*h+1]=e.round(1e3*(b*t[h]+x*i[h]+S*r[h]+E*n[h]))/1e3,l[4*h+2]=e.round(1e3*(w*t[h]+T*i[h]+M*r[h]+A*n[h]))/1e3,l[4*h+3]=e.round(1e3*(P*t[h]+C*i[h]+I*r[h]+L*n[h]))/1e3;return l},getPointInSegment:function(t,n,i,r,s,a){var l=o(s,a),c=1-l;return[e.round(1e3*(c*c*c*t[0]+(l*c*c+c*l*c+c*c*l)*i[0]+(l*l*c+c*l*l+l*c*l)*r[0]+l*l*l*n[0]))/1e3,e.round(1e3*(c*c*c*t[1]+(l*c*c+c*l*c+c*c*l)*i[1]+(l*l*c+c*l*l+l*c*l)*r[1]+l*l*l*n[1]))/1e3]},buildBezierData:a,pointOnLine2D:t,pointOnLine3D:function(n,i,r,s,a,o,l,c,h){if(0===r&&0===o&&0===h)return t(n,i,s,a,l,c);var u,d=e.sqrt(e.pow(s-n,2)+e.pow(a-i,2)+e.pow(o-r,2)),p=e.sqrt(e.pow(l-n,2)+e.pow(c-i,2)+e.pow(h-r,2)),f=e.sqrt(e.pow(l-s,2)+e.pow(c-a,2)+e.pow(h-o,2));return(u=d>p?d>f?d-p-f:f-p-d:f>p?f-p-d:p-d-f)>-1e-4&&u<1e-4}}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(e,t){var n,i=this.offsetTime;"multidimensional"===this.propType&&(n=createTypedArray("float32",this.pv.length));for(var r,s,a,o,l,c,h,u,d,p=t.lastIndex,f=p,m=this.keyframes.length-1,g=!0;g;){if(r=this.keyframes[f],s=this.keyframes[f+1],f===m-1&&e>=s.t-i){r.h&&(r=s),p=0;break}if(s.t-i>e){p=f;break}f<m-1?f+=1:(p=0,g=!1)}a=this.keyframesMetadata[f]||{};var v,y=s.t-i,_=r.t-i;if(r.to){a.bezierData||(a.bezierData=bez.buildBezierData(r.s,s.s||r.e,r.to,r.ti));var b=a.bezierData;if(e>=y||e<_){var x=e>=y?b.points.length-1:0;for(l=b.points[x].point.length,o=0;o<l;o+=1)n[o]=b.points[x].point[o]}else{a.__fnct?d=a.__fnct:(d=BezierFactory.getBezierEasing(r.o.x,r.o.y,r.i.x,r.i.y,r.n).get,a.__fnct=d),c=d((e-_)/(y-_));var S,E=b.segmentLength*c,w=t.lastFrame<e&&t._lastKeyframeIndex===f?t._lastAddedLength:0;for(u=t.lastFrame<e&&t._lastKeyframeIndex===f?t._lastPoint:0,g=!0,h=b.points.length;g;){if(w+=b.points[u].partialLength,0===E||0===c||u===b.points.length-1){for(l=b.points[u].point.length,o=0;o<l;o+=1)n[o]=b.points[u].point[o];break}if(E>=w&&E<w+b.points[u+1].partialLength){for(S=(E-w)/b.points[u+1].partialLength,l=b.points[u].point.length,o=0;o<l;o+=1)n[o]=b.points[u].point[o]+(b.points[u+1].point[o]-b.points[u].point[o])*S;break}u<h-1?u+=1:g=!1}t._lastPoint=u,t._lastAddedLength=w-b.points[u].partialLength,t._lastKeyframeIndex=f}}else{var T,M,A,P,C;if(m=r.s.length,v=s.s||r.e,this.sh&&1!==r.h)e>=y?(n[0]=v[0],n[1]=v[1],n[2]=v[2]):e<=_?(n[0]=r.s[0],n[1]=r.s[1],n[2]=r.s[2]):quaternionToEuler(n,slerp(createQuaternion(r.s),createQuaternion(v),(e-_)/(y-_)));else for(f=0;f<m;f+=1)1!==r.h&&(e>=y?c=1:e<_?c=0:(r.o.x.constructor===Array?(a.__fnct||(a.__fnct=[]),a.__fnct[f]?d=a.__fnct[f]:(T=void 0===r.o.x[f]?r.o.x[0]:r.o.x[f],M=void 0===r.o.y[f]?r.o.y[0]:r.o.y[f],A=void 0===r.i.x[f]?r.i.x[0]:r.i.x[f],P=void 0===r.i.y[f]?r.i.y[0]:r.i.y[f],d=BezierFactory.getBezierEasing(T,M,A,P).get,a.__fnct[f]=d)):a.__fnct?d=a.__fnct:(T=r.o.x,M=r.o.y,A=r.i.x,P=r.i.y,d=BezierFactory.getBezierEasing(T,M,A,P).get,r.keyframeMetadata=d),c=d((e-_)/(y-_)))),v=s.s||r.e,C=1===r.h?r.s[f]:r.s[f]+(v[f]-r.s[f])*c,"multidimensional"===this.propType?n[f]=C:n=C}return t.lastIndex=p,n}function slerp(e,t,n){var i,r,s,a,o,l=[],c=e[0],h=e[1],u=e[2],d=e[3],p=t[0],f=t[1],m=t[2],g=t[3];return(r=c*p+h*f+u*m+d*g)<0&&(r=-r,p=-p,f=-f,m=-m,g=-g),1-r>1e-6?(i=Math.acos(r),s=Math.sin(i),a=Math.sin((1-n)*i)/s,o=Math.sin(n*i)/s):(a=1-n,o=n),l[0]=a*c+o*p,l[1]=a*h+o*f,l[2]=a*u+o*m,l[3]=a*d+o*g,l}function quaternionToEuler(e,t){var n=t[0],i=t[1],r=t[2],s=t[3],a=Math.atan2(2*i*s-2*n*r,1-2*i*i-2*r*r),o=Math.asin(2*n*i+2*r*s),l=Math.atan2(2*n*s-2*i*r,1-2*n*n-2*r*r);e[0]=a/degToRads,e[1]=o/degToRads,e[2]=l/degToRads}function createQuaternion(e){var t=e[0]*degToRads,n=e[1]*degToRads,i=e[2]*degToRads,r=Math.cos(t/2),s=Math.cos(n/2),a=Math.cos(i/2),o=Math.sin(t/2),l=Math.sin(n/2),c=Math.sin(i/2);return[o*l*a+r*s*c,o*s*a+r*l*c,r*l*a-o*s*c,r*s*a-o*l*c]}function getValueAtCurrentTime(){var e=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,n=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=n&&e>=n||this._caching.lastFrame<t&&e<t))){this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var i=this.interpolateValue(e,this._caching);this.pv=i}return this._caching.lastFrame=e,this.pv}function setVValue(e){var t;if("unidimensional"===this.propType)t=e*this.mult,mathAbs(this.v-t)>1e-5&&(this.v=t,this._mdf=!0);else for(var n=0,i=this.v.length;n<i;)t=e[n]*this.mult,mathAbs(this.v[n]-t)>1e-5&&(this.v[n]=t,this._mdf=!0),n+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var e;this.lock=!0,this._mdf=this._isFirstFrame;var t=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(e=0;e<t;e+=1)n=this.effectsSequence[e](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function ValueProperty(e,t,n,i){this.propType="unidimensional",this.mult=n||1,this.data=t,this.v=n?t.k*n:t.k,this.pv=t.k,this._mdf=!1,this.elem=e,this.container=i,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(e,t,n,i){var r;this.propType="multidimensional",this.mult=n||1,this.data=t,this._mdf=!1,this.elem=e,this.container=i,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var s=t.k.length;for(this.v=createTypedArray("float32",s),this.pv=createTypedArray("float32",s),this.vel=createTypedArray("float32",s),r=0;r<s;r+=1)this.v[r]=t.k[r]*this.mult,this.pv[r]=t.k[r];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(e,t,n,i){this.propType="unidimensional",this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=t,this.mult=n||1,this.elem=e,this.container=i,this.comp=e.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(e,t,n,i){var r;this.propType="multidimensional";var s,a,o,l,c=t.k.length;for(r=0;r<c-1;r+=1)t.k[r].to&&t.k[r].s&&t.k[r+1]&&t.k[r+1].s&&(s=t.k[r].s,a=t.k[r+1].s,o=t.k[r].to,l=t.k[r].ti,(2===s.length&&(s[0]!==a[0]||s[1]!==a[1])&&bez.pointOnLine2D(s[0],s[1],a[0],a[1],s[0]+o[0],s[1]+o[1])&&bez.pointOnLine2D(s[0],s[1],a[0],a[1],a[0]+l[0],a[1]+l[1])||3===s.length&&(s[0]!==a[0]||s[1]!==a[1]||s[2]!==a[2])&&bez.pointOnLine3D(s[0],s[1],s[2],a[0],a[1],a[2],s[0]+o[0],s[1]+o[1],s[2]+o[2])&&bez.pointOnLine3D(s[0],s[1],s[2],a[0],a[1],a[2],a[0]+l[0],a[1]+l[1],a[2]+l[2]))&&(t.k[r].to=null,t.k[r].ti=null),s[0]===a[0]&&s[1]===a[1]&&0===o[0]&&0===o[1]&&0===l[0]&&0===l[1]&&(2===s.length||s[2]===a[2]&&0===o[2]&&0===l[2])&&(t.k[r].to=null,t.k[r].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=t,this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=n||1,this.elem=e,this.container=i,this.comp=e.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var h=t.k[0].s.length;for(this.v=createTypedArray("float32",h),this.pv=createTypedArray("float32",h),r=0;r<h;r+=1)this.v[r]=initFrame,this.pv[r]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",h)},this.addEffect=addEffect}var PropertyFactory={getProp:function(e,t,n,i,r){var s;if(t.sid&&(t=e.globalData.slotManager.getProp(t)),t.k.length)if("number"==typeof t.k[0])s=new MultiDimensionalProperty(e,t,i,r);else switch(n){case 0:s=new KeyframedValueProperty(e,t,i,r);break;case 1:s=new KeyframedMultidimensionalProperty(e,t,i,r)}else s=new ValueProperty(e,t,i,r);return s.effectsSequence.length&&r.addDynamicProperty(s),s}};function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var e;this._mdf=!1;var t=this.dynamicProperties.length;for(e=0;e<t;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,(function(){return createTypedArray("float32",2)}));function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(e,t){this.c=e,this.setLength(t);for(var n=0;n<t;)this.v[n]=pointPool.newElement(),this.o[n]=pointPool.newElement(),this.i[n]=pointPool.newElement(),n+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,t,n,i,r){var s;switch(this._length=Math.max(this._length,i+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":s=this.v;break;case"i":s=this.i;break;case"o":s=this.o;break;default:s=[]}(!s[i]||s[i]&&!r)&&(s[i]=pointPool.newElement()),s[i][0]=e,s[i][1]=t},ShapePath.prototype.setTripleAt=function(e,t,n,i,r,s,a,o){this.setXYAt(e,t,"v",a,o),this.setXYAt(n,i,"o",a,o),this.setXYAt(r,s,"i",a,o)},ShapePath.prototype.reverse=function(){var e=new ShapePath;e.setPathData(this.c,this._length);var t=this.v,n=this.o,i=this.i,r=0;this.c&&(e.setTripleAt(t[0][0],t[0][1],i[0][0],i[0][1],n[0][0],n[0][1],0,!1),r=1);var s,a=this._length-1,o=this._length;for(s=r;s<o;s+=1)e.setTripleAt(t[a][0],t[a][1],i[a][0],i[a][1],n[a][0],n[a][1],s,!1),a-=1;return e},ShapePath.prototype.length=function(){return this._length};var shapePool=(factory=poolFactory(4,(function(){return new ShapePath}),(function(e){var t,n=e._length;for(t=0;t<n;t+=1)pointPool.release(e.v[t]),pointPool.release(e.i[t]),pointPool.release(e.o[t]),e.v[t]=null,e.i[t]=null,e.o[t]=null;e._length=0,e.c=!1})),factory.clone=function(e){var t,n=factory.newElement(),i=void 0===e._length?e.v.length:e._length;for(n.setLength(i),n.c=e.c,t=0;t<i;t+=1)n.setTripleAt(e.v[t][0],e.v[t][1],e.o[t][0],e.o[t][1],e.i[t][0],e.i[t][1],t);return n},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var e;for(e=0;e<this._length;e+=1)shapePool.release(this.shapes[e]);this._length=0};var shapeCollectionPool=(ob={newShapeCollection:function(){return _length?pool[_length-=1]:new ShapeCollection},release:function(e){var t,n=e._length;for(t=0;t<n;t+=1)shapePool.release(e.shapes[t]);e._length=0,_length===_maxLength&&(pool=pooling.double(pool),_maxLength*=2),pool[_length]=e,_length+=1}},_length=0,_maxLength=4,pool=createSizedArray(_maxLength),ob),ob,_length,_maxLength,pool,ShapePropertyFactory=function(){var e=-999999;function t(e,t,n){var i,r,s,a,o,l,c,h,u,d=n.lastIndex,p=this.keyframes;if(e<p[0].t-this.offsetTime)i=p[0].s[0],s=!0,d=0;else if(e>=p[p.length-1].t-this.offsetTime)i=p[p.length-1].s?p[p.length-1].s[0]:p[p.length-2].e[0],s=!0;else{for(var f,m,g,v=d,y=p.length-1,_=!0;_&&(f=p[v],!((m=p[v+1]).t-this.offsetTime>e));)v<y-1?v+=1:_=!1;if(g=this.keyframesMetadata[v]||{},d=v,!(s=1===f.h)){if(e>=m.t-this.offsetTime)h=1;else if(e<f.t-this.offsetTime)h=0;else{var b;g.__fnct?b=g.__fnct:(b=BezierFactory.getBezierEasing(f.o.x,f.o.y,f.i.x,f.i.y).get,g.__fnct=b),h=b((e-(f.t-this.offsetTime))/(m.t-this.offsetTime-(f.t-this.offsetTime)))}r=m.s?m.s[0]:f.e[0]}i=f.s[0]}for(l=t._length,c=i.i[0].length,n.lastIndex=d,a=0;a<l;a+=1)for(o=0;o<c;o+=1)u=s?i.i[a][o]:i.i[a][o]+(r.i[a][o]-i.i[a][o])*h,t.i[a][o]=u,u=s?i.o[a][o]:i.o[a][o]+(r.o[a][o]-i.o[a][o])*h,t.o[a][o]=u,u=s?i.v[a][o]:i.v[a][o]+(r.v[a][o]-i.v[a][o])*h,t.v[a][o]=u}function n(){var t=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,i=this.keyframes[this.keyframes.length-1].t-this.offsetTime,r=this._caching.lastFrame;return r!==e&&(r<n&&t<n||r>i&&t>i)||(this._caching.lastIndex=r<t?this._caching.lastIndex:0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastFrame=t,this.pv}function i(){this.paths=this.localShapeCollection}function r(e){(function(e,t){if(e._length!==t._length||e.c!==t.c)return!1;var n,i=e._length;for(n=0;n<i;n+=1)if(e.v[n][0]!==t.v[n][0]||e.v[n][1]!==t.v[n][1]||e.o[n][0]!==t.o[n][0]||e.o[n][1]!==t.o[n][1]||e.i[n][0]!==t.i[n][0]||e.i[n][1]!==t.i[n][1])return!1;return!0})(this.v,e)||(this.v=shapePool.clone(e),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function s(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var e,t;this.lock=!0,this._mdf=!1,e=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var n=this.effectsSequence.length;for(t=0;t<n;t+=1)e=this.effectsSequence[t](e);this.setVValue(e),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function a(e,t,n){this.propType="shape",this.comp=e.comp,this.container=e,this.elem=e,this.data=t,this.k=!1,this.kf=!1,this._mdf=!1;var r=3===n?t.pt.k:t.ks.k;this.v=shapePool.clone(r),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=i,this.effectsSequence=[]}function o(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function l(t,r,s){this.propType="shape",this.comp=t.comp,this.elem=t,this.container=t,this.offsetTime=t.data.st,this.keyframes=3===s?r.pt.k:r.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var a=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,a),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=e,this.reset=i,this._caching={lastFrame:e,lastIndex:0},this.effectsSequence=[n.bind(this)]}a.prototype.interpolateShape=t,a.prototype.getValue=s,a.prototype.setVValue=r,a.prototype.addEffect=o,l.prototype.getValue=s,l.prototype.interpolateShape=t,l.prototype.setVValue=r,l.prototype.addEffect=o;var c=function(){var e=roundCorner;function t(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=t.d,this.elem=e,this.comp=e.comp,this.frameId=-1,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return t.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var t=this.p.v[0],n=this.p.v[1],i=this.s.v[0]/2,r=this.s.v[1]/2,s=3!==this.d,a=this.v;a.v[0][0]=t,a.v[0][1]=n-r,a.v[1][0]=s?t+i:t-i,a.v[1][1]=n,a.v[2][0]=t,a.v[2][1]=n+r,a.v[3][0]=s?t-i:t+i,a.v[3][1]=n,a.i[0][0]=s?t-i*e:t+i*e,a.i[0][1]=n-r,a.i[1][0]=s?t+i:t-i,a.i[1][1]=n-r*e,a.i[2][0]=s?t+i*e:t-i*e,a.i[2][1]=n+r,a.i[3][0]=s?t-i:t+i,a.i[3][1]=n+r*e,a.o[0][0]=s?t+i*e:t-i*e,a.o[0][1]=n-r,a.o[1][0]=s?t+i:t-i,a.o[1][1]=n+r*e,a.o[2][0]=s?t-i*e:t+i*e,a.o[2][1]=n+r,a.o[3][0]=s?t-i:t+i,a.o[3][1]=n-r*e}},extendPrototype([DynamicPropertyContainer],t),t}(),h=function(){function e(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=e,this.comp=e.comp,this.data=t,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),1===t.sy?(this.ir=PropertyFactory.getProp(e,t.ir,0,0,this),this.is=PropertyFactory.getProp(e,t.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(e,t.pt,0,0,this),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,degToRads,this),this.or=PropertyFactory.getProp(e,t.or,0,0,this),this.os=PropertyFactory.getProp(e,t.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return e.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var e,t,n,i,r=2*Math.floor(this.pt.v),s=2*Math.PI/r,a=!0,o=this.or.v,l=this.ir.v,c=this.os.v,h=this.is.v,u=2*Math.PI*o/(2*r),d=2*Math.PI*l/(2*r),p=-Math.PI/2;p+=this.r.v;var f=3===this.data.d?-1:1;for(this.v._length=0,e=0;e<r;e+=1){n=a?c:h,i=a?u:d;var m=(t=a?o:l)*Math.cos(p),g=t*Math.sin(p),v=0===m&&0===g?0:g/Math.sqrt(m*m+g*g),y=0===m&&0===g?0:-m/Math.sqrt(m*m+g*g);m+=+this.p.v[0],g+=+this.p.v[1],this.v.setTripleAt(m,g,m-v*i*n*f,g-y*i*n*f,m+v*i*n*f,g+y*i*n*f,e,!0),a=!a,p+=s*f}},convertPolygonToPath:function(){var e,t=Math.floor(this.pt.v),n=2*Math.PI/t,i=this.or.v,r=this.os.v,s=2*Math.PI*i/(4*t),a=.5*-Math.PI,o=3===this.data.d?-1:1;for(a+=this.r.v,this.v._length=0,e=0;e<t;e+=1){var l=i*Math.cos(a),c=i*Math.sin(a),h=0===l&&0===c?0:c/Math.sqrt(l*l+c*c),u=0===l&&0===c?0:-l/Math.sqrt(l*l+c*c);l+=+this.p.v[0],c+=+this.p.v[1],this.v.setTripleAt(l,c,l-h*s*r*o,c-u*s*r*o,l+h*s*r*o,c+u*s*r*o,e,!0),a+=n*o}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],e),e}(),u=function(){function e(e,t){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=e,this.comp=e.comp,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return e.prototype={convertRectToPath:function(){var e=this.p.v[0],t=this.p.v[1],n=this.s.v[0]/2,i=this.s.v[1]/2,r=bmMin(n,i,this.r.v),s=r*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(e+n,t-i+r,e+n,t-i+r,e+n,t-i+s,0,!0),this.v.setTripleAt(e+n,t+i-r,e+n,t+i-s,e+n,t+i-r,1,!0),0!==r?(this.v.setTripleAt(e+n-r,t+i,e+n-r,t+i,e+n-s,t+i,2,!0),this.v.setTripleAt(e-n+r,t+i,e-n+s,t+i,e-n+r,t+i,3,!0),this.v.setTripleAt(e-n,t+i-r,e-n,t+i-r,e-n,t+i-s,4,!0),this.v.setTripleAt(e-n,t-i+r,e-n,t-i+s,e-n,t-i+r,5,!0),this.v.setTripleAt(e-n+r,t-i,e-n+r,t-i,e-n+s,t-i,6,!0),this.v.setTripleAt(e+n-r,t-i,e+n-s,t-i,e+n-r,t-i,7,!0)):(this.v.setTripleAt(e-n,t+i,e-n+s,t+i,e-n,t+i,2),this.v.setTripleAt(e-n,t-i,e-n,t-i+s,e-n,t-i,3))):(this.v.setTripleAt(e+n,t-i+r,e+n,t-i+s,e+n,t-i+r,0,!0),0!==r?(this.v.setTripleAt(e+n-r,t-i,e+n-r,t-i,e+n-s,t-i,1,!0),this.v.setTripleAt(e-n+r,t-i,e-n+s,t-i,e-n+r,t-i,2,!0),this.v.setTripleAt(e-n,t-i+r,e-n,t-i+r,e-n,t-i+s,3,!0),this.v.setTripleAt(e-n,t+i-r,e-n,t+i-s,e-n,t+i-r,4,!0),this.v.setTripleAt(e-n+r,t+i,e-n+r,t+i,e-n+s,t+i,5,!0),this.v.setTripleAt(e+n-r,t+i,e+n-s,t+i,e+n-r,t+i,6,!0),this.v.setTripleAt(e+n,t+i-r,e+n,t+i-r,e+n,t+i-s,7,!0)):(this.v.setTripleAt(e-n,t-i,e-n+s,t-i,e-n,t-i,1,!0),this.v.setTripleAt(e-n,t+i,e-n,t+i-s,e-n,t+i,2,!0),this.v.setTripleAt(e+n,t+i,e+n-s,t+i,e+n,t+i,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:i},extendPrototype([DynamicPropertyContainer],e),e}(),d={getShapeProp:function(e,t,n){var i;return 3===n||4===n?i=(3===n?t.pt:t.ks).k.length?new l(e,t,n):new a(e,t,n):5===n?i=new u(e,t):6===n?i=new c(e,t):7===n&&(i=new h(e,t)),i.k&&e.addDynamicProperty(i),i},getConstructorFunction:function(){return a},getKeyframedConstructorFunction:function(){return l}};return d}(),Matrix=function(){var e=Math.cos,t=Math.sin,n=Math.tan,i=Math.round;function r(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function s(n){if(0===n)return this;var i=e(n),r=t(n);return this._t(i,-r,0,0,r,i,0,0,0,0,1,0,0,0,0,1)}function a(n){if(0===n)return this;var i=e(n),r=t(n);return this._t(1,0,0,0,0,i,-r,0,0,r,i,0,0,0,0,1)}function o(n){if(0===n)return this;var i=e(n),r=t(n);return this._t(i,0,r,0,0,1,0,0,-r,0,i,0,0,0,0,1)}function l(n){if(0===n)return this;var i=e(n),r=t(n);return this._t(i,-r,0,0,r,i,0,0,0,0,1,0,0,0,0,1)}function c(e,t){return this._t(1,t,e,1,0,0)}function h(e,t){return this.shear(n(e),n(t))}function u(i,r){var s=e(r),a=t(r);return this._t(s,a,0,0,-a,s,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(i),1,0,0,0,0,1,0,0,0,0,1)._t(s,-a,0,0,a,s,0,0,0,0,1,0,0,0,0,1)}function d(e,t,n){return n||0===n||(n=1),1===e&&1===t&&1===n?this:this._t(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1)}function p(e,t,n,i,r,s,a,o,l,c,h,u,d,p,f,m){return this.props[0]=e,this.props[1]=t,this.props[2]=n,this.props[3]=i,this.props[4]=r,this.props[5]=s,this.props[6]=a,this.props[7]=o,this.props[8]=l,this.props[9]=c,this.props[10]=h,this.props[11]=u,this.props[12]=d,this.props[13]=p,this.props[14]=f,this.props[15]=m,this}function f(e,t,n){return n=n||0,0!==e||0!==t||0!==n?this._t(1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1):this}function m(e,t,n,i,r,s,a,o,l,c,h,u,d,p,f,m){var g=this.props;if(1===e&&0===t&&0===n&&0===i&&0===r&&1===s&&0===a&&0===o&&0===l&&0===c&&1===h&&0===u)return g[12]=g[12]*e+g[15]*d,g[13]=g[13]*s+g[15]*p,g[14]=g[14]*h+g[15]*f,g[15]*=m,this._identityCalculated=!1,this;var v=g[0],y=g[1],_=g[2],b=g[3],x=g[4],S=g[5],E=g[6],w=g[7],T=g[8],M=g[9],A=g[10],P=g[11],C=g[12],I=g[13],L=g[14],D=g[15];return g[0]=v*e+y*r+_*l+b*d,g[1]=v*t+y*s+_*c+b*p,g[2]=v*n+y*a+_*h+b*f,g[3]=v*i+y*o+_*u+b*m,g[4]=x*e+S*r+E*l+w*d,g[5]=x*t+S*s+E*c+w*p,g[6]=x*n+S*a+E*h+w*f,g[7]=x*i+S*o+E*u+w*m,g[8]=T*e+M*r+A*l+P*d,g[9]=T*t+M*s+A*c+P*p,g[10]=T*n+M*a+A*h+P*f,g[11]=T*i+M*o+A*u+P*m,g[12]=C*e+I*r+L*l+D*d,g[13]=C*t+I*s+L*c+D*p,g[14]=C*n+I*a+L*h+D*f,g[15]=C*i+I*o+L*u+D*m,this._identityCalculated=!1,this}function g(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function v(e){for(var t=0;t<16;){if(e.props[t]!==this.props[t])return!1;t+=1}return!0}function y(e){var t;for(t=0;t<16;t+=1)e.props[t]=this.props[t];return e}function _(e){var t;for(t=0;t<16;t+=1)this.props[t]=e[t]}function b(e,t,n){return{x:e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12],y:e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13],z:e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]}}function x(e,t,n){return e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12]}function S(e,t,n){return e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13]}function E(e,t,n){return e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]}function w(){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],t=this.props[5]/e,n=-this.props[1]/e,i=-this.props[4]/e,r=this.props[0]/e,s=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,a=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e,o=new Matrix;return o.props[0]=t,o.props[1]=n,o.props[4]=i,o.props[5]=r,o.props[12]=s,o.props[13]=a,o}function T(e){return this.getInverseMatrix().applyToPointArray(e[0],e[1],e[2]||0)}function M(e){var t,n=e.length,i=[];for(t=0;t<n;t+=1)i[t]=T(e[t]);return i}function A(e,t,n){var i=createTypedArray("float32",6);if(this.isIdentity())i[0]=e[0],i[1]=e[1],i[2]=t[0],i[3]=t[1],i[4]=n[0],i[5]=n[1];else{var r=this.props[0],s=this.props[1],a=this.props[4],o=this.props[5],l=this.props[12],c=this.props[13];i[0]=e[0]*r+e[1]*a+l,i[1]=e[0]*s+e[1]*o+c,i[2]=t[0]*r+t[1]*a+l,i[3]=t[0]*s+t[1]*o+c,i[4]=n[0]*r+n[1]*a+l,i[5]=n[0]*s+n[1]*o+c}return i}function P(e,t,n){return this.isIdentity()?[e,t,n]:[e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12],e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13],e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]]}function C(e,t){if(this.isIdentity())return e+","+t;var n=this.props;return Math.round(100*(e*n[0]+t*n[4]+n[12]))/100+","+Math.round(100*(e*n[1]+t*n[5]+n[13]))/100}function I(){for(var e=0,t=this.props,n="matrix3d(";e<16;)n+=i(1e4*t[e])/1e4,n+=15===e?")":",",e+=1;return n}function L(e){return e<1e-6&&e>0||e>-1e-6&&e<0?i(1e4*e)/1e4:e}function D(){var e=this.props;return"matrix("+L(e[0])+","+L(e[1])+","+L(e[4])+","+L(e[5])+","+L(e[12])+","+L(e[13])+")"}return function(){this.reset=r,this.rotate=s,this.rotateX=a,this.rotateY=o,this.rotateZ=l,this.skew=h,this.skewFromAxis=u,this.shear=c,this.scale=d,this.setTransform=p,this.translate=f,this.transform=m,this.applyToPoint=b,this.applyToX=x,this.applyToY=S,this.applyToZ=E,this.applyToPointArray=P,this.applyToTriplePoints=A,this.applyToPointStringified=C,this.toCSS=I,this.to2dCSS=D,this.clone=y,this.cloneFromProps=_,this.equals=v,this.inversePoints=M,this.inversePoint=T,this.getInverseMatrix=w,this._t=this.transform,this.isIdentity=g,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(e){return _typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$3(e)}var lottie={},standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";function setLocation(e){setLocationHref(e)}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(e){setSubframeEnabled(e)}function setPrefix(e){setIdPrefix(e)}function loadAnimation(e){return!0===standalone&&(e.animationData=JSON.parse(animationData)),animationManager.loadAnimation(e)}function setQuality(e){if("string"==typeof e)switch(e){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(e)&&e>1&&setDefaultCurveSegments(e);getDefaultCurveSegments()>=50?roundValues(!1):roundValues(!0)}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(e,t){"expressions"===e&&setExpressionsPlugin(t)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var t=queryString.split("&"),n=0;n<t.length;n+=1){var i=t[n].split("=");if(decodeURIComponent(i[0])==e)return decodeURIComponent(i[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.11.0";var queryString="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{"object"!==_typeof$3(exports)&&__webpack_require__.amdO}catch(e){}var ShapeModifiers=function(){var e={},t={};return e.registerModifier=function(e,n){t[e]||(t[e]=n)},e.getModifier=function(e,n,i){return new t[e](n,i)},e}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){if(!this.closed){e.sh.container.addDynamicProperty(e.sh);var t={shape:e.sh,data:e,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&e.setAsAnimated()}},ShapeModifier.prototype.init=function(e,t){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(e,t){this.s=PropertyFactory.getProp(e,t.s,0,.01,this),this.e=PropertyFactory.getProp(e,t.e,0,.01,this),this.o=PropertyFactory.getProp(e,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(e,t,n,i,r){var s=[];t<=1?s.push({s:e,e:t}):e>=1?s.push({s:e-1,e:t-1}):(s.push({s:e,e:1}),s.push({s:0,e:t-1}));var a,o,l=[],c=s.length;for(a=0;a<c;a+=1){var h,u;(o=s[a]).e*r<i||o.s*r>i+n||(h=o.s*r<=i?0:(o.s*r-i)/n,u=o.e*r>=i+n?1:(o.e*r-i)/n,l.push([h,u]))}return l.length||l.push([0,0]),l},TrimModifier.prototype.releasePathsData=function(e){var t,n=e.length;for(t=0;t<n;t+=1)segmentsLengthPool.release(e[t]);return e.length=0,e},TrimModifier.prototype.processShapes=function(e){var t,n,i,r;if(this._mdf||e){var s=this.o.v%360/360;if(s<0&&(s+=1),(t=this.s.v>1?1+s:this.s.v<0?0+s:this.s.v+s)>(n=this.e.v>1?1+s:this.e.v<0?0+s:this.e.v+s)){var a=t;t=n,n=a}t=1e-4*Math.round(1e4*t),n=1e-4*Math.round(1e4*n),this.sValue=t,this.eValue=n}else t=this.sValue,n=this.eValue;var o,l,c,h,u,d=this.shapes.length,p=0;if(n===t)for(r=0;r<d;r+=1)this.shapes[r].localShapeCollection.releaseShapes(),this.shapes[r].shape._mdf=!0,this.shapes[r].shape.paths=this.shapes[r].localShapeCollection,this._mdf&&(this.shapes[r].pathsData.length=0);else if(1===n&&0===t||0===n&&1===t){if(this._mdf)for(r=0;r<d;r+=1)this.shapes[r].pathsData.length=0,this.shapes[r].shape._mdf=!0}else{var f,m,g=[];for(r=0;r<d;r+=1)if((f=this.shapes[r]).shape._mdf||this._mdf||e||2===this.m){if(l=(i=f.shape.paths)._length,u=0,!f.shape._mdf&&f.pathsData.length)u=f.totalShapeLength;else{for(c=this.releasePathsData(f.pathsData),o=0;o<l;o+=1)h=bez.getSegmentsLength(i.shapes[o]),c.push(h),u+=h.totalLength;f.totalShapeLength=u,f.pathsData=c}p+=u,f.shape._mdf=!0}else f.shape.paths=f.localShapeCollection;var v,y=t,_=n,b=0;for(r=d-1;r>=0;r-=1)if((f=this.shapes[r]).shape._mdf){for((m=f.localShapeCollection).releaseShapes(),2===this.m&&d>1?(v=this.calculateShapeEdges(t,n,f.totalShapeLength,b,p),b+=f.totalShapeLength):v=[[y,_]],l=v.length,o=0;o<l;o+=1){y=v[o][0],_=v[o][1],g.length=0,_<=1?g.push({s:f.totalShapeLength*y,e:f.totalShapeLength*_}):y>=1?g.push({s:f.totalShapeLength*(y-1),e:f.totalShapeLength*(_-1)}):(g.push({s:f.totalShapeLength*y,e:f.totalShapeLength}),g.push({s:0,e:f.totalShapeLength*(_-1)}));var x=this.addShapes(f,g[0]);if(g[0].s!==g[0].e){if(g.length>1)if(f.shape.paths.shapes[f.shape.paths._length-1].c){var S=x.pop();this.addPaths(x,m),x=this.addShapes(f,g[1],S)}else this.addPaths(x,m),x=this.addShapes(f,g[1]);this.addPaths(x,m)}}f.shape.paths=m}}},TrimModifier.prototype.addPaths=function(e,t){var n,i=e.length;for(n=0;n<i;n+=1)t.addShape(e[n])},TrimModifier.prototype.addSegment=function(e,t,n,i,r,s,a){r.setXYAt(t[0],t[1],"o",s),r.setXYAt(n[0],n[1],"i",s+1),a&&r.setXYAt(e[0],e[1],"v",s),r.setXYAt(i[0],i[1],"v",s+1)},TrimModifier.prototype.addSegmentFromArray=function(e,t,n,i){t.setXYAt(e[1],e[5],"o",n),t.setXYAt(e[2],e[6],"i",n+1),i&&t.setXYAt(e[0],e[4],"v",n),t.setXYAt(e[3],e[7],"v",n+1)},TrimModifier.prototype.addShapes=function(e,t,n){var i,r,s,a,o,l,c,h,u=e.pathsData,d=e.shape.paths.shapes,p=e.shape.paths._length,f=0,m=[],g=!0;for(n?(o=n._length,h=n._length):(n=shapePool.newElement(),o=0,h=0),m.push(n),i=0;i<p;i+=1){for(l=u[i].lengths,n.c=d[i].c,s=d[i].c?l.length:l.length+1,r=1;r<s;r+=1)if(f+(a=l[r-1]).addedLength<t.s)f+=a.addedLength,n.c=!1;else{if(f>t.e){n.c=!1;break}t.s<=f&&t.e>=f+a.addedLength?(this.addSegment(d[i].v[r-1],d[i].o[r-1],d[i].i[r],d[i].v[r],n,o,g),g=!1):(c=bez.getNewSegment(d[i].v[r-1],d[i].v[r],d[i].o[r-1],d[i].i[r],(t.s-f)/a.addedLength,(t.e-f)/a.addedLength,l[r-1]),this.addSegmentFromArray(c,n,o,g),g=!1,n.c=!1),f+=a.addedLength,o+=1}if(d[i].c&&l.length){if(a=l[r-1],f<=t.e){var v=l[r-1].addedLength;t.s<=f&&t.e>=f+v?(this.addSegment(d[i].v[r-1],d[i].o[r-1],d[i].i[0],d[i].v[0],n,o,g),g=!1):(c=bez.getNewSegment(d[i].v[r-1],d[i].v[0],d[i].o[r-1],d[i].i[0],(t.s-f)/v,(t.e-f)/v,l[r-1]),this.addSegmentFromArray(c,n,o,g),g=!1,n.c=!1)}else n.c=!1;f+=a.addedLength,o+=1}if(n._length&&(n.setXYAt(n.v[h][0],n.v[h][1],"i",h),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),f>t.e)break;i<p-1&&(n=shapePool.newElement(),g=!0,m.push(n),o=0)}return m},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(e,t){var n=t/100,i=[0,0],r=e._length,s=0;for(s=0;s<r;s+=1)i[0]+=e.v[s][0],i[1]+=e.v[s][1];i[0]/=r,i[1]/=r;var a,o,l,c,h,u,d=shapePool.newElement();for(d.c=e.c,s=0;s<r;s+=1)a=e.v[s][0]+(i[0]-e.v[s][0])*n,o=e.v[s][1]+(i[1]-e.v[s][1])*n,l=e.o[s][0]+(i[0]-e.o[s][0])*-n,c=e.o[s][1]+(i[1]-e.o[s][1])*-n,h=e.i[s][0]+(i[0]-e.i[s][0])*-n,u=e.i[s][1]+(i[1]-e.i[s][1])*-n,d.setTripleAt(a,o,l,c,h,u,s);return d},PuckerAndBloatModifier.prototype.processShapes=function(e){var t,n,i,r,s,a,o=this.shapes.length,l=this.amount.v;if(0!==l)for(n=0;n<o;n+=1){if(a=(s=this.shapes[n]).localShapeCollection,s.shape._mdf||this._mdf||e)for(a.releaseShapes(),s.shape._mdf=!0,t=s.shape.paths.shapes,r=s.shape.paths._length,i=0;i<r;i+=1)a.addShape(this.processPath(t[i],l));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var e=[0,0];function t(e,t,n){if(this.elem=e,this.frameId=-1,this.propType="transform",this.data=t,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(n||e),t.p&&t.p.s?(this.px=PropertyFactory.getProp(e,t.p.x,0,0,this),this.py=PropertyFactory.getProp(e,t.p.y,0,0,this),t.p.z&&(this.pz=PropertyFactory.getProp(e,t.p.z,0,0,this))):this.p=PropertyFactory.getProp(e,t.p||{k:[0,0,0]},1,0,this),t.rx){if(this.rx=PropertyFactory.getProp(e,t.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(e,t.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(e,t.rz,0,degToRads,this),t.or.k[0].ti){var i,r=t.or.k.length;for(i=0;i<r;i+=1)t.or.k[i].to=null,t.or.k[i].ti=null}this.or=PropertyFactory.getProp(e,t.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(e,t.r||{k:0},0,degToRads,this);t.sk&&(this.sk=PropertyFactory.getProp(e,t.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(e,t.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(e,t.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(e,t.s||{k:[100,100,100]},1,.01,this),t.o?this.o=PropertyFactory.getProp(e,t.o,0,.01,e):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return t.prototype={applyToMatrix:function(e){var t=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||t,this.a&&e.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&e.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&e.skewFromAxis(-this.sk.v,this.sa.v),this.r?e.rotate(-this.r.v):e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?e.translate(this.px.v,this.py.v,-this.pz.v):e.translate(this.px.v,this.py.v,0):e.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(t){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||t){var n;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var i,r;if(n=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(i=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/n,0),r=this.p.getValueAtTime(this.p.keyframes[0].t/n,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(i=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/n,0),r=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/n,0)):(i=this.p.pv,r=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/n,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){i=[],r=[];var s=this.px,a=this.py;s._caching.lastFrame+s.offsetTime<=s.keyframes[0].t?(i[0]=s.getValueAtTime((s.keyframes[0].t+.01)/n,0),i[1]=a.getValueAtTime((a.keyframes[0].t+.01)/n,0),r[0]=s.getValueAtTime(s.keyframes[0].t/n,0),r[1]=a.getValueAtTime(a.keyframes[0].t/n,0)):s._caching.lastFrame+s.offsetTime>=s.keyframes[s.keyframes.length-1].t?(i[0]=s.getValueAtTime(s.keyframes[s.keyframes.length-1].t/n,0),i[1]=a.getValueAtTime(a.keyframes[a.keyframes.length-1].t/n,0),r[0]=s.getValueAtTime((s.keyframes[s.keyframes.length-1].t-.01)/n,0),r[1]=a.getValueAtTime((a.keyframes[a.keyframes.length-1].t-.01)/n,0)):(i=[s.pv,a.pv],r[0]=s.getValueAtTime((s._caching.lastFrame+s.offsetTime-.01)/n,s.offsetTime),r[1]=a.getValueAtTime((a._caching.lastFrame+a.offsetTime-.01)/n,a.offsetTime))}else i=r=e;this.v.rotate(-Math.atan2(i[1]-r[1],i[0]-r[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],t),t.prototype.addDynamicProperty=function(e){this._addDynamicProperty(e),this.elem.addDynamicProperty(e),this._isDirty=!0},t.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(e,n,i){return new t(e,n,i)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(e,t){return 1e5*Math.abs(e-t)<=Math.min(Math.abs(e),Math.abs(t))}function floatZero(e){return Math.abs(e)<=1e-5}function lerp(e,t,n){return e*(1-n)+t*n}function lerpPoint(e,t,n){return[lerp(e[0],t[0],n),lerp(e[1],t[1],n)]}function quadRoots(e,t,n){if(0===e)return[];var i=t*t-4*e*n;if(i<0)return[];var r=-t/(2*e);if(0===i)return[r];var s=Math.sqrt(i)/(2*e);return[r-s,r+s]}function polynomialCoefficients(e,t,n,i){return[3*t-e-3*n+i,3*e-6*t+3*n,-3*e+3*t,e]}function singlePoint(e){return new PolynomialBezier(e,e,e,e,!1)}function PolynomialBezier(e,t,n,i,r){r&&pointEqual(e,t)&&(t=lerpPoint(e,i,1/3)),r&&pointEqual(n,i)&&(n=lerpPoint(e,i,2/3));var s=polynomialCoefficients(e[0],t[0],n[0],i[0]),a=polynomialCoefficients(e[1],t[1],n[1],i[1]);this.a=[s[0],a[0]],this.b=[s[1],a[1]],this.c=[s[2],a[2]],this.d=[s[3],a[3]],this.points=[e,t,n,i]}function extrema(e,t){var n=e.points[0][t],i=e.points[e.points.length-1][t];if(n>i){var r=i;i=n,n=r}for(var s=quadRoots(3*e.a[t],2*e.b[t],e.c[t]),a=0;a<s.length;a+=1)if(s[a]>0&&s[a]<1){var o=e.point(s[a])[t];o<n?n=o:o>i&&(i=o)}return{min:n,max:i}}function intersectData(e,t,n){var i=e.boundingBox();return{cx:i.cx,cy:i.cy,width:i.width,height:i.height,bez:e,t:(t+n)/2,t1:t,t2:n}}function splitData(e){var t=e.bez.split(.5);return[intersectData(t[0],e.t1,e.t),intersectData(t[1],e.t,e.t2)]}function boxIntersect(e,t){return 2*Math.abs(e.cx-t.cx)<e.width+t.width&&2*Math.abs(e.cy-t.cy)<e.height+t.height}function intersectsImpl(e,t,n,i,r,s){if(boxIntersect(e,t))if(n>=s||e.width<=i&&e.height<=i&&t.width<=i&&t.height<=i)r.push([e.t,t.t]);else{var a=splitData(e),o=splitData(t);intersectsImpl(a[0],o[0],n+1,i,r,s),intersectsImpl(a[0],o[1],n+1,i,r,s),intersectsImpl(a[1],o[0],n+1,i,r,s),intersectsImpl(a[1],o[1],n+1,i,r,s)}}function crossProduct(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function lineIntersection(e,t,n,i){var r=[e[0],e[1],1],s=[t[0],t[1],1],a=[n[0],n[1],1],o=[i[0],i[1],1],l=crossProduct(crossProduct(r,s),crossProduct(a,o));return floatZero(l[2])?null:[l[0]/l[2],l[1]/l[2]]}function polarOffset(e,t,n){return[e[0]+Math.cos(t)*n,e[1]-Math.sin(t)*n]}function pointDistance(e,t){return Math.hypot(e[0]-t[0],e[1]-t[1])}function pointEqual(e,t){return floatEqual(e[0],t[0])&&floatEqual(e[1],t[1])}function ZigZagModifier(){}function setPoint(e,t,n,i,r,s,a){var o=n-Math.PI/2,l=n+Math.PI/2,c=t[0]+Math.cos(n)*i*r,h=t[1]-Math.sin(n)*i*r;e.setTripleAt(c,h,c+Math.cos(o)*s,h-Math.sin(o)*s,c+Math.cos(l)*a,h-Math.sin(l)*a,e.length())}function getPerpendicularVector(e,t){var n=[t[0]-e[0],t[1]-e[1]],i=.5*-Math.PI;return[Math.cos(i)*n[0]-Math.sin(i)*n[1],Math.sin(i)*n[0]+Math.cos(i)*n[1]]}function getProjectingAngle(e,t){var n=0===t?e.length()-1:t-1,i=(t+1)%e.length(),r=getPerpendicularVector(e.v[n],e.v[i]);return Math.atan2(0,1)-Math.atan2(r[1],r[0])}function zigZagCorner(e,t,n,i,r,s,a){var o=getProjectingAngle(t,n),l=t.v[n%t._length],c=t.v[0===n?t._length-1:n-1],h=t.v[(n+1)%t._length],u=2===s?Math.sqrt(Math.pow(l[0]-c[0],2)+Math.pow(l[1]-c[1],2)):0,d=2===s?Math.sqrt(Math.pow(l[0]-h[0],2)+Math.pow(l[1]-h[1],2)):0;setPoint(e,t.v[n%t._length],o,a,i,d/(2*(r+1)),u/(2*(r+1)),s)}function zigZagSegment(e,t,n,i,r,s){for(var a=0;a<i;a+=1){var o=(a+1)/(i+1),l=2===r?Math.sqrt(Math.pow(t.points[3][0]-t.points[0][0],2)+Math.pow(t.points[3][1]-t.points[0][1],2)):0,c=t.normalAngle(o);setPoint(e,t.point(o),c,s,n,l/(2*(i+1)),l/(2*(i+1)),r),s=-s}return s}function linearOffset(e,t,n){var i=Math.atan2(t[0]-e[0],t[1]-e[1]);return[polarOffset(e,i,n),polarOffset(t,i,n)]}function offsetSegment(e,t){var n,i,r,s,a,o,l;n=(l=linearOffset(e.points[0],e.points[1],t))[0],i=l[1],r=(l=linearOffset(e.points[1],e.points[2],t))[0],s=l[1],a=(l=linearOffset(e.points[2],e.points[3],t))[0],o=l[1];var c=lineIntersection(n,i,r,s);null===c&&(c=i);var h=lineIntersection(a,o,r,s);return null===h&&(h=a),new PolynomialBezier(n,c,h,o)}function joinLines(e,t,n,i,r){var s=t.points[3],a=n.points[0];if(3===i)return s;if(pointEqual(s,a))return s;if(2===i){var o=-t.tangentAngle(1),l=-n.tangentAngle(0)+Math.PI,c=lineIntersection(s,polarOffset(s,o+Math.PI/2,100),a,polarOffset(a,o+Math.PI/2,100)),h=c?pointDistance(c,s):pointDistance(s,a)/2,u=polarOffset(s,o,2*h*roundCorner);return e.setXYAt(u[0],u[1],"o",e.length()-1),u=polarOffset(a,l,2*h*roundCorner),e.setTripleAt(a[0],a[1],a[0],a[1],u[0],u[1],e.length()),a}var d=lineIntersection(pointEqual(s,t.points[2])?t.points[0]:t.points[2],s,a,pointEqual(a,n.points[1])?n.points[3]:n.points[1]);return d&&pointDistance(d,s)<r?(e.setTripleAt(d[0],d[1],d[0],d[1],d[0],d[1],e.length()),d):s}function getIntersection(e,t){var n=e.intersections(t);return n.length&&floatEqual(n[0][0],1)&&n.shift(),n.length?n[0]:null}function pruneSegmentIntersection(e,t){var n=e.slice(),i=t.slice(),r=getIntersection(e[e.length-1],t[0]);return r&&(n[e.length-1]=e[e.length-1].split(r[0])[0],i[0]=t[0].split(r[1])[1]),e.length>1&&t.length>1&&(r=getIntersection(e[0],t[t.length-1]))?[[e[0].split(r[0])[0]],[t[t.length-1].split(r[1])[1]]]:[n,i]}function pruneIntersections(e){for(var t,n=1;n<e.length;n+=1)t=pruneSegmentIntersection(e[n-1],e[n]),e[n-1]=t[0],e[n]=t[1];return e.length>1&&(t=pruneSegmentIntersection(e[e.length-1],e[0]),e[e.length-1]=t[0],e[0]=t[1]),e}function offsetSegmentSplit(e,t){var n,i,r,s,a=e.inflectionPoints();if(0===a.length)return[offsetSegment(e,t)];if(1===a.length||floatEqual(a[1],1))return n=(r=e.split(a[0]))[0],i=r[1],[offsetSegment(n,t),offsetSegment(i,t)];n=(r=e.split(a[0]))[0];var o=(a[1]-a[0])/(1-a[0]);return s=(r=r[1].split(o))[0],i=r[1],[offsetSegment(n,t),offsetSegment(s,t),offsetSegment(i,t)]}function OffsetPathModifier(){}function getFontProperties(e){for(var t=e.fStyle?e.fStyle.split(" "):[],n="normal",i="normal",r=t.length,s=0;s<r;s+=1)switch(t[s].toLowerCase()){case"italic":i="italic";break;case"bold":n="700";break;case"black":n="900";break;case"medium":n="500";break;case"regular":case"normal":n="400";break;case"light":case"thin":n="200"}return{style:i,weight:e.fWeight||n}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,t.c,0,null,this),this.o=PropertyFactory.getProp(e,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(e,t.tr,this),this.so=PropertyFactory.getProp(e,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(e,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,t,n,i,r,s){var a=s?-1:1,o=i.s.v[0]+(1-i.s.v[0])*(1-r),l=i.s.v[1]+(1-i.s.v[1])*(1-r);e.translate(i.p.v[0]*a*r,i.p.v[1]*a*r,i.p.v[2]),t.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),t.rotate(-i.r.v*a*r),t.translate(i.a.v[0],i.a.v[1],i.a.v[2]),n.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),n.scale(s?1/o:o,s?1/l:l),n.translate(i.a.v[0],i.a.v[1],i.a.v[2])},RepeaterModifier.prototype.init=function(e,t,n,i){for(this.elem=e,this.arr=t,this.pos=n,this.elemsData=i,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t[n]);n>0;)n-=1,this._elements.unshift(t[n]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t]._processed=!1,"gr"===e[t].ty&&this.resetElements(e[t].it)},RepeaterModifier.prototype.cloneElements=function(e){var t=JSON.parse(JSON.stringify(e));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(e,t){var n,i=e.length;for(n=0;n<i;n+=1)e[n]._render=t,"gr"===e[n].ty&&this.changeGroupRender(e[n].it,t)},RepeaterModifier.prototype.processShapes=function(e){var t,n,i,r,s,a=!1;if(this._mdf||e){var o,l=Math.ceil(this.c.v);if(this._groups.length<l){for(;this._groups.length<l;){var c={it:this.cloneElements(this._elements),ty:"gr"};c.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,c),this._groups.splice(0,0,c),this._currentCopies+=1}this.elem.reloadShapes(),a=!0}for(s=0,i=0;i<=this._groups.length-1;i+=1){if(o=s<l,this._groups[i]._render=o,this.changeGroupRender(this._groups[i].it,o),!o){var h=this.elemsData[i].it,u=h[h.length-1];0!==u.transform.op.v?(u.transform.op._mdf=!0,u.transform.op.v=0):u.transform.op._mdf=!1}s+=1}this._currentCopies=l;var d=this.o.v,p=d%1,f=d>0?Math.floor(d):Math.ceil(d),m=this.pMatrix.props,g=this.rMatrix.props,v=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var y,_,b=0;if(d>0){for(;b<f;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),b+=1;p&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,p,!1),b+=p)}else if(d<0){for(;b>f;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),b-=1;p&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-p,!0),b-=p)}for(i=1===this.data.m?0:this._currentCopies-1,r=1===this.data.m?1:-1,s=this._currentCopies;s;){if(_=(n=(t=this.elemsData[i].it)[t.length-1].transform.mProps.v.props).length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(i/(this._currentCopies-1)),0!==b){for((0!==i&&1===r||i!==this._currentCopies-1&&-1===r)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]),this.matrix.transform(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]),this.matrix.transform(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]),y=0;y<_;y+=1)n[y]=this.matrix.props[y];this.matrix.reset()}else for(this.matrix.reset(),y=0;y<_;y+=1)n[y]=this.matrix.props[y];b+=1,s-=1,i+=r}}else for(s=this._currentCopies,i=0,r=1;s;)n=(t=this.elemsData[i].it)[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,s-=1,i+=r;return a},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(e,t){var n,i=shapePool.newElement();i.c=e.c;var r,s,a,o,l,c,h,u,d,p,f,m,g=e._length,v=0;for(n=0;n<g;n+=1)r=e.v[n],a=e.o[n],s=e.i[n],r[0]===a[0]&&r[1]===a[1]&&r[0]===s[0]&&r[1]===s[1]?0!==n&&n!==g-1||e.c?(o=0===n?e.v[g-1]:e.v[n-1],c=(l=Math.sqrt(Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2)))?Math.min(l/2,t)/l:0,h=f=r[0]+(o[0]-r[0])*c,u=m=r[1]-(r[1]-o[1])*c,d=h-(h-r[0])*roundCorner,p=u-(u-r[1])*roundCorner,i.setTripleAt(h,u,d,p,f,m,v),v+=1,o=n===g-1?e.v[0]:e.v[n+1],c=(l=Math.sqrt(Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2)))?Math.min(l/2,t)/l:0,h=d=r[0]+(o[0]-r[0])*c,u=p=r[1]+(o[1]-r[1])*c,f=h-(h-r[0])*roundCorner,m=u-(u-r[1])*roundCorner,i.setTripleAt(h,u,d,p,f,m,v),v+=1):(i.setTripleAt(r[0],r[1],a[0],a[1],s[0],s[1],v),v+=1):(i.setTripleAt(e.v[n][0],e.v[n][1],e.o[n][0],e.o[n][1],e.i[n][0],e.i[n][1],v),v+=1);return i},RoundCornersModifier.prototype.processShapes=function(e){var t,n,i,r,s,a,o=this.shapes.length,l=this.rd.v;if(0!==l)for(n=0;n<o;n+=1){if(a=(s=this.shapes[n]).localShapeCollection,s.shape._mdf||this._mdf||e)for(a.releaseShapes(),s.shape._mdf=!0,t=s.shape.paths.shapes,r=s.shape.paths._length,i=0;i<r;i+=1)a.addShape(this.processPath(t[i],l));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(e){return[((this.a[0]*e+this.b[0])*e+this.c[0])*e+this.d[0],((this.a[1]*e+this.b[1])*e+this.c[1])*e+this.d[1]]},PolynomialBezier.prototype.derivative=function(e){return[(3*e*this.a[0]+2*this.b[0])*e+this.c[0],(3*e*this.a[1]+2*this.b[1])*e+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(e){var t=this.derivative(e);return Math.atan2(t[1],t[0])},PolynomialBezier.prototype.normalAngle=function(e){var t=this.derivative(e);return Math.atan2(t[0],t[1])},PolynomialBezier.prototype.inflectionPoints=function(){var e=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(e))return[];var t=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/e,n=t*t-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/e;if(n<0)return[];var i=Math.sqrt(n);return floatZero(i)?i>0&&i<1?[t]:[]:[t-i,t+i].filter((function(e){return e>0&&e<1}))},PolynomialBezier.prototype.split=function(e){if(e<=0)return[singlePoint(this.points[0]),this];if(e>=1)return[this,singlePoint(this.points[this.points.length-1])];var t=lerpPoint(this.points[0],this.points[1],e),n=lerpPoint(this.points[1],this.points[2],e),i=lerpPoint(this.points[2],this.points[3],e),r=lerpPoint(t,n,e),s=lerpPoint(n,i,e),a=lerpPoint(r,s,e);return[new PolynomialBezier(this.points[0],t,r,a,!0),new PolynomialBezier(a,s,i,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var e=this.bounds();return{left:e.x.min,right:e.x.max,top:e.y.min,bottom:e.y.max,width:e.x.max-e.x.min,height:e.y.max-e.y.min,cx:(e.x.max+e.x.min)/2,cy:(e.y.max+e.y.min)/2}},PolynomialBezier.prototype.intersections=function(e,t,n){void 0===t&&(t=2),void 0===n&&(n=7);var i=[];return intersectsImpl(intersectData(this,0,1),intersectData(e,0,1),0,t,i,n),i},PolynomialBezier.shapeSegment=function(e,t){var n=(t+1)%e.length();return new PolynomialBezier(e.v[t],e.o[t],e.i[n],e.v[n],!0)},PolynomialBezier.shapeSegmentInverted=function(e,t){var n=(t+1)%e.length();return new PolynomialBezier(e.v[n],e.i[n],e.o[t],e.v[t],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(e,t.s,0,null,this),this.frequency=PropertyFactory.getProp(e,t.r,0,null,this),this.pointsType=PropertyFactory.getProp(e,t.pt,0,null,this),this._isAnimated=0!==this.amplitude.effectsSequence.length||0!==this.frequency.effectsSequence.length||0!==this.pointsType.effectsSequence.length},ZigZagModifier.prototype.processPath=function(e,t,n,i){var r=e._length,s=shapePool.newElement();if(s.c=e.c,e.c||(r-=1),0===r)return s;var a=-1,o=PolynomialBezier.shapeSegment(e,0);zigZagCorner(s,e,0,t,n,i,a);for(var l=0;l<r;l+=1)a=zigZagSegment(s,o,t,n,i,-a),o=l!==r-1||e.c?PolynomialBezier.shapeSegment(e,(l+1)%r):null,zigZagCorner(s,e,l+1,t,n,i,a);return s},ZigZagModifier.prototype.processShapes=function(e){var t,n,i,r,s,a,o=this.shapes.length,l=this.amplitude.v,c=Math.max(0,Math.round(this.frequency.v)),h=this.pointsType.v;if(0!==l)for(n=0;n<o;n+=1){if(a=(s=this.shapes[n]).localShapeCollection,s.shape._mdf||this._mdf||e)for(a.releaseShapes(),s.shape._mdf=!0,t=s.shape.paths.shapes,r=s.shape.paths._length,i=0;i<r;i+=1)a.addShape(this.processPath(t[i],l,c,h));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this.miterLimit=PropertyFactory.getProp(e,t.ml,0,null,this),this.lineJoin=t.lj,this._isAnimated=0!==this.amount.effectsSequence.length},OffsetPathModifier.prototype.processPath=function(e,t,n,i){var r=shapePool.newElement();r.c=e.c;var s,a,o,l=e.length();e.c||(l-=1);var c=[];for(s=0;s<l;s+=1)o=PolynomialBezier.shapeSegment(e,s),c.push(offsetSegmentSplit(o,t));if(!e.c)for(s=l-1;s>=0;s-=1)o=PolynomialBezier.shapeSegmentInverted(e,s),c.push(offsetSegmentSplit(o,t));c=pruneIntersections(c);var h=null,u=null;for(s=0;s<c.length;s+=1){var d=c[s];for(u&&(h=joinLines(r,u,d[0],n,i)),u=d[d.length-1],a=0;a<d.length;a+=1)o=d[a],h&&pointEqual(o.points[0],h)?r.setXYAt(o.points[1][0],o.points[1][1],"o",r.length()-1):r.setTripleAt(o.points[0][0],o.points[0][1],o.points[1][0],o.points[1][1],o.points[0][0],o.points[0][1],r.length()),r.setTripleAt(o.points[3][0],o.points[3][1],o.points[3][0],o.points[3][1],o.points[2][0],o.points[2][1],r.length()),h=o.points[3]}return c.length&&joinLines(r,u,c[0][0],n,i),r},OffsetPathModifier.prototype.processShapes=function(e){var t,n,i,r,s,a,o=this.shapes.length,l=this.amount.v,c=this.miterLimit.v,h=this.lineJoin;if(0!==l)for(n=0;n<o;n+=1){if(a=(s=this.shapes[n]).localShapeCollection,s.shape._mdf||this._mdf||e)for(a.releaseShapes(),s.shape._mdf=!0,t=s.shape.paths.shapes,r=s.shape.paths._length,i=0;i<r;i+=1)a.addShape(this.processPath(t[i],l,h,c));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var e={w:0,size:0,shapes:[],data:{shapes:[]}},t=[];t=t.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var n=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],i=[65039,8205];function r(e,t){var n=createTag("span");n.setAttribute("aria-hidden",!0),n.style.fontFamily=t;var i=createTag("span");i.innerText="giItT1WQy@!-/#",n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.style.fontSize="300px",n.style.fontVariant="normal",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="0",n.appendChild(i),document.body.appendChild(n);var r=i.offsetWidth;return i.style.fontFamily=function(e){var t,n=e.split(","),i=n.length,r=[];for(t=0;t<i;t+=1)"sans-serif"!==n[t]&&"monospace"!==n[t]&&r.push(n[t]);return r.join(",")}(e)+", "+t,{node:i,w:r,parent:n}}function s(e,t){var n,i=document.body&&t?"svg":"canvas",r=getFontProperties(e);if("svg"===i){var s=createNS("text");s.style.fontSize="100px",s.setAttribute("font-family",e.fFamily),s.setAttribute("font-style",r.style),s.setAttribute("font-weight",r.weight),s.textContent="1",e.fClass?(s.style.fontFamily="inherit",s.setAttribute("class",e.fClass)):s.style.fontFamily=e.fFamily,t.appendChild(s),n=s}else{var a=new OffscreenCanvas(500,500).getContext("2d");a.font=r.style+" "+r.weight+" 100px "+e.fFamily,n=a}return{measureText:function(e){return"svg"===i?(n.textContent=e,n.getComputedTextLength()):n.measureText(e).width}}}var a=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};a.isModifier=function(e,t){var i=e.toString(16)+t.toString(16);return-1!==n.indexOf(i)},a.isZeroWidthJoiner=function(e,t){return t?e===i[0]&&t===i[1]:e===i[1]},a.isCombinedCharacter=function(e){return-1!==t.indexOf(e)};var o={addChars:function(e){if(e){var t;this.chars||(this.chars=[]);var n,i,r=e.length,s=this.chars.length;for(t=0;t<r;t+=1){for(n=0,i=!1;n<s;)this.chars[n].style===e[t].style&&this.chars[n].fFamily===e[t].fFamily&&this.chars[n].ch===e[t].ch&&(i=!0),n+=1;i||(this.chars.push(e[t]),s+=1)}}},addFonts:function(e,t){if(e){if(this.chars)return this.isLoaded=!0,void(this.fonts=e.list);if(!document.body)return this.isLoaded=!0,e.list.forEach((function(e){e.helper=s(e),e.cache={}})),void(this.fonts=e.list);var n,i=e.list,a=i.length,o=a;for(n=0;n<a;n+=1){var l,c,h=!0;if(i[n].loaded=!1,i[n].monoCase=r(i[n].fFamily,"monospace"),i[n].sansCase=r(i[n].fFamily,"sans-serif"),i[n].fPath){if("p"===i[n].fOrigin||3===i[n].origin){if((l=document.querySelectorAll('style[f-forigin="p"][f-family="'+i[n].fFamily+'"], style[f-origin="3"][f-family="'+i[n].fFamily+'"]')).length>0&&(h=!1),h){var u=createTag("style");u.setAttribute("f-forigin",i[n].fOrigin),u.setAttribute("f-origin",i[n].origin),u.setAttribute("f-family",i[n].fFamily),u.type="text/css",u.innerText="@font-face {font-family: "+i[n].fFamily+"; font-style: normal; src: url('"+i[n].fPath+"');}",t.appendChild(u)}}else if("g"===i[n].fOrigin||1===i[n].origin){for(l=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),c=0;c<l.length;c+=1)-1!==l[c].href.indexOf(i[n].fPath)&&(h=!1);if(h){var d=createTag("link");d.setAttribute("f-forigin",i[n].fOrigin),d.setAttribute("f-origin",i[n].origin),d.type="text/css",d.rel="stylesheet",d.href=i[n].fPath,document.body.appendChild(d)}}else if("t"===i[n].fOrigin||2===i[n].origin){for(l=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),c=0;c<l.length;c+=1)i[n].fPath===l[c].src&&(h=!1);if(h){var p=createTag("link");p.setAttribute("f-forigin",i[n].fOrigin),p.setAttribute("f-origin",i[n].origin),p.setAttribute("rel","stylesheet"),p.setAttribute("href",i[n].fPath),t.appendChild(p)}}}else i[n].loaded=!0,o-=1;i[n].helper=s(i[n],t),i[n].cache={},this.fonts.push(i[n])}0===o?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(t,n,i){for(var r=0,s=this.chars.length;r<s;){if(this.chars[r].ch===t&&this.chars[r].style===n&&this.chars[r].fFamily===i)return this.chars[r];r+=1}return("string"==typeof t&&13!==t.charCodeAt(0)||!t)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",t,n,i)),e},getFontByName:function(e){for(var t=0,n=this.fonts.length;t<n;){if(this.fonts[t].fName===e)return this.fonts[t];t+=1}return this.fonts[0]},measureText:function(e,t,n){var i=this.getFontByName(t),r=e.charCodeAt(0);if(!i.cache[r+1]){var s=i.helper;if(" "===e){var a=s.measureText("|"+e+"|"),o=s.measureText("||");i.cache[r+1]=(a-o)/100}else i.cache[r+1]=s.measureText(e)/100}return i.cache[r+1]*n},checkLoadedFonts:function(){var e,t,n,i=this.fonts.length,r=i;for(e=0;e<i;e+=1)this.fonts[e].loaded?r-=1:"n"===this.fonts[e].fOrigin||0===this.fonts[e].origin?this.fonts[e].loaded=!0:(t=this.fonts[e].monoCase.node,n=this.fonts[e].monoCase.w,t.offsetWidth!==n?(r-=1,this.fonts[e].loaded=!0):(t=this.fonts[e].sansCase.node,n=this.fonts[e].sansCase.w,t.offsetWidth!==n&&(r-=1,this.fonts[e].loaded=!0)),this.fonts[e].loaded&&(this.fonts[e].sansCase.parent.parentNode.removeChild(this.fonts[e].sansCase.parent),this.fonts[e].monoCase.parent.parentNode.removeChild(this.fonts[e].monoCase.parent)));0!==r&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}};return a.prototype=o,a}();function SlotManager(e){this.animationData=e}function slotFactory(e){return new SlotManager(e)}function RenderableElement(){}SlotManager.prototype.getProp=function(e){return this.animationData.slots&&this.animationData.slots[e.sid]?Object.assign(e,this.animationData.slots[e.sid].p):e},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){-1===this.renderableComponents.indexOf(e)&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){-1!==this.renderableComponents.indexOf(e)&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,t=this.renderableComponents.length;for(e=0;e<t;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(e){return blendModeEnums[e]||""}),blendModeEnums;function SliderEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function AngleEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function ColorEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function PointEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function LayerIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function MaskIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function CheckboxEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(e,t){var n,i=e.ef||[];this.effectElements=[];var r,s=i.length;for(n=0;n<s;n+=1)r=new GroupEffect(i[n],t),this.effectElements.push(r)}function GroupEffect(e,t){this.init(e,t)}function BaseElement(){}function FrameElement(){}function FootageElement(e,t,n){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.footageData=t.imageLoader.getAsset(this.assetData),this.initBaseData(e,t,n)}function AudioElement(e,t,n){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.initBaseData(e,t,n),this._isPlaying=!1,this._canPlay=!1;var i=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(i),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,e.au&&e.au.lv?e.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}function TransformElement(){}function MaskElement(e,t,n){this.data=e,this.element=t,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var i,r,s=this.globalData.defs,a=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(a),this.solidPath="";var o,l,c,h,u,d,p=this.masksProperties,f=0,m=[],g=createElementID(),v="clipPath",y="clip-path";for(i=0;i<a;i+=1)if(("a"!==p[i].mode&&"n"!==p[i].mode||p[i].inv||100!==p[i].o.k||p[i].o.x)&&(v="mask",y="mask"),"s"!==p[i].mode&&"i"!==p[i].mode||0!==f?c=null:((c=createNS("rect")).setAttribute("fill","#ffffff"),c.setAttribute("width",this.element.comp.data.w||0),c.setAttribute("height",this.element.comp.data.h||0),m.push(c)),r=createNS("path"),"n"===p[i].mode)this.viewData[i]={op:PropertyFactory.getProp(this.element,p[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[i],3),elem:r,lastPath:""},s.appendChild(r);else{var _;if(f+=1,r.setAttribute("fill","s"===p[i].mode?"#000000":"#ffffff"),r.setAttribute("clip-rule","nonzero"),0!==p[i].x.k?(v="mask",y="mask",d=PropertyFactory.getProp(this.element,p[i].x,0,null,this.element),_=createElementID(),(h=createNS("filter")).setAttribute("id",_),(u=createNS("feMorphology")).setAttribute("operator","erode"),u.setAttribute("in","SourceGraphic"),u.setAttribute("radius","0"),h.appendChild(u),s.appendChild(h),r.setAttribute("stroke","s"===p[i].mode?"#000000":"#ffffff")):(u=null,d=null),this.storedData[i]={elem:r,x:d,expan:u,lastPath:"",lastOperator:"",filterId:_,lastRadius:0},"i"===p[i].mode){l=m.length;var b=createNS("g");for(o=0;o<l;o+=1)b.appendChild(m[o]);var x=createNS("mask");x.setAttribute("mask-type","alpha"),x.setAttribute("id",g+"_"+f),x.appendChild(r),s.appendChild(x),b.setAttribute("mask","url("+getLocationHref()+"#"+g+"_"+f+")"),m.length=0,m.push(b)}else m.push(r);p[i].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[i]={elem:r,lastPath:"",op:PropertyFactory.getProp(this.element,p[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[i],3),invRect:c},this.viewData[i].prop.k||this.drawPath(p[i],this.viewData[i].prop.v,this.viewData[i])}for(this.maskElement=createNS(v),a=m.length,i=0;i<a;i+=1)this.maskElement.appendChild(m[i]);f>0&&(this.maskElement.setAttribute("id",g),this.element.maskedElement.setAttribute(y,"url("+getLocationHref()+"#"+g+")"),s.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(e,t){var n;this.data=e,this.effectElements=[],this.initDynamicPropertyContainer(t);var i,r=this.data.ef.length,s=this.data.ef;for(n=0;n<r;n+=1){switch(i=null,s[n].ty){case 0:i=new SliderEffect(s[n],t,this);break;case 1:i=new AngleEffect(s[n],t,this);break;case 2:i=new ColorEffect(s[n],t,this);break;case 3:i=new PointEffect(s[n],t,this);break;case 4:case 7:i=new CheckboxEffect(s[n],t,this);break;case 10:i=new LayerIndexEffect(s[n],t,this);break;case 11:i=new MaskIndexEffect(s[n],t,this);break;case 5:i=new EffectsManager(s[n],t,this);break;default:i=new NoValueEffect(s[n],t,this)}i&&this.effectElements.push(i)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;e<t;){if("n"!==this.data.masksProperties[e].mode&&!1!==this.data.masksProperties[e].cl)return!0;e+=1}return!1},initExpressions:function(){var e=getExpressionInterfaces();if(e){var t=e("layer"),n=e("effects"),i=e("shape"),r=e("text"),s=e("comp");this.layerInterface=t(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var a=n.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(a),0===this.data.ty||this.data.xt?this.compInterface=s(this):4===this.data.ty?(this.layerInterface.shapeInterface=i(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=r(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var e=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=e},initBaseData:function(e,t,n){this.globalData=t,this.comp=n,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,t){var n,i=this.dynamicProperties.length;for(n=0;n<i;n+=1)(t||this._isParent&&"transform"===this.dynamicProperties[n].propType)&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&this.dynamicProperties.push(e)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var e=getExpressionInterfaces();if(e){var t=e("footage");this.layerInterface=t(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(e){if(this.prepareRenderableFrame(e,!0),this.prepareProperties(e,!0),this.tm._placeholder)this._currentTime=e/this.data.sr;else{var t=this.tm.v;this._currentTime=t}this._volume=this.lv.v[0];var n=this._volume*this._volumeMultiplier;this._previousVolume!==n&&(this._previousVolume=n,this.audio.volume(n))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(e){this.audio.rate(e)},AudioElement.prototype.volume=function(e){this._volumeMultiplier=e,this._previousVolume=e*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(e){var t,n,i=this.layers.length;for(this.completeLayers=!0,t=i-1;t>=0;t-=1)this.elements[t]||(n=this.layers[t]).ip-n.st<=e-this.layers[t].st&&n.op-n.st>e-this.layers[t].st&&this.buildItem(t),this.completeLayers=!!this.elements[t]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:default:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 6:return this.createAudio(e);case 13:return this.createCamera(e);case 15:return this.createFootage(e)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(e){return new AudioElement(e,this.globalData,this)},BaseRenderer.prototype.createFootage=function(e){return new FootageElement(e,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){var t;this.completeLayers=!1;var n,i=e.length,r=this.layers.length;for(t=0;t<i;t+=1)for(n=0;n<r;){if(this.layers[n].id===e[t].id){this.layers[n]=e[t];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,t,n){for(var i=this.elements,r=this.layers,s=0,a=r.length;s<a;)r[s].ind==t&&(i[s]&&!0!==i[s]?(n.push(i[s]),i[s].setAsParent(),void 0!==r[s].parent?this.buildElementParenting(e,r[s].parent,n):e.setHierarchy(n)):(this.buildItem(s),this.addPendingElement(e))),s+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(e){var t,n=e.length;for(t=0;t<n;t+=1)if(e[t].xt){var i=this.createComp(e[t]);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},BaseRenderer.prototype.getElementById=function(e){var t,n=this.elements.length;for(t=0;t<n;t+=1)if(this.elements[t].data.ind===e)return this.elements[t];return null},BaseRenderer.prototype.getElementByPath=function(e){var t,n=e.shift();if("number"==typeof n)t=this.elements[n];else{var i,r=this.elements.length;for(i=0;i<r;i+=1)if(this.elements[i].data.nm===n){t=this.elements[i];break}}return 0===e.length?t:t.getElementByPath(e)},BaseRenderer.prototype.setupGlobalData=function(e,t){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(e),this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,t=this.finalTransform.mat,n=0,i=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;n<i;){if(this.hierarchy[n].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}n+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,t.cloneFromProps(e),n=0;n<i;n+=1)e=this.hierarchy[n].finalTransform.mProp.v.props,t.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}},globalToLocal:function(e){var t=[];t.push(this.finalTransform);for(var n,i=!0,r=this.comp;i;)r.finalTransform?(r.data.hasMask&&t.splice(0,0,r.finalTransform),r=r.comp):i=!1;var s,a=t.length;for(n=0;n<a;n+=1)s=t[n].mat.applyToPointArray(0,0,0),e=[e[0]-s[0],e[1]-s[1],0];return e},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(e){var t,n=this.element.finalTransform.mat,i=this.masksProperties.length;for(t=0;t<i;t+=1)if((this.viewData[t].prop._mdf||e)&&this.drawPath(this.masksProperties[t],this.viewData[t].prop.v,this.viewData[t]),(this.viewData[t].op._mdf||e)&&this.viewData[t].elem.setAttribute("fill-opacity",this.viewData[t].op.v),"n"!==this.masksProperties[t].mode&&(this.viewData[t].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[t].invRect.setAttribute("transform",n.getInverseMatrix().to2dCSS()),this.storedData[t].x&&(this.storedData[t].x._mdf||e))){var r=this.storedData[t].expan;this.storedData[t].x.v<0?("erode"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="erode",this.storedData[t].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[t].filterId+")")),r.setAttribute("radius",-this.storedData[t].x.v)):("dilate"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="dilate",this.storedData[t].elem.setAttribute("filter",null)),this.storedData[t].elem.setAttribute("stroke-width",2*this.storedData[t].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,e+=" h-"+this.globalData.compSize.w,e+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(e,t,n){var i,r,s=" M"+t.v[0][0]+","+t.v[0][1];for(r=t._length,i=1;i<r;i+=1)s+=" C"+t.o[i-1][0]+","+t.o[i-1][1]+" "+t.i[i][0]+","+t.i[i][1]+" "+t.v[i][0]+","+t.v[i][1];if(t.c&&r>1&&(s+=" C"+t.o[i-1][0]+","+t.o[i-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),n.lastPath!==s){var a="";n.elem&&(t.c&&(a=e.inv?this.solidPath+s:s),n.elem.setAttribute("d",a)),n.lastPath=s}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var e={createFilter:function(e,t){var n=createNS("filter");return n.setAttribute("id",e),!0!==t&&(n.setAttribute("filterUnits","objectBoundingBox"),n.setAttribute("x","0%"),n.setAttribute("y","0%"),n.setAttribute("width","100%"),n.setAttribute("height","100%")),n},createAlphaToLuminanceFilter:function(){var e=createNS("feColorMatrix");return e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),e}};return e}(),featureSupport=function(){var e={maskType:!0,svgLumaHidden:!0,offscreenCanvas:"undefined"!=typeof OffscreenCanvas};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),/firefox/i.test(navigator.userAgent)&&(e.svgLumaHidden=!1),e}(),registeredEffects={},idPrefix="filter_result_";function SVGEffects(e){var t,n,i="SourceGraphic",r=e.data.ef?e.data.ef.length:0,s=createElementID(),a=filtersFactory.createFilter(s,!0),o=0;for(this.filters=[],t=0;t<r;t+=1){n=null;var l=e.data.ef[t].ty;registeredEffects[l]&&(n=new(0,registeredEffects[l].effect)(a,e.effectsManager.effectElements[t],e,idPrefix+o,i),i=idPrefix+o,registeredEffects[l].countsAsEffect&&(o+=1)),n&&this.filters.push(n)}o&&(e.globalData.defs.appendChild(a),e.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+s+")")),this.filters.length&&e.addRenderableComponent(this)}function registerEffect(e,t,n){registeredEffects[e]={effect:t,countsAsEffect:n}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.assetData&&this.assetData.sid&&(this.assetData=t.slotManager.getProp(this.assetData)),this.initElement(e,t,n),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(e,t){this.elem=e,this.pos=t}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(e){var t,n=this.filters.length;for(t=0;t<n;t+=1)this.filters[t].renderFrame(e)},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e=null;if(this.data.td){this.matteMasks={};var t=createNS("g");t.setAttribute("id",this.layerId),t.appendChild(this.layerElement),e=t,this.globalData.defs.appendChild(t)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),e=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var n=createNS("clipPath"),i=createNS("path");i.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var r=createElementID();if(n.setAttribute("id",r),n.appendChild(i),this.globalData.defs.appendChild(n),this.checkMasks()){var s=createNS("g");s.setAttribute("clip-path","url("+getLocationHref()+"#"+r+")"),s.appendChild(this.layerElement),this.transformedElement=s,e?e.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+r+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},getMatte:function(e){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[e]){var t,n,i,r,s=this.layerId+"_"+e;if(1===e||3===e){var a=createNS("mask");a.setAttribute("id",s),a.setAttribute("mask-type",3===e?"luminance":"alpha"),(i=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),a.appendChild(i),this.globalData.defs.appendChild(a),featureSupport.maskType||1!==e||(a.setAttribute("mask-type","luminance"),t=createElementID(),n=filtersFactory.createFilter(t),this.globalData.defs.appendChild(n),n.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(r=createNS("g")).appendChild(i),a.appendChild(r),r.setAttribute("filter","url("+getLocationHref()+"#"+t+")"))}else if(2===e){var o=createNS("mask");o.setAttribute("id",s),o.setAttribute("mask-type","alpha");var l=createNS("g");o.appendChild(l),t=createElementID(),n=filtersFactory.createFilter(t);var c=createNS("feComponentTransfer");c.setAttribute("in","SourceGraphic"),n.appendChild(c);var h=createNS("feFuncA");h.setAttribute("type","table"),h.setAttribute("tableValues","1.0 0.0"),c.appendChild(h),this.globalData.defs.appendChild(n);var u=createNS("rect");u.setAttribute("width",this.comp.data.w),u.setAttribute("height",this.comp.data.h),u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("fill","#ffffff"),u.setAttribute("opacity","0"),l.setAttribute("filter","url("+getLocationHref()+"#"+t+")"),l.appendChild(u),(i=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),l.appendChild(i),featureSupport.maskType||(o.setAttribute("mask-type","luminance"),n.appendChild(filtersFactory.createAlphaToLuminanceFilter()),r=createNS("g"),l.appendChild(u),r.appendChild(this.layerElement),l.appendChild(r)),this.globalData.defs.appendChild(o)}this.matteMasks[e]=s}return this.matteMasks[e]},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+e+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initTransform(e,t,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(e){var t,n=this.shapeModifiers.length;for(t=0;t<n;t+=1)this.shapeModifiers[t].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var t=this.shapeModifiers.length;0<t;)if(this.shapeModifiers[0].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,t=this.shapes.length;for(e=0;e<t;e+=1)this.shapes[e].sh.reset();for(e=(t=this.shapeModifiers.length)-1;e>=0&&!this.shapeModifiers[e].processShapes(this._isFirstFrame);e-=1);}},searchProcessedElement:function(e){for(var t=this.processedElements,n=0,i=t.length;n<i;){if(t[n].elem===e)return t[n].pos;n+=1}return 0},addProcessedElement:function(e,t){for(var n=this.processedElements,i=n.length;i;)if(n[i-=1].elem===e)return void(n[i].pos=t);n.push(new ProcessedElement(e,t))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(e,t,n){this.caches=[],this.styles=[],this.transformers=e,this.lStr="",this.sh=n,this.lvl=t,this._isAnimated=!!n.k;for(var i=0,r=e.length;i<r;){if(e[i].mProps.dynamicProperties.length){this._isAnimated=!0;break}i+=1}}function SVGStyleData(e,t){this.data=e,this.type=e.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=!0===e.hd,this.pElem=createNS("path"),this.msElem=null}function DashProperty(e,t,n,i){var r;this.elem=e,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(i);var s,a=t.length||0;for(r=0;r<a;r+=1)s=PropertyFactory.getProp(e,t[r].v,0,0,this),this.k=s.k||this.k,this.dataProps[r]={n:t[r].n,p:s};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=n}function SVGNoStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.style=n}function GradientProperty(e,t,n){this.data=t,this.c=createTypedArray("uint8c",4*t.p);var i=t.k.k[0].s?t.k.k[0].s.length-4*t.p:t.k.k.length-4*t.p;this.o=createTypedArray("float32",i),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=i,this.initDynamicPropertyContainer(n),this.prop=PropertyFactory.getProp(e,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,t,n)}function SVGGradientStrokeStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.initGradientData(e,t,n),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(e,t,n){this.transform={mProps:e,op:t,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(e){if((this.elem.globalData.frameId!==this.frameId||e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var t=0,n=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),t=0;t<n;t+=1)"o"!==this.dataProps[t].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(e,t){for(var n=0,i=this.o.length/2;n<i;){if(Math.abs(e[4*n]-e[4*t+2*n])>.01)return!1;n+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,t=this.data.k.k.length;e<t;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){var t,n,i,r=4*this.data.p;for(t=0;t<r;t+=1)n=t%4==0?100:255,i=Math.round(this.prop.v[t]*n),this.c[t]!==i&&(this.c[t]=i,this._cmdf=!e);if(this.o.length)for(r=this.prop.v.length,t=4*this.data.p;t<r;t+=1)n=t%2==0?100:1,i=t%2==0?Math.round(100*this.prop.v[t]):this.prop.v[t],this.o[t-4*this.data.p]!==i&&(this.o[t-4*this.data.p]=i,this._omdf=!e);this._mdf=!e}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(e,t,n){this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.s=PropertyFactory.getProp(e,t.s,1,null,this),this.e=PropertyFactory.getProp(e,t.e,1,null,this),this.h=PropertyFactory.getProp(e,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(e,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(e,t.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,t),this.setGradientOpacity(t,n),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(e,t){var n=createElementID(),i=createNS(1===t.t?"linearGradient":"radialGradient");i.setAttribute("id",n),i.setAttribute("spreadMethod","pad"),i.setAttribute("gradientUnits","userSpaceOnUse");var r,s,a,o=[];for(a=4*t.g.p,s=0;s<a;s+=4)r=createNS("stop"),i.appendChild(r),o.push(r);e.setAttribute("gf"===t.ty?"fill":"stroke","url("+getLocationHref()+"#"+n+")"),this.gf=i,this.cst=o},SVGGradientFillStyleData.prototype.setGradientOpacity=function(e,t){if(this.g._hasOpacity&&!this.g._collapsable){var n,i,r,s=createNS("mask"),a=createNS("path");s.appendChild(a);var o=createElementID(),l=createElementID();s.setAttribute("id",l);var c=createNS(1===e.t?"linearGradient":"radialGradient");c.setAttribute("id",o),c.setAttribute("spreadMethod","pad"),c.setAttribute("gradientUnits","userSpaceOnUse"),r=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;var h=this.stops;for(i=4*e.g.p;i<r;i+=2)(n=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),c.appendChild(n),h.push(n);a.setAttribute("gf"===e.ty?"fill":"stroke","url("+getLocationHref()+"#"+o+")"),"gs"===e.ty&&(a.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),a.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),1===e.lj&&a.setAttribute("stroke-miterlimit",e.ml)),this.of=c,this.ms=s,this.ost=h,this.maskId=l,t.msElem=a}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(e,t,n,i){if(0===t)return"";var r,s=e.o,a=e.i,o=e.v,l=" M"+i.applyToPointStringified(o[0][0],o[0][1]);for(r=1;r<t;r+=1)l+=" C"+i.applyToPointStringified(s[r-1][0],s[r-1][1])+" "+i.applyToPointStringified(a[r][0],a[r][1])+" "+i.applyToPointStringified(o[r][0],o[r][1]);return n&&t&&(l+=" C"+i.applyToPointStringified(s[r-1][0],s[r-1][1])+" "+i.applyToPointStringified(a[0][0],a[0][1])+" "+i.applyToPointStringified(o[0][0],o[0][1]),l+="z"),l},SVGElementsRenderer=function(){var e=new Matrix,t=new Matrix;function n(e,t,n){(n||t.transform.op._mdf)&&t.transform.container.setAttribute("opacity",t.transform.op.v),(n||t.transform.mProps._mdf)&&t.transform.container.setAttribute("transform",t.transform.mProps.v.to2dCSS())}function i(){}function r(n,i,r){var s,a,o,l,c,h,u,d,p,f,m,g=i.styles.length,v=i.lvl;for(h=0;h<g;h+=1){if(l=i.sh._mdf||r,i.styles[h].lvl<v){for(d=t.reset(),f=v-i.styles[h].lvl,m=i.transformers.length-1;!l&&f>0;)l=i.transformers[m].mProps._mdf||l,f-=1,m-=1;if(l)for(f=v-i.styles[h].lvl,m=i.transformers.length-1;f>0;)p=i.transformers[m].mProps.v.props,d.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),f-=1,m-=1}else d=e;if(a=(u=i.sh.paths)._length,l){for(o="",s=0;s<a;s+=1)(c=u.shapes[s])&&c._length&&(o+=buildShapeString(c,c._length,c.c,d));i.caches[h]=o}else o=i.caches[h];i.styles[h].d+=!0===n.hd?"":o,i.styles[h]._mdf=l||i.styles[h]._mdf}}function s(e,t,n){var i=t.style;(t.c._mdf||n)&&i.pElem.setAttribute("fill","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n)&&i.pElem.setAttribute("fill-opacity",t.o.v)}function a(e,t,n){o(e,t,n),l(0,t,n)}function o(e,t,n){var i,r,s,a,o,l=t.gf,c=t.g._hasOpacity,h=t.s.v,u=t.e.v;if(t.o._mdf||n){var d="gf"===e.ty?"fill-opacity":"stroke-opacity";t.style.pElem.setAttribute(d,t.o.v)}if(t.s._mdf||n){var p=1===e.t?"x1":"cx",f="x1"===p?"y1":"cy";l.setAttribute(p,h[0]),l.setAttribute(f,h[1]),c&&!t.g._collapsable&&(t.of.setAttribute(p,h[0]),t.of.setAttribute(f,h[1]))}if(t.g._cmdf||n){i=t.cst;var m=t.g.c;for(s=i.length,r=0;r<s;r+=1)(a=i[r]).setAttribute("offset",m[4*r]+"%"),a.setAttribute("stop-color","rgb("+m[4*r+1]+","+m[4*r+2]+","+m[4*r+3]+")")}if(c&&(t.g._omdf||n)){var g=t.g.o;for(s=(i=t.g._collapsable?t.cst:t.ost).length,r=0;r<s;r+=1)a=i[r],t.g._collapsable||a.setAttribute("offset",g[2*r]+"%"),a.setAttribute("stop-opacity",g[2*r+1])}if(1===e.t)(t.e._mdf||n)&&(l.setAttribute("x2",u[0]),l.setAttribute("y2",u[1]),c&&!t.g._collapsable&&(t.of.setAttribute("x2",u[0]),t.of.setAttribute("y2",u[1])));else if((t.s._mdf||t.e._mdf||n)&&(o=Math.sqrt(Math.pow(h[0]-u[0],2)+Math.pow(h[1]-u[1],2)),l.setAttribute("r",o),c&&!t.g._collapsable&&t.of.setAttribute("r",o)),t.e._mdf||t.h._mdf||t.a._mdf||n){o||(o=Math.sqrt(Math.pow(h[0]-u[0],2)+Math.pow(h[1]-u[1],2)));var v=Math.atan2(u[1]-h[1],u[0]-h[0]),y=t.h.v;y>=1?y=.99:y<=-1&&(y=-.99);var _=o*y,b=Math.cos(v+t.a.v)*_+h[0],x=Math.sin(v+t.a.v)*_+h[1];l.setAttribute("fx",b),l.setAttribute("fy",x),c&&!t.g._collapsable&&(t.of.setAttribute("fx",b),t.of.setAttribute("fy",x))}}function l(e,t,n){var i=t.style,r=t.d;r&&(r._mdf||n)&&r.dashStr&&(i.pElem.setAttribute("stroke-dasharray",r.dashStr),i.pElem.setAttribute("stroke-dashoffset",r.dashoffset[0])),t.c&&(t.c._mdf||n)&&i.pElem.setAttribute("stroke","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n)&&i.pElem.setAttribute("stroke-opacity",t.o.v),(t.w._mdf||n)&&(i.pElem.setAttribute("stroke-width",t.w.v),i.msElem&&i.msElem.setAttribute("stroke-width",t.w.v))}return{createRenderFunction:function(e){switch(e.ty){case"fl":return s;case"gf":return o;case"gs":return a;case"st":return l;case"sh":case"el":case"rc":case"sr":return r;case"tr":return n;case"no":return i;default:return null}}}}();function SVGShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,t,n),this.prevViewData=[]}function LetterProps(e,t,n,i,r,s){this.o=e,this.sw=t,this.sc=n,this.fc=i,this.m=r,this.p=s,this._mdf={o:!0,sw:!!t,sc:!!n,fc:!!i,m:!0,p:!0}}function TextProperty(e,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,t.d&&t.d.sid&&(t.d=e.globalData.slotManager.getProp(t.d)),this.data=t,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var e,t,n,i,r=this.shapes.length,s=this.stylesList.length,a=[],o=!1;for(n=0;n<s;n+=1){for(i=this.stylesList[n],o=!1,a.length=0,e=0;e<r;e+=1)-1!==(t=this.shapes[e]).styles.indexOf(i)&&(a.push(t),o=t._isAnimated||o);a.length>1&&o&&this.setShapesAsAnimated(a)}},SVGShapeElement.prototype.setShapesAsAnimated=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(e,t){var n,i=new SVGStyleData(e,t),r=i.pElem;return"st"===e.ty?n=new SVGStrokeStyleData(this,e,i):"fl"===e.ty?n=new SVGFillStyleData(this,e,i):"gf"===e.ty||"gs"===e.ty?(n=new("gf"===e.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,e,i),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),r.setAttribute("mask","url("+getLocationHref()+"#"+n.maskId+")"))):"no"===e.ty&&(n=new SVGNoStyleData(this,e,i)),"st"!==e.ty&&"gs"!==e.ty||(r.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),r.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),r.setAttribute("fill-opacity","0"),1===e.lj&&r.setAttribute("stroke-miterlimit",e.ml)),2===e.r&&r.setAttribute("fill-rule","evenodd"),e.ln&&r.setAttribute("id",e.ln),e.cl&&r.setAttribute("class",e.cl),e.bm&&(r.style["mix-blend-mode"]=getBlendMode(e.bm)),this.stylesList.push(i),this.addToAnimatedContents(e,n),n},SVGShapeElement.prototype.createGroupElement=function(e){var t=new ShapeGroupData;return e.ln&&t.gr.setAttribute("id",e.ln),e.cl&&t.gr.setAttribute("class",e.cl),e.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(e.bm)),t},SVGShapeElement.prototype.createTransformElement=function(e,t){var n=TransformPropertyFactory.getTransformProperty(this,e,this),i=new SVGTransformData(n,n.o,t);return this.addToAnimatedContents(e,i),i},SVGShapeElement.prototype.createShapeElement=function(e,t,n){var i=4;"rc"===e.ty?i=5:"el"===e.ty?i=6:"sr"===e.ty&&(i=7);var r=new SVGShapeData(t,n,ShapePropertyFactory.getShapeProp(this,e,i,this));return this.shapes.push(r),this.addShapeToModifiers(r),this.addToAnimatedContents(e,r),r},SVGShapeElement.prototype.addToAnimatedContents=function(e,t){for(var n=0,i=this.animatedContents.length;n<i;){if(this.animatedContents[n].element===t)return;n+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(e),element:t,data:e})},SVGShapeElement.prototype.setElementStyles=function(e){var t,n=e.styles,i=this.stylesList.length;for(t=0;t<i;t+=1)this.stylesList[t].closed||n.push(this.stylesList[t])},SVGShapeElement.prototype.reloadShapes=function(){var e;this._isFirstFrame=!0;var t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(e,t,n,i,r,s,a){var o,l,c,h,u,d,p=[].concat(s),f=e.length-1,m=[],g=[];for(o=f;o>=0;o-=1){if((d=this.searchProcessedElement(e[o]))?t[o]=n[d-1]:e[o]._render=a,"fl"===e[o].ty||"st"===e[o].ty||"gf"===e[o].ty||"gs"===e[o].ty||"no"===e[o].ty)d?t[o].style.closed=!1:t[o]=this.createStyleElement(e[o],r),e[o]._render&&t[o].style.pElem.parentNode!==i&&i.appendChild(t[o].style.pElem),m.push(t[o].style);else if("gr"===e[o].ty){if(d)for(c=t[o].it.length,l=0;l<c;l+=1)t[o].prevViewData[l]=t[o].it[l];else t[o]=this.createGroupElement(e[o]);this.searchShapes(e[o].it,t[o].it,t[o].prevViewData,t[o].gr,r+1,p,a),e[o]._render&&t[o].gr.parentNode!==i&&i.appendChild(t[o].gr)}else"tr"===e[o].ty?(d||(t[o]=this.createTransformElement(e[o],i)),h=t[o].transform,p.push(h)):"sh"===e[o].ty||"rc"===e[o].ty||"el"===e[o].ty||"sr"===e[o].ty?(d||(t[o]=this.createShapeElement(e[o],p,r)),this.setElementStyles(t[o])):"tm"===e[o].ty||"rd"===e[o].ty||"ms"===e[o].ty||"pb"===e[o].ty||"zz"===e[o].ty||"op"===e[o].ty?(d?(u=t[o]).closed=!1:((u=ShapeModifiers.getModifier(e[o].ty)).init(this,e[o]),t[o]=u,this.shapeModifiers.push(u)),g.push(u)):"rp"===e[o].ty&&(d?(u=t[o]).closed=!0:(u=ShapeModifiers.getModifier(e[o].ty),t[o]=u,u.init(this,e,o,t),this.shapeModifiers.push(u),a=!1),g.push(u));this.addProcessedElement(e[o],o+1)}for(f=m.length,o=0;o<f;o+=1)m[o].closed=!0;for(f=g.length,o=0;o<f;o+=1)g[o].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var e;this.renderModifiers();var t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].reset();for(this.renderShape(),e=0;e<t;e+=1)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d="M0 0"+this.stylesList[e].d),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var e,t,n=this.animatedContents.length;for(e=0;e<n;e+=1)t=this.animatedContents[e],(this._isFirstFrame||t.element._isAnimated)&&!0!==t.data&&t.fn(t.data,t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(e,t,n,i,r,s){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var a=!1;return this.o!==e&&(this.o=e,this._mdf.o=!0,a=!0),this.sw!==t&&(this.sw=t,this._mdf.sw=!0,a=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,a=!0),this.fc!==i&&(this.fc=i,this._mdf.fc=!0,a=!0),this.m!==r&&(this.m=r,this._mdf.m=!0,a=!0),!s.length||this.p[0]===s[0]&&this.p[1]===s[1]&&this.p[4]===s[4]&&this.p[5]===s[5]&&this.p[12]===s[12]&&this.p[13]===s[13]||(this.p=s,this._mdf.p=!0,a=!0),a},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(e){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||e){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,n=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var i;this.lock=!0,this._mdf=!1;var r=this.effectsSequence.length,s=e||this.data.d.k[this.keysIndex].s;for(i=0;i<r;i+=1)s=n!==this.keysIndex?this.effectsSequence[i](s,s.t):this.effectsSequence[i](this.currentData,s.t);t!==s&&this.setCurrentData(s),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,t=this.elem.comp.renderedFrame,n=0,i=e.length;n<=i-1&&!(n===i-1||e[n+1].t>t);)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(e){for(var t,n,i=[],r=0,s=e.length,a=!1;r<s;)t=e.charCodeAt(r),FontManager.isCombinedCharacter(t)?i[i.length-1]+=e.charAt(r):t>=55296&&t<=56319?(n=e.charCodeAt(r+1))>=56320&&n<=57343?(a||FontManager.isModifier(t,n)?(i[i.length-1]+=e.substr(r,2),a=!1):i.push(e.substr(r,2)),r+=1):i.push(e.charAt(r)):t>56319?(n=e.charCodeAt(r+1),FontManager.isZeroWidthJoiner(t,n)?(a=!0,i[i.length-1]+=e.substr(r,2),r+=1):i.push(e.charAt(r))):FontManager.isZeroWidthJoiner(t)?(i[i.length-1]+=e.charAt(r),a=!0):i.push(e.charAt(r)),r+=1;return i},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var t,n,i,r,s,a,o,l=this.elem.globalData.fontManager,c=this.data,h=[],u=0,d=c.m.g,p=0,f=0,m=0,g=[],v=0,y=0,_=l.getFontByName(e.f),b=0,x=getFontProperties(_);e.fWeight=x.weight,e.fStyle=x.style,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),n=e.finalText.length,e.finalLineHeight=e.lh;var S,E=e.tr/1e3*e.finalSize;if(e.sz)for(var w,T,M=!0,A=e.sz[0],P=e.sz[1];M;){w=0,v=0,n=(T=this.buildFinalText(e.t)).length,E=e.tr/1e3*e.finalSize;var C=-1;for(t=0;t<n;t+=1)S=T[t].charCodeAt(0),i=!1," "===T[t]?C=t:13!==S&&3!==S||(v=0,i=!0,w+=e.finalLineHeight||1.2*e.finalSize),l.chars?(o=l.getCharData(T[t],_.fStyle,_.fFamily),b=i?0:o.w*e.finalSize/100):b=l.measureText(T[t],e.f,e.finalSize),v+b>A&&" "!==T[t]?(-1===C?n+=1:t=C,w+=e.finalLineHeight||1.2*e.finalSize,T.splice(t,C===t?1:0,"\r"),C=-1,v=0):(v+=b,v+=E);w+=_.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&P<w?(e.finalSize-=1,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=T,n=e.finalText.length,M=!1)}v=-E,b=0;var I,L=0;for(t=0;t<n;t+=1)if(i=!1,13===(S=(I=e.finalText[t]).charCodeAt(0))||3===S?(L=0,g.push(v),y=v>y?v:y,v=-2*E,r="",i=!0,m+=1):r=I,l.chars?(o=l.getCharData(I,_.fStyle,l.getFontByName(e.f).fFamily),b=i?0:o.w*e.finalSize/100):b=l.measureText(r,e.f,e.finalSize)," "===I?L+=b+E:(v+=b+E+L,L=0),h.push({l:b,an:b,add:p,n:i,anIndexes:[],val:r,line:m,animatorJustifyOffset:0}),2==d){if(p+=b,""===r||" "===r||t===n-1){for(""!==r&&" "!==r||(p-=b);f<=t;)h[f].an=p,h[f].ind=u,h[f].extra=b,f+=1;u+=1,p=0}}else if(3==d){if(p+=b,""===r||t===n-1){for(""===r&&(p-=b);f<=t;)h[f].an=p,h[f].ind=u,h[f].extra=b,f+=1;p=0,u+=1}}else h[u].ind=u,h[u].extra=0,u+=1;if(e.l=h,y=v>y?v:y,g.push(v),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=y,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=g;var D,R,k,O,F=c.a;a=F.length;var N=[];for(s=0;s<a;s+=1){for((D=F[s]).a.sc&&(e.strokeColorAnim=!0),D.a.sw&&(e.strokeWidthAnim=!0),(D.a.fc||D.a.fh||D.a.fs||D.a.fb)&&(e.fillColorAnim=!0),O=0,k=D.s.b,t=0;t<n;t+=1)(R=h[t]).anIndexes[s]=O,(1==k&&""!==R.val||2==k&&""!==R.val&&" "!==R.val||3==k&&(R.n||" "==R.val||t==n-1)||4==k&&(R.n||t==n-1))&&(1===D.s.rn&&N.push(O),O+=1);c.a[s].s.totalChars=O;var B,z=-1;if(1===D.s.rn)for(t=0;t<n;t+=1)z!=(R=h[t]).anIndexes[s]&&(z=R.anIndexes[s],B=N.splice(Math.floor(Math.random()*N.length),1)[0]),R.anIndexes[s]=B}e.yOffset=e.finalLineHeight||1.2*e.finalSize,e.ls=e.ls||0,e.ascent=_.ascent*e.finalSize/100},TextProperty.prototype.updateDocumentData=function(e,t){t=void 0===t?this.keysIndex:t;var n=this.copyData({},this.data.d.k[t].s);n=this.copyData(n,e),this.data.d.k[t].s=n,this.recalculate(t),this.setCurrentData(n),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(e){var t=this.data.d.k[e].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var e=Math.max,t=Math.min,n=Math.floor;function i(e,t){this._currentTextLength=-1,this.k=!1,this.data=t,this.elem=e,this.comp=e.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(e),this.s=PropertyFactory.getProp(e,t.s||{k:0},0,0,this),this.e="e"in t?PropertyFactory.getProp(e,t.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(e,t.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(e,t.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(e,t.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(e,t.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(e,t.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return i.prototype={getMult:function(i){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var r=0,s=0,a=1,o=1;this.ne.v>0?r=this.ne.v/100:s=-this.ne.v/100,this.xe.v>0?a=1-this.xe.v/100:o=1+this.xe.v/100;var l=BezierFactory.getBezierEasing(r,s,a,o).get,c=0,h=this.finalS,u=this.finalE,d=this.data.sh;if(2===d)c=l(c=u===h?i>=u?1:0:e(0,t(.5/(u-h)+(i-h)/(u-h),1)));else if(3===d)c=l(c=u===h?i>=u?0:1:1-e(0,t(.5/(u-h)+(i-h)/(u-h),1)));else if(4===d)u===h?c=0:(c=e(0,t(.5/(u-h)+(i-h)/(u-h),1)))<.5?c*=2:c=1-2*(c-.5),c=l(c);else if(5===d){if(u===h)c=0;else{var p=u-h,f=-p/2+(i=t(e(0,i+.5-h),u-h)),m=p/2;c=Math.sqrt(1-f*f/(m*m))}c=l(c)}else 6===d?(u===h?c=0:(i=t(e(0,i+.5-h),u-h),c=(1+Math.cos(Math.PI+2*Math.PI*i/(u-h)))/2),c=l(c)):(i>=n(h)&&(c=e(0,t(i-h<0?t(u,1)-(h-i):u-i,1))),c=l(c));if(100!==this.sm.v){var g=.01*this.sm.v;0===g&&(g=1e-8);var v=.5-.5*g;c<v?c=0:(c=(c-v)/g)>1&&(c=1)}return c*this.a.v},getValue:function(e){this.iterateDynamicProperties(),this._mdf=e||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,e&&2===this.data.r&&(this.e.v=this._currentTextLength);var t=2===this.data.r?1:100/this.data.totalChars,n=this.o.v/t,i=this.s.v/t+n,r=this.e.v/t+n;if(i>r){var s=i;i=r,r=s}this.finalS=i,this.finalE=r}},extendPrototype([DynamicPropertyContainer],i),{getTextSelectorProp:function(e,t,n){return new i(e,t,n)}}}();function TextAnimatorDataProperty(e,t,n){var i={propType:!1},r=PropertyFactory.getProp,s=t.a;this.a={r:s.r?r(e,s.r,0,degToRads,n):i,rx:s.rx?r(e,s.rx,0,degToRads,n):i,ry:s.ry?r(e,s.ry,0,degToRads,n):i,sk:s.sk?r(e,s.sk,0,degToRads,n):i,sa:s.sa?r(e,s.sa,0,degToRads,n):i,s:s.s?r(e,s.s,1,.01,n):i,a:s.a?r(e,s.a,1,0,n):i,o:s.o?r(e,s.o,0,.01,n):i,p:s.p?r(e,s.p,1,0,n):i,sw:s.sw?r(e,s.sw,0,0,n):i,sc:s.sc?r(e,s.sc,1,0,n):i,fc:s.fc?r(e,s.fc,1,0,n):i,fh:s.fh?r(e,s.fh,0,0,n):i,fs:s.fs?r(e,s.fs,0,.01,n):i,fb:s.fb?r(e,s.fb,0,.01,n):i,t:s.t?r(e,s.t,0,0,n):i},this.s=TextSelectorProp.getTextSelectorProp(e,t.s,n),this.s.t=t.s.t}function TextAnimatorProperty(e,t,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=t,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var e,t,n=this._textData.a.length,i=PropertyFactory.getProp;for(e=0;e<n;e+=1)t=this._textData.a[e],this._animatorsData[e]=new TextAnimatorDataProperty(this._elem,t,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:i(this._elem,this._textData.p.a,0,0,this),f:i(this._elem,this._textData.p.f,0,0,this),l:i(this._elem,this._textData.p.l,0,0,this),r:i(this._elem,this._textData.p.r,0,0,this),p:i(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=i(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(e,t){if(this.lettersChangedFlag=t,this._mdf||this._isFirstFrame||t||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var n,i,r,s,a,o,l,c,h,u,d,p,f,m,g,v,y,_,b,x=this._moreOptions.alignment.v,S=this._animatorsData,E=this._textData,w=this.mHelper,T=this._renderType,M=this.renderedLetters.length,A=e.l;if(this._hasMaskedPath){if(b=this._pathData.m,!this._pathData.n||this._pathData._mdf){var P,C=b.v;for(this._pathData.r.v&&(C=C.reverse()),a={tLength:0,segments:[]},s=C._length-1,v=0,r=0;r<s;r+=1)P=bez.buildBezierData(C.v[r],C.v[r+1],[C.o[r][0]-C.v[r][0],C.o[r][1]-C.v[r][1]],[C.i[r+1][0]-C.v[r+1][0],C.i[r+1][1]-C.v[r+1][1]]),a.tLength+=P.segmentLength,a.segments.push(P),v+=P.segmentLength;r=s,b.v.c&&(P=bez.buildBezierData(C.v[r],C.v[0],[C.o[r][0]-C.v[r][0],C.o[r][1]-C.v[r][1]],[C.i[0][0]-C.v[0][0],C.i[0][1]-C.v[0][1]]),a.tLength+=P.segmentLength,a.segments.push(P),v+=P.segmentLength),this._pathData.pi=a}if(a=this._pathData.pi,o=this._pathData.f.v,d=0,u=1,c=0,h=!0,m=a.segments,o<0&&b.v.c)for(a.tLength<Math.abs(o)&&(o=-Math.abs(o)%a.tLength),u=(f=m[d=m.length-1].points).length-1;o<0;)o+=f[u].partialLength,(u-=1)<0&&(u=(f=m[d-=1].points).length-1);p=(f=m[d].points)[u-1],g=(l=f[u]).partialLength}s=A.length,n=0,i=0;var I,L,D,R,k,O=1.2*e.finalSize*.714,F=!0;D=S.length;var N,B,z,U,V,H,G,j,W,q,X,Y,$=-1,K=o,Z=d,Q=u,J=-1,ee="",te=this.defaultPropsArray;if(2===e.j||1===e.j){var ne=0,ie=0,re=2===e.j?-.5:-1,se=0,ae=!0;for(r=0;r<s;r+=1)if(A[r].n){for(ne&&(ne+=ie);se<r;)A[se].animatorJustifyOffset=ne,se+=1;ne=0,ae=!0}else{for(L=0;L<D;L+=1)(I=S[L].a).t.propType&&(ae&&2===e.j&&(ie+=I.t.v*re),(k=S[L].s.getMult(A[r].anIndexes[L],E.a[L].s.totalChars)).length?ne+=I.t.v*k[0]*re:ne+=I.t.v*k*re);ae=!1}for(ne&&(ne+=ie);se<r;)A[se].animatorJustifyOffset=ne,se+=1}for(r=0;r<s;r+=1){if(w.reset(),U=1,A[r].n)n=0,i+=e.yOffset,i+=F?1:0,o=K,F=!1,this._hasMaskedPath&&(u=Q,p=(f=m[d=Z].points)[u-1],g=(l=f[u]).partialLength,c=0),ee="",X="",W="",Y="",te=this.defaultPropsArray;else{if(this._hasMaskedPath){if(J!==A[r].line){switch(e.j){case 1:o+=v-e.lineWidths[A[r].line];break;case 2:o+=(v-e.lineWidths[A[r].line])/2}J=A[r].line}$!==A[r].ind&&(A[$]&&(o+=A[$].extra),o+=A[r].an/2,$=A[r].ind),o+=x[0]*A[r].an*.005;var oe=0;for(L=0;L<D;L+=1)(I=S[L].a).p.propType&&((k=S[L].s.getMult(A[r].anIndexes[L],E.a[L].s.totalChars)).length?oe+=I.p.v[0]*k[0]:oe+=I.p.v[0]*k),I.a.propType&&((k=S[L].s.getMult(A[r].anIndexes[L],E.a[L].s.totalChars)).length?oe+=I.a.v[0]*k[0]:oe+=I.a.v[0]*k);for(h=!0,this._pathData.a.v&&(o=.5*A[0].an+(v-this._pathData.f.v-.5*A[0].an-.5*A[A.length-1].an)*$/(s-1),o+=this._pathData.f.v);h;)c+g>=o+oe||!f?(y=(o+oe-c)/l.partialLength,B=p.point[0]+(l.point[0]-p.point[0])*y,z=p.point[1]+(l.point[1]-p.point[1])*y,w.translate(-x[0]*A[r].an*.005,-x[1]*O*.01),h=!1):f&&(c+=l.partialLength,(u+=1)>=f.length&&(u=0,m[d+=1]?f=m[d].points:b.v.c?(u=0,f=m[d=0].points):(c-=l.partialLength,f=null)),f&&(p=l,g=(l=f[u]).partialLength));N=A[r].an/2-A[r].add,w.translate(-N,0,0)}else N=A[r].an/2-A[r].add,w.translate(-N,0,0),w.translate(-x[0]*A[r].an*.005,-x[1]*O*.01,0);for(L=0;L<D;L+=1)(I=S[L].a).t.propType&&(k=S[L].s.getMult(A[r].anIndexes[L],E.a[L].s.totalChars),0===n&&0===e.j||(this._hasMaskedPath?k.length?o+=I.t.v*k[0]:o+=I.t.v*k:k.length?n+=I.t.v*k[0]:n+=I.t.v*k));for(e.strokeWidthAnim&&(H=e.sw||0),e.strokeColorAnim&&(V=e.sc?[e.sc[0],e.sc[1],e.sc[2]]:[0,0,0]),e.fillColorAnim&&e.fc&&(G=[e.fc[0],e.fc[1],e.fc[2]]),L=0;L<D;L+=1)(I=S[L].a).a.propType&&((k=S[L].s.getMult(A[r].anIndexes[L],E.a[L].s.totalChars)).length?w.translate(-I.a.v[0]*k[0],-I.a.v[1]*k[1],I.a.v[2]*k[2]):w.translate(-I.a.v[0]*k,-I.a.v[1]*k,I.a.v[2]*k));for(L=0;L<D;L+=1)(I=S[L].a).s.propType&&((k=S[L].s.getMult(A[r].anIndexes[L],E.a[L].s.totalChars)).length?w.scale(1+(I.s.v[0]-1)*k[0],1+(I.s.v[1]-1)*k[1],1):w.scale(1+(I.s.v[0]-1)*k,1+(I.s.v[1]-1)*k,1));for(L=0;L<D;L+=1){if(I=S[L].a,k=S[L].s.getMult(A[r].anIndexes[L],E.a[L].s.totalChars),I.sk.propType&&(k.length?w.skewFromAxis(-I.sk.v*k[0],I.sa.v*k[1]):w.skewFromAxis(-I.sk.v*k,I.sa.v*k)),I.r.propType&&(k.length?w.rotateZ(-I.r.v*k[2]):w.rotateZ(-I.r.v*k)),I.ry.propType&&(k.length?w.rotateY(I.ry.v*k[1]):w.rotateY(I.ry.v*k)),I.rx.propType&&(k.length?w.rotateX(I.rx.v*k[0]):w.rotateX(I.rx.v*k)),I.o.propType&&(k.length?U+=(I.o.v*k[0]-U)*k[0]:U+=(I.o.v*k-U)*k),e.strokeWidthAnim&&I.sw.propType&&(k.length?H+=I.sw.v*k[0]:H+=I.sw.v*k),e.strokeColorAnim&&I.sc.propType)for(j=0;j<3;j+=1)k.length?V[j]+=(I.sc.v[j]-V[j])*k[0]:V[j]+=(I.sc.v[j]-V[j])*k;if(e.fillColorAnim&&e.fc){if(I.fc.propType)for(j=0;j<3;j+=1)k.length?G[j]+=(I.fc.v[j]-G[j])*k[0]:G[j]+=(I.fc.v[j]-G[j])*k;I.fh.propType&&(G=k.length?addHueToRGB(G,I.fh.v*k[0]):addHueToRGB(G,I.fh.v*k)),I.fs.propType&&(G=k.length?addSaturationToRGB(G,I.fs.v*k[0]):addSaturationToRGB(G,I.fs.v*k)),I.fb.propType&&(G=k.length?addBrightnessToRGB(G,I.fb.v*k[0]):addBrightnessToRGB(G,I.fb.v*k))}}for(L=0;L<D;L+=1)(I=S[L].a).p.propType&&(k=S[L].s.getMult(A[r].anIndexes[L],E.a[L].s.totalChars),this._hasMaskedPath?k.length?w.translate(0,I.p.v[1]*k[0],-I.p.v[2]*k[1]):w.translate(0,I.p.v[1]*k,-I.p.v[2]*k):k.length?w.translate(I.p.v[0]*k[0],I.p.v[1]*k[1],-I.p.v[2]*k[2]):w.translate(I.p.v[0]*k,I.p.v[1]*k,-I.p.v[2]*k));if(e.strokeWidthAnim&&(W=H<0?0:H),e.strokeColorAnim&&(q="rgb("+Math.round(255*V[0])+","+Math.round(255*V[1])+","+Math.round(255*V[2])+")"),e.fillColorAnim&&e.fc&&(X="rgb("+Math.round(255*G[0])+","+Math.round(255*G[1])+","+Math.round(255*G[2])+")"),this._hasMaskedPath){if(w.translate(0,-e.ls),w.translate(0,x[1]*O*.01+i,0),this._pathData.p.v){_=(l.point[1]-p.point[1])/(l.point[0]-p.point[0]);var le=180*Math.atan(_)/Math.PI;l.point[0]<p.point[0]&&(le+=180),w.rotate(-le*Math.PI/180)}w.translate(B,z,0),o-=x[0]*A[r].an*.005,A[r+1]&&$!==A[r+1].ind&&(o+=A[r].an/2,o+=.001*e.tr*e.finalSize)}else{switch(w.translate(n,i,0),e.ps&&w.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:w.translate(A[r].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[A[r].line]),0,0);break;case 2:w.translate(A[r].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[A[r].line])/2,0,0)}w.translate(0,-e.ls),w.translate(N,0,0),w.translate(x[0]*A[r].an*.005,x[1]*O*.01,0),n+=A[r].l+.001*e.tr*e.finalSize}"html"===T?ee=w.toCSS():"svg"===T?ee=w.to2dCSS():te=[w.props[0],w.props[1],w.props[2],w.props[3],w.props[4],w.props[5],w.props[6],w.props[7],w.props[8],w.props[9],w.props[10],w.props[11],w.props[12],w.props[13],w.props[14],w.props[15]],Y=U}M<=r?(R=new LetterProps(Y,W,q,X,ee,te),this.renderedLetters.push(R),M+=1,this.lettersChangedFlag=!0):(R=this.renderedLetters[r],this.lettersChangedFlag=R.update(Y,W,q,X,ee,te)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(e,t,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,t,n),this.textProperty=new TextProperty(this,e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(e.t,this.renderType,this),this.initTransform(e,t,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(e,t){var n,i,r=t.length,s="";for(n=0;n<r;n+=1)"sh"===t[n].ty&&(i=t[n].ks.k,s+=buildShapeString(i,i.i.length,!0,e));return s},ITextElement.prototype.updateDocumentData=function(e,t){this.textProperty.updateDocumentData(e,t)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,t,n,i,r){switch(e.ps&&t.translate(e.ps[0],e.ps[1]+e.ascent,0),t.translate(0,-e.ls,0),e.j){case 1:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n]),0,0);break;case 2:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n])/2,0,0)}t.translate(i,r,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){};var emptyShapeData={shapes:[]};function SVGTextLottieElement(e,t,n){this.textSpans=[],this.renderType="svg",this.initElement(e,t,n)}function ISolidElement(e,t,n){this.initElement(e,t,n)}function NullElement(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initFrame(),this.initTransform(e,t,n),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(e,t,n){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function SVGRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n="";if(t&&t.title){var i=createNS("title"),r=createElementID();i.setAttribute("id",r),i.textContent=t.title,this.svgElement.appendChild(i),n+=r}if(t&&t.description){var s=createNS("desc"),a=createElementID();s.setAttribute("id",a),s.textContent=t.description,this.svgElement.appendChild(s),n+=" "+a}n&&this.svgElement.setAttribute("aria-labelledby",n);var o=createNS("defs");this.svgElement.appendChild(o);var l=createNS("g");this.svgElement.appendChild(l),this.layerElement=l,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!(t&&!1===t.hideOnTransparent),viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"100%",height:t&&t.filterSize&&t.filterSize.height||"100%",x:t&&t.filterSize&&t.filterSize.x||"0%",y:t&&t.filterSize&&t.filterSize.y||"0%"},width:t&&t.width,height:t&&t.height,runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:o,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CVContextData(){var e;for(this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1,this.savedOp=createTypedArray("float32",15),e=0;e<15;e+=1)this.saved[e]=createTypedArray("float32",16);this._length=15}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(e){for(var t=0,n=e.length,i=[],r="";t<n;)e[t]===String.fromCharCode(13)||e[t]===String.fromCharCode(3)?(i.push(r),r=""):r+=e[t],t+=1;return i.push(r),i},SVGTextLottieElement.prototype.buildShapeData=function(e,t){if(e.shapes&&e.shapes.length){var n=e.shapes[0];if(n.it){var i=n.it[n.it.length-1];i.s&&(i.s.k[0]=t,i.s.k[1]=t)}}return e},SVGTextLottieElement.prototype.buildNewText=function(){var e,t;this.addDynamicProperty(this);var n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n?n.l.length:0),n.fc?this.layerElement.setAttribute("fill",this.buildColor(n.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var i=this.globalData.fontManager.getFontByName(n.f);if(i.fClass)this.layerElement.setAttribute("class",i.fClass);else{this.layerElement.setAttribute("font-family",i.fFamily);var r=n.fWeight,s=n.fStyle;this.layerElement.setAttribute("font-style",s),this.layerElement.setAttribute("font-weight",r)}this.layerElement.setAttribute("aria-label",n.t);var a,o=n.l||[],l=!!this.globalData.fontManager.chars;t=o.length;var c=this.mHelper,h=this.data.singleShape,u=0,d=0,p=!0,f=.001*n.tr*n.finalSize;if(!h||l||n.sz){var m,g=this.textSpans.length;for(e=0;e<t;e+=1){if(this.textSpans[e]||(this.textSpans[e]={span:null,childSpan:null,glyph:null}),!l||!h||0===e){if(a=g>e?this.textSpans[e].span:createNS(l?"g":"text"),g<=e){if(a.setAttribute("stroke-linecap","butt"),a.setAttribute("stroke-linejoin","round"),a.setAttribute("stroke-miterlimit","4"),this.textSpans[e].span=a,l){var v=createNS("g");a.appendChild(v),this.textSpans[e].childSpan=v}this.textSpans[e].span=a,this.layerElement.appendChild(a)}a.style.display="inherit"}if(c.reset(),h&&(o[e].n&&(u=-f,d+=n.yOffset,d+=p?1:0,p=!1),this.applyTextPropertiesToMatrix(n,c,o[e].line,u,d),u+=o[e].l||0,u+=f),l){var y;if(1===(m=this.globalData.fontManager.getCharData(n.finalText[e],i.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily)).t)y=new SVGCompElement(m.data,this.globalData,this);else{var _=emptyShapeData;m.data&&m.data.shapes&&(_=this.buildShapeData(m.data,n.finalSize)),y=new SVGShapeElement(_,this.globalData,this)}if(this.textSpans[e].glyph){var b=this.textSpans[e].glyph;this.textSpans[e].childSpan.removeChild(b.layerElement),b.destroy()}this.textSpans[e].glyph=y,y._debug=!0,y.prepareFrame(0),y.renderFrame(),this.textSpans[e].childSpan.appendChild(y.layerElement),1===m.t&&this.textSpans[e].childSpan.setAttribute("transform","scale("+n.finalSize/100+","+n.finalSize/100+")")}else h&&a.setAttribute("transform","translate("+c.props[12]+","+c.props[13]+")"),a.textContent=o[e].val,a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}h&&a&&a.setAttribute("d","")}else{var x=this.textContainer,S="start";switch(n.j){case 1:S="end";break;case 2:S="middle";break;default:S="start"}x.setAttribute("text-anchor",S),x.setAttribute("letter-spacing",f);var E=this.buildTextContents(n.finalText);for(t=E.length,d=n.ps?n.ps[1]+n.ascent:0,e=0;e<t;e+=1)(a=this.textSpans[e].span||createNS("tspan")).textContent=E[e],a.setAttribute("x",0),a.setAttribute("y",d),a.style.display="inherit",x.appendChild(a),this.textSpans[e]||(this.textSpans[e]={span:null,glyph:null}),this.textSpans[e].span=a,d+=n.finalLineHeight;this.layerElement.appendChild(x)}for(;e<this.textSpans.length;)this.textSpans[e].span.style.display="none",e+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var e,t,n=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,e=0;e<n;e+=1)(t=this.textSpans[e].glyph)&&(t.prepareFrame(this.comp.renderedFrame-this.data.st),t._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if((!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var e,t;this._sizeChanged=!0;var n,i,r,s=this.textAnimator.renderedLetters,a=this.textProperty.currentData.l;for(t=a.length,e=0;e<t;e+=1)a[e].n||(n=s[e],i=this.textSpans[e].span,(r=this.textSpans[e].glyph)&&r.renderFrame(),n._mdf.m&&i.setAttribute("transform",n.m),n._mdf.o&&i.setAttribute("opacity",n.o),n._mdf.sw&&i.setAttribute("stroke-width",n.sw),n._mdf.sc&&i.setAttribute("stroke",n.sc),n._mdf.fc&&i.setAttribute("fill",n.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)},NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRendererBase.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRendererBase.prototype.createText=function(e){return new SVGTextLottieElement(e,this.globalData,this)},SVGRendererBase.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",e.w),this.svgElement.setAttribute("height",e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(e,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e;var n=createNS("clipPath"),i=createNS("rect");i.setAttribute("width",e.w),i.setAttribute("height",e.h),i.setAttribute("x",0),i.setAttribute("y",0);var r=createElementID();n.setAttribute("id",r),n.appendChild(i),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+r+")"),t.appendChild(n),this.layers=e.layers,this.elements=createSizedArray(e.layers.length)},SVGRendererBase.prototype.destroy=function(){var e;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(e){var t=0,n=this.layers.length;for(t=0;t<n;t+=1)if(this.layers[t].ind===e)return t;return-1},SVGRendererBase.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){t[e]=!0;var n=this.createItem(this.layers[e]);if(t[e]=n,getExpressionsPlugin()&&(0===this.layers[e].ty&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,e),this.layers[e].tt){var i="tp"in this.layers[e]?this.findIndexByInd(this.layers[e].tp):e-1;if(-1===i)return;if(this.elements[i]&&!0!==this.elements[i]){var r=t[i].getMatte(this.layers[e].tt);n.setMatte(r)}else this.buildItem(i),this.addPendingElement(n)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var t=0,n=this.elements.length;t<n;){if(this.elements[t]===e){var i="tp"in e.data?this.findIndexByInd(e.data.tp):t-1,r=this.elements[i].getMatte(this.layers[t].tt);e.setMatte(r);break}t+=1}}},SVGRendererBase.prototype.renderFrame=function(e){if(this.renderedFrame!==e&&!this.destroyed){var t;null===e?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var n=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=n-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<n;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){for(var i,r=0;r<t;)this.elements[r]&&!0!==this.elements[r]&&this.elements[r].getBaseElement()&&(i=this.elements[r].getBaseElement()),r+=1;i?this.layerElement.insertBefore(n,i):this.layerElement.appendChild(n)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initTransform(e,t,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&t.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=e/this.data.sr;else{var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}var n,i=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=i-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},CVContextData.prototype.duplicate=function(){var e=2*this._length,t=this.savedOp;this.savedOp=createTypedArray("float32",e),this.savedOp.set(t);var n=0;for(n=this._length;n<e;n+=1)this.saved[n]=createTypedArray("float32",16);this._length=e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVContextData.prototype.popTransform=function(){var e,t=this.saved[this.cArrPos],n=this.cTr.props;for(e=0;e<16;e+=1)n[e]=t[e];return t},CVContextData.prototype.popOpacity=function(){var e=this.savedOp[this.cArrPos];return this.cO=e,e},CVContextData.prototype.pop=function(){return this.cArrPos-=1,{transform:this.popTransform(),opacity:this.popOpacity()}},CVContextData.prototype.push=function(){var e,t=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var n=this.saved[this.cArrPos];for(e=0;e<16;e+=1)n[e]=t[e];this.savedOp[this.cArrPos]=this.cO,this.cArrPos+=1},CVContextData.prototype.getTransform=function(){return this.cTr},CVContextData.prototype.getOpacity=function(){return this.cO},CVContextData.prototype.setOpacity=function(e){this.cO=e},ShapeTransformManager.prototype={addTransformSequence:function(e){var t,n=e.length,i="_";for(t=0;t<n;t+=1)i+=e[t].transform.key+"_";var r=this.sequences[i];return r||(r={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[i]=r,this.sequenceList.push(r)),r},processSequence:function(e,t){for(var n,i=0,r=e.transforms.length,s=t;i<r&&!t;){if(e.transforms[i].transform.mProps._mdf){s=!0;break}i+=1}if(s)for(e.finalTransform.reset(),i=r-1;i>=0;i-=1)n=e.transforms[i].transform.mProps.v.props,e.finalTransform.transform(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]);e._mdf=s},processSequences:function(e){var t,n=this.sequenceList.length;for(t=0;t<n;t+=1)this.processSequence(this.sequenceList[t],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var e="__lottie_element_luma_buffer",t=null,n=null,i=null;function r(){var r,s,a;t||(r=createNS("svg"),s=createNS("filter"),a=createNS("feColorMatrix"),s.setAttribute("id",e),a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),s.appendChild(a),r.appendChild(s),r.setAttribute("id",e+"_svg"),featureSupport.svgLumaHidden&&(r.style.display="none"),i=r,document.body.appendChild(i),t=createTag("canvas"),(n=t.getContext("2d")).filter="url(#"+e+")",n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1))}return{load:r,get:function(i){return t||r(),t.width=i.width,t.height=i.height,n.filter="url(#"+e+")",t}}};function createCanvas(e,t){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(e,t);var n=createTag("canvas");return n.width=e,n.height=t,n}var assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas};function CVEffects(){}function CVMaskElement(e,t){var n;this.data=e,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var i=this.masksProperties.length,r=!1;for(n=0;n<i;n+=1)"n"!==this.masksProperties[n].mode&&(r=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);this.hasMasks=r,r&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(){},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var e,t,n,i,r=this.element.finalTransform.mat,s=this.element.canvasContext,a=this.masksProperties.length;for(s.beginPath(),e=0;e<a;e+=1)if("n"!==this.masksProperties[e].mode){var o;this.masksProperties[e].inv&&(s.moveTo(0,0),s.lineTo(this.element.globalData.compSize.w,0),s.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),s.lineTo(0,this.element.globalData.compSize.h),s.lineTo(0,0)),i=this.viewData[e].v,t=r.applyToPointArray(i.v[0][0],i.v[0][1],0),s.moveTo(t[0],t[1]);var l=i._length;for(o=1;o<l;o+=1)n=r.applyToTriplePoints(i.o[o-1],i.i[o],i.v[o]),s.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);n=r.applyToTriplePoints(i.o[o-1],i.i[0],i.v[0]),s.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}this.element.globalData.renderer.save(!0),s.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(e,t,n,i){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var r,s=4;"rc"===t.ty?s=5:"el"===t.ty?s=6:"sr"===t.ty&&(s=7),this.sh=ShapePropertyFactory.getShapeProp(e,t,s,e);var a,o=n.length;for(r=0;r<o;r+=1)n[r].closed||(a={transforms:i.addTransformSequence(n[r].transforms),trNodes:[]},this.styledShapes.push(a),n[r].elements.push(a))}function CVShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(e,t,n)}function CVTextElement(e,t,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(e,t,n)}function CVImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.img=t.imageLoader.getAsset(this.assetData),this.initElement(e,t,n)}function CVSolidElement(e,t,n){this.initElement(e,t,n)}function CanvasRendererBase(e,t){this.animationItem=e,this.renderConfig={clearCanvas:!t||void 0===t.clearCanvas||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",className:t&&t.className||"",id:t&&t.id||""},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function CVCompElement(e,t,n){this.completeLayers=!1,this.layers=e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function CanvasRenderer(e,t){this.animationItem=e,this.renderConfig={clearCanvas:!t||void 0===t.clearCanvas||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",className:t&&t.className||"",id:t&&t.id||"",runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HBaseElement(){}function HSolidElement(e,t,n){this.initElement(e,t,n)}function HShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(e,t,n),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(e,t,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(e,t,n)}function HCameraElement(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initHierarchy();var i=PropertyFactory.getProp;if(this.pe=i(this,e.pe,0,0,this),e.ks.p.s?(this.px=i(this,e.ks.p.x,1,0,this),this.py=i(this,e.ks.p.y,1,0,this),this.pz=i(this,e.ks.p.z,1,0,this)):this.p=i(this,e.ks.p,1,0,this),e.ks.a&&(this.a=i(this,e.ks.a,1,0,this)),e.ks.or.k.length&&e.ks.or.k[0].to){var r,s=e.ks.or.k.length;for(r=0;r<s;r+=1)e.ks.or.k[r].to=null,e.ks.or.k[r].ti=null}this.or=i(this,e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=i(this,e.ks.rx,0,degToRads,this),this.ry=i(this,e.ks.ry,0,degToRads,this),this.rz=i(this,e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,n)}function HybridRendererBase(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&!1===t.hideOnTransparent),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(e,t,n){this.layers=e.layers,this.supports3d=!e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function HybridRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&!1===t.hideOnTransparent),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"},runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var e=this.globalData.canvasContext,t=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(t);var n=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(n),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var t=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=t}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(e){e.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var e=this.buffers[0].getContext("2d");this.clearCanvas(e),e.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var e=this.buffers[1],t=e.getContext("2d");if(this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var n=assetLoader.getLumaCanvas(this.canvasContext.canvas);n.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(n,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(e,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(e){if(!this.hidden&&!this.data.hd&&(1!==this.data.td||e)){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var t=0===this.data.ty;this.prepareLayer(),this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(t),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(e,t){var n={data:e,type:e.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:!0===e.hd},i={};if("fl"===e.ty||"st"===e.ty?(i.c=PropertyFactory.getProp(this,e.c,1,255,this),i.c.k||(n.co="rgb("+bmFloor(i.c.v[0])+","+bmFloor(i.c.v[1])+","+bmFloor(i.c.v[2])+")")):"gf"!==e.ty&&"gs"!==e.ty||(i.s=PropertyFactory.getProp(this,e.s,1,null,this),i.e=PropertyFactory.getProp(this,e.e,1,null,this),i.h=PropertyFactory.getProp(this,e.h||{k:0},0,.01,this),i.a=PropertyFactory.getProp(this,e.a||{k:0},0,degToRads,this),i.g=new GradientProperty(this,e.g,this)),i.o=PropertyFactory.getProp(this,e.o,0,.01,this),"st"===e.ty||"gs"===e.ty){if(n.lc=lineCapEnum[e.lc||2],n.lj=lineJoinEnum[e.lj||2],1==e.lj&&(n.ml=e.ml),i.w=PropertyFactory.getProp(this,e.w,0,null,this),i.w.k||(n.wi=i.w.v),e.d){var r=new DashProperty(this,e.d,"canvas",this);i.d=r,i.d.k||(n.da=i.d.dashArray,n.do=i.d.dashoffset[0])}}else n.r=2===e.r?"evenodd":"nonzero";return this.stylesList.push(n),i.style=n,i},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(e){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}}},CVShapeElement.prototype.createShapeElement=function(e){var t=new CVShapeData(this,e,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){var e;this._isFirstFrame=!0;var t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(e){var t,n=this.stylesList.length;for(t=0;t<n;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.push(e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t].closed=!0},CVShapeElement.prototype.searchShapes=function(e,t,n,i,r){var s,a,o,l,c,h,u=e.length-1,d=[],p=[],f=[].concat(r);for(s=u;s>=0;s-=1){if((l=this.searchProcessedElement(e[s]))?t[s]=n[l-1]:e[s]._shouldRender=i,"fl"===e[s].ty||"st"===e[s].ty||"gf"===e[s].ty||"gs"===e[s].ty)l?t[s].style.closed=!1:t[s]=this.createStyleElement(e[s],f),d.push(t[s].style);else if("gr"===e[s].ty){if(l)for(o=t[s].it.length,a=0;a<o;a+=1)t[s].prevViewData[a]=t[s].it[a];else t[s]=this.createGroupElement(e[s]);this.searchShapes(e[s].it,t[s].it,t[s].prevViewData,i,f)}else"tr"===e[s].ty?(l||(h=this.createTransformElement(e[s]),t[s]=h),f.push(t[s]),this.addTransformToStyleList(t[s])):"sh"===e[s].ty||"rc"===e[s].ty||"el"===e[s].ty||"sr"===e[s].ty?l||(t[s]=this.createShapeElement(e[s])):"tm"===e[s].ty||"rd"===e[s].ty||"pb"===e[s].ty||"zz"===e[s].ty||"op"===e[s].ty?(l?(c=t[s]).closed=!1:((c=ShapeModifiers.getModifier(e[s].ty)).init(this,e[s]),t[s]=c,this.shapeModifiers.push(c)),p.push(c)):"rp"===e[s].ty&&(l?(c=t[s]).closed=!0:(c=ShapeModifiers.getModifier(e[s].ty),t[s]=c,c.init(this,e,s,t),this.shapeModifiers.push(c),i=!1),p.push(c));this.addProcessedElement(e[s],s+1)}for(this.removeTransformFromStyleList(),this.closeStyles(d),u=p.length,s=0;s<u;s+=1)p[s].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(e,t){(e._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=e.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var e,t,n,i,r,s,a,o,l,c=this.stylesList.length,h=this.globalData.renderer,u=this.globalData.canvasContext;for(e=0;e<c;e+=1)if(("st"!==(o=(l=this.stylesList[e]).type)&&"gs"!==o||0!==l.wi)&&l.data._shouldRender&&0!==l.coOp&&0!==this.globalData.currentGlobalAlpha){for(h.save(),s=l.elements,"st"===o||"gs"===o?(u.strokeStyle="st"===o?l.co:l.grd,u.lineWidth=l.wi,u.lineCap=l.lc,u.lineJoin=l.lj,u.miterLimit=l.ml||0):u.fillStyle="fl"===o?l.co:l.grd,h.ctxOpacity(l.coOp),"st"!==o&&"gs"!==o&&u.beginPath(),h.ctxTransform(l.preTransforms.finalTransform.props),n=s.length,t=0;t<n;t+=1){for("st"!==o&&"gs"!==o||(u.beginPath(),l.da&&(u.setLineDash(l.da),u.lineDashOffset=l.do)),r=(a=s[t].trNodes).length,i=0;i<r;i+=1)"m"===a[i].t?u.moveTo(a[i].p[0],a[i].p[1]):"c"===a[i].t?u.bezierCurveTo(a[i].pts[0],a[i].pts[1],a[i].pts[2],a[i].pts[3],a[i].pts[4],a[i].pts[5]):u.closePath();"st"!==o&&"gs"!==o||(u.stroke(),l.da&&u.setLineDash(this.dashResetter))}"st"!==o&&"gs"!==o&&u.fill(l.r),h.restore()}},CVShapeElement.prototype.renderShape=function(e,t,n,i){var r,s;for(s=e,r=t.length-1;r>=0;r-=1)"tr"===t[r].ty?(s=n[r].transform,this.renderShapeTransform(e,s)):"sh"===t[r].ty||"el"===t[r].ty||"rc"===t[r].ty||"sr"===t[r].ty?this.renderPath(t[r],n[r]):"fl"===t[r].ty?this.renderFill(t[r],n[r],s):"st"===t[r].ty?this.renderStroke(t[r],n[r],s):"gf"===t[r].ty||"gs"===t[r].ty?this.renderGradientFill(t[r],n[r],s):"gr"===t[r].ty?this.renderShape(s,t[r].it,n[r].it):t[r].ty;i&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(e,t){if(this._isFirstFrame||t._mdf||e.transforms._mdf){var n,i,r,s=e.trNodes,a=t.paths,o=a._length;s.length=0;var l=e.transforms.finalTransform;for(r=0;r<o;r+=1){var c=a.shapes[r];if(c&&c.v){for(i=c._length,n=1;n<i;n+=1)1===n&&s.push({t:"m",p:l.applyToPointArray(c.v[0][0],c.v[0][1],0)}),s.push({t:"c",pts:l.applyToTriplePoints(c.o[n-1],c.i[n],c.v[n])});1===i&&s.push({t:"m",p:l.applyToPointArray(c.v[0][0],c.v[0][1],0)}),c.c&&i&&(s.push({t:"c",pts:l.applyToTriplePoints(c.o[n-1],c.i[0],c.v[0])}),s.push({t:"z"}))}}e.trNodes=s}},CVShapeElement.prototype.renderPath=function(e,t){if(!0!==e.hd&&e._shouldRender){var n,i=t.styledShapes.length;for(n=0;n<i;n+=1)this.renderStyledShape(t.styledShapes[n],t.sh)}},CVShapeElement.prototype.renderFill=function(e,t,n){var i=t.style;(t.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(i.coOp=t.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(e,t,n){var i,r=t.style;if(!r.grd||t.g._mdf||t.s._mdf||t.e._mdf||1!==e.t&&(t.h._mdf||t.a._mdf)){var s,a=this.globalData.canvasContext,o=t.s.v,l=t.e.v;if(1===e.t)i=a.createLinearGradient(o[0],o[1],l[0],l[1]);else{var c=Math.sqrt(Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2)),h=Math.atan2(l[1]-o[1],l[0]-o[0]),u=t.h.v;u>=1?u=.99:u<=-1&&(u=-.99);var d=c*u,p=Math.cos(h+t.a.v)*d+o[0],f=Math.sin(h+t.a.v)*d+o[1];i=a.createRadialGradient(p,f,0,o[0],o[1],c)}var m=e.g.p,g=t.g.c,v=1;for(s=0;s<m;s+=1)t.g._hasOpacity&&t.g._collapsable&&(v=t.g.o[2*s+1]),i.addColorStop(g[4*s]/100,"rgba("+g[4*s+1]+","+g[4*s+2]+","+g[4*s+3]+","+v+")");r.grd=i}r.coOp=t.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(e,t,n){var i=t.style,r=t.d;r&&(r._mdf||this._isFirstFrame)&&(i.da=r.dashArray,i.do=r.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(i.coOp=t.o.v*n.opacity),(t.w._mdf||this._isFirstFrame)&&(i.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=!1;e.fc?(t=!0,this.values.fill=this.buildColor(e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var n=!1;e.sc&&(n=!0,this.values.stroke=this.buildColor(e.sc),this.values.sWidth=e.sw);var i,r,s,a,o,l,c,h,u,d,p,f,m=this.globalData.fontManager.getFontByName(e.f),g=e.l,v=this.mHelper;this.stroke=n,this.values.fValue=e.finalSize+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily,r=e.finalText.length;var y=this.data.singleShape,_=.001*e.tr*e.finalSize,b=0,x=0,S=!0,E=0;for(i=0;i<r;i+=1){a=(s=this.globalData.fontManager.getCharData(e.finalText[i],m.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))&&s.data||{},v.reset(),y&&g[i].n&&(b=-_,x+=e.yOffset,x+=S?1:0,S=!1),u=(c=a.shapes?a.shapes[0].it:[]).length,v.scale(e.finalSize/100,e.finalSize/100),y&&this.applyTextPropertiesToMatrix(e,v,g[i].line,b,x),p=createSizedArray(u-1);var w=0;for(h=0;h<u;h+=1)if("sh"===c[h].ty){for(l=c[h].ks.k.i.length,d=c[h].ks.k,f=[],o=1;o<l;o+=1)1===o&&f.push(v.applyToX(d.v[0][0],d.v[0][1],0),v.applyToY(d.v[0][0],d.v[0][1],0)),f.push(v.applyToX(d.o[o-1][0],d.o[o-1][1],0),v.applyToY(d.o[o-1][0],d.o[o-1][1],0),v.applyToX(d.i[o][0],d.i[o][1],0),v.applyToY(d.i[o][0],d.i[o][1],0),v.applyToX(d.v[o][0],d.v[o][1],0),v.applyToY(d.v[o][0],d.v[o][1],0));f.push(v.applyToX(d.o[o-1][0],d.o[o-1][1],0),v.applyToY(d.o[o-1][0],d.o[o-1][1],0),v.applyToX(d.i[0][0],d.i[0][1],0),v.applyToY(d.i[0][0],d.i[0][1],0),v.applyToX(d.v[0][0],d.v[0][1],0),v.applyToY(d.v[0][0],d.v[0][1],0)),p[w]=f,w+=1}y&&(b+=g[i].l,b+=_),this.textSpans[E]?this.textSpans[E].elem=p:this.textSpans[E]={elem:p},E+=1}},CVTextElement.prototype.renderInnerContent=function(){var e,t,n,i,r,s,a=this.canvasContext;a.font=this.values.fValue,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var o,l=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;t=c.length;var h,u,d=null,p=null,f=null;for(e=0;e<t;e+=1)if(!c[e].n){if((o=l[e])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(o.p),this.globalData.renderer.ctxOpacity(o.o)),this.fill){for(o&&o.fc?d!==o.fc&&(d=o.fc,a.fillStyle=o.fc):d!==this.values.fill&&(d=this.values.fill,a.fillStyle=this.values.fill),i=(h=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<i;n+=1)for(s=(u=h[n]).length,this.globalData.canvasContext.moveTo(u[0],u[1]),r=2;r<s;r+=6)this.globalData.canvasContext.bezierCurveTo(u[r],u[r+1],u[r+2],u[r+3],u[r+4],u[r+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(o&&o.sw?f!==o.sw&&(f=o.sw,a.lineWidth=o.sw):f!==this.values.sWidth&&(f=this.values.sWidth,a.lineWidth=this.values.sWidth),o&&o.sc?p!==o.sc&&(p=o.sc,a.strokeStyle=o.sc):p!==this.values.stroke&&(p=this.values.stroke,a.strokeStyle=this.values.stroke),i=(h=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<i;n+=1)for(s=(u=h[n]).length,this.globalData.canvasContext.moveTo(u[0],u[1]),r=2;r<s;r+=6)this.globalData.canvasContext.bezierCurveTo(u[r],u[r+1],u[r+2],u[r+3],u[r+4],u[r+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}o&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var e=createTag("canvas");e.width=this.assetData.w,e.height=this.assetData.h;var t,n,i=e.getContext("2d"),r=this.img.width,s=this.img.height,a=r/s,o=this.assetData.w/this.assetData.h,l=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;a>o&&"xMidYMid slice"===l||a<o&&"xMidYMid slice"!==l?t=(n=s)*o:n=(t=r)/o,i.drawImage(this.img,(r-t)/2,(s-n)/2,t,n,0,0,this.assetData.w,this.assetData.h),this.img=e}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var e=this.canvasContext;e.fillStyle=this.data.sc,e.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRendererBase.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(e){if(1!==e[0]||0!==e[1]||0!==e[4]||1!==e[5]||0!==e[12]||0!==e[13])if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(e);var t=this.contextData.getTransform(),n=t.props;this.transformMat.transform(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]),t.cloneFromProps(this.transformMat.props);var i=t.props;this.canvasContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])}else this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13])},CanvasRendererBase.prototype.ctxOpacity=function(e){var t=this.contextData.getOpacity();if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=e<0?0:e,void(this.globalData.currentGlobalAlpha=t);t*=e<0?0:e,this.contextData.setOpacity(t),this.globalData.currentGlobalAlpha!==t&&(this.canvasContext.globalAlpha=t,this.globalData.currentGlobalAlpha=t)},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(e){this.renderConfig.clearCanvas?(e&&this.canvasContext.save(),this.contextData.push()):this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(e){if(this.renderConfig.clearCanvas){e&&(this.canvasContext.restore(),this.globalData.blendMode="source-over");var t=this.contextData.pop(),n=t.transform,i=t.opacity;this.canvasContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13]),this.globalData.currentGlobalAlpha!==i&&(this.canvasContext.globalAlpha=i,this.globalData.currentGlobalAlpha=i)}else this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(e){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var t=this.animationItem.container.style;t.width="100%",t.height="100%";var n="0px 0px 0px";t.transformOrigin=n,t.mozTransformOrigin=n,t.webkitTransformOrigin=n,t["-webkit-transform"]=n,t.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(e,t){var n,i,r,s;if(this.reset(),e?(n=e,i=t,this.canvasContext.canvas.width=n,this.canvasContext.canvas.height=i):(this.animationItem.wrapper&&this.animationItem.container?(n=this.animationItem.wrapper.offsetWidth,i=this.animationItem.wrapper.offsetHeight):(n=this.canvasContext.canvas.width,i=this.canvasContext.canvas.height),this.canvasContext.canvas.width=n*this.renderConfig.dpr,this.canvasContext.canvas.height=i*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var a=this.renderConfig.preserveAspectRatio.split(" "),o=a[1]||"meet",l=a[0]||"xMidYMid",c=l.substr(0,4),h=l.substr(4);r=n/i,(s=this.transformCanvas.w/this.transformCanvas.h)>r&&"meet"===o||s<r&&"slice"===o?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=i/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===c&&(s<r&&"meet"===o||s>r&&"slice"===o)?(n-this.transformCanvas.w*(i/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===c&&(s<r&&"meet"===o||s>r&&"slice"===o)?(n-this.transformCanvas.w*(i/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===h&&(s>r&&"meet"===o||s<r&&"slice"===o)?(i-this.transformCanvas.h*(n/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===h&&(s>r&&"meet"===o||s<r&&"slice"===o)?(i-this.transformCanvas.h*(n/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var e;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),e=(this.layers?this.layers.length:0)-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(e,t){if((this.renderedFrame!==e||!0!==this.renderConfig.clearCanvas||t)&&!this.destroyed&&-1!==e){var n;this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=e;var i=this.layers.length;for(this.completeLayers||this.checkLayers(e),n=0;n<i;n+=1)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(e-this.layers[n].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),n=i-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){var n=this.createItem(this.layers[e],this,this.globalData);t[e]=n,n.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var e,t=this.canvasContext;for(t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip(),e=this.layers.length-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var e;for(e=this.layers.length-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var e=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var t=this.finalTransform.mat.toCSS();e.transform=t,e.webkitTransform=t}this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?((e=createNS("rect")).setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((e=createTag("div")).style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var e;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),e=this.svgElement;else{e=createNS("svg");var t=this.comp.data?this.comp.data:this.globalData.compSize;e.setAttribute("width",t.w),e.setAttribute("height",t.h),e.appendChild(this.shapesContainer),this.layerElement.appendChild(e)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=e},HShapeElement.prototype.getTransformedPoint=function(e,t){var n,i=e.length;for(n=0;n<i;n+=1)t=e[n].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(e,t){var n,i,r,s,a,o=e.sh.v,l=e.transformers,c=o._length;if(!(c<=1)){for(n=0;n<c-1;n+=1)i=this.getTransformedPoint(l,o.v[n]),r=this.getTransformedPoint(l,o.o[n]),s=this.getTransformedPoint(l,o.i[n+1]),a=this.getTransformedPoint(l,o.v[n+1]),this.checkBounds(i,r,s,a,t);o.c&&(i=this.getTransformedPoint(l,o.v[n]),r=this.getTransformedPoint(l,o.o[n]),s=this.getTransformedPoint(l,o.i[0]),a=this.getTransformedPoint(l,o.v[0]),this.checkBounds(i,r,s,a,t))}},HShapeElement.prototype.checkBounds=function(e,t,n,i,r){this.getBoundsOfCurve(e,t,n,i);var s=this.shapeBoundingBox;r.x=bmMin(s.left,r.x),r.xMax=bmMax(s.right,r.xMax),r.y=bmMin(s.top,r.y),r.yMax=bmMax(s.bottom,r.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(e,t,n,i){for(var r,s,a,o,l,c,h,u=[[e[0],i[0]],[e[1],i[1]]],d=0;d<2;++d)s=6*e[d]-12*t[d]+6*n[d],r=-3*e[d]+9*t[d]-9*n[d]+3*i[d],a=3*t[d]-3*e[d],s|=0,a|=0,0==(r|=0)&&0===s||(0===r?(o=-a/s)>0&&o<1&&u[d].push(this.calculateF(o,e,t,n,i,d)):(l=s*s-4*a*r)>=0&&((c=(-s+bmSqrt(l))/(2*r))>0&&c<1&&u[d].push(this.calculateF(c,e,t,n,i,d)),(h=(-s-bmSqrt(l))/(2*r))>0&&h<1&&u[d].push(this.calculateF(h,e,t,n,i,d))));this.shapeBoundingBox.left=bmMin.apply(null,u[0]),this.shapeBoundingBox.top=bmMin.apply(null,u[1]),this.shapeBoundingBox.right=bmMax.apply(null,u[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,u[1])},HShapeElement.prototype.calculateF=function(e,t,n,i,r,s){return bmPow(1-e,3)*t[s]+3*bmPow(1-e,2)*e*n[s]+3*(1-e)*bmPow(e,2)*i[s]+bmPow(e,3)*r[s]},HShapeElement.prototype.calculateBoundingBox=function(e,t){var n,i=e.length;for(n=0;n<i;n+=1)e[n]&&e[n].sh?this.calculateShapeBoundingBox(e[n],t):e[n]&&e[n].it?this.calculateBoundingBox(e[n].it,t):e[n]&&e[n].style&&e[n].w&&this.expandStrokeBoundingBox(e[n].w,t)},HShapeElement.prototype.expandStrokeBoundingBox=function(e,t){var n=0;if(e.keyframes){for(var i=0;i<e.keyframes.length;i+=1){var r=e.keyframes[i].s;r>n&&(n=r)}n*=e.mult}else n=e.v*e.mult;t.x-=n,t.xMax+=n,t.y-=n,t.yMax+=n},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var e=this.tempBoundingBox,t=999999;if(e.x=t,e.xMax=-t,e.y=t,e.yMax=-t,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,this.currentBoxContains(e))return;var n=!1;if(this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),n=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),n=!0),n||this.currentBBox.x!==e.x||this.currentBBox.y!==e.y){this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var i=this.shapeCont.style,r="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";i.transform=r,i.webkitTransform=r}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var e=createNS("g");this.maskedElement.appendChild(e),this.innerElem=e}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=this.innerElem.style,n=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)";t.fill=n,t.color=n,e.sc&&(t.stroke=this.buildColor(e.sc),t.strokeWidth=e.sw+"px");var i,r,s=this.globalData.fontManager.getFontByName(e.f);if(!this.globalData.fontManager.chars)if(t.fontSize=e.finalSize+"px",t.lineHeight=e.finalSize+"px",s.fClass)this.innerElem.className=s.fClass;else{t.fontFamily=s.fFamily;var a=e.fWeight,o=e.fStyle;t.fontStyle=o,t.fontWeight=a}var l,c,h,u=e.l;r=u.length;var d,p=this.mHelper,f="",m=0;for(i=0;i<r;i+=1){if(this.globalData.fontManager.chars?(this.textPaths[m]?l=this.textPaths[m]:((l=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),l.setAttribute("stroke-linejoin",lineJoinEnum[2]),l.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[m]?h=(c=this.textSpans[m]).children[0]:((c=createTag("div")).style.lineHeight=0,(h=createNS("svg")).appendChild(l),styleDiv(c)))):this.isMasked?l=this.textPaths[m]?this.textPaths[m]:createNS("text"):this.textSpans[m]?(c=this.textSpans[m],l=this.textPaths[m]):(styleDiv(c=createTag("span")),styleDiv(l=createTag("span")),c.appendChild(l)),this.globalData.fontManager.chars){var g,v=this.globalData.fontManager.getCharData(e.finalText[i],s.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily);if(g=v?v.data:null,p.reset(),g&&g.shapes&&g.shapes.length&&(d=g.shapes[0].it,p.scale(e.finalSize/100,e.finalSize/100),f=this.createPathShape(p,d),l.setAttribute("d",f)),this.isMasked)this.innerElem.appendChild(l);else{if(this.innerElem.appendChild(c),g&&g.shapes){document.body.appendChild(h);var y=h.getBBox();h.setAttribute("width",y.width+2),h.setAttribute("height",y.height+2),h.setAttribute("viewBox",y.x-1+" "+(y.y-1)+" "+(y.width+2)+" "+(y.height+2));var _=h.style,b="translate("+(y.x-1)+"px,"+(y.y-1)+"px)";_.transform=b,_.webkitTransform=b,u[i].yOffset=y.y-1}else h.setAttribute("width",1),h.setAttribute("height",1);c.appendChild(h)}}else if(l.textContent=u[i].val,l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(l);else{this.innerElem.appendChild(c);var x=l.style,S="translate3d(0,"+-e.finalSize/1.2+"px,0)";x.transform=S,x.webkitTransform=S}this.isMasked?this.textSpans[m]=l:this.textSpans[m]=c,this.textSpans[m].style.display="block",this.textPaths[m]=l,m+=1}for(;m<this.textSpans.length;)this.textSpans[m].style.display="none",m+=1},HTextElement.prototype.renderInnerContent=function(){var e;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),e=this.svgElement.style;var t="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";e.transform=t,e.webkitTransform=t}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var n,i,r,s,a,o=0,l=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;for(i=c.length,n=0;n<i;n+=1)c[n].n?o+=1:(s=this.textSpans[n],a=this.textPaths[n],r=l[o],o+=1,r._mdf.m&&(this.isMasked?s.setAttribute("transform",r.m):(s.style.webkitTransform=r.m,s.style.transform=r.m)),s.style.opacity=r.o,r.sw&&r._mdf.sw&&a.setAttribute("stroke-width",r.sw),r.sc&&r._mdf.sc&&a.setAttribute("stroke",r.sc),r.fc&&r._mdf.fc&&(a.setAttribute("fill",r.fc),a.style.color=r.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var h=this.innerElem.getBBox();if(this.currentBBox.w!==h.width&&(this.currentBBox.w=h.width,this.svgElement.setAttribute("width",h.width)),this.currentBBox.h!==h.height&&(this.currentBBox.h=h.height,this.svgElement.setAttribute("height",h.height)),this.currentBBox.w!==h.width+2||this.currentBBox.h!==h.height+2||this.currentBBox.x!==h.x-1||this.currentBBox.y!==h.y-1){this.currentBBox.w=h.width+2,this.currentBBox.h=h.height+2,this.currentBBox.x=h.x-1,this.currentBBox.y=h.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),e=this.svgElement.style;var u="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";e.transform=u,e.webkitTransform=u}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var e,t,n,i,r=this.comp.threeDElements.length;for(e=0;e<r;e+=1)if("3d"===(t=this.comp.threeDElements[e]).type){n=t.perspectiveElem.style,i=t.container.style;var s=this.pe.v+"px",a="0px 0px 0px",o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";n.perspective=s,n.webkitPerspective=s,i.transformOrigin=a,i.mozTransformOrigin=a,i.webkitTransformOrigin=a,n.transform=o,n.webkitTransform=o}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e,t,n=this._isFirstFrame;if(this.hierarchy)for(t=this.hierarchy.length,e=0;e<t;e+=1)n=this.hierarchy[e].finalTransform.mProp._mdf||n;if(n||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(e=t=this.hierarchy.length-1;e>=0;e-=1){var i=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-i.p.v[0],-i.p.v[1],i.p.v[2]),this.mat.rotateX(-i.or.v[0]).rotateY(-i.or.v[1]).rotateZ(i.or.v[2]),this.mat.rotateX(-i.rx.v).rotateY(-i.ry.v).rotateZ(i.rz.v),this.mat.scale(1/i.s.v[0],1/i.s.v[1],1/i.s.v[2]),this.mat.translate(i.a.v[0],i.a.v[1],i.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var r;r=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var s=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2)),a=[r[0]/s,r[1]/s,r[2]/s],o=Math.sqrt(a[2]*a[2]+a[0]*a[0]),l=Math.atan2(a[1],o),c=Math.atan2(a[0],-a[2]);this.mat.rotateY(c).rotateX(-l)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var h=!this._prevMat.equals(this.mat);if((h||this.pe._mdf)&&this.comp.threeDElements){var u,d,p;for(t=this.comp.threeDElements.length,e=0;e<t;e+=1)if("3d"===(u=this.comp.threeDElements[e]).type){if(h){var f=this.mat.toCSS();(p=u.container.style).transform=f,p.webkitTransform=f}this.pe._mdf&&((d=u.perspectiveElem.style).perspective=this.pe.v+"px",d.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.crossOrigin="anonymous",t.src=e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){var i=this.layers[t];if(i.ddd&&this.supports3d)this.addTo3dContainer(n,t);else if(this.threeDElements)this.addTo3dContainer(n,t);else{for(var r,s,a=0;a<t;)this.elements[a]&&!0!==this.elements[a]&&this.elements[a].getBaseElement&&(s=this.elements[a],r=(this.layers[a].ddd?this.getThreeDContainerByPos(a):s.getBaseElement())||r),a+=1;r?i.ddd&&this.supports3d||this.layerElement.insertBefore(n,r):i.ddd&&this.supports3d||this.layerElement.appendChild(n)}}},HybridRendererBase.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.globalData,this):new SVGShapeElement(e,this.globalData,this)},HybridRendererBase.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.globalData,this):new SVGTextLottieElement(e,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.globalData,this):new IImageElement(e,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.globalData,this):new ISolidElement(e,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(e){for(var t=0,n=this.threeDElements.length;t<n;){if(this.threeDElements[t].startPos<=e&&this.threeDElements[t].endPos>=e)return this.threeDElements[t].perspectiveElem;t+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(e,t){var n,i,r=createTag("div");styleDiv(r);var s=createTag("div");if(styleDiv(s),"3d"===t){(n=r.style).width=this.globalData.compSize.w+"px",n.height=this.globalData.compSize.h+"px";var a="50% 50%";n.webkitTransformOrigin=a,n.mozTransformOrigin=a,n.transformOrigin=a;var o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(i=s.style).transform=o,i.webkitTransform=o}r.appendChild(s);var l={container:s,perspectiveElem:r,startPos:e,endPos:e,type:t};return this.threeDElements.push(l),l},HybridRendererBase.prototype.build3dContainers=function(){var e,t,n=this.layers.length,i="";for(e=0;e<n;e+=1)this.layers[e].ddd&&3!==this.layers[e].ty?("3d"!==i&&(i="3d",t=this.createThreeDContainer(e,"3d")),t.endPos=Math.max(t.endPos,e)):("2d"!==i&&(i="2d",t=this.createThreeDContainer(e,"2d")),t.endPos=Math.max(t.endPos,e));for(e=(n=this.threeDElements.length)-1;e>=0;e-=1)this.resizerElem.appendChild(this.threeDElements[e].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(e,t){for(var n=0,i=this.threeDElements.length;n<i;){if(t<=this.threeDElements[n].endPos){for(var r,s=this.threeDElements[n].startPos;s<t;)this.elements[s]&&this.elements[s].getBaseElement&&(r=this.elements[s].getBaseElement()),s+=1;r?this.threeDElements[n].container.insertBefore(e,r):this.threeDElements[n].container.appendChild(e);break}n+=1}},HybridRendererBase.prototype.configAnimation=function(e){var t=createTag("div"),n=this.animationItem.wrapper,i=t.style;i.width=e.w+"px",i.height=e.h+"px",this.resizerElem=t,styleDiv(t),i.transformStyle="flat",i.mozTransformStyle="flat",i.webkitTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),n.appendChild(t),i.overflow="hidden";var r=createNS("svg");r.setAttribute("width","1"),r.setAttribute("height","1"),styleDiv(r),this.resizerElem.appendChild(r);var s=createNS("defs");r.appendChild(s),this.data=e,this.setupGlobalData(e,r),this.globalData.defs=s,this.layers=e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var e;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var e,t,n,i,r=this.animationItem.wrapper.offsetWidth,s=this.animationItem.wrapper.offsetHeight,a=r/s;this.globalData.compSize.w/this.globalData.compSize.h>a?(e=r/this.globalData.compSize.w,t=r/this.globalData.compSize.w,n=0,i=(s-this.globalData.compSize.h*(r/this.globalData.compSize.w))/2):(e=s/this.globalData.compSize.h,t=s/this.globalData.compSize.h,n=(r-this.globalData.compSize.w*(s/this.globalData.compSize.h))/2,i=0);var o=this.resizerElem.style;o.webkitTransform="matrix3d("+e+",0,0,0,0,"+t+",0,0,0,0,1,0,"+n+","+i+",0,1)",o.transform=o.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var e,t=this.globalData.compSize.w,n=this.globalData.compSize.h,i=this.threeDElements.length;for(e=0;e<i;e+=1){var r=this.threeDElements[e].perspectiveElem.style;r.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(n,2))+"px",r.perspective=r.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(e){var t,n=e.length,i=createTag("div");for(t=0;t<n;t+=1)if(e[t].xt){var r=this.createComp(e[t],i,this.globalData.comp,null);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(e,t){for(var n,i=0;i<t;)this.elements[i]&&this.elements[i].getBaseElement&&(n=this.elements[i].getBaseElement()),i+=1;n?this.layerElement.insertBefore(e,n):this.layerElement.appendChild(e)},HCompElement.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)};var CompExpressionInterface=function(e){function t(t){for(var n=0,i=e.layers.length;n<i;){if(e.layers[n].nm===t||e.layers[n].ind===t)return e.elements[n].layerInterface;n+=1}return null}return Object.defineProperty(t,"_name",{value:e.data.nm}),t.layer=t,t.pixelAspect=1,t.height=e.data.h||e.globalData.compSize.h,t.width=e.data.w||e.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/e.globalData.frameRate,t.displayStartTime=0,t.numLayers=e.layers.length,t},Expressions=function(){var e={initExpressions:function(e){var t=0,n=[];e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer),e.renderer.globalData.pushExpression=function(){t+=1},e.renderer.globalData.popExpression=function(){0==(t-=1)&&function(){var e,t=n.length;for(e=0;e<t;e+=1)n[e].release();n.length=0}()},e.renderer.globalData.registerExpressionProperty=function(e){-1===n.indexOf(e)&&n.push(e)}}};return e}(),MaskManagerInterface=function(){function e(e,t){this._mask=e,this._data=t}return Object.defineProperty(e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(e.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(t){var n,i=createSizedArray(t.viewData.length),r=t.viewData.length;for(n=0;n<r;n+=1)i[n]=new e(t.viewData[n],t.masksProperties[n]);return function(e){for(n=0;n<r;){if(t.masksProperties[n].nm===e)return i[n];n+=1}return null}}}(),ExpressionPropertyInterface=function(){var e={pv:0,v:0,mult:1},t={pv:[0,0,0],v:[0,0,0],mult:1};function n(e,t,n){Object.defineProperty(e,"velocity",{get:function(){return t.getVelocityAtTime(t.comp.currentFrame)}}),e.numKeys=t.keyframes?t.keyframes.length:0,e.key=function(i){if(!e.numKeys)return 0;var r="";r="s"in t.keyframes[i-1]?t.keyframes[i-1].s:"e"in t.keyframes[i-2]?t.keyframes[i-2].e:t.keyframes[i-2].s;var s="unidimensional"===n?new Number(r):Object.assign({},r);return s.time=t.keyframes[i-1].t/t.elem.comp.globalData.frameRate,s.value="unidimensional"===n?r[0]:r,s},e.valueAtTime=t.getValueAtTime,e.speedAtTime=t.getSpeedAtTime,e.velocityAtTime=t.getVelocityAtTime,e.propertyGroup=t.propertyGroup}function i(){return e}return function(r){return r?"unidimensional"===r.propType?function(t){t&&"pv"in t||(t=e);var i=1/t.mult,r=t.pv*i,s=new Number(r);return s.value=r,n(s,t,"unidimensional"),function(){return t.k&&t.getValue(),r=t.v*i,s.value!==r&&((s=new Number(r)).value=r,n(s,t,"unidimensional")),s}}(r):function(e){e&&"pv"in e||(e=t);var i=1/e.mult,r=e.data&&e.data.l||e.pv.length,s=createTypedArray("float32",r),a=createTypedArray("float32",r);return s.value=a,n(s,e,"multidimensional"),function(){e.k&&e.getValue();for(var t=0;t<r;t+=1)a[t]=e.v[t]*i,s[t]=a[t];return s}}(r):i}}(),TransformExpressionInterface=function(e){function t(e){switch(e){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"ADBE Rotate X":return t.xRotation;case"ADBE Rotate Y":return t.yRotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"ADBE Position_0":return t.xPosition;case"ADBE Position_1":return t.yPosition;case"ADBE Position_2":return t.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity;default:return null}}var n,i,r,s;return Object.defineProperty(t,"rotation",{get:ExpressionPropertyInterface(e.r||e.rz)}),Object.defineProperty(t,"zRotation",{get:ExpressionPropertyInterface(e.rz||e.r)}),Object.defineProperty(t,"xRotation",{get:ExpressionPropertyInterface(e.rx)}),Object.defineProperty(t,"yRotation",{get:ExpressionPropertyInterface(e.ry)}),Object.defineProperty(t,"scale",{get:ExpressionPropertyInterface(e.s)}),e.p?s=ExpressionPropertyInterface(e.p):(n=ExpressionPropertyInterface(e.px),i=ExpressionPropertyInterface(e.py),e.pz&&(r=ExpressionPropertyInterface(e.pz))),Object.defineProperty(t,"position",{get:function(){return e.p?s():[n(),i(),r?r():0]}}),Object.defineProperty(t,"xPosition",{get:ExpressionPropertyInterface(e.px)}),Object.defineProperty(t,"yPosition",{get:ExpressionPropertyInterface(e.py)}),Object.defineProperty(t,"zPosition",{get:ExpressionPropertyInterface(e.pz)}),Object.defineProperty(t,"anchorPoint",{get:ExpressionPropertyInterface(e.a)}),Object.defineProperty(t,"opacity",{get:ExpressionPropertyInterface(e.o)}),Object.defineProperty(t,"skew",{get:ExpressionPropertyInterface(e.sk)}),Object.defineProperty(t,"skewAxis",{get:ExpressionPropertyInterface(e.sa)}),Object.defineProperty(t,"orientation",{get:ExpressionPropertyInterface(e.or)}),t},LayerExpressionInterface=function(){function e(e){var t=new Matrix;return void 0!==e?this._elem.finalTransform.mProp.getValueAtTime(e).clone(t):this._elem.finalTransform.mProp.applyToMatrix(t),t}function t(e,t){var n=this.getMatrix(t);return n.props[12]=0,n.props[13]=0,n.props[14]=0,this.applyPoint(n,e)}function n(e,t){var n=this.getMatrix(t);return this.applyPoint(n,e)}function i(e,t){var n=this.getMatrix(t);return n.props[12]=0,n.props[13]=0,n.props[14]=0,this.invertPoint(n,e)}function r(e,t){var n=this.getMatrix(t);return this.invertPoint(n,e)}function s(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var n,i=this._elem.hierarchy.length;for(n=0;n<i;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(e)}return e.applyToPointArray(t[0],t[1],t[2]||0)}function a(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var n,i=this._elem.hierarchy.length;for(n=0;n<i;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(e)}return e.inversePoint(t)}function o(e){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){var n,i=this._elem.hierarchy.length;for(n=0;n<i;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(t);return t.inversePoint(e)}return t.inversePoint(e)}function l(){return[1,1,1,1]}return function(c){var h;function u(e){switch(e){case"ADBE Root Vectors Group":case"Contents":case 2:return u.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return h;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return u.effect;case"ADBE Text Properties":return u.textInterface;default:return null}}u.getMatrix=e,u.invertPoint=a,u.applyPoint=s,u.toWorld=n,u.toWorldVec=t,u.fromWorld=r,u.fromWorldVec=i,u.toComp=n,u.fromComp=o,u.sampleImage=l,u.sourceRectAtTime=c.sourceRectAtTime.bind(c),u._elem=c;var d=getDescriptor(h=TransformExpressionInterface(c.finalTransform.mProp),"anchorPoint");return Object.defineProperties(u,{hasParent:{get:function(){return c.hierarchy.length}},parent:{get:function(){return c.hierarchy[0].layerInterface}},rotation:getDescriptor(h,"rotation"),scale:getDescriptor(h,"scale"),position:getDescriptor(h,"position"),opacity:getDescriptor(h,"opacity"),anchorPoint:d,anchor_point:d,transform:{get:function(){return h}},active:{get:function(){return c.isInRange}}}),u.startTime=c.data.st,u.index=c.data.ind,u.source=c.data.refId,u.height=0===c.data.ty?c.data.h:100,u.width=0===c.data.ty?c.data.w:100,u.inPoint=c.data.ip/c.comp.globalData.frameRate,u.outPoint=c.data.op/c.comp.globalData.frameRate,u._name=c.data.nm,u.registerMaskInterface=function(e){u.mask=new MaskManagerInterface(e,c)},u.registerEffectsInterface=function(e){u.effect=e},u}}(),propertyGroupFactory=function(e,t){return function(n){return(n=void 0===n?1:n)<=0?e:t(n-1)}},PropertyInterface=function(e,t){var n={_name:e};return function(e){return(e=void 0===e?1:e)<=0?n:t(e-1)}},EffectsExpressionInterface=function(){function e(n,i,r,s){function a(e){for(var t=n.ef,i=0,r=t.length;i<r;){if(e===t[i].nm||e===t[i].mn||e===t[i].ix)return 5===t[i].ty?c[i]:c[i]();i+=1}throw new Error}var o,l=propertyGroupFactory(a,r),c=[],h=n.ef.length;for(o=0;o<h;o+=1)5===n.ef[o].ty?c.push(e(n.ef[o],i.effectElements[o],i.effectElements[o].propertyGroup,s)):c.push(t(i.effectElements[o],n.ef[o].ty,s,l));return"ADBE Color Control"===n.mn&&Object.defineProperty(a,"color",{get:function(){return c[0]()}}),Object.defineProperties(a,{numProperties:{get:function(){return n.np}},_name:{value:n.nm},propertyGroup:{value:l}}),a.enabled=0!==n.en,a.active=a.enabled,a}function t(e,t,n,i){var r=ExpressionPropertyInterface(e.p);return e.p.setGroupProperty&&e.p.setGroupProperty(PropertyInterface("",i)),function(){return 10===t?n.comp.compInterface(e.p.v):r()}}return{createEffectsInterface:function(t,n){if(t.effectsManager){var i,r=[],s=t.data.ef,a=t.effectsManager.effectElements.length;for(i=0;i<a;i+=1)r.push(e(s[i],t.effectsManager.effectElements[i],n,t));var o=t.data.ef||[],l=function(e){for(i=0,a=o.length;i<a;){if(e===o[i].nm||e===o[i].mn||e===o[i].ix)return r[i];i+=1}return null};return Object.defineProperty(l,"numProperties",{get:function(){return o.length}}),l}return null}}}(),ShapePathInterface=function(e,t,n){var i=t.sh;function r(e){return"Shape"===e||"shape"===e||"Path"===e||"path"===e||"ADBE Vector Shape"===e||2===e?r.path:null}var s=propertyGroupFactory(r,n);return i.setGroupProperty(PropertyInterface("Path",s)),Object.defineProperties(r,{path:{get:function(){return i.k&&i.getValue(),i}},shape:{get:function(){return i.k&&i.getValue(),i}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:n}}),r},ShapeExpressionInterface=function(){function e(e,a,d){var p,f=[],m=e?e.length:0;for(p=0;p<m;p+=1)"gr"===e[p].ty?f.push(t(e[p],a[p],d)):"fl"===e[p].ty?f.push(n(e[p],a[p],d)):"st"===e[p].ty?f.push(r(e[p],a[p],d)):"tm"===e[p].ty?f.push(s(e[p],a[p],d)):"tr"===e[p].ty||("el"===e[p].ty?f.push(o(e[p],a[p],d)):"sr"===e[p].ty?f.push(l(e[p],a[p],d)):"sh"===e[p].ty?f.push(ShapePathInterface(e[p],a[p],d)):"rc"===e[p].ty?f.push(c(e[p],a[p],d)):"rd"===e[p].ty?f.push(h(e[p],a[p],d)):"rp"===e[p].ty?f.push(u(e[p],a[p],d)):"gf"===e[p].ty?f.push(i(e[p],a[p],d)):f.push((e[p],a[p],function(){return null})));return f}function t(t,n,i){var r=function(e){switch(e){case"ADBE Vectors Group":case"Contents":case 2:return r.content;default:return r.transform}};r.propertyGroup=propertyGroupFactory(r,i);var s=function(t,n,i){var r,s=function(e){for(var t=0,n=r.length;t<n;){if(r[t]._name===e||r[t].mn===e||r[t].propertyIndex===e||r[t].ix===e||r[t].ind===e)return r[t];t+=1}return"number"==typeof e?r[e-1]:null};s.propertyGroup=propertyGroupFactory(s,i),r=e(t.it,n.it,s.propertyGroup),s.numProperties=r.length;var o=a(t.it[t.it.length-1],n.it[n.it.length-1],s.propertyGroup);return s.transform=o,s.propertyIndex=t.cix,s._name=t.nm,s}(t,n,r.propertyGroup),o=a(t.it[t.it.length-1],n.it[n.it.length-1],r.propertyGroup);return r.content=s,r.transform=o,Object.defineProperty(r,"_name",{get:function(){return t.nm}}),r.numProperties=t.np,r.propertyIndex=t.ix,r.nm=t.nm,r.mn=t.mn,r}function n(e,t,n){function i(e){return"Color"===e||"color"===e?i.color:"Opacity"===e||"opacity"===e?i.opacity:null}return Object.defineProperties(i,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",n)),t.o.setGroupProperty(PropertyInterface("Opacity",n)),i}function i(e,t,n){function i(e){return"Start Point"===e||"start point"===e?i.startPoint:"End Point"===e||"end point"===e?i.endPoint:"Opacity"===e||"opacity"===e?i.opacity:null}return Object.defineProperties(i,{startPoint:{get:ExpressionPropertyInterface(t.s)},endPoint:{get:ExpressionPropertyInterface(t.e)},opacity:{get:ExpressionPropertyInterface(t.o)},type:{get:function(){return"a"}},_name:{value:e.nm},mn:{value:e.mn}}),t.s.setGroupProperty(PropertyInterface("Start Point",n)),t.e.setGroupProperty(PropertyInterface("End Point",n)),t.o.setGroupProperty(PropertyInterface("Opacity",n)),i}function r(e,t,n){var i,r=propertyGroupFactory(c,n),s=propertyGroupFactory(l,r);function a(n){Object.defineProperty(l,e.d[n].nm,{get:ExpressionPropertyInterface(t.d.dataProps[n].p)})}var o=e.d?e.d.length:0,l={};for(i=0;i<o;i+=1)a(i),t.d.dataProps[i].p.setGroupProperty(s);function c(e){return"Color"===e||"color"===e?c.color:"Opacity"===e||"opacity"===e?c.opacity:"Stroke Width"===e||"stroke width"===e?c.strokeWidth:null}return Object.defineProperties(c,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},strokeWidth:{get:ExpressionPropertyInterface(t.w)},dash:{get:function(){return l}},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",r)),t.o.setGroupProperty(PropertyInterface("Opacity",r)),t.w.setGroupProperty(PropertyInterface("Stroke Width",r)),c}function s(e,t,n){function i(t){return t===e.e.ix||"End"===t||"end"===t?i.end:t===e.s.ix?i.start:t===e.o.ix?i.offset:null}var r=propertyGroupFactory(i,n);return i.propertyIndex=e.ix,t.s.setGroupProperty(PropertyInterface("Start",r)),t.e.setGroupProperty(PropertyInterface("End",r)),t.o.setGroupProperty(PropertyInterface("Offset",r)),i.propertyIndex=e.ix,i.propertyGroup=n,Object.defineProperties(i,{start:{get:ExpressionPropertyInterface(t.s)},end:{get:ExpressionPropertyInterface(t.e)},offset:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm}}),i.mn=e.mn,i}function a(e,t,n){function i(t){return e.a.ix===t||"Anchor Point"===t?i.anchorPoint:e.o.ix===t||"Opacity"===t?i.opacity:e.p.ix===t||"Position"===t?i.position:e.r.ix===t||"Rotation"===t||"ADBE Vector Rotation"===t?i.rotation:e.s.ix===t||"Scale"===t?i.scale:e.sk&&e.sk.ix===t||"Skew"===t?i.skew:e.sa&&e.sa.ix===t||"Skew Axis"===t?i.skewAxis:null}var r=propertyGroupFactory(i,n);return t.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",r)),t.transform.mProps.p.setGroupProperty(PropertyInterface("Position",r)),t.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",r)),t.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",r)),t.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",r)),t.transform.mProps.sk&&(t.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",r)),t.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",r))),t.transform.op.setGroupProperty(PropertyInterface("Opacity",r)),Object.defineProperties(i,{opacity:{get:ExpressionPropertyInterface(t.transform.mProps.o)},position:{get:ExpressionPropertyInterface(t.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(t.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(t.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(t.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(t.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(t.transform.mProps.sa)},_name:{value:e.nm}}),i.ty="tr",i.mn=e.mn,i.propertyGroup=n,i}function o(e,t,n){function i(t){return e.p.ix===t?i.position:e.s.ix===t?i.size:null}var r=propertyGroupFactory(i,n);i.propertyIndex=e.ix;var s="tm"===t.sh.ty?t.sh.prop:t.sh;return s.s.setGroupProperty(PropertyInterface("Size",r)),s.p.setGroupProperty(PropertyInterface("Position",r)),Object.defineProperties(i,{size:{get:ExpressionPropertyInterface(s.s)},position:{get:ExpressionPropertyInterface(s.p)},_name:{value:e.nm}}),i.mn=e.mn,i}function l(e,t,n){function i(t){return e.p.ix===t?i.position:e.r.ix===t?i.rotation:e.pt.ix===t?i.points:e.or.ix===t||"ADBE Vector Star Outer Radius"===t?i.outerRadius:e.os.ix===t?i.outerRoundness:!e.ir||e.ir.ix!==t&&"ADBE Vector Star Inner Radius"!==t?e.is&&e.is.ix===t?i.innerRoundness:null:i.innerRadius}var r=propertyGroupFactory(i,n),s="tm"===t.sh.ty?t.sh.prop:t.sh;return i.propertyIndex=e.ix,s.or.setGroupProperty(PropertyInterface("Outer Radius",r)),s.os.setGroupProperty(PropertyInterface("Outer Roundness",r)),s.pt.setGroupProperty(PropertyInterface("Points",r)),s.p.setGroupProperty(PropertyInterface("Position",r)),s.r.setGroupProperty(PropertyInterface("Rotation",r)),e.ir&&(s.ir.setGroupProperty(PropertyInterface("Inner Radius",r)),s.is.setGroupProperty(PropertyInterface("Inner Roundness",r))),Object.defineProperties(i,{position:{get:ExpressionPropertyInterface(s.p)},rotation:{get:ExpressionPropertyInterface(s.r)},points:{get:ExpressionPropertyInterface(s.pt)},outerRadius:{get:ExpressionPropertyInterface(s.or)},outerRoundness:{get:ExpressionPropertyInterface(s.os)},innerRadius:{get:ExpressionPropertyInterface(s.ir)},innerRoundness:{get:ExpressionPropertyInterface(s.is)},_name:{value:e.nm}}),i.mn=e.mn,i}function c(e,t,n){function i(t){return e.p.ix===t?i.position:e.r.ix===t?i.roundness:e.s.ix===t||"Size"===t||"ADBE Vector Rect Size"===t?i.size:null}var r=propertyGroupFactory(i,n),s="tm"===t.sh.ty?t.sh.prop:t.sh;return i.propertyIndex=e.ix,s.p.setGroupProperty(PropertyInterface("Position",r)),s.s.setGroupProperty(PropertyInterface("Size",r)),s.r.setGroupProperty(PropertyInterface("Rotation",r)),Object.defineProperties(i,{position:{get:ExpressionPropertyInterface(s.p)},roundness:{get:ExpressionPropertyInterface(s.r)},size:{get:ExpressionPropertyInterface(s.s)},_name:{value:e.nm}}),i.mn=e.mn,i}function h(e,t,n){function i(t){return e.r.ix===t||"Round Corners 1"===t?i.radius:null}var r=propertyGroupFactory(i,n),s=t;return i.propertyIndex=e.ix,s.rd.setGroupProperty(PropertyInterface("Radius",r)),Object.defineProperties(i,{radius:{get:ExpressionPropertyInterface(s.rd)},_name:{value:e.nm}}),i.mn=e.mn,i}function u(e,t,n){function i(t){return e.c.ix===t||"Copies"===t?i.copies:e.o.ix===t||"Offset"===t?i.offset:null}var r=propertyGroupFactory(i,n),s=t;return i.propertyIndex=e.ix,s.c.setGroupProperty(PropertyInterface("Copies",r)),s.o.setGroupProperty(PropertyInterface("Offset",r)),Object.defineProperties(i,{copies:{get:ExpressionPropertyInterface(s.c)},offset:{get:ExpressionPropertyInterface(s.o)},_name:{value:e.nm}}),i.mn=e.mn,i}return function(t,n,i){var r;function s(e){if("number"==typeof e)return 0===(e=void 0===e?1:e)?i:r[e-1];for(var t=0,n=r.length;t<n;){if(r[t]._name===e)return r[t];t+=1}return null}return s.propertyGroup=propertyGroupFactory(s,(function(){return i})),r=e(t,n,s.propertyGroup),s.numProperties=r.length,s._name="Contents",s}}(),TextExpressionInterface=function(e){var t;function n(e){return"ADBE Text Document"===e?n.sourceText:null}return Object.defineProperty(n,"sourceText",{get:function(){e.textProperty.getValue();var n=e.textProperty.currentData.t;return t&&n===t.value||((t=new String(n)).value=n||new String(n),Object.defineProperty(t,"style",{get:function(){return{fillColor:e.textProperty.currentData.fc}}})),t}}),n};function _typeof$2(e){return _typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(e)}var FootageInterface=(dataInterfaceFactory=function(e){function t(e){return"Outline"===e?t.outlineInterface():null}return t._name="Outline",t.outlineInterface=function(e){var t="",n=e.getFootageData();function i(e){if(n[e])return t=e,"object"===_typeof$2(n=n[e])?i:n;var r=e.indexOf(t);if(-1!==r){var s=parseInt(e.substr(r+t.length),10);return"object"===_typeof$2(n=n[s])?i:n}return""}return function(){return t="",n=e.getFootageData(),i}}(e),t},function(e){function t(e){return"Data"===e?t.dataInterface:null}return t._name="Data",t.dataInterface=dataInterfaceFactory(e),t}),dataInterfaceFactory,interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(e){return interfaces[e]||null}function _typeof$1(e){return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(e)}function seedRandom(e,t){var n=this,i=256,r=t.pow(i,6),s=t.pow(2,52),a=2*s,o=255;function l(e){var t,n=e.length,r=this,s=0,a=r.i=r.j=0,l=r.S=[];for(n||(e=[n++]);s<i;)l[s]=s++;for(s=0;s<i;s++)l[s]=l[a=o&a+e[s%n]+(t=l[s])],l[a]=t;r.g=function(e){for(var t,n=0,s=r.i,a=r.j,l=r.S;e--;)t=l[s=o&s+1],n=n*i+l[o&(l[s]=l[a=o&a+t])+(l[a]=t)];return r.i=s,r.j=a,n}}function c(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function h(e,t){var n,i=[],r=_typeof$1(e);if(t&&"object"==r)for(n in e)try{i.push(h(e[n],t-1))}catch(e){}return i.length?i:"string"==r?e:e+"\0"}function u(e,t){for(var n,i=e+"",r=0;r<i.length;)t[o&r]=o&(n^=19*t[o&r])+i.charCodeAt(r++);return d(t)}function d(e){return String.fromCharCode.apply(0,e)}t.seedrandom=function(o,p,f){var m=[],g=u(h((p=!0===p?{entropy:!0}:p||{}).entropy?[o,d(e)]:null===o?function(){try{var t=new Uint8Array(i);return(n.crypto||n.msCrypto).getRandomValues(t),d(t)}catch(t){var r=n.navigator,s=r&&r.plugins;return[+new Date,n,s,n.screen,d(e)]}}():o,3),m),v=new l(m),y=function(){for(var e=v.g(6),t=r,n=0;e<s;)e=(e+n)*i,t*=i,n=v.g(1);for(;e>=a;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|v.g(4)},y.quick=function(){return v.g(4)/4294967296},y.double=y,u(d(v.S),e),(p.pass||f||function(e,n,i,r){return r&&(r.S&&c(r,v),e.state=function(){return c(v,{})}),i?(t.random=e,n):e})(y,g,"global"in p?p.global:this==t,p.state)},u(t.random(),e)}function initialize$2(e){seedRandom([],e)}var propTypes={SHAPE:"shape"};function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null;function $bm_isInstanceOfArray(e){return e.constructor===Array||e.constructor===Float32Array}function isNumerable(e,t){return"number"===e||"boolean"===e||"string"===e||t instanceof Number}function $bm_neg(e){var t=_typeof(e);if("number"===t||"boolean"===t||e instanceof Number)return-e;if($bm_isInstanceOfArray(e)){var n,i=e.length,r=[];for(n=0;n<i;n+=1)r[n]=-e[n];return r}return e.propType?e.v:-e}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(e,t){var n=_typeof(e),i=_typeof(t);if("string"===n||"string"===i)return e+t;if(isNumerable(n,e)&&isNumerable(i,t))return e+t;if($bm_isInstanceOfArray(e)&&isNumerable(i,t))return(e=e.slice(0))[0]+=t,e;if(isNumerable(n,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e+t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var r=0,s=e.length,a=t.length,o=[];r<s||r<a;)("number"==typeof e[r]||e[r]instanceof Number)&&("number"==typeof t[r]||t[r]instanceof Number)?o[r]=e[r]+t[r]:o[r]=void 0===t[r]?e[r]:e[r]||t[r],r+=1;return o}return 0}var add=sum;function sub(e,t){var n=_typeof(e),i=_typeof(t);if(isNumerable(n,e)&&isNumerable(i,t))return"string"===n&&(e=parseInt(e,10)),"string"===i&&(t=parseInt(t,10)),e-t;if($bm_isInstanceOfArray(e)&&isNumerable(i,t))return(e=e.slice(0))[0]-=t,e;if(isNumerable(n,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e-t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var r=0,s=e.length,a=t.length,o=[];r<s||r<a;)("number"==typeof e[r]||e[r]instanceof Number)&&("number"==typeof t[r]||t[r]instanceof Number)?o[r]=e[r]-t[r]:o[r]=void 0===t[r]?e[r]:e[r]||t[r],r+=1;return o}return 0}function mul(e,t){var n,i,r,s=_typeof(e),a=_typeof(t);if(isNumerable(s,e)&&isNumerable(a,t))return e*t;if($bm_isInstanceOfArray(e)&&isNumerable(a,t)){for(r=e.length,n=createTypedArray("float32",r),i=0;i<r;i+=1)n[i]=e[i]*t;return n}if(isNumerable(s,e)&&$bm_isInstanceOfArray(t)){for(r=t.length,n=createTypedArray("float32",r),i=0;i<r;i+=1)n[i]=e*t[i];return n}return 0}function div(e,t){var n,i,r,s=_typeof(e),a=_typeof(t);if(isNumerable(s,e)&&isNumerable(a,t))return e/t;if($bm_isInstanceOfArray(e)&&isNumerable(a,t)){for(r=e.length,n=createTypedArray("float32",r),i=0;i<r;i+=1)n[i]=e[i]/t;return n}if(isNumerable(s,e)&&$bm_isInstanceOfArray(t)){for(r=t.length,n=createTypedArray("float32",r),i=0;i<r;i+=1)n[i]=e/t[i];return n}return 0}function mod(e,t){return"string"==typeof e&&(e=parseInt(e,10)),"string"==typeof t&&(t=parseInt(t,10)),e%t}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(e,t,n){if(t>n){var i=n;n=t,t=i}return Math.min(Math.max(e,t),n)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,t){if("number"==typeof e||e instanceof Number)return t=t||0,Math.abs(e-t);var n;t||(t=helperLengthArray);var i=Math.min(e.length,t.length),r=0;for(n=0;n<i;n+=1)r+=Math.pow(t[n]-e[n],2);return Math.sqrt(r)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var t,n,i=e[0],r=e[1],s=e[2],a=Math.max(i,r,s),o=Math.min(i,r,s),l=(a+o)/2;if(a===o)t=0,n=0;else{var c=a-o;switch(n=l>.5?c/(2-a-o):c/(a+o),a){case i:t=(r-s)/c+(r<s?6:0);break;case r:t=(s-i)/c+2;break;case s:t=(i-r)/c+4}t/=6}return[t,n,l,e[3]]}function hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function hslToRgb(e){var t,n,i,r=e[0],s=e[1],a=e[2];if(0===s)t=a,i=a,n=a;else{var o=a<.5?a*(1+s):a+s-a*s,l=2*a-o;t=hue2rgb(l,o,r+1/3),n=hue2rgb(l,o,r),i=hue2rgb(l,o,r-1/3)}return[t,n,i,e[3]]}function linear(e,t,n,i,r){if(void 0!==i&&void 0!==r||(i=t,r=n,t=0,n=1),n<t){var s=n;n=t,t=s}if(e<=t)return i;if(e>=n)return r;var a,o=n===t?0:(e-t)/(n-t);if(!i.length)return i+(r-i)*o;var l=i.length,c=createTypedArray("float32",l);for(a=0;a<l;a+=1)c[a]=i[a]+(r[a]-i[a])*o;return c}function random(e,t){if(void 0===t&&(void 0===e?(e=0,t=1):(t=e,e=void 0)),t.length){var n,i=t.length;e||(e=createTypedArray("float32",i));var r=createTypedArray("float32",i),s=BMMath.random();for(n=0;n<i;n+=1)r[n]=e[n]+s*(t[n]-e[n]);return r}return void 0===e&&(e=0),e+BMMath.random()*(t-e)}function createPath(e,t,n,i){var r,s=e.length,a=shapePool.newElement();a.setPathData(!!i,s);var o,l,c=[0,0];for(r=0;r<s;r+=1)o=t&&t[r]?t[r]:c,l=n&&n[r]?n[r]:c,a.setTripleAt(e[r][0],e[r][1],l[0]+e[r][0],l[1]+e[r][1],o[0]+e[r][0],o[1]+e[r][1],r,!0);return a}function initiateExpression(elem,data,property){function noOp(e){return e}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(e,t){var n,i,r=this.pv.length?this.pv.length:1,s=createTypedArray("float32",r),a=Math.floor(5*time);for(n=0,i=0;n<a;){for(i=0;i<r;i+=1)s[i]+=-t+2*t*BMMath.random();n+=1}var o=5*time,l=o-Math.floor(o),c=createTypedArray("float32",r);if(r>1){for(i=0;i<r;i+=1)c[i]=this.pv[i]+s[i]+(-t+2*t*BMMath.random())*l;return c}return this.pv+s[0]+(-t+2*t*BMMath.random())*l}.bind(this);function loopInDuration(e,t){return loopIn(e,t,!0)}function loopOutDuration(e,t){return loopOut(e,t,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(e,t){var n=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],i=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads;return[-Math.atan2(n[1],n[2])/degToRads,i,0]}function easeOut(e,t,n,i,r){return applyEase(easeOutBez,e,t,n,i,r)}function easeIn(e,t,n,i,r){return applyEase(easeInBez,e,t,n,i,r)}function ease(e,t,n,i,r){return applyEase(easeInOutBez,e,t,n,i,r)}function applyEase(e,t,n,i,r,s){void 0===r?(r=n,s=i):t=(t-n)/(i-n),t>1?t=1:t<0&&(t=0);var a=e(t);if($bm_isInstanceOfArray(r)){var o,l=r.length,c=createTypedArray("float32",l);for(o=0;o<l;o+=1)c[o]=(s[o]-r[o])*a+r[o];return c}return(s-r)*a+r}function nearestKey(e){var t,n,i,r=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(n=-1,(e*=elem.comp.globalData.frameRate)<data.k[0].t)n=1,i=data.k[0].t;else{for(t=0;t<r-1;t+=1){if(e===data.k[t].t){n=t+1,i=data.k[t].t;break}if(e>data.k[t].t&&e<data.k[t+1].t){e-data.k[t].t>data.k[t+1].t-e?(n=t+2,i=data.k[t+1].t):(n=t+1,i=data.k[t].t);break}}-1===n&&(n=t+1,i=data.k[t].t)}else n=0,i=0;var s={};return s.index=n,s.time=i/elem.comp.globalData.frameRate,s}function key(e){var t,n,i;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+e);e-=1,t={time:data.k[e].t/elem.comp.globalData.frameRate,value:[]};var r=Object.prototype.hasOwnProperty.call(data.k[e],"s")?data.k[e].s:data.k[e-1].e;for(i=r.length,n=0;n<i;n+=1)t[n]=r[n],t.value[n]=r[n];return t}function framesToTime(e,t){return t||(t=elem.comp.globalData.frameRate),e/t}function timeToFrames(e,t){return e||0===e||(e=time),t||(t=elem.comp.globalData.frameRate),e*t}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(e,t){return"string"==typeof value?void 0===t?value.substring(e):value.substring(e,t):""}function substr(e,t){return"string"==typeof value?void 0===t?value.substr(e):value.substr(e,t):""}function posterizeTime(e){time=0===e?0:Math.floor(time*e)/e,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(e){return value=e,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath],ob}(),expressionHelpers={searchExpressions:function(e,t,n){t.x&&(n.k=!0,n.x=!0,n.initiateExpression=ExpressionManager.initiateExpression,n.effectsSequence.push(n.initiateExpression(e,t,n).bind(n)))},getSpeedAtTime:function(e){var t=this.getValueAtTime(e),n=this.getValueAtTime(e+-.01),i=0;if(t.length){var r;for(r=0;r<t.length;r+=1)i+=Math.pow(n[r]-t[r],2);i=100*Math.sqrt(i)}else i=0;return i},getVelocityAtTime:function(e){if(void 0!==this.vel)return this.vel;var t,n,i=-.001,r=this.getValueAtTime(e),s=this.getValueAtTime(e+i);if(r.length)for(t=createTypedArray("float32",r.length),n=0;n<r.length;n+=1)t[n]=(s[n]-r[n])/i;else t=(s-r)/i;return t},getValueAtTime:function(e){return e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<e?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(e,this._cachingAtTime),this._cachingAtTime.lastFrame=e),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(e){this.propertyGroup=e}};function addPropertyDecorator(){function e(e,t,n){if(!this.k||!this.keyframes)return this.pv;e=e?e.toLowerCase():"";var i,r,s,a,o,l=this.comp.renderedFrame,c=this.keyframes,h=c[c.length-1].t;if(l<=h)return this.pv;if(n?r=h-(i=t?Math.abs(h-this.elem.comp.globalData.frameRate*t):Math.max(0,h-this.elem.data.ip)):((!t||t>c.length-1)&&(t=c.length-1),i=h-(r=c[c.length-1-t].t)),"pingpong"===e){if(Math.floor((l-r)/i)%2!=0)return this.getValueAtTime((i-(l-r)%i+r)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var u=this.getValueAtTime(r/this.comp.globalData.frameRate,0),d=this.getValueAtTime(h/this.comp.globalData.frameRate,0),p=this.getValueAtTime(((l-r)%i+r)/this.comp.globalData.frameRate,0),f=Math.floor((l-r)/i);if(this.pv.length){for(a=(o=new Array(u.length)).length,s=0;s<a;s+=1)o[s]=(d[s]-u[s])*f+p[s];return o}return(d-u)*f+p}if("continue"===e){var m=this.getValueAtTime(h/this.comp.globalData.frameRate,0),g=this.getValueAtTime((h-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(o=new Array(m.length)).length,s=0;s<a;s+=1)o[s]=m[s]+(m[s]-g[s])*((l-h)/this.comp.globalData.frameRate)/5e-4;return o}return m+(l-h)/.001*(m-g)}}return this.getValueAtTime(((l-r)%i+r)/this.comp.globalData.frameRate,0)}function t(e,t,n){if(!this.k)return this.pv;e=e?e.toLowerCase():"";var i,r,s,a,o,l=this.comp.renderedFrame,c=this.keyframes,h=c[0].t;if(l>=h)return this.pv;if(n?r=h+(i=t?Math.abs(this.elem.comp.globalData.frameRate*t):Math.max(0,this.elem.data.op-h)):((!t||t>c.length-1)&&(t=c.length-1),i=(r=c[t].t)-h),"pingpong"===e){if(Math.floor((h-l)/i)%2==0)return this.getValueAtTime(((h-l)%i+h)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var u=this.getValueAtTime(h/this.comp.globalData.frameRate,0),d=this.getValueAtTime(r/this.comp.globalData.frameRate,0),p=this.getValueAtTime((i-(h-l)%i+h)/this.comp.globalData.frameRate,0),f=Math.floor((h-l)/i)+1;if(this.pv.length){for(a=(o=new Array(u.length)).length,s=0;s<a;s+=1)o[s]=p[s]-(d[s]-u[s])*f;return o}return p-(d-u)*f}if("continue"===e){var m=this.getValueAtTime(h/this.comp.globalData.frameRate,0),g=this.getValueAtTime((h+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(o=new Array(m.length)).length,s=0;s<a;s+=1)o[s]=m[s]+(m[s]-g[s])*(h-l)/.001;return o}return m+(m-g)*(h-l)/.001}}return this.getValueAtTime((i-((h-l)%i+h))/this.comp.globalData.frameRate,0)}function n(e,t){if(!this.k)return this.pv;if(e=.5*(e||.4),(t=Math.floor(t||5))<=1)return this.pv;var n,i,r=this.comp.renderedFrame/this.comp.globalData.frameRate,s=r-e,a=t>1?(r+e-s)/(t-1):1,o=0,l=0;for(n=this.pv.length?createTypedArray("float32",this.pv.length):0;o<t;){if(i=this.getValueAtTime(s+o*a),this.pv.length)for(l=0;l<this.pv.length;l+=1)n[l]+=i[l];else n+=i;o+=1}if(this.pv.length)for(l=0;l<this.pv.length;l+=1)n[l]/=t;else n/=t;return n}function i(e){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var t=this._transformCachingAtTime.v;if(t.cloneFromProps(this.pre.props),this.appliedTransformations<1){var n=this.a.getValueAtTime(e);t.translate(-n[0]*this.a.mult,-n[1]*this.a.mult,n[2]*this.a.mult)}if(this.appliedTransformations<2){var i=this.s.getValueAtTime(e);t.scale(i[0]*this.s.mult,i[1]*this.s.mult,i[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var r=this.sk.getValueAtTime(e),s=this.sa.getValueAtTime(e);t.skewFromAxis(-r*this.sk.mult,s*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var a=this.r.getValueAtTime(e);t.rotate(-a*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var o=this.rz.getValueAtTime(e),l=this.ry.getValueAtTime(e),c=this.rx.getValueAtTime(e),h=this.or.getValueAtTime(e);t.rotateZ(-o*this.rz.mult).rotateY(l*this.ry.mult).rotateX(c*this.rx.mult).rotateZ(-h[2]*this.or.mult).rotateY(h[1]*this.or.mult).rotateX(h[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var u=this.px.getValueAtTime(e),d=this.py.getValueAtTime(e);if(this.data.p.z){var p=this.pz.getValueAtTime(e);t.translate(u*this.px.mult,d*this.py.mult,-p*this.pz.mult)}else t.translate(u*this.px.mult,d*this.py.mult,0)}else{var f=this.p.getValueAtTime(e);t.translate(f[0]*this.p.mult,f[1]*this.p.mult,-f[2]*this.p.mult)}return t}function r(){return this.v.clone(new Matrix)}var s=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(e,t,n){var a=s(e,t,n);return a.dynamicProperties.length?a.getValueAtTime=i.bind(a):a.getValueAtTime=r.bind(a),a.setGroupProperty=expressionHelpers.setGroupProperty,a};var a=PropertyFactory.getProp;PropertyFactory.getProp=function(i,r,s,o,l){var c=a(i,r,s,o,l);c.kf?c.getValueAtTime=expressionHelpers.getValueAtTime.bind(c):c.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(c),c.setGroupProperty=expressionHelpers.setGroupProperty,c.loopOut=e,c.loopIn=t,c.smooth=n,c.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(c),c.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(c),c.numKeys=1===r.a?r.k.length:0,c.propertyIndex=r.ix;var h=0;return 0!==s&&(h=createTypedArray("float32",1===r.a?r.k[0].s.length:r.k.length)),c._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:h},expressionHelpers.searchExpressions(i,r,c),c.k&&l.addDynamicProperty(c),c};var o=ShapePropertyFactory.getConstructorFunction(),l=ShapePropertyFactory.getKeyframedConstructorFunction();function c(){}c.prototype={vertices:function(e,t){this.k&&this.getValue();var n,i=this.v;void 0!==t&&(i=this.getValueAtTime(t,0));var r=i._length,s=i[e],a=i.v,o=createSizedArray(r);for(n=0;n<r;n+=1)o[n]="i"===e||"o"===e?[s[n][0]-a[n][0],s[n][1]-a[n][1]]:[s[n][0],s[n][1]];return o},points:function(e){return this.vertices("v",e)},inTangents:function(e){return this.vertices("i",e)},outTangents:function(e){return this.vertices("o",e)},isClosed:function(){return this.v.c},pointOnPath:function(e,t){var n=this.v;void 0!==t&&(n=this.getValueAtTime(t,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(n));for(var i,r=this._segmentsLength,s=r.lengths,a=r.totalLength*e,o=0,l=s.length,c=0;o<l;){if(c+s[o].addedLength>a){var h=o,u=n.c&&o===l-1?0:o+1,d=(a-c)/s[o].addedLength;i=bez.getPointInSegment(n.v[h],n.v[u],n.o[h],n.i[u],d,s[o]);break}c+=s[o].addedLength,o+=1}return i||(i=n.c?[n.v[0][0],n.v[0][1]]:[n.v[n._length-1][0],n.v[n._length-1][1]]),i},vectorOnPath:function(e,t,n){1==e?e=this.v.c:0==e&&(e=.999);var i=this.pointOnPath(e,t),r=this.pointOnPath(e+.001,t),s=r[0]-i[0],a=r[1]-i[1],o=Math.sqrt(Math.pow(s,2)+Math.pow(a,2));return 0===o?[0,0]:"tangent"===n?[s/o,a/o]:[-a/o,s/o]},tangentOnPath:function(e,t){return this.vectorOnPath(e,t,"tangent")},normalOnPath:function(e,t){return this.vectorOnPath(e,t,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([c],o),extendPrototype([c],l),l.prototype.getValueAtTime=function(e){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<e?this._caching.lastIndex:0,this._cachingAtTime.lastTime=e,this.interpolateShape(e,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},l.prototype.initiateExpression=ExpressionManager.initiateExpression;var h=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(e,t,n,i,r){var s=h(e,t,n,i,r);return s.propertyIndex=t.ix,s.lock=!1,3===n?expressionHelpers.searchExpressions(e,t.pt,s):4===n&&expressionHelpers.searchExpressions(e,t.ks,s),s.k&&e.addDynamicProperty(s),s}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(e,t){var n=this.calculateExpression(t);if(e.t!==n){var i={};return this.copyData(i,e),i.t=n.toString(),i.__complete=!1,i}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),t=this.searchExpressions();return this.kf=e||t,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(e,t){var n,i,r=createNS("feMerge");for(r.setAttribute("result",e),i=0;i<t.length;i+=1)(n=createNS("feMergeNode")).setAttribute("in",t[i]),r.appendChild(n),r.appendChild(n);return r}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(e,t,n,i,r){this.filterManager=t;var s=createNS("feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","linearRGB"),s.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=s,s.setAttribute("result",i+"_tint_1"),e.appendChild(s),(s=createNS("feColorMatrix")).setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),s.setAttribute("result",i+"_tint_2"),e.appendChild(s),this.matrixFilter=s;var a=this.createMergeNode(i,[r,i+"_tint_1",i+"_tint_2"]);e.appendChild(a)}function SVGFillFilter(e,t,n,i){this.filterManager=t;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),r.setAttribute("result",i),e.appendChild(r),this.matrixFilter=r}function SVGStrokeEffect(e,t,n){this.initialized=!1,this.filterManager=t,this.elem=n,this.paths=[]}function SVGTritoneFilter(e,t,n,i){this.filterManager=t;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","linearRGB"),r.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),e.appendChild(r);var s=createNS("feComponentTransfer");s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("result",i),this.matrixFilter=s;var a=createNS("feFuncR");a.setAttribute("type","table"),s.appendChild(a),this.feFuncR=a;var o=createNS("feFuncG");o.setAttribute("type","table"),s.appendChild(o),this.feFuncG=o;var l=createNS("feFuncB");l.setAttribute("type","table"),s.appendChild(l),this.feFuncB=l,e.appendChild(s)}function SVGProLevelsFilter(e,t,n,i){this.filterManager=t;var r=this.filterManager.effectElements,s=createNS("feComponentTransfer");(r[10].p.k||0!==r[10].p.v||r[11].p.k||1!==r[11].p.v||r[12].p.k||1!==r[12].p.v||r[13].p.k||0!==r[13].p.v||r[14].p.k||1!==r[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",s)),(r[17].p.k||0!==r[17].p.v||r[18].p.k||1!==r[18].p.v||r[19].p.k||1!==r[19].p.v||r[20].p.k||0!==r[20].p.v||r[21].p.k||1!==r[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",s)),(r[24].p.k||0!==r[24].p.v||r[25].p.k||1!==r[25].p.v||r[26].p.k||1!==r[26].p.v||r[27].p.k||0!==r[27].p.v||r[28].p.k||1!==r[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",s)),(r[31].p.k||0!==r[31].p.v||r[32].p.k||1!==r[32].p.v||r[33].p.k||1!==r[33].p.v||r[34].p.k||0!==r[34].p.v||r[35].p.k||1!==r[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",s)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(s.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(s)),(r[3].p.k||0!==r[3].p.v||r[4].p.k||1!==r[4].p.v||r[5].p.k||1!==r[5].p.v||r[6].p.k||0!==r[6].p.v||r[7].p.k||1!==r[7].p.v)&&((s=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("result",i),e.appendChild(s),this.feFuncRComposed=this.createFeFunc("feFuncR",s),this.feFuncGComposed=this.createFeFunc("feFuncG",s),this.feFuncBComposed=this.createFeFunc("feFuncB",s))}function SVGDropShadowEffect(e,t,n,i,r){var s=t.container.globalData.renderConfig.filterSize,a=t.data.fs||s;e.setAttribute("x",a.x||s.x),e.setAttribute("y",a.y||s.y),e.setAttribute("width",a.width||s.width),e.setAttribute("height",a.height||s.height),this.filterManager=t;var o=createNS("feGaussianBlur");o.setAttribute("in","SourceAlpha"),o.setAttribute("result",i+"_drop_shadow_1"),o.setAttribute("stdDeviation","0"),this.feGaussianBlur=o,e.appendChild(o);var l=createNS("feOffset");l.setAttribute("dx","25"),l.setAttribute("dy","0"),l.setAttribute("in",i+"_drop_shadow_1"),l.setAttribute("result",i+"_drop_shadow_2"),this.feOffset=l,e.appendChild(l);var c=createNS("feFlood");c.setAttribute("flood-color","#00ff00"),c.setAttribute("flood-opacity","1"),c.setAttribute("result",i+"_drop_shadow_3"),this.feFlood=c,e.appendChild(c);var h=createNS("feComposite");h.setAttribute("in",i+"_drop_shadow_3"),h.setAttribute("in2",i+"_drop_shadow_2"),h.setAttribute("operator","in"),h.setAttribute("result",i+"_drop_shadow_4"),e.appendChild(h);var u=this.createMergeNode(i,[i+"_drop_shadow_4",r]);e.appendChild(u)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,i=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+i+" 0"),this.matrixFilter.setAttribute("values",n[0]-t[0]+" 0 0 0 "+t[0]+" "+(n[1]-t[1])+" 0 0 0 "+t[1]+" "+(n[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[2].p.v,n=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+n+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var e,t,n,i,r=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(i=this.elem.maskManager.masksProperties.length,n=0):i=1+(n=this.filterManager.effectElements[0].p.v-1),(t=createNS("g")).setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1);n<i;n+=1)e=createNS("path"),t.appendChild(e),this.paths.push({p:e,m:n});if(3===this.filterManager.effectElements[10].p.v){var s=createNS("mask"),a=createElementID();s.setAttribute("id",a),s.setAttribute("mask-type","alpha"),s.appendChild(t),this.elem.globalData.defs.appendChild(s);var o=createNS("g");for(o.setAttribute("mask","url("+getLocationHref()+"#"+a+")");r[0];)o.appendChild(r[0]);this.elem.layerElement.appendChild(o),this.masker=s,t.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(r=this.elem.layerElement.children||this.elem.layerElement.childNodes;r.length;)this.elem.layerElement.removeChild(r[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(e){var t;this.initialized||this.initialize();var n,i,r=this.paths.length;for(t=0;t<r;t+=1)if(-1!==this.paths[t].m&&(n=this.elem.maskManager.viewData[this.paths[t].m],i=this.paths[t].p,(e||this.filterManager._mdf||n.prop._mdf)&&i.setAttribute("d",n.lastPath),e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||n.prop._mdf)){var s;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var a=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),o=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),l=i.getTotalLength();s="0 0 0 "+l*a+" ";var c,h=l*(o-a),u=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,d=Math.floor(h/u);for(c=0;c<d;c+=1)s+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";s+="0 "+10*l+" 0 0"}else s="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;i.setAttribute("stroke-dasharray",s)}if((e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(e||this.filterManager.effectElements[3].p._mdf)){var p=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*p[0])+","+bmFloor(255*p[1])+","+bmFloor(255*p[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,i=this.filterManager.effectElements[2].p.v,r=i[0]+" "+n[0]+" "+t[0],s=i[1]+" "+n[1]+" "+t[1],a=i[2]+" "+n[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",r),this.feFuncG.setAttribute("tableValues",s),this.feFuncB.setAttribute("tableValues",a)}},SVGProLevelsFilter.prototype.createFeFunc=function(e,t){var n=createNS(e);return n.setAttribute("type","table"),t.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(e,t,n,i,r){for(var s,a,o=0,l=Math.min(e,t),c=Math.max(e,t),h=Array.call(null,{length:256}),u=0,d=r-i,p=t-e;o<=256;)a=(s=o/256)<=l?p<0?r:i:s>=c?p<0?i:r:i+d*Math.pow((s-e)/p,1/n),h[u]=a,u+=1,o+=256/255;return h.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t,n=this.filterManager.effectElements;this.feFuncRComposed&&(e||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(t=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(e||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(t=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(e||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(t=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(e||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(t=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(e||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(t=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",t))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){if((e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),e||this.filterManager.effectElements[0].p._mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2])))}if((e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var n=this.filterManager.effectElements[3].p.v,i=(this.filterManager.effectElements[2].p.v-90)*degToRads,r=n*Math.cos(i),s=n*Math.sin(i);this.feOffset.setAttribute("dx",r),this.feOffset.setAttribute("dy",s)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(e,t,n){this.initialized=!1,this.filterManager=t,this.filterElem=e,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}function SVGGaussianBlurEffect(e,t,n,i){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","300%"),e.setAttribute("height","300%"),this.filterManager=t;var r=createNS("feGaussianBlur");r.setAttribute("result",i),e.appendChild(r),this.feGaussianBlur=r}return SVGMatte3Effect.prototype.findSymbol=function(e){for(var t=0,n=_svgMatteSymbols.length;t<n;){if(_svgMatteSymbols[t]===e)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(e,t){var n=e.layerElement.parentNode;if(n){for(var i,r=n.children,s=0,a=r.length;s<a&&r[s]!==e.layerElement;)s+=1;s<=a-2&&(i=r[s+1]);var o=createNS("use");o.setAttribute("href","#"+t),i?n.insertBefore(o,i):n.appendChild(o)}},SVGMatte3Effect.prototype.setElementAsMask=function(e,t){if(!this.findSymbol(t)){var n=createElementID(),i=createNS("mask");i.setAttribute("id",t.layerId),i.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t);var r=e.globalData.defs;r.appendChild(i);var s=createNS("symbol");s.setAttribute("id",n),this.replaceInParent(t,n),s.appendChild(t.layerElement),r.appendChild(s);var a=createNS("use");a.setAttribute("href","#"+n),i.appendChild(a),t.data.hd=!1,t.show()}e.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,n=0,i=t.length;n<i;)t[n]&&t[n].data.ind===e&&this.setElementAsMask(this.elem,t[n]),n+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=.3*this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,i=3==n?0:t,r=2==n?0:t;this.feGaussianBlur.setAttribute("stdDeviation",i+" "+r);var s=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",s)}},registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect(20,SVGTintFilter,!0),registerEffect(21,SVGFillFilter,!0),registerEffect(22,SVGStrokeEffect,!1),registerEffect(23,SVGTritoneFilter,!0),registerEffect(24,SVGProLevelsFilter,!0),registerEffect(25,SVGDropShadowEffect,!0),registerEffect(28,SVGMatte3Effect,!1),registerEffect(29,SVGGaussianBlurEffect,!0),lottie},module.exports=factory())},666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function h(e,t,n,i){var s=t&&t.prototype instanceof g?t:g,a=Object.create(s.prototype),o=new C(i||[]);return r(a,"_invoke",{value:T(e,n,o)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=h;var d="suspendedStart",p="executing",f="completed",m={};function g(){}function v(){}function y(){}var _={};c(_,a,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(I([])));x&&x!==n&&i.call(x,a)&&(_=x);var S=y.prototype=g.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(r,s,a,o){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,o)}),(function(e){n("throw",e,a,o)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,o)}))}o(l.arg)}var s;r(this,"_invoke",{value:function(e,i){function r(){return new t((function(t,r){n(e,i,t,r)}))}return s=s?s.then(r,r):r()}})}function T(e,t,n){var i=d;return function(r,s){if(i===p)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw s;return L()}for(n.method=r,n.arg=s;;){var a=n.delegate;if(a){var o=M(a,n);if(o){if(o===m)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=u(e,t,n);if("normal"===l.type){if(i=n.done?f:"suspendedYield",l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=f,n.method="throw",n.arg=l.arg)}}}function M(e,n){var i=n.method,r=e.iterator[i];if(r===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var s=u(r,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,m;var a=s.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,s=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:L}}function L(){return{value:t,done:!0}}return v.prototype=y,r(S,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:v,configurable:!0}),v.displayName=c(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},E(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,i,r,s){void 0===s&&(s=Promise);var a=new w(h(t,n,i,r),s);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return o.type="throw",o.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;P(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:I(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},102:()=>{var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){if("undefined"!=typeof window){var n=Array.prototype.slice,i=Element.prototype.matches||Element.prototype.msMatchesSelector,r=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","[contenteditable]"].join(","),s=function(){function s(e,n){t(this,s),this._inertManager=n,this._rootElement=e,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return e(s,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(null!==this._savedAriaHidden?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach((function(e){this._unmanageNode(e.node)}),this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(e){var t=this;c(e,(function(e){return t._visitNode(e)}));var n=document.activeElement;if(!document.body.contains(e)){for(var i=e,r=void 0;i;){if(i.nodeType===Node.DOCUMENT_FRAGMENT_NODE){r=i;break}i=i.parentNode}r&&(n=r.activeElement)}e.contains(n)&&(n.blur(),n===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(e){if(e.nodeType===Node.ELEMENT_NODE){var t=e;t!==this._rootElement&&t.hasAttribute("inert")&&this._adoptInertRoot(t),(i.call(t,r)||t.hasAttribute("tabindex"))&&this._manageNode(t)}}},{key:"_manageNode",value:function(e){var t=this._inertManager.register(e,this);this._managedNodes.add(t)}},{key:"_unmanageNode",value:function(e){var t=this._inertManager.deregister(e,this);t&&this._managedNodes.delete(t)}},{key:"_unmanageSubtree",value:function(e){var t=this;c(e,(function(e){return t._unmanageNode(e)}))}},{key:"_adoptInertRoot",value:function(e){var t=this._inertManager.getInertRoot(e);t||(this._inertManager.setInert(e,!0),t=this._inertManager.getInertRoot(e)),t.managedNodes.forEach((function(e){this._manageNode(e.node)}),this)}},{key:"_onMutation",value:function(e,t){e.forEach((function(e){var t=e.target;if("childList"===e.type)n.call(e.addedNodes).forEach((function(e){this._makeSubtreeUnfocusable(e)}),this),n.call(e.removedNodes).forEach((function(e){this._unmanageSubtree(e)}),this);else if("attributes"===e.type)if("tabindex"===e.attributeName)this._manageNode(t);else if(t!==this._rootElement&&"inert"===e.attributeName&&t.hasAttribute("inert")){this._adoptInertRoot(t);var i=this._inertManager.getInertRoot(t);this._managedNodes.forEach((function(e){t.contains(e.node)&&i._manageNode(e.node)}))}}),this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return null!==this._savedAriaHidden}},{key:"savedAriaHidden",set:function(e){this._savedAriaHidden=e},get:function(){return this._savedAriaHidden}}]),s}(),a=function(){function n(e,i){t(this,n),this._node=e,this._overrodeFocusMethod=!1,this._inertRoots=new Set([i]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return e(n,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var e=this._node;null!==this._savedTabIndex?e.setAttribute("tabindex",this._savedTabIndex):e.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete e.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var e=this.node;if(i.call(e,r)){if(-1===e.tabIndex&&this.hasSavedTabIndex)return;e.hasAttribute("tabindex")&&(this._savedTabIndex=e.tabIndex),e.setAttribute("tabindex","-1"),e.nodeType===Node.ELEMENT_NODE&&(e.focus=function(){},this._overrodeFocusMethod=!0)}else e.hasAttribute("tabindex")&&(this._savedTabIndex=e.tabIndex,e.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(e){this._throwIfDestroyed(),this._inertRoots.add(e)}},{key:"removeInertRoot",value:function(e){this._throwIfDestroyed(),this._inertRoots.delete(e),0===this._inertRoots.size&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return null!==this._savedTabIndex}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(e){this._throwIfDestroyed(),this._savedTabIndex=e},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),n}(),o=function(){function r(e){if(t(this,r),!e)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=e,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),h(e.head||e.body||e.documentElement),"loading"===e.readyState?e.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return e(r,[{key:"setInert",value:function(e,t){if(t){if(this._inertRoots.has(e))return;var n=new s(e,this);if(e.setAttribute("inert",""),this._inertRoots.set(e,n),!this._document.body.contains(e))for(var i=e.parentNode;i;)11===i.nodeType&&h(i),i=i.parentNode}else{if(!this._inertRoots.has(e))return;this._inertRoots.get(e).destructor(),this._inertRoots.delete(e),e.removeAttribute("inert")}}},{key:"getInertRoot",value:function(e){return this._inertRoots.get(e)}},{key:"register",value:function(e,t){var n=this._managedNodes.get(e);return void 0!==n?n.addInertRoot(t):n=new a(e,t),this._managedNodes.set(e,n),n}},{key:"deregister",value:function(e,t){var n=this._managedNodes.get(e);return n?(n.removeInertRoot(t),n.destroyed&&this._managedNodes.delete(e),n):null}},{key:"_onDocumentLoaded",value:function(){n.call(this._document.querySelectorAll("[inert]")).forEach((function(e){this.setInert(e,!0)}),this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(e,t){var r=this;e.forEach((function(e){switch(e.type){case"childList":n.call(e.addedNodes).forEach((function(e){if(e.nodeType===Node.ELEMENT_NODE){var t=n.call(e.querySelectorAll("[inert]"));i.call(e,"[inert]")&&t.unshift(e),t.forEach((function(e){this.setInert(e,!0)}),r)}}),r);break;case"attributes":if("inert"!==e.attributeName)return;var t=e.target,s=t.hasAttribute("inert");r.setInert(t,s)}}),this)}}]),r}();if(!HTMLElement.prototype.hasOwnProperty("inert")){var l=new o(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(e){l.setInert(this,e)}})}}function c(e,t,n){if(e.nodeType==Node.ELEMENT_NODE){var i=e;t&&t(i);var r=i.shadowRoot;if(r)return void c(r,t,r);if("content"==i.localName){for(var s=i,a=s.getDistributedNodes?s.getDistributedNodes():[],o=0;o<a.length;o++)c(a[o],t,n);return}if("slot"==i.localName){for(var l=i,h=l.assignedNodes?l.assignedNodes({flatten:!0}):[],u=0;u<h.length;u++)c(h[u],t,n);return}}for(var d=e.firstChild;null!=d;)c(d,t,n),d=d.nextSibling}function h(e){if(!e.querySelector("style#inert-style, link#inert-style")){var t=document.createElement("style");t.setAttribute("id","inert-style"),t.textContent="\n[inert] {\n  pointer-events: none;\n  cursor: default;\n}\n\n[inert], [inert] * {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n",e.appendChild(t)}}}()}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t,n,i,r,s,a,o,l,c,h,u,d,p=function(){return t||"undefined"!=typeof window&&(t=window.gsap)&&t.registerPlugin&&t},f=1,m=[],g=[],v=[],y=Date.now,_=function(e,t){return t},b=function(e,t){return~v.indexOf(e)&&v[v.indexOf(e)+1][t]},x=function(e){return!!~h.indexOf(e)},S=function(e,t,n,i,r){return e.addEventListener(t,n,{passive:!i,capture:!!r})},E=function(e,t,n){return e.removeEventListener(t,n)},w="scrollLeft",T="scrollTop",M=function(){return u&&u.isPressed||g.cache++},A=function(e){return function(t){return t||0===t?(f&&(i.history.scrollRestoration="manual"),e(t),e.v=t,e.c=g.cache,u&&u.isPressed&&_("ss",t)):(g.cache!==e.c||_("ref"))&&(e.c=g.cache,e.v=e()),e.v}},P={s:w,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:A((function(e){return arguments.length?i.scrollTo(e,C.sc()):i.pageXOffset||r.scrollLeft||s.scrollLeft||a.scrollLeft||0}))},C={s:T,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:P,sc:A((function(e){return arguments.length?i.scrollTo(P.sc(),e):i.pageYOffset||r.scrollTop||s.scrollTop||a.scrollTop||0}))},I=function(e){return t.utils.toArray(e)[0]||("string"==typeof e&&!1!==t.config().nullTargetWarn?console.warn("Element not found:",e):null)},L=function(e,t){var n=t.s,i=t.sc,r=g.indexOf(e),s=i===C.sc?1:2;return!~r&&(r=g.push(e)-1),g[r+s]||(g[r+s]=b(e,n)||(x(e)?i:A((function(t){return arguments.length?e[n]=t:e[n]}))))},D=function(e,t,n){var i=e,r=e,s=y(),a=s,o=t||50,l=Math.max(500,3*o),c=function(e,t){var l=y();t||l-s>o?(r=i,i=e,a=s,s=l):n?i+=e:i=r+(e-r)/(l-a)*(s-a)};return{update:c,reset:function(){r=i=n?0:i,a=s=0},getVelocity:function(e){var t=a,o=r,h=y();return(e||0===e)&&e!==i&&c(e),s===a||h-a>l?0:(i+(n?o:-o))/((n?h:s)-t)*1e3}}},R=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},k=function(e){var t=Math.max.apply(Math,e),n=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(n)?t:n},O=function(){(c=t.core.globals().ScrollTrigger)&&c.core&&function(){var e=c.core,t=e.bridge||{},n=e._scrollers,i=e._proxies;n.push.apply(n,g),i.push.apply(i,v),g=n,v=i,_=function(e,n){return t[e](n)}}()},F=function(e){return(t=e||p())&&"undefined"!=typeof document&&document.body&&(i=window,r=document,s=r.documentElement,a=r.body,h=[i,r,s,a],t.utils.clamp,l="onpointerenter"in a?"pointer":"mouse",o=N.isTouch=i.matchMedia&&i.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in i||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,d=N.eventTypes=("ontouchstart"in s?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in s?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout((function(){return f=0}),500),O(),n=1),n};P.op=C,g.cache=0;var N=function(){function h(e){this.init(e)}var p,f,g;return h.prototype.init=function(e){n||F(t)||console.warn("Please gsap.registerPlugin(Observer)"),c||O();var h=e.tolerance,p=e.dragMinimum,f=e.type,g=e.target,v=e.lineHeight,_=e.debounce,b=e.preventDefault,w=e.onStop,T=e.onStopDelay,A=e.ignore,N=e.wheelSpeed,B=e.event,z=e.onDragStart,U=e.onDragEnd,V=e.onDrag,H=e.onPress,G=e.onRelease,j=e.onRight,W=e.onLeft,q=e.onUp,X=e.onDown,Y=e.onChangeX,$=e.onChangeY,K=e.onChange,Z=e.onToggleX,Q=e.onToggleY,J=e.onHover,ee=e.onHoverEnd,te=e.onMove,ne=e.ignoreCheck,ie=e.isNormalizer,re=e.onGestureStart,se=e.onGestureEnd,ae=e.onWheel,oe=e.onEnable,le=e.onDisable,ce=e.onClick,he=e.scrollSpeed,ue=e.capture,de=e.allowClicks,pe=e.lockAxis,fe=e.onLockAxis;this.target=g=I(g)||s,this.vars=e,A&&(A=t.utils.toArray(A)),h=h||0,p=p||0,N=N||1,he=he||1,f=f||"wheel,touch,pointer",_=!1!==_,v||(v=parseFloat(i.getComputedStyle(a).lineHeight)||22);var me,ge,ve,ye,_e,be,xe,Se=this,Ee=0,we=0,Te=L(g,P),Me=L(g,C),Ae=Te(),Pe=Me(),Ce=~f.indexOf("touch")&&!~f.indexOf("pointer")&&"pointerdown"===d[0],Ie=x(g),Le=g.ownerDocument||r,De=[0,0,0],Re=[0,0,0],ke=0,Oe=function(){return ke=y()},Fe=function(e,t){return(Se.event=e)&&A&&~A.indexOf(e.target)||t&&Ce&&"touch"!==e.pointerType||ne&&ne(e,t)},Ne=function(){var e=Se.deltaX=k(De),t=Se.deltaY=k(Re),n=Math.abs(e)>=h,i=Math.abs(t)>=h;K&&(n||i)&&K(Se,e,t,De,Re),n&&(j&&Se.deltaX>0&&j(Se),W&&Se.deltaX<0&&W(Se),Y&&Y(Se),Z&&Se.deltaX<0!=Ee<0&&Z(Se),Ee=Se.deltaX,De[0]=De[1]=De[2]=0),i&&(X&&Se.deltaY>0&&X(Se),q&&Se.deltaY<0&&q(Se),$&&$(Se),Q&&Se.deltaY<0!=we<0&&Q(Se),we=Se.deltaY,Re[0]=Re[1]=Re[2]=0),(ye||ve)&&(te&&te(Se),fe&&be&&fe(Se),ve&&(V(Se),ve=!1),ye=be=!1),_e&&(ae(Se),_e=!1),me=0},Be=function(e,t,n){De[n]+=e,Re[n]+=t,Se._vx.update(e),Se._vy.update(t),_?me||(me=requestAnimationFrame(Ne)):Ne()},ze=function(e,t){"y"!==xe&&(De[2]+=e,Se._vx.update(e,!0)),"x"!==xe&&(Re[2]+=t,Se._vy.update(t,!0)),pe&&!xe&&(Se.axis=xe=Math.abs(e)>Math.abs(t)?"x":"y",be=!0),_?me||(me=requestAnimationFrame(Ne)):Ne()},Ue=function(e){if(!Fe(e,1)){var t=(e=R(e,b)).clientX,n=e.clientY,i=t-Se.x,r=n-Se.y,s=Se.isDragging;Se.x=t,Se.y=n,(s||Math.abs(Se.startX-t)>=p||Math.abs(Se.startY-n)>=p)&&(V&&(ve=!0),s||(Se.isDragging=!0),ze(i,r),s||z&&z(Se))}},Ve=Se.onPress=function(e){Fe(e,1)||(Se.axis=xe=null,ge.pause(),Se.isPressed=!0,e=R(e),Ee=we=0,Se.startX=Se.x=e.clientX,Se.startY=Se.y=e.clientY,Se._vx.reset(),Se._vy.reset(),S(ie?g:Le,d[1],Ue,b,ue),Se.deltaX=Se.deltaY=0,H&&H(Se))},He=function(e){if(!Fe(e,1)){E(ie?g:Le,d[1],Ue);var n=Se.isDragging&&(Math.abs(Se.x-Se.startX)>3||Math.abs(Se.y-Se.startY)>3),r=R(e);n||(Se._vx.reset(),Se._vy.reset(),b&&de&&t.delayedCall(.05,(function(){if(y()-ke>300&&!e.defaultPrevented)if(e.target.click)e.target.click();else if(Le.createEvent){var t=Le.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,i,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(t)}}))),Se.isDragging=Se.isGesturing=Se.isPressed=!1,w&&!ie&&ge.restart(!0),U&&n&&U(Se),G&&G(Se,n)}},Ge=function(e){return e.touches&&e.touches.length>1&&(Se.isGesturing=!0)&&re(e,Se.isDragging)},je=function(){return(Se.isGesturing=!1)||se(Se)},We=function(e){if(!Fe(e)){var t=Te(),n=Me();Be((t-Ae)*he,(n-Pe)*he,1),Ae=t,Pe=n,w&&ge.restart(!0)}},qe=function(e){if(!Fe(e)){e=R(e,b),ae&&(_e=!0);var t=(1===e.deltaMode?v:2===e.deltaMode?i.innerHeight:1)*N;Be(e.deltaX*t,e.deltaY*t,0),w&&!ie&&ge.restart(!0)}},Xe=function(e){if(!Fe(e)){var t=e.clientX,n=e.clientY,i=t-Se.x,r=n-Se.y;Se.x=t,Se.y=n,ye=!0,(i||r)&&ze(i,r)}},Ye=function(e){Se.event=e,J(Se)},$e=function(e){Se.event=e,ee(Se)},Ke=function(e){return Fe(e)||R(e,b)&&ce(Se)};ge=Se._dc=t.delayedCall(T||.25,(function(){Se._vx.reset(),Se._vy.reset(),ge.pause(),w&&w(Se)})).pause(),Se.deltaX=Se.deltaY=0,Se._vx=D(0,50,!0),Se._vy=D(0,50,!0),Se.scrollX=Te,Se.scrollY=Me,Se.isDragging=Se.isGesturing=Se.isPressed=!1,Se.enable=function(e){return Se.isEnabled||(S(Ie?Le:g,"scroll",M),f.indexOf("scroll")>=0&&S(Ie?Le:g,"scroll",We,b,ue),f.indexOf("wheel")>=0&&S(g,"wheel",qe,b,ue),(f.indexOf("touch")>=0&&o||f.indexOf("pointer")>=0)&&(S(g,d[0],Ve,b,ue),S(Le,d[2],He),S(Le,d[3],He),de&&S(g,"click",Oe,!1,!0),ce&&S(g,"click",Ke),re&&S(Le,"gesturestart",Ge),se&&S(Le,"gestureend",je),J&&S(g,l+"enter",Ye),ee&&S(g,l+"leave",$e),te&&S(g,l+"move",Xe)),Se.isEnabled=!0,e&&e.type&&Ve(e),oe&&oe(Se)),Se},Se.disable=function(){Se.isEnabled&&(m.filter((function(e){return e!==Se&&x(e.target)})).length||E(Ie?Le:g,"scroll",M),Se.isPressed&&(Se._vx.reset(),Se._vy.reset(),E(ie?g:Le,d[1],Ue)),E(Ie?Le:g,"scroll",We),E(g,"wheel",qe),E(g,d[0],Ve),E(Le,d[2],He),E(Le,d[3],He),E(g,"click",Oe),E(g,"click",Ke),E(Le,"gesturestart",Ge),E(Le,"gestureend",je),E(g,l+"enter",Ye),E(g,l+"leave",$e),E(g,l+"move",Xe),Se.isEnabled=Se.isPressed=Se.isDragging=!1,le&&le(Se))},Se.kill=function(){Se.disable();var e=m.indexOf(Se);e>=0&&m.splice(e,1),u===Se&&(u=0)},m.push(Se),ie&&x(g)&&(u=Se),Se.enable(B)},p=h,(f=[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}])&&e(p.prototype,f),g&&e(p,g),h}();N.version="3.10.3",N.create=function(e){return new N(e)},N.register=F,N.getAll=function(){return m.slice()},N.getById=function(e){return m.filter((function(t){return t.vars.id===e}))[0]},p()&&t.registerPlugin(N);var B,z,U,V,H,G,j,W,q,X,Y,$,K,Z,Q,J,ee,te,ne,ie,re,se,ae,oe,le,ce,he,ue,de,pe,fe,me,ge=1,ve=Date.now,ye=ve(),_e=0,be=0,xe=function(){return Z=1},Se=function(){return Z=0},Ee=function(e){return e},we=function(e){return Math.round(1e5*e)/1e5||0},Te=function(){return"undefined"!=typeof window},Me=function(){return B||Te()&&(B=window.gsap)&&B.registerPlugin&&B},Ae=function(e){return!!~j.indexOf(e)},Pe=function(e){return b(e,"getBoundingClientRect")||(Ae(e)?function(){return Bt.width=U.innerWidth,Bt.height=U.innerHeight,Bt}:function(){return Ze(e)})},Ce=function(e,t){var n=t.s,i=t.d2,r=t.d,s=t.a;return(n="scroll"+i)&&(s=b(e,n))?s()-Pe(e)()[r]:Ae(e)?(H[n]||G[n])-(U["inner"+i]||H["client"+i]||G["client"+i]):e[n]-e["offset"+i]},Ie=function(e,t){for(var n=0;n<ne.length;n+=3)(!t||~t.indexOf(ne[n+1]))&&e(ne[n],ne[n+1],ne[n+2])},Le=function(e){return"string"==typeof e},De=function(e){return"function"==typeof e},Re=function(e){return"number"==typeof e},ke=function(e){return"object"==typeof e},Oe=function(e){return De(e)&&e()},Fe=function(e,t){return function(){var n=Oe(e),i=Oe(t);return function(){Oe(n),Oe(i)}}},Ne=function(e,t,n){return e&&e.progress(t?0:1)&&n&&e.pause()},Be=function(e,t){if(e.enabled){var n=t(e);n&&n.totalTime&&(e.callbackAnimation=n)}},ze=Math.abs,Ue="left",Ve="right",He="bottom",Ge="width",je="height",We="padding",qe="margin",Xe="Width",Ye="px",$e=function(e){return U.getComputedStyle(e)},Ke=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Ze=function(e,t){var n=t&&"matrix(1, 0, 0, 1, 0, 0)"!==$e(e)[Q]&&B.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=e.getBoundingClientRect();return n&&n.progress(0).kill(),i},Qe=function(e,t){var n=t.d2;return e["offset"+n]||e["client"+n]||0},Je=function(e){var t,n=[],i=e.labels,r=e.duration();for(t in i)n.push(i[t]/r);return n},et=function(e){var t=B.utils.snap(e),n=Array.isArray(e)&&e.slice(0).sort((function(e,t){return e-t}));return n?function(e,i,r){var s;if(void 0===r&&(r=.001),!i)return t(e);if(i>0){for(e-=r,s=0;s<n.length;s++)if(n[s]>=e)return n[s];return n[s-1]}for(s=n.length,e+=r;s--;)if(n[s]<=e)return n[s];return n[0]}:function(n,i,r){void 0===r&&(r=.001);var s=t(n);return!i||Math.abs(s-n)<r||s-n<0==i<0?s:t(i<0?n-e:n+e)}},tt=function(e,t,n,i){return n.split(",").forEach((function(n){return e(t,n,i)}))},nt=function(e,t,n,i,r){return e.addEventListener(t,n,{passive:!i,capture:!!r})},it=function(e,t,n){return e.removeEventListener(t,n)},rt=function(e,t,n){return n&&n.wheelHandler&&e(t,"wheel",n)},st={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},at={toggleActions:"play",anticipatePin:0},ot={top:0,left:0,center:.5,bottom:1,right:1},lt=function(e,t){if(Le(e)){var n=e.indexOf("="),i=~n?+(e.charAt(n-1)+1)*parseFloat(e.substr(n+1)):0;~n&&(e.indexOf("%")>n&&(i*=t/100),e=e.substr(0,n-1)),e=i+(e in ot?ot[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},ct=function(e,t,n,i,r,s,a,o){var l=r.startColor,c=r.endColor,h=r.fontSize,u=r.indent,d=r.fontWeight,p=V.createElement("div"),f=Ae(n)||"fixed"===b(n,"pinType"),m=-1!==e.indexOf("scroller"),g=f?G:n,v=-1!==e.indexOf("start"),y=v?l:c,_="border-color:"+y+";font-size:"+h+";color:"+y+";font-weight:"+d+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return _+="position:"+((m||o)&&f?"fixed;":"absolute;"),(m||o||!f)&&(_+=(i===C?Ve:He)+":"+(s+parseFloat(u))+"px;"),a&&(_+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),p._isStart=v,p.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),p.style.cssText=_,p.innerText=t||0===t?e+"-"+t:e,g.children[0]?g.insertBefore(p,g.children[0]):g.appendChild(p),p._offset=p["offset"+i.op.d2],ht(p,0,i,v),p},ht=function(e,t,n,i){var r={display:"block"},s=n[i?"os2":"p2"],a=n[i?"p2":"os2"];e._isFlipped=i,r[n.a+"Percent"]=i?-100:0,r[n.a]=i?"1px":0,r["border"+s+Xe]=1,r["border"+a+Xe]=0,r[n.p]=t+"px",B.set(e,r)},ut=[],dt={},pt=function(){return ve()-_e>34&&Lt()},ft=function(){ae&&ae.isPressed||(g.cache++,ue||(ue=requestAnimationFrame(Lt)),_e||St("scrollStart"),_e=ve())},mt=function(){ce=U.innerWidth,le=U.innerHeight},gt=function(){g.cache++,!K&&!se&&!V.fullscreenElement&&(!oe||ce!==U.innerWidth||Math.abs(U.innerHeight-le)>.25*U.innerHeight)&&W.restart(!0)},vt={},yt=[],_t=[],bt=function(e){var t,n=B.ticker.frame,i=[],r=0;if(pe!==n||ge){for(Tt();r<_t.length;r+=4)(t=U.matchMedia(_t[r]).matches)!==_t[r+3]&&(_t[r+3]=t,t?i.push(r):Tt(1,_t[r])||De(_t[r+2])&&_t[r+2]());for(wt(),r=0;r<i.length;r++)t=i[r],de=_t[t],_t[t+2]=_t[t+1](e);de=0,z&&Pt(0,1),pe=n,St("matchMedia")}},xt=function e(){return it(Gt,"scrollEnd",e)||Pt(!0)},St=function(e){return vt[e]&&vt[e].map((function(e){return e()}))||yt},Et=[],wt=function(e){for(var t=0;t<Et.length;t+=5)e&&Et[t+4]!==e||(Et[t].style.cssText=Et[t+1],Et[t].getBBox&&Et[t].setAttribute("transform",Et[t+2]||""),Et[t+3].uncache=1)},Tt=function(e,t){var n;for(J=0;J<ut.length;J++)n=ut[J],t&&n.media!==t||(e?n.kill(1):n.revert());t&&wt(t),t||St("revert")},Mt=function(){return g.cache++&&g.forEach((function(e){return"function"==typeof e&&(e.rec=0)}))},At=0,Pt=function(e,t){if(!_e||e){fe=!0;var n=St("refreshInit");ie&&Gt.sort(),t||Tt(),ut.slice(0).forEach((function(e){return e.refresh()})),ut.forEach((function(e){return"max"===e.vars.end&&e.setPositions(e.start,Ce(e.scroller,e._dir))})),n.forEach((function(e){return e&&e.render&&e.render(-1)})),Mt(),W.pause(),At++,fe=!1,St("refresh")}else nt(Gt,"scrollEnd",xt)},Ct=0,It=1,Lt=function(){if(!fe){me&&me.update(0),Gt.isUpdating=!0;var e=ut.length,t=ve(),n=t-ye>=50,i=e&&ut[0].scroll();if(It=Ct>i?-1:1,Ct=i,n&&(_e&&!Z&&t-_e>200&&(_e=0,St("scrollEnd")),Y=ye,ye=t),It<0){for(J=e;J-- >0;)ut[J]&&ut[J].update(0,n);It=1}else for(J=0;J<e;J++)ut[J]&&ut[J].update(0,n);Gt.isUpdating=!1}ue=0},Dt=[Ue,"top",He,Ve,"marginBottom","marginRight","marginTop","marginLeft","display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Rt=Dt.concat([Ge,je,"boxSizing","maxWidth","maxHeight","position",qe,We,"paddingTop","paddingRight","paddingBottom","paddingLeft"]),kt=function(e,t,n,i){if(e.parentNode!==t){for(var r,s=Dt.length,a=t.style,o=e.style;s--;)a[r=Dt[s]]=n[r];a.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(a.display="inline-block"),o.bottom=o.right=a.flexBasis="auto",a.overflow="visible",a.boxSizing="border-box",a.width=Qe(e,P)+Ye,a.height=Qe(e,C)+Ye,a.padding=o.margin=o.top=o.left="0",Ft(i),o.width=o.maxWidth=n.width,o.height=o.maxHeight=n.height,o.padding=n.padding,e.parentNode.insertBefore(t,e),t.appendChild(e)}},Ot=/([A-Z])/g,Ft=function(e){if(e){var t,n,i=e.t.style,r=e.length,s=0;for((e.t._gsap||B.core.getCache(e.t)).uncache=1;s<r;s+=2)n=e[s+1],t=e[s],n?i[t]=n:i[t]&&i.removeProperty(t.replace(Ot,"-$1").toLowerCase())}},Nt=function(e){for(var t=Rt.length,n=e.style,i=[],r=0;r<t;r++)i.push(Rt[r],n[Rt[r]]);return i.t=e,i},Bt={left:0,top:0},zt=function(e,t,n,i,r,s,a,o,l,c,h,u,d){De(e)&&(e=e(o)),Le(e)&&"max"===e.substr(0,3)&&(e=u+("="===e.charAt(4)?lt("0"+e.substr(3),n):0));var p,f,m,g=d?d.time():0;if(d&&d.seek(0),Re(e))a&&ht(a,n,i,!0);else{De(t)&&(t=t(o));var v,y,_,b,x=e.split(" ");m=I(t)||G,(v=Ze(m)||{})&&(v.left||v.top)||"none"!==$e(m).display||(b=m.style.display,m.style.display="block",v=Ze(m),b?m.style.display=b:m.style.removeProperty("display")),y=lt(x[0],v[i.d]),_=lt(x[1]||"0",n),e=v[i.p]-l[i.p]-c+y+r-_,a&&ht(a,_,i,n-_<20||a._isStart&&_>20),n-=n-_}if(s){var S=e+n,E=s._isStart;p="scroll"+i.d2,ht(s,S,i,E&&S>20||!E&&(h?Math.max(G[p],H[p]):s.parentNode[p])<=S+1),h&&(l=Ze(a),h&&(s.style[i.op.p]=l[i.op.p]-i.op.m-s._offset+Ye))}return d&&m&&(p=Ze(m),d.seek(u),f=Ze(m),d._caScrollDist=p[i.p]-f[i.p],e=e/d._caScrollDist*u),d&&d.seek(g),d?e:Math.round(e)},Ut=/(webkit|moz|length|cssText|inset)/i,Vt=function(e,t,n,i){if(e.parentNode!==t){var r,s,a=e.style;if(t===G){for(r in e._stOrig=a.cssText,s=$e(e))+r||Ut.test(r)||!s[r]||"string"!=typeof a[r]||"0"===r||(a[r]=s[r]);a.top=n,a.left=i}else a.cssText=e._stOrig;B.core.getCache(e).uncache=1,t.appendChild(e)}},Ht=function(e,t){var n,i,r=L(e,t),s="_scroll"+t.p2,a=function t(a,o,l,c,h){var u=t.tween,d=o.onComplete,p={};return l=l||r(),h=c&&h||0,c=c||a-l,u&&u.kill(),n=Math.round(l),o[s]=a,o.modifiers=p,p[s]=function(e){return(e=we(r()))!==n&&e!==i&&Math.abs(e-n)>2&&Math.abs(e-i)>2?(u.kill(),t.tween=0):e=l+c*u.ratio+h*u.ratio*u.ratio,i=n,n=we(e)},o.onComplete=function(){t.tween=0,d&&d.call(u)},u=t.tween=B.to(e,o)};return e[s]=r,r.wheelHandler=function(){return a.tween&&a.tween.kill()&&(a.tween=0)},nt(e,"wheel",r.wheelHandler),a},Gt=function(){function e(t,n){z||e.register(B)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(t,n)}return e.prototype.init=function(t,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),be){var i,r,s,a,o,l,c,h,u,d,p,f,m,g,y,_,x,S,E,w,T,M,A,D,R,k,O,F,N,z,j,W,$,Q,ee,te,ne,se,ae,oe,le=t=Ke(Le(t)||Re(t)||t.nodeType?{trigger:t}:t,at),ce=le.onUpdate,ue=le.toggleClass,pe=le.id,ye=le.onToggle,xe=le.onRefresh,Se=le.scrub,Te=le.trigger,Me=le.pin,Ie=le.pinSpacing,Oe=le.invalidateOnRefresh,Fe=le.anticipatePin,Ue=le.onScrubComplete,Ve=le.onSnapComplete,He=le.once,Ge=le.snap,je=le.pinReparent,tt=le.pinSpacer,rt=le.containerAnimation,ot=le.fastScrollEnd,ht=le.preventOverlaps,pt=t.horizontal||t.containerAnimation&&!1!==t.horizontal?P:C,mt=!Se&&0!==Se,vt=I(t.scroller||U),yt=B.core.getCache(vt),_t=Ae(vt),bt="fixed"===("pinType"in t?t.pinType:b(vt,"pinType")||_t&&"fixed"),St=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],Et=mt&&t.toggleActions.split(" "),wt="markers"in t?t.markers:at.markers,Tt=_t?0:parseFloat($e(vt)["border"+pt.p2+Xe])||0,Mt=this,At=t.onRefreshInit&&function(){return t.onRefreshInit(Mt)},Pt=function(e,t,n){var i=n.d,r=n.d2,s=n.a;return(s=b(e,"getBoundingClientRect"))?function(){return s()[i]}:function(){return(t?U["inner"+r]:e["client"+r])||0}}(vt,_t,pt),Ct=function(e,t){return!t||~v.indexOf(e)?Pe(e):function(){return Bt}}(vt,_t),Lt=0,Dt=0,Rt=L(vt,pt);if(Mt.media=de,Mt._dir=pt,Fe*=45,Mt.scroller=vt,Mt.scroll=rt?rt.time.bind(rt):Rt,a=Rt(),Mt.vars=t,n=n||t.animation,"refreshPriority"in t&&(ie=1,-9999===t.refreshPriority&&(me=Mt)),yt.tweenScroll=yt.tweenScroll||{top:Ht(vt,C),left:Ht(vt,P)},Mt.tweenTo=i=yt.tweenScroll[pt.p],Mt.scrubDuration=function(e){(j=Re(e)&&e)?z?z.duration(e):z=B.to(n,{ease:"expo",totalProgress:"+=0.001",duration:j,paused:!0,onComplete:function(){return Ue&&Ue(Mt)}}):(z&&z.progress(1).kill(),z=0)},n&&(n.vars.lazy=!1,n._initted||!1!==n.vars.immediateRender&&!1!==t.immediateRender&&n.render(0,!0,!0),Mt.animation=n.pause(),n.scrollTrigger=Mt,Mt.scrubDuration(Se),F=0,pe||(pe=n.vars.id)),ut.push(Mt),Ge&&(ke(Ge)&&!Ge.push||(Ge={snapTo:Ge}),"scrollBehavior"in G.style&&B.set(_t?[G,H]:vt,{scrollBehavior:"auto"}),s=De(Ge.snapTo)?Ge.snapTo:"labels"===Ge.snapTo?function(e){return function(t){return B.utils.snap(Je(e),t)}}(n):"labelsDirectional"===Ge.snapTo?function(e){return function(t,n){return et(Je(e))(t,n.direction)}}(n):!1!==Ge.directional?function(e,t){return et(Ge.snapTo)(e,ve()-Dt<500?0:t.direction)}:B.utils.snap(Ge.snapTo),W=Ge.duration||{min:.1,max:2},W=ke(W)?X(W.min,W.max):X(W,W),$=B.delayedCall(Ge.delay||j/2||.1,(function(){var e=Rt(),t=ve()-Dt<500,r=i.tween;if(!(t||Math.abs(Mt.getVelocity())<10)||r||Z||Lt===e)Mt.isActive&&Lt!==e&&$.restart(!0);else{var a=(e-l)/m,o=n&&!mt?n.totalProgress():a,h=t?0:(o-N)/(ve()-Y)*1e3||0,u=B.utils.clamp(-a,1-a,ze(h/2)*h/.185),d=a+(!1===Ge.inertia?0:u),p=X(0,1,s(d,Mt)),f=Math.round(l+p*m),g=Ge,v=g.onStart,y=g.onInterrupt,_=g.onComplete;if(e<=c&&e>=l&&f!==e){if(r&&!r._initted&&r.data<=ze(f-e))return;!1===Ge.inertia&&(u=p-a),i(f,{duration:W(ze(.185*Math.max(ze(d-o),ze(p-o))/h/.05||0)),ease:Ge.ease||"power3",data:ze(f-e),onInterrupt:function(){return $.restart(!0)&&y&&y(Mt)},onComplete:function(){Mt.update(),Lt=Rt(),F=N=n&&!mt?n.totalProgress():Mt.progress,Ve&&Ve(Mt),_&&_(Mt)}},e,u*m,f-e-u*m),v&&v(Mt,i.tween)}}})).pause()),pe&&(dt[pe]=Mt),(se=(Te=Mt.trigger=I(Te||Me))&&Te._gsap&&Te._gsap.stRevert)&&(se=se(Mt)),Me=!0===Me?Te:I(Me),Le(ue)&&(ue={targets:Te,className:ue}),Me&&(!1===Ie||Ie===qe||(Ie=!(!Ie&&"flex"===$e(Me.parentNode).display)&&We),Mt.pin=Me,!1!==t.force3D&&B.set(Me,{force3D:!0}),(r=B.core.getCache(Me)).spacer?g=r.pinState:(tt&&((tt=I(tt))&&!tt.nodeType&&(tt=tt.current||tt.nativeElement),r.spacerIsNative=!!tt,tt&&(r.spacerState=Nt(tt))),r.spacer=x=tt||V.createElement("div"),x.classList.add("pin-spacer"),pe&&x.classList.add("pin-spacer-"+pe),r.pinState=g=Nt(Me)),Mt.spacer=x=r.spacer,O=$e(Me),A=O[Ie+pt.os2],E=B.getProperty(Me),w=B.quickSetter(Me,pt.a,Ye),kt(Me,x,O),_=Nt(Me)),wt){f=ke(wt)?Ke(wt,st):st,d=ct("scroller-start",pe,vt,pt,f,0),p=ct("scroller-end",pe,vt,pt,f,0,d),S=d["offset"+pt.op.d2];var Ot=I(b(vt,"content")||vt);h=this.markerStart=ct("start",pe,Ot,pt,f,S,0,rt),u=this.markerEnd=ct("end",pe,Ot,pt,f,S,0,rt),rt&&(ne=B.quickSetter([h,u],pt.a,Ye)),bt||v.length&&!0===b(vt,"fixedMarkers")||(oe=$e(ae=_t?G:vt).position,ae.style.position="absolute"===oe||"fixed"===oe?oe:"relative",B.set([d,p],{force3D:!0}),R=B.quickSetter(d,pt.a,Ye),k=B.quickSetter(p,pt.a,Ye))}if(rt){var Ut=rt.vars.onUpdate,Gt=rt.vars.onUpdateParams;rt.eventCallback("onUpdate",(function(){Mt.update(0,0,1),Ut&&Ut.apply(Gt||[])}))}Mt.previous=function(){return ut[ut.indexOf(Mt)-1]},Mt.next=function(){return ut[ut.indexOf(Mt)+1]},Mt.revert=function(e){var t=!1!==e||!Mt.enabled,i=K;t!==Mt.isReverted&&(t&&(Mt.scroll.rec||!K||!fe||(Mt.scroll.rec=Rt()),ee=Math.max(Rt(),Mt.scroll.rec||0),Q=Mt.progress,te=n&&n.progress()),h&&[h,u,d,p].forEach((function(e){return e.style.display=t?"none":"block"})),t&&(K=1),Mt.update(t),K=i,Me&&(t?function(e,t,n){Ft(n);var i=e._gsap;if(i.spacerIsNative)Ft(i.spacerState);else if(e.parentNode===t){var r=t.parentNode;r&&(r.insertBefore(e,t),r.removeChild(t))}}(Me,x,g):(!je||!Mt.isActive)&&kt(Me,x,$e(Me),D)),Mt.isReverted=t)},Mt.refresh=function(r,s){if(!K&&Mt.enabled||s)if(Me&&r&&_e)nt(e,"scrollEnd",xt);else{!fe&&At&&At(Mt),K=1,Dt=ve(),i.tween&&(i.tween.kill(),i.tween=0),z&&z.pause(),Oe&&n&&n.time(-.01,!0).invalidate(),Mt.isReverted||Mt.revert();for(var f,v,b,S,w,A,R,k,O,F,N=Pt(),U=Ct(),V=rt?rt.duration():Ce(vt,pt),H=0,j=0,W=t.end,q=t.endTrigger||Te,X=t.start||(0!==t.start&&Te?Me?"0 0":"0 100%":0),Y=Mt.pinnedContainer=t.pinnedContainer&&I(t.pinnedContainer),Z=Te&&Math.max(0,ut.indexOf(Mt))||0,J=Z;J--;)(A=ut[J]).end||A.refresh(0,1)||(K=1),!(R=A.pin)||R!==Te&&R!==Me||A.isReverted||(F||(F=[]),F.unshift(A),A.revert()),A!==ut[J]&&(Z--,J--);for(De(X)&&(X=X(Mt)),l=zt(X,Te,N,pt,Rt(),h,d,Mt,U,Tt,bt,V,rt)||(Me?-.001:0),De(W)&&(W=W(Mt)),Le(W)&&!W.indexOf("+=")&&(~W.indexOf(" ")?W=(Le(X)?X.split(" ")[0]:"")+W:(H=lt(W.substr(2),N),W=Le(X)?X:l+H,q=Te)),c=Math.max(l,zt(W||(q?"100% 0":V),q,N,pt,Rt()+H,u,p,Mt,U,Tt,bt,V,rt))||-.001,m=c-l||(l-=.01)&&.001,H=0,J=Z;J--;)(R=(A=ut[J]).pin)&&A.start-A._pinPush<l&&!rt&&A.end>0&&(f=A.end-A.start,R!==Te&&R!==Y||Re(X)||(H+=f*(1-A.progress)),R===Me&&(j+=f));if(l+=H,c+=H,Mt._pinPush=j,h&&H&&((f={})[pt.a]="+="+H,Y&&(f[pt.p]="-="+Rt()),B.set([h,u],f)),Me)f=$e(Me),S=pt===C,b=Rt(),T=parseFloat(E(pt.a))+j,!V&&c>1&&((_t?G:vt).style["overflow-"+pt.a]="scroll"),kt(Me,x,f),_=Nt(Me),v=Ze(Me,!0),k=bt&&L(vt,S?P:C)(),Ie&&((D=[Ie+pt.os2,m+j+Ye]).t=x,(J=Ie===We?Qe(Me,pt)+m+j:0)&&D.push(pt.d,J+Ye),Ft(D),bt&&Rt(ee)),bt&&((w={top:v.top+(S?b-l:k)+Ye,left:v.left+(S?k:b-l)+Ye,boxSizing:"border-box",position:"fixed"}).width=w.maxWidth=Math.ceil(v.width)+Ye,w.height=w.maxHeight=Math.ceil(v.height)+Ye,w.margin=w.marginTop=w.marginRight=w.marginBottom=w.marginLeft="0",w.padding=f.padding,w.paddingTop=f.paddingTop,w.paddingRight=f.paddingRight,w.paddingBottom=f.paddingBottom,w.paddingLeft=f.paddingLeft,y=function(e,t,n){for(var i,r=[],s=e.length,a=n?8:0;a<s;a+=2)i=e[a],r.push(i,i in t?t[i]:e[a+1]);return r.t=e.t,r}(g,w,je)),n?(O=n._initted,re(1),n.render(n.duration(),!0,!0),M=E(pt.a)-T+m+j,m!==M&&y.splice(y.length-2,2),n.render(0,!0,!0),O||n.invalidate(),re(0)):M=m;else if(Te&&Rt()&&!rt)for(v=Te.parentNode;v&&v!==G;)v._pinOffset&&(l-=v._pinOffset,c-=v._pinOffset),v=v.parentNode;F&&F.forEach((function(e){return e.revert(!1)})),Mt.start=l,Mt.end=c,a=o=Rt(),rt||(a<ee&&Rt(ee),Mt.scroll.rec=0),Mt.revert(!1),$&&(Lt=-1,Mt.isActive&&Rt(l+m*Q),$.restart(!0)),K=0,n&&mt&&(n._initted||te)&&n.progress()!==te&&n.progress(te,!0).render(n.time(),!0,!0),(Q!==Mt.progress||rt)&&(n&&!mt&&n.totalProgress(Q,!0),Mt.progress=Q,Mt.update(0,0,1)),Me&&Ie&&(x._pinOffset=Math.round(Mt.progress*M)),xe&&xe(Mt)}},Mt.getVelocity=function(){return(Rt()-o)/(ve()-Y)*1e3||0},Mt.endAnimation=function(){Ne(Mt.callbackAnimation),n&&(z?z.progress(1):n.paused()?mt||Ne(n,Mt.direction<0,1):Ne(n,n.reversed()))},Mt.labelToScroll=function(e){return n&&n.labels&&(l||Mt.refresh()||l)+n.labels[e]/n.duration()*m||0},Mt.getTrailing=function(e){var t=ut.indexOf(Mt),n=Mt.direction>0?ut.slice(0,t).reverse():ut.slice(t+1);return(Le(e)?n.filter((function(t){return t.vars.preventOverlaps===e})):n).filter((function(e){return Mt.direction>0?e.end<=l:e.start>=c}))},Mt.update=function(e,t,r){if(!rt||r||e){var s,h,u,p,f,g,v,b=Mt.scroll(),S=e?0:(b-l)/m,E=S<0?0:S>1?1:S||0,P=Mt.progress;if(t&&(o=a,a=rt?Rt():b,Ge&&(N=F,F=n&&!mt?n.totalProgress():E)),Fe&&!E&&Me&&!K&&!ge&&_e&&l<b+(b-o)/(ve()-Y)*Fe&&(E=1e-4),E!==P&&Mt.enabled){if(p=(f=(s=Mt.isActive=!!E&&E<1)!==(!!P&&P<1))||!!E!=!!P,Mt.direction=E>P?1:-1,Mt.progress=E,p&&!K&&(h=E&&!P?0:1===E?1:1===P?2:3,mt&&(u=!f&&"none"!==Et[h+1]&&Et[h+1]||Et[h],v=n&&("complete"===u||"reset"===u||u in n))),ht&&(f||v)&&(v||Se||!n)&&(De(ht)?ht(Mt):Mt.getTrailing(ht).forEach((function(e){return e.endAnimation()}))),mt||(!z||K||ge?n&&n.totalProgress(E,!!K):((rt||me&&me!==Mt)&&z.render(z._dp._time-z._start),z.resetTo?z.resetTo("totalProgress",E,n._tTime/n._tDur):(z.vars.totalProgress=E,z.invalidate().restart()))),Me)if(e&&Ie&&(x.style[Ie+pt.os2]=A),bt){if(p){if(g=!e&&E>P&&c+1>b&&b+1>=Ce(vt,pt),je)if(e||!s&&!g)Vt(Me,x);else{var I=Ze(Me,!0),L=b-l;Vt(Me,G,I.top+(pt===C?L:0)+Ye,I.left+(pt===C?0:L)+Ye)}Ft(s||g?y:_),M!==m&&E<1&&s||w(T+(1!==E||g?0:M))}}else w(we(T+M*E));Ge&&!i.tween&&!K&&!ge&&$.restart(!0),ue&&(f||He&&E&&(E<1||!he))&&q(ue.targets).forEach((function(e){return e.classList[s||He?"add":"remove"](ue.className)})),ce&&!mt&&!e&&ce(Mt),p&&!K?(mt&&(v&&("complete"===u?n.pause().totalProgress(1):"reset"===u?n.restart(!0).pause():"restart"===u?n.restart(!0):n[u]()),ce&&ce(Mt)),!f&&he||(ye&&f&&Be(Mt,ye),St[h]&&Be(Mt,St[h]),He&&(1===E?Mt.kill(!1,1):St[h]=0),f||St[h=1===E?1:3]&&Be(Mt,St[h])),ot&&!s&&Math.abs(Mt.getVelocity())>(Re(ot)?ot:2500)&&(Ne(Mt.callbackAnimation),z?z.progress(1):Ne(n,!E,1))):mt&&ce&&!K&&ce(Mt)}if(k){var D=rt?b/rt.duration()*(rt._caScrollDist||0):b;R(D+(d._isFlipped?1:0)),k(D)}ne&&ne(-b/rt.duration()*(rt._caScrollDist||0))}},Mt.enable=function(t,n){Mt.enabled||(Mt.enabled=!0,nt(vt,"resize",gt),nt(_t?V:vt,"scroll",ft),At&&nt(e,"refreshInit",At),!1!==t&&(Mt.progress=Q=0,a=o=Lt=Rt()),!1!==n&&Mt.refresh())},Mt.getTween=function(e){return e&&i?i.tween:z},Mt.setPositions=function(e,t){Me&&(T+=e-l,M+=t-e-m),Mt.start=l=e,Mt.end=c=t,m=t-e,Mt.update()},Mt.disable=function(t,n){if(Mt.enabled&&(!1!==t&&Mt.revert(),Mt.enabled=Mt.isActive=!1,n||z&&z.pause(),ee=0,r&&(r.uncache=1),At&&it(e,"refreshInit",At),$&&($.pause(),i.tween&&i.tween.kill()&&(i.tween=0)),!_t)){for(var s=ut.length;s--;)if(ut[s].scroller===vt&&ut[s]!==Mt)return;it(vt,"resize",gt),it(vt,"scroll",ft)}},Mt.kill=function(e,i){Mt.disable(e,i),z&&!i&&z.kill(),pe&&delete dt[pe];var s=ut.indexOf(Mt);s>=0&&ut.splice(s,1),s===J&&It>0&&J--,s=0,ut.forEach((function(e){return e.scroller===Mt.scroller&&(s=1)})),s||(Mt.scroll.rec=0),n&&(n.scrollTrigger=null,e&&n.render(-1),i||n.kill()),h&&[h,u,d,p].forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),me===Mt&&(me=0),Me&&(r&&(r.uncache=1),s=0,ut.forEach((function(e){return e.pin===Me&&s++})),s||(r.spacer=0)),t.onKill&&t.onKill(Mt)},Mt.enable(!1,!1),se&&se(Mt),n&&n.add&&!m?B.delayedCall(.01,(function(){return l||c||Mt.refresh()}))&&(m=.01)&&(l=c=0):Mt.refresh()}else this.update=this.refresh=this.kill=Ee},e.register=function(t){return z||(B=t||Me(),Te()&&window.document&&e.enable(),z=be),z},e.defaults=function(e){if(e)for(var t in e)at[t]=e[t];return at},e.disable=function(e,t){be=0,ut.forEach((function(n){return n[t?"kill":"disable"](e)})),it(U,"wheel",ft),it(V,"scroll",ft),clearInterval($),it(V,"touchcancel",Ee),it(G,"touchstart",Ee),tt(it,V,"pointerdown,touchstart,mousedown",xe),tt(it,V,"pointerup,touchend,mouseup",Se),W.kill(),Ie(it);for(var n=0;n<g.length;n+=3)rt(it,g[n],g[n+1]),rt(it,g[n],g[n+2])},e.enable=function(){if(U=window,V=document,H=V.documentElement,G=V.body,B&&(q=B.utils.toArray,X=B.utils.clamp,re=B.core.suppressOverwrites||Ee,B.core.globals("ScrollTrigger",e),G)){be=1,N.register(B),e.isTouch=N.isTouch,nt(U,"wheel",ft),j=[U,V,H,G],e.matchMedia({"(orientation: portrait)":function(){return mt(),mt}}),nt(V,"scroll",ft);var t,n,i=G.style,r=i.borderTopStyle;for(i.borderTopStyle="solid",t=Ze(G),C.m=Math.round(t.top+C.sc())||0,P.m=Math.round(t.left+P.sc())||0,r?i.borderTopStyle=r:i.removeProperty("border-top-style"),$=setInterval(pt,250),B.delayedCall(.5,(function(){return ge=0})),nt(V,"touchcancel",Ee),nt(G,"touchstart",Ee),tt(nt,V,"pointerdown,touchstart,mousedown",xe),tt(nt,V,"pointerup,touchend,mouseup",Se),Q=B.utils.checkPrefix("transform"),Rt.push(Q),z=ve(),W=B.delayedCall(.2,Pt).pause(),ne=[V,"visibilitychange",function(){var e=U.innerWidth,t=U.innerHeight;V.hidden?(ee=e,te=t):ee===e&&te===t||gt()},V,"DOMContentLoaded",Pt,U,"load",Pt,U,"resize",gt],Ie(nt),ut.forEach((function(e){return e.enable(0,1)})),n=0;n<g.length;n+=3)rt(it,g[n],g[n+1]),rt(it,g[n],g[n+2])}},e.config=function(t){"limitCallbacks"in t&&(he=!!t.limitCallbacks);var n=t.syncInterval;n&&clearInterval($)||($=n)&&setInterval(pt,n),"ignoreMobileResize"in t&&(oe=1===e.isTouch&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(Ie(it)||Ie(nt,t.autoRefreshEvents||"none"),se=-1===(t.autoRefreshEvents+"").indexOf("resize"))},e.scrollerProxy=function(e,t){var n=I(e),i=g.indexOf(n),r=Ae(n);~i&&g.splice(i,r?6:2),t&&(r?v.unshift(U,t,G,t,H,t):v.unshift(n,t))},e.matchMedia=function(e){var t,n,i,r,s;for(n in e)i=_t.indexOf(n),r=e[n],de=n,"all"===n?r():(t=U.matchMedia(n))&&(t.matches&&(s=r()),~i?(_t[i+1]=Fe(_t[i+1],r),_t[i+2]=Fe(_t[i+2],s)):(i=_t.length,_t.push(n,r,s),t.addListener?t.addListener(bt):t.addEventListener("change",bt)),_t[i+3]=t.matches),de=0;return _t},e.clearMatchMedia=function(e){e||(_t.length=0),(e=_t.indexOf(e))>=0&&_t.splice(e,4)},e.isInViewport=function(e,t,n){var i=(Le(e)?I(e):e).getBoundingClientRect(),r=i[n?Ge:je]*t||0;return n?i.right-r>0&&i.left+r<U.innerWidth:i.bottom-r>0&&i.top+r<U.innerHeight},e.positionInViewport=function(e,t,n){Le(e)&&(e=I(e));var i=e.getBoundingClientRect(),r=i[n?Ge:je],s=null==t?r/2:t in ot?ot[t]*r:~t.indexOf("%")?parseFloat(t)*r/100:parseFloat(t)||0;return n?(i.left+s)/U.innerWidth:(i.top+s)/U.innerHeight},e}();Gt.version="3.10.3",Gt.saveStyles=function(e){return e?q(e).forEach((function(e){if(e&&e.style){var t=Et.indexOf(e);t>=0&&Et.splice(t,5),Et.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),B.core.getCache(e),de)}})):Et},Gt.revert=function(e,t){return Tt(!e,t)},Gt.create=function(e,t){return new Gt(e,t)},Gt.refresh=function(e){return e?gt():(z||Gt.register())&&Pt(!0)},Gt.update=Lt,Gt.clearScrollMemory=Mt,Gt.maxScroll=function(e,t){return Ce(e,t?P:C)},Gt.getScrollFunc=function(e,t){return L(I(e),t?P:C)},Gt.getById=function(e){return dt[e]},Gt.getAll=function(){return ut.filter((function(e){return"ScrollSmoother"!==e.vars.id}))},Gt.isScrolling=function(){return!!_e},Gt.snapDirectional=et,Gt.addEventListener=function(e,t){var n=vt[e]||(vt[e]=[]);~n.indexOf(t)||n.push(t)},Gt.removeEventListener=function(e,t){var n=vt[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},Gt.batch=function(e,t){var n,i=[],r={},s=t.interval||.016,a=t.batchMax||1e9,o=function(e,t){var n=[],i=[],r=B.delayedCall(s,(function(){t(n,i),n=[],i=[]})).pause();return function(e){n.length||r.restart(!0),n.push(e.trigger),i.push(e),a<=n.length&&r.progress(1)}};for(n in t)r[n]="on"===n.substr(0,2)&&De(t[n])&&"onRefreshInit"!==n?o(0,t[n]):t[n];return De(a)&&(a=a(),nt(Gt,"refresh",(function(){return a=t.batchMax()}))),q(e).forEach((function(e){var t={};for(n in r)t[n]=r[n];t.trigger=e,i.push(Gt.create(t))})),i};var jt,Wt=function(e,t,n,i){return t>i?e(i):t<0&&e(0),n>i?(i-t)/(n-t):n<0?t/(t-n):1},qt=function e(t,n){!0===n?t.style.removeProperty("touch-action"):t.style.touchAction=n?"pan-"+n:"none",t===H&&e(G)},Xt={auto:1,scroll:1},Yt=function(e){var t,n=e.event,i=e.target,r=e.axis,s=(n.changedTouches?n.changedTouches[0]:n).target,a=s._gsap||B.core.getCache(s),o=ve();if(!a._isScrollT||o-a._isScrollT>2e3){for(;s&&s.scrollHeight<=s.clientHeight;)s=s.parentNode;a._isScroll=s&&!Ae(s)&&s!==i&&(Xt[(t=$e(s)).overflowY]||Xt[t.overflowX]),a._isScrollT=o}(a._isScroll||"x"===r)&&(n._gsapAllow=!0)},$t=function(e,t,n,i){return N.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:i=i&&Yt,onPress:i,onDrag:i,onScroll:i,onEnable:function(){return n&&nt(V,N.eventTypes[0],Zt,!1,!0)},onDisable:function(){return it(V,N.eventTypes[0],Zt)}})},Kt=/(input|label|select|textarea)/i,Zt=function(e){var t=Kt.test(e.target.tagName);(t||jt)&&(e._gsapAllow=!0,jt=t)},Qt=function(e){ke(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t,n,i,r,s,a,o,l,c=e,h=c.normalizeScrollX,u=c.momentum,d=c.allowNestedScroll,p=I(e.target)||H,f=L(p,C),m=L(p,P),g=1,v=0,y=De(u)?function(){return u(t)}:function(){return u||2.8},_=$t(p,e.type,!0,d),b=function(){return i=!1},x=Ee,S=Ee,E=function(){n=Ce(p,C),S=X(0,n),h&&(x=X(0,Ce(p,P))),r=At},w=Gt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),T=function(){E(),s.isActive()&&s.vars.scrollY>n&&s.resetTo("scrollY",Ce(p,C))};return e.ignoreCheck=function(e){return w&&"touchmove"===e.type&&function(){if(i)return requestAnimationFrame(b),!0;i=!0}()||g>1||t.isGesturing||e.touches&&e.touches.length>1},e.onPress=function(){var e=g;g=U.visualViewport&&U.visualViewport.scale||1,s.pause(),e!==g&&qt(p,g>1||!h&&"x"),i=!1,a=m(),o=f(),E(),r=At},e.onRelease=e.onGestureStart=function(e,t){if(t){var n,i,r=y();h&&(i=(n=m())+.05*r*-e.velocityX/.227/g,r*=Wt(m,n,i,Ce(p,P)),s.vars.scrollX=x(i)),i=(n=f())+.05*r*-e.velocityY/.227/g,r*=Wt(f,n,i,Ce(p,C)),s.vars.scrollY=S(i),s.invalidate().duration(r).play(.01)}else l.restart(!0)},e.onWheel=function(){s._ts&&s.pause(),ve()-v>1e3&&(r=0,v=ve())},e.onChange=function(e,t,n,i,s){At!==r&&E(),t&&h&&m(x(i[2]===t?a+(e.startX-e.x)/g:m()+t-i[1])),n&&f(S(s[2]===n?o+(e.startY-e.y)/g:f()+n-s[1])),Lt()},e.onEnable=function(){qt(p,!h&&"x"),nt(U,"resize",T),_.enable()},e.onDisable=function(){qt(p,!0),it(U,"resize",T),_.kill()},t=new N(e),l=t._dc,s=B.to(t,{ease:"power4",paused:!0,scrollX:h?"+=0.1":"+=0",scrollY:"+=0.1",onComplete:l.vars.onComplete}),t};function Jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function en(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}Gt.sort=function(e){return ut.sort(e||function(e,t){return-1e6*(e.vars.refreshPriority||0)+e.start-(t.start+-1e6*(t.vars.refreshPriority||0))})},Gt.observe=function(e){return new N(e)},Gt.normalizeScroll=function(e){if(void 0===e)return ae;if(!0===e&&ae)return ae.enable();if(!1===e)return ae&&ae.kill();var t=e instanceof N?e:Qt(e);return ae&&ae.target===t.target&&ae.kill(),Ae(t.target)&&(ae=t),t},Gt.core={_getVelocityProp:D,_inputObserver:$t,_scrollers:g,_proxies:v,bridge:{ss:function(){_e||St("scrollStart"),_e=ve()},ref:function(){return K}}},Me()&&B.registerPlugin(Gt);var tn,nn,rn,sn,an,on,ln,cn,hn,un,dn,pn,fn,mn={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},gn={duration:.5,overwrite:!1,delay:0},vn=1e8,yn=1e-8,_n=2*Math.PI,bn=_n/4,xn=0,Sn=Math.sqrt,En=Math.cos,wn=Math.sin,Tn=function(e){return"string"==typeof e},Mn=function(e){return"function"==typeof e},An=function(e){return"number"==typeof e},Pn=function(e){return void 0===e},Cn=function(e){return"object"==typeof e},In=function(e){return!1!==e},Ln=function(){return"undefined"!=typeof window},Dn=function(e){return Mn(e)||Tn(e)},Rn="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},kn=Array.isArray,On=/(?:-?\.?\d|\.)+/gi,Fn=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Nn=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Bn=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,zn=/[+-]=-?[.\d]+/,Un=/[^,'"\[\]\s]+/gi,Vn=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Hn={},Gn={},jn=function(e){return(Gn=gi(e,Hn))&&as},Wn=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},qn=function(e,t){return!t&&console.warn(e)},Xn=function(e,t){return e&&(Hn[e]=t)&&Gn&&(Gn[e]=t)||Hn},Yn=function(){return 0},$n={},Kn=[],Zn={},Qn={},Jn={},ei=30,ti=[],ni="",ii=function(e){var t,n,i=e[0];if(Cn(i)||Mn(i)||(e=[e]),!(t=(i._gsap||{}).harness)){for(n=ti.length;n--&&!ti[n].targetTest(i););t=ti[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new Cr(e[n],t)))||e.splice(n,1);return e},ri=function(e){return e._gsap||ii(Yi(e))[0]._gsap},si=function(e,t,n){return(n=e[t])&&Mn(n)?e[t]():Pn(n)&&e.getAttribute&&e.getAttribute(t)||n},ai=function(e,t){return(e=e.split(",")).forEach(t)||e},oi=function(e){return Math.round(1e5*e)/1e5||0},li=function(e){return Math.round(1e7*e)/1e7||0},ci=function(e,t){var n=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+i:"-"===n?e-i:"*"===n?e*i:e/i},hi=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},ui=function(){var e,t,n=Kn.length,i=Kn.slice(0);for(Zn={},Kn.length=0,e=0;e<n;e++)(t=i[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},di=function(e,t,n,i){Kn.length&&ui(),e.render(t,n,i),Kn.length&&ui()},pi=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(Un).length<2?t:Tn(e)?e.trim():e},fi=function(e){return e},mi=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},gi=function(e,t){for(var n in t)e[n]=t[n];return e},vi=function e(t,n){for(var i in n)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(t[i]=Cn(n[i])?e(t[i]||(t[i]={}),n[i]):n[i]);return t},yi=function(e,t){var n,i={};for(n in e)n in t||(i[n]=e[n]);return i},_i=function(e){var t,n=e.parent||nn,i=e.keyframes?(t=kn(e.keyframes),function(e,n){for(var i in n)i in e||"duration"===i&&t||"ease"===i||(e[i]=n[i])}):mi;if(In(e.inherit))for(;n;)i(e,n.vars.defaults),n=n.parent||n._dp;return e},bi=function(e,t,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var s,a=e[i];if(r)for(s=t[r];a&&a[r]>s;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=a,t.parent=t._dp=e,t},xi=function(e,t,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=t._prev,s=t._next;r?r._next=s:e[n]===t&&(e[n]=s),s?s._prev=r:e[i]===t&&(e[i]=r),t._next=t._prev=t.parent=null},Si=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},Ei=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},wi=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Ti=function e(t){return!t||t._ts&&e(t.parent)},Mi=function(e){return e._repeat?Ai(e._tTime,e=e.duration()+e._rDelay)*e:0},Ai=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Pi=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Ci=function(e){return e._end=li(e._start+(e._tDur/Math.abs(e._ts||e._rts||yn)||0))},Ii=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=li(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Ci(e),n._dirty||Ei(n,e)),e},Li=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=Pi(e.rawTime(),t),(!t._dur||Gi(0,t.totalDuration(),n)-t._tTime>yn)&&t.render(n,!0)),Ei(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},Di=function(e,t,n,i){return t.parent&&Si(t),t._start=li((An(n)?n:n||e!==nn?Ui(e,n,t):e._time)+t._delay),t._end=li(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),bi(e,t,"_first","_last",e._sort?"_start":0),Fi(t)||(e._recent=t),i||Li(e,t),e},Ri=function(e,t){return(Hn.ScrollTrigger||Wn("scrollTrigger",t))&&Hn.ScrollTrigger.create(t,e)},ki=function(e,t,n,i){return Nr(e,t),e._initted?!n&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&ln!==gr.frame?(Kn.push(e),e._lazy=[t,i],1):void 0:1},Oi=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},Fi=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Ni=function(e,t,n,i){var r=e._repeat,s=li(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=s/e._dur),e._dur=s,e._tDur=r?r<0?1e10:li(s*(r+1)+e._rDelay*r):s,a>0&&!i?Ii(e,e._tTime=e._tDur*a):e.parent&&Ci(e),n||Ei(e.parent,e),e},Bi=function(e){return e instanceof Lr?Ei(e):Ni(e,e._dur)},zi={_start:0,endTime:Yn,totalDuration:Yn},Ui=function e(t,n,i){var r,s,a,o=t.labels,l=t._recent||zi,c=t.duration()>=vn?l.endTime(!1):t._dur;return Tn(n)&&(isNaN(n)||n in o)?(s=n.charAt(0),a="%"===n.substr(-1),r=n.indexOf("="),"<"===s||">"===s?(r>=0&&(n=n.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(a?(r<0?l:i).totalDuration()/100:1)):r<0?(n in o||(o[n]=c),o[n]):(s=parseFloat(n.charAt(r-1)+n.substr(r+1)),a&&i&&(s=s/100*(kn(i)?i[0]:i).totalDuration()),r>1?e(t,n.substr(0,r-1),i)+s:c+s)):null==n?c:+n},Vi=function(e,t,n){var i,r,s=An(t[1]),a=(s?2:1)+(e<2?0:1),o=t[a];if(s&&(o.duration=t[1]),o.parent=n,e){for(i=o,r=n;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=In(r.vars.inherit)&&r.parent;o.immediateRender=In(i.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return new Hr(t[0],o,t[a+1])},Hi=function(e,t){return e||0===e?t(e):t},Gi=function(e,t,n){return n<e?e:n>t?t:n},ji=function(e,t){return Tn(e)&&(t=Vn.exec(e))?t[1]:""},Wi=[].slice,qi=function(e,t){return e&&Cn(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Cn(e[0]))&&!e.nodeType&&e!==rn},Xi=function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var i;return Tn(e)&&!t||qi(e,1)?(i=n).push.apply(i,Yi(e)):n.push(e)}))||n},Yi=function(e,t,n){return!Tn(e)||n||!sn&&vr()?kn(e)?Xi(e,n):qi(e)?Wi.call(e,0):e?[e]:[]:Wi.call((t||an).querySelectorAll(e),0)},$i=function(e){return e.sort((function(){return.5-Math.random()}))},Ki=function(e){if(Mn(e))return e;var t=Cn(e)?e:{each:e},n=wr(t.ease),i=t.from||0,r=parseFloat(t.base)||0,s={},a=i>0&&i<1,o=isNaN(i)||a,l=t.axis,c=i,h=i;return Tn(i)?c=h={center:.5,edges:.5,end:1}[i]||0:!a&&o&&(c=i[0],h=i[1]),function(e,a,u){var d,p,f,m,g,v,y,_,b,x=(u||t).length,S=s[x];if(!S){if(!(b="auto"===t.grid?0:(t.grid||[1,vn])[1])){for(y=-vn;y<(y=u[b++].getBoundingClientRect().left)&&b<x;);b--}for(S=s[x]=[],d=o?Math.min(b,x)*c-.5:i%b,p=b===vn?0:o?x*h/b-.5:i/b|0,y=0,_=vn,v=0;v<x;v++)f=v%b-d,m=p-(v/b|0),S[v]=g=l?Math.abs("y"===l?m:f):Sn(f*f+m*m),g>y&&(y=g),g<_&&(_=g);"random"===i&&$i(S),S.max=y-_,S.min=_,S.v=x=(parseFloat(t.amount)||parseFloat(t.each)*(b>x?x-1:l?"y"===l?x/b:b:Math.max(b,x/b))||0)*("edges"===i?-1:1),S.b=x<0?r-x:r,S.u=ji(t.amount||t.each)||0,n=n&&x<0?Sr(n):n}return x=(S[e]-S.min)/S.max||0,li(S.b+(n?n(x):x)*S.v)+S.u}},Zi=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=Math.round(parseFloat(n)/e)*e*t;return(i-i%1)/t+(An(n)?0:ji(n))}},Qi=function(e,t){var n,i,r=kn(e);return!r&&Cn(e)&&(n=r=e.radius||vn,e.values?(e=Yi(e.values),(i=!An(e[0]))&&(n*=n)):e=Zi(e.increment)),Hi(t,r?Mn(e)?function(t){return i=e(t),Math.abs(i-t)<=n?i:t}:function(t){for(var r,s,a=parseFloat(i?t.x:t),o=parseFloat(i?t.y:0),l=vn,c=0,h=e.length;h--;)(r=i?(r=e[h].x-a)*r+(s=e[h].y-o)*s:Math.abs(e[h]-a))<l&&(l=r,c=h);return c=!n||l<=n?e[c]:t,i||c===t||An(t)?c:c+ji(t)}:Zi(e))},Ji=function(e,t,n,i){return Hi(kn(e)?!t:!0===n?!!(n=0):!i,(function(){return kn(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*i)/i}))},er=function(e,t,n){return Hi(n,(function(n){return e[~~t(n)]}))},tr=function(e){for(var t,n,i,r,s=0,a="";~(t=e.indexOf("random(",s));)i=e.indexOf(")",t),r="["===e.charAt(t+7),n=e.substr(t+7,i-t-7).match(r?Un:On),a+=e.substr(s,t-s)+Ji(r?n:+n[0],r?0:+n[1],+n[2]||1e-5),s=i+1;return a+e.substr(s,e.length-s)},nr=function(e,t,n,i,r){var s=t-e,a=i-n;return Hi(r,(function(t){return n+((t-e)/s*a||0)}))},ir=function(e,t,n){var i,r,s,a=e.labels,o=vn;for(i in a)(r=a[i]-t)<0==!!n&&r&&o>(r=Math.abs(r))&&(s=i,o=r);return s},rr=function(e,t,n){var i,r,s=e.vars,a=s[t];if(a)return i=s[t+"Params"],r=s.callbackScope||e,n&&Kn.length&&ui(),i?a.apply(r,i):a.call(r)},sr=function(e){return Si(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&rr(e,"onInterrupt"),e},ar=function(e){var t=(e=!e.name&&e.default||e).name,n=Mn(e),i=t&&!n&&e.init?function(){this._props=[]}:e,r={init:Yn,render:Zr,add:Or,kill:Jr,modifier:Qr,rawVars:0},s={targetTest:0,get:0,getSetter:Xr,aliases:{},register:0};if(vr(),e!==i){if(Qn[t])return;mi(i,mi(yi(e,r),s)),gi(i.prototype,gi(r,yi(e,s))),Qn[i.prop=t]=i,e.targetTest&&(ti.push(i),$n[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Xn(t,i),e.register&&e.register(as,i,ns)},or=255,lr={aqua:[0,or,or],lime:[0,or,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,or],navy:[0,0,128],white:[or,or,or],olive:[128,128,0],yellow:[or,or,0],orange:[or,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[or,0,0],pink:[or,192,203],cyan:[0,or,or],transparent:[or,or,or,0]},cr=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*or+.5|0},hr=function(e,t,n){var i,r,s,a,o,l,c,h,u,d,p=e?An(e)?[e>>16,e>>8&or,e&or]:0:lr.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),lr[e])p=lr[e];else if("#"===e.charAt(0)){if(e.length<6&&(i=e.charAt(1),r=e.charAt(2),s=e.charAt(3),e="#"+i+i+r+r+s+s+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(p=parseInt(e.substr(1,6),16))>>16,p>>8&or,p&or,parseInt(e.substr(7),16)/255];p=[(e=parseInt(e.substr(1),16))>>16,e>>8&or,e&or]}else if("hsl"===e.substr(0,3))if(p=d=e.match(On),t){if(~e.indexOf("="))return p=e.match(Fn),n&&p.length<4&&(p[3]=1),p}else a=+p[0]%360/360,o=+p[1]/100,i=2*(l=+p[2]/100)-(r=l<=.5?l*(o+1):l+o-l*o),p.length>3&&(p[3]*=1),p[0]=cr(a+1/3,i,r),p[1]=cr(a,i,r),p[2]=cr(a-1/3,i,r);else p=e.match(On)||lr.transparent;p=p.map(Number)}return t&&!d&&(i=p[0]/or,r=p[1]/or,s=p[2]/or,l=((c=Math.max(i,r,s))+(h=Math.min(i,r,s)))/2,c===h?a=o=0:(u=c-h,o=l>.5?u/(2-c-h):u/(c+h),a=c===i?(r-s)/u+(r<s?6:0):c===r?(s-i)/u+2:(i-r)/u+4,a*=60),p[0]=~~(a+.5),p[1]=~~(100*o+.5),p[2]=~~(100*l+.5)),n&&p.length<4&&(p[3]=1),p},ur=function(e){var t=[],n=[],i=-1;return e.split(pr).forEach((function(e){var r=e.match(Nn)||[];t.push.apply(t,r),n.push(i+=r.length+1)})),t.c=n,t},dr=function(e,t,n){var i,r,s,a,o="",l=(e+o).match(pr),c=t?"hsla(":"rgba(",h=0;if(!l)return e;if(l=l.map((function(e){return(e=hr(e,t,1))&&c+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(s=ur(e),(i=n.c).join(o)!==s.c.join(o)))for(a=(r=e.replace(pr,"1").split(Nn)).length-1;h<a;h++)o+=r[h]+(~i.indexOf(h)?l.shift()||c+"0,0,0,0)":(s.length?s:l.length?l:n).shift());if(!r)for(a=(r=e.split(pr)).length-1;h<a;h++)o+=r[h]+l[h];return o+r[a]},pr=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in lr)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),fr=/hsl[a]?\(/,mr=function(e){var t,n=e.join(" ");if(pr.lastIndex=0,pr.test(n))return t=fr.test(n),e[1]=dr(e[1],t),e[0]=dr(e[0],t,ur(e[1])),!0},gr=function(){var e,t,n,i,r,s,a=Date.now,o=500,l=33,c=a(),h=c,u=1e3/240,d=u,p=[],f=function n(f){var m,g,v,y,_=a()-h,b=!0===f;if(_>o&&(c+=_-l),((m=(v=(h+=_)-c)-d)>0||b)&&(y=++i.frame,r=v-1e3*i.time,i.time=v/=1e3,d+=m+(m>=u?4:u-m),g=1),b||(e=t(n)),g)for(s=0;s<p.length;s++)p[s](v,r,y,f)};return i={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(e){return r/(1e3/(e||60))},wake:function(){on&&(!sn&&Ln()&&(rn=sn=window,an=rn.document||{},Hn.gsap=as,(rn.gsapVersions||(rn.gsapVersions=[])).push(as.version),jn(Gn||rn.GreenSockGlobals||!rn.gsap&&rn||{}),n=rn.requestAnimationFrame),e&&i.sleep(),t=n||function(e){return setTimeout(e,d-1e3*i.time+1|0)},hn=1,f(2))},sleep:function(){(n?rn.cancelAnimationFrame:clearTimeout)(e),hn=0,t=Yn},lagSmoothing:function(e,t){o=e||1e8,l=Math.min(t,o,0)},fps:function(e){u=1e3/(e||240),d=1e3*i.time+u},add:function(e,t,n){var r=t?function(t,n,s,a){e(t,n,s,a),i.remove(r)}:e;return i.remove(e),p[n?"unshift":"push"](r),vr(),r},remove:function(e,t){~(t=p.indexOf(e))&&p.splice(t,1)&&s>=t&&s--},_listeners:p},i}(),vr=function(){return!hn&&gr.wake()},yr={},_r=/^[\d.\-M][\d.\-,\s]/,br=/["']/g,xr=function(e){for(var t,n,i,r={},s=e.substr(1,e.length-3).split(":"),a=s[0],o=1,l=s.length;o<l;o++)n=s[o],t=o!==l-1?n.lastIndexOf(","):n.length,i=n.substr(0,t),r[a]=isNaN(i)?i.replace(br,"").trim():+i,a=n.substr(t+1).trim();return r},Sr=function(e){return function(t){return 1-e(1-t)}},Er=function e(t,n){for(var i,r=t._first;r;)r instanceof Lr?e(r,n):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===n||(r.timeline?e(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},wr=function(e,t){return e&&(Mn(e)?e:yr[e]||function(e){var t=(e+"").split("("),n=yr[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[xr(t[1])]:function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<n?e.indexOf(")",n+1):n)}(e).split(",").map(pi)):yr._CE&&_r.test(e)?yr._CE("",e):n}(e))||t},Tr=function(e,t,n,i){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===i&&(i=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var r,s={easeIn:t,easeOut:n,easeInOut:i};return ai(e,(function(e){for(var t in yr[e]=Hn[e]=s,yr[r=e.toLowerCase()]=n,s)yr[r+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=yr[e+"."+t]=s[t]})),s},Mr=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},Ar=function e(t,n,i){var r=n>=1?n:1,s=(i||(t?.3:.45))/(n<1?n:1),a=s/_n*(Math.asin(1/r)||0),o=function(e){return 1===e?1:r*Math.pow(2,-10*e)*wn((e-a)*s)+1},l="out"===t?o:"in"===t?function(e){return 1-o(1-e)}:Mr(o);return s=_n/s,l.config=function(n,i){return e(t,n,i)},l},Pr=function e(t,n){void 0===n&&(n=1.70158);var i=function(e){return e?--e*e*((n+1)*e+n)+1:0},r="out"===t?i:"in"===t?function(e){return 1-i(1-e)}:Mr(i);return r.config=function(n){return e(t,n)},r};ai("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;Tr(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),yr.Linear.easeNone=yr.none=yr.Linear.easeIn,Tr("Elastic",Ar("in"),Ar("out"),Ar()),un=7.5625,pn=1/(dn=2.75),Tr("Bounce",(function(e){return 1-fn(1-e)}),fn=function(e){return e<pn?un*e*e:e<.7272727272727273?un*Math.pow(e-1.5/dn,2)+.75:e<.9090909090909092?un*(e-=2.25/dn)*e+.9375:un*Math.pow(e-2.625/dn,2)+.984375}),Tr("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),Tr("Circ",(function(e){return-(Sn(1-e*e)-1)})),Tr("Sine",(function(e){return 1===e?1:1-En(e*bn)})),Tr("Back",Pr("in"),Pr("out"),Pr()),yr.SteppedEase=yr.steps=Hn.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,i=e+(t?0:1),r=t?1:0;return function(e){return((i*Gi(0,.99999999,e)|0)+r)*n}}},gn.ease=yr["quad.out"],ai("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return ni+=e+","+e+"Params,"}));var Cr=function(e,t){this.id=xn++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:si,this.set=t?t.getSetter:Xr},Ir=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Ni(this,+e.duration,1,1),this.data=e.data,hn||gr.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Ni(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(vr(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Ii(this,e),!n._dp||n.parent||Li(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Di(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===yn||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),di(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Mi(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Mi(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?Ai(this._tTime,n)+1:1},t.timeScale=function(e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?Pi(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(Gi(-this._delay,this._tDur,t),!0),Ci(this),wi(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(vr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==yn&&(this._tTime-=yn)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Di(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(In(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Pi(t.rawTime(e),this):this._tTime:this._tTime},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(t._ts||1),t=t._dp;return n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,Bi(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,Bi(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(Ui(this,e),In(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,In(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-yn))},t.eventCallback=function(e,t,n){var i=this.vars;return arguments.length>1?(t?(i[e]=t,n&&(i[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete i[e],this):i[e]},t.then=function(e){var t=this;return new Promise((function(n){var i=Mn(e)?e:fi,r=function(){var e=t.then;t.then=null,Mn(i)&&(i=i(t))&&(i.then||i===t)&&(t.then=e),n(i),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?r():t._prom=r}))},t.kill=function(){sr(this)},e}();mi(Ir.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Lr=function(e){function t(t,n){var i;return void 0===t&&(t={}),(i=e.call(this,t)||this).labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=In(t.sortChildren),nn&&Di(t.parent||nn,Jt(i),n),t.reversed&&i.reverse(),t.paused&&i.paused(!0),t.scrollTrigger&&Ri(Jt(i),t.scrollTrigger),i}en(t,e);var n=t.prototype;return n.to=function(e,t,n){return Vi(0,arguments,this),this},n.from=function(e,t,n){return Vi(1,arguments,this),this},n.fromTo=function(e,t,n,i){return Vi(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,_i(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new Hr(e,t,Ui(this,n),1),this},n.call=function(e,t,n){return Di(this,Hr.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,i,r,s,a){return n.duration=t,n.stagger=n.stagger||i,n.onComplete=s,n.onCompleteParams=a,n.parent=this,new Hr(e,n,Ui(this,r)),this},n.staggerFrom=function(e,t,n,i,r,s,a){return n.runBackwards=1,_i(n).immediateRender=In(n.immediateRender),this.staggerTo(e,t,n,i,r,s,a)},n.staggerFromTo=function(e,t,n,i,r,s,a,o){return i.startAt=n,_i(i).immediateRender=In(i.immediateRender),this.staggerTo(e,t,i,r,s,a,o)},n.render=function(e,t,n){var i,r,s,a,o,l,c,h,u,d,p,f,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=e<=0?0:li(e),_=this._zTime<0!=e<0&&(this._initted||!v);if(this!==nn&&y>g&&e>=0&&(y=g),y!==this._tTime||n||_){if(m!==this._time&&v&&(y+=this._time-m,e+=this._time-m),i=y,u=this._start,l=!(h=this._ts),_&&(v||(m=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(p=this._yoyo,o=v+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*o+e,t,n);if(i=li(y%o),y===g?(a=this._repeat,i=v):((a=~~(y/o))&&a===y/o&&(i=v,a--),i>v&&(i=v)),d=Ai(this._tTime,o),!m&&this._tTime&&d!==a&&(d=a),p&&1&a&&(i=v-i,f=1),a!==d&&!this._lock){var b=p&&1&d,x=b===(p&&1&a);if(a<d&&(b=!b),m=b?0:v,this._lock=1,this.render(m||(f?0:li(a*o)),t,!v)._lock=0,this._tTime=y,!t&&this.parent&&rr(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),m&&m!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,g=this._tDur,x&&(this._lock=2,m=b?v:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;Er(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if("isPause"===i.data&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if("isPause"===i.data&&i._start<t)return i;i=i._prev}}(this,li(m),li(i)),c&&(y-=i-(i=c._start))),this._tTime=y,this._time=i,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,m=0),!m&&i&&!t&&(rr(this,"onStart"),this._tTime!==y))return this;if(i>=m&&e>=0)for(r=this._first;r;){if(s=r._next,(r._act||i>=r._start)&&r._ts&&c!==r){if(r.parent!==this)return this.render(e,t,n);if(r.render(r._ts>0?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,t,n),i!==this._time||!this._ts&&!l){c=0,s&&(y+=this._zTime=-1e-8);break}}r=s}else{r=this._last;for(var S=e<0?e:i;r;){if(s=r._prev,(r._act||S<=r._end)&&r._ts&&c!==r){if(r.parent!==this)return this.render(e,t,n);if(r.render(r._ts>0?(S-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(S-r._start)*r._ts,t,n),i!==this._time||!this._ts&&!l){c=0,s&&(y+=this._zTime=S?-1e-8:yn);break}}r=s}}if(c&&!t&&(this.pause(),c.render(i>=m?0:-1e-8)._zTime=i>=m?1:-1,this._ts))return this._start=u,Ci(this),this.render(e,t,n);this._onUpdate&&!t&&rr(this,"onUpdate",!0),(y===g&&this._tTime>=this.totalDuration()||!y&&m)&&(u!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||((e||!v)&&(y===g&&this._ts>0||!y&&this._ts<0)&&Si(this,1),t||e<0&&!m||!y&&!m&&g||(rr(this,y===g&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<g&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(An(t)||(t=Ui(this,t,e)),!(e instanceof Ir)){if(kn(e))return e.forEach((function(e){return n.add(e,t)})),this;if(Tn(e))return this.addLabel(e,t);if(!Mn(e))return this;e=Hr.delayedCall(0,e)}return this!==e?Di(this,e,t):this},n.getChildren=function(e,t,n,i){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===i&&(i=-vn);for(var r=[],s=this._first;s;)s._start>=i&&(s instanceof Hr?t&&r.push(s):(n&&r.push(s),e&&r.push.apply(r,s.getChildren(!0,t,n)))),s=s._next;return r},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return Tn(e)?this.removeLabel(e):Mn(e)?this.killTweensOf(e):(xi(this,e),e===this._recent&&(this._recent=this._last),Ei(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=li(gr.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=Ui(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var i=Hr.delayedCall(0,t||Yn,n);return i.data="isPause",this._hasPause=1,Di(this,i,Ui(this,e))},n.removePause=function(e){var t=this._first;for(e=Ui(this,e);t;)t._start===e&&"isPause"===t.data&&Si(t),t=t._next},n.killTweensOf=function(e,t,n){for(var i=this.getTweensOf(e,n),r=i.length;r--;)Dr!==i[r]&&i[r].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,i=[],r=Yi(e),s=this._first,a=An(t);s;)s instanceof Hr?hi(s._targets,r)&&(a?(!Dr||s._initted&&s._ts)&&s.globalTime(0)<=t&&s.globalTime(s.totalDuration())>t:!t||s.isActive())&&i.push(s):(n=s.getTweensOf(r,t)).length&&i.push.apply(i,n),s=s._next;return i},n.tweenTo=function(e,t){t=t||{};var n,i=this,r=Ui(i,e),s=t,a=s.startAt,o=s.onStart,l=s.onStartParams,c=s.immediateRender,h=Hr.to(i,mi({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:t.duration||Math.abs((r-(a&&"time"in a?a.time:i._time))/i.timeScale())||yn,onStart:function(){if(i.pause(),!n){var e=t.duration||Math.abs((r-(a&&"time"in a?a.time:i._time))/i.timeScale());h._dur!==e&&Ni(h,e,0,1).render(h._time,!0,!0),n=1}o&&o.apply(h,l||[])}},t));return c?h.render(0):h},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,mi({startAt:{time:Ui(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),ir(this,Ui(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),ir(this,Ui(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+yn)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var i,r=this._first,s=this.labels;r;)r._start>=n&&(r._start+=e,r._end+=e),r=r._next;if(t)for(i in s)s[i]>=n&&(s[i]+=e);return Ei(this)},n.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),Ei(this)},n.totalDuration=function(e){var t,n,i,r=0,s=this,a=s._last,o=vn;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-e:e));if(s._dirty){for(i=s.parent;a;)t=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>o&&s._sort&&a._ts&&!s._lock?(s._lock=1,Di(s,a,n-a._delay,1)._lock=0):o=n,n<0&&a._ts&&(r-=n,(!i&&!s._dp||i&&i.smoothChildTiming)&&(s._start+=n/s._ts,s._time-=n,s._tTime-=n),s.shiftChildren(-n,!1,-Infinity),o=0),a._end>r&&a._ts&&(r=a._end),a=t;Ni(s,s===nn&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(e){if(nn._ts&&(di(nn,Pi(e,nn)),ln=gr.frame),gr.frame>=ei){ei+=mn.autoSleep||120;var t=nn._first;if((!t||!t._ts)&&mn.autoSleep&&gr._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||gr.sleep()}}},t}(Ir);mi(Lr.prototype,{_lock:0,_hasPause:0,_forcing:0});var Dr,Rr,kr=function(e,t,n,i,r,s,a){var o,l,c,h,u,d,p,f,m=new ns(this._pt,e,t,0,1,Kr,null,r),g=0,v=0;for(m.b=n,m.e=i,n+="",(p=~(i+="").indexOf("random("))&&(i=tr(i)),s&&(s(f=[n,i],e,t),n=f[0],i=f[1]),l=n.match(Bn)||[];o=Bn.exec(i);)h=o[0],u=i.substring(g,o.index),c?c=(c+1)%5:"rgba("===u.substr(-5)&&(c=1),h!==l[v++]&&(d=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:u||1===v?u:",",s:d,c:"="===h.charAt(1)?ci(d,h)-d:parseFloat(h)-d,m:c&&c<4?Math.round:0},g=Bn.lastIndex);return m.c=g<i.length?i.substring(g,i.length):"",m.fp=a,(zn.test(i)||p)&&(m.e=0),this._pt=m,m},Or=function(e,t,n,i,r,s,a,o,l){Mn(i)&&(i=i(r||0,e,s));var c,h=e[t],u="get"!==n?n:Mn(h)?l?e[t.indexOf("set")||!Mn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():h,d=Mn(h)?l?Wr:jr:Gr;if(Tn(i)&&(~i.indexOf("random(")&&(i=tr(i)),"="===i.charAt(1)&&((c=ci(u,i)+(ji(u)||0))||0===c)&&(i=c)),u!==i||Rr)return isNaN(u*i)||""===i?(!h&&!(t in e)&&Wn(t,i),kr.call(this,e,t,u,i,d,o||mn.stringFilter,l)):(c=new ns(this._pt,e,t,+u||0,i-(u||0),"boolean"==typeof h?$r:Yr,0,d),l&&(c.fp=l),a&&c.modifier(a,this,e),this._pt=c)},Fr=function(e,t,n,i,r,s){var a,o,l,c;if(Qn[e]&&!1!==(a=new Qn[e]).init(r,a.rawVars?t[e]:function(e,t,n,i,r){if(Mn(e)&&(e=zr(e,r,t,n,i)),!Cn(e)||e.style&&e.nodeType||kn(e)||Rn(e))return Tn(e)?zr(e,r,t,n,i):e;var s,a={};for(s in e)a[s]=zr(e[s],r,t,n,i);return a}(t[e],i,r,s,n),n,i,s)&&(n._pt=o=new ns(n._pt,r,e,0,1,a.render,a,0,a.priority),n!==cn))for(l=n._ptLookup[n._targets.indexOf(r)],c=a._props.length;c--;)l[a._props[c]]=o;return a},Nr=function e(t,n){var i,r,s,a,o,l,c,h,u,d,p,f,m,g=t.vars,v=g.ease,y=g.startAt,_=g.immediateRender,b=g.lazy,x=g.onUpdate,S=g.onUpdateParams,E=g.callbackScope,w=g.runBackwards,T=g.yoyoEase,M=g.keyframes,A=g.autoRevert,P=t._dur,C=t._startAt,I=t._targets,L=t.parent,D=L&&"nested"===L.data?L.parent._targets:I,R="auto"===t._overwrite&&!tn,k=t.timeline;if(k&&(!M||!v)&&(v="none"),t._ease=wr(v,gn.ease),t._yEase=T?Sr(wr(!0===T?v:T,gn.ease)):0,T&&t._yoyo&&!t._repeat&&(T=t._yEase,t._yEase=t._ease,t._ease=T),t._from=!k&&!!g.runBackwards,!k||M&&!g.stagger){if(f=(h=I[0]?ri(I[0]).harness:0)&&g[h.prop],i=yi(g,$n),C&&(Si(C.render(-1,!0)),C._lazy=0),y)if(Si(t._startAt=Hr.set(I,mi({data:"isStart",overwrite:!1,parent:L,immediateRender:!0,lazy:In(b),startAt:null,delay:0,onUpdate:x,onUpdateParams:S,callbackScope:E,stagger:0},y))),n<0&&!_&&!A&&t._startAt.render(-1,!0),_){if(n>0&&!A&&(t._startAt=0),P&&n<=0)return void(n&&(t._zTime=n))}else!1===A&&(t._startAt=0);else if(w&&P)if(C)!A&&(t._startAt=0);else if(n&&(_=!1),s=mi({overwrite:!1,data:"isFromStart",lazy:_&&In(b),immediateRender:_,stagger:0,parent:L},i),f&&(s[h.prop]=f),Si(t._startAt=Hr.set(I,s)),n<0&&t._startAt.render(-1,!0),t._zTime=n,_){if(!n)return}else e(t._startAt,yn);for(t._pt=t._ptCache=0,b=P&&In(b)||b&&!P,r=0;r<I.length;r++){if(c=(o=I[r])._gsap||ii(I)[r]._gsap,t._ptLookup[r]=d={},Zn[c.id]&&Kn.length&&ui(),p=D===I?r:D.indexOf(o),h&&!1!==(u=new h).init(o,f||i,t,p,D)&&(t._pt=a=new ns(t._pt,o,u.name,0,1,u.render,u,0,u.priority),u._props.forEach((function(e){d[e]=a})),u.priority&&(l=1)),!h||f)for(s in i)Qn[s]&&(u=Fr(s,i,t,p,o,D))?u.priority&&(l=1):d[s]=a=Or.call(t,o,s,"get",i[s],p,D,0,g.stringFilter);t._op&&t._op[r]&&t.kill(o,t._op[r]),R&&t._pt&&(Dr=t,nn.killTweensOf(o,d,t.globalTime(n)),m=!t.parent,Dr=0),t._pt&&b&&(Zn[c.id]=1)}l&&ts(t),t._onInit&&t._onInit(t)}t._onUpdate=x,t._initted=(!t._op||t._pt)&&!m,M&&n<=0&&k.render(vn,!0,!0)},Br=function(e,t,n,i){var r,s,a=t.ease||i||"power1.inOut";if(kn(t))s=n[e]||(n[e]=[]),t.forEach((function(e,n){return s.push({t:n/(t.length-1)*100,v:e,e:a})}));else for(r in t)s=n[r]||(n[r]=[]),"ease"===r||s.push({t:parseFloat(e),v:t[r],e:a})},zr=function(e,t,n,i,r){return Mn(e)?e.call(t,n,i,r):Tn(e)&&~e.indexOf("random(")?tr(e):e},Ur=ni+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Vr={};ai(Ur+",id,stagger,delay,duration,paused,scrollTrigger",(function(e){return Vr[e]=1}));var Hr=function(e){function t(t,n,i,r){var s;"number"==typeof n&&(i.duration=n,n=i,i=null);var a,o,l,c,h,u,d,p,f=(s=e.call(this,r?n:_i(n))||this).vars,m=f.duration,g=f.delay,v=f.immediateRender,y=f.stagger,_=f.overwrite,b=f.keyframes,x=f.defaults,S=f.scrollTrigger,E=f.yoyoEase,w=n.parent||nn,T=(kn(t)||Rn(t)?An(t[0]):"length"in n)?[t]:Yi(t);if(s._targets=T.length?ii(T):qn("GSAP target "+t+" not found. https://greensock.com",!mn.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=_,b||y||Dn(m)||Dn(g)){if(n=s.vars,(a=s.timeline=new Lr({data:"nested",defaults:x||{}})).kill(),a.parent=a._dp=Jt(s),a._start=0,y||Dn(m)||Dn(g)){if(c=T.length,d=y&&Ki(y),Cn(y))for(h in y)~Ur.indexOf(h)&&(p||(p={}),p[h]=y[h]);for(o=0;o<c;o++)(l=yi(n,Vr)).stagger=0,E&&(l.yoyoEase=E),p&&gi(l,p),u=T[o],l.duration=+zr(m,Jt(s),o,u,T),l.delay=(+zr(g,Jt(s),o,u,T)||0)-s._delay,!y&&1===c&&l.delay&&(s._delay=g=l.delay,s._start+=g,l.delay=0),a.to(u,l,d?d(o,u,T):0),a._ease=yr.none;a.duration()?m=g=0:s.timeline=0}else if(b){_i(mi(a.vars.defaults,{ease:"none"})),a._ease=wr(b.ease||n.ease||"none");var M,A,P,C=0;if(kn(b))b.forEach((function(e){return a.to(T,e,">")}));else{for(h in l={},b)"ease"===h||"easeEach"===h||Br(h,b[h],l,b.easeEach);for(h in l)for(M=l[h].sort((function(e,t){return e.t-t.t})),C=0,o=0;o<M.length;o++)(P={ease:(A=M[o]).e,duration:(A.t-(o?M[o-1].t:0))/100*m})[h]=A.v,a.to(T,P,C),C+=P.duration;a.duration()<m&&a.to({},{duration:m-a.duration()})}}m||s.duration(m=a.duration())}else s.timeline=0;return!0!==_||tn||(Dr=Jt(s),nn.killTweensOf(T),Dr=0),Di(w,Jt(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(v||!m&&!b&&s._start===li(w._time)&&In(v)&&Ti(Jt(s))&&"nested"!==w.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-g))),S&&Ri(Jt(s),S),s}en(t,e);var n=t.prototype;return n.render=function(e,t,n){var i,r,s,a,o,l,c,h,u,d=this._time,p=this._tDur,f=this._dur,m=e>p-yn&&e>=0?p:e<yn?0:e;if(f){if(m!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=e<0){if(i=m,h=this.timeline,this._repeat){if(a=f+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*a+e,t,n);if(i=li(m%a),m===p?(s=this._repeat,i=f):((s=~~(m/a))&&s===m/a&&(i=f,s--),i>f&&(i=f)),(l=this._yoyo&&1&s)&&(u=this._yEase,i=f-i),o=Ai(this._tTime,a),i===d&&!n&&this._initted)return this._tTime=m,this;s!==o&&(h&&this._yEase&&Er(h,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=n=1,this.render(li(a*s),!0).invalidate()._lock=0))}if(!this._initted){if(ki(this,e<0?e:i,n,t))return this._tTime=0,this;if(d!==this._time)return this;if(f!==this._dur)return this.render(e,t,n)}if(this._tTime=m,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(u||this._ease)(i/f),this._from&&(this.ratio=c=1-c),i&&!d&&!t&&(rr(this,"onStart"),this._tTime!==m))return this;for(r=this._pt;r;)r.r(c,r.d),r=r._next;h&&h.render(e<0?e:!i&&l?-1e-8:h._dur*h._ease(i/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(e<0&&this._startAt&&this._startAt.render(e,!0,n),rr(this,"onUpdate")),this._repeat&&s!==o&&this.vars.onRepeat&&!t&&this.parent&&rr(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(e<0&&this._startAt&&!this._onUpdate&&this._startAt.render(e,!0,!0),(e||!f)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&Si(this,1),t||e<0&&!d||!m&&!d||(rr(this,m===p?"onComplete":"onReverseComplete",!0),this._prom&&!(m<p&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,i){var r,s,a,o=e.ratio,l=t<0||!t&&(!e._start&&Oi(e)&&(e._initted||!Fi(e))||(e._ts<0||e._dp._ts<0)&&!Fi(e))?0:1,c=e._rDelay,h=0;if(c&&e._repeat&&(h=Gi(0,e._tDur,t),s=Ai(h,c),e._yoyo&&1&s&&(l=1-l),s!==Ai(e._tTime,c)&&(o=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==o||i||e._zTime===yn||!t&&e._zTime){if(!e._initted&&ki(e,t,i,n))return;for(a=e._zTime,e._zTime=t||(n?yn:0),n||(n=t&&!a),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=h,r=e._pt;r;)r.r(l,r.d),r=r._next;e._startAt&&t<0&&e._startAt.render(t,!0,!0),e._onUpdate&&!n&&rr(e,"onUpdate"),h&&e._repeat&&!n&&e.parent&&rr(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&Si(e,1),n||(rr(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),e.prototype.invalidate.call(this)},n.resetTo=function(e,t,n,i){hn||gr.wake(),this._ts||this.play();var r=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Nr(this,r),function(e,t,n,i,r,s,a){var o,l,c,h=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!h)for(h=e._ptCache[t]=[],l=e._ptLookup,c=e._targets.length;c--;){if((o=l[c][t])&&o.d&&o.d._pt)for(o=o.d._pt;o&&o.p!==t;)o=o._next;if(!o)return Rr=1,e.vars[t]="+=0",Nr(e,a),Rr=0,1;h.push(o)}for(c=h.length;c--;)(o=h[c]).s=!i&&0!==i||r?o.s+(i||0)+s*o.c:i,o.c=n-o.s,o.e&&(o.e=oi(n)+ji(o.e)),o.b&&(o.b=o.s+ji(o.b))}(this,e,t,n,i,this._ease(r/this._dur),r)?this.resetTo(e,t,n,i):(Ii(this,0),this.parent||bi(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?sr(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,Dr&&!0!==Dr.vars.overwrite)._first||sr(this),this.parent&&n!==this.timeline.totalDuration()&&Ni(this,this._dur*this.timeline._tDur/n,0,1),this}var i,r,s,a,o,l,c,h=this._targets,u=e?Yi(e):h,d=this._ptLookup,p=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0}(h,u))return"all"===t&&(this._pt=0),sr(this);for(i=this._op=this._op||[],"all"!==t&&(Tn(t)&&(o={},ai(t,(function(e){return o[e]=1})),t=o),t=function(e,t){var n,i,r,s,a=e[0]?ri(e[0]).harness:0,o=a&&a.aliases;if(!o)return t;for(i in n=gi({},t),o)if(i in n)for(r=(s=o[i].split(",")).length;r--;)n[s[r]]=n[i];return n}(h,t)),c=h.length;c--;)if(~u.indexOf(h[c]))for(o in r=d[c],"all"===t?(i[c]=t,a=r,s={}):(s=i[c]=i[c]||{},a=t),a)(l=r&&r[o])&&("kill"in l.d&&!0!==l.d.kill(o)||xi(this,l,"_pt"),delete r[o]),"all"!==s&&(s[o]=1);return this._initted&&!this._pt&&p&&sr(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return Vi(1,arguments)},t.delayedCall=function(e,n,i,r){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},t.fromTo=function(e,t,n){return Vi(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return nn.killTweensOf(e,t,n)},t}(Ir);mi(Hr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),ai("staggerTo,staggerFrom,staggerFromTo",(function(e){Hr[e]=function(){var t=new Lr,n=Wi.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var Gr=function(e,t,n){return e[t]=n},jr=function(e,t,n){return e[t](n)},Wr=function(e,t,n,i){return e[t](i.fp,n)},qr=function(e,t,n){return e.setAttribute(t,n)},Xr=function(e,t){return Mn(e[t])?jr:Pn(e[t])&&e.setAttribute?qr:Gr},Yr=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},$r=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Kr=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(1===e&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},Zr=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Qr=function(e,t,n,i){for(var r,s=this._pt;s;)r=s._next,s.p===i&&s.modifier(e,t,n),s=r},Jr=function(e){for(var t,n,i=this._pt;i;)n=i._next,i.p===e&&!i.op||i.op===e?xi(this,i,"_pt"):i.dep||(t=1),i=n;return!t},es=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},ts=function(e){for(var t,n,i,r,s=e._pt;s;){for(t=s._next,n=i;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:r)?s._prev._next=s:i=s,(s._next=n)?n._prev=s:r=s,s=t}e._pt=i},ns=function(){function e(e,t,n,i,r,s,a,o,l){this.t=t,this.s=i,this.c=r,this.p=n,this.r=s||Yr,this.d=a||this,this.set=o||Gr,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=es,this.m=e,this.mt=n,this.tween=t},e}();ai(ni+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return $n[e]=1})),Hn.TweenMax=Hn.TweenLite=Hr,Hn.TimelineLite=Hn.TimelineMax=Lr,nn=new Lr({sortChildren:!1,defaults:gn,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),mn.stringFilter=mr;var is={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return ar(e)}))},timeline:function(e){return new Lr(e)},getTweensOf:function(e,t){return nn.getTweensOf(e,t)},getProperty:function(e,t,n,i){Tn(e)&&(e=Yi(e)[0]);var r=ri(e||{}).get,s=n?fi:pi;return"native"===n&&(n=""),e?t?s((Qn[t]&&Qn[t].get||r)(e,t,n,i)):function(t,n,i){return s((Qn[t]&&Qn[t].get||r)(e,t,n,i))}:e},quickSetter:function(e,t,n){if((e=Yi(e)).length>1){var i=e.map((function(e){return as.quickSetter(e,t,n)})),r=i.length;return function(e){for(var t=r;t--;)i[t](e)}}e=e[0]||{};var s=Qn[t],a=ri(e),o=a.harness&&(a.harness.aliases||{})[t]||t,l=s?function(t){var i=new s;cn._pt=0,i.init(e,n?t+n:t,cn,0,[e]),i.render(1,i),cn._pt&&Zr(1,cn)}:a.set(e,o);return s?l:function(t){return l(e,o,n?t+n:t,a,1)}},quickTo:function(e,t,n){var i,r=as.to(e,gi(((i={})[t]="+=0.1",i.paused=!0,i),n||{})),s=function(e,n,i){return r.resetTo(t,e,n,i)};return s.tween=r,s},isTweening:function(e){return nn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=wr(e.ease,gn.ease)),vi(gn,e||{})},config:function(e){return vi(mn,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,r=e.defaults,s=e.extendTimeline;(i||"").split(",").forEach((function(e){return e&&!Qn[e]&&!Hn[e]&&qn(t+" effect requires "+e+" plugin.")})),Jn[t]=function(e,t,i){return n(Yi(e),mi(t||{},r),i)},s&&(Lr.prototype[t]=function(e,n,i){return this.add(Jn[t](e,Cn(n)?n:(i=n)&&{},this),i)})},registerEase:function(e,t){yr[e]=wr(t)},parseEase:function(e,t){return arguments.length?wr(e,t):yr},getById:function(e){return nn.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,i,r=new Lr(e);for(r.smoothChildTiming=In(e.smoothChildTiming),nn.remove(r),r._dp=0,r._time=r._tTime=nn._time,n=nn._first;n;)i=n._next,!t&&!n._dur&&n instanceof Hr&&n.vars.onComplete===n._targets[0]||Di(r,n,n._start-n._delay),n=i;return Di(nn,r,0),r},utils:{wrap:function e(t,n,i){var r=n-t;return kn(t)?er(t,e(0,t.length),n):Hi(i,(function(e){return(r+(e-t)%r)%r+t}))},wrapYoyo:function e(t,n,i){var r=n-t,s=2*r;return kn(t)?er(t,e(0,t.length-1),n):Hi(i,(function(e){return t+((e=(s+(e-t)%s)%s||0)>r?s-e:e)}))},distribute:Ki,random:Ji,snap:Qi,normalize:function(e,t,n){return nr(e,t,0,1,n)},getUnit:ji,clamp:function(e,t,n){return Hi(n,(function(n){return Gi(e,t,n)}))},splitColor:hr,toArray:Yi,selector:function(e){return e=Yi(e)[0]||qn("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Yi(t,n.querySelectorAll?n:n===e?qn("Invalid scope")||an.createElement("div"):e)}},mapRange:nr,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||ji(n))}},interpolate:function e(t,n,i,r){var s=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!s){var a,o,l,c,h,u=Tn(t),d={};if(!0===i&&(r=1)&&(i=null),u)t={p:t},n={p:n};else if(kn(t)&&!kn(n)){for(l=[],c=t.length,h=c-2,o=1;o<c;o++)l.push(e(t[o-1],t[o]));c--,s=function(e){e*=c;var t=Math.min(h,~~e);return l[t](e-t)},i=n}else r||(t=gi(kn(t)?[]:{},t));if(!l){for(a in n)Or.call(d,t,a,"get",n[a]);s=function(e){return Zr(e,d)||(u?t.p:t)}}}return Hi(i,s)},shuffle:$i},install:jn,effects:Jn,ticker:gr,updateRoot:Lr.updateRoot,plugins:Qn,globalTimeline:nn,core:{PropTween:ns,globals:Xn,Tween:Hr,Timeline:Lr,Animation:Ir,getCache:ri,_removeLinkedListItem:xi,suppressOverwrites:function(e){return tn=e}}};ai("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return is[e]=Hr[e]})),gr.add(Lr.updateRoot),cn=is.to({},{duration:0});var rs=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},ss=function(e,t){return{name:e,rawVars:1,init:function(e,n,i){i._onInit=function(e){var i,r;if(Tn(n)&&(i={},ai(n,(function(e){return i[e]=1})),n=i),t){for(r in i={},n)i[r]=t(n[r]);n=i}!function(e,t){var n,i,r,s=e._targets;for(n in t)for(i=s.length;i--;)(r=e._ptLookup[i][n])&&(r=r.d)&&(r._pt&&(r=rs(r,n)),r&&r.modifier&&r.modifier(t[n],e,s[i],n))}(e,n)}}}},as=is.registerPlugin({name:"attr",init:function(e,t,n,i,r){var s,a;for(s in t)(a=this.add(e,"setAttribute",(e.getAttribute(s)||0)+"",t[s],i,r,0,0,s))&&(a.op=s),this._props.push(s)}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n])}},ss("roundProps",Zi),ss("modifiers"),ss("snap",Qi))||is;Hr.version=Lr.version=as.version="3.10.3",on=1,Ln()&&vr();yr.Power0,yr.Power1,yr.Power2,yr.Power3,yr.Power4,yr.Linear,yr.Quad,yr.Cubic,yr.Quart,yr.Quint,yr.Strong,yr.Elastic,yr.Back,yr.SteppedEase,yr.Bounce,yr.Sine,yr.Expo,yr.Circ;var os,ls,cs,hs,us,ds,ps,fs={},ms=180/Math.PI,gs=Math.PI/180,vs=Math.atan2,ys=/([A-Z])/g,_s=/(left|right|width|margin|padding|x)/i,bs=/[\s,\(]\S/,xs={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ss=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Es=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},ws=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},Ts=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Ms=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},As=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},Ps=function(e,t,n){return e.style[t]=n},Cs=function(e,t,n){return e.style.setProperty(t,n)},Is=function(e,t,n){return e._gsap[t]=n},Ls=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Ds=function(e,t,n,i,r){var s=e._gsap;s.scaleX=s.scaleY=n,s.renderTransform(r,s)},Rs=function(e,t,n,i,r){var s=e._gsap;s[t]=n,s.renderTransform(r,s)},ks="transform",Os=ks+"Origin",Fs=function(e,t){var n=ls.createElementNS?ls.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ls.createElement(e);return n.style?n:ls.createElement(e)},Ns=function e(t,n,i){var r=getComputedStyle(t);return r[n]||r.getPropertyValue(n.replace(ys,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&e(t,zs(n)||n,1)||""},Bs="O,Moz,ms,Ms,Webkit".split(","),zs=function(e,t,n){var i=(t||us).style,r=5;if(e in i&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);r--&&!(Bs[r]+e in i););return r<0?null:(3===r?"ms":r>=0?Bs[r]:"")+e},Us=function(){"undefined"!=typeof window&&window.document&&(os=window,ls=os.document,cs=ls.documentElement,us=Fs("div")||{style:{}},Fs("div"),ks=zs(ks),Os=ks+"Origin",us.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",ps=!!zs("perspective"),hs=1)},Vs=function e(t){var n,i=Fs("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,s=this.nextSibling,a=this.style.cssText;if(cs.appendChild(i),i.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(e){}else this._gsapBBox&&(n=this._gsapBBox());return r&&(s?r.insertBefore(this,s):r.appendChild(this)),cs.removeChild(i),this.style.cssText=a,n},Hs=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Gs=function(e){var t;try{t=e.getBBox()}catch(n){t=Vs.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===Vs||(t=Vs.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+Hs(e,["x","cx","x1"])||0,y:+Hs(e,["y","cy","y1"])||0,width:0,height:0}},js=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!Gs(e))},Ws=function(e,t){if(t){var n=e.style;t in fs&&t!==Os&&(t=ks),n.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),n.removeProperty(t.replace(ys,"-$1").toLowerCase())):n.removeAttribute(t)}},qs=function(e,t,n,i,r,s){var a=new ns(e._pt,t,n,0,1,s?As:Ms);return e._pt=a,a.b=i,a.e=r,e._props.push(n),a},Xs={deg:1,rad:1,turn:1},Ys=function e(t,n,i,r){var s,a,o,l,c=parseFloat(i)||0,h=(i+"").trim().substr((c+"").length)||"px",u=us.style,d=_s.test(n),p="svg"===t.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),m=100,g="px"===r,v="%"===r;return r===h||!c||Xs[r]||Xs[h]?c:("px"!==h&&!g&&(c=e(t,n,i,"px")),l=t.getCTM&&js(t),!v&&"%"!==h||!fs[n]&&!~n.indexOf("adius")?(u[d?"width":"height"]=m+(g?h:r),a=~n.indexOf("adius")||"em"===r&&t.appendChild&&!p?t:t.parentNode,l&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==ls&&a.appendChild||(a=ls.body),(o=a._gsap)&&v&&o.width&&d&&o.time===gr.time?oi(c/o.width*m):((v||"%"===h)&&(u.position=Ns(t,"position")),a===t&&(u.position="static"),a.appendChild(us),s=us[f],a.removeChild(us),u.position="absolute",d&&v&&((o=ri(a)).time=gr.time,o.width=a[f]),oi(g?s*c/m:s&&c?m/s*c:0))):(s=l?t.getBBox()[d?"width":"height"]:t[f],oi(v?c/s*m:c/100*s)))},$s=function(e,t,n,i){var r;return hs||Us(),t in xs&&"transform"!==t&&~(t=xs[t]).indexOf(",")&&(t=t.split(",")[0]),fs[t]&&"transform"!==t?(r=oa(e,i),r="transformOrigin"!==t?r[t]:r.svg?r.origin:la(Ns(e,Os))+" "+r.zOrigin+"px"):(!(r=e.style[t])||"auto"===r||i||~(r+"").indexOf("calc("))&&(r=ea[t]&&ea[t](e,t,n)||Ns(e,t)||si(e,t)||("opacity"===t?1:0)),n&&!~(r+"").trim().indexOf(" ")?Ys(e,t,r,n)+n:r},Ks=function(e,t,n,i){if(!n||"none"===n){var r=zs(t,e,1),s=r&&Ns(e,r,1);s&&s!==n?(t=r,n=s):"borderColor"===t&&(n=Ns(e,"borderTopColor"))}var a,o,l,c,h,u,d,p,f,m,g,v=new ns(this._pt,e.style,t,0,1,Kr),y=0,_=0;if(v.b=n,v.e=i,n+="","auto"===(i+="")&&(e.style[t]=i,i=Ns(e,t)||i,e.style[t]=n),mr(a=[n,i]),i=a[1],l=(n=a[0]).match(Nn)||[],(i.match(Nn)||[]).length){for(;o=Nn.exec(i);)d=o[0],f=i.substring(y,o.index),h?h=(h+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(h=1),d!==(u=l[_++]||"")&&(c=parseFloat(u)||0,g=u.substr((c+"").length),"="===d.charAt(1)&&(d=ci(c,d)+g),p=parseFloat(d),m=d.substr((p+"").length),y=Nn.lastIndex-m.length,m||(m=m||mn.units[t]||g,y===i.length&&(i+=m,v.e+=m)),g!==m&&(c=Ys(e,t,u,m)||0),v._pt={_next:v._pt,p:f||1===_?f:",",s:c,c:p-c,m:h&&h<4||"zIndex"===t?Math.round:0});v.c=y<i.length?i.substring(y,i.length):""}else v.r="display"===t&&"none"===i?As:Ms;return zn.test(i)&&(v.e=0),this._pt=v,v},Zs={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Qs=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==i&&"right"!==i||(e=n,n=i,i=e),t[0]=Zs[n]||n,t[1]=Zs[i]||i,t.join(" ")},Js=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,i,r,s=t.t,a=s.style,o=t.u,l=s._gsap;if("all"===o||!0===o)a.cssText="",i=1;else for(r=(o=o.split(",")).length;--r>-1;)n=o[r],fs[n]&&(i=1,n="transformOrigin"===n?Os:ks),Ws(s,n);i&&(Ws(s,ks),l&&(l.svg&&s.removeAttribute("transform"),oa(s,1),l.uncache=1))}},ea={clearProps:function(e,t,n,i,r){if("isFromStart"!==r.data){var s=e._pt=new ns(e._pt,t,n,0,0,Js);return s.u=i,s.pr=-10,s.tween=r,e._props.push(n),1}}},ta=[1,0,0,1,0,0],na={},ia=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},ra=function(e){var t=Ns(e,ks);return ia(t)?ta:t.substr(7).match(Fn).map(oi)},sa=function(e,t){var n,i,r,s,a=e._gsap||ri(e),o=e.style,l=ra(e);return a.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=e.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?ta:l:(l!==ta||e.offsetParent||e===cs||a.svg||(r=o.display,o.display="block",(n=e.parentNode)&&e.offsetParent||(s=1,i=e.nextSibling,cs.appendChild(e)),l=ra(e),r?o.display=r:Ws(e,"display"),s&&(i?n.insertBefore(e,i):n?n.appendChild(e):cs.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},aa=function(e,t,n,i,r,s){var a,o,l,c=e._gsap,h=r||sa(e,!0),u=c.xOrigin||0,d=c.yOrigin||0,p=c.xOffset||0,f=c.yOffset||0,m=h[0],g=h[1],v=h[2],y=h[3],_=h[4],b=h[5],x=t.split(" "),S=parseFloat(x[0])||0,E=parseFloat(x[1])||0;n?h!==ta&&(o=m*y-g*v)&&(l=S*(-g/o)+E*(m/o)-(m*b-g*_)/o,S=S*(y/o)+E*(-v/o)+(v*b-y*_)/o,E=l):(S=(a=Gs(e)).x+(~x[0].indexOf("%")?S/100*a.width:S),E=a.y+(~(x[1]||x[0]).indexOf("%")?E/100*a.height:E)),i||!1!==i&&c.smooth?(_=S-u,b=E-d,c.xOffset=p+(_*m+b*v)-_,c.yOffset=f+(_*g+b*y)-b):c.xOffset=c.yOffset=0,c.xOrigin=S,c.yOrigin=E,c.smooth=!!i,c.origin=t,c.originIsAbsolute=!!n,e.style[Os]="0px 0px",s&&(qs(s,c,"xOrigin",u,S),qs(s,c,"yOrigin",d,E),qs(s,c,"xOffset",p,c.xOffset),qs(s,c,"yOffset",f,c.yOffset)),e.setAttribute("data-svg-origin",S+" "+E)},oa=function(e,t){var n=e._gsap||new Cr(e);if("x"in n&&!t&&!n.uncache)return n;var i,r,s,a,o,l,c,h,u,d,p,f,m,g,v,y,_,b,x,S,E,w,T,M,A,P,C,I,L,D,R,k,O=e.style,F=n.scaleX<0,N="px",B="deg",z=Ns(e,Os)||"0";return i=r=s=l=c=h=u=d=p=0,a=o=1,n.svg=!(!e.getCTM||!js(e)),g=sa(e,n.svg),n.svg&&(M=(!n.uncache||"0px 0px"===z)&&!t&&e.getAttribute("data-svg-origin"),aa(e,M||z,!!M||n.originIsAbsolute,!1!==n.smooth,g)),f=n.xOrigin||0,m=n.yOrigin||0,g!==ta&&(b=g[0],x=g[1],S=g[2],E=g[3],i=w=g[4],r=T=g[5],6===g.length?(a=Math.sqrt(b*b+x*x),o=Math.sqrt(E*E+S*S),l=b||x?vs(x,b)*ms:0,(u=S||E?vs(S,E)*ms+l:0)&&(o*=Math.abs(Math.cos(u*gs))),n.svg&&(i-=f-(f*b+m*S),r-=m-(f*x+m*E))):(k=g[6],D=g[7],C=g[8],I=g[9],L=g[10],R=g[11],i=g[12],r=g[13],s=g[14],c=(v=vs(k,L))*ms,v&&(M=w*(y=Math.cos(-v))+C*(_=Math.sin(-v)),A=T*y+I*_,P=k*y+L*_,C=w*-_+C*y,I=T*-_+I*y,L=k*-_+L*y,R=D*-_+R*y,w=M,T=A,k=P),h=(v=vs(-S,L))*ms,v&&(y=Math.cos(-v),R=E*(_=Math.sin(-v))+R*y,b=M=b*y-C*_,x=A=x*y-I*_,S=P=S*y-L*_),l=(v=vs(x,b))*ms,v&&(M=b*(y=Math.cos(v))+x*(_=Math.sin(v)),A=w*y+T*_,x=x*y-b*_,T=T*y-w*_,b=M,w=A),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,h=180-h),a=oi(Math.sqrt(b*b+x*x+S*S)),o=oi(Math.sqrt(T*T+k*k)),v=vs(w,T),u=Math.abs(v)>2e-4?v*ms:0,p=R?1/(R<0?-R:R):0),n.svg&&(M=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!ia(Ns(e,ks)),M&&e.setAttribute("transform",M))),Math.abs(u)>90&&Math.abs(u)<270&&(F?(a*=-1,u+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,u+=u<=0?180:-180)),t=t||n.uncache,n.x=i-((n.xPercent=i&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-i)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+N,n.y=r-((n.yPercent=r&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-r)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+N,n.z=s+N,n.scaleX=oi(a),n.scaleY=oi(o),n.rotation=oi(l)+B,n.rotationX=oi(c)+B,n.rotationY=oi(h)+B,n.skewX=u+B,n.skewY=d+B,n.transformPerspective=p+N,(n.zOrigin=parseFloat(z.split(" ")[2])||0)&&(O[Os]=la(z)),n.xOffset=n.yOffset=0,n.force3D=mn.force3D,n.renderTransform=n.svg?ma:ps?fa:ha,n.uncache=0,n},la=function(e){return(e=e.split(" "))[0]+" "+e[1]},ca=function(e,t,n){var i=ji(t);return oi(parseFloat(t)+parseFloat(Ys(e,"x",n+"px",i)))+i},ha=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,fa(e,t)},ua="0deg",da="0px",pa=") ",fa=function(e,t){var n=t||this,i=n.xPercent,r=n.yPercent,s=n.x,a=n.y,o=n.z,l=n.rotation,c=n.rotationY,h=n.rotationX,u=n.skewX,d=n.skewY,p=n.scaleX,f=n.scaleY,m=n.transformPerspective,g=n.force3D,v=n.target,y=n.zOrigin,_="",b="auto"===g&&e&&1!==e||!0===g;if(y&&(h!==ua||c!==ua)){var x,S=parseFloat(c)*gs,E=Math.sin(S),w=Math.cos(S);S=parseFloat(h)*gs,x=Math.cos(S),s=ca(v,s,E*x*-y),a=ca(v,a,-Math.sin(S)*-y),o=ca(v,o,w*x*-y+y)}m!==da&&(_+="perspective("+m+pa),(i||r)&&(_+="translate("+i+"%, "+r+"%) "),(b||s!==da||a!==da||o!==da)&&(_+=o!==da||b?"translate3d("+s+", "+a+", "+o+") ":"translate("+s+", "+a+pa),l!==ua&&(_+="rotate("+l+pa),c!==ua&&(_+="rotateY("+c+pa),h!==ua&&(_+="rotateX("+h+pa),u===ua&&d===ua||(_+="skew("+u+", "+d+pa),1===p&&1===f||(_+="scale("+p+", "+f+pa),v.style[ks]=_||"translate(0, 0)"},ma=function(e,t){var n,i,r,s,a,o=t||this,l=o.xPercent,c=o.yPercent,h=o.x,u=o.y,d=o.rotation,p=o.skewX,f=o.skewY,m=o.scaleX,g=o.scaleY,v=o.target,y=o.xOrigin,_=o.yOrigin,b=o.xOffset,x=o.yOffset,S=o.forceCSS,E=parseFloat(h),w=parseFloat(u);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=gs,p*=gs,n=Math.cos(d)*m,i=Math.sin(d)*m,r=Math.sin(d-p)*-g,s=Math.cos(d-p)*g,p&&(f*=gs,a=Math.tan(p-f),r*=a=Math.sqrt(1+a*a),s*=a,f&&(a=Math.tan(f),n*=a=Math.sqrt(1+a*a),i*=a)),n=oi(n),i=oi(i),r=oi(r),s=oi(s)):(n=m,s=g,i=r=0),(E&&!~(h+"").indexOf("px")||w&&!~(u+"").indexOf("px"))&&(E=Ys(v,"x",h,"px"),w=Ys(v,"y",u,"px")),(y||_||b||x)&&(E=oi(E+y-(y*n+_*r)+b),w=oi(w+_-(y*i+_*s)+x)),(l||c)&&(a=v.getBBox(),E=oi(E+l/100*a.width),w=oi(w+c/100*a.height)),a="matrix("+n+","+i+","+r+","+s+","+E+","+w+")",v.setAttribute("transform",a),S&&(v.style[ks]=a)},ga=function(e,t,n,i,r){var s,a,o=360,l=Tn(r),c=parseFloat(r)*(l&&~r.indexOf("rad")?ms:1)-i,h=i+c+"deg";return l&&("short"===(s=r.split("_")[1])&&(c%=o)!==c%180&&(c+=c<0?o:-360),"cw"===s&&c<0?c=(c+36e9)%o-~~(c/o)*o:"ccw"===s&&c>0&&(c=(c-36e9)%o-~~(c/o)*o)),e._pt=a=new ns(e._pt,t,n,i,c,Es),a.e=h,a.u="deg",e._props.push(n),a},va=function(e,t){for(var n in t)e[n]=t[n];return e},ya=function(e,t,n){var i,r,s,a,o,l,c,h=va({},n._gsap),u=n.style;for(r in h.svg?(s=n.getAttribute("transform"),n.setAttribute("transform",""),u[ks]=t,i=oa(n,1),Ws(n,ks),n.setAttribute("transform",s)):(s=getComputedStyle(n)[ks],u[ks]=t,i=oa(n,1),u[ks]=s),fs)(s=h[r])!==(a=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(o=ji(s)!==(c=ji(a))?Ys(n,r,s,c):parseFloat(s),l=parseFloat(a),e._pt=new ns(e._pt,i,r,o,l-o,Ss),e._pt.u=c||0,e._props.push(r));va(i,h)};ai("padding,margin,Width,Radius",(function(e,t){var n="Top",i="Right",r="Bottom",s="Left",a=(t<3?[n,i,r,s]:[n+s,n+i,r+i,r+s]).map((function(n){return t<2?e+n:"border"+n+e}));ea[t>1?"border"+e:e]=function(e,t,n,i,r){var s,o;if(arguments.length<4)return s=a.map((function(t){return $s(e,t,n)})),5===(o=s.join(" ")).split(s[0]).length?s[0]:o;s=(i+"").split(" "),o={},a.forEach((function(e,t){return o[e]=s[t]=s[t]||s[(t-1)/2|0]})),e.init(t,o,r)}}));var _a,ba,xa,Sa={name:"css",register:Us,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,r){var s,a,o,l,c,h,u,d,p,f,m,g,v,y,_,b=this._props,x=e.style,S=n.vars.startAt;for(u in hs||Us(),t)if("autoRound"!==u&&(a=t[u],!Qn[u]||!Fr(u,t,n,i,e,r)))if(c=typeof a,h=ea[u],"function"===c&&(c=typeof(a=a.call(n,i,e,r))),"string"===c&&~a.indexOf("random(")&&(a=tr(a)),h)h(this,e,u,a,n)&&(_=1);else if("--"===u.substr(0,2))s=(getComputedStyle(e).getPropertyValue(u)+"").trim(),a+="",pr.lastIndex=0,pr.test(s)||(d=ji(s),p=ji(a)),p?d!==p&&(s=Ys(e,u,s,p)+p):d&&(a+=d),this.add(x,"setProperty",s,a,i,r,0,0,u),b.push(u);else if("undefined"!==c){if(S&&u in S?(s="function"==typeof S[u]?S[u].call(n,i,e,r):S[u],Tn(s)&&~s.indexOf("random(")&&(s=tr(s)),ji(s+"")||(s+=mn.units[u]||ji($s(e,u))||""),"="===(s+"").charAt(1)&&(s=$s(e,u))):s=$s(e,u),l=parseFloat(s),(f="string"===c&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),o=parseFloat(a),u in xs&&("autoAlpha"===u&&(1===l&&"hidden"===$s(e,"visibility")&&o&&(l=0),qs(this,x,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==u&&"transform"!==u&&~(u=xs[u]).indexOf(",")&&(u=u.split(",")[0])),m=u in fs)if(g||((v=e._gsap).renderTransform&&!t.parseTransform||oa(e,t.parseTransform),y=!1!==t.smoothOrigin&&v.smooth,(g=this._pt=new ns(this._pt,x,ks,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===u)this._pt=new ns(this._pt,v,"scaleY",v.scaleY,(f?ci(v.scaleY,f+o):o)-v.scaleY||0),b.push("scaleY",u),u+="X";else{if("transformOrigin"===u){a=Qs(a),v.svg?aa(e,a,0,y,0,this):((p=parseFloat(a.split(" ")[2])||0)!==v.zOrigin&&qs(this,v,"zOrigin",v.zOrigin,p),qs(this,x,u,la(s),la(a)));continue}if("svgOrigin"===u){aa(e,a,1,y,0,this);continue}if(u in na){ga(this,v,u,l,f?ci(l,f+a):a);continue}if("smoothOrigin"===u){qs(this,v,"smooth",v.smooth,a);continue}if("force3D"===u){v[u]=a;continue}if("transform"===u){ya(this,a,e);continue}}else u in x||(u=zs(u)||u);if(m||(o||0===o)&&(l||0===l)&&!bs.test(a)&&u in x)o||(o=0),(d=(s+"").substr((l+"").length))!==(p=ji(a)||(u in mn.units?mn.units[u]:d))&&(l=Ys(e,u,s,p)),this._pt=new ns(this._pt,m?v:x,u,l,(f?ci(l,f+o):o)-l,m||"px"!==p&&"zIndex"!==u||!1===t.autoRound?Ss:Ts),this._pt.u=p||0,d!==p&&"%"!==p&&(this._pt.b=s,this._pt.r=ws);else if(u in x)Ks.call(this,e,u,s,f?f+a:a);else{if(!(u in e)){Wn(u,a);continue}this.add(e,u,s||e[u],f?f+a:a,i,r)}b.push(u)}_&&ts(this)},get:$s,aliases:xs,getSetter:function(e,t,n){var i=xs[t];return i&&i.indexOf(",")<0&&(t=i),t in fs&&t!==Os&&(e._gsap.x||$s(e,"x"))?n&&ds===n?"scale"===t?Ls:Is:(ds=n||{})&&("scale"===t?Ds:Rs):e.style&&!Pn(e.style[t])?Ps:~t.indexOf("-")?Cs:Xr(e,t)},core:{_removeProperty:Ws,_getMatrix:sa}};as.utils.checkPrefix=zs,xa=ai((_a="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(ba="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){fs[e]=1})),ai(ba,(function(e){mn.units[e]="deg",na[e]=1})),xs[xa[13]]=_a+","+ba,ai("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");xs[t[1]]=xa[t[0]]})),ai("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){mn.units[e]="px"})),as.registerPlugin(Sa);var Ea=as.registerPlugin(Sa)||as;Ea.core.Tween;function wa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ta(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ma(e,t,n){return t&&Ta(e.prototype,t),n&&Ta(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Aa=__webpack_require__(729);const Pa=new(__webpack_require__.n(Aa)());var Ca={UTILS:{EMITTER:Pa},CLASSES:{ACTIVE:"-active",LOADED:"is-loaded",HIDE:"-hide",SHOW:"-show",OPEN:"-open",PLAYING:"-playing",DRAGGING:"-dragging"},EVENTS:{CLICK:"click",ENDED:"ended",KEYDOWN:"keydown",LOAD:"load",LAZY_LOADED:"lazyloaded",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",FOCUSIN:"focusin",FOCUSOUT:"focusout",REDUCED_MOTION_CHANGE:"reduced-motion-change",INCREASE_CONTRAST_CHANGE:"increase-contrast-change",FORCED_COLORS_CHANGE:"forced-colors-change",LOW_POWER_MODE:"low-power-mode",RESIZE:"resize",SCROLL:"scroll",ELEMENT_IN_VIEWPORT:"element-in-viewport",PRIDE_DATA_LOADED:"pride-data-loaded",IS_MOBILE:"is-mobile",XRAY_IS_ACTIVE:"xray-active",XRAY_IS_DRAGGING:"xray-dragging",AUDIO_TRANSCRIPT_TOGGLE:"audio-transcript",MODAL_OPENED:"modal-opened",MODAL_CLOSED:"modal-closed"},TIMING:{STD_ANIM_TIME:250,SLOW_ANIM_TIME:500,SLOWER_ANIM_TIME:835,TIMEOUT:6e3,RESIZE_THROTTLE:100},COLORS:{black:"#000",blueblack:"#091f2c",gray:"#727272",lightgray:"#ccc",offwhite:"#f4f3f5",white:"#fff",lightyellow:"#ffe399",yellow:"#ffb900",darkyellow:"#7f5a1a",lightorange:"#ffa38b",orange:"#ff5c39",darkorange:"#73391d",lightred:"#ffb3bb",red:"#f4364c",darkred:"#73262f",lightmagenta:"#d59ed7",magenta:"#c03bc4",darkmagenta:"#702573",lightpurple:"#c5b4e3",purple:"#8661c5",darkpurple:"#463668",lightblue:"#8dc8e8",blue:"#0078d4",darkblue:"#2a446f",lightteal:"#b9dcd2",teal:"#49c5b1",darkteal:"#225b62",lightgreen:"#d4ec8e",green:"#8de971",darkgreen:"#07641d"},BREAKPOINTS:{mobile:767}};const Ia={selector:"body",Source:function(){function e(t){wa(this,e),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.init()}return Ma(e,[{key:"init",value:function(){var e=this;window.addEventListener(Ca.EVENTS.LOAD,(function(t){e.emitter.emit(Ca.EVENTS.LOAD,t)})),window.addEventListener(Ca.EVENTS.RESIZE,(function(t){e.emitter.emit(Ca.EVENTS.RESIZE,t)})),window.addEventListener(Ca.EVENTS.SCROLL,(function(t){e.emitter.emit(Ca.EVENTS.SCROLL,t)})),window.addEventListener(Ca.EVENTS.KEYDOWN,(function(t){e.emitter.emit(Ca.EVENTS.KEYDOWN,t)}))}}]),e}()};const La={selector:".js-scroll-target, .js-transition",Source:function(){function e(t){wa(this,e),this.element=t,this.elDataset=this.element.dataset,this.emitter=Ca.UTILS.EMITTER,this.observer=this.registerObserver(),this.observer.observe(this.element),this.emittedOnce=!1}return Ma(e,[{key:"registerObserver",value:function(){var e={root:null,rootMargin:this.elDataset.rootMargin?this.elDataset.rootMargin:"0px",threshold:this.elDataset.threshold?this.elDataset.threshold:0};return new IntersectionObserver(this.elementInView.bind(this),e)}},{key:"elementInView",value:function(e){var t=this;e.forEach((function(e){e.isIntersecting?(t.activateElement(e.target),t.emittedOnce||(t.emitter.emit(Ca.EVENTS.ELEMENT_IN_VIEWPORT,e),t.elDataset.emitonce&&(t.emittedOnce=!0))):t.deactivateElement(e.target)})),this.emitter.on(Ca.EVENTS.RESIZE,(function(e){t.emittedOnce=!1}))}},{key:"activateElement",value:function(e){e.classList.add(Ca.CLASSES.ACTIVE)}},{key:"deactivateElement",value:function(e){e.classList.remove(Ca.CLASSES.ACTIVE)}}]),e}()};function Da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ra(e){return function(e){if(Array.isArray(e))return Da(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Da(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Da(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ka=".js-lazy-load",Oa=function(){function e(t){wa(this,e),this.element=t,this.images=Array.from(document.body.querySelectorAll(ka)),this.srcSets=Array.from(document.body.querySelectorAll("[data-srcset]")),this.observer=this.registerObserver(),this.loadImages()}return Ma(e,[{key:"registerObserver",value:function(){return new IntersectionObserver(this.imageInView.bind(this),{root:null,rootMargin:"100px",threshold:0})}},{key:"imageInView",value:function(e){var t=this;e.forEach((function(e){e.intersectionRatio>0&&void 0===e.target.dataset.loaded&&t.loadImage(e.target)}))}},{key:"loadImages",value:function(){var e=this;[].concat(Ra(this.images),Ra(this.srcSets)).forEach((function(t){e.observer.observe(t)}))}},{key:"loadImage",value:function(e){if(e.hasAttribute("data-src")){var t=e.getAttribute("data-src");e.onload=this.imageLoaded(e),e.removeAttribute("data-src"),e.src=t,Pa.emit(Ca.EVENTS.LAZY_LOADED,e)}else if(e.hasAttribute("data-bg")){var n=e.getAttribute("data-bg");e.onload=this.imageLoaded(e),e.style.backgroundImage="url(".concat(n,")"),e.removeAttribute("data-bg"),Pa.emit(Ca.EVENTS.LAZY_LOADED,e)}else if(e.hasAttribute("data-srcset")){var i=e.getAttribute("data-srcset");e.srcset=i,e.removeAttribute("data-srcset"),Pa.emit(Ca.EVENTS.LAZY_LOADED,e)}e.dataset.loaded=!0}},{key:"imageLoaded",value:function(e){this.observer.unobserve(e),setTimeout((function(){e.classList.add(Ca.CLASSES.LOADED)}),Ca.TIMING.STD_ANIM_TIME)}}]),e}(),Fa="#site-header",Na='meta[name="theme-color"]';const Ba={selector:"#headerArea.uhf",Source:function(){function e(t){wa(this,e),this.uhfHeader=t,this.pageHeader=document.body.querySelector(Fa),this.meta=document.head.querySelector(Na),this.registerObserver()}return Ma(e,[{key:"registerObserver",value:function(){var e=this;new IntersectionObserver((function(t,n){return e.uhfInView(t,n)}),{root:null,threshold:0}).observe(this.pageHeader)}},{key:"uhfInView",value:function(e,t){var n=this;e.forEach((function(e){e.isIntersecting?n.meta.setAttribute("content","#ffffff"):n.meta.setAttribute("content","")}))}}]),e}()};const za={selector:"[data-videosrc][data-videosrcmobile]",Source:function(){function e(t){wa(this,e),this.element=t,this.source=this.element.dataset.videosrc,this.type=this.element.dataset.videotype,this.sourceMobile=this.element.dataset.videosrcmobile,this.typeMobile=this.element.dataset.videotypemobile,this.query=window.matchMedia("(min-width: 768px)"),this.init()}return Ma(e,[{key:"init",value:function(){this.registerObserver(),this.query.matches||this.updateSource({matches:!1})}},{key:"registerObserver",value:function(){var e=this;this.query.addEventListener("change",(function(t){return e.updateSource(t)}))}},{key:"updateSource",value:function(e){e.matches?(this.element.src=this.source,this.element.type=this.type):(this.element.src=this.sourceMobile,this.element.type=this.typeMobile),this.element.parentElement.load()}}]),e}()};function Ua(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Va(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Va(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function Va(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Ha=function(){function e(){wa(this,e),this.emitter=Ca.UTILS.EMITTER,this.isFirst=!0,this.init()}return Ma(e,[{key:"init",value:function(){var e=this;(this.emitter.on(Ca.EVENTS.RESIZE,(function(){return e.calculateHeight()})),this.emitter.on(Ca.EVENTS.SCROLL,(function(){return e.calculateVisibleHeight()})),document.body.querySelector(".c-uhfh-actions"))&&new ResizeObserver(this.watchActionsResize.bind(this)).observe(document.body.querySelector(".c-uhfh-actions"));this.isFirst=!1,this.calculateHeight()}},{key:"updateCSSVars",value:function(){if(!this.isFirst){if("number"==typeof this.wpHeight&&document.documentElement.style.setProperty("--wp-height","".concat(this.wpHeight,"px")),"number"==typeof this.uhfFullHeight&&document.documentElement.style.setProperty("--uhf-height","".concat(this.uhfFullHeight,"px")),"number"==typeof this.uhfHeight&&document.documentElement.style.setProperty("--uhftop-height","".concat(this.uhfHeight,"px")),"number"==typeof this.uhfFullHeight||"number"==typeof this.wpHeight){var e="number"==typeof this.uhfFullHeight?this.uhfFullHeight:0,t="number"==typeof this.wpHeight?this.wpHeight:0;document.documentElement.style.setProperty("--nav-height","".concat(e+t,"px"))}if("number"==typeof this.interfaceHeaderHeight||"number"==typeof this.interfaceFooterHeight){var n="number"==typeof this.interfaceHeaderHeight?this.interfaceHeaderHeight:0,i="number"==typeof this.interfaceFooterHeight?this.interfaceFooterHeight:0;document.documentElement.style.setProperty("--editor-height","".concat(n+i,"px"))}"number"==typeof this.documentWidth&&"number"==typeof this.actionsSectionLeft&&document.documentElement.style.setProperty("--uhf-actions-right-inset","".concat(this.documentWidth-this.actionsSectionLeft,"px")),"number"==typeof this.wpHeight&&"number"==typeof this.scrollY&&"number"==typeof this.wpHeight&&document.documentElement.style.setProperty("--nav-height-visible","".concat(Math.max(0,this.uhfFullHeight-this.scrollY)+this.wpHeight,"px"))}}},{key:"calculateHeight",value:function(){var e=document.body.querySelector("#headerArea"),t=document.body.querySelector("#site-header"),n=document.body.querySelector("#wpadminbar"),i=document.body.querySelector(".interface-interface-skeleton__header"),r=document.body.querySelector(".interface-interface-skeleton__footer");document.body.classList.contains("microsoft-uhf")&&(this.uhfHeight=e?e.offsetHeight:null,this.uhfFullHeight=t?t.offsetHeight:null),this.wpHeight=n?n.offsetHeight:null,this.interfaceHeaderHeight=i?i.offsetHeight:null,this.interfaceFooterHeight=r?r.offsetHeight:null,this.documentWidth=document.documentElement.clientWidth;var s=document.body.querySelector(".c-uhfh-actions");s&&(this.actionsSectionLeft=s.getBoundingClientRect().left),this.updateCSSVars()}},{key:"calculateVisibleHeight",value:function(){this.scrollY=Math.max(0,document.documentElement.scrollTop||document.body.scrollTop),this.updateCSSVars()}},{key:"watchActionsResize",value:function(e){var t,n=Ua(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.actionsSectionLeft=i.target.getBoundingClientRect().left}}catch(e){n.e(e)}finally{n.f()}this.updateCSSVars()}}]),e}();Ea.registerPlugin(Gt);var Ga=function(){function e(){wa(this,e),this.isQueued=!1,this.init()}return Ma(e,[{key:"init",value:function(){var e=this;Pa.on(Ca.EVENTS.LAZY_LOADED,(function(t){e.isQueued||(e.isQueued=!0,requestAnimationFrame((function(){Gt.refresh(),e.isQueued=!1})))}))}}]),e}();Ea.registerPlugin(Gt);var ja=".js-parallax",Wa="[data-speed]",qa=function(){function e(t){wa(this,e),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.cards=this.element.querySelectorAll(Wa),this.query=window.matchMedia("(min-width: 768px)"),this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.animation=this.triggerParallax(),document.documentElement.classList.contains("reduced-motion")&&this.resetParallax(),this.emitter.on(Ca.EVENTS.REDUCED_MOTION_CHANGE,(function(t){t?e.resetParallax():e.animation.scrollTrigger.enable()}))}},{key:"triggerParallax",value:function(){return Ea.fromTo(this.cards,{y:function(e,t){return 48*parseFloat(t.getAttribute("data-speed"))}},{y:function(e,t){return 48*parseFloat(t.getAttribute("data-speed"))*-1},ease:"none",scrollTrigger:{trigger:this.element,start:"top bottom",end:function(){return"bottom top"},invalidateOnRefresh:!0,scrub:.5}})}},{key:"resetParallax",value:function(){this.animation.scrollTrigger.disable(!0,!1),this.cards.forEach((function(e){e.style.transform="none"}))}}]),e}();const Xa={selector:ja,Source:qa};var Ya=".js-play-in-view";const $a={selector:"body",Source:function(){function e(){wa(this,e),this.elements=document.body.querySelectorAll(Ya),this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.observer=new IntersectionObserver((function(t){return e.playVideo(t)}),{root:null,rootMargin:"0%",threshold:.5}),this.elements.forEach((function(t){t.removeAttribute("autoplay"),t.pause(),t.currentTime=0,e.observer.observe(t)}))}},{key:"playVideo",value:function(e){var t=this;e.forEach((function(e){e.isIntersecting&&(t.observer.unobserve(e.target),e.target.play())}))}}]),e}()};var Ka=".js-low-power-mode__video",Za=function(){function e(){if(wa(this,e),this.video=document.querySelector(Ka),new URLSearchParams(window.location.search).has("LOW_POWER"))return document.body.classList.add("low-power-mode"),this.isLowPowerMode=!0,void Pa.emit(Ca.EVENTS.LOW_POWER_MODE,this.isLowPowerMode);this.updateLowPowerOption()}return Ma(e,[{key:"updateLowPowerOption",value:function(){var e=this;this.video.play().then((function(){e.isLowPowerMode=!1,document.body.classList.remove("low-power-mode")})).catch((function(){e.isLowPowerMode=!0,document.body.classList.add("low-power-mode"),Pa.emit(Ca.EVENTS.LOW_POWER_MODE,e.isLowPowerMode)}))}}]),e}(),Qa=function(){function e(){wa(this,e),this.emitter=Ca.UTILS.EMITTER,this.isMobile=void 0,this.init()}return Ma(e,[{key:"init",value:function(){this.handleCondition(),this.registerEvents()}},{key:"registerEvents",value:function(){this.emitter.on(Ca.EVENTS.RESIZE,this.handleCondition.bind(this))}},{key:"handleCondition",value:function(e){var t=window.innerWidth<Ca.BREAKPOINTS.mobile;t!==this.isMobile&&(this.emitter.emit(Ca.EVENTS.IS_MOBILE,{isMobile:t,isFirstLoad:void 0===e}),this.isMobile=t)}}]),e}(),Ja=".js-invictus-wave";const eo={selector:".js-invictus-video",Source:function(){function e(t){wa(this,e),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.bgVideo=this.element.querySelector(Ja),this.init()}return Ma(e,[{key:"init",value:function(){this.registerEvents()}},{key:"registerEvents",value:function(){var e=this;this.emitter.on(Ca.EVENTS.ELEMENT_IN_VIEWPORT,(function(t){e.playVideo(t)}))}},{key:"playVideo",value:function(e){this.element===e.target&&this.bgVideo.play()}}]),e}()};var to={media:".transition--media",mediaAlt:".transition--media-alt",inAndUp:".transition--in-up",fadeIn:".transition--fade-in",playerOverlay:".transition--player-overlay"};const no={selector:"body",Source:function(){function e(){wa(this,e),this.allElements=document.body.querySelectorAll(Object.values(to).join(", ")),this.animations=[{elements:document.body.querySelectorAll(to.media),options:{root:null,rootMargin:"0% 0% -30%",threshold:0},observer:void 0},{elements:document.body.querySelectorAll(to.mediaAlt),options:{root:null,rootMargin:"0% 0% -30%",threshold:0},observer:void 0},{elements:document.body.querySelectorAll(to.inAndUp),options:{root:null,rootMargin:"0% 0% -5%",threshold:0},observer:void 0},{elements:document.body.querySelectorAll(to.fadeIn),options:{root:null,rootMargin:"0% 0% -5%",threshold:0},observer:void 0},{elements:document.body.querySelectorAll(to.playerOverlay),options:{root:null,rootMargin:"0% 0% -30%",threshold:0},observer:void 0}],this.init()}return Ma(e,[{key:"init",value:function(){this.prepareAnimatableElements(),this.registerObservers()}},{key:"registerObservers",value:function(){var e=this;this.animations.forEach((function(t){t.observer=new IntersectionObserver((function(n){e.handleAnimation(n,t)}),t.options),t.elements.forEach((function(e){t.observer.observe(e)}))}))}},{key:"handleAnimation",value:function(e,t){e.forEach((function(e){e.isIntersecting&&(t.observer.unobserve(e.target),e.target.classList.remove("-transition"))}))}},{key:"prepareAnimatableElements",value:function(){var e=new IntersectionObserver((function(t){t.forEach((function(e){e.isIntersecting||e.target.classList.add("-transition")})),e.disconnect()}),{root:null,rootMargin:"0%",threshold:0});this.allElements.forEach((function(t){e.observe(t)}))}}]),e}()};var io=Ma((function e(){wa(this,e),setTimeout((function(){window.msCommonShell.load({as:{callback:function(e){var t=new FormData;t.append("action","search_results"),t.append("s",e.text),fetch(unlocked.ajax_url,{method:"POST",credentials:"same-origin",body:t}).then((function(t){t.json().then((function(t){var n=t.map((function(e){return{type:"product",value:e}}));e.response(n)}))})).catch((function(e){console.log("error",e)}))}}})}),1e3)}));const ro=io;function so(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ao={selector:"img.js-focal-point, picture.js-focal-point",Source:function(){function e(t){wa(this,e),so(this,"emitter",Ca.UTILS.EMITTER),so(this,"image",null),so(this,"picture",null),so(this,"sources",[]),this.image="img"===t.tagName.toLowerCase()?t:t.querySelector("img"),this.image&&(this.picture=this.image.closest("picture"),this.sources=this.picture?Array.from(this.picture.querySelectorAll("source")):[],this.init())}return Ma(e,[{key:"init",value:function(){var e=this;this.image.addEventListener("load",(function(){e.onPossibleCurrentSrcChange()})),this.image.complete&&requestAnimationFrame((function(){e.onPossibleCurrentSrcChange()})),this.emitter.on(Ca.EVENTS.RESIZE,(function(){return requestAnimationFrame((function(){e.onPossibleCurrentSrcChange()}))}))}},{key:"onPossibleCurrentSrcChange",value:function(){var e,t,n=this,i=null;this.image.complete&&this.image.currentSrc&&(i=this.sources.find((function(e){return e.srcset.includes(n.image.currentSrc)&&(!e.media||window.matchMedia(e.media).matches)}))),!i&&this.image.classList.contains("js-focal-point")&&(i=this.image);var r=(null===(e=i)||void 0===e?void 0:e.dataset.focusX)||null,s=(null===(t=i)||void 0===t?void 0:t.dataset.focusY)||null;null!==r||null!==s?(null===r&&null!==s&&(r=0),null===s&&null!==r&&(s=0),this.applyFocalPoint(parseFloat(r),parseFloat(s))):this.image.style.objectPosition=null}},{key:"getCurrentSourceElement",value:function(){var e=this;return this.sources.find((function(t){return t.srcset.includes(e.image.currentSrc)&&(!t.media||window.matchMedia(t.media).matches)}))}},{key:"applyFocalPoint",value:function(e,t){var n=(e+1)/2,i=1-(t+1)/2,r=this.image.naturalWidth,s=this.image.naturalHeight,a=r/s,o=this.image.width,l=this.image.height,c=a>o/l?l/s:o/r,h=o/2-n*(r*c),u=l/2-i*(s*c);this.image.style.objectPosition="clamp(100%, ".concat(h,"px, 0%) clamp(100%, ").concat(u,"px, 0%)")}}]),e}()};var oo=".js-a11y-widget",lo=".js-a11y-toggle",co=".js-a11y-toolbar",ho=function(){function e(t){wa(this,e),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.toolbar=this.element.querySelector(co),this.toggleBtn=this.element.querySelector(lo),this.contrastBtn=this.element.querySelector('[value="contrast"]'),this.motionBtn=this.element.querySelector('[value="motion"]'),this.forcedColorsBtn=this.element.querySelector('[value="forced-colors"]'),this.contrastLabel=this.element.querySelector(".a11y-widget__setting--contrast"),this.motionLabel=this.element.querySelector(".a11y-widget__setting--motion"),this.forcedColorsLabel=this.element.querySelector(".a11y-widget__setting--forced-colors"),this.contrastCheckbox=this.element.querySelector('[value="contrast"] input'),this.motionCheckbox=this.element.querySelector('[value="motion"] input'),this.forcedColorsCheckbox=this.element.querySelector('[value="forced-colors"] input'),this.closeBtn=this.element.querySelector('[value="close"]'),this.motionQuery=window.matchMedia("(prefers-reduced-motion: reduce)"),this.contrastQuery=window.matchMedia("(prefers-contrast: more), (prefers-reduced-transparency: reduce)"),this.forcedColorsQuery=window.matchMedia("(forced-colors: active)"),this.params=new URLSearchParams(window.location.search),this.cookies=document.cookie,this.observer=this.registerObserver(),this.keyCode=Object.freeze({TAB:9,ESC:27,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40}),this.options={reduceMotion:void 0,increaseContrast:void 0,forcedColors:void 0},this.init()}return Ma(e,[{key:"init",value:function(){this.getInitialMotionOption(),this.getInitialContrastOption(),this.getInitialForcedColorsOption(),this.setOptions(),this.setMotionState(),this.registerEventHandlers();var e=document.querySelector(".c-uhfh-actions");e&&e.parentElement.insertBefore(this.element,e)}},{key:"registerObserver",value:function(){var e=this;return new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting||e.closeMenu(!1)}))}),{rootMargin:"20px",threshold:0})}},{key:"setOptions",value:function(){this.options.reduceMotion?document.documentElement.classList.add("reduced-motion"):document.documentElement.classList.remove("reduced-motion"),this.motionBtn.setAttribute("aria-checked",this.options.reduceMotion?"true":"false"),this.options.increaseContrast?document.documentElement.classList.add("increased-contrast"):document.documentElement.classList.remove("increased-contrast"),this.options.forcedColors?document.documentElement.classList.remove("forced-color-override"):document.documentElement.classList.add("forced-color-override"),void 0!==this.options.reduceMotion&&(document.cookie="a11y_reduce_motion=".concat(this.options.reduceMotion,"; Path=/; SameSite=Strict")),this.emitter.emit(Ca.EVENTS.REDUCED_MOTION_CHANGE,this.options.reduceMotion),this.emitter.emit(Ca.EVENTS.INCREASE_CONTRAST_CHANGE,this.options.increaseContrast),this.emitter.emit(Ca.EVENTS.FORCED_COLORS_CHANGE,this.options.forcedColors)}},{key:"setMotionState",value:function(){!0===this.options.reduceMotion?(this.motionLabel.innerHTML="Off",this.motionCheckbox.checked=!1):(this.motionLabel.innerHTML="On",this.motionCheckbox.checked=!0)}},{key:"setContrastState",value:function(){!0===this.options.increaseContrast?(this.contrastLabel.innerHTML="On",this.contrastCheckbox.checked=!0):(this.contrastLabel.innerHTML="Off",this.contrastCheckbox.checked=!1)}},{key:"setForcedColorsState",value:function(){!0===this.options.forcedColors?(this.forcedColorsLabel.innerHTML="On",this.forcedColorsCheckbox.checked=!0):(this.forcedColorsLabel.innerHTML="Off",this.forcedColorsCheckbox.checked=!1)}},{key:"openMenu",value:function(){this.toggleBtn.setAttribute("aria-hidden",!0),this.toolbar.setAttribute("aria-hidden",!1),this.toolbar.querySelector("button").focus(),this.observer.observe(this.toolbar)}},{key:"closeMenu",value:function(e){this.toolbar.setAttribute("aria-hidden",!0),this.toggleBtn.setAttribute("aria-hidden",!1),!1!==e&&this.toggleBtn.focus()}},{key:"updateVisibility",value:function(){document.activeElement.closest(".js-focused")?this.element.style.visibility="hidden":this.element.style.visibility="visible"}},{key:"registerEventHandlers",value:function(){var e=this;document.addEventListener("focusin",(function(){return e.updateVisibility()}),!0),this.toggleBtn.addEventListener("click",(function(){return e.openMenu()})),this.closeBtn.addEventListener("click",(function(){return e.closeMenu()})),document.addEventListener("click",(function(t){"false"===e.toolbar.getAttribute("aria-hidden")&&(t.composedPath().includes(e.element)||e.closeMenu(!1))})),this.toolbar.addEventListener("focusout",(function(t){null===t.relatedTarget||e.toolbar.contains(t.relatedTarget)||e.closeMenu()})),this.toolbar.addEventListener("keydown",(function(t){"Escape"===t.code&&e.closeMenu()})),this.motionCheckbox.addEventListener("click",(function(){e.options.reduceMotion=e.toggleButton(e.motionBtn),e.setOptions(),e.setMotionState()})),this.motionQuery.addEventListener("change",(function(){e.options.reduceMotion=!!e.motionQuery.matches||void 0,e.setOptions(),e.setMotionState()})),this.contrastQuery.addEventListener("change",(function(){e.options.increaseContrast=!!e.contrastQuery.matches||void 0,e.setOptions(),e.setContrastState()})),this.forcedColorsQuery.addEventListener("change",(function(){e.options.forcedColors=e.forcedColorsQuery.matches,e.setOptions(),e.setForcedColorsState()}))}},{key:"toggleButton",value:function(e){return"false"===e.getAttribute("aria-checked")}},{key:"getInitialMotionOption",value:function(){var e=this.getCookie("a11y.reduce_motion");this.params.has("REDUCE_MOTION")?this.options.reduceMotion=!0:null!==e?this.options.reduceMotion="true"===e:this.motionQuery.matches&&(this.options.reduceMotion=!0)}},{key:"getInitialContrastOption",value:function(){(this.params.has("INCREASE_CONTRAST")||this.contrastQuery.matches)&&(this.options.increaseContrast=!0)}},{key:"getInitialForcedColorsOption",value:function(){(this.params.has("FORCED_COLORS")||this.forcedColorsQuery.matches)&&(this.options.forcedColors=!0)}},{key:"getCookie",value:function(e){var t=new RegExp(e+"=([^;]+)").exec(document.cookie);return null!=t?unescape(t[1]):null}}]),e}();const uo={selector:oo,Source:ho};var po=__webpack_require__(248),fo=__webpack_require__.n(po),mo=".js-audio__playhead",go="audio",vo=".js-audio-controls",yo=".js-audio-name",_o=".js-audio-button",bo=".js-button__icon",xo=".js-audio__timestamp",So=".js-audio__volume-btn",Eo=".js-audio__volume",wo=".js-scrubber-wrapper",To=".js-audio__transcript",Mo=".js-audio__transcript-btn",Ao=function(){function e(t){wa(this,e),this.element=t,this.scrubber=this.element.querySelector(mo),this.player=this.element.querySelector(go),this.controls=this.element.querySelectorAll(vo),this.name=this.element.querySelector(yo),this.playButton=this.element.querySelector(_o),this.buttonIcon=this.playButton.querySelector(bo),this.timestamp=this.element.querySelector(xo),this.volumeButton=this.element.querySelector(So),this.volumeScrubber=this.element.querySelector(Eo),this.volumeScrubberWrapper=this.element.querySelector(wo),this.transcript=this.element.querySelector(To),this.transcriptButton=this.element.querySelector(Mo),this.emitter=Ca.UTILS.EMITTER,this.lottie=this.loadAnimation(),this.transcriptVisible=!1,this.storedVolume=100,this.seeking=!1,this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.playButton.addEventListener("click",(function(){return e.togglePlayPause()})),this.player.addEventListener("loadstart",(function(){return e.toggleButton()})),this.player.addEventListener("play",(function(){e.toggleButton(),e.showControls()})),this.player.addEventListener("pause",(function(){return e.toggleButton()})),this.player.addEventListener("ended",(function(){e.toggleButton(),e.hideControls()})),this.player.addEventListener("timeupdate",(function(){e.updateScrubber(e.getProgress()),e.displayDuration()})),this.scrubber&&(this.scrubber.addEventListener("change",(function(t){return e.seekTo(t.target.value)})),this.scrubber.addEventListener("input",(function(t){return e.updateScrubber(t.target.value,!0)})),this.scrubber.addEventListener("mousedown",(function(){e.seeking=!0})),this.scrubber.addEventListener("mouseup",(function(){e.seeking=!1}))),this.volumeScrubber&&this.volumeButton&&(this.volumeButton.addEventListener("click",(function(t){t.target!==e.volumeScrubber&&e.toggleMute()})),this.volumeScrubber.addEventListener("change",(function(t){e.storedVolume=t.target.value})),this.volumeScrubber.addEventListener("input",(function(t){return e.updateVolume(t.target.value)}))),this.transcriptButton&&this.transcript&&this.transcriptButton.addEventListener("click",(function(){return e.toggleTranscript()})),"audioplayers"in window.unlocked||(window.unlocked.audioplayers={}),window.unlocked.audioplayers[this.element.id]={pause:function(){e.player.pause()},play:function(){e.player.play()},state:function(){return e.player.paused?"paused":"playing"}}}},{key:"togglePlayPause",value:function(){this.player.paused?this.player.play():this.player.pause()}},{key:"toggleButton",value:function(){this.player.paused?(this.lottie.goToAndStop(0),this.playButton.ariaPressed=!1):(this.lottie.play(),this.playButton.ariaPressed=!0)}},{key:"displayDuration",value:function(){if(this.timestamp){var e=this.player.currentTime,t=Math.floor(e/60),n=Math.floor(e%60),i=n<10?"0".concat(n):"".concat(n);this.timestamp.innerHTML="".concat(t,":").concat(i)}}},{key:"updateScrubber",value:function(e,t){this.seeking&&!t||this.element.style.setProperty("--audio-progress","".concat(e,"%"))}},{key:"getProgress",value:function(){return this.player.currentTime/this.player.duration*100}},{key:"seekTo",value:function(e){if(this.scrubber){var t=this.player.duration;this.player.currentTime=e*t/100,this.updateScrubber(this.getProgress())}}},{key:"updateVolume",value:function(e){this.volumeScrubber&&(this.element.style.setProperty("--audio-volume","".concat(e,"%")),this.player.volume=e/100,this.player.muted&&this.toggleMute(),0===this.player.volume?this.volumeButton.classList.add("audio__volume-btn--muted"):this.player.muted||this.volumeButton.classList.remove("audio__volume-btn--muted"))}},{key:"toggleMute",value:function(){this.player.muted=!this.player.muted,this.player.muted?(this.volumeButton.classList.add("audio__volume-btn--muted"),this.volumeButton.setAttribute("aria-label","Unmute"),this.element.style.setProperty("--audio-volume","0%"),this.volumeScrubber.value=0):(this.volumeButton.classList.remove("audio__volume-btn--muted"),this.volumeButton.setAttribute("aria-label","Mute"),this.volumeScrubber.value=100*this.player.volume,this.updateVolume(100*this.player.volume))}},{key:"toggleTranscript",value:function(){this.transcriptButton&&this.transcript&&(this.transcriptVisible=!this.transcriptVisible,this.transcriptButton.ariaExpanded=this.transcriptVisible,this.transcript.classList.toggle("-hide"),this.transcript.ariaHidden=!this.transcriptVisible,this.emitter.emit(Ca.EVENTS.AUDIO_TRANSCRIPT_TOGGLE,{element:this.element,isVisible:this.transcriptVisible}))}},{key:"loadAnimation",value:function(){var e=fo().loadAnimation({container:this.buttonIcon,path:"".concat(unlocked.theme_dir,"/assets/lottie/AudioButton.json"),renderer:"svg",loop:!0,autoplay:!1});return e.isLoaded||e.addEventListener("DOMLoaded",(function(){return e.goToAndStop(0)})),e}},{key:"showControls",value:function(){this.controls.forEach((function(e){return e.classList.remove("-hide")})),this.name.classList.add("-hide")}},{key:"hideControls",value:function(){this.controls.forEach((function(e){return e.classList.add("-hide")})),this.name.classList.remove("-hide"),this.transcriptVisible&&this.toggleTranscript()}}]),e}();const Po={selector:".js-audio-player",Source:Ao};const Co={selector:".js-breadcrumb-link",Source:Ma((function e(t){wa(this,e),t.addEventListener("click",(function(e){document.referrer===t.href&&(e.preventDefault(),window.history.back())}))}))};const Io={selector:".js-toggle-button",Source:function(){function e(t){wa(this,e),so(this,"onClick",(function(){})),so(this,"onVisibilityChange",(function(){})),so(this,"onStateChange",(function(){})),this.element=t,this.label=this.element.querySelector(".js-button-label"),this.stateElems=Ra(this.element.querySelectorAll(".js-state-wrapper")),this.buttonId=this.element.dataset.buttonid,this.stateStore=JSON.parse(this.element.dataset.state),this.state=null,this.setState(this.stateStore[0].name),this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.element.addEventListener("click",(function(){"function"==typeof e.onClick&&e.onClick(e.state,e.element,e)})),new IntersectionObserver((function(t){t.forEach((function(t){"function"==typeof e.onVisibilityChange&&e.onVisibilityChange(t.isIntersecting,e)}))})).observe(this.element),this.addToWindow()}},{key:"setState",value:function(e){var t,n=this;"preload"in this.element.dataset&&this.element.removeAttribute("data-preload"),this.state=e,this.stateElems.forEach((function(e){e.dataset.stateid===n.state?e.classList.remove("unlocked-button__icon--hidden"):e.classList.add("unlocked-button__icon--hidden")})),this.label.innerText=null===(t=this.stateStore.find((function(e){return e.name===n.state})))||void 0===t?void 0:t.label,"function"==typeof this.onStateChange&&this.onStateChange(this.state,this.element,this)}},{key:"addToWindow",value:function(){"toggleButtons"in window.unlocked||(window.unlocked.toggleButtons={}),window.unlocked.toggleButtons[this.buttonId]=this}}]),e}()};var Lo=function(){function e(t){var n;wa(this,e),this.button=t,this.label=t.querySelector(".js-button-label"),this.emitter=Ca.UTILS.EMITTER;var i=this.button.dataset,r=i.controlgroup,s=i.loops,a=i.replayOnly;this.autoplay="false"!==this.button.dataset.autoplay,this.loops=!("false"===s),this.replayOnly=!("false"===a),this.videos=document.querySelectorAll('[data-controlledby="'.concat(r,'"]')),this.initialObserver=void 0,this.inViewObserver=void 0,this.videosInView=[!0],this.userState="auto",this.labelDesc=null!==(n=this.button.dataset.desc)&&void 0!==n?n:"the decorative animation",this.inCarousel=!!this.button.closest(".js-carousels--horizontal"),this.controlKey=this.button.dataset.controlKey,this.isLocked=!1,this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.videosInView[0]=!0,this.videos.forEach((function(t,n){t.dataset.videoIndex=n+1,e.videosInView[n+1]=!0})),this.button.addEventListener("click",this.onButtonClick.bind(this)),!this.autoplay||this.hasReducedMotion()?(this.videos.forEach((function(e){e.pause(),e.currentTime=0})),this.updateButtonState("play")):this.videos.forEach((function(t){t.onloadeddata=function(){e.hidePoster(t)},t.readyState>=2&&e.hidePoster(t)})),this.emitter.on(Ca.EVENTS.REDUCED_MOTION_CHANGE,(function(t){t&&(e.videos.forEach((function(t){t.pause(),t.currentTime=0,e.showPoster(t)})),e.updateButtonState("play"))})),this.emitter.on(Ca.EVENTS.IS_MOBILE,(function(t){var n=t.isMobile,i=t.isFirstLoad;n?e.resetVideoSource("mobile"):!0!==i&&e.resetVideoSource("desktop")})),this.loops||this.videos.forEach((function(t){t.onended=function(){e.allEnded()&&setTimeout((function(){e.updateButtonState("replay")}),350)}})),this.initialObserver=new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting&&e.autoplay&&!e.hasReducedMotion()&&(e.initialObserver.unobserve(t.target),e.playAll(),e.loops&&e.setInViewObserver())}))}),{rootMargin:this.loops?"0px":"0px 0px ".concat(this.inCarousel?"0px":"-50%"),threshold:this.loops?0:.75}),this.initialObserver.observe(this.inCarousel?this.videos[0]:this.button),this.registerInViewObserver(),this.updateButtonState(this.button.dataset.state),this.controlKey&&("videos"in window.unlocked||(window.unlocked.videos={}),window.unlocked.videos[this.controlKey]={play:function(){e.videosInView.includes(!0)&&!e.hasReducedMotion()&&e.playAll()},pause:function(t){e.pauseAll(),!0===t&&e.videos.forEach((function(t){return e.showPoster(t)}))},state:function(){return e.userState},lock:function(){e.lock=!0},unlock:function(){e.lock=!1}})}},{key:"playAll",value:function(){var e=this;!0!==this.lock&&(this.videos.forEach((function(t){t.play(),e.hidePoster(t)})),this.replayOnly?this.updateButtonState("hidden"):this.updateButtonState("pause"))}},{key:"pauseAll",value:function(){this.videos.forEach((function(e){return e.pause()})),this.updateButtonState("play")}},{key:"setInViewObserver",value:function(){var e=this;this.inViewObserver=new IntersectionObserver((function(t){if(t.forEach((function(t){var n=parseInt(t.target.dataset.videoIndex)||0;e.videosInView[n]=t.isIntersecting})),!e.hasReducedMotion()){var n=!e.videosInView.reduce((function(e,t){return e||t}));e.videosInView.includes(!0)&&"pause"!==e.userState?e.playAll():n&&e.pauseAll()}}),{threshold:0}),this.videos.forEach((function(t,n){e.inViewObserver.observe(t)})),this.inViewObserver.observe(this.button)}},{key:"showPoster",value:function(e){var t;null===(t=e.closest(".js-has-poster"))||void 0===t||t.classList.remove("--hide-poster")}},{key:"hidePoster",value:function(e){var t;null===(t=e.closest(".js-has-poster"))||void 0===t||t.classList.add("--hide-poster")}},{key:"hasReducedMotion",value:function(){return document.documentElement.classList.contains("reduced-motion")}},{key:"onButtonClick",value:function(){switch(this.button.dataset.state){case"play":case"replay":this.userState="play",this.playAll();break;case"pause":this.userState="pause",this.pauseAll()}}},{key:"updateButtonState",value:function(e){this.button.dataset.state=e,"hidden"===e?(this.button.ariaHidden=!0,this.button.tabIndex=-1,this.label.innerText=""):(this.button.ariaPressed="pause"===e,this.button.ariaHidden=!1,this.button.removeAttribute("tabindex"),this.label.innerText="".concat(e," ").concat(this.labelDesc))}},{key:"allEnded",value:function(){var e=!0;return this.videos.forEach((function(t){t.ended||(e=!1)})),e}},{key:"resetVideoSource",value:function(e){var t=this;this.videos.forEach((function(n){var i=n.querySelectorAll('source[data-media="mobile"]');if(!(i.length<=0)){var r=n.querySelectorAll('source[data-media="desktop"]');if("mobile"===e)t.setDatasrcToSrc(i),t.setSrcToDatasrc(r);else{if("desktop"!==e)return;t.setDatasrcToSrc(r),t.setSrcToDatasrc(i)}n.load(),t.autoplay&&!t.hasReducedMotion()&&(t.videos.forEach((function(e){e.play(),t.hidePoster(e)})),t.replayOnly?t.updateButtonState("hidden"):t.updateButtonState("pause"))}}))}},{key:"setDatasrcToSrc",value:function(e){e.forEach((function(e){var t=e.dataset.src;t&&(e.src=t,delete e.dataset.src)}))}},{key:"setSrcToDatasrc",value:function(e){e.forEach((function(e){var t=e.src;t&&(e.dataset.src=t,e.removeAttribute("src"))}))}},{key:"registerInViewObserver",value:function(){var e=this,t=new IntersectionObserver((function(n){n.forEach((function(n){n.isIntersecting&&e.setSyncVideo(n.target),t.unobserve(n.target)}))}));this.videos.forEach((function(e){t.observe(e)}))}},{key:"setSyncVideo",value:function(e){var t=e.querySelector("source[src]"),n=document.createElement("link");n.rel="preload",n.as="video",n.setAttribute("href",t.src),n.setAttribute("type",t.type),document.head.appendChild(n)}}]),e}();const Do={selector:".js-media-button",Source:Lo};const Ro={selector:".js-delay",Source:function(){function e(t){wa(this,e),this.element=t,this.callback=this.removeDelay.bind(this),this.init()}return Ma(e,[{key:"init",value:function(){this.element.addEventListener("mouseover",this.callback)}},{key:"removeDelay",value:function(){this.element.style.setProperty("--anim-delay","0ms"),this.element.removeEventListener("mouseover",this.callback)}}]),e}()};function ko(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function Oo(e={},t={}){Object.keys(t).forEach((n=>{void 0===e[n]?e[n]=t[n]:ko(t[n])&&ko(e[n])&&Object.keys(t[n]).length>0&&Oo(e[n],t[n])}))}const Fo={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function No(){const e="undefined"!=typeof document?document:{};return Oo(e,Fo),e}const Bo={document:Fo,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function zo(){const e="undefined"!=typeof window?window:{};return Oo(e,Bo),e}class Uo extends Array{constructor(e){"number"==typeof e?super(e):(super(...e||[]),function(e){const t=e.__proto__;Object.defineProperty(e,"__proto__",{get:()=>t,set(e){t.__proto__=e}})}(this))}}function Vo(e=[]){const t=[];return e.forEach((e=>{Array.isArray(e)?t.push(...Vo(e)):t.push(e)})),t}function Ho(e,t){return Array.prototype.filter.call(e,t)}function Go(e,t){const n=zo(),i=No();let r=[];if(!t&&e instanceof Uo)return e;if(!e)return new Uo(r);if("string"==typeof e){const n=e.trim();if(n.indexOf("<")>=0&&n.indexOf(">")>=0){let e="div";0===n.indexOf("<li")&&(e="ul"),0===n.indexOf("<tr")&&(e="tbody"),0!==n.indexOf("<td")&&0!==n.indexOf("<th")||(e="tr"),0===n.indexOf("<tbody")&&(e="table"),0===n.indexOf("<option")&&(e="select");const t=i.createElement(e);t.innerHTML=n;for(let e=0;e<t.childNodes.length;e+=1)r.push(t.childNodes[e])}else r=function(e,t){if("string"!=typeof e)return[e];const n=[],i=t.querySelectorAll(e);for(let e=0;e<i.length;e+=1)n.push(i[e]);return n}(e.trim(),t||i)}else if(e.nodeType||e===n||e===i)r.push(e);else if(Array.isArray(e)){if(e instanceof Uo)return e;r=e}return new Uo(function(e){const t=[];for(let n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(r))}Go.fn=Uo.prototype;const jo="resize scroll".split(" ");function Wo(e){return function(...t){if(void 0===t[0]){for(let t=0;t<this.length;t+=1)jo.indexOf(e)<0&&(e in this[t]?this[t][e]():Go(this[t]).trigger(e));return this}return this.on(e,...t)}}Wo("click"),Wo("blur"),Wo("focus"),Wo("focusin"),Wo("focusout"),Wo("keyup"),Wo("keydown"),Wo("keypress"),Wo("submit"),Wo("change"),Wo("mousedown"),Wo("mousemove"),Wo("mouseup"),Wo("mouseenter"),Wo("mouseleave"),Wo("mouseout"),Wo("mouseover"),Wo("touchstart"),Wo("touchend"),Wo("touchmove"),Wo("resize"),Wo("scroll");const qo={addClass:function(...e){const t=Vo(e.map((e=>e.split(" "))));return this.forEach((e=>{e.classList.add(...t)})),this},removeClass:function(...e){const t=Vo(e.map((e=>e.split(" "))));return this.forEach((e=>{e.classList.remove(...t)})),this},hasClass:function(...e){const t=Vo(e.map((e=>e.split(" "))));return Ho(this,(e=>t.filter((t=>e.classList.contains(t))).length>0)).length>0},toggleClass:function(...e){const t=Vo(e.map((e=>e.split(" "))));this.forEach((e=>{t.forEach((t=>{e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(let n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(const t in e)this[n][t]=e[t],this[n].setAttribute(t,e[t]);return this},removeAttr:function(e){for(let t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(let t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(let t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?`${e}ms`:e;return this},on:function(...e){let[t,n,i,r]=e;function s(e){const t=e.target;if(!t)return;const r=e.target.dom7EventData||[];if(r.indexOf(e)<0&&r.unshift(e),Go(t).is(n))i.apply(t,r);else{const e=Go(t).parents();for(let t=0;t<e.length;t+=1)Go(e[t]).is(n)&&i.apply(e[t],r)}}function a(e){const t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),i.apply(this,t)}"function"==typeof e[1]&&([t,i,r]=e,n=void 0),r||(r=!1);const o=t.split(" ");let l;for(let e=0;e<this.length;e+=1){const t=this[e];if(n)for(l=0;l<o.length;l+=1){const e=o[l];t.dom7LiveListeners||(t.dom7LiveListeners={}),t.dom7LiveListeners[e]||(t.dom7LiveListeners[e]=[]),t.dom7LiveListeners[e].push({listener:i,proxyListener:s}),t.addEventListener(e,s,r)}else for(l=0;l<o.length;l+=1){const e=o[l];t.dom7Listeners||(t.dom7Listeners={}),t.dom7Listeners[e]||(t.dom7Listeners[e]=[]),t.dom7Listeners[e].push({listener:i,proxyListener:a}),t.addEventListener(e,a,r)}}return this},off:function(...e){let[t,n,i,r]=e;"function"==typeof e[1]&&([t,i,r]=e,n=void 0),r||(r=!1);const s=t.split(" ");for(let e=0;e<s.length;e+=1){const t=s[e];for(let e=0;e<this.length;e+=1){const s=this[e];let a;if(!n&&s.dom7Listeners?a=s.dom7Listeners[t]:n&&s.dom7LiveListeners&&(a=s.dom7LiveListeners[t]),a&&a.length)for(let e=a.length-1;e>=0;e-=1){const n=a[e];i&&n.listener===i||i&&n.listener&&n.listener.dom7proxy&&n.listener.dom7proxy===i?(s.removeEventListener(t,n.proxyListener,r),a.splice(e,1)):i||(s.removeEventListener(t,n.proxyListener,r),a.splice(e,1))}}}return this},trigger:function(...e){const t=zo(),n=e[0].split(" "),i=e[1];for(let r=0;r<n.length;r+=1){const s=n[r];for(let n=0;n<this.length;n+=1){const r=this[n];if(t.CustomEvent){const n=new t.CustomEvent(s,{detail:i,bubbles:!0,cancelable:!0});r.dom7EventData=e.filter(((e,t)=>t>0)),r.dispatchEvent(n),r.dom7EventData=[],delete r.dom7EventData}}}return this},transitionEnd:function(e){const t=this;return e&&t.on("transitionend",(function n(i){i.target===this&&(e.call(this,i),t.off("transitionend",n))})),this},outerWidth:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){const e=zo();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){const e=zo(),t=No(),n=this[0],i=n.getBoundingClientRect(),r=t.body,s=n.clientTop||r.clientTop||0,a=n.clientLeft||r.clientLeft||0,o=n===e?e.scrollY:n.scrollTop,l=n===e?e.scrollX:n.scrollLeft;return{top:i.top+o-s,left:i.left+l-a}}return null},css:function(e,t){const n=zo();let i;if(1===arguments.length){if("string"!=typeof e){for(i=0;i<this.length;i+=1)for(const t in e)this[i].style[t]=e[t];return this}if(this[0])return n.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(i=0;i<this.length;i+=1)this[i].style[e]=t;return this}return this},each:function(e){return e?(this.forEach(((t,n)=>{e.apply(t,[t,n])})),this):this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(let t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(let t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){const t=zo(),n=No(),i=this[0];let r,s;if(!i||void 0===e)return!1;if("string"==typeof e){if(i.matches)return i.matches(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);for(r=Go(e),s=0;s<r.length;s+=1)if(r[s]===i)return!0;return!1}if(e===n)return i===n;if(e===t)return i===t;if(e.nodeType||e instanceof Uo){for(r=e.nodeType?[e]:e,s=0;s<r.length;s+=1)if(r[s]===i)return!0;return!1}return!1},index:function(){let e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;const t=this.length;if(e>t-1)return Go([]);if(e<0){const n=t+e;return Go(n<0?[]:[this[n]])}return Go([this[e]])},append:function(...e){let t;const n=No();for(let i=0;i<e.length;i+=1){t=e[i];for(let e=0;e<this.length;e+=1)if("string"==typeof t){const i=n.createElement("div");for(i.innerHTML=t;i.firstChild;)this[e].appendChild(i.firstChild)}else if(t instanceof Uo)for(let n=0;n<t.length;n+=1)this[e].appendChild(t[n]);else this[e].appendChild(t)}return this},prepend:function(e){const t=No();let n,i;for(n=0;n<this.length;n+=1)if("string"==typeof e){const r=t.createElement("div");for(r.innerHTML=e,i=r.childNodes.length-1;i>=0;i-=1)this[n].insertBefore(r.childNodes[i],this[n].childNodes[0])}else if(e instanceof Uo)for(i=0;i<e.length;i+=1)this[n].insertBefore(e[i],this[n].childNodes[0]);else this[n].insertBefore(e,this[n].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&Go(this[0].nextElementSibling).is(e)?Go([this[0].nextElementSibling]):Go([]):this[0].nextElementSibling?Go([this[0].nextElementSibling]):Go([]):Go([])},nextAll:function(e){const t=[];let n=this[0];if(!n)return Go([]);for(;n.nextElementSibling;){const i=n.nextElementSibling;e?Go(i).is(e)&&t.push(i):t.push(i),n=i}return Go(t)},prev:function(e){if(this.length>0){const t=this[0];return e?t.previousElementSibling&&Go(t.previousElementSibling).is(e)?Go([t.previousElementSibling]):Go([]):t.previousElementSibling?Go([t.previousElementSibling]):Go([])}return Go([])},prevAll:function(e){const t=[];let n=this[0];if(!n)return Go([]);for(;n.previousElementSibling;){const i=n.previousElementSibling;e?Go(i).is(e)&&t.push(i):t.push(i),n=i}return Go(t)},parent:function(e){const t=[];for(let n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?Go(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return Go(t)},parents:function(e){const t=[];for(let n=0;n<this.length;n+=1){let i=this[n].parentNode;for(;i;)e?Go(i).is(e)&&t.push(i):t.push(i),i=i.parentNode}return Go(t)},closest:function(e){let t=this;return void 0===e?Go([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){const t=[];for(let n=0;n<this.length;n+=1){const i=this[n].querySelectorAll(e);for(let e=0;e<i.length;e+=1)t.push(i[e])}return Go(t)},children:function(e){const t=[];for(let n=0;n<this.length;n+=1){const i=this[n].children;for(let n=0;n<i.length;n+=1)e&&!Go(i[n]).is(e)||t.push(i[n])}return Go(t)},filter:function(e){return Go(Ho(this,e))},remove:function(){for(let e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};Object.keys(qo).forEach((e=>{Object.defineProperty(Go.fn,e,{value:qo[e],writable:!0})}));const Xo=Go;function Yo(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function $o(){return Date.now()}function Ko(e,t){void 0===t&&(t="x");const n=zo();let i,r,s;const a=function(e){const t=zo();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}(e);return n.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map((e=>e.replace(",","."))).join(", ")),s=new n.WebKitCSSMatrix("none"===r?"":r)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),"x"===t&&(r=n.WebKitCSSMatrix?s.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===t&&(r=n.WebKitCSSMatrix?s.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),r||0}function Zo(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function Qo(e){return"undefined"!=typeof window&&void 0!==window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function Jo(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const i=n<0||arguments.length<=n?void 0:arguments[n];if(null!=i&&!Qo(i)){const n=Object.keys(Object(i)).filter((e=>t.indexOf(e)<0));for(let t=0,r=n.length;t<r;t+=1){const r=n[t],s=Object.getOwnPropertyDescriptor(i,r);void 0!==s&&s.enumerable&&(Zo(e[r])&&Zo(i[r])?i[r].__swiper__?e[r]=i[r]:Jo(e[r],i[r]):!Zo(e[r])&&Zo(i[r])?(e[r]={},i[r].__swiper__?e[r]=i[r]:Jo(e[r],i[r])):e[r]=i[r])}}}return e}function el(e,t,n){e.style.setProperty(t,n)}function tl(e){let{swiper:t,targetPosition:n,side:i}=e;const r=zo(),s=-t.translate;let a,o=null;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);const c=n>s?"next":"prev",h=(e,t)=>"next"===c&&e>=t||"prev"===c&&e<=t,u=()=>{a=(new Date).getTime(),null===o&&(o=a);const e=Math.max(Math.min((a-o)/l,1),0),c=.5-Math.cos(e*Math.PI)/2;let d=s+c*(n-s);if(h(d,n)&&(d=n),t.wrapperEl.scrollTo({[i]:d}),h(d,n))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout((()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[i]:d})})),void r.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=r.requestAnimationFrame(u)};u()}let nl,il,rl;function sl(){return nl||(nl=function(){const e=zo(),t=No();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){let t=!1;try{const n=Object.defineProperty({},"passive",{get(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(e){}return t}(),gestures:"ongesturestart"in e}}()),nl}function al(e){return void 0===e&&(e={}),il||(il=function(e){let{userAgent:t}=void 0===e?{}:e;const n=sl(),i=zo(),r=i.navigator.platform,s=t||i.navigator.userAgent,a={ios:!1,android:!1},o=i.screen.width,l=i.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let h=s.match(/(iPad).*OS\s([\d_]+)/);const u=s.match(/(iPod)(.*OS\s([\d_]+))?/),d=!h&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===r;let f="MacIntel"===r;return!h&&f&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${o}x${l}`)>=0&&(h=s.match(/(Version)\/([\d.]+)/),h||(h=[0,1,"13_0_0"]),f=!1),c&&!p&&(a.os="android",a.android=!0),(h||d||u)&&(a.os="ios",a.ios=!0),a}(e)),il}function ol(){return rl||(rl=function(){const e=zo();return{isSafari:function(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),rl}const ll={on(e,t,n){const i=this;if("function"!=typeof t)return i;const r=n?"unshift":"push";return e.split(" ").forEach((e=>{i.eventsListeners[e]||(i.eventsListeners[e]=[]),i.eventsListeners[e][r](t)})),i},once(e,t,n){const i=this;if("function"!=typeof t)return i;function r(){i.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];t.apply(i,s)}return r.__emitterProxy=t,i.on(e,r,n)},onAny(e,t){const n=this;if("function"!=typeof e)return n;const i=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[i](e),n},offAny(e){const t=this;if(!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return n.eventsListeners?(e.split(" ").forEach((e=>{void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach(((i,r)=>{(i===t||i.__emitterProxy&&i.__emitterProxy===t)&&n.eventsListeners[e].splice(r,1)}))})),n):n},emit(){const e=this;if(!e.eventsListeners)return e;let t,n,i;for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];"string"==typeof s[0]||Array.isArray(s[0])?(t=s[0],n=s.slice(1,s.length),i=e):(t=s[0].events,n=s[0].data,i=s[0].context||e),n.unshift(i);return(Array.isArray(t)?t:t.split(" ")).forEach((t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach((e=>{e.apply(i,[t,...n])})),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach((e=>{e.apply(i,n)}))})),e}};const cl={updateSize:function(){const e=this;let t,n;const i=e.$el;t=void 0!==e.params.width&&null!==e.params.width?e.params.width:i[0].clientWidth,n=void 0!==e.params.height&&null!==e.params.height?e.params.height:i[0].clientHeight,0===t&&e.isHorizontal()||0===n&&e.isVertical()||(t=t-parseInt(i.css("padding-left")||0,10)-parseInt(i.css("padding-right")||0,10),n=n-parseInt(i.css("padding-top")||0,10)-parseInt(i.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))},updateSlides:function(){const e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}const i=e.params,{$wrapperEl:r,size:s,rtlTranslate:a,wrongRTL:o}=e,l=e.virtual&&i.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,h=r.children(`.${e.params.slideClass}`),u=l?e.virtual.slides.length:h.length;let d=[];const p=[],f=[];let m=i.slidesOffsetBefore;"function"==typeof m&&(m=i.slidesOffsetBefore.call(e));let g=i.slidesOffsetAfter;"function"==typeof g&&(g=i.slidesOffsetAfter.call(e));const v=e.snapGrid.length,y=e.slidesGrid.length;let _=i.spaceBetween,b=-m,x=0,S=0;if(void 0===s)return;"string"==typeof _&&_.indexOf("%")>=0&&(_=parseFloat(_.replace("%",""))/100*s),e.virtualSize=-_,a?h.css({marginLeft:"",marginBottom:"",marginTop:""}):h.css({marginRight:"",marginBottom:"",marginTop:""}),i.centeredSlides&&i.cssMode&&(el(e.wrapperEl,"--swiper-centered-offset-before",""),el(e.wrapperEl,"--swiper-centered-offset-after",""));const E=i.grid&&i.grid.rows>1&&e.grid;let w;E&&e.grid.initSlides(u);const T="auto"===i.slidesPerView&&i.breakpoints&&Object.keys(i.breakpoints).filter((e=>void 0!==i.breakpoints[e].slidesPerView)).length>0;for(let r=0;r<u;r+=1){w=0;const a=h.eq(r);if(E&&e.grid.updateSlide(r,a,u,t),"none"!==a.css("display")){if("auto"===i.slidesPerView){T&&(h[r].style[t("width")]="");const s=getComputedStyle(a[0]),o=a[0].style.transform,l=a[0].style.webkitTransform;if(o&&(a[0].style.transform="none"),l&&(a[0].style.webkitTransform="none"),i.roundLengths)w=e.isHorizontal()?a.outerWidth(!0):a.outerHeight(!0);else{const e=n(s,"width"),t=n(s,"padding-left"),i=n(s,"padding-right"),r=n(s,"margin-left"),o=n(s,"margin-right"),l=s.getPropertyValue("box-sizing");if(l&&"border-box"===l)w=e+r+o;else{const{clientWidth:n,offsetWidth:s}=a[0];w=e+t+i+r+o+(s-n)}}o&&(a[0].style.transform=o),l&&(a[0].style.webkitTransform=l),i.roundLengths&&(w=Math.floor(w))}else w=(s-(i.slidesPerView-1)*_)/i.slidesPerView,i.roundLengths&&(w=Math.floor(w)),h[r]&&(h[r].style[t("width")]=`${w}px`);h[r]&&(h[r].swiperSlideSize=w),f.push(w),i.centeredSlides?(b=b+w/2+x/2+_,0===x&&0!==r&&(b=b-s/2-_),0===r&&(b=b-s/2-_),Math.abs(b)<.001&&(b=0),i.roundLengths&&(b=Math.floor(b)),S%i.slidesPerGroup==0&&d.push(b),p.push(b)):(i.roundLengths&&(b=Math.floor(b)),(S-Math.min(e.params.slidesPerGroupSkip,S))%e.params.slidesPerGroup==0&&d.push(b),p.push(b),b=b+w+_),e.virtualSize+=w+_,x=w,S+=1}}if(e.virtualSize=Math.max(e.virtualSize,s)+g,a&&o&&("slide"===i.effect||"coverflow"===i.effect)&&r.css({width:`${e.virtualSize+i.spaceBetween}px`}),i.setWrapperSize&&r.css({[t("width")]:`${e.virtualSize+i.spaceBetween}px`}),E&&e.grid.updateWrapperSize(w,d,t),!i.centeredSlides){const t=[];for(let n=0;n<d.length;n+=1){let r=d[n];i.roundLengths&&(r=Math.floor(r)),d[n]<=e.virtualSize-s&&t.push(r)}d=t,Math.floor(e.virtualSize-s)-Math.floor(d[d.length-1])>1&&d.push(e.virtualSize-s)}if(0===d.length&&(d=[0]),0!==i.spaceBetween){const n=e.isHorizontal()&&a?"marginLeft":t("marginRight");h.filter(((e,t)=>!i.cssMode||t!==h.length-1)).css({[n]:`${_}px`})}if(i.centeredSlides&&i.centeredSlidesBounds){let e=0;f.forEach((t=>{e+=t+(i.spaceBetween?i.spaceBetween:0)})),e-=i.spaceBetween;const t=e-s;d=d.map((e=>e<0?-m:e>t?t+g:e))}if(i.centerInsufficientSlides){let e=0;if(f.forEach((t=>{e+=t+(i.spaceBetween?i.spaceBetween:0)})),e-=i.spaceBetween,e<s){const t=(s-e)/2;d.forEach(((e,n)=>{d[n]=e-t})),p.forEach(((e,n)=>{p[n]=e+t}))}}if(Object.assign(e,{slides:h,snapGrid:d,slidesGrid:p,slidesSizesGrid:f}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){el(e.wrapperEl,"--swiper-centered-offset-before",-d[0]+"px"),el(e.wrapperEl,"--swiper-centered-offset-after",e.size/2-f[f.length-1]/2+"px");const t=-e.snapGrid[0],n=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((e=>e+t)),e.slidesGrid=e.slidesGrid.map((e=>e+n))}if(u!==c&&e.emit("slidesLengthChange"),d.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==y&&e.emit("slidesGridLengthChange"),i.watchSlidesProgress&&e.updateSlidesOffset(),!(l||i.cssMode||"slide"!==i.effect&&"fade"!==i.effect)){const t=`${i.containerModifierClass}backface-hidden`,n=e.$el.hasClass(t);u<=i.maxBackfaceHiddenSlides?n||e.$el.addClass(t):n&&e.$el.removeClass(t)}},updateAutoHeight:function(e){const t=this,n=[],i=t.virtual&&t.params.virtual.enabled;let r,s=0;"number"==typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const a=e=>i?t.slides.filter((t=>parseInt(t.getAttribute("data-swiper-slide-index"),10)===e))[0]:t.slides.eq(e)[0];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)t.visibleSlides.each((e=>{n.push(e)}));else for(r=0;r<Math.ceil(t.params.slidesPerView);r+=1){const e=t.activeIndex+r;if(e>t.slides.length&&!i)break;n.push(a(e))}else n.push(a(t.activeIndex));for(r=0;r<n.length;r+=1)if(void 0!==n[r]){const e=n[r].offsetHeight;s=e>s?e:s}(s||0===s)&&t.$wrapperEl.css("height",`${s}px`)},updateSlidesOffset:function(){const e=this,t=e.slides;for(let n=0;n<t.length;n+=1)t[n].swiperSlideOffset=e.isHorizontal()?t[n].offsetLeft:t[n].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const t=this,n=t.params,{slides:i,rtlTranslate:r,snapGrid:s}=t;if(0===i.length)return;void 0===i[0].swiperSlideOffset&&t.updateSlidesOffset();let a=-e;r&&(a=e),i.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(let e=0;e<i.length;e+=1){const o=i[e];let l=o.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(l-=i[0].swiperSlideOffset);const c=(a+(n.centeredSlides?t.minTranslate():0)-l)/(o.swiperSlideSize+n.spaceBetween),h=(a-s[0]+(n.centeredSlides?t.minTranslate():0)-l)/(o.swiperSlideSize+n.spaceBetween),u=-(a-l),d=u+t.slidesSizesGrid[e];(u>=0&&u<t.size-1||d>1&&d<=t.size||u<=0&&d>=t.size)&&(t.visibleSlides.push(o),t.visibleSlidesIndexes.push(e),i.eq(e).addClass(n.slideVisibleClass)),o.progress=r?-c:c,o.originalProgress=r?-h:h}t.visibleSlides=Xo(t.visibleSlides)},updateProgress:function(e){const t=this;if(void 0===e){const n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}const n=t.params,i=t.maxTranslate()-t.minTranslate();let{progress:r,isBeginning:s,isEnd:a}=t;const o=s,l=a;0===i?(r=0,s=!0,a=!0):(r=(e-t.minTranslate())/i,s=r<=0,a=r>=1),Object.assign(t,{progress:r,isBeginning:s,isEnd:a}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),s&&!o&&t.emit("reachBeginning toEdge"),a&&!l&&t.emit("reachEnd toEdge"),(o&&!s||l&&!a)&&t.emit("fromEdge"),t.emit("progress",r)},updateSlidesClasses:function(){const e=this,{slides:t,params:n,$wrapperEl:i,activeIndex:r,realIndex:s}=e,a=e.virtual&&n.virtual.enabled;let o;t.removeClass(`${n.slideActiveClass} ${n.slideNextClass} ${n.slidePrevClass} ${n.slideDuplicateActiveClass} ${n.slideDuplicateNextClass} ${n.slideDuplicatePrevClass}`),o=a?e.$wrapperEl.find(`.${n.slideClass}[data-swiper-slide-index="${r}"]`):t.eq(r),o.addClass(n.slideActiveClass),n.loop&&(o.hasClass(n.slideDuplicateClass)?i.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${s}"]`).addClass(n.slideDuplicateActiveClass):i.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${s}"]`).addClass(n.slideDuplicateActiveClass));let l=o.nextAll(`.${n.slideClass}`).eq(0).addClass(n.slideNextClass);n.loop&&0===l.length&&(l=t.eq(0),l.addClass(n.slideNextClass));let c=o.prevAll(`.${n.slideClass}`).eq(0).addClass(n.slidePrevClass);n.loop&&0===c.length&&(c=t.eq(-1),c.addClass(n.slidePrevClass)),n.loop&&(l.hasClass(n.slideDuplicateClass)?i.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass):i.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass),c.hasClass(n.slideDuplicateClass)?i.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass):i.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass)),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{slidesGrid:i,snapGrid:r,params:s,activeIndex:a,realIndex:o,snapIndex:l}=t;let c,h=e;if(void 0===h){for(let e=0;e<i.length;e+=1)void 0!==i[e+1]?n>=i[e]&&n<i[e+1]-(i[e+1]-i[e])/2?h=e:n>=i[e]&&n<i[e+1]&&(h=e+1):n>=i[e]&&(h=e);s.normalizeSlideIndex&&(h<0||void 0===h)&&(h=0)}if(r.indexOf(n)>=0)c=r.indexOf(n);else{const e=Math.min(s.slidesPerGroupSkip,h);c=e+Math.floor((h-e)/s.slidesPerGroup)}if(c>=r.length&&(c=r.length-1),h===a)return void(c!==l&&(t.snapIndex=c,t.emit("snapIndexChange")));const u=parseInt(t.slides.eq(h).attr("data-swiper-slide-index")||h,10);Object.assign(t,{snapIndex:c,realIndex:u,previousIndex:a,activeIndex:h}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),o!==u&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")},updateClickedSlide:function(e){const t=this,n=t.params,i=Xo(e).closest(`.${n.slideClass}`)[0];let r,s=!1;if(i)for(let e=0;e<t.slides.length;e+=1)if(t.slides[e]===i){s=!0,r=e;break}if(!i||!s)return t.clickedSlide=void 0,void(t.clickedIndex=void 0);t.clickedSlide=i,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(Xo(i).attr("data-swiper-slide-index"),10):t.clickedIndex=r,n.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}};const hl={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const{params:t,rtlTranslate:n,translate:i,$wrapperEl:r}=this;if(t.virtualTranslate)return n?-i:i;if(t.cssMode)return i;let s=Ko(r[0],e);return n&&(s=-s),s||0},setTranslate:function(e,t){const n=this,{rtlTranslate:i,params:r,$wrapperEl:s,wrapperEl:a,progress:o}=n;let l,c=0,h=0;n.isHorizontal()?c=i?-e:e:h=e,r.roundLengths&&(c=Math.floor(c),h=Math.floor(h)),r.cssMode?a[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-c:-h:r.virtualTranslate||s.transform(`translate3d(${c}px, ${h}px, 0px)`),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?c:h;const u=n.maxTranslate()-n.minTranslate();l=0===u?0:(e-n.minTranslate())/u,l!==o&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,i,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===i&&(i=!0);const s=this,{params:a,wrapperEl:o}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let h;if(h=i&&e>l?l:i&&e<c?c:e,s.updateProgress(h),a.cssMode){const e=s.isHorizontal();if(0===t)o[e?"scrollLeft":"scrollTop"]=-h;else{if(!s.support.smoothScroll)return tl({swiper:s,targetPosition:-h,side:e?"left":"top"}),!0;o.scrollTo({[e?"left":"top"]:-h,behavior:"smooth"})}return!0}return 0===t?(s.setTransition(0),s.setTranslate(h),n&&(s.emit("beforeTransitionStart",t,r),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(h),n&&(s.emit("beforeTransitionStart",t,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,n&&s.emit("transitionEnd"))}),s.$wrapperEl[0].addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd))),!0}};function ul(e){let{swiper:t,runCallbacks:n,direction:i,step:r}=e;const{activeIndex:s,previousIndex:a}=t;let o=i;if(o||(o=s>a?"next":s<a?"prev":"reset"),t.emit(`transition${r}`),n&&s!==a){if("reset"===o)return void t.emit(`slideResetTransition${r}`);t.emit(`slideChangeTransition${r}`),"next"===o?t.emit(`slideNextTransition${r}`):t.emit(`slidePrevTransition${r}`)}}const dl={slideTo:function(e,t,n,i,r){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"number"!=typeof e&&"string"!=typeof e)throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof e}] given.`);if("string"==typeof e){const t=parseInt(e,10);if(!isFinite(t))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=t}const s=this;let a=e;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:h,activeIndex:u,rtlTranslate:d,wrapperEl:p,enabled:f}=s;if(s.animating&&o.preventInteractionOnTransition||!f&&!i&&!r)return!1;const m=Math.min(s.params.slidesPerGroupSkip,a);let g=m+Math.floor((a-m)/s.params.slidesPerGroup);g>=l.length&&(g=l.length-1),(u||o.initialSlide||0)===(h||0)&&n&&s.emit("beforeSlideChangeStart");const v=-l[g];if(s.updateProgress(v),o.normalizeSlideIndex)for(let e=0;e<c.length;e+=1){const t=-Math.floor(100*v),n=Math.floor(100*c[e]),i=Math.floor(100*c[e+1]);void 0!==c[e+1]?t>=n&&t<i-(i-n)/2?a=e:t>=n&&t<i&&(a=e+1):t>=n&&(a=e)}if(s.initialized&&a!==u){if(!s.allowSlideNext&&v<s.translate&&v<s.minTranslate())return!1;if(!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(u||0)!==a)return!1}let y;if(y=a>u?"next":a<u?"prev":"reset",d&&-v===s.translate||!d&&v===s.translate)return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==o.effect&&s.setTranslate(v),"reset"!==y&&(s.transitionStart(n,y),s.transitionEnd(n,y)),!1;if(o.cssMode){const e=s.isHorizontal(),n=d?v:-v;if(0===t){const t=s.virtual&&s.params.virtual.enabled;t&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),p[e?"scrollLeft":"scrollTop"]=n,t&&requestAnimationFrame((()=>{s.wrapperEl.style.scrollSnapType="",s._swiperImmediateVirtual=!1}))}else{if(!s.support.smoothScroll)return tl({swiper:s,targetPosition:n,side:e?"left":"top"}),!0;p.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}return s.setTransition(t),s.setTranslate(v),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,i),s.transitionStart(n,y),0===t?s.transitionEnd(n,y):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,y))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,n,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0);const r=this;let s=e;return r.params.loop&&(s+=r.loopedSlides),r.slideTo(s,t,n,i)},slideNext:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const i=this,{animating:r,enabled:s,params:a}=i;if(!s)return i;let o=a.slidesPerGroup;"auto"===a.slidesPerView&&1===a.slidesPerGroup&&a.slidesPerGroupAuto&&(o=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<a.slidesPerGroupSkip?1:o;if(a.loop){if(r&&a.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}return a.rewind&&i.isEnd?i.slideTo(0,e,t,n):i.slideTo(i.activeIndex+l,e,t,n)},slidePrev:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const i=this,{params:r,animating:s,snapGrid:a,slidesGrid:o,rtlTranslate:l,enabled:c}=i;if(!c)return i;if(r.loop){if(s&&r.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}function h(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const u=h(l?i.translate:-i.translate),d=a.map((e=>h(e)));let p=a[d.indexOf(u)-1];if(void 0===p&&r.cssMode){let e;a.forEach(((t,n)=>{u>=t&&(e=n)})),void 0!==e&&(p=a[e>0?e-1:e])}let f=0;if(void 0!==p&&(f=o.indexOf(p),f<0&&(f=i.activeIndex-1),"auto"===r.slidesPerView&&1===r.slidesPerGroup&&r.slidesPerGroupAuto&&(f=f-i.slidesPerViewDynamic("previous",!0)+1,f=Math.max(f,0))),r.rewind&&i.isBeginning){const r=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(r,e,t,n)}return i.slideTo(f,e,t,n)},slideReset:function(e,t,n){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(e,t,n,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===i&&(i=.5);const r=this;let s=r.activeIndex;const a=Math.min(r.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){const e=r.snapGrid[o];l-e>(r.snapGrid[o+1]-e)*i&&(s+=r.params.slidesPerGroup)}else{const e=r.snapGrid[o-1];l-e<=(r.snapGrid[o]-e)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,e,t,n)},slideToClickedSlide:function(){const e=this,{params:t,$wrapperEl:n}=e,i="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let r,s=e.clickedIndex;if(t.loop){if(e.animating)return;r=parseInt(Xo(e.clickedSlide).attr("data-swiper-slide-index"),10),t.centeredSlides?s<e.loopedSlides-i/2||s>e.slides.length-e.loopedSlides+i/2?(e.loopFix(),s=n.children(`.${t.slideClass}[data-swiper-slide-index="${r}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),Yo((()=>{e.slideTo(s)}))):e.slideTo(s):s>e.slides.length-i?(e.loopFix(),s=n.children(`.${t.slideClass}[data-swiper-slide-index="${r}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),Yo((()=>{e.slideTo(s)}))):e.slideTo(s)}else e.slideTo(s)}};const pl={loopCreate:function(){const e=this,t=No(),{params:n,$wrapperEl:i}=e,r=i.children().length>0?Xo(i.children()[0].parentNode):i;r.children(`.${n.slideClass}.${n.slideDuplicateClass}`).remove();let s=r.children(`.${n.slideClass}`);if(n.loopFillGroupWithBlank){const e=n.slidesPerGroup-s.length%n.slidesPerGroup;if(e!==n.slidesPerGroup){for(let i=0;i<e;i+=1){const e=Xo(t.createElement("div")).addClass(`${n.slideClass} ${n.slideBlankClass}`);r.append(e)}s=r.children(`.${n.slideClass}`)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=s.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>s.length&&(e.loopedSlides=s.length);const a=[],o=[];s.each(((t,n)=>{const i=Xo(t);n<e.loopedSlides&&o.push(t),n<s.length&&n>=s.length-e.loopedSlides&&a.push(t),i.attr("data-swiper-slide-index",n)}));for(let e=0;e<o.length;e+=1)r.append(Xo(o[e].cloneNode(!0)).addClass(n.slideDuplicateClass));for(let e=a.length-1;e>=0;e-=1)r.prepend(Xo(a[e].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){const e=this;e.emit("beforeLoopFix");const{activeIndex:t,slides:n,loopedSlides:i,allowSlidePrev:r,allowSlideNext:s,snapGrid:a,rtlTranslate:o}=e;let l;e.allowSlidePrev=!0,e.allowSlideNext=!0;const c=-a[t]-e.getTranslate();if(t<i){l=n.length-3*i+t,l+=i;e.slideTo(l,0,!1,!0)&&0!==c&&e.setTranslate((o?-e.translate:e.translate)-c)}else if(t>=n.length-i){l=-n.length+t+i,l+=i;e.slideTo(l,0,!1,!0)&&0!==c&&e.setTranslate((o?-e.translate:e.translate)-c)}e.allowSlidePrev=r,e.allowSlideNext=s,e.emit("loopFix")},loopDestroy:function(){const{$wrapperEl:e,params:t,slides:n}=this;e.children(`.${t.slideClass}.${t.slideDuplicateClass},.${t.slideClass}.${t.slideBlankClass}`).remove(),n.removeAttr("data-swiper-slide-index")}};function fl(e){const t=this,n=No(),i=zo(),r=t.touchEventsData,{params:s,touches:a,enabled:o}=t;if(!o)return;if(t.animating&&s.preventInteractionOnTransition)return;!t.animating&&s.cssMode&&s.loop&&t.loopFix();let l=e;l.originalEvent&&(l=l.originalEvent);let c=Xo(l.target);if("wrapper"===s.touchEventsTarget&&!c.closest(t.wrapperEl).length)return;if(r.isTouchEvent="touchstart"===l.type,!r.isTouchEvent&&"which"in l&&3===l.which)return;if(!r.isTouchEvent&&"button"in l&&l.button>0)return;if(r.isTouched&&r.isMoved)return;!!s.noSwipingClass&&""!==s.noSwipingClass&&l.target&&l.target.shadowRoot&&e.path&&e.path[0]&&(c=Xo(e.path[0]));const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,u=!(!l.target||!l.target.shadowRoot);if(s.noSwiping&&(u?function(e,t){return void 0===t&&(t=this),function t(n){return n&&n!==No()&&n!==zo()?(n.assignedSlot&&(n=n.assignedSlot),n.closest(e)||t(n.getRootNode().host)):null}(t)}(h,l.target):c.closest(h)[0]))return void(t.allowClick=!0);if(s.swipeHandler&&!c.closest(s.swipeHandler)[0])return;a.currentX="touchstart"===l.type?l.targetTouches[0].pageX:l.pageX,a.currentY="touchstart"===l.type?l.targetTouches[0].pageY:l.pageY;const d=a.currentX,p=a.currentY,f=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,m=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(f&&(d<=m||d>=i.innerWidth-m)){if("prevent"!==f)return;e.preventDefault()}if(Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=d,a.startY=p,r.touchStartTime=$o(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1),"touchstart"!==l.type){let e=!0;c.is(r.focusableElements)&&(e=!1,"SELECT"===c[0].nodeName&&(r.isTouched=!1)),n.activeElement&&Xo(n.activeElement).is(r.focusableElements)&&n.activeElement!==c[0]&&n.activeElement.blur();const i=e&&t.allowTouchMove&&s.touchStartPreventDefault;!s.touchStartForcePreventDefault&&!i||c[0].isContentEditable||l.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!s.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",l)}function ml(e){const t=No(),n=this,i=n.touchEventsData,{params:r,touches:s,rtlTranslate:a,enabled:o}=n;if(!o)return;let l=e;if(l.originalEvent&&(l=l.originalEvent),!i.isTouched)return void(i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",l));if(i.isTouchEvent&&"touchmove"!==l.type)return;const c="touchmove"===l.type&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),h="touchmove"===l.type?c.pageX:l.pageX,u="touchmove"===l.type?c.pageY:l.pageY;if(l.preventedByNestedSwiper)return s.startX=h,void(s.startY=u);if(!n.allowTouchMove)return Xo(l.target).is(i.focusableElements)||(n.allowClick=!1),void(i.isTouched&&(Object.assign(s,{startX:h,startY:u,currentX:h,currentY:u}),i.touchStartTime=$o()));if(i.isTouchEvent&&r.touchReleaseOnEdges&&!r.loop)if(n.isVertical()){if(u<s.startY&&n.translate<=n.maxTranslate()||u>s.startY&&n.translate>=n.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(h<s.startX&&n.translate<=n.maxTranslate()||h>s.startX&&n.translate>=n.minTranslate())return;if(i.isTouchEvent&&t.activeElement&&l.target===t.activeElement&&Xo(l.target).is(i.focusableElements))return i.isMoved=!0,void(n.allowClick=!1);if(i.allowTouchCallbacks&&n.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=h,s.currentY=u;const d=s.currentX-s.startX,p=s.currentY-s.startY;if(n.params.threshold&&Math.sqrt(d**2+p**2)<n.params.threshold)return;if(void 0===i.isScrolling){let e;n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:d*d+p*p>=25&&(e=180*Math.atan2(Math.abs(p),Math.abs(d))/Math.PI,i.isScrolling=n.isHorizontal()?e>r.touchAngle:90-e>r.touchAngle)}if(i.isScrolling&&n.emit("touchMoveOpposite",l),void 0===i.startMoving&&(s.currentX===s.startX&&s.currentY===s.startY||(i.startMoving=!0)),i.isScrolling)return void(i.isTouched=!1);if(!i.startMoving)return;n.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation(),i.isMoved||(r.loop&&!r.cssMode&&n.loopFix(),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!r.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",l)),n.emit("sliderMove",l),i.isMoved=!0;let f=n.isHorizontal()?d:p;s.diff=f,f*=r.touchRatio,a&&(f=-f),n.swipeDirection=f>0?"prev":"next",i.currentTranslate=f+i.startTranslate;let m=!0,g=r.resistanceRatio;if(r.touchReleaseOnEdges&&(g=0),f>0&&i.currentTranslate>n.minTranslate()?(m=!1,r.resistance&&(i.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+i.startTranslate+f)**g)):f<0&&i.currentTranslate<n.maxTranslate()&&(m=!1,r.resistance&&(i.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-i.startTranslate-f)**g)),m&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),n.allowSlidePrev||n.allowSlideNext||(i.currentTranslate=i.startTranslate),r.threshold>0){if(!(Math.abs(f)>r.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,void(s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY)}r.followFinger&&!r.cssMode&&((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}function gl(e){const t=this,n=t.touchEventsData,{params:i,touches:r,rtlTranslate:s,slidesGrid:a,enabled:o}=t;if(!o)return;let l=e;if(l.originalEvent&&(l=l.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",l),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&i.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);i.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const c=$o(),h=c-n.touchStartTime;if(t.allowClick){const e=l.path||l.composedPath&&l.composedPath();t.updateClickedSlide(e&&e[0]||l.target),t.emit("tap click",l),h<300&&c-n.lastClickTime<300&&t.emit("doubleTap doubleClick",l)}if(n.lastClickTime=$o(),Yo((()=>{t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===r.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let u;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,u=i.followFinger?s?t.translate:-t.translate:-n.currentTranslate,i.cssMode)return;if(t.params.freeMode&&i.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:u});let d=0,p=t.slidesSizesGrid[0];for(let e=0;e<a.length;e+=e<i.slidesPerGroupSkip?1:i.slidesPerGroup){const t=e<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;void 0!==a[e+t]?u>=a[e]&&u<a[e+t]&&(d=e,p=a[e+t]-a[e]):u>=a[e]&&(d=e,p=a[a.length-1]-a[a.length-2])}let f=null,m=null;i.rewind&&(t.isBeginning?m=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(f=0));const g=(u-a[d])/p,v=d<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(h>i.longSwipesMs){if(!i.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(g>=i.longSwipesRatio?t.slideTo(i.rewind&&t.isEnd?f:d+v):t.slideTo(d)),"prev"===t.swipeDirection&&(g>1-i.longSwipesRatio?t.slideTo(d+v):null!==m&&g<0&&Math.abs(g)>i.longSwipesRatio?t.slideTo(m):t.slideTo(d))}else{if(!i.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(l.target===t.navigation.nextEl||l.target===t.navigation.prevEl)?l.target===t.navigation.nextEl?t.slideTo(d+v):t.slideTo(d):("next"===t.swipeDirection&&t.slideTo(null!==f?f:d+v),"prev"===t.swipeDirection&&t.slideTo(null!==m?m:d))}}function vl(){const e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=e;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=r,e.allowSlideNext=i,e.params.watchOverflow&&s!==e.snapGrid&&e.checkOverflow()}function yl(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function _l(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:i}=e;if(!i)return;let r;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const s=e.maxTranslate()-e.minTranslate();r=0===s?0:(e.translate-e.minTranslate())/s,r!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}let bl=!1;function xl(){}const Sl=(e,t)=>{const n=No(),{params:i,touchEvents:r,el:s,wrapperEl:a,device:o,support:l}=e,c=!!i.nested,h="on"===t?"addEventListener":"removeEventListener",u=t;if(l.touch){const t=!("touchstart"!==r.start||!l.passiveListener||!i.passiveListeners)&&{passive:!0,capture:!1};s[h](r.start,e.onTouchStart,t),s[h](r.move,e.onTouchMove,l.passiveListener?{passive:!1,capture:c}:c),s[h](r.end,e.onTouchEnd,t),r.cancel&&s[h](r.cancel,e.onTouchEnd,t)}else s[h](r.start,e.onTouchStart,!1),n[h](r.move,e.onTouchMove,c),n[h](r.end,e.onTouchEnd,!1);(i.preventClicks||i.preventClicksPropagation)&&s[h]("click",e.onClick,!0),i.cssMode&&a[h]("scroll",e.onScroll),i.updateOnWindowResize?e[u](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",vl,!0):e[u]("observerUpdate",vl,!0)};const El={attachEvents:function(){const e=this,t=No(),{params:n,support:i}=e;e.onTouchStart=fl.bind(e),e.onTouchMove=ml.bind(e),e.onTouchEnd=gl.bind(e),n.cssMode&&(e.onScroll=_l.bind(e)),e.onClick=yl.bind(e),i.touch&&!bl&&(t.addEventListener("touchstart",xl),bl=!0),Sl(e,"on")},detachEvents:function(){Sl(this,"off")}},wl=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;const Tl={setBreakpoint:function(){const e=this,{activeIndex:t,initialized:n,loopedSlides:i=0,params:r,$el:s}=e,a=r.breakpoints;if(!a||a&&0===Object.keys(a).length)return;const o=e.getBreakpoint(a,e.params.breakpointsBase,e.el);if(!o||e.currentBreakpoint===o)return;const l=(o in a?a[o]:void 0)||e.originalParams,c=wl(e,r),h=wl(e,l),u=r.enabled;c&&!h?(s.removeClass(`${r.containerModifierClass}grid ${r.containerModifierClass}grid-column`),e.emitContainerClasses()):!c&&h&&(s.addClass(`${r.containerModifierClass}grid`),(l.grid.fill&&"column"===l.grid.fill||!l.grid.fill&&"column"===r.grid.fill)&&s.addClass(`${r.containerModifierClass}grid-column`),e.emitContainerClasses());const d=l.direction&&l.direction!==r.direction,p=r.loop&&(l.slidesPerView!==r.slidesPerView||d);d&&n&&e.changeDirection(),Jo(e.params,l);const f=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),u&&!f?e.disable():!u&&f&&e.enable(),e.currentBreakpoint=o,e.emit("_beforeBreakpoint",l),p&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-i+e.loopedSlides,0,!1)),e.emit("breakpoint",l)},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),!e||"container"===t&&!n)return;let i=!1;const r=zo(),s="window"===t?r.innerHeight:n.clientHeight,a=Object.keys(e).map((e=>{if("string"==typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:s*t,point:e}}return{value:e,point:e}}));a.sort(((e,t)=>parseInt(e.value,10)-parseInt(t.value,10)));for(let e=0;e<a.length;e+=1){const{point:s,value:o}=a[e];"window"===t?r.matchMedia(`(min-width: ${o}px)`).matches&&(i=s):o<=n.clientWidth&&(i=s)}return i||"max"}};const Ml={addClasses:function(){const e=this,{classNames:t,params:n,rtl:i,$el:r,device:s,support:a}=e,o=function(e,t){const n=[];return e.forEach((e=>{"object"==typeof e?Object.keys(e).forEach((i=>{e[i]&&n.push(t+i)})):"string"==typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"pointer-events":!a.touch},{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:i},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:s.android},{ios:s.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides}],n.containerModifierClass);t.push(...o),r.addClass([...t].join(" ")),e.emitContainerClasses()},removeClasses:function(){const{$el:e,classNames:t}=this;e.removeClass(t.join(" ")),this.emitContainerClasses()}};const Al={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function Pl(e,t){return function(n){void 0===n&&(n={});const i=Object.keys(n)[0],r=n[i];"object"==typeof r&&null!==r?(["navigation","pagination","scrollbar"].indexOf(i)>=0&&!0===e[i]&&(e[i]={auto:!0}),i in e&&"enabled"in r?(!0===e[i]&&(e[i]={enabled:!0}),"object"!=typeof e[i]||"enabled"in e[i]||(e[i].enabled=!0),e[i]||(e[i]={enabled:!1}),Jo(t,n)):Jo(t,n)):Jo(t,n)}}const Cl={eventsEmitter:ll,update:cl,translate:hl,transition:{setTransition:function(e,t){const n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);const n=this,{params:i}=n;i.cssMode||(i.autoHeight&&n.updateAutoHeight(),ul({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);const n=this,{params:i}=n;n.animating=!1,i.cssMode||(n.setTransition(0),ul({swiper:n,runCallbacks:e,direction:t,step:"End"}))}},slide:dl,loop:pl,grabCursor:{setGrabCursor:function(e){const t=this;if(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;n.style.cursor="move",n.style.cursor=e?"grabbing":"grab"},unsetGrabCursor:function(){const e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}},events:El,breakpoints:Tl,checkOverflow:{checkOverflow:function(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:i}=n;if(i){const t=e.slides.length-1,n=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*i;e.isLocked=e.size>n}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:Ml,images:{loadImage:function(e,t,n,i,r,s){const a=zo();let o;function l(){s&&s()}Xo(e).parent("picture")[0]||e.complete&&r?l():t?(o=new a.Image,o.onload=l,o.onerror=l,i&&(o.sizes=i),n&&(o.srcset=n),t&&(o.src=t)):l()},preloadImages:function(){const e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(let n=0;n<e.imagesToLoad.length;n+=1){const i=e.imagesToLoad[n];e.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,t)}}}},Il={};class Ll{constructor(){let e,t;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];if(1===i.length&&i[0].constructor&&"Object"===Object.prototype.toString.call(i[0]).slice(8,-1)?t=i[0]:[e,t]=i,t||(t={}),t=Jo({},t),e&&!t.el&&(t.el=e),t.el&&Xo(t.el).length>1){const e=[];return Xo(t.el).each((n=>{const i=Jo({},t,{el:n});e.push(new Ll(i))})),e}const s=this;s.__swiper__=!0,s.support=sl(),s.device=al({userAgent:t.userAgent}),s.browser=ol(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],t.modules&&Array.isArray(t.modules)&&s.modules.push(...t.modules);const a={};s.modules.forEach((e=>{e({swiper:s,extendParams:Pl(t,a),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})}));const o=Jo({},Al,a);return s.params=Jo({},o,Il,t),s.originalParams=Jo({},s.params),s.passedParams=Jo({},t),s.params&&s.params.on&&Object.keys(s.params.on).forEach((e=>{s.on(e,s.params.on[e])})),s.params&&s.params.onAny&&s.onAny(s.params.onAny),s.$=Xo,Object.assign(s,{enabled:s.params.enabled,el:e,classNames:[],slides:Xo(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===s.params.direction,isVertical:()=>"vertical"===s.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEvents:function(){const e=["touchstart","touchmove","touchend","touchcancel"],t=["pointerdown","pointermove","pointerup"];return s.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},s.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},s.support.touch||!s.params.simulateTouch?s.touchEventsTouch:s.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:$o(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const i=n.minTranslate(),r=(n.maxTranslate()-i)*e+i;n.translateTo(r,void 0===t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter((t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return e.className.split(" ").filter((e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass))).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.each((n=>{const i=e.getSlideClasses(n);t.push({slideEl:n,classNames:i}),e.emit("_slideClass",n,i)})),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const{params:n,slides:i,slidesGrid:r,slidesSizesGrid:s,size:a,activeIndex:o}=this;let l=1;if(n.centeredSlides){let e,t=i[o].swiperSlideSize;for(let n=o+1;n<i.length;n+=1)i[n]&&!e&&(t+=i[n].swiperSlideSize,l+=1,t>a&&(e=!0));for(let n=o-1;n>=0;n-=1)i[n]&&!e&&(t+=i[n].swiperSlideSize,l+=1,t>a&&(e=!0))}else if("current"===e)for(let e=o+1;e<i.length;e+=1){(t?r[e]+s[e]-r[o]<a:r[e]-r[o]<a)&&(l+=1)}else for(let e=o-1;e>=0;e-=1){r[o]-r[e]<a&&(l+=1)}return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;function i(){const t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}let r;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode&&e.params.freeMode.enabled?(i(),e.params.autoHeight&&e.updateAutoHeight()):(r=("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),r||i()),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const n=this,i=n.params.direction;return e||(e="horizontal"===i?"vertical":"horizontal"),e===i||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass(`${n.params.containerModifierClass}${i}`).addClass(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.each((t=>{"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}mount(e){const t=this;if(t.mounted)return!0;const n=Xo(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;const i=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let r=(()=>{if(e&&e.shadowRoot&&e.shadowRoot.querySelector){const t=Xo(e.shadowRoot.querySelector(i()));return t.children=e=>n.children(e),t}return n.children(i())})();if(0===r.length&&t.params.createElements){const e=No().createElement("div");r=Xo(e),e.className=t.params.wrapperClass,n.append(e),n.children(`.${t.params.slideClass}`).each((e=>{r.append(e)}))}return Object.assign(t,{$el:n,el:e,$wrapperEl:r,wrapperEl:r[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===r.css("display")}),!0}init(e){const t=this;if(t.initialized)return t;return!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const n=this,{params:i,$el:r,$wrapperEl:s,slides:a}=n;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),i.loop&&n.loopDestroy(),t&&(n.removeClasses(),r.removeAttr("style"),s.removeAttr("style"),a&&a.length&&a.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((e=>{n.off(e)})),!1!==e&&(n.$el[0].swiper=null,function(e){const t=e;Object.keys(t).forEach((e=>{try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))}(n)),n.destroyed=!0),null}static extendDefaults(e){Jo(Il,e)}static get extendedDefaults(){return Il}static get defaults(){return Al}static installModule(e){Ll.prototype.__modules__||(Ll.prototype.__modules__=[]);const t=Ll.prototype.__modules__;"function"==typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach((e=>Ll.installModule(e))),Ll):(Ll.installModule(e),Ll)}}Object.keys(Cl).forEach((e=>{Object.keys(Cl[e]).forEach((t=>{Ll.prototype[t]=Cl[e][t]}))})),Ll.use([function(e){let{swiper:t,on:n,emit:i}=e;const r=zo();let s=null,a=null;const o=()=>{t&&!t.destroyed&&t.initialized&&(i("beforeResize"),i("resize"))},l=()=>{t&&!t.destroyed&&t.initialized&&i("orientationchange")};n("init",(()=>{t.params.resizeObserver&&void 0!==r.ResizeObserver?t&&!t.destroyed&&t.initialized&&(s=new ResizeObserver((e=>{a=r.requestAnimationFrame((()=>{const{width:n,height:i}=t;let r=n,s=i;e.forEach((e=>{let{contentBoxSize:n,contentRect:i,target:a}=e;a&&a!==t.el||(r=i?i.width:(n[0]||n).inlineSize,s=i?i.height:(n[0]||n).blockSize)})),r===n&&s===i||o()}))})),s.observe(t.el)):(r.addEventListener("resize",o),r.addEventListener("orientationchange",l))})),n("destroy",(()=>{a&&r.cancelAnimationFrame(a),s&&s.unobserve&&t.el&&(s.unobserve(t.el),s=null),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",l)}))},function(e){let{swiper:t,extendParams:n,on:i,emit:r}=e;const s=[],a=zo(),o=function(e,t){void 0===t&&(t={});const n=new(a.MutationObserver||a.WebkitMutationObserver)((e=>{if(1===e.length)return void r("observerUpdate",e[0]);const t=function(){r("observerUpdate",e[0])};a.requestAnimationFrame?a.requestAnimationFrame(t):a.setTimeout(t,0)}));n.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),s.push(n)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",(()=>{if(t.params.observer){if(t.params.observeParents){const e=t.$el.parents();for(let t=0;t<e.length;t+=1)o(e[t])}o(t.$el[0],{childList:t.params.observeSlideChildren}),o(t.$wrapperEl[0],{attributes:!1})}})),i("destroy",(()=>{s.forEach((e=>{e.disconnect()})),s.splice(0,s.length)}))}]);const Dl=Ll;function Rl(e){let{swiper:t,extendParams:n,on:i,emit:r}=e;const s=zo();let a;n({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}}),t.mousewheel={enabled:!1};let o,l=$o();const c=[];function h(){t.enabled&&(t.mouseEntered=!0)}function u(){t.enabled&&(t.mouseEntered=!1)}function d(e){return!(t.params.mousewheel.thresholdDelta&&e.delta<t.params.mousewheel.thresholdDelta)&&(!(t.params.mousewheel.thresholdTime&&$o()-l<t.params.mousewheel.thresholdTime)&&(e.delta>=6&&$o()-l<60||(e.direction<0?t.isEnd&&!t.params.loop||t.animating||(t.slideNext(),r("scroll",e.raw)):t.isBeginning&&!t.params.loop||t.animating||(t.slidePrev(),r("scroll",e.raw)),l=(new s.Date).getTime(),!1)))}function p(e){let n=e,i=!0;if(!t.enabled)return;const s=t.params.mousewheel;t.params.cssMode&&n.preventDefault();let l=t.$el;if("container"!==t.params.mousewheel.eventsTarget&&(l=Xo(t.params.mousewheel.eventsTarget)),!t.mouseEntered&&!l[0].contains(n.target)&&!s.releaseOnEdges)return!0;n.originalEvent&&(n=n.originalEvent);let h=0;const u=t.rtlTranslate?-1:1,p=function(e){let t=0,n=0,i=0,r=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),i=10*t,r=10*n,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(i=e.deltaX),e.shiftKey&&!i&&(i=r,r=0),(i||r)&&e.deltaMode&&(1===e.deltaMode?(i*=40,r*=40):(i*=800,r*=800)),i&&!t&&(t=i<1?-1:1),r&&!n&&(n=r<1?-1:1),{spinX:t,spinY:n,pixelX:i,pixelY:r}}(n);if(s.forceToAxis)if(t.isHorizontal()){if(!(Math.abs(p.pixelX)>Math.abs(p.pixelY)))return!0;h=-p.pixelX*u}else{if(!(Math.abs(p.pixelY)>Math.abs(p.pixelX)))return!0;h=-p.pixelY}else h=Math.abs(p.pixelX)>Math.abs(p.pixelY)?-p.pixelX*u:-p.pixelY;if(0===h)return!0;s.invert&&(h=-h);let f=t.getTranslate()+h*s.sensitivity;if(f>=t.minTranslate()&&(f=t.minTranslate()),f<=t.maxTranslate()&&(f=t.maxTranslate()),i=!!t.params.loop||!(f===t.minTranslate()||f===t.maxTranslate()),i&&t.params.nested&&n.stopPropagation(),t.params.freeMode&&t.params.freeMode.enabled){const e={time:$o(),delta:Math.abs(h),direction:Math.sign(h)},i=o&&e.time<o.time+500&&e.delta<=o.delta&&e.direction===o.direction;if(!i){o=void 0,t.params.loop&&t.loopFix();let l=t.getTranslate()+h*s.sensitivity;const u=t.isBeginning,d=t.isEnd;if(l>=t.minTranslate()&&(l=t.minTranslate()),l<=t.maxTranslate()&&(l=t.maxTranslate()),t.setTransition(0),t.setTranslate(l),t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses(),(!u&&t.isBeginning||!d&&t.isEnd)&&t.updateSlidesClasses(),t.params.freeMode.sticky){clearTimeout(a),a=void 0,c.length>=15&&c.shift();const n=c.length?c[c.length-1]:void 0,i=c[0];if(c.push(e),n&&(e.delta>n.delta||e.direction!==n.direction))c.splice(0);else if(c.length>=15&&e.time-i.time<500&&i.delta-e.delta>=1&&e.delta<=6){const n=h>0?.8:.2;o=e,c.splice(0),a=Yo((()=>{t.slideToClosest(t.params.speed,!0,void 0,n)}),0)}a||(a=Yo((()=>{o=e,c.splice(0),t.slideToClosest(t.params.speed,!0,void 0,.5)}),500))}if(i||r("scroll",n),t.params.autoplay&&t.params.autoplayDisableOnInteraction&&t.autoplay.stop(),l===t.minTranslate()||l===t.maxTranslate())return!0}}else{const n={time:$o(),delta:Math.abs(h),direction:Math.sign(h),raw:e};c.length>=2&&c.shift();const i=c.length?c[c.length-1]:void 0;if(c.push(n),i?(n.direction!==i.direction||n.delta>i.delta||n.time>i.time+150)&&d(n):d(n),function(e){const n=t.params.mousewheel;if(e.direction<0){if(t.isEnd&&!t.params.loop&&n.releaseOnEdges)return!0}else if(t.isBeginning&&!t.params.loop&&n.releaseOnEdges)return!0;return!1}(n))return!0}return n.preventDefault?n.preventDefault():n.returnValue=!1,!1}function f(e){let n=t.$el;"container"!==t.params.mousewheel.eventsTarget&&(n=Xo(t.params.mousewheel.eventsTarget)),n[e]("mouseenter",h),n[e]("mouseleave",u),n[e]("wheel",p)}function m(){return t.params.cssMode?(t.wrapperEl.removeEventListener("wheel",p),!0):!t.mousewheel.enabled&&(f("on"),t.mousewheel.enabled=!0,!0)}function g(){return t.params.cssMode?(t.wrapperEl.addEventListener(event,p),!0):!!t.mousewheel.enabled&&(f("off"),t.mousewheel.enabled=!1,!0)}i("init",(()=>{!t.params.mousewheel.enabled&&t.params.cssMode&&g(),t.params.mousewheel.enabled&&m()})),i("destroy",(()=>{t.params.cssMode&&m(),t.mousewheel.enabled&&g()})),Object.assign(t.mousewheel,{enable:m,disable:g})}function kl(e){let{swiper:t,extendParams:n,on:i,emit:r}=e;function s(e){let n;return e&&(n=Xo(e),t.params.uniqueNavElements&&"string"==typeof e&&n.length>1&&1===t.$el.find(e).length&&(n=t.$el.find(e))),n}function a(e,n){const i=t.params.navigation;e&&e.length>0&&(e[n?"addClass":"removeClass"](i.disabledClass),e[0]&&"BUTTON"===e[0].tagName&&(e[0].disabled=n),t.params.watchOverflow&&t.enabled&&e[t.isLocked?"addClass":"removeClass"](i.lockClass))}function o(){if(t.params.loop)return;const{$nextEl:e,$prevEl:n}=t.navigation;a(n,t.isBeginning&&!t.params.rewind),a(e,t.isEnd&&!t.params.rewind)}function l(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&t.slidePrev()}function c(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&t.slideNext()}function h(){const e=t.params.navigation;if(t.params.navigation=function(e,t,n,i){const r=No();return e.params.createElements&&Object.keys(i).forEach((s=>{if(!n[s]&&!0===n.auto){let a=e.$el.children(`.${i[s]}`)[0];a||(a=r.createElement("div"),a.className=i[s],e.$el.append(a)),n[s]=a,t[s]=a}})),n}(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!e.nextEl&&!e.prevEl)return;const n=s(e.nextEl),i=s(e.prevEl);n&&n.length>0&&n.on("click",c),i&&i.length>0&&i.on("click",l),Object.assign(t.navigation,{$nextEl:n,nextEl:n&&n[0],$prevEl:i,prevEl:i&&i[0]}),t.enabled||(n&&n.addClass(e.lockClass),i&&i.addClass(e.lockClass))}function u(){const{$nextEl:e,$prevEl:n}=t.navigation;e&&e.length&&(e.off("click",c),e.removeClass(t.params.navigation.disabledClass)),n&&n.length&&(n.off("click",l),n.removeClass(t.params.navigation.disabledClass))}n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}}),t.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null},i("init",(()=>{h(),o()})),i("toEdge fromEdge lock unlock",(()=>{o()})),i("destroy",(()=>{u()})),i("enable disable",(()=>{const{$nextEl:e,$prevEl:n}=t.navigation;e&&e[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass),n&&n[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass)})),i("click",((e,n)=>{const{$nextEl:i,$prevEl:s}=t.navigation,a=n.target;if(t.params.navigation.hideOnClick&&!Xo(a).is(s)&&!Xo(a).is(i)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===a||t.pagination.el.contains(a)))return;let e;i?e=i.hasClass(t.params.navigation.hiddenClass):s&&(e=s.hasClass(t.params.navigation.hiddenClass)),r(!0===e?"navigationShow":"navigationHide"),i&&i.toggleClass(t.params.navigation.hiddenClass),s&&s.toggleClass(t.params.navigation.hiddenClass)}})),Object.assign(t.navigation,{update:o,init:h,destroy:u})}function Ol(e){return void 0===e&&(e=""),`.${e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function Fl(e){let{swiper:t,extendParams:n,on:i}=e;n({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}});let r=null;function s(e){const t=r;0!==t.length&&(t.html(""),t.html(e))}function a(e){e.attr("tabIndex","0")}function o(e){e.attr("tabIndex","-1")}function l(e,t){e.attr("role",t)}function c(e,t){e.attr("aria-roledescription",t)}function h(e,t){e.attr("aria-label",t)}function u(e){e.attr("aria-disabled",!0)}function d(e){e.attr("aria-disabled",!1)}function p(e){if(13!==e.keyCode&&32!==e.keyCode)return;const n=t.params.a11y,i=Xo(e.target);t.navigation&&t.navigation.$nextEl&&i.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?s(n.lastSlideMessage):s(n.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&i.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?s(n.firstSlideMessage):s(n.prevSlideMessage)),t.pagination&&i.is(Ol(t.params.pagination.bulletClass))&&i[0].click()}function f(){return t.pagination&&t.pagination.bullets&&t.pagination.bullets.length}function m(){return f()&&t.params.pagination.clickable}const g=(e,t,n)=>{a(e),"BUTTON"!==e[0].tagName&&(l(e,"button"),e.on("keydown",p)),h(e,n),function(e,t){e.attr("aria-controls",t)}(e,t)},v=e=>{const n=e.target.closest(`.${t.params.slideClass}`);if(!n||!t.slides.includes(n))return;const i=t.slides.indexOf(n)===t.activeIndex,r=t.params.watchSlidesProgress&&t.visibleSlides&&t.visibleSlides.includes(n);i||r||t.slideTo(t.slides.indexOf(n),0)};function y(){const e=t.params.a11y;t.$el.append(r);const n=t.$el;e.containerRoleDescriptionMessage&&c(n,e.containerRoleDescriptionMessage),e.containerMessage&&h(n,e.containerMessage);const i=t.$wrapperEl,s=e.id||i.attr("id")||`swiper-wrapper-${a=16,void 0===a&&(a=16),"x".repeat(a).replace(/x/g,(()=>Math.round(16*Math.random()).toString(16)))}`;var a;const o=t.params.autoplay&&t.params.autoplay.enabled?"off":"polite";var u;u=s,i.attr("id",u),function(e,t){e.attr("aria-live",t)}(i,o),e.itemRoleDescriptionMessage&&c(Xo(t.slides),e.itemRoleDescriptionMessage),l(Xo(t.slides),e.slideRole);const d=t.params.loop?t.slides.filter((e=>!e.classList.contains(t.params.slideDuplicateClass))).length:t.slides.length;let f,y;t.slides.each(((n,i)=>{const r=Xo(n),s=t.params.loop?parseInt(r.attr("data-swiper-slide-index"),10):i;h(r,e.slideLabelMessage.replace(/\{\{index\}\}/,s+1).replace(/\{\{slidesLength\}\}/,d))})),t.navigation&&t.navigation.$nextEl&&(f=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(y=t.navigation.$prevEl),f&&f.length&&g(f,s,e.nextSlideMessage),y&&y.length&&g(y,s,e.prevSlideMessage),m()&&t.pagination.$el.on("keydown",Ol(t.params.pagination.bulletClass),p),t.$el.on("focus",v,!0)}i("beforeInit",(()=>{r=Xo(`<span class="${t.params.a11y.notificationClass}" aria-live="assertive" aria-atomic="true"></span>`)})),i("afterInit",(()=>{t.params.a11y.enabled&&y()})),i("fromEdge toEdge afterInit lock unlock",(()=>{t.params.a11y.enabled&&function(){if(t.params.loop||t.params.rewind||!t.navigation)return;const{$nextEl:e,$prevEl:n}=t.navigation;n&&n.length>0&&(t.isBeginning?(u(n),o(n)):(d(n),a(n))),e&&e.length>0&&(t.isEnd?(u(e),o(e)):(d(e),a(e)))}()})),i("paginationUpdate",(()=>{t.params.a11y.enabled&&function(){const e=t.params.a11y;f()&&t.pagination.bullets.each((n=>{const i=Xo(n);t.params.pagination.clickable&&(a(i),t.params.pagination.renderBullet||(l(i,"button"),h(i,e.paginationBulletMessage.replace(/\{\{index\}\}/,i.index()+1)))),i.is(`.${t.params.pagination.bulletActiveClass}`)?i.attr("aria-current","true"):i.removeAttr("aria-current")}))}()})),i("destroy",(()=>{t.params.a11y.enabled&&function(){let e,n;r&&r.length>0&&r.remove(),t.navigation&&t.navigation.$nextEl&&(e=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(n=t.navigation.$prevEl),e&&e.off("keydown",p),n&&n.off("keydown",p),m()&&t.pagination.$el.off("keydown",Ol(t.params.pagination.bulletClass),p),t.$el.off("focus",v,!0)}()}))}function Nl(e){let{swiper:t,extendParams:n,emit:i,once:r}=e;n({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(t,{freeMode:{onTouchStart:function(){const e=t.getTranslate();t.setTranslate(e),t.setTransition(0),t.touchEventsData.velocities.length=0,t.freeMode.onTouchEnd({currentPos:t.rtl?t.translate:-t.translate})},onTouchMove:function(){const{touchEventsData:e,touches:n}=t;0===e.velocities.length&&e.velocities.push({position:n[t.isHorizontal()?"startX":"startY"],time:e.touchStartTime}),e.velocities.push({position:n[t.isHorizontal()?"currentX":"currentY"],time:$o()})},onTouchEnd:function(e){let{currentPos:n}=e;const{params:s,$wrapperEl:a,rtlTranslate:o,snapGrid:l,touchEventsData:c}=t,h=$o()-c.touchStartTime;if(n<-t.minTranslate())t.slideTo(t.activeIndex);else if(n>-t.maxTranslate())t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1);else{if(s.freeMode.momentum){if(c.velocities.length>1){const e=c.velocities.pop(),n=c.velocities.pop(),i=e.position-n.position,r=e.time-n.time;t.velocity=i/r,t.velocity/=2,Math.abs(t.velocity)<s.freeMode.minimumVelocity&&(t.velocity=0),(r>150||$o()-e.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=s.freeMode.momentumVelocityRatio,c.velocities.length=0;let e=1e3*s.freeMode.momentumRatio;const n=t.velocity*e;let h=t.translate+n;o&&(h=-h);let u,d=!1;const p=20*Math.abs(t.velocity)*s.freeMode.momentumBounceRatio;let f;if(h<t.maxTranslate())s.freeMode.momentumBounce?(h+t.maxTranslate()<-p&&(h=t.maxTranslate()-p),u=t.maxTranslate(),d=!0,c.allowMomentumBounce=!0):h=t.maxTranslate(),s.loop&&s.centeredSlides&&(f=!0);else if(h>t.minTranslate())s.freeMode.momentumBounce?(h-t.minTranslate()>p&&(h=t.minTranslate()+p),u=t.minTranslate(),d=!0,c.allowMomentumBounce=!0):h=t.minTranslate(),s.loop&&s.centeredSlides&&(f=!0);else if(s.freeMode.sticky){let e;for(let t=0;t<l.length;t+=1)if(l[t]>-h){e=t;break}h=Math.abs(l[e]-h)<Math.abs(l[e-1]-h)||"next"===t.swipeDirection?l[e]:l[e-1],h=-h}if(f&&r("transitionEnd",(()=>{t.loopFix()})),0!==t.velocity){if(e=o?Math.abs((-h-t.translate)/t.velocity):Math.abs((h-t.translate)/t.velocity),s.freeMode.sticky){const n=Math.abs((o?-h:h)-t.translate),i=t.slidesSizesGrid[t.activeIndex];e=n<i?s.speed:n<2*i?1.5*s.speed:2.5*s.speed}}else if(s.freeMode.sticky)return void t.slideToClosest();s.freeMode.momentumBounce&&d?(t.updateProgress(u),t.setTransition(e),t.setTranslate(h),t.transitionStart(!0,t.swipeDirection),t.animating=!0,a.transitionEnd((()=>{t&&!t.destroyed&&c.allowMomentumBounce&&(i("momentumBounce"),t.setTransition(s.speed),setTimeout((()=>{t.setTranslate(u),a.transitionEnd((()=>{t&&!t.destroyed&&t.transitionEnd()}))}),0))}))):t.velocity?(i("_freeModeNoMomentumRelease"),t.updateProgress(h),t.setTransition(e),t.setTranslate(h),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,a.transitionEnd((()=>{t&&!t.destroyed&&t.transitionEnd()})))):t.updateProgress(h),t.updateActiveIndex(),t.updateSlidesClasses()}else{if(s.freeMode.sticky)return void t.slideToClosest();s.freeMode&&i("_freeModeNoMomentumRelease")}(!s.freeMode.momentum||h>=s.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}}}})}function Bl(e){const t=this,{$wrapperEl:n,params:i}=t;if(i.loop&&t.loopDestroy(),"object"==typeof e&&"length"in e)for(let t=0;t<e.length;t+=1)e[t]&&n.append(e[t]);else n.append(e);i.loop&&t.loopCreate(),i.observer||t.update()}function zl(e){const t=this,{params:n,$wrapperEl:i,activeIndex:r}=t;n.loop&&t.loopDestroy();let s=r+1;if("object"==typeof e&&"length"in e){for(let t=0;t<e.length;t+=1)e[t]&&i.prepend(e[t]);s=r+e.length}else i.prepend(e);n.loop&&t.loopCreate(),n.observer||t.update(),t.slideTo(s,0,!1)}function Ul(e,t){const n=this,{$wrapperEl:i,params:r,activeIndex:s}=n;let a=s;r.loop&&(a-=n.loopedSlides,n.loopDestroy(),n.slides=i.children(`.${r.slideClass}`));const o=n.slides.length;if(e<=0)return void n.prependSlide(t);if(e>=o)return void n.appendSlide(t);let l=a>e?a+1:a;const c=[];for(let t=o-1;t>=e;t-=1){const e=n.slides.eq(t);e.remove(),c.unshift(e)}if("object"==typeof t&&"length"in t){for(let e=0;e<t.length;e+=1)t[e]&&i.append(t[e]);l=a>e?a+t.length:a}else i.append(t);for(let e=0;e<c.length;e+=1)i.append(c[e]);r.loop&&n.loopCreate(),r.observer||n.update(),r.loop?n.slideTo(l+n.loopedSlides,0,!1):n.slideTo(l,0,!1)}function Vl(e){const t=this,{params:n,$wrapperEl:i,activeIndex:r}=t;let s=r;n.loop&&(s-=t.loopedSlides,t.loopDestroy(),t.slides=i.children(`.${n.slideClass}`));let a,o=s;if("object"==typeof e&&"length"in e){for(let n=0;n<e.length;n+=1)a=e[n],t.slides[a]&&t.slides.eq(a).remove(),a<o&&(o-=1);o=Math.max(o,0)}else a=e,t.slides[a]&&t.slides.eq(a).remove(),a<o&&(o-=1),o=Math.max(o,0);n.loop&&t.loopCreate(),n.observer||t.update(),n.loop?t.slideTo(o+t.loopedSlides,0,!1):t.slideTo(o,0,!1)}function Hl(){const e=this,t=[];for(let n=0;n<e.slides.length;n+=1)t.push(n);e.removeSlide(t)}Dl.use([kl,Rl,Nl]);var Gl=".js-card-crosslink__swiper",jl=".js-swiper_nav--next",Wl=".js-swiper_nav--prev";const ql={selector:".js-card-crosslink",Source:function(){function e(t){wa(this,e),this.element=t,this.swiper=this.element.querySelector(Gl),this.navNext=this.element.querySelector(jl),this.navPrev=this.element.querySelector(Wl),this.slideshow=null,this.init()}return Ma(e,[{key:"init",value:function(){this.createCarousel()}},{key:"createCarousel",value:function(){this.slideshow=new Dl(this.swiper,{slidesPerView:1.125,centeredSlides:!1,slidesOffsetAfter:30,spaceBetween:15,a11y:!1,mousewheel:{forceToAxis:!0,sensitivity:1},freeMode:{enabled:!0,sticky:!0,momentumBounce:!1},breakpoints:{768:{spaceBetween:24,slidesPerView:"auto"}},navigation:{nextEl:this.navNext,prevEl:this.navPrev}})}}]),e}()};function Xl(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Yl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yl(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function Yl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var $l=".js-card-inset",Kl=".js-card-inset-content",Zl=function(){function e(t){wa(this,e),this.element=t,this.content=this.element.querySelector(Kl),this.emitter=Ca.UTILS.EMITTER,this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.setHeightVar(),this.emitter.on(Ca.EVENTS.RESIZE,(function(){return e.setHeightVar()}))}},{key:"setHeightVar",value:function(){var e,t=getComputedStyle(this.content),n=(parseInt(t.gap)||0)*this.content.childElementCount,i=0,r=Xl(this.content.children);try{for(r.s();!(e=r.n()).done;){i+=e.value.offsetHeight}}catch(e){r.e(e)}finally{r.f()}this.element.style.setProperty("--content-height","".concat(i+n,"px"))}}]),e}();const Ql={selector:$l,Source:Zl};var Jl=".js-card-video",ec=".js-card-image",tc=".js-card-video-button",nc=".js-card-video-button-play-icon",ic=".js-card-video-button-pause-icon";const rc={selector:".js-card",Source:function(){function e(t){wa(this,e),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.video=this.element.querySelector(Jl),this.noAuto=this.video&&this.video.dataset.noauto?this.video.dataset.noauto:null,this.image=this.element.querySelector(ec),this.videoButton=this.element.querySelector(tc),this.videoButtonPlayIcon=this.element.querySelector(nc),this.videoButtonPauseIcon=this.element.querySelector(ic),this.init(),this.isVideoPlaying=null}return Ma(e,[{key:"init",value:function(){var e=this;this.video&&this.emitter.on(Ca.EVENTS.REDUCED_MOTION_CHANGE,(function(){return e.motionMethod()})),this.setMedia(),this.video&&(this.video.onplaying=function(){e.handleVideoPlaying()},this.video.onended=function(){e.handleVideoPaused()},this.video.onpause=function(){e.handleVideoPaused()}),this.videoButton&&(this.videoButton.onclick=function(t){return e.handleVideoButtonClick(t)})}},{key:"motionMethod",value:function(){this.video&&this.video.classList.remove(Ca.CLASSES.SHOW),this.setMedia()}},{key:"setMedia",value:function(){var e=document.documentElement.classList.contains("reduced-motion");this.video&&!this.noAuto?this.displayVideo({autoplay:!e}):this.image&&this.displayImage()}},{key:"displayVideo",value:function(e){var t=e.autoplay;this.image&&this.image.classList.remove(Ca.CLASSES.SHOW),this.video.autoplay=t,this.video.load(),this.video.classList.add(Ca.CLASSES.SHOW)}},{key:"handleVideoButtonClick",value:function(e){e.preventDefault(),this.isVideoPlaying?this.video.pause():this.video.play()}},{key:"handleVideoPaused",value:function(){this.isVideoPlaying=!1,this.videoButton&&(this.videoButtonPlayIcon.classList.remove(Ca.CLASSES.HIDE),this.videoButtonPauseIcon.classList.add(Ca.CLASSES.HIDE),this.videoButton.ariaLabel="play video")}},{key:"handleVideoPlaying",value:function(){this.isVideoPlaying=!0,this.videoButton&&(this.videoButtonPlayIcon.classList.add(Ca.CLASSES.HIDE),this.videoButtonPauseIcon.classList.remove(Ca.CLASSES.HIDE),this.videoButton.ariaLabel="pause video")}},{key:"displayImage",value:function(){this.video&&this.video.classList.remove(Ca.CLASSES.SHOW),this.image.classList.add(Ca.CLASSES.SHOW)}}]),e}()};const sc={selector:".js-media-image",Source:function(){function e(t){wa(this,e),this.image=t.querySelector("img"),this.image&&this.init()}return Ma(e,[{key:"init",value:function(){var e=this;if("lazy"===this.image.loading||"async"===this.image.decoding){var t=new IntersectionObserver((function(n){n.forEach((function(t){t.isIntersecting&&e.setEagerImage(e.image)})),t.unobserve(e.image)}));t.observe(this.image)}}},{key:"setEagerImage",value:function(e){e.loading="eager",e.decoding="sync";var t,n=e.closest("picture"),i=n.querySelectorAll("source"),r=window.innerWidth<Ca.BREAKPOINTS.mobile;if(0!==i.length&&(t=1===i.length?i[0]:r?n.querySelector("source[media]"):n.querySelector("source:not([media])"))){var s=document.createElement("link");s.rel="preload",s.as="image",r&&"srcmobile"in e.dataset?s.setAttribute("src",e.dataset.srcmobile):s.setAttribute("src",e.src),t.srcset&&s.setAttribute("imagesrcset",t.srcset),t.sizes&&s.setAttribute("imagesizes",t.sizes),document.head.appendChild(s)}}}]),e}()};function ac(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return oc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oc(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function oc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var lc={grid:".js-parallax-grid",parallaxWrapper:".js-parallax-wrapper",media:".js-media-image, .js-media-video"},cc=function(){function e(t){wa(this,e),this.element=t,this.wrappers=this.element.querySelectorAll(lc.parallaxWrapper),this.emitter=Ca.UTILS.EMITTER,this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.calculateSizes(),this.emitter.on(Ca.EVENTS.RESIZE,(function(){return e.calculateSizes()})),this.emitter.on(Ca.EVENTS.IS_MOBILE,(function(t){var n=t.isMobile;e.setAnimations(n)}))}},{key:"setAnimations",value:function(e){var t=Gt.getAll().filter((function(e){return e.trigger.classList.contains(lc.grid.slice(1))}));if(e){var n,i=ac(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,s=r.trigger.querySelectorAll("[data-speed]");r.disable(!0,!1),s.forEach((function(e){e.style.transform="",e.classList.add("transition--in-up")}))}}catch(e){i.e(e)}finally{i.f()}}else{var a,o=ac(t);try{for(o.s();!(a=o.n()).done;){var l=a.value,c=l.trigger.querySelectorAll("[data-speed]");l.enable(),c.forEach((function(e){e.classList.remove("transition--in-up")}))}}catch(e){o.e(e)}finally{o.f()}}}},{key:"calculateSizes",value:function(){var e=this,t=this.element.getBoundingClientRect().top,n=[];this.wrappers.forEach((function(i){var r=i.querySelector(lc.media).getBoundingClientRect(),s=r.height,a=r.top-t,o=e.getTransformY(i);n.push(s+a-o)})),this.element.style.setProperty("--grid-height","".concat(Math.max.apply(Math,n),"px"))}},{key:"getTransformY",value:function(e){var t=getComputedStyle(e),n=t.transform||t.webkitTransform||t.mozTransform,i=n.includes("3d")?"3d":"2d",r=n.match(/matrix.*\((.+)\)/);if(r){var s=r[1].split(", ");if("2d"===i)return s[5];if("3d"===i)return s[13]}return 0}}]),e}();const hc={selector:lc.grid,Source:cc};var uc=".js-social-share",dc=".js-social-share-copy",pc=".js-social-share-expand",fc=".js-social-share-link-copied",mc=".js-social-share-btn-group",gc=".js-social-share__new-window",vc=".js-social-status",yc=function(){function e(t){var n=this;wa(this,e),so(this,"copyText",(function(){navigator.clipboard.writeText(n.contentText),n.showLinkCopiedButton()})),so(this,"handleClick",(function(){n.transitionFlag||("opened"!==n.element.dataset.state?n.expandContent():n.collapseContent())})),so(this,"toggleTabIndex",(function(){"opened"!==n.element.dataset.state?n.tabbableLinks.forEach((function(e){e.setAttribute("tabindex","-1")})):n.tabbableLinks.forEach((function(e){e.removeAttribute("tabindex")}))})),so(this,"expandContent",(function(){n.transitionFlag||(n.expandButton&&(n.expandButton.ariaExpanded=!0,n.expandButton.setAttribute("tabindex","-1")),n.buttonGroup.ariaHidden=!1,n.element.dataset.state="opened",n.toggleTabIndex())})),so(this,"collapseContent",(function(){n.expandButton&&(n.expandButton.ariaExpanded=!1,n.expandButton.removeAttribute("tabindex")),n.buttonGroup.ariaHidden=!0,n.element.dataset.state="closed",n.toggleTabIndex()})),so(this,"showLinkCopiedButton",(function(){n.expandButton&&(n.expandButton.ariaExpanded=!1),n.linkCopiedButton.ariaHidden=!1,n.buttonGroup.ariaHidden=!0,n.element.dataset.state="shared",n.status.innerHTML="Link copied",n.toggleTabIndex(),setTimeout((function(){n.mouseEnterFlag?n.element.addEventListener(Ca.EVENTS.MOUSELEAVE,n.closeAfterCopy):n.closeAfterCopy()}),2e3)})),so(this,"closeAfterCopy",(function(){n.transitionFlag||(n.linkCopiedButton.ariaHidden=!0,n.status.innerHTML="",n.collapseContent(),n.element.removeEventListener(Ca.EVENTS.MOUSELEAVE,n.closeAfterCopy))})),so(this,"openWindow",(function(e,t){e.preventDefault(),window.open(t.href,"targetWindow","toolbar=no,\n       location=no,\n       status=no,\n       menubar=no,\n       scrollbars=yes,\n       resizable=yes,\n       width=550,\n       height=450")})),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.copyButton=this.element.querySelector(dc),this.contentText=this.copyButton.dataset.text,this.expandButton=this.element.querySelector(pc),this.buttonGroup=this.element.querySelector(mc),this.linkCopiedButton=this.element.querySelector(fc),this.newWindowLink=this.element.querySelectorAll(gc),this.status=this.element.querySelector(vc),this.tabbableLinks=this.element.querySelectorAll(".social-share__link"),this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.registerEventHandlers(),Array.from(this.element.children).forEach((function(t,n){e.element.style.setProperty("--item-".concat(n),"".concat(t.offsetWidth,"px"))})),this.element.dataset.state="closed"}},{key:"registerEventHandlers",value:function(){var e=this;navigator.clipboard?this.copyButton.addEventListener(Ca.EVENTS.CLICK,this.copyText):(this.copyButton.remove(),console.info("navigator.clipboard is only available over https")),this.newWindowLink.forEach((function(t){t.addEventListener(Ca.EVENTS.CLICK,(function(n){return e.openWindow(n,t)}))})),this.expandButton&&(this.expandButton.addEventListener(Ca.EVENTS.CLICK,this.handleClick),this.expandButton.addEventListener("touchend",(function(t){t.preventDefault(),e.handleClick()})),this.expandButton.addEventListener(Ca.EVENTS.MOUSEENTER,this.expandContent),this.element.addEventListener(Ca.EVENTS.MOUSELEAVE,this.collapseContent),this.element.addEventListener("focusout",(function(t){e.element.contains(t.relatedTarget)||(e.mouseEnterFlag=!1,e.transitionFlag=!1,e.closeAfterCopy())}))),this.element.addEventListener("transitionstart",(function(){e.transitionFlag=!0})),this.element.addEventListener("transitionend",(function(){e.transitionFlag=!1})),this.element.addEventListener(Ca.EVENTS.MOUSEENTER,(function(){e.mouseEnterFlag=!0})),this.element.addEventListener(Ca.EVENTS.MOUSELEAVE,(function(){e.mouseEnterFlag=!1}))}}]),e}();const _c={selector:uc,Source:yc};var bc=".js-video-player-overlay",xc=".js-video-player-iframe",Sc=".js-video-player-info-container",Ec=".js-video-player__overlay__media-button";const wc={selector:".js-video-player",Source:function(){function e(t){wa(this,e),so(this,"windowIsBlurred",!1),this.element=t,this.iframe=this.element.querySelector(xc),this.overlay=this.element.querySelector(bc),this.videoInfoContainer=this.element.querySelector(Sc),this.videoPlayBtn=this.element.querySelector(Ec),this.mediaButton=this.element.querySelector("".concat(Ec," button")),this.query=window.matchMedia("(min-width: 768px)"),this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.element.addEventListener("mouseenter",(function(){e.mediaButton.classList.add("--hover")})),this.element.addEventListener("mouseleave",(function(){e.mediaButton.classList.remove("--hover")})),this.overlay.addEventListener("click",(function(){e.setPlayingState()})),window.addEventListener("blur",(function(){e.handleWindowBlur()})),window.onmouseover=function(){e.windowIsBlurred&&(window.focus(),e.windowIsBlurred=!1)}}},{key:"handleWindowBlur",value:function(){this.windowIsBlurred=!0,document.activeElement===this.iframe&&this.setPlayingState()}},{key:"setPlayingState",value:function(){this.element.classList.add("-playing"),this.overlay.classList.add(Ca.CLASSES.HIDE),this.overlay.ariaHidden="true",this.iframe.tabIndex=0,this.iframe.ariaHidden="false"}}],[{key:"formatTime",value:function(e){var t="".concat(~~(e/3600)),n="".concat(~~(e%3600/60)),i="".concat(~~e%60),r="",s="";return t>0&&(r+="".concat(t.padStart(2,"0"),":"),s+="".concat(t," hours ")),{formattedDuration:r+="".concat(n.padStart(2,"0"),":").concat(i.padStart(2,"0")),ariaDuration:s+="".concat(n," minutes and ").concat(i," seconds")}}}]),e}()};var Tc=".js-xray__cursor",Mc=".js-xray__foreground",Ac=".js-xray__lens",Pc=".js-xray__view-button",Cc=".js-xray__view-button--mobile",Ic=".js-xray__video",Lc=".js-xray__video-video",Dc=".js-xray__lens-cursor",Rc=".js-xray__description",kc=".js-xray__close",Oc=".js-xray__close-button",Fc=".js-xray-skip-intro",Nc="is_expandable",Bc="xray__container",zc="xray__cursor-result",Uc="xray__disabled",Vc=function(){function e(t){wa(this,e),this.element=t,this.image=this.element.querySelector(Mc),this.cursor=this.element.querySelector(Tc),this.lens=this.element.querySelector(Ac),this.mobileCursor=this.element.querySelector(Dc),this.viewButton=this.element.querySelector(Pc),this.mobileViewButton=this.element.querySelector(Cc),this.videoContainer=this.element.querySelector(Ic),this.video=this.videoContainer.querySelector(Lc),this.description=this.element.querySelector(Rc),this.close=this.element.querySelector(kc),this.closeButton=this.element.querySelector(Oc),this.skipButton=this.element.querySelector(Fc),this.previousLocation=null,this.emitter=Ca.UTILS.EMITTER,this.element.classList.add(Bc),this.referencePoint=null,this.isXrayActive=!1,this.xrayEventsReady=!1,this.xrayDisabled=this.image.classList.contains(Uc)||!1,this.mobileTimeout=null,this.lensSize=288,this.objectContain=this.element.dataset.objectContain||!0,this.viewButtonTop=244,this.viewButtonLeft=0,this.isMobile=!1,this.customPosition=!1,this.imageWidth=null,this.cursorImg=new Image,this.cursorImg.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",this.init()}return Ma(e,[{key:"init",value:function(){this.registerEvents();var e=this.image.dataset.bg;this.cursor.style.backgroundImage="url('".concat(e,"')")}},{key:"registerEvents",value:function(){var e=this;this.skipButton&&(this.skipButton.addEventListener("click",(function(){e.video.currentTime=e.video.duration})),this.video.onplay=function(){e.skipButton.classList.remove(Ca.CLASSES.HIDE)}),this.video.onended=function(){e.videoEnded=!0,e.hideVideo(),e.initImageXray(),e.updateImageXray()},this.emitter.on(Ca.EVENTS.XRAY_IS_DRAGGING,(function(t){var n=t.element,i=t.isDragging;e.element.contains(n)&&e.viewButton&&(i?e.viewButton.classList.add(Ca.CLASSES.HIDE):e.viewButton.classList.remove(Ca.CLASSES.HIDE))})),this.emitter.on(Ca.EVENTS.IS_MOBILE,(function(t){t.isMobile?(e.objectContain=!1,e.isMobile=!0,e.lensSize=209,e.lensSize=209,e.videoEnded&&e.mobileCursor.classList.remove(Ca.CLASSES.HIDE)):(e.objectContain=!0,e.lensSize=288,e.lensSize=288,e.initImageXray())})),this.emitter.on(Ca.EVENTS.RESIZE,(function(){return e.updateImageXray()})),document.addEventListener("dragenter",(function(e){return e.preventDefault()})),document.addEventListener("dragstart",(function(t){e.element.contains(t.target)&&(e.hideDragIcon(t),e.emitter.emit(Ca.EVENTS.XRAY_IS_DRAGGING,{element:e.element,isDragging:!0}))}),!1),document.addEventListener("dragover",(function(t){e.element.contains(t.target)&&(t.preventDefault(),e.handleDrag())})),document.addEventListener("drop",(function(t){e.element.contains(t.target)&&(e.updateImageXray(),e.emitter.emit(Ca.EVENTS.XRAY_IS_DRAGGING,{element:e.element,isDragging:!1}))})),this.lens.addEventListener("touchstart",(function(t){t.preventDefault(),e.hideDragIcon(t),e.emitter.emit(Ca.EVENTS.XRAY_IS_DRAGGING,{element:e.element,isDragging:!0})})),this.lens.addEventListener("touchmove",(function(t){t.preventDefault(),e.handleDrag(),e.emitter.emit(Ca.EVENTS.XRAY_IS_DRAGGING,{element:e.element,isDragging:!1})})),document.addEventListener("mousemove",(function(t){e.element.contains(t.target)&&e.setCursor()})),this.viewButton&&this.lens.addEventListener("click",(function(){e.is_expandable=e.element.getElementsByClassName(Nc),e.is_expandable.length>0&&e.expandImage()})),this.mobileViewButton&&this.mobileViewButton.addEventListener("click",(function(){e.expandImage()})),this.close&&this.closeButton&&this.closeButton.addEventListener("click",(function(){e.closeView()})),this.emitter.on(Ca.EVENTS.XRAY_IS_ACTIVE,(function(t){var n=t.element,i=t.isActive;e.element.contains(n)&&e.description&&(i?(e.description.classList.remove(Ca.CLASSES.HIDE),e.mobileCursor.classList.add(Ca.CLASSES.HIDE)):(e.description.classList.add(Ca.CLASSES.HIDE),e.isMobile&&e.mobileCursor.classList.remove(Ca.CLASSES.HIDE)))}))}},{key:"hideVideo",value:function(){this.videoContainer.classList.add(Ca.CLASSES.HIDE),this.cursor.classList.remove(Ca.CLASSES.HIDE),this.viewButton&&this.viewButton.classList.remove(Ca.CLASSES.HIDE),this.mobileViewButton&&this.mobileViewButton.classList.remove(Ca.CLASSES.HIDE),this.isMobile&&this.mobileCursor.classList.remove(Ca.CLASSES.HIDE)}},{key:"hideDragIcon",value:function(e){e.dataTransfer.setDragImage(this.cursorImg,0,0)}},{key:"initImageXray",value:function(){if(this.customPosition=this.lens.dataset.custom,""!==this.customPosition){var e=document.documentElement.clientHeight>this.element.clientHeight?.5*this.element.clientHeight-200:.5*document.documentElement.clientHeight-200,t=.5*window.innerWidth-180,n=this.element.clientWidth-t-this.lensSize,i=this.element.clientHeight-e-this.lensSize;this.objectContain||(this.imageWidth=this.image.naturalWidth*(document.documentElement.clientHeight/this.image.naturalHeight)),this.lens.style.width="".concat(this.lensSize,"px"),this.lens.style.height="".concat(this.lensSize,"px"),this.lens.style.top="".concat(e,"px"),this.lens.style.left="".concat(t,"px"),this.lens.classList.remove(Ca.CLASSES.ACTIVE),this.cursor.style.clipPath="inset(".concat(e,"px ").concat(n,"px ").concat(i,"px ").concat(t,"px round 8px)"),this.cursor.classList.remove(Ca.CLASSES.ACTIVE),this.viewButton&&(this.viewButton.style.top=e+this.viewButtonTop+"px",this.viewButton.style.left=t+this.viewButtonLeft+"px",this.viewButton.style.width=this.lensSize+"px")}else{var r=document.documentElement.clientHeight>this.element.clientHeight?.5*this.element.clientHeight:.5*document.documentElement.clientHeight,s=.5*window.innerWidth,a=this.element.clientWidth-s-this.lensSize,o=this.element.clientHeight-r-this.lensSize;this.objectContain||(this.imageWidth=this.image.naturalWidth*(document.documentElement.clientHeight/this.image.naturalHeight)),this.lens.style.width="".concat(this.lensSize,"px"),this.lens.style.height="".concat(this.lensSize,"px"),this.lens.style.top="".concat(r,"px"),this.lens.style.left="".concat(s,"px"),this.lens.classList.remove(Ca.CLASSES.ACTIVE),this.cursor.style.clipPath="inset(".concat(r,"px ").concat(a,"px ").concat(o,"px ").concat(s,"px round 8px)"),this.cursor.classList.remove(Ca.CLASSES.ACTIVE),this.viewButton&&(this.viewButton.style.top=r+this.viewButtonTop+"px",this.viewButton.style.left=s+this.viewButtonLeft+"px",this.viewButton.style.width=this.lensSize+"px")}}},{key:"updateImageXray",value:function(){var e=this;this.lens.style.width="".concat(this.lensSize,"px"),this.lens.style.height="".concat(this.lensSize,"px"),this.objectContain?this.imageWidth=this.image.width:this.imageWidth=this.image.naturalWidth*(document.documentElement.clientHeight/this.image.naturalHeight),this.cursor.classList.remove(Ca.CLASSES.DRAGGING);this.xrayEventsReady||(this.image.addEventListener("dragover",(function(){return e.moveLens()})),document.addEventListener("dragover",(function(){e.element.contains(event.target)&&e.moveLens()})),this.lens.addEventListener("touchmove",(function(){return e.moveLens()})),this.xrayEventsReady=!0),this.isXrayActive=!0,e.moveLens()}},{key:"handleDrag",value:function(){var e=this;this.dragReady||(document.addEventListener("dragover",(function(t){e.element.contains(t.target)&&e.moveInitialCursor()})),this.lens.addEventListener("touchmove",(function(){return e.moveInitialCursor()})),this.dragReady=!0),this.mobileViewButton&&this.mobileViewButton.classList.remove(Ca.CLASSES.HIDE),this.close.classList.contains(Ca.CLASSES.HIDE)||this.close.classList.add(Ca.CLASSES.HIDE),this.lens.classList.contains(Ca.CLASSES.HIDE)&&this.lens.classList.remove(Ca.CLASSES.HIDE),this.emitter.emit(Ca.EVENTS.XRAY_IS_ACTIVE,{element:this.element,isActive:!1})}},{key:"handleImageHover",value:function(){if(null!==this.mobileTimeout)return clearTimeout(this.mobileTimeout),void(this.mobileTimeout=null);this.cursor.classList.contains(zc)||(this.updateImageXray(),this.cursor.classList.add(zc))}},{key:"expandImage",value:function(){this.previousLocation=this.cursor.style.clipPath,this.cursor.style.clipPath="",this.lens.classList.add(Ca.CLASSES.HIDE),this.close.classList.remove(Ca.CLASSES.HIDE),this.viewButton&&this.viewButton.classList.add(Ca.CLASSES.HIDE),this.mobileViewButton&&this.mobileViewButton.classList.add(Ca.CLASSES.HIDE),this.emitter.emit(Ca.EVENTS.XRAY_IS_ACTIVE,{element:this.element,isActive:!0})}},{key:"closeView",value:function(){this.cursor.style.clipPath=this.previousLocation,this.lens.classList.remove(Ca.CLASSES.HIDE),this.close.classList.add(Ca.CLASSES.HIDE),this.emitter.emit(Ca.EVENTS.XRAY_IS_ACTIVE,{element:this.element,isActive:!1}),this.viewButton&&this.viewButton.classList.remove(Ca.CLASSES.HIDE),this.mobileViewButton&&this.mobileViewButton.classList.remove(Ca.CLASSES.HIDE),this.description&&this.description.classList.remove(Ca.CLASSES.HIDE),this.emitter.emit(Ca.EVENTS.XRAY_IS_ACTIVE,{element:this.element,isActive:!1})}},{key:"moveLens",value:function(e){if(e&&e.preventDefault(),this.isXrayActive){this.calculateReferencePoint();var t=this.referencePoint[1]-this.lensSize/2,n=this.referencePoint[0]-this.lensSize/2;this.lens.style.top="".concat(t,"px"),this.lens.style.left="".concat(n,"px"),this.viewButton&&(this.viewButton.style.top="".concat(t+this.viewButtonTop,"px"),this.viewButton.style.left="".concat(n+this.viewButtonLeft,"px"))}}},{key:"moveInitialCursor",value:function(){this.calculateReferencePoint();var e=this.referencePoint[1]-this.lensSize/2,t=this.referencePoint[0]-this.lensSize/2,n=this.element.clientWidth-t-this.lensSize,i=this.element.clientHeight-e-this.lensSize;this.cursor.style.clipPath="inset(".concat(e,"px ").concat(n,"px ").concat(i,"px ").concat(t,"px round 8px)"),this.lens.style.cursor="grabbing",this.image.style.cursor="grabbing",this.cursor.classList.add(Ca.CLASSES.DRAGGING),this.emitter.emit(Ca.EVENTS.XRAY_IS_ACTIVE,{element:this.element,isActive:!1})}},{key:"calculateReferencePoint",value:function(){var e={};this.lens?e=this.lens:(e.offsetWidth=0,e.offsetHeight=0);var t=this.getCursorPosition(),n=t.x,i=t.y;this.referencePoint=[n,i]}},{key:"getCursorPosition",value:function(e){var t=0,n=0;e=e||window.event;var i=this.image.getBoundingClientRect();return t=e?e.pageX-i.left:0,n=e?e.pageY-i.top:0,{x:t-=window.pageXOffset,y:n-=window.pageYOffset}}},{key:"setCursor",value:function(){this.calculateReferencePoint();var e=this.referencePoint[1],t=this.lens.offsetTop,n=this.lens.offsetTop+this.lensSize,i=this.referencePoint[0],r=this.lens.offsetLeft,s=this.lens.offsetLeft+this.lensSize;e>=t&&e<=n&&i>=r&&i<=s?(this.lens.style.cursor="grab",this.image.style.cursor="grab"):this.image.style.cursor="initial"}}]),e}();const Hc={selector:".js-xray",Source:Vc};var Gc=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,jc=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,Wc=Math.PI/180,qc=(Math.PI,Math.sin),Xc=Math.cos,Yc=Math.abs,$c=Math.sqrt,Kc=(Math.atan2,function(e){return"number"==typeof e}),Zc=1e5,Qc=function(e){return Math.round(e*Zc)/Zc||0};function Jc(e,t,n,i,r,s,a,o,l){if(e!==o||t!==l){n=Yc(n),i=Yc(i);var c=r%360*Wc,h=Xc(c),u=qc(c),d=Math.PI,p=2*d,f=(e-o)/2,m=(t-l)/2,g=h*f+u*m,v=-u*f+h*m,y=g*g,_=v*v,b=y/(n*n)+_/(i*i);b>1&&(n=$c(b)*n,i=$c(b)*i);var x=n*n,S=i*i,E=(x*S-x*_-S*y)/(x*_+S*y);E<0&&(E=0);var w=(s===a?-1:1)*$c(E),T=w*(n*v/i),M=w*(-i*g/n),A=(e+o)/2+(h*T-u*M),P=(t+l)/2+(u*T+h*M),C=(g-T)/n,I=(v-M)/i,L=(-g-T)/n,D=(-v-M)/i,R=C*C+I*I,k=(I<0?-1:1)*Math.acos(C/$c(R)),O=(C*D-I*L<0?-1:1)*Math.acos((C*L+I*D)/$c(R*(L*L+D*D)));isNaN(O)&&(O=d),!a&&O>0?O-=p:a&&O<0&&(O+=p),k%=p,O%=p;var F,N=Math.ceil(Yc(O)/(p/4)),B=[],z=O/N,U=4/3*qc(z/2)/(1+Xc(z/2)),V=h*n,H=u*n,G=u*-i,j=h*i;for(F=0;F<N;F++)g=Xc(r=k+F*z),v=qc(r),C=Xc(r+=z),I=qc(r),B.push(g-U*v,v+U*g,C+U*I,I-U*C,C,I);for(F=0;F<B.length;F+=2)g=B[F],v=B[F+1],B[F]=g*V+v*G+A,B[F+1]=g*H+v*j+P;return B[F-2]=o,B[F-1]=l,B}}function eh(e){var t,n,i,r,s,a,o,l,c,h,u,d,p,f,m,g=(e+"").replace(jc,(function(e){var t=+e;return t<1e-4&&t>-1e-4?0:t})).match(Gc)||[],v=[],y=0,_=0,b=2/3,x=g.length,S=0,E="ERROR: malformed path: "+e,w=function(e,t,n,i){h=(n-e)/3,u=(i-t)/3,o.push(e+h,t+u,n-h,i-u,n,i)};if(!e||!isNaN(g[0])||isNaN(g[1]))return console.log(E),v;for(t=0;t<x;t++)if(p=s,isNaN(g[t])?a=(s=g[t].toUpperCase())!==g[t]:t--,i=+g[t+1],r=+g[t+2],a&&(i+=y,r+=_),t||(l=i,c=r),"M"===s)o&&(o.length<8?v.length-=1:S+=o.length),y=l=i,_=c=r,o=[i,r],v.push(o),t+=2,s="L";else if("C"===s)o||(o=[0,0]),a||(y=_=0),o.push(i,r,y+1*g[t+3],_+1*g[t+4],y+=1*g[t+5],_+=1*g[t+6]),t+=6;else if("S"===s)h=y,u=_,"C"!==p&&"S"!==p||(h+=y-o[o.length-4],u+=_-o[o.length-3]),a||(y=_=0),o.push(h,u,i,r,y+=1*g[t+3],_+=1*g[t+4]),t+=4;else if("Q"===s)h=y+(i-y)*b,u=_+(r-_)*b,a||(y=_=0),y+=1*g[t+3],_+=1*g[t+4],o.push(h,u,y+(i-y)*b,_+(r-_)*b,y,_),t+=4;else if("T"===s)h=y-o[o.length-4],u=_-o[o.length-3],o.push(y+h,_+u,i+(y+1.5*h-i)*b,r+(_+1.5*u-r)*b,y=i,_=r),t+=2;else if("H"===s)w(y,_,y=i,_),t+=1;else if("V"===s)w(y,_,y,_=i+(a?_-y:0)),t+=1;else if("L"===s||"Z"===s)"Z"===s&&(i=l,r=c,o.closed=!0),("L"===s||Yc(y-i)>.5||Yc(_-r)>.5)&&(w(y,_,i,r),"L"===s&&(t+=2)),y=i,_=r;else if("A"===s){if(f=g[t+4],m=g[t+5],h=g[t+6],u=g[t+7],n=7,f.length>1&&(f.length<3?(u=h,h=m,n--):(u=m,h=f.substr(2),n-=2),m=f.charAt(1),f=f.charAt(0)),d=Jc(y,_,+g[t+1],+g[t+2],+g[t+3],+f,+m,(a?y:0)+1*h,(a?_:0)+1*u),t+=n,d)for(n=0;n<d.length;n++)o.push(d[n]);y=o[o.length-2],_=o[o.length-1]}else console.log(E);return(t=o.length)<6?(v.pop(),t=0):o[0]===o[t-2]&&o[1]===o[t-1]&&(o.closed=!0),v.totalPoints=S+t,v}function th(e){Kc(e[0])&&(e=[e]);var t,n,i,r,s="",a=e.length;for(n=0;n<a;n++){for(r=e[n],s+="M"+Qc(r[0])+","+Qc(r[1])+" C",t=r.length,i=2;i<t;i++)s+=Qc(r[i++])+","+Qc(r[i++])+" "+Qc(r[i++])+","+Qc(r[i++])+" "+Qc(r[i++])+","+Qc(r[i])+" ";r.closed&&(s+="z")}return s}var nh,ih,rh=function(){return nh||"undefined"!=typeof window&&(nh=window.gsap)&&nh.registerPlugin&&nh},sh=function(){(nh=rh())?(nh.registerEase("_CE",hh.create),ih=1):console.warn("Please gsap.registerPlugin(CustomEase)")},ah=function(e){return~~(1e3*e+(e<0?-.5:.5))/1e3},oh=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,lh=/[cLlsSaAhHvVtTqQ]/g,ch=function e(t,n,i,r,s,a,o,l,c,h,u){var d,p=(t+i)/2,f=(n+r)/2,m=(i+s)/2,g=(r+a)/2,v=(s+o)/2,y=(a+l)/2,_=(p+m)/2,b=(f+g)/2,x=(m+v)/2,S=(g+y)/2,E=(_+x)/2,w=(b+S)/2,T=o-t,M=l-n,A=Math.abs((i-o)*M-(r-l)*T),P=Math.abs((s-o)*M-(a-l)*T);return h||(h=[{x:t,y:n},{x:o,y:l}],u=1),h.splice(u||h.length-1,0,{x:E,y:w}),(A+P)*(A+P)>c*(T*T+M*M)&&(d=h.length,e(t,n,p,f,_,b,E,w,c,h,u),e(E,w,x,S,v,y,o,l,c,h,u+1+(h.length-d))),h},hh=function(){function e(e,t,n){ih||sh(),this.id=e,this.setData(t,n)}var t=e.prototype;return t.setData=function(e,t){t=t||{};var n,i,r,s,a,o,l,c,h,u=(e=e||"0,0,1,1").match(oh),d=1,p=[],f=[],m=t.precision||1,g=m<=1;if(this.data=e,(lh.test(e)||~e.indexOf("M")&&e.indexOf("C")<0)&&(u=eh(e)[0]),4===(n=u.length))u.unshift(0,0),u.push(1,1),n=8;else if((n-2)%6)throw"Invalid CustomEase";for(0==+u[0]&&1==+u[n-2]||function(e,t,n){n||0===n||(n=Math.max(+e[e.length-1],+e[1]));var i,r=-1*+e[0],s=-n,a=e.length,o=1/(+e[a-2]+r),l=-t||(Math.abs(+e[a-1]-+e[1])<.01*(+e[a-2]-+e[0])?function(e){var t,n=e.length,i=1e20;for(t=1;t<n;t+=6)+e[t]<i&&(i=+e[t]);return i}(e)+s:+e[a-1]+s);for(l=l?1/l:-o,i=0;i<a;i+=2)e[i]=(+e[i]+r)*o,e[i+1]=(+e[i+1]+s)*l}(u,t.height,t.originY),this.segment=u,s=2;s<n;s+=6)i={x:+u[s-2],y:+u[s-1]},r={x:+u[s+4],y:+u[s+5]},p.push(i,r),ch(i.x,i.y,+u[s],+u[s+1],+u[s+2],+u[s+3],r.x,r.y,1/(2e5*m),p,p.length-1);for(n=p.length,s=0;s<n;s++)l=p[s],c=p[s-1]||l,(l.x>c.x||c.y!==l.y&&c.x===l.x||l===c)&&l.x<=1?(c.cx=l.x-c.x,c.cy=l.y-c.y,c.n=l,c.nx=l.x,g&&s>1&&Math.abs(c.cy/c.cx-p[s-2].cy/p[s-2].cx)>2&&(g=0),c.cx<d&&(c.cx?d=c.cx:(c.cx=.001,s===n-1&&(c.x-=.001,d=Math.min(d,.001),g=0)))):(p.splice(s--,1),n--);if(a=1/(n=1/d+1|0),o=0,l=p[0],g){for(s=0;s<n;s++)h=s*a,l.nx<h&&(l=p[++o]),i=l.y+(h-l.x)/l.cx*l.cy,f[s]={x:h,cx:a,y:i,cy:0,nx:9},s&&(f[s-1].cy=i-f[s-1].y);f[n-1].cy=p[p.length-1].y-i}else{for(s=0;s<n;s++)l.nx<s*a&&(l=p[++o]),f[s]=l;o<p.length-1&&(f[s-1]=p[p.length-2])}return this.ease=function(e){var t=f[e*n|0]||f[n-1];return t.nx<e&&(t=t.n),t.y+(e-t.x)/t.cx*t.cy},this.ease.custom=this,this.id&&nh&&nh.registerEase(this.id,this.ease),this},t.getSVGData=function(t){return e.getSVGData(this,t)},e.create=function(t,n,i){return new e(t,n,i).ease},e.register=function(e){nh=e,sh()},e.get=function(e){return nh.parseEase(e)},e.getSVGData=function(t,n){var i,r,s,a,o,l,c,h,u,d,p=(n=n||{}).width||100,f=n.height||100,m=n.x||0,g=(n.y||0)+f,v=nh.utils.toArray(n.path)[0];if(n.invert&&(f=-f,g=0),"string"==typeof t&&(t=nh.parseEase(t)),t.custom&&(t=t.custom),t instanceof e)i=th(function(e,t,n,i,r,s,a){for(var o,l,c,h,u,d=e.length;--d>-1;)for(l=(o=e[d]).length,c=0;c<l;c+=2)h=o[c],u=o[c+1],o[c]=h*t+u*i+s,o[c+1]=h*n+u*r+a;return e._dirty=1,e}([t.segment],p,0,0,-f,m,g));else{for(i=[m,g],a=1/(c=Math.max(5,200*(n.precision||1))),h=5/(c+=2),u=ah(m+a*p),r=((d=ah(g+t(a)*-f))-g)/(u-m),s=2;s<c;s++)o=ah(m+s*a*p),l=ah(g+t(s*a)*-f),(Math.abs((l-d)/(o-u)-r)>h||s===c-1)&&(i.push(u,d),r=(l-d)/(o-u)),u=o,d=l;i="M"+i.join(",")}return v&&v.setAttribute("d",i),i},e}();rh()&&nh.registerPlugin(hh),hh.version="3.10.3",Ea.registerPlugin(hh);var uh=".adlam-full-width",dh=".js-adlam-full-width__letter",ph=function(){function e(t){wa(this,e),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.letters=this.element.querySelectorAll(dh),this.init()}return Ma(e,[{key:"init",value:function(){this.registerEvents(),this.addLetters()}},{key:"registerEvents",value:function(){var e=this;this.emitter.on(Ca.EVENTS.ELEMENT_IN_VIEWPORT,(function(t){e.triggerAnimation(t)}))}},{key:"addLetters",value:function(){for(var e="".concat(unlocked.theme_dir,"/blocks/adlam_full_width/assets/images/"),t=0;t<9;){t++;var n=document.createElement("img");n.src="".concat(e,"Letter_").concat(t,".png"),n.classList.add("js-adlam-full-width__letter"),n.classList.add("adlam-full-width__letter"),n.classList.add("--".concat(t)),n.dataset.num=t,this.element.appendChild(n)}}},{key:"triggerAnimation",value:function(){var e=this;this.letters=this.element.querySelectorAll(dh),this.letters.forEach((function(t){t.setAttribute("tabindex","-1"),t.setAttribute("aria-hidden","true");var n=t.dataset.num,i=n+10,r=n+9.725,s="".concat(370*n*-1,"%"),a=50*n;n<=5&&(a*=-1),a="".concat(a,"%");var o=Ea.to(t,{duration:i,y:s}),l=Ea.to(t,{duration:r,x:a});document.documentElement.classList.contains("reduced-motion")&&(o.pause(),l.pause()),e.emitter.on(Ca.EVENTS.REDUCED_MOTION_CHANGE,(function(e){e?(o.pause(),l.pause()):(o.play(),l.play())}))}))}}]),e}();const fh={selector:uh,Source:ph};var mh=".js-adlam-home-page__information",gh=".js-adlam-home-page__information__translate",vh=".js-adlam-home-page__information__headline",yh=".js-adlam-home-page__information__headline--title",_h=".js-adlam-home-page__information__headline--title-translation",bh=".js-translation-text";const xh={selector:".js-adlam-home-page",Source:function(){function e(t){wa(this,e),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.information=this.element.querySelector(mh),this.translate=this.element.querySelector(gh),this.headline=this.element.querySelector(vh),this.headlineTitle=this.element.querySelector(yh),this.headlineTranslation=this.element.querySelector(_h),this.translationText=this.element.querySelector(bh),this.query=window.matchMedia("(min-width: 768px)"),this.observer=null,this.init()}return Ma(e,[{key:"init",value:function(){this.registerEvents(),this.translationText.innerHTML=this.translationText.dataset.adlamlabel,document.documentElement.classList.contains("reduced-motion")&&(this.element.classList.remove("-pre"),this.element.classList.remove("-expanded"))}},{key:"registerEvents",value:function(){var e=this;this.emitter.on(Ca.EVENTS.ELEMENT_IN_VIEWPORT,(function(t){t.target===e.information?e.triggerBackground():t.target===e.element&&e.animateImages()})),this.translate.addEventListener("click",this.translateText.bind(this))}},{key:"triggerBackground",value:function(){this.element.classList.add("-color-active")}},{key:"translateText",value:function(){this.information.classList.toggle("-translated");var e=this.information.classList.contains("-translated");this.headlineTitle.setAttribute("aria-hidden",e?"false":"true"),this.headlineTranslation.setAttribute("aria-hidden",e?"true":"false"),this.translationText.innerHTML=e?this.translationText.dataset.englishlabel:this.translationText.dataset.adlamlabel}},{key:"animateImages",value:function(){this.element.classList.remove("-pre")}}]),e}()};Dl.use([Fl,kl,Rl,Nl]);var Sh=".js-adlam-postcards__swiper",Eh=".js-swiper_nav--next",wh=".js-swiper_nav--prev";const Th={selector:".js-adlam-postcards",Source:function(){function e(t){wa(this,e),this.element=t,this.swiper=this.element.querySelector(Sh),this.navNext=this.element.querySelector(Eh),this.navPrev=this.element.querySelector(wh),this.slideshow=null,this.init()}return Ma(e,[{key:"init",value:function(){this.createCarousel()}},{key:"createCarousel",value:function(){this.slideshow=new Dl(this.swiper,{slidesPerView:2.5,centeredSlides:!1,spaceBetween:30,a11y:!0,mousewheel:{forceToAxis:!0,sensitivity:1},freeMode:{enabled:!0,sticky:!0,momentumBounce:!1},navigation:{nextEl:this.navNext,prevEl:this.navPrev}})}}]),e}()};var Mh=".js-all-stories",Ah=".js-all-stories__button",Ph=".js-all-stories__all-stories-toggle",Ch=".js-all-stories__list",Ih=".js-all-stories__load_container",Lh=".js-all-stories__load_btn",Dh=".js-all-stories__load_btn__text",Rh='input[type="radio"]',kh=".js-all-stories__wrapper",Oh=":scope > :not(.all-stories__wrapper__empty)",Fh=".js-all-stories__open",Nh=".js-all-stories__close",Bh=".js-story-card",zh=".js-media-button",Uh=".js-story-card-link",Vh=".js-all-stories-list-title",Hh="-hide",Gh="all-stories__loading-state",jh="all-stories__loading-spinner",Wh=function(){function e(t){wa(this,e),this.element=t,this.loadingContainer=this.element.querySelector(Ih),this.loadBtn=this.element.querySelector(Lh),this.loadBtnText=this.element.querySelector(Dh),this.toggleMenuButton=this.element.querySelector(Ah),this.allStoriesToggle=this.element.querySelector(Ph),this.filterMenu=this.element.querySelector(Ch),this.filterPill=this.filterMenu.querySelectorAll(Rh),this.wrapper=this.element.querySelector(kh),this.openCaret=this.element.querySelector(Fh),this.closeCaret=this.element.querySelector(Nh),this.storiesListTitle=this.element.querySelector(Vh),this.init()}return Ma(e,[{key:"init",value:function(){this.registerEvents(),this.storiesListTitle.innerHTML=this.getStoriesListTitle(this.storiesListTitle.dataset.collection,this.storiesListTitle.dataset.storyCount,this.storiesListTitle.dataset.totalStories)}},{key:"getLoadedItems",value:function(){return this.wrapper.querySelectorAll(Oh)}},{key:"getCategory",value:function(){return[this.filterMenu.querySelector(".all-stories__radio:checked").value]}},{key:"getCategoryName",value:function(){return this.filterMenu.querySelector(".all-stories__radio:checked").labels[0].innerText}},{key:"registerEvents",value:function(){var e=this;this.loadBtn.addEventListener(Ca.EVENTS.CLICK,(function(t){return e.loadPosts(t,"load")})),this.toggleMenuButton.addEventListener(Ca.EVENTS.CLICK,(function(t){return e.toggleFilterMenu(t,"load")})),this.filterPill.forEach((function(t){t.addEventListener("change",(function(t){return e.handleFilter(t)}))}))}},{key:"wpAjaxFetch",value:function(e,t){return fetch(e,{method:"POST",credentials:"same-origin",body:t}).then((function(e){return e.json()})).catch((function(e){console.log("error",e)}))}},{key:"handleFilter",value:function(e){this.loadPosts(e,"filter")}},{key:"toggleLoadBtn",value:function(e){"hide"===e?this.loadBtn.classList.add(Hh):this.loadBtn.classList.remove(Hh)}},{key:"loadAnimation",value:function(){var e=fo().loadAnimation({container:document.querySelector(".".concat(jh)),path:"".concat(unlocked.theme_dir,"/assets/lottie/LoadingSpinner.json"),renderer:"svg",loop:!0,autoplay:!0});return e.isLoaded||e.addEventListener("DOMLoaded",(function(){return e.play})),e}},{key:"addLoadingState",value:function(){var e='\n      <span class="'.concat(Gh,'">\n        <span class="all-stories__loading-state-text">Loading </span>\n        <span class="').concat(jh,'"></span>\n      </span>');this.loadingContainer.innerHTML=e,this.loadAnimation(),this.loadBtn.remove()}},{key:"removeLoadingState",value:function(){var e=this.loadBtn;this.loadingContainer.append(e);var t=document.querySelector(".".concat(Gh));null==t||t.remove()}},{key:"setData",value:function(){var e=this.getCategory();return e.includes("all-stories")?(this.filterPill.forEach((function(t){e.push(t.value)})),{string:"categories",object:e.join(",")}):e.length>0?{string:"categories",object:e.join(",")}:void 0}},{key:"loadPosts",value:function(e,t){var n=this;e.preventDefault(),this.addLoadingState();var i="load"===t?this.getLoadedItems().length:0,r=new FormData;r.append("nonce",this.element.dataset.nonce),r.append("action","unlocked_load_stories"),r.append("offset",i);var s=this.setData(),a=s.string,o=s.object;r.append(a,o),this.wpAjaxFetch(unlocked.ajax_url,r).then((function(e){var i=e.content,r=e.postsRemaining,s=e.totalPosts;if(i)if(i=function(e){return void 0===window.___browserSync___||void 0===location?e:e.replaceAll(/(https?:)?\/\/(msunlocked\.local|(unlocked\.microsoft|unlocked(dev|test|prod)\.wpengine)\.com)/g,location.origin)}(i),"load"===t){var a=n.wrapper.querySelectorAll(Bh),o=a.length;n.wrapper.insertAdjacentHTML("beforeend",i),(a=n.wrapper.querySelectorAll(Bh))[o].querySelector(Uh).focus()}else n.wrapper.innerHTML=i;n.storiesListTitle.innerHTML=n.getStoriesListTitle(n.getCategoryName(),s-r,s),n.removeLoadingState(),r>0?n.toggleLoadBtn("show"):n.toggleLoadBtn("hide"),n.videoCards=n.element.querySelectorAll(zh),n.videoCards.forEach((function(e){new Do.Source(e)}))}))}},{key:"toggleFilterMenu",value:function(){var e=this.toggleMenuButton.getAttribute("aria-expanded");"false"===e?this.toggleMenuButton.setAttribute("aria-expanded","true"):this.toggleMenuButton.setAttribute("aria-expanded","false"),"false"===e?(this.openCaret.classList.add(Hh),this.closeCaret.classList.remove(Hh),this.allStoriesToggle.focus()):"true"===e&&(this.openCaret.classList.remove(Hh),this.closeCaret.classList.add(Hh))}},{key:"getStoriesListTitle",value:function(e,t,n){var i="All Collections"===e?"Stories from all collections":"Stories from the collection ".concat(e),r=t===n?"results ".concat(n):"".concat(t," of ").concat(n);return"".concat(i,": ").concat(r)}}]),e}();const qh={selector:Mh,Source:Wh};const Xh={selector:".js-audio-block",Source:function(){function e(t){wa(this,e),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.registerEvents()}return Ma(e,[{key:"registerEvents",value:function(){var e=this;this.emitter.on(Ca.EVENTS.AUDIO_TRANSCRIPT_TOGGLE,(function(t){var n=t.element;t.isVisible;e.element.contains(n)&&e.element.classList.toggle("-transcript")}))}}]),e}()};function Yh(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function $h(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Yh(e,t,"set"),n),n}function Kh(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Yh(e,t,"get"))}const Zh="160",Qh=100,Jh=300,eu=301,tu=302,nu=303,iu=304,ru=306,su=1e3,au=1001,ou=1002,lu=1003,cu=1004,hu=1005,uu=1006,du=1008,pu=1009,fu=1012,mu=1013,gu=1014,vu=1015,yu=1016,_u=1020,bu=1023,xu=1026,Su=1027,Eu=33776,wu=33777,Tu=33778,Mu=33779,Au=36492,Pu=2300,Cu=2301,Iu=2302,Lu=2400,Du=2401,Ru=2402,ku=3001,Ou="",Fu="srgb",Nu="srgb-linear",Bu="display-p3",zu="display-p3-linear",Uu="linear",Vu="srgb",Hu="rec709",Gu="p3",ju=7680,Wu=35044,qu="300 es",Xu=1035,Yu=2e3,$u=2001;class Ku{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}const Zu=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Qu=Math.PI/180,Ju=180/Math.PI;function ed(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Zu[255&e]+Zu[e>>8&255]+Zu[e>>16&255]+Zu[e>>24&255]+"-"+Zu[255&t]+Zu[t>>8&255]+"-"+Zu[t>>16&15|64]+Zu[t>>24&255]+"-"+Zu[63&n|128]+Zu[n>>8&255]+"-"+Zu[n>>16&255]+Zu[n>>24&255]+Zu[255&i]+Zu[i>>8&255]+Zu[i>>16&255]+Zu[i>>24&255]).toLowerCase()}function td(e,t,n){return Math.max(t,Math.min(n,e))}function nd(e,t){return(e%t+t)%t}function id(e,t,n){return(1-n)*e+n*t}function rd(e){return 0==(e&e-1)&&0!==e}function sd(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function ad(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function od(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}class ld{constructor(e=0,t=0){ld.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(td(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,s=this.y-e.y;return this.x=r*n-s*i+e.x,this.y=r*i+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class cd{constructor(e,t,n,i,r,s,a,o,l){cd.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,s,a,o,l)}set(e,t,n,i,r,s,a,o,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=r,c[5]=o,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],c=n[4],h=n[7],u=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],_=i[7],b=i[2],x=i[5],S=i[8];return r[0]=s*f+a*v+o*b,r[3]=s*m+a*y+o*x,r[6]=s*g+a*_+o*S,r[1]=l*f+c*v+h*b,r[4]=l*m+c*y+h*x,r[7]=l*g+c*_+h*S,r[2]=u*f+d*v+p*b,r[5]=u*m+d*y+p*x,r[8]=u*g+d*_+p*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8];return t*s*c-t*a*l-n*r*c+n*a*o+i*r*l-i*s*o}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],h=c*s-a*l,u=a*o-c*r,d=l*r-s*o,p=t*h+n*u+i*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=h*f,e[1]=(i*l-c*n)*f,e[2]=(a*n-i*s)*f,e[3]=u*f,e[4]=(c*t-i*o)*f,e[5]=(i*r-a*t)*f,e[6]=d*f,e[7]=(n*o-l*t)*f,e[8]=(s*t-n*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,s,a){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*s+l*a)+s+e,-i*l,i*o,-i*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(hd.makeScale(e,t)),this}rotate(e){return this.premultiply(hd.makeRotation(-e)),this}translate(e,t){return this.premultiply(hd.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const hd=new cd;function ud(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function dd(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function pd(){const e=dd("canvas");return e.style.display="block",e}const fd={};function md(e){e in fd||(fd[e]=!0,console.warn(e))}const gd=(new cd).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),vd=(new cd).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),yd={[Nu]:{transfer:Uu,primaries:Hu,toReference:e=>e,fromReference:e=>e},[Fu]:{transfer:Vu,primaries:Hu,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[zu]:{transfer:Uu,primaries:Gu,toReference:e=>e.applyMatrix3(vd),fromReference:e=>e.applyMatrix3(gd)},[Bu]:{transfer:Vu,primaries:Gu,toReference:e=>e.convertSRGBToLinear().applyMatrix3(vd),fromReference:e=>e.applyMatrix3(gd).convertLinearToSRGB()}},_d=new Set([Nu,zu]),bd={enabled:!0,_workingColorSpace:Nu,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!_d.has(e))throw new Error(`Unsupported working color space, "${e}".`);this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const i=yd[t].toReference;return(0,yd[n].fromReference)(i(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return yd[e].primaries},getTransfer:function(e){return e===Ou?Uu:yd[e].transfer}};function xd(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Sd(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let Ed;class wd{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Ed&&(Ed=dd("canvas")),Ed.width=e.width,Ed.height=e.height;const n=Ed.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Ed}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=dd("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*xd(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*xd(t[e]/255)):t[e]=xd(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Td=0;class Md{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Td++}),this.uuid=ed(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(Ad(i[t].image)):e.push(Ad(i[t]))}else e=Ad(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function Ad(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?wd.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Pd=0;class Cd extends Ku{constructor(e=Cd.DEFAULT_IMAGE,t=Cd.DEFAULT_MAPPING,n=1001,i=1001,r=1006,s=1008,a=1023,o=1009,l=Cd.DEFAULT_ANISOTROPY,c=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Pd++}),this.uuid=ed(),this.name="",this.source=new Md(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new ld(0,0),this.repeat=new ld(1,1),this.center=new ld(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new cd,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof c?this.colorSpace=c:(md("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===ku?Fu:Ou),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Jh)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case su:e.x=e.x-Math.floor(e.x);break;case au:e.x=e.x<0?0:1;break;case ou:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case su:e.y=e.y-Math.floor(e.y);break;case au:e.y=e.y<0?0:1;break;case ou:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return md("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Fu?ku:3e3}set encoding(e){md("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===ku?Fu:Ou}}Cd.DEFAULT_IMAGE=null,Cd.DEFAULT_MAPPING=Jh,Cd.DEFAULT_ANISOTROPY=1;class Id{constructor(e=0,t=0,n=0,i=1){Id.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*t+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*t+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*t+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const s=.01,a=.1,o=e.elements,l=o[0],c=o[4],h=o[8],u=o[1],d=o[5],p=o[9],f=o[2],m=o[6],g=o[10];if(Math.abs(c-u)<s&&Math.abs(h-f)<s&&Math.abs(p-m)<s){if(Math.abs(c+u)<a&&Math.abs(h+f)<a&&Math.abs(p+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(d+1)/2,v=(g+1)/2,y=(c+u)/4,_=(h+f)/4,b=(p+m)/4;return e>o&&e>v?e<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=y/n,r=_/n):o>v?o<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=y/i,r=b/i):v<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=_/r,i=b/r),this.set(n,i,r,t),this}let v=Math.sqrt((m-p)*(m-p)+(h-f)*(h-f)+(u-c)*(u-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(h-f)/v,this.z=(u-c)/v,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ld extends Ku{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Id(0,0,e,t),this.scissorTest=!1,this.viewport=new Id(0,0,e,t);const i={width:e,height:t,depth:1};void 0!==n.encoding&&(md("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===ku?Fu:Ou),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:uu,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new Cd(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Md(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Dd extends Ld{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Rd extends Cd{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=lu,this.minFilter=lu,this.wrapR=au,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class kd extends Cd{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=lu,this.minFilter=lu,this.wrapR=au,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Od{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,s,a){let o=n[i+0],l=n[i+1],c=n[i+2],h=n[i+3];const u=r[s+0],d=r[s+1],p=r[s+2],f=r[s+3];if(0===a)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=h);if(1===a)return e[t+0]=u,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(h!==f||o!==u||l!==d||c!==p){let e=1-a;const t=o*u+l*d+c*p+h*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,t*n);e=Math.sin(e*s)/r,a=Math.sin(a*s)/r}const r=a*n;if(o=o*e+u*r,l=l*e+d*r,c=c*e+p*r,h=h*e+f*r,e===1-a){const e=1/Math.sqrt(o*o+l*l+c*c+h*h);o*=e,l*=e,c*=e,h*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,i,r,s){const a=n[i],o=n[i+1],l=n[i+2],c=n[i+3],h=r[s],u=r[s+1],d=r[s+2],p=r[s+3];return e[t]=a*p+c*h+o*d-l*u,e[t+1]=o*p+c*u+l*h-a*d,e[t+2]=l*p+c*d+a*u-o*h,e[t+3]=c*p-a*h-o*u-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,r=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(i/2),h=a(r/2),u=o(n/2),d=o(i/2),p=o(r/2);switch(s){case"XYZ":this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p;break;case"YXZ":this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p;break;case"ZXY":this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p;break;case"ZYX":this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p;break;case"YZX":this._x=u*c*h+l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h-u*d*p;break;case"XZY":this._x=u*c*h-l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h+u*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],s=t[1],a=t[5],o=t[9],l=t[2],c=t[6],h=t[10],u=n+a+h;if(u>0){const e=.5/Math.sqrt(u+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(s-i)*e}else if(n>a&&n>h){const e=2*Math.sqrt(1+n-a-h);this._w=(c-o)/e,this._x=.25*e,this._y=(i+s)/e,this._z=(r+l)/e}else if(a>h){const e=2*Math.sqrt(1+a-n-h);this._w=(r-l)/e,this._x=(i+s)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+h-n-a);this._w=(s-i)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(td(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,s=e._w,a=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+s*a+i*l-r*o,this._y=i*c+s*o+r*a-n*l,this._z=r*c+s*l+n*o-i*a,this._w=s*c-n*a-i*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,s=this._w;let a=s*e._w+n*e._x+i*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const o=1-a*a;if(o<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this}const l=Math.sqrt(o),c=Math.atan2(l,a),h=Math.sin((1-t)*c)/l,u=Math.sin(t*c)/l;return this._w=s*h+this._w*u,this._x=n*h+this._x*u,this._y=i*h+this._y*u,this._z=r*h+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Fd{constructor(e=0,t=0,n=0){Fd.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Bd.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Bd.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,s=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,s=e.y,a=e.z,o=e.w,l=2*(s*i-a*n),c=2*(a*t-r*i),h=2*(r*n-s*t);return this.x=t+o*l+s*h-a*c,this.y=n+o*c+a*l-r*h,this.z=i+o*h+r*c-s*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,s=t.x,a=t.y,o=t.z;return this.x=i*o-r*a,this.y=r*s-n*o,this.z=n*a-i*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Nd.copy(this).projectOnVector(e),this.sub(Nd)}reflect(e){return this.sub(Nd.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(td(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Nd=new Fd,Bd=new Od;class zd{constructor(e=new Fd(1/0,1/0,1/0),t=new Fd(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Vd.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Vd.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Vd.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,n=i.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,Vd):Vd.fromBufferAttribute(i,t),Vd.applyMatrix4(e.matrixWorld),this.expandByPoint(Vd);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Hd.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Hd.copy(n.boundingBox)),Hd.applyMatrix4(e.matrixWorld),this.union(Hd)}const i=e.children;for(let e=0,n=i.length;e<n;e++)this.expandByObject(i[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Vd),Vd.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter($d),Kd.subVectors(this.max,$d),Gd.subVectors(e.a,$d),jd.subVectors(e.b,$d),Wd.subVectors(e.c,$d),qd.subVectors(jd,Gd),Xd.subVectors(Wd,jd),Yd.subVectors(Gd,Wd);let t=[0,-qd.z,qd.y,0,-Xd.z,Xd.y,0,-Yd.z,Yd.y,qd.z,0,-qd.x,Xd.z,0,-Xd.x,Yd.z,0,-Yd.x,-qd.y,qd.x,0,-Xd.y,Xd.x,0,-Yd.y,Yd.x,0];return!!Jd(t,Gd,jd,Wd,Kd)&&(t=[1,0,0,0,1,0,0,0,1],!!Jd(t,Gd,jd,Wd,Kd)&&(Zd.crossVectors(qd,Xd),t=[Zd.x,Zd.y,Zd.z],Jd(t,Gd,jd,Wd,Kd)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Vd).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Vd).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Ud[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ud[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ud[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ud[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ud[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ud[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ud[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ud[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ud)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ud=[new Fd,new Fd,new Fd,new Fd,new Fd,new Fd,new Fd,new Fd],Vd=new Fd,Hd=new zd,Gd=new Fd,jd=new Fd,Wd=new Fd,qd=new Fd,Xd=new Fd,Yd=new Fd,$d=new Fd,Kd=new Fd,Zd=new Fd,Qd=new Fd;function Jd(e,t,n,i,r){for(let s=0,a=e.length-3;s<=a;s+=3){Qd.fromArray(e,s);const a=r.x*Math.abs(Qd.x)+r.y*Math.abs(Qd.y)+r.z*Math.abs(Qd.z),o=t.dot(Qd),l=n.dot(Qd),c=i.dot(Qd);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>a)return!1}return!0}const ep=new zd,tp=new Fd,np=new Fd;class ip{constructor(e=new Fd,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):ep.setFromPoints(e).getCenter(n);let i=0;for(let t=0,r=e.length;t<r;t++)i=Math.max(i,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;tp.subVectors(e,this.center);const t=tp.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(tp,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(np.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(tp.copy(e.center).add(np)),this.expandByPoint(tp.copy(e.center).sub(np))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const rp=new Fd,sp=new Fd,ap=new Fd,op=new Fd,lp=new Fd,cp=new Fd,hp=new Fd;class up{constructor(e=new Fd,t=new Fd(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,rp)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=rp.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(rp.copy(this.origin).addScaledVector(this.direction,t),rp.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){sp.copy(e).add(t).multiplyScalar(.5),ap.copy(t).sub(e).normalize(),op.copy(this.origin).sub(sp);const r=.5*e.distanceTo(t),s=-this.direction.dot(ap),a=op.dot(this.direction),o=-op.dot(ap),l=op.lengthSq(),c=Math.abs(1-s*s);let h,u,d,p;if(c>0)if(h=s*o-a,u=s*a-o,p=r*c,h>=0)if(u>=-p)if(u<=p){const e=1/c;h*=e,u*=e,d=h*(h+s*u+2*a)+u*(s*h+u+2*o)+l}else u=r,h=Math.max(0,-(s*u+a)),d=-h*h+u*(u+2*o)+l;else u=-r,h=Math.max(0,-(s*u+a)),d=-h*h+u*(u+2*o)+l;else u<=-p?(h=Math.max(0,-(-s*r+a)),u=h>0?-r:Math.min(Math.max(-r,-o),r),d=-h*h+u*(u+2*o)+l):u<=p?(h=0,u=Math.min(Math.max(-r,-o),r),d=u*(u+2*o)+l):(h=Math.max(0,-(s*r+a)),u=h>0?r:Math.min(Math.max(-r,-o),r),d=-h*h+u*(u+2*o)+l);else u=s>0?-r:r,h=Math.max(0,-(s*u+a)),d=-h*h+u*(u+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(sp).addScaledVector(ap,u),d}intersectSphere(e,t){rp.subVectors(e.center,this.origin);const n=rp.dot(this.direction),i=rp.dot(rp)-n*n,r=e.radius*e.radius;if(i>r)return null;const s=Math.sqrt(r-i),a=n-s,o=n+s;return o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,s,a,o;const l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(n=(e.min.x-u.x)*l,i=(e.max.x-u.x)*l):(n=(e.max.x-u.x)*l,i=(e.min.x-u.x)*l),c>=0?(r=(e.min.y-u.y)*c,s=(e.max.y-u.y)*c):(r=(e.max.y-u.y)*c,s=(e.min.y-u.y)*c),n>s||r>i?null:((r>n||isNaN(n))&&(n=r),(s<i||isNaN(i))&&(i=s),h>=0?(a=(e.min.z-u.z)*h,o=(e.max.z-u.z)*h):(a=(e.max.z-u.z)*h,o=(e.min.z-u.z)*h),n>o||a>i?null:((a>n||n!=n)&&(n=a),(o<i||i!=i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,rp)}intersectTriangle(e,t,n,i,r){lp.subVectors(t,e),cp.subVectors(n,e),hp.crossVectors(lp,cp);let s,a=this.direction.dot(hp);if(a>0){if(i)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}op.subVectors(this.origin,e);const o=s*this.direction.dot(cp.crossVectors(op,cp));if(o<0)return null;const l=s*this.direction.dot(lp.cross(op));if(l<0)return null;if(o+l>a)return null;const c=-s*op.dot(hp);return c<0?null:this.at(c/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class dp{constructor(e,t,n,i,r,s,a,o,l,c,h,u,d,p,f,m){dp.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,s,a,o,l,c,h,u,d,p,f,m)}set(e,t,n,i,r,s,a,o,l,c,h,u,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new dp).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/pp.setFromMatrixColumn(e,0).length(),r=1/pp.setFromMatrixColumn(e,1).length(),s=1/pp.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),h=Math.sin(r);if("XYZ"===e.order){const e=s*c,n=s*h,i=a*c,r=a*h;t[0]=o*c,t[4]=-o*h,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-a*o,t[2]=r-e*l,t[6]=i+n*l,t[10]=s*o}else if("YXZ"===e.order){const e=o*c,n=o*h,i=l*c,r=l*h;t[0]=e+r*a,t[4]=i*a-n,t[8]=s*l,t[1]=s*h,t[5]=s*c,t[9]=-a,t[2]=n*a-i,t[6]=r+e*a,t[10]=s*o}else if("ZXY"===e.order){const e=o*c,n=o*h,i=l*c,r=l*h;t[0]=e-r*a,t[4]=-s*h,t[8]=i+n*a,t[1]=n+i*a,t[5]=s*c,t[9]=r-e*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){const e=s*c,n=s*h,i=a*c,r=a*h;t[0]=o*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=o*h,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){const e=s*o,n=s*l,i=a*o,r=a*l;t[0]=o*c,t[4]=r-e*h,t[8]=i*h+n,t[1]=h,t[5]=s*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*h+i,t[10]=e-r*h}else if("XZY"===e.order){const e=s*o,n=s*l,i=a*o,r=a*l;t[0]=o*c,t[4]=-h,t[8]=l*c,t[1]=e*h+r,t[5]=s*c,t[9]=n*h-i,t[2]=i*h-n,t[6]=a*c,t[10]=r*h+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(mp,e,gp)}lookAt(e,t,n){const i=this.elements;return _p.subVectors(e,t),0===_p.lengthSq()&&(_p.z=1),_p.normalize(),vp.crossVectors(n,_p),0===vp.lengthSq()&&(1===Math.abs(n.z)?_p.x+=1e-4:_p.z+=1e-4,_p.normalize(),vp.crossVectors(n,_p)),vp.normalize(),yp.crossVectors(_p,vp),i[0]=vp.x,i[4]=yp.x,i[8]=_p.x,i[1]=vp.y,i[5]=yp.y,i[9]=_p.y,i[2]=vp.z,i[6]=yp.z,i[10]=_p.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],c=n[1],h=n[5],u=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],_=n[11],b=n[15],x=i[0],S=i[4],E=i[8],w=i[12],T=i[1],M=i[5],A=i[9],P=i[13],C=i[2],I=i[6],L=i[10],D=i[14],R=i[3],k=i[7],O=i[11],F=i[15];return r[0]=s*x+a*T+o*C+l*R,r[4]=s*S+a*M+o*I+l*k,r[8]=s*E+a*A+o*L+l*O,r[12]=s*w+a*P+o*D+l*F,r[1]=c*x+h*T+u*C+d*R,r[5]=c*S+h*M+u*I+d*k,r[9]=c*E+h*A+u*L+d*O,r[13]=c*w+h*P+u*D+d*F,r[2]=p*x+f*T+m*C+g*R,r[6]=p*S+f*M+m*I+g*k,r[10]=p*E+f*A+m*L+g*O,r[14]=p*w+f*P+m*D+g*F,r[3]=v*x+y*T+_*C+b*R,r[7]=v*S+y*M+_*I+b*k,r[11]=v*E+y*A+_*L+b*O,r[15]=v*w+y*P+_*D+b*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],s=e[1],a=e[5],o=e[9],l=e[13],c=e[2],h=e[6],u=e[10],d=e[14];return e[3]*(+r*o*h-i*l*h-r*a*u+n*l*u+i*a*d-n*o*d)+e[7]*(+t*o*d-t*l*u+r*s*u-i*s*d+i*l*c-r*o*c)+e[11]*(+t*l*h-t*a*d-r*s*h+n*s*d+r*a*c-n*l*c)+e[15]*(-i*a*c-t*o*h+t*a*u+i*s*h-n*s*u+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],h=e[9],u=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=h*m*l-f*u*l+f*o*d-a*m*d-h*o*g+a*u*g,y=p*u*l-c*m*l-p*o*d+s*m*d+c*o*g-s*u*g,_=c*f*l-p*h*l+p*a*d-s*f*d-c*a*g+s*h*g,b=p*h*o-c*f*o-p*a*u+s*f*u+c*a*m-s*h*m,x=t*v+n*y+i*_+r*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=v*S,e[1]=(f*u*r-h*m*r-f*i*d+n*m*d+h*i*g-n*u*g)*S,e[2]=(a*m*r-f*o*r+f*i*l-n*m*l-a*i*g+n*o*g)*S,e[3]=(h*o*r-a*u*r-h*i*l+n*u*l+a*i*d-n*o*d)*S,e[4]=y*S,e[5]=(c*m*r-p*u*r+p*i*d-t*m*d-c*i*g+t*u*g)*S,e[6]=(p*o*r-s*m*r-p*i*l+t*m*l+s*i*g-t*o*g)*S,e[7]=(s*u*r-c*o*r+c*i*l-t*u*l-s*i*d+t*o*d)*S,e[8]=_*S,e[9]=(p*h*r-c*f*r-p*n*d+t*f*d+c*n*g-t*h*g)*S,e[10]=(s*f*r-p*a*r+p*n*l-t*f*l-s*n*g+t*a*g)*S,e[11]=(c*a*r-s*h*r-c*n*l+t*h*l+s*n*d-t*a*d)*S,e[12]=b*S,e[13]=(c*f*i-p*h*i+p*n*u-t*f*u-c*n*m+t*h*m)*S,e[14]=(p*a*i-s*f*i-p*n*o+t*f*o+s*n*m-t*a*m)*S,e[15]=(s*h*i-c*a*i+c*n*o-t*h*o-s*n*u+t*a*u)*S,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,s=e.x,a=e.y,o=e.z,l=r*s,c=r*a;return this.set(l*s+n,l*a-i*o,l*o+i*a,0,l*a+i*o,c*a+n,c*o-i*s,0,l*o-i*a,c*o+i*s,r*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,s){return this.set(1,n,r,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,s=t._y,a=t._z,o=t._w,l=r+r,c=s+s,h=a+a,u=r*l,d=r*c,p=r*h,f=s*c,m=s*h,g=a*h,v=o*l,y=o*c,_=o*h,b=n.x,x=n.y,S=n.z;return i[0]=(1-(f+g))*b,i[1]=(d+_)*b,i[2]=(p-y)*b,i[3]=0,i[4]=(d-_)*x,i[5]=(1-(u+g))*x,i[6]=(m+v)*x,i[7]=0,i[8]=(p+y)*S,i[9]=(m-v)*S,i[10]=(1-(u+f))*S,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=pp.set(i[0],i[1],i[2]).length();const s=pp.set(i[4],i[5],i[6]).length(),a=pp.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],fp.copy(this);const o=1/r,l=1/s,c=1/a;return fp.elements[0]*=o,fp.elements[1]*=o,fp.elements[2]*=o,fp.elements[4]*=l,fp.elements[5]*=l,fp.elements[6]*=l,fp.elements[8]*=c,fp.elements[9]*=c,fp.elements[10]*=c,t.setFromRotationMatrix(fp),n.x=r,n.y=s,n.z=a,this}makePerspective(e,t,n,i,r,s,a=2e3){const o=this.elements,l=2*r/(t-e),c=2*r/(n-i),h=(t+e)/(t-e),u=(n+i)/(n-i);let d,p;if(a===Yu)d=-(s+r)/(s-r),p=-2*s*r/(s-r);else{if(a!==$u)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);d=-s/(s-r),p=-s*r/(s-r)}return o[0]=l,o[4]=0,o[8]=h,o[12]=0,o[1]=0,o[5]=c,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,i,r,s,a=2e3){const o=this.elements,l=1/(t-e),c=1/(n-i),h=1/(s-r),u=(t+e)*l,d=(n+i)*c;let p,f;if(a===Yu)p=(s+r)*h,f=-2*h;else{if(a!==$u)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=r*h,f=-1*h}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=f,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const pp=new Fd,fp=new dp,mp=new Fd(0,0,0),gp=new Fd(1,1,1),vp=new Fd,yp=new Fd,_p=new Fd,bp=new dp,xp=new Od;class Sp{constructor(e=0,t=0,n=0,i=Sp.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,r=i[0],s=i[4],a=i[8],o=i[1],l=i[5],c=i[9],h=i[2],u=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(td(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-td(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-h,r),this._z=0);break;case"ZXY":this._x=Math.asin(td(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-td(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(td(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,r)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-td(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return bp.makeRotationFromQuaternion(e),this.setFromRotationMatrix(bp,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return xp.setFromEuler(this),this.setFromQuaternion(xp,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Sp.DEFAULT_ORDER="XYZ";class Ep{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let wp=0;const Tp=new Fd,Mp=new Od,Ap=new dp,Pp=new Fd,Cp=new Fd,Ip=new Fd,Lp=new Od,Dp=new Fd(1,0,0),Rp=new Fd(0,1,0),kp=new Fd(0,0,1),Op={type:"added"},Fp={type:"removed"};class Np extends Ku{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:wp++}),this.uuid=ed(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Np.DEFAULT_UP.clone();const e=new Fd,t=new Sp,n=new Od,i=new Fd(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new dp},normalMatrix:{value:new cd}}),this.matrix=new dp,this.matrixWorld=new dp,this.matrixAutoUpdate=Np.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Np.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ep,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Mp.setFromAxisAngle(e,t),this.quaternion.multiply(Mp),this}rotateOnWorldAxis(e,t){return Mp.setFromAxisAngle(e,t),this.quaternion.premultiply(Mp),this}rotateX(e){return this.rotateOnAxis(Dp,e)}rotateY(e){return this.rotateOnAxis(Rp,e)}rotateZ(e){return this.rotateOnAxis(kp,e)}translateOnAxis(e,t){return Tp.copy(e).applyQuaternion(this.quaternion),this.position.add(Tp.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Dp,e)}translateY(e){return this.translateOnAxis(Rp,e)}translateZ(e){return this.translateOnAxis(kp,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ap.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Pp.copy(e):Pp.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Cp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ap.lookAt(Cp,Pp,this.up):Ap.lookAt(Pp,Cp,this.up),this.quaternion.setFromRotationMatrix(Ap),i&&(Ap.extractRotation(i.matrixWorld),Mp.setFromRotationMatrix(Ap),this.quaternion.premultiply(Mp.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Op)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Fp)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ap.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Ap.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ap),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cp,e,Ip),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cp,Lp,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),null!==this.boundingSphere&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),null!==this.boundingBox&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=s(e.geometries),i=s(e.materials),r=s(e.textures),a=s(e.images),o=s(e.shapes),l=s(e.skeletons),c=s(e.animations),h=s(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),h.length>0&&(n.nodes=h)}return n.object=i,n;function s(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}Np.DEFAULT_UP=new Fd(0,1,0),Np.DEFAULT_MATRIX_AUTO_UPDATE=!0,Np.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Bp=new Fd,zp=new Fd,Up=new Fd,Vp=new Fd,Hp=new Fd,Gp=new Fd,jp=new Fd,Wp=new Fd,qp=new Fd,Xp=new Fd;let Yp=!1;class $p{constructor(e=new Fd,t=new Fd,n=new Fd){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Bp.subVectors(e,t),i.cross(Bp);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){Bp.subVectors(i,t),zp.subVectors(n,t),Up.subVectors(e,t);const s=Bp.dot(Bp),a=Bp.dot(zp),o=Bp.dot(Up),l=zp.dot(zp),c=zp.dot(Up),h=s*l-a*a;if(0===h)return r.set(0,0,0),null;const u=1/h,d=(l*o-a*c)*u,p=(s*c-a*o)*u;return r.set(1-d-p,p,d)}static containsPoint(e,t,n,i){return null!==this.getBarycoord(e,t,n,i,Vp)&&(Vp.x>=0&&Vp.y>=0&&Vp.x+Vp.y<=1)}static getUV(e,t,n,i,r,s,a,o){return!1===Yp&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Yp=!0),this.getInterpolation(e,t,n,i,r,s,a,o)}static getInterpolation(e,t,n,i,r,s,a,o){return null===this.getBarycoord(e,t,n,i,Vp)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(r,Vp.x),o.addScaledVector(s,Vp.y),o.addScaledVector(a,Vp.z),o)}static isFrontFacing(e,t,n,i){return Bp.subVectors(n,t),zp.subVectors(e,t),Bp.cross(zp).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Bp.subVectors(this.c,this.b),zp.subVectors(this.a,this.b),.5*Bp.cross(zp).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return $p.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return $p.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return!1===Yp&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Yp=!0),$p.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}getInterpolation(e,t,n,i,r){return $p.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return $p.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return $p.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let s,a;Hp.subVectors(i,n),Gp.subVectors(r,n),Wp.subVectors(e,n);const o=Hp.dot(Wp),l=Gp.dot(Wp);if(o<=0&&l<=0)return t.copy(n);qp.subVectors(e,i);const c=Hp.dot(qp),h=Gp.dot(qp);if(c>=0&&h<=c)return t.copy(i);const u=o*h-c*l;if(u<=0&&o>=0&&c<=0)return s=o/(o-c),t.copy(n).addScaledVector(Hp,s);Xp.subVectors(e,r);const d=Hp.dot(Xp),p=Gp.dot(Xp);if(p>=0&&d<=p)return t.copy(r);const f=d*l-o*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(Gp,a);const m=c*p-d*h;if(m<=0&&h-c>=0&&d-p>=0)return jp.subVectors(r,i),a=(h-c)/(h-c+(d-p)),t.copy(i).addScaledVector(jp,a);const g=1/(m+f+u);return s=f*g,a=u*g,t.copy(n).addScaledVector(Hp,s).addScaledVector(Gp,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Kp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Zp={h:0,s:0,l:0},Qp={h:0,s:0,l:0};function Jp(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class ef{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t="srgb"){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,bd.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=bd.workingColorSpace){return this.r=e,this.g=t,this.b=n,bd.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=bd.workingColorSpace){if(e=nd(e,1),t=td(t,0,1),n=td(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=Jp(r,i,e+1/3),this.g=Jp(r,i,e),this.b=Jp(r,i,e-1/3)}return bd.toWorkingColorSpace(this,i),this}setStyle(e,t="srgb"){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=i[1],r=n.length;if(3===r)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===r)return this.setHex(parseInt(n,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t="srgb"){const n=Kp[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xd(e.r),this.g=xd(e.g),this.b=xd(e.b),this}copyLinearToSRGB(e){return this.r=Sd(e.r),this.g=Sd(e.g),this.b=Sd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e="srgb"){return bd.fromWorkingColorSpace(tf.copy(this),e),65536*Math.round(td(255*tf.r,0,255))+256*Math.round(td(255*tf.g,0,255))+Math.round(td(255*tf.b,0,255))}getHexString(e="srgb"){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=bd.workingColorSpace){bd.fromWorkingColorSpace(tf.copy(this),t);const n=tf.r,i=tf.g,r=tf.b,s=Math.max(n,i,r),a=Math.min(n,i,r);let o,l;const c=(a+s)/2;if(a===s)o=0,l=0;else{const e=s-a;switch(l=c<=.5?e/(s+a):e/(2-s-a),s){case n:o=(i-r)/e+(i<r?6:0);break;case i:o=(r-n)/e+2;break;case r:o=(n-i)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e,t=bd.workingColorSpace){return bd.fromWorkingColorSpace(tf.copy(this),t),e.r=tf.r,e.g=tf.g,e.b=tf.b,e}getStyle(e="srgb"){bd.fromWorkingColorSpace(tf.copy(this),e);const t=tf.r,n=tf.g,i=tf.b;return e!==Fu?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*i)})`}offsetHSL(e,t,n){return this.getHSL(Zp),this.setHSL(Zp.h+e,Zp.s+t,Zp.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Zp),e.getHSL(Qp);const n=id(Zp.h,Qp.h,t),i=id(Zp.s,Qp.s,t),r=id(Zp.l,Qp.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const tf=new ef;ef.NAMES=Kp;let nf=0;class rf extends Ku{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:nf++}),this.uuid=ed(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=Qh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ef(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ju,this.stencilZFail=ju,this.stencilZPass=ju,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),this.blendEquation!==Qh&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ju&&(n.stencilFail=this.stencilFail),this.stencilZFail!==ju&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==ju&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class sf extends rf{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ef(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const af=new Fd,of=new ld;class lf{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=Wu,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=vu,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)of.fromBufferAttribute(this,t),of.applyMatrix3(e),this.setXY(t,of.x,of.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)af.fromBufferAttribute(this,t),af.applyMatrix3(e),this.setXYZ(t,af.x,af.y,af.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)af.fromBufferAttribute(this,t),af.applyMatrix4(e),this.setXYZ(t,af.x,af.y,af.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)af.fromBufferAttribute(this,t),af.applyNormalMatrix(e),this.setXYZ(t,af.x,af.y,af.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)af.fromBufferAttribute(this,t),af.transformDirection(e),this.setXYZ(t,af.x,af.y,af.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=ad(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=od(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ad(t,this.array)),t}setX(e,t){return this.normalized&&(t=od(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ad(t,this.array)),t}setY(e,t){return this.normalized&&(t=od(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ad(t,this.array)),t}setZ(e,t){return this.normalized&&(t=od(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ad(t,this.array)),t}setW(e,t){return this.normalized&&(t=od(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=od(t,this.array),n=od(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=od(t,this.array),n=od(n,this.array),i=od(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=od(t,this.array),n=od(n,this.array),i=od(i,this.array),r=od(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Wu&&(e.usage=this.usage),e}}class cf extends lf{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class hf extends lf{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class uf extends lf{constructor(e,t,n){super(new Float32Array(e),t,n)}}let df=0;const pf=new dp,ff=new Np,mf=new Fd,gf=new zd,vf=new zd,yf=new Fd;class _f extends Ku{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:df++}),this.uuid=ed(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ud(e)?hf:cf)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new cd).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return pf.makeRotationFromQuaternion(e),this.applyMatrix4(pf),this}rotateX(e){return pf.makeRotationX(e),this.applyMatrix4(pf),this}rotateY(e){return pf.makeRotationY(e),this.applyMatrix4(pf),this}rotateZ(e){return pf.makeRotationZ(e),this.applyMatrix4(pf),this}translate(e,t,n){return pf.makeTranslation(e,t,n),this.applyMatrix4(pf),this}scale(e,t,n){return pf.makeScale(e,t,n),this.applyMatrix4(pf),this}lookAt(e){return ff.lookAt(e),ff.updateMatrix(),this.applyMatrix4(ff.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(mf).negate(),this.translate(mf.x,mf.y,mf.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new uf(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new zd);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Fd(-1/0,-1/0,-1/0),new Fd(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];gf.setFromBufferAttribute(n),this.morphTargetsRelative?(yf.addVectors(this.boundingBox.min,gf.min),this.boundingBox.expandByPoint(yf),yf.addVectors(this.boundingBox.max,gf.max),this.boundingBox.expandByPoint(yf)):(this.boundingBox.expandByPoint(gf.min),this.boundingBox.expandByPoint(gf.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ip);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Fd,1/0);if(e){const n=this.boundingSphere.center;if(gf.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];vf.setFromBufferAttribute(n),this.morphTargetsRelative?(yf.addVectors(gf.min,vf.min),gf.expandByPoint(yf),yf.addVectors(gf.max,vf.max),gf.expandByPoint(yf)):(gf.expandByPoint(vf.min),gf.expandByPoint(vf.max))}gf.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)yf.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(yf));if(t)for(let r=0,s=t.length;r<s;r++){const s=t[r],a=this.morphTargetsRelative;for(let t=0,r=s.count;t<r;t++)yf.fromBufferAttribute(s,t),a&&(mf.fromBufferAttribute(e,t),yf.add(mf)),i=Math.max(i,n.distanceToSquared(yf))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,i=t.position.array,r=t.normal.array,s=t.uv.array,a=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new lf(new Float32Array(4*a),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let e=0;e<a;e++)l[e]=new Fd,c[e]=new Fd;const h=new Fd,u=new Fd,d=new Fd,p=new ld,f=new ld,m=new ld,g=new Fd,v=new Fd;function y(e,t,n){h.fromArray(i,3*e),u.fromArray(i,3*t),d.fromArray(i,3*n),p.fromArray(s,2*e),f.fromArray(s,2*t),m.fromArray(s,2*n),u.sub(h),d.sub(h),f.sub(p),m.sub(p);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(g.copy(u).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(r),v.copy(d).multiplyScalar(f.x).addScaledVector(u,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let _=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(let e=0,t=_.length;e<t;++e){const t=_[e],i=t.start;for(let e=i,r=i+t.count;e<r;e+=3)y(n[e+0],n[e+1],n[e+2])}const b=new Fd,x=new Fd,S=new Fd,E=new Fd;function w(e){S.fromArray(r,3*e),E.copy(S);const t=l[e];b.copy(t),b.sub(S.multiplyScalar(S.dot(t))).normalize(),x.crossVectors(E,t);const n=x.dot(c[e])<0?-1:1;o[4*e]=b.x,o[4*e+1]=b.y,o[4*e+2]=b.z,o[4*e+3]=n}for(let e=0,t=_.length;e<t;++e){const t=_[e],i=t.start;for(let e=i,r=i+t.count;e<r;e+=3)w(n[e+0]),w(n[e+1]),w(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new lf(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new Fd,r=new Fd,s=new Fd,a=new Fd,o=new Fd,l=new Fd,c=new Fd,h=new Fd;if(e)for(let u=0,d=e.count;u<d;u+=3){const d=e.getX(u+0),p=e.getX(u+1),f=e.getX(u+2);i.fromBufferAttribute(t,d),r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,f),c.subVectors(s,r),h.subVectors(i,r),c.cross(h),a.fromBufferAttribute(n,d),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(c),o.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,a=t.count;e<a;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),c.subVectors(s,r),h.subVectors(i,r),c.cross(h),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)yf.fromBufferAttribute(e,t),yf.normalize(),e.setXYZ(t,yf.x,yf.y,yf.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,s=new n.constructor(t.length*i);let a=0,o=0;for(let r=0,l=t.length;r<l;r++){a=e.isInterleavedBufferAttribute?t[r]*e.data.stride+e.offset:t[r]*i;for(let e=0;e<i;e++)s[o++]=n[a++]}return new lf(s,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new _f,n=this.index.array,i=this.attributes;for(const r in i){const s=e(i[r],n);t.setAttribute(r,s)}const r=this.morphAttributes;for(const i in r){const s=[],a=r[i];for(let t=0,i=a.length;t<i;t++){const i=e(a[t],n);s.push(i)}t.morphAttributes[i]=s}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let e=0,n=s.length;e<n;e++){const n=s[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const i=n[t];e.data.attributes[t]=i.toJSON(e.data)}const i={};let r=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],s=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];s.push(i.toJSON(e.data))}s.length>0&&(i[t]=s,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const e in i){const n=i[e];this.setAttribute(e,n.clone(t))}const r=e.morphAttributes;for(const e in r){const n=[],i=r[e];for(let e=0,r=i.length;e<r;e++)n.push(i[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let e=0,t=s.length;e<t;e++){const t=s[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const bf=new dp,xf=new up,Sf=new ip,Ef=new Fd,wf=new Fd,Tf=new Fd,Mf=new Fd,Af=new Fd,Pf=new Fd,Cf=new ld,If=new ld,Lf=new ld,Df=new Fd,Rf=new Fd,kf=new Fd,Of=new Fd,Ff=new Fd;class Nf extends Np{constructor(e=new _f,t=new sf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(r&&a){Pf.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=a[n],o=r[n];0!==i&&(Af.fromBufferAttribute(o,e),s?Pf.addScaledVector(Af,i):Pf.addScaledVector(Af.sub(t),i))}t.add(Pf)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),Sf.copy(n.boundingSphere),Sf.applyMatrix4(r),xf.copy(e.ray).recast(e.near),!1===Sf.containsPoint(xf.origin)){if(null===xf.intersectSphere(Sf,Ef))return;if(xf.origin.distanceToSquared(Ef)>(e.far-e.near)**2)return}bf.copy(r).invert(),xf.copy(e.ray).applyMatrix4(bf),null!==n.boundingBox&&!1===xf.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,xf)}}_computeIntersections(e,t,n){let i;const r=this.geometry,s=this.material,a=r.index,o=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,h=r.attributes.normal,u=r.groups,d=r.drawRange;if(null!==a)if(Array.isArray(s))for(let r=0,o=u.length;r<o;r++){const o=u[r],p=s[o.materialIndex];for(let r=Math.max(o.start,d.start),s=Math.min(a.count,Math.min(o.start+o.count,d.start+d.count));r<s;r+=3){i=Bf(this,p,e,n,l,c,h,a.getX(r),a.getX(r+1),a.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),i.face.materialIndex=o.materialIndex,t.push(i))}}else{for(let r=Math.max(0,d.start),o=Math.min(a.count,d.start+d.count);r<o;r+=3){i=Bf(this,s,e,n,l,c,h,a.getX(r),a.getX(r+1),a.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}else if(void 0!==o)if(Array.isArray(s))for(let r=0,a=u.length;r<a;r++){const a=u[r],p=s[a.materialIndex];for(let r=Math.max(a.start,d.start),s=Math.min(o.count,Math.min(a.start+a.count,d.start+d.count));r<s;r+=3){i=Bf(this,p,e,n,l,c,h,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),i.face.materialIndex=a.materialIndex,t.push(i))}}else{for(let r=Math.max(0,d.start),a=Math.min(o.count,d.start+d.count);r<a;r+=3){i=Bf(this,s,e,n,l,c,h,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}}}function Bf(e,t,n,i,r,s,a,o,l,c){e.getVertexPosition(o,wf),e.getVertexPosition(l,Tf),e.getVertexPosition(c,Mf);const h=function(e,t,n,i,r,s,a,o){let l;if(l=1===t.side?i.intersectTriangle(a,s,r,!0,o):i.intersectTriangle(r,s,a,0===t.side,o),null===l)return null;Ff.copy(o),Ff.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Ff);return c<n.near||c>n.far?null:{distance:c,point:Ff.clone(),object:e}}(e,t,n,i,wf,Tf,Mf,Of);if(h){r&&(Cf.fromBufferAttribute(r,o),If.fromBufferAttribute(r,l),Lf.fromBufferAttribute(r,c),h.uv=$p.getInterpolation(Of,wf,Tf,Mf,Cf,If,Lf,new ld)),s&&(Cf.fromBufferAttribute(s,o),If.fromBufferAttribute(s,l),Lf.fromBufferAttribute(s,c),h.uv1=$p.getInterpolation(Of,wf,Tf,Mf,Cf,If,Lf,new ld),h.uv2=h.uv1),a&&(Df.fromBufferAttribute(a,o),Rf.fromBufferAttribute(a,l),kf.fromBufferAttribute(a,c),h.normal=$p.getInterpolation(Of,wf,Tf,Mf,Df,Rf,kf,new Fd),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const e={a:o,b:l,c,normal:new Fd,materialIndex:0};$p.getNormal(wf,Tf,Mf,e.normal),h.face=e}return h}class zf extends _f{constructor(e=1,t=1,n=1,i=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};const a=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);const o=[],l=[],c=[],h=[];let u=0,d=0;function p(e,t,n,i,r,s,p,f,m,g,v){const y=s/m,_=p/g,b=s/2,x=p/2,S=f/2,E=m+1,w=g+1;let T=0,M=0;const A=new Fd;for(let s=0;s<w;s++){const a=s*_-x;for(let o=0;o<E;o++){const u=o*y-b;A[e]=u*i,A[t]=a*r,A[n]=S,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,c.push(A.x,A.y,A.z),h.push(o/m),h.push(1-s/g),T+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=u+t+E*e,i=u+t+E*(e+1),r=u+(t+1)+E*(e+1),s=u+(t+1)+E*e;o.push(n,i,s),o.push(i,r,s),M+=6}a.addGroup(d,M,v),d+=M,u+=T}p("z","y","x",-1,-1,n,t,e,s,r,0),p("z","y","x",1,-1,n,t,-e,s,r,1),p("x","z","y",1,1,e,n,t,i,s,2),p("x","z","y",1,-1,e,n,-t,i,s,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new uf(l,3)),this.setAttribute("normal",new uf(c,3)),this.setAttribute("uv",new uf(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Uf(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function Vf(e){const t={};for(let n=0;n<e.length;n++){const i=Uf(e[n]);for(const e in i)t[e]=i[e]}return t}function Hf(e){return null===e.getRenderTarget()?e.outputColorSpace:bd.workingColorSpace}const Gf={clone:Uf,merge:Vf};class jf extends rf{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Uf(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Wf extends Np{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dp,this.projectionMatrix=new dp,this.projectionMatrixInverse=new dp,this.coordinateSystem=Yu}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class qf extends Wf{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Ju*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Qu*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ju*Math.atan(Math.tan(.5*Qu*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Qu*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,a=s.fullHeight;r+=s.offsetX*i/e,t-=s.offsetY*n/a,i*=s.width/e,n*=s.height/a}const a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Xf=-90;class Yf extends Np{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new qf(Xf,1,e,t);i.layers=this.layers,this.add(i);const r=new qf(Xf,1,e,t);r.layers=this.layers,this.add(r);const s=new qf(Xf,1,e,t);s.layers=this.layers,this.add(s);const a=new qf(Xf,1,e,t);a.layers=this.layers,this.add(a);const o=new qf(Xf,1,e,t);o.layers=this.layers,this.add(o);const l=new qf(Xf,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,r,s,a,o]=t;for(const e of t)this.remove(e);if(e===Yu)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(e!==$u)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,s,a,o,l,c]=this.children,h=e.getRenderTarget(),u=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,s),e.setRenderTarget(n,2,i),e.render(t,a),e.setRenderTarget(n,3,i),e.render(t,o),e.setRenderTarget(n,4,i),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,i),e.render(t,c),e.setRenderTarget(h,u,d),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class $f extends Cd{constructor(e,t,n,i,r,s,a,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:eu,n,i,r,s,a,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Kf extends Dd{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];void 0!==t.encoding&&(md("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===ku?Fu:Ou),this.texture=new $f(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:uu}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new zf(5,5,5),r=new jf({name:"CubemapFromEquirect",uniforms:Uf(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=t;const s=new Nf(i,r),a=t.minFilter;t.minFilter===du&&(t.minFilter=uu);return new Yf(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,n,i);e.setRenderTarget(r)}}const Zf=new Fd,Qf=new Fd,Jf=new cd;class em{constructor(e=new Fd(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Zf.subVectors(n,t).cross(Qf.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Zf),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Jf.getNormalMatrix(e),i=this.coplanarPoint(Zf).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const tm=new ip,nm=new Fd;class im{constructor(e=new em,t=new em,n=new em,i=new em,r=new em,s=new em){this.planes=[e,t,n,i,r,s]}set(e,t,n,i,r,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=2e3){const n=this.planes,i=e.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],c=i[5],h=i[6],u=i[7],d=i[8],p=i[9],f=i[10],m=i[11],g=i[12],v=i[13],y=i[14],_=i[15];if(n[0].setComponents(o-r,u-l,m-d,_-g).normalize(),n[1].setComponents(o+r,u+l,m+d,_+g).normalize(),n[2].setComponents(o+s,u+c,m+p,_+v).normalize(),n[3].setComponents(o-s,u-c,m-p,_-v).normalize(),n[4].setComponents(o-a,u-h,m-f,_-y).normalize(),t===Yu)n[5].setComponents(o+a,u+h,m+f,_+y).normalize();else{if(t!==$u)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(a,h,f,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),tm.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),tm.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(tm)}intersectsSprite(e){return tm.center.set(0,0,0),tm.radius=.7071067811865476,tm.applyMatrix4(e.matrixWorld),this.intersectsSphere(tm)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(nm.x=i.normal.x>0?e.max.x:e.min.x,nm.y=i.normal.y>0?e.max.y:e.min.y,nm.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(nm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function rm(){let e=null,t=!1,n=null,i=null;function r(t,s){n(t,s),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function sm(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){const e=i.get(t);return void((!e||e.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const s=i.get(t);if(void 0===s)i.set(t,function(t,i){const r=t.array,s=t.usage,a=r.byteLength,o=e.createBuffer();let l;if(e.bindBuffer(i,o),e.bufferData(i,r,s),t.onUploadCallback(),r instanceof Float32Array)l=e.FLOAT;else if(r instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");l=e.HALF_FLOAT}else l=e.UNSIGNED_SHORT;else if(r instanceof Int16Array)l=e.SHORT;else if(r instanceof Uint32Array)l=e.UNSIGNED_INT;else if(r instanceof Int32Array)l=e.INT;else if(r instanceof Int8Array)l=e.BYTE;else if(r instanceof Uint8Array)l=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);l=e.UNSIGNED_BYTE}return{buffer:o,type:l,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version,size:a}}(t,r));else if(s.version<t.version){if(s.size!==t.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,i,r){const s=i.array,a=i._updateRange,o=i.updateRanges;if(e.bindBuffer(r,t),-1===a.count&&0===o.length&&e.bufferSubData(r,0,s),0!==o.length){for(let t=0,i=o.length;t<i;t++){const i=o[t];n?e.bufferSubData(r,i.start*s.BYTES_PER_ELEMENT,s,i.start,i.count):e.bufferSubData(r,i.start*s.BYTES_PER_ELEMENT,s.subarray(i.start,i.start+i.count))}i.clearUpdateRanges()}-1!==a.count&&(n?e.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):e.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1),i.onUploadCallback()}(s.buffer,t,r),s.version=t.version}}}}class am extends _f{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,s=t/2,a=Math.floor(n),o=Math.floor(i),l=a+1,c=o+1,h=e/a,u=t/o,d=[],p=[],f=[],m=[];for(let e=0;e<c;e++){const t=e*u-s;for(let n=0;n<l;n++){const i=n*h-r;p.push(i,-t,0),f.push(0,0,1),m.push(n/a),m.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<a;t++){const n=t+l*e,i=t+l*(e+1),r=t+1+l*(e+1),s=t+1+l*e;d.push(n,i,s),d.push(i,r,s)}this.setIndex(d),this.setAttribute("position",new uf(p,3)),this.setAttribute("normal",new uf(f,3)),this.setAttribute("uv",new uf(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new am(e.width,e.height,e.widthSegments,e.heightSegments)}}const om={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor *= toneMappingExposure;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\treturn color;\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},lm={common:{diffuse:{value:new ef(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new cd},alphaMap:{value:null},alphaMapTransform:{value:new cd},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new cd}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new cd}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new cd}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new cd},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new cd},normalScale:{value:new ld(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new cd},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new cd}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new cd}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new cd}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ef(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ef(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new cd},alphaTest:{value:0},uvTransform:{value:new cd}},sprite:{diffuse:{value:new ef(16777215)},opacity:{value:1},center:{value:new ld(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new cd},alphaMap:{value:null},alphaMapTransform:{value:new cd},alphaTest:{value:0}}},cm={basic:{uniforms:Vf([lm.common,lm.specularmap,lm.envmap,lm.aomap,lm.lightmap,lm.fog]),vertexShader:om.meshbasic_vert,fragmentShader:om.meshbasic_frag},lambert:{uniforms:Vf([lm.common,lm.specularmap,lm.envmap,lm.aomap,lm.lightmap,lm.emissivemap,lm.bumpmap,lm.normalmap,lm.displacementmap,lm.fog,lm.lights,{emissive:{value:new ef(0)}}]),vertexShader:om.meshlambert_vert,fragmentShader:om.meshlambert_frag},phong:{uniforms:Vf([lm.common,lm.specularmap,lm.envmap,lm.aomap,lm.lightmap,lm.emissivemap,lm.bumpmap,lm.normalmap,lm.displacementmap,lm.fog,lm.lights,{emissive:{value:new ef(0)},specular:{value:new ef(1118481)},shininess:{value:30}}]),vertexShader:om.meshphong_vert,fragmentShader:om.meshphong_frag},standard:{uniforms:Vf([lm.common,lm.envmap,lm.aomap,lm.lightmap,lm.emissivemap,lm.bumpmap,lm.normalmap,lm.displacementmap,lm.roughnessmap,lm.metalnessmap,lm.fog,lm.lights,{emissive:{value:new ef(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:om.meshphysical_vert,fragmentShader:om.meshphysical_frag},toon:{uniforms:Vf([lm.common,lm.aomap,lm.lightmap,lm.emissivemap,lm.bumpmap,lm.normalmap,lm.displacementmap,lm.gradientmap,lm.fog,lm.lights,{emissive:{value:new ef(0)}}]),vertexShader:om.meshtoon_vert,fragmentShader:om.meshtoon_frag},matcap:{uniforms:Vf([lm.common,lm.bumpmap,lm.normalmap,lm.displacementmap,lm.fog,{matcap:{value:null}}]),vertexShader:om.meshmatcap_vert,fragmentShader:om.meshmatcap_frag},points:{uniforms:Vf([lm.points,lm.fog]),vertexShader:om.points_vert,fragmentShader:om.points_frag},dashed:{uniforms:Vf([lm.common,lm.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:om.linedashed_vert,fragmentShader:om.linedashed_frag},depth:{uniforms:Vf([lm.common,lm.displacementmap]),vertexShader:om.depth_vert,fragmentShader:om.depth_frag},normal:{uniforms:Vf([lm.common,lm.bumpmap,lm.normalmap,lm.displacementmap,{opacity:{value:1}}]),vertexShader:om.meshnormal_vert,fragmentShader:om.meshnormal_frag},sprite:{uniforms:Vf([lm.sprite,lm.fog]),vertexShader:om.sprite_vert,fragmentShader:om.sprite_frag},background:{uniforms:{uvTransform:{value:new cd},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:om.background_vert,fragmentShader:om.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:om.backgroundCube_vert,fragmentShader:om.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:om.cube_vert,fragmentShader:om.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:om.equirect_vert,fragmentShader:om.equirect_frag},distanceRGBA:{uniforms:Vf([lm.common,lm.displacementmap,{referencePosition:{value:new Fd},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:om.distanceRGBA_vert,fragmentShader:om.distanceRGBA_frag},shadow:{uniforms:Vf([lm.lights,lm.fog,{color:{value:new ef(0)},opacity:{value:1}}]),vertexShader:om.shadow_vert,fragmentShader:om.shadow_frag}};cm.physical={uniforms:Vf([cm.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new cd},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new cd},clearcoatNormalScale:{value:new ld(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new cd},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new cd},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new cd},sheen:{value:0},sheenColor:{value:new ef(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new cd},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new cd},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new cd},transmissionSamplerSize:{value:new ld},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new cd},attenuationDistance:{value:0},attenuationColor:{value:new ef(0)},specularColor:{value:new ef(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new cd},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new cd},anisotropyVector:{value:new ld},anisotropyMap:{value:null},anisotropyMapTransform:{value:new cd}}]),vertexShader:om.meshphysical_vert,fragmentShader:om.meshphysical_frag};const hm={r:0,b:0,g:0};function um(e,t,n,i,r,s,a){const o=new ef(0);let l,c,h=!0===s?0:1,u=null,d=0,p=null;function f(t,n){t.getRGB(hm,Hf(e)),i.buffers.color.setClear(hm.r,hm.g,hm.b,n,a)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),h=t,f(o,h)},getClearAlpha:function(){return h},setClearAlpha:function(e){h=e,f(o,h)},render:function(s,m){let g=!1,v=!0===m.isScene?m.background:null;if(v&&v.isTexture){v=(m.backgroundBlurriness>0?n:t).get(v)}null===v?f(o,h):v&&v.isColor&&(f(v,1),g=!0);const y=e.xr.getEnvironmentBlendMode();"additive"===y?i.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===y&&i.buffers.color.setClear(0,0,0,0,a),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===ru)?(void 0===c&&(c=new Nf(new zf(1,1,1),new jf({name:"BackgroundCubeMaterial",uniforms:Uf(cm.backgroundCube.uniforms),vertexShader:cm.backgroundCube.vertexShader,fragmentShader:cm.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=bd.getTransfer(v.colorSpace)!==Vu,u===v&&d===v.version&&p===e.toneMapping||(c.material.needsUpdate=!0,u=v,d=v.version,p=e.toneMapping),c.layers.enableAll(),s.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new Nf(new am(2,2),new jf({name:"BackgroundMaterial",uniforms:Uf(cm.background.uniforms),vertexShader:cm.background.vertexShader,fragmentShader:cm.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,l.material.toneMapped=bd.getTransfer(v.colorSpace)!==Vu,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),u===v&&d===v.version&&p===e.toneMapping||(l.material.needsUpdate=!0,u=v,d=v.version,p=e.toneMapping),l.layers.enableAll(),s.unshift(l,l.geometry,l.material,0,0,null))}}}function dm(e,t,n,i){const r=e.getParameter(e.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),a=i.isWebGL2||null!==s,o={},l=p(null);let c=l,h=!1;function u(t){return i.isWebGL2?e.bindVertexArray(t):s.bindVertexArrayOES(t)}function d(t){return i.isWebGL2?e.deleteVertexArray(t):s.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],i=[];for(let e=0;e<r;e++)t[e]=0,n[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,r){const s=c.newAttributes,a=c.enabledAttributes,o=c.attributeDivisors;if(s[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),o[n]!==r){(i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),o[n]=r}}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function y(t,n,i,r,s,a,o){!0===o?e.vertexAttribIPointer(t,n,i,s,a):e.vertexAttribPointer(t,n,i,r,s,a)}function _(){b(),h=!0,c!==l&&(c=l,u(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,d,_,b){let x=!1;if(a){const t=function(t,n,r){const a=!0===r.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let h=c[a];void 0===h&&(h=p(i.isWebGL2?e.createVertexArray():s.createVertexArrayOES()),c[a]=h);return h}(_,d,l);c!==t&&(c=t,u(c.object)),x=function(e,t,n,i){const r=c.attributes,s=t.attributes;let a=0;const o=n.getAttributes();for(const t in o){if(o[t].location>=0){const n=r[t];let i=s[t];if(void 0===i&&("instanceMatrix"===t&&e.instanceMatrix&&(i=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(i=e.instanceColor)),void 0===n)return!0;if(n.attribute!==i)return!0;if(i&&n.data!==i.data)return!0;a++}}return c.attributesNum!==a||c.index!==i}(r,_,d,b),x&&function(e,t,n,i){const r={},s=t.attributes;let a=0;const o=n.getAttributes();for(const t in o){if(o[t].location>=0){let n=s[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const i={};i.attribute=n,n&&n.data&&(i.data=n.data),r[t]=i,a++}}c.attributes=r,c.attributesNum=a,c.index=i}(r,_,d,b)}else{const e=!0===l.wireframe;c.geometry===_.id&&c.program===d.id&&c.wireframe===e||(c.geometry=_.id,c.program=d.id,c.wireframe=e,x=!0)}null!==b&&n.update(b,e.ELEMENT_ARRAY_BUFFER),(x||h)&&(h=!1,function(r,s,a,o){if(!1===i.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=o.attributes,c=a.getAttributes(),h=s.defaultAttributeValues;for(const t in c){const s=c[t];if(s.location>=0){let a=l[t];if(void 0===a&&("instanceMatrix"===t&&r.instanceMatrix&&(a=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(a=r.instanceColor)),void 0!==a){const t=a.normalized,l=a.itemSize,c=n.get(a);if(void 0===c)continue;const h=c.buffer,u=c.type,d=c.bytesPerElement,p=!0===i.isWebGL2&&(u===e.INT||u===e.UNSIGNED_INT||a.gpuType===mu);if(a.isInterleavedBufferAttribute){const n=a.data,i=n.stride,c=a.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<s.locationSize;e++)g(s.location+e,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<s.locationSize;e++)m(s.location+e);e.bindBuffer(e.ARRAY_BUFFER,h);for(let e=0;e<s.locationSize;e++)y(s.location+e,l/s.locationSize,u,t,i*d,(c+l/s.locationSize*e)*d,p)}else{if(a.isInstancedBufferAttribute){for(let e=0;e<s.locationSize;e++)g(s.location+e,a.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let e=0;e<s.locationSize;e++)m(s.location+e);e.bindBuffer(e.ARRAY_BUFFER,h);for(let e=0;e<s.locationSize;e++)y(s.location+e,l/s.locationSize,u,t,l*d,l/s.locationSize*e*d,p)}}else if(void 0!==h){const n=h[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(s.location,n);break;case 3:e.vertexAttrib3fv(s.location,n);break;case 4:e.vertexAttrib4fv(s.location,n);break;default:e.vertexAttrib1fv(s.location,n)}}}}v()}(r,l,d,_),null!==b&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(b).buffer))},reset:_,resetDefaultState:b,dispose:function(){_();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)d(i[e].object),delete i[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function pm(e,t,n,i){const r=i.isWebGL2;let s;this.setMode=function(e){s=e},this.render=function(t,i){e.drawArrays(s,t,i),n.update(i,s,1)},this.renderInstances=function(i,a,o){if(0===o)return;let l,c;if(r)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](s,i,a,o),n.update(a,s,o)},this.renderMultiDraw=function(e,i,r){if(0===r)return;const a=t.get("WEBGL_multi_draw");if(null===a)for(let t=0;t<r;t++)this.render(e[t],i[t]);else{a.multiDrawArraysWEBGL(s,e,0,i,0,r);let t=0;for(let e=0;e<r;e++)t+=i[e];n.update(t,s,1)}}}function fm(e,t,n){let i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let a=void 0!==n.precision?n.precision:"highp";const o=r(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);const l=s||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,h=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=u>0,_=s||t.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:u,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:y&&_,maxSamples:s?e.getParameter(e.MAX_SAMPLES):0}}function mm(e){const t=this;let n=null,i=0,r=!1,s=!1;const a=new em,o=new cd,l={value:null,needsUpdate:!1};function c(e,n,i,r){const s=null!==e?e.length:0;let c=null;if(0!==s){if(c=l.value,!0!==r||null===c){const t=i+4*s,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=i;t!==s;++t,n+=4)a.copy(e[t]).applyMatrix4(r,o),a.normal.toArray(c,n),c[n+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(a,o,h){const u=a.clippingPlanes,d=a.clipIntersection,p=a.clipShadows,f=e.get(a);if(!r||null===u||0===u.length||s&&!p)s?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);t.numPlanes=i,t.numIntersection=0}();else{const e=s?0:i,t=4*e;let r=f.clippingState||null;l.value=r,r=c(u,o,t,h);for(let e=0;e!==t;++e)r[e]=n[e];f.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function gm(e){let t=new WeakMap;function n(e,t){return t===nu?e.mapping=eu:t===iu&&(e.mapping=tu),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping;if(s===nu||s===iu){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const s=r.image;if(s&&s.height>0){const a=new Kf(s.height/2);return a.fromEquirectangularTexture(e,r),t.set(r,a),r.addEventListener("dispose",i),n(a.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}class vm extends Wf{constructor(e=-1,t=1,n=1,i=-1,r=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,s=n+e,a=i+t,o=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,s=r+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const ym=[.125,.215,.35,.446,.526,.582],_m=20,bm=new vm,xm=new ef;let Sm=null,Em=0,wm=0;const Tm=(1+Math.sqrt(5))/2,Mm=1/Tm,Am=[new Fd(1,1,1),new Fd(-1,1,1),new Fd(1,1,-1),new Fd(-1,1,-1),new Fd(0,Tm,Mm),new Fd(0,Tm,-Mm),new Fd(Mm,0,Tm),new Fd(-Mm,0,Tm),new Fd(Tm,Mm,0),new Fd(-Tm,Mm,0)];class Pm{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){Sm=this._renderer.getRenderTarget(),Em=this._renderer.getActiveCubeFace(),wm=this._renderer.getActiveMipmapLevel(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Dm(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Lm(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Sm,Em,wm),e.scissorTest=!1,Im(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===eu||e.mapping===tu?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Sm=this._renderer.getRenderTarget(),Em=this._renderer.getActiveCubeFace(),wm=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:uu,minFilter:uu,generateMipmaps:!1,type:yu,format:bu,colorSpace:Nu,depthBuffer:!1},i=Cm(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Cm(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],i=[];let r=e;const s=e-4+1+ym.length;for(let a=0;a<s;a++){const s=Math.pow(2,r);n.push(s);let o=1/s;a>e-4?o=ym[a-e+4-1]:0===a&&(o=0),i.push(o);const l=1/(s-2),c=-l,h=1+l,u=[c,c,h,c,h,h,c,c,h,h,c,h],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),y=new Float32Array(m*p*d),_=new Float32Array(g*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(i,f*p*e),y.set(u,m*p*e);const r=[e,e,e,e,e,e];_.set(r,g*p*e)}const b=new _f;b.setAttribute("position",new lf(v,f)),b.setAttribute("uv",new lf(y,m)),b.setAttribute("faceIndex",new lf(_,g)),t.push(b),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,t,n){const i=new Float32Array(_m),r=new Fd(0,1,0);return new jf({name:"SphericalGaussianBlur",defines:{n:_m,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Rm(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(i,e,t)}return i}_compileMaterial(e){const t=new Nf(this._lodPlanes[0],e);this._renderer.compile(t,bm)}_sceneToCubeUV(e,t,n,i){const r=new qf(90,1,t,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(xm),o.toneMapping=0,o.autoClear=!1;const h=new sf({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),u=new Nf(new zf,h);let d=!1;const p=e.background;p?p.isColor&&(h.color.copy(p),e.background=null,d=!0):(h.color.copy(xm),d=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(r.up.set(0,s[t],0),r.lookAt(a[t],0,0)):1===n?(r.up.set(0,0,s[t]),r.lookAt(0,a[t],0)):(r.up.set(0,s[t],0),r.lookAt(0,0,a[t]));const l=this._cubeSize;Im(i,n*l,t>2?l:0,l,l),o.setRenderTarget(i),d&&o.render(u,r),o.render(e,r)}u.geometry.dispose(),u.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===eu||e.mapping===tu;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=Dm()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Lm());const r=i?this._cubemapMaterial:this._equirectMaterial,s=new Nf(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const a=this._cubeSize;Im(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(s,bm)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),i=Am[(t-1)%Am.length];this._blur(e,t-1,t,n,i)}t.autoClear=n}_blur(e,t,n,i,r){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,i,"latitudinal",r),this._halfBlur(s,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,s,a){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Nf(this._lodPlanes[i],l),h=l.uniforms,u=this._sizeLods[n]-1,d=isFinite(r)?Math.PI/(2*u):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):_m;f>_m&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<_m;++e){const t=e/p,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<f&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;h.envMap.value=e.texture,h.samples.value=f,h.weights.value=m,h.latitudinal.value="latitudinal"===s,a&&(h.poleAxis.value=a);const{_lodMax:v}=this;h.dTheta.value=d,h.mipInt.value=v-n;const y=this._sizeLods[i];Im(t,3*y*(i>v-4?i-v+4:0),4*(this._cubeSize-y),3*y,2*y),o.setRenderTarget(t),o.render(c,bm)}}function Cm(e,t,n){const i=new Dd(e,t,n);return i.texture.mapping=ru,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Im(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function Lm(){return new jf({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Rm(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Dm(){return new jf({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Rm(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Rm(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function km(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping,a=s===nu||s===iu,o=s===eu||s===tu;if(a||o){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=t.get(r);return null===n&&(n=new Pm(e)),i=a?n.fromEquirectangular(r,i):n.fromCubemap(r,i),t.set(r,i),i.texture}if(t.has(r))return t.get(r).texture;{const s=r.image;if(a&&s&&s.height>0||o&&s&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(s)){null===n&&(n=new Pm(e));const s=a?n.fromEquirectangular(r):n.fromCubemap(r);return t.set(r,s),r.addEventListener("dispose",i),s.texture}return null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Om(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Fm(e,t,n,i){const r={},s=new WeakMap;function a(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const e in o.attributes)t.remove(o.attributes[e]);for(const e in o.morphAttributes){const n=o.morphAttributes[e];for(let e=0,i=n.length;e<i;e++)t.remove(n[e])}o.removeEventListener("dispose",a),delete r[o.id];const l=s.get(o);l&&(t.remove(l),s.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],i=e.index,r=e.attributes.position;let a=0;if(null!==i){const e=i.array;a=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],s=e[t+2];n.push(i,r,r,s,s,i)}}else{if(void 0===r)return;{const e=r.array;a=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}}const o=new(ud(n)?hf:cf)(n,1);o.version=a;const l=s.get(e);l&&t.remove(l),s.set(e,o)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",a),r[t.id]=!0,n.memory.geometries++),t},update:function(n){const i=n.attributes;for(const n in i)t.update(i[n],e.ARRAY_BUFFER);const r=n.morphAttributes;for(const n in r){const i=r[n];for(let n=0,r=i.length;n<r;n++)t.update(i[n],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return s.get(e)}}}function Nm(e,t,n,i){const r=i.isWebGL2;let s,a,o;this.setMode=function(e){s=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,i){e.drawElements(s,i,a,t*o),n.update(i,s,1)},this.renderInstances=function(i,l,c){if(0===c)return;let h,u;if(r)h=e,u="drawElementsInstanced";else if(h=t.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",null===h)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[u](s,l,a,i*o,c),n.update(l,s,c)},this.renderMultiDraw=function(e,i,r){if(0===r)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<r;t++)this.render(e[t]/o,i[t]);else{l.multiDrawElementsWEBGL(s,i,0,a,e,0,r);let t=0;for(let e=0;e<r;e++)t+=i[e];n.update(t,s,1)}}}function Bm(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function zm(e,t){return e[0]-t[0]}function Um(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Vm(e,t,n){const i={},r=new Float32Array(8),s=new WeakMap,a=new Id,o=[];for(let e=0;e<8;e++)o[e]=[e,0];return{update:function(l,c,h){const u=l.morphTargetInfluences;if(!0===t.isWebGL2){const d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==d?d.length:0;let f=s.get(c);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();const v=void 0!==c.morphAttributes.position,y=void 0!==c.morphAttributes.normal,_=void 0!==c.morphAttributes.color,b=c.morphAttributes.position||[],x=c.morphAttributes.normal||[],S=c.morphAttributes.color||[];let E=0;!0===v&&(E=1),!0===y&&(E=2),!0===_&&(E=3);let w=c.attributes.position.count*E,T=1;w>t.maxTextureSize&&(T=Math.ceil(w/t.maxTextureSize),w=t.maxTextureSize);const M=new Float32Array(w*T*4*p),A=new Rd(M,w,T,p);A.type=vu,A.needsUpdate=!0;const P=4*E;for(let I=0;I<p;I++){const L=b[I],D=x[I],R=S[I],k=w*T*4*I;for(let O=0;O<L.count;O++){const F=O*P;!0===v&&(a.fromBufferAttribute(L,O),M[k+F+0]=a.x,M[k+F+1]=a.y,M[k+F+2]=a.z,M[k+F+3]=0),!0===y&&(a.fromBufferAttribute(D,O),M[k+F+4]=a.x,M[k+F+5]=a.y,M[k+F+6]=a.z,M[k+F+7]=0),!0===_&&(a.fromBufferAttribute(R,O),M[k+F+8]=a.x,M[k+F+9]=a.y,M[k+F+10]=a.z,M[k+F+11]=4===R.itemSize?a.w:1)}}function C(){A.dispose(),s.delete(c),c.removeEventListener("dispose",C)}f={count:p,texture:A,size:new ld(w,T)},s.set(c,f),c.addEventListener("dispose",C)}let m=0;for(let N=0;N<u.length;N++)m+=u[N];const g=c.morphTargetsRelative?1:1-m;h.getUniforms().setValue(e,"morphTargetBaseInfluence",g),h.getUniforms().setValue(e,"morphTargetInfluences",u),h.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const B=void 0===u?0:u.length;let z=i[c.id];if(void 0===z||z.length!==B){z=[];for(let j=0;j<B;j++)z[j]=[j,0];i[c.id]=z}for(let W=0;W<B;W++){const q=z[W];q[0]=W,q[1]=u[W]}z.sort(Um);for(let X=0;X<8;X++)X<B&&z[X][1]?(o[X][0]=z[X][0],o[X][1]=z[X][1]):(o[X][0]=Number.MAX_SAFE_INTEGER,o[X][1]=0);o.sort(zm);const U=c.morphAttributes.position,V=c.morphAttributes.normal;let H=0;for(let Y=0;Y<8;Y++){const $=o[Y],K=$[0],Z=$[1];K!==Number.MAX_SAFE_INTEGER&&Z?(U&&c.getAttribute("morphTarget"+Y)!==U[K]&&c.setAttribute("morphTarget"+Y,U[K]),V&&c.getAttribute("morphNormal"+Y)!==V[K]&&c.setAttribute("morphNormal"+Y,V[K]),r[Y]=Z,H+=Z):(U&&!0===c.hasAttribute("morphTarget"+Y)&&c.deleteAttribute("morphTarget"+Y),V&&!0===c.hasAttribute("morphNormal"+Y)&&c.deleteAttribute("morphNormal"+Y),r[Y]=0)}const G=c.morphTargetsRelative?1:1-H;h.getUniforms().setValue(e,"morphTargetBaseInfluence",G),h.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function Hm(e,t,n,i){let r=new WeakMap;function s(e){const t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(a){const o=i.render.frame,l=a.geometry,c=t.get(a,l);if(r.get(c)!==o&&(t.update(c),r.set(c,o)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",s)&&a.addEventListener("dispose",s),r.get(a)!==o&&(n.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,e.ARRAY_BUFFER),r.set(a,o))),a.isSkinnedMesh){const e=a.skeleton;r.get(e)!==o&&(e.update(),r.set(e,o))}return c},dispose:function(){r=new WeakMap}}}class Gm extends Cd{constructor(e,t,n,i,r,s,a,o,l,c){if((c=void 0!==c?c:xu)!==xu&&c!==Su)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===xu&&(n=gu),void 0===n&&c===Su&&(n=_u),super(null,i,r,s,a,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:lu,this.minFilter=void 0!==o?o:lu,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const jm=new Cd,Wm=new Gm(1,1);Wm.compareFunction=515;const qm=new Rd,Xm=new kd,Ym=new $f,$m=[],Km=[],Zm=new Float32Array(16),Qm=new Float32Array(9),Jm=new Float32Array(4);function eg(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let s=$m[r];if(void 0===s&&(s=new Float32Array(r),$m[r]=s),0!==t){i.toArray(s,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(s,r)}return s}function tg(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function ng(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function ig(e,t){let n=Km[t];void 0===n&&(n=new Int32Array(t),Km[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function rg(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function sg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(tg(n,t))return;e.uniform2fv(this.addr,t),ng(n,t)}}function ag(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(tg(n,t))return;e.uniform3fv(this.addr,t),ng(n,t)}}function og(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(tg(n,t))return;e.uniform4fv(this.addr,t),ng(n,t)}}function lg(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(tg(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),ng(n,t)}else{if(tg(n,i))return;Jm.set(i),e.uniformMatrix2fv(this.addr,!1,Jm),ng(n,i)}}function cg(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(tg(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),ng(n,t)}else{if(tg(n,i))return;Qm.set(i),e.uniformMatrix3fv(this.addr,!1,Qm),ng(n,i)}}function hg(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(tg(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),ng(n,t)}else{if(tg(n,i))return;Zm.set(i),e.uniformMatrix4fv(this.addr,!1,Zm),ng(n,i)}}function ug(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function dg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(tg(n,t))return;e.uniform2iv(this.addr,t),ng(n,t)}}function pg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(tg(n,t))return;e.uniform3iv(this.addr,t),ng(n,t)}}function fg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(tg(n,t))return;e.uniform4iv(this.addr,t),ng(n,t)}}function mg(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function gg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(tg(n,t))return;e.uniform2uiv(this.addr,t),ng(n,t)}}function vg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(tg(n,t))return;e.uniform3uiv(this.addr,t),ng(n,t)}}function yg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(tg(n,t))return;e.uniform4uiv(this.addr,t),ng(n,t)}}function _g(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r);const s=this.type===e.SAMPLER_2D_SHADOW?Wm:jm;n.setTexture2D(t||s,r)}function bg(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Xm,r)}function xg(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||Ym,r)}function Sg(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||qm,r)}function Eg(e,t){e.uniform1fv(this.addr,t)}function wg(e,t){const n=eg(t,this.size,2);e.uniform2fv(this.addr,n)}function Tg(e,t){const n=eg(t,this.size,3);e.uniform3fv(this.addr,n)}function Mg(e,t){const n=eg(t,this.size,4);e.uniform4fv(this.addr,n)}function Ag(e,t){const n=eg(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Pg(e,t){const n=eg(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Cg(e,t){const n=eg(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Ig(e,t){e.uniform1iv(this.addr,t)}function Lg(e,t){e.uniform2iv(this.addr,t)}function Dg(e,t){e.uniform3iv(this.addr,t)}function Rg(e,t){e.uniform4iv(this.addr,t)}function kg(e,t){e.uniform1uiv(this.addr,t)}function Og(e,t){e.uniform2uiv(this.addr,t)}function Fg(e,t){e.uniform3uiv(this.addr,t)}function Ng(e,t){e.uniform4uiv(this.addr,t)}function Bg(e,t,n){const i=this.cache,r=t.length,s=ig(n,r);tg(i,s)||(e.uniform1iv(this.addr,s),ng(i,s));for(let e=0;e!==r;++e)n.setTexture2D(t[e]||jm,s[e])}function zg(e,t,n){const i=this.cache,r=t.length,s=ig(n,r);tg(i,s)||(e.uniform1iv(this.addr,s),ng(i,s));for(let e=0;e!==r;++e)n.setTexture3D(t[e]||Xm,s[e])}function Ug(e,t,n){const i=this.cache,r=t.length,s=ig(n,r);tg(i,s)||(e.uniform1iv(this.addr,s),ng(i,s));for(let e=0;e!==r;++e)n.setTextureCube(t[e]||Ym,s[e])}function Vg(e,t,n){const i=this.cache,r=t.length,s=ig(n,r);tg(i,s)||(e.uniform1iv(this.addr,s),ng(i,s));for(let e=0;e!==r;++e)n.setTexture2DArray(t[e]||qm,s[e])}class Hg{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return rg;case 35664:return sg;case 35665:return ag;case 35666:return og;case 35674:return lg;case 35675:return cg;case 35676:return hg;case 5124:case 35670:return ug;case 35667:case 35671:return dg;case 35668:case 35672:return pg;case 35669:case 35673:return fg;case 5125:return mg;case 36294:return gg;case 36295:return vg;case 36296:return yg;case 35678:case 36198:case 36298:case 36306:case 35682:return _g;case 35679:case 36299:case 36307:return bg;case 35680:case 36300:case 36308:case 36293:return xg;case 36289:case 36303:case 36311:case 36292:return Sg}}(t.type)}}class Gg{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Eg;case 35664:return wg;case 35665:return Tg;case 35666:return Mg;case 35674:return Ag;case 35675:return Pg;case 35676:return Cg;case 5124:case 35670:return Ig;case 35667:case 35671:return Lg;case 35668:case 35672:return Dg;case 35669:case 35673:return Rg;case 5125:return kg;case 36294:return Og;case 36295:return Fg;case 36296:return Ng;case 35678:case 36198:case 36298:case 36306:case 35682:return Bg;case 35679:case 36299:case 36307:return zg;case 35680:case 36300:case 36308:case 36293:return Ug;case 36289:case 36303:case 36311:case 36292:return Vg}}(t.type)}}class jg{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const s=i[r];s.setValue(e,t[s.id],n)}}}const Wg=/(\w+)(\])?(\[|\.)?/g;function qg(e,t){e.seq.push(t),e.map[t.id]=t}function Xg(e,t,n){const i=e.name,r=i.length;for(Wg.lastIndex=0;;){const s=Wg.exec(i),a=Wg.lastIndex;let o=s[1];const l="]"===s[2],c=s[3];if(l&&(o|=0),void 0===c||"["===c&&a+2===r){qg(n,void 0===c?new Hg(o,e,t):new Gg(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new jg(o),qg(n,e)),n=e}}}class Yg{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);Xg(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,s=t.length;r!==s;++r){const s=t[r],a=n[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function $g(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let Kg=0;function Zg(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const i=parseInt(s[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),s=Math.min(t+6,n.length);for(let e=r;e<s;e++){const r=e+1;i.push(`${r===t?">":" "} ${r}: ${n[e]}`)}return i.join("\n")}(e.getShaderSource(t),i)}return r}function Qg(e,t){const n=function(e){const t=bd.getPrimaries(bd.workingColorSpace),n=bd.getPrimaries(e);let i;switch(t===n?i="":t===Gu&&n===Hu?i="LinearDisplayP3ToLinearSRGB":t===Hu&&n===Gu&&(i="LinearSRGBToLinearDisplayP3"),e){case Nu:case zu:return[i,"LinearTransferOETF"];case Fu:case Bu:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[i,"LinearTransferOETF"]}}(t);return`vec4 ${e}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function Jg(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 6:n="AgX";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function ev(e){return""!==e}function tv(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function nv(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const iv=/^[ \t]*#include +<([\w\d./]+)>/gm;function rv(e){return e.replace(iv,av)}const sv=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function av(e,t){let n=om[t];if(void 0===n){const e=sv.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=om[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return rv(n)}const ov=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function lv(e){return e.replace(ov,cv)}function cv(e,t,n,i){let r="";for(let e=parseInt(t);e<parseInt(n);e++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function hv(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function uv(e,t,n,i){const r=e.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case eu:case tu:t="ENVMAP_TYPE_CUBE";break;case ru:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),h=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===tu&&(t="ENVMAP_MODE_REFRACTION");return t}(n),u=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ev).join("\n")}(n),f=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(ev).join("\n")}(n),m=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(s),g=r.createProgram();let v,y,_=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(ev).join("\n"),v.length>0&&(v+="\n"),y=[p,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(ev).join("\n"),y.length>0&&(y+="\n")):(v=[hv(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ev).join("\n"),y=[p,hv(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?om.tonemapping_pars_fragment:"",0!==n.toneMapping?Jg("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",om.colorspace_pars_fragment,Qg("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(ev).join("\n")),a=rv(a),a=tv(a,n),a=nv(a,n),o=rv(o),o=tv(o,n),o=nv(o,n),a=lv(a),o=lv(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(_="#version 300 es\n",v=[f,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,y=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===qu?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===qu?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const b=_+v+a,x=_+y+o,S=$g(r,r.VERTEX_SHADER,b),E=$g(r,r.FRAGMENT_SHADER,x);function w(t){if(e.debug.checkShaderErrors){const n=r.getProgramInfoLog(g).trim(),i=r.getShaderInfoLog(S).trim(),s=r.getShaderInfoLog(E).trim();let a=!0,o=!0;if(!1===r.getProgramParameter(g,r.LINK_STATUS))if(a=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(r,g,S,E);else{const e=Zg(r,S,"vertex"),t=Zg(r,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+t)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==i&&""!==s||(o=!1);o&&(t.diagnostics={runnable:a,programLog:n,vertexShader:{log:i,prefix:v},fragmentShader:{log:s,prefix:y}})}r.deleteShader(S),r.deleteShader(E),T=new Yg(r,g),M=function(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),s=i.name;let a=1;i.type===e.FLOAT_MAT2&&(a=2),i.type===e.FLOAT_MAT3&&(a=3),i.type===e.FLOAT_MAT4&&(a=4),n[s]={type:i.type,location:e.getAttribLocation(t,s),locationSize:a}}return n}(r,g)}let T,M;r.attachShader(g,S),r.attachShader(g,E),void 0!==n.index0AttributeName?r.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),this.getUniforms=function(){return void 0===T&&w(this),T},this.getAttributes=function(){return void 0===M&&w(this),M};let A=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===A&&(A=r.getProgramParameter(g,37297)),A},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Kg++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=S,this.fragmentShader=E,this}let dv=0;class pv{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new fv(e),t.set(e,n)),n}}class fv{constructor(e){this.id=dv++,this.code=e,this.usedTimes=0}}function mv(e,t,n,i,r,s,a){const o=new Ep,l=new pv,c=[],h=r.isWebGL2,u=r.logarithmicDepthBuffer,d=r.vertexTextures;let p=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return 0===e?"uv":`uv${e}`}return{getParameters:function(s,o,c,g,v){const y=g.fog,_=v.geometry,b=s.isMeshStandardMaterial?g.environment:null,x=(s.isMeshStandardMaterial?n:t).get(s.envMap||b),S=x&&x.mapping===ru?x.image.height:null,E=f[s.type];null!==s.precision&&(p=r.getMaxPrecision(s.precision),p!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",p,"instead."));const w=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,T=void 0!==w?w.length:0;let M,A,P,C,I=0;if(void 0!==_.morphAttributes.position&&(I=1),void 0!==_.morphAttributes.normal&&(I=2),void 0!==_.morphAttributes.color&&(I=3),E){const e=cm[E];M=e.vertexShader,A=e.fragmentShader}else M=s.vertexShader,A=s.fragmentShader,l.update(s),P=l.getVertexShaderID(s),C=l.getFragmentShaderID(s);const L=e.getRenderTarget(),D=!0===v.isInstancedMesh,R=!0===v.isBatchedMesh,k=!!s.map,O=!!s.matcap,F=!!x,N=!!s.aoMap,B=!!s.lightMap,z=!!s.bumpMap,U=!!s.normalMap,V=!!s.displacementMap,H=!!s.emissiveMap,G=!!s.metalnessMap,j=!!s.roughnessMap,W=s.anisotropy>0,q=s.clearcoat>0,X=s.iridescence>0,Y=s.sheen>0,$=s.transmission>0,K=W&&!!s.anisotropyMap,Z=q&&!!s.clearcoatMap,Q=q&&!!s.clearcoatNormalMap,J=q&&!!s.clearcoatRoughnessMap,ee=X&&!!s.iridescenceMap,te=X&&!!s.iridescenceThicknessMap,ne=Y&&!!s.sheenColorMap,ie=Y&&!!s.sheenRoughnessMap,re=!!s.specularMap,se=!!s.specularColorMap,ae=!!s.specularIntensityMap,oe=$&&!!s.transmissionMap,le=$&&!!s.thicknessMap,ce=!!s.gradientMap,he=!!s.alphaMap,ue=s.alphaTest>0,de=!!s.alphaHash,pe=!!s.extensions,fe=!!_.attributes.uv1,me=!!_.attributes.uv2,ge=!!_.attributes.uv3;let ve=0;return s.toneMapped&&(null!==L&&!0!==L.isXRRenderTarget||(ve=e.toneMapping)),{isWebGL2:h,shaderID:E,shaderType:s.type,shaderName:s.name,vertexShader:M,fragmentShader:A,defines:s.defines,customVertexShaderID:P,customFragmentShaderID:C,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:p,batching:R,instancing:D,instancingColor:D&&null!==v.instanceColor,supportsVertexTextures:d,outputColorSpace:null===L?e.outputColorSpace:!0===L.isXRRenderTarget?L.texture.colorSpace:Nu,map:k,matcap:O,envMap:F,envMapMode:F&&x.mapping,envMapCubeUVHeight:S,aoMap:N,lightMap:B,bumpMap:z,normalMap:U,displacementMap:d&&V,emissiveMap:H,normalMapObjectSpace:U&&1===s.normalMapType,normalMapTangentSpace:U&&0===s.normalMapType,metalnessMap:G,roughnessMap:j,anisotropy:W,anisotropyMap:K,clearcoat:q,clearcoatMap:Z,clearcoatNormalMap:Q,clearcoatRoughnessMap:J,iridescence:X,iridescenceMap:ee,iridescenceThicknessMap:te,sheen:Y,sheenColorMap:ne,sheenRoughnessMap:ie,specularMap:re,specularColorMap:se,specularIntensityMap:ae,transmission:$,transmissionMap:oe,thicknessMap:le,gradientMap:ce,opaque:!1===s.transparent&&1===s.blending,alphaMap:he,alphaTest:ue,alphaHash:de,combine:s.combine,mapUv:k&&m(s.map.channel),aoMapUv:N&&m(s.aoMap.channel),lightMapUv:B&&m(s.lightMap.channel),bumpMapUv:z&&m(s.bumpMap.channel),normalMapUv:U&&m(s.normalMap.channel),displacementMapUv:V&&m(s.displacementMap.channel),emissiveMapUv:H&&m(s.emissiveMap.channel),metalnessMapUv:G&&m(s.metalnessMap.channel),roughnessMapUv:j&&m(s.roughnessMap.channel),anisotropyMapUv:K&&m(s.anisotropyMap.channel),clearcoatMapUv:Z&&m(s.clearcoatMap.channel),clearcoatNormalMapUv:Q&&m(s.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:J&&m(s.clearcoatRoughnessMap.channel),iridescenceMapUv:ee&&m(s.iridescenceMap.channel),iridescenceThicknessMapUv:te&&m(s.iridescenceThicknessMap.channel),sheenColorMapUv:ne&&m(s.sheenColorMap.channel),sheenRoughnessMapUv:ie&&m(s.sheenRoughnessMap.channel),specularMapUv:re&&m(s.specularMap.channel),specularColorMapUv:se&&m(s.specularColorMap.channel),specularIntensityMapUv:ae&&m(s.specularIntensityMap.channel),transmissionMapUv:oe&&m(s.transmissionMap.channel),thicknessMapUv:le&&m(s.thicknessMap.channel),alphaMapUv:he&&m(s.alphaMap.channel),vertexTangents:!!_.attributes.tangent&&(U||W),vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,vertexUv1s:fe,vertexUv2s:me,vertexUv3s:ge,pointsUvs:!0===v.isPoints&&!!_.attributes.uv&&(k||he),fog:!!y,useFog:!0===s.fog,fogExp2:y&&y.isFogExp2,flatShading:!0===s.flatShading,sizeAttenuation:!0===s.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==_.morphAttributes.position,morphNormals:void 0!==_.morphAttributes.normal,morphColors:void 0!==_.morphAttributes.color,morphTargetsCount:T,morphTextureStride:I,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:ve,useLegacyLights:e._useLegacyLights,decodeVideoTexture:k&&!0===s.map.isVideoTexture&&bd.getTransfer(s.map.colorSpace)===Vu,premultipliedAlpha:s.premultipliedAlpha,doubleSided:2===s.side,flipSided:1===s.side,useDepthPacking:s.depthPacking>=0,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:pe&&!0===s.extensions.derivatives,extensionFragDepth:pe&&!0===s.extensions.fragDepth,extensionDrawBuffers:pe&&!0===s.extensions.drawBuffers,extensionShaderTextureLOD:pe&&!0===s.extensions.shaderTextureLOD,extensionClipCullDistance:pe&&s.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0);t.supportsVertexTextures&&o.enable(1);t.instancing&&o.enable(2);t.instancingColor&&o.enable(3);t.matcap&&o.enable(4);t.envMap&&o.enable(5);t.normalMapObjectSpace&&o.enable(6);t.normalMapTangentSpace&&o.enable(7);t.clearcoat&&o.enable(8);t.iridescence&&o.enable(9);t.alphaTest&&o.enable(10);t.vertexColors&&o.enable(11);t.vertexAlphas&&o.enable(12);t.vertexUv1s&&o.enable(13);t.vertexUv2s&&o.enable(14);t.vertexUv3s&&o.enable(15);t.vertexTangents&&o.enable(16);t.anisotropy&&o.enable(17);t.alphaHash&&o.enable(18);t.batching&&o.enable(19);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.skinning&&o.enable(4);t.morphTargets&&o.enable(5);t.morphNormals&&o.enable(6);t.morphColors&&o.enable(7);t.premultipliedAlpha&&o.enable(8);t.shadowMapEnabled&&o.enable(9);t.useLegacyLights&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.transmission&&o.enable(15);t.sheen&&o.enable(16);t.opaque&&o.enable(17);t.pointsUvs&&o.enable(18);t.decodeVideoTexture&&o.enable(19);e.push(o.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=cm[t];n=Gf.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,t=c.length;e<t;e++){const t=c[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new uv(e,n,t,s),c.push(i)),i},releaseProgram:function(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function gv(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function vv(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function yv(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function _v(){const e=[];let t=0;const n=[],i=[],r=[];function s(n,i,r,s,a,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:s,renderOrder:n.renderOrder,z:a,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=a,l.group=o),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,a,o,l,c){const h=s(e,t,a,o,l,c);a.transmission>0?i.push(h):!0===a.transparent?r.push(h):n.push(h)},unshift:function(e,t,a,o,l,c){const h=s(e,t,a,o,l,c);a.transmission>0?i.unshift(h):!0===a.transparent?r.unshift(h):n.unshift(h)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||vv),i.length>1&&i.sort(t||yv),r.length>1&&r.sort(t||yv)}}}function bv(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let r;return void 0===i?(r=new _v,e.set(t,[r])):n>=i.length?(r=new _v,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function xv(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Fd,color:new ef};break;case"SpotLight":n={position:new Fd,direction:new Fd,color:new ef,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Fd,color:new ef,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Fd,skyColor:new ef,groundColor:new ef};break;case"RectAreaLight":n={color:new ef,position:new Fd,halfWidth:new Fd,halfHeight:new Fd}}return e[t.id]=n,n}}}let Sv=0;function Ev(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function wv(e,t){const n=new xv,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ld};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ld,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)r.probe.push(new Fd);const s=new Fd,a=new dp,o=new dp;return{setup:function(s,a){let o=0,l=0,c=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let h=0,u=0,d=0,p=0,f=0,m=0,g=0,v=0,y=0,_=0,b=0;s.sort(Ev);const x=!0===a?Math.PI:1;for(let e=0,t=s.length;e<t;e++){const t=s[e],a=t.color,S=t.intensity,E=t.distance,w=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=a.r*S*x,l+=a.g*S*x,c+=a.b*S*x;else if(t.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],S);b++}else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[h]=n,r.directionalShadowMap[h]=w,r.directionalShadowMatrix[h]=t.shadow.matrix,m++}r.directional[h]=e,h++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(S*x),e.distance=E,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,r.spot[d]=e;const s=t.shadow;if(t.map&&(r.spotLightMap[y]=t.map,y++,s.updateMatrices(t),t.castShadow&&_++),r.spotLightMatrix[d]=s.matrix,t.castShadow){const e=i.get(t);e.shadowBias=s.bias,e.shadowNormalBias=s.normalBias,e.shadowRadius=s.radius,e.shadowMapSize=s.mapSize,r.spotShadow[d]=e,r.spotShadowMap[d]=w,v++}d++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(S),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[u]=n,r.pointShadowMap[u]=w,r.pointShadowMatrix[u]=t.shadow.matrix,g++}r.point[u]=e,u++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(S*x),e.groundColor.copy(t.groundColor).multiplyScalar(S*x),r.hemi[f]=e,f++}}p>0&&(t.isWebGL2?!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=lm.LTC_FLOAT_1,r.rectAreaLTC2=lm.LTC_FLOAT_2):(r.rectAreaLTC1=lm.LTC_HALF_1,r.rectAreaLTC2=lm.LTC_HALF_2):!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=lm.LTC_FLOAT_1,r.rectAreaLTC2=lm.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=lm.LTC_HALF_1,r.rectAreaLTC2=lm.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=c;const S=r.hash;S.directionalLength===h&&S.pointLength===u&&S.spotLength===d&&S.rectAreaLength===p&&S.hemiLength===f&&S.numDirectionalShadows===m&&S.numPointShadows===g&&S.numSpotShadows===v&&S.numSpotMaps===y&&S.numLightProbes===b||(r.directional.length=h,r.spot.length=d,r.rectArea.length=p,r.point.length=u,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=v+y-_,r.spotLightMap.length=y,r.numSpotLightShadowsWithMaps=_,r.numLightProbes=b,S.directionalLength=h,S.pointLength=u,S.spotLength=d,S.rectAreaLength=p,S.hemiLength=f,S.numDirectionalShadows=m,S.numPointShadows=g,S.numSpotShadows=v,S.numSpotMaps=y,S.numLightProbes=b,r.version=Sv++)},setupView:function(e,t){let n=0,i=0,l=0,c=0,h=0;const u=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(u),n++}else if(d.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(u),e.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(u),l++}else if(d.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(u),o.identity(),a.copy(d.matrixWorld),a.premultiply(u),o.extractRotation(a),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(d.isPointLight){const e=r.point[i];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(u),i++}else if(d.isHemisphereLight){const e=r.hemi[h];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(u),h++}}},state:r}}function Tv(e,t){const n=new wv(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function Mv(e,t){let n=new WeakMap;return{get:function(i,r=0){const s=n.get(i);let a;return void 0===s?(a=new Tv(e,t),n.set(i,[a])):r>=s.length?(a=new Tv(e,t),s.push(a)):a=s[r],a},dispose:function(){n=new WeakMap}}}class Av extends rf{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Pv extends rf{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Cv(e,t,n){let i=new im;const r=new ld,s=new ld,a=new Id,o=new Av({depthPacking:3201}),l=new Pv,c={},h=n.maxTextureSize,u={0:1,1:0,2:2},d=new jf({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ld},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new _f;f.setAttribute("position",new lf(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Nf(f,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let v=this.type;function y(n,i){const s=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Dd(r.x,r.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,s,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,s,p,m,null)}function _(t,n,i,r){let s=null;const a=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==a)s=a;else if(s=!0===i.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=s.uuid,t=n.uuid;let i=c[e];void 0===i&&(i={},c[e]=i);let r=i[t];void 0===r&&(r=s.clone(),i[t]=r,n.addEventListener("dispose",x)),s=r}if(s.visible=n.visible,s.wireframe=n.wireframe,s.side=3===r?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:u[n.side],s.alphaMap=n.alphaMap,s.alphaTest=n.alphaTest,s.map=n.map,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.clipIntersection=n.clipIntersection,s.displacementMap=n.displacementMap,s.displacementScale=n.displacementScale,s.displacementBias=n.displacementBias,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,!0===i.isPointLight&&!0===s.isMeshDistanceMaterial){e.properties.get(s).light=i}return s}function b(n,r,s,a,o){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const i=t.update(n),l=n.material;if(Array.isArray(l)){const t=i.groups;for(let c=0,h=t.length;c<h;c++){const h=t[c],u=l[h.materialIndex];if(u&&u.visible){const t=_(n,u,a,o);n.onBeforeShadow(e,n,r,s,i,t,h),e.renderBufferDirect(s,null,i,t,n,h),n.onAfterShadow(e,n,r,s,i,t,h)}}}else if(l.visible){const t=_(n,l,a,o);n.onBeforeShadow(e,n,r,s,i,t,null),e.renderBufferDirect(s,null,i,t,n,null),n.onAfterShadow(e,n,r,s,i,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)b(l[e],r,s,a,o)}function x(e){e.target.removeEventListener("dispose",x);for(const t in c){const n=c[t],i=e.target.uuid;if(i in n){n[i].dispose(),delete n[i]}}}this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const p=3!==v&&3===this.type,f=3===v&&3!==this.type;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=c.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;r.copy(u.mapSize);const m=u.getFrameExtents();if(r.multiply(m),s.copy(u.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/m.x),r.x=s.x*m.x,u.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/m.y),r.y=s.y*m.y,u.mapSize.y=s.y)),null===u.map||!0===p||!0===f){const e=3!==this.type?{minFilter:lu,magFilter:lu}:{};null!==u.map&&u.map.dispose(),u.map=new Dd(r.x,r.y,e),u.map.texture.name=c.name+".shadowMap",u.camera.updateProjectionMatrix()}e.setRenderTarget(u.map),e.clear();const g=u.getViewportCount();for(let e=0;e<g;e++){const t=u.getViewport(e);a.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),d.viewport(a),u.updateMatrices(c,e),i=u.getFrustum(),b(n,o,u.camera,c,this.type)}!0!==u.isPointLightShadow&&3===this.type&&y(u,o),u.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,u)}}function Iv(e,t,n){const i=n.isWebGL2;const r=new function(){let t=!1;const n=new Id;let i=null;const r=new Id(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,s,a,o){!0===o&&(t*=a,i*=a,s*=a),n.set(t,i,s,a),!1===r.equals(n)&&(e.clearColor(t,i,s,a),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){let t=!1,n=null,i=null,r=null;return{setTest:function(t){t?H(e.DEPTH_TEST):G(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},a=new function(){let t=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null;return{setTest:function(n){t||(n?H(e.STENCIL_TEST):G(e.STENCIL_TEST))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,a){i===t&&r===n&&s===a||(e.stencilFunc(t,n,a),i=t,r=n,s=a)},setOp:function(t,n,i){a===t&&o===n&&l===i||(e.stencilOp(t,n,i),a=t,o=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null}}},o=new WeakMap,l=new WeakMap;let c={},h={},u=new WeakMap,d=[],p=null,f=!1,m=null,g=null,v=null,y=null,_=null,b=null,x=null,S=new ef(0,0,0),E=0,w=!1,T=null,M=null,A=null,P=null,C=null;const I=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,D=0;const R=e.getParameter(e.VERSION);-1!==R.indexOf("WebGL")?(D=parseFloat(/^WebGL (\d)/.exec(R)[1]),L=D>=1):-1!==R.indexOf("OpenGL ES")&&(D=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),L=D>=2);let k=null,O={};const F=e.getParameter(e.SCISSOR_BOX),N=e.getParameter(e.VIEWPORT),B=(new Id).fromArray(F),z=(new Id).fromArray(N);function U(t,n,r,s){const a=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let o=0;o<r;o++)!i||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage3D(n,0,e.RGBA,1,1,s,0,e.RGBA,e.UNSIGNED_BYTE,a);return o}const V={};function H(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function G(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}V[e.TEXTURE_2D]=U(e.TEXTURE_2D,e.TEXTURE_2D,1),V[e.TEXTURE_CUBE_MAP]=U(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(V[e.TEXTURE_2D_ARRAY]=U(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),V[e.TEXTURE_3D]=U(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),r.setClear(0,0,0,1),s.setClear(1),a.setClear(0),H(e.DEPTH_TEST),s.setFunc(3),X(!1),Y(1),H(e.CULL_FACE),q(0);const j={[Qh]:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT};if(i)j[103]=e.MIN,j[104]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(j[103]=e.MIN_EXT,j[104]=e.MAX_EXT)}const W={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,204:e.SRC_ALPHA,210:e.SRC_ALPHA_SATURATE,208:e.DST_COLOR,206:e.DST_ALPHA,203:e.ONE_MINUS_SRC_COLOR,205:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,207:e.ONE_MINUS_DST_ALPHA,211:e.CONSTANT_COLOR,212:e.ONE_MINUS_CONSTANT_COLOR,213:e.CONSTANT_ALPHA,214:e.ONE_MINUS_CONSTANT_ALPHA};function q(t,n,i,r,s,a,o,l,c,h){if(0!==t){if(!1===f&&(H(e.BLEND),f=!0),5===t)s=s||n,a=a||i,o=o||r,n===g&&s===_||(e.blendEquationSeparate(j[n],j[s]),g=n,_=s),i===v&&r===y&&a===b&&o===x||(e.blendFuncSeparate(W[i],W[r],W[a],W[o]),v=i,y=r,b=a,x=o),!1!==l.equals(S)&&c===E||(e.blendColor(l.r,l.g,l.b,c),S.copy(l),E=c),m=t,w=!1;else if(t!==m||h!==w){if(g===Qh&&_===Qh||(e.blendEquation(e.FUNC_ADD),g=Qh,_=Qh),h)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,y=null,b=null,x=null,S.set(0,0,0),E=0,m=t,w=h}}else!0===f&&(G(e.BLEND),f=!1)}function X(t){T!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),T=t)}function Y(t){0!==t?(H(e.CULL_FACE),t!==M&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):G(e.CULL_FACE),M=t}function $(t,n,i){t?(H(e.POLYGON_OFFSET_FILL),P===n&&C===i||(e.polygonOffset(n,i),P=n,C=i)):G(e.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:s,stencil:a},enable:H,disable:G,bindFramebuffer:function(t,n){return h[t]!==n&&(e.bindFramebuffer(t,n),h[t]=n,i&&(t===e.DRAW_FRAMEBUFFER&&(h[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(h[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(i,r){let s=d,a=!1;if(i)if(s=u.get(r),void 0===s&&(s=[],u.set(r,s)),i.isWebGLMultipleRenderTargets){const t=i.texture;if(s.length!==t.length||s[0]!==e.COLOR_ATTACHMENT0){for(let n=0,i=t.length;n<i;n++)s[n]=e.COLOR_ATTACHMENT0+n;s.length=t.length,a=!0}}else s[0]!==e.COLOR_ATTACHMENT0&&(s[0]=e.COLOR_ATTACHMENT0,a=!0);else s[0]!==e.BACK&&(s[0]=e.BACK,a=!0);a&&(n.isWebGL2?e.drawBuffers(s):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:q,setMaterial:function(t,n){2===t.side?G(e.CULL_FACE):H(e.CULL_FACE);let i=1===t.side;n&&(i=!i),X(i),1===t.blending&&!1===t.transparent?q(0):q(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),r.setMask(t.colorWrite);const o=t.stencilWrite;a.setTest(o),o&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),$(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?H(e.SAMPLE_ALPHA_TO_COVERAGE):G(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:X,setCullFace:Y,setLineWidth:function(t){t!==A&&(L&&e.lineWidth(t),A=t)},setPolygonOffset:$,setScissorTest:function(t){t?H(e.SCISSOR_TEST):G(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+I-1),k!==t&&(e.activeTexture(t),k=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===k?e.TEXTURE0+I-1:k);let r=O[i];void 0===r&&(r={type:void 0,texture:void 0},O[i]=r),r.type===t&&r.texture===n||(k!==i&&(e.activeTexture(i),k=i),e.bindTexture(t,n||V[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=O[k];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let i=l.get(n);void 0===i&&(i=new WeakMap,l.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){const i=l.get(n).get(t);o.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),o.set(n,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===B.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),B.copy(t))},viewport:function(t){!1===z.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),z.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===i&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},k=null,O={},h={},u=new WeakMap,d=[],p=null,f=!1,m=null,g=null,v=null,y=null,_=null,b=null,x=null,S=new ef(0,0,0),E=0,w=!1,T=null,M=null,A=null,P=null,C=null,B.set(0,0,e.canvas.width,e.canvas.height),z.set(0,0,e.canvas.width,e.canvas.height),r.reset(),s.reset(),a.reset()}}}function Lv(e,t,n,i,r,s,a){const o=r.isWebGL2,l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),h=new WeakMap;let u;const d=new WeakMap;let p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function f(e,t){return p?new OffscreenCanvas(e,t):dd("canvas")}function m(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?sd:Math.floor,s=i(r*e.width),a=i(r*e.height);void 0===u&&(u=f(s,a));const o=n?f(s,a):u;o.width=s,o.height=a;return o.getContext("2d").drawImage(e,0,0,s,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+a+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function g(e){return rd(e.width)&&rd(e.height)}function v(e,t){return e.generateMipmaps&&t&&e.minFilter!==lu&&e.minFilter!==uu}function y(t){e.generateMipmap(t)}function _(n,i,r,s,a=!1){if(!1===o)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;if(i===e.RED&&(r===e.FLOAT&&(l=e.R32F),r===e.HALF_FLOAT&&(l=e.R16F),r===e.UNSIGNED_BYTE&&(l=e.R8)),i===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(l=e.R8UI),r===e.UNSIGNED_SHORT&&(l=e.R16UI),r===e.UNSIGNED_INT&&(l=e.R32UI),r===e.BYTE&&(l=e.R8I),r===e.SHORT&&(l=e.R16I),r===e.INT&&(l=e.R32I)),i===e.RG&&(r===e.FLOAT&&(l=e.RG32F),r===e.HALF_FLOAT&&(l=e.RG16F),r===e.UNSIGNED_BYTE&&(l=e.RG8)),i===e.RGBA){const t=a?Uu:bd.getTransfer(s);r===e.FLOAT&&(l=e.RGBA32F),r===e.HALF_FLOAT&&(l=e.RGBA16F),r===e.UNSIGNED_BYTE&&(l=t===Vu?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)}return l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function b(e,t,n){return!0===v(e,n)||e.isFramebufferTexture&&e.minFilter!==lu&&e.minFilter!==uu?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function x(t){return t===lu||t===cu||t===hu?e.NEAREST:e.LINEAR}function S(e){const t=e.target;t.removeEventListener("dispose",S),function(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,r=d.get(n);if(r){const i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&w(e),0===Object.keys(r).length&&d.delete(n)}i.remove(e)}(t),t.isVideoTexture&&h.delete(t)}function E(t){const n=t.target;n.removeEventListener("dispose",E),function(t){const n=t.texture,r=i.get(t),s=i.get(n);void 0!==s.__webglTexture&&(e.deleteTexture(s.__webglTexture),a.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(r.__webglFramebuffer[t]))for(let n=0;n<r.__webglFramebuffer[t].length;n++)e.deleteFramebuffer(r.__webglFramebuffer[t][n]);else e.deleteFramebuffer(r.__webglFramebuffer[t]);r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[t])}else{if(Array.isArray(r.__webglFramebuffer))for(let t=0;t<r.__webglFramebuffer.length;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]);else e.deleteFramebuffer(r.__webglFramebuffer);if(r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let t=0;t<r.__webglColorRenderbuffer.length;t++)r.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[t]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,r=n.length;t<r;t++){const r=i.get(n[t]);r.__webglTexture&&(e.deleteTexture(r.__webglTexture),a.memory.textures--),i.remove(n[t])}i.remove(n),i.remove(t)}(n)}function w(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const r=t.source;delete d.get(r)[n.__cacheKey],a.memory.textures--}let T=0;function M(t,r){const s=i.get(t);if(t.isVideoTexture&&function(e){const t=a.render.frame;h.get(e)!==t&&(h.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&s.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void D(s,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,s.__webglTexture,e.TEXTURE0+r)}const A={[su]:e.REPEAT,[au]:e.CLAMP_TO_EDGE,[ou]:e.MIRRORED_REPEAT},P={[lu]:e.NEAREST,[cu]:e.NEAREST_MIPMAP_NEAREST,[hu]:e.NEAREST_MIPMAP_LINEAR,[uu]:e.LINEAR,1007:e.LINEAR_MIPMAP_NEAREST,[du]:e.LINEAR_MIPMAP_LINEAR},C={512:e.NEVER,519:e.ALWAYS,513:e.LESS,515:e.LEQUAL,514:e.EQUAL,518:e.GEQUAL,516:e.GREATER,517:e.NOTEQUAL};function I(n,s,a){if(a?(e.texParameteri(n,e.TEXTURE_WRAP_S,A[s.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,A[s.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,A[s.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,P[s.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,P[s.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),s.wrapS===au&&s.wrapT===au||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,x(s.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,x(s.minFilter)),s.minFilter!==lu&&s.minFilter!==uu&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),s.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,C[s.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(s.magFilter===lu)return;if(s.minFilter!==hu&&s.minFilter!==du)return;if(s.type===vu&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&s.type===yu&&!1===t.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function L(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",S));const r=n.source;let s=d.get(r);void 0===s&&(s={},d.set(r,s));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===s[o]&&(s[o]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,i=!0),s[o].usedTimes++;const r=s[t.__cacheKey];void 0!==r&&(s[t.__cacheKey].usedTimes--,0===r.usedTimes&&w(n)),t.__cacheKey=o,t.__webglTexture=s[o].texture}return i}function D(t,a,l){let c=e.TEXTURE_2D;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(c=e.TEXTURE_2D_ARRAY),a.isData3DTexture&&(c=e.TEXTURE_3D);const h=L(t,a),u=a.source;n.bindTexture(c,t.__webglTexture,e.TEXTURE0+l);const d=i.get(u);if(u.version!==d.__version||!0===h){n.activeTexture(e.TEXTURE0+l);const t=bd.getPrimaries(bd.workingColorSpace),i=a.colorSpace===Ou?null:bd.getPrimaries(a.colorSpace),p=a.colorSpace===Ou||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);const f=function(e){return!o&&(e.wrapS!==au||e.wrapT!==au||e.minFilter!==lu&&e.minFilter!==uu)}(a)&&!1===g(a.image);let x=m(a.image,f,!1,r.maxTextureSize);x=B(a,x);const S=g(x)||o,E=s.convert(a.format,a.colorSpace);let w,T=s.convert(a.type),M=_(a.internalFormat,E,T,a.colorSpace,a.isVideoTexture);I(c,a,S);const A=a.mipmaps,P=o&&!0!==a.isVideoTexture&&36196!==M,C=void 0===d.__version||!0===h,L=b(a,x,S);if(a.isDepthTexture)M=e.DEPTH_COMPONENT,o?M=a.type===vu?e.DEPTH_COMPONENT32F:a.type===gu?e.DEPTH_COMPONENT24:a.type===_u?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:a.type===vu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),a.format===xu&&M===e.DEPTH_COMPONENT&&a.type!==fu&&a.type!==gu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),a.type=gu,T=s.convert(a.type)),a.format===Su&&M===e.DEPTH_COMPONENT&&(M=e.DEPTH_STENCIL,a.type!==_u&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),a.type=_u,T=s.convert(a.type))),C&&(P?n.texStorage2D(e.TEXTURE_2D,1,M,x.width,x.height):n.texImage2D(e.TEXTURE_2D,0,M,x.width,x.height,0,E,T,null));else if(a.isDataTexture)if(A.length>0&&S){P&&C&&n.texStorage2D(e.TEXTURE_2D,L,M,A[0].width,A[0].height);for(let t=0,i=A.length;t<i;t++)w=A[t],P?n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,E,T,w.data):n.texImage2D(e.TEXTURE_2D,t,M,w.width,w.height,0,E,T,w.data);a.generateMipmaps=!1}else P?(C&&n.texStorage2D(e.TEXTURE_2D,L,M,x.width,x.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,x.width,x.height,E,T,x.data)):n.texImage2D(e.TEXTURE_2D,0,M,x.width,x.height,0,E,T,x.data);else if(a.isCompressedTexture)if(a.isCompressedArrayTexture){P&&C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,L,M,A[0].width,A[0].height,x.depth);for(let t=0,i=A.length;t<i;t++)w=A[t],a.format!==bu?null!==E?P?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,x.depth,E,w.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,M,w.width,w.height,x.depth,0,w.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):P?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,x.depth,E,T,w.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,M,w.width,w.height,x.depth,0,E,T,w.data)}else{P&&C&&n.texStorage2D(e.TEXTURE_2D,L,M,A[0].width,A[0].height);for(let t=0,i=A.length;t<i;t++)w=A[t],a.format!==bu?null!==E?P?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,E,w.data):n.compressedTexImage2D(e.TEXTURE_2D,t,M,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):P?n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,E,T,w.data):n.texImage2D(e.TEXTURE_2D,t,M,w.width,w.height,0,E,T,w.data)}else if(a.isDataArrayTexture)P?(C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,L,M,x.width,x.height,x.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,x.width,x.height,x.depth,E,T,x.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,M,x.width,x.height,x.depth,0,E,T,x.data);else if(a.isData3DTexture)P?(C&&n.texStorage3D(e.TEXTURE_3D,L,M,x.width,x.height,x.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,x.width,x.height,x.depth,E,T,x.data)):n.texImage3D(e.TEXTURE_3D,0,M,x.width,x.height,x.depth,0,E,T,x.data);else if(a.isFramebufferTexture){if(C)if(P)n.texStorage2D(e.TEXTURE_2D,L,M,x.width,x.height);else{let t=x.width,i=x.height;for(let r=0;r<L;r++)n.texImage2D(e.TEXTURE_2D,r,M,t,i,0,E,T,null),t>>=1,i>>=1}}else if(A.length>0&&S){P&&C&&n.texStorage2D(e.TEXTURE_2D,L,M,A[0].width,A[0].height);for(let t=0,i=A.length;t<i;t++)w=A[t],P?n.texSubImage2D(e.TEXTURE_2D,t,0,0,E,T,w):n.texImage2D(e.TEXTURE_2D,t,M,E,T,w);a.generateMipmaps=!1}else P?(C&&n.texStorage2D(e.TEXTURE_2D,L,M,x.width,x.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,E,T,x)):n.texImage2D(e.TEXTURE_2D,0,M,E,T,x);v(a,S)&&y(c),d.__version=u.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}function R(t,r,a,o,c,h){const u=s.convert(a.format,a.colorSpace),d=s.convert(a.type),p=_(a.internalFormat,u,d,a.colorSpace);if(!i.get(r).__hasExternalTextures){const t=Math.max(1,r.width>>h),i=Math.max(1,r.height>>h);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,h,p,t,i,r.depth,0,u,d,null):n.texImage2D(c,h,p,t,i,0,u,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),N(r)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,o,c,i.get(a).__webglTexture,0,F(r)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,o,c,i.get(a).__webglTexture,h),n.bindFramebuffer(e.FRAMEBUFFER,null)}function k(t,n,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let r=!0===o?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(i||N(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===vu?r=e.DEPTH_COMPONENT32F:t.type===gu&&(r=e.DEPTH_COMPONENT24));const i=F(n);N(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,r,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,i,r,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,r,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const r=F(n);i&&!1===N(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):N(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let r=0;r<t.length;r++){const a=t[r],o=s.convert(a.format,a.colorSpace),c=s.convert(a.type),h=_(a.internalFormat,o,c,a.colorSpace),u=F(n);i&&!1===N(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,h,n.width,n.height):N(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,h,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,h,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function O(t){const r=i.get(t),s=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),M(r.depthTexture,0);const s=i.get(r.depthTexture).__webglTexture,a=F(r);if(r.depthTexture.format===xu)N(r)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else{if(r.depthTexture.format!==Su)throw new Error("Unknown depthTexture format");N(r)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0)}}(r.__webglFramebuffer,t)}else if(s){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=e.createRenderbuffer(),k(r.__webglDepthbuffer[i],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),k(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function F(e){return Math.min(r.maxSamples,e.samples)}function N(e){const n=i.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function B(e,n){const i=e.colorSpace,r=e.format,s=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===Xu||i!==Nu&&i!==Ou&&(bd.getTransfer(i)===Vu?!1===o?!0===t.has("EXT_sRGB")&&r===bu?(e.format=Xu,e.minFilter=uu,e.generateMipmaps=!1):n=wd.sRGBToLinear(n):r===bu&&s===pu||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),n}this.allocateTextureUnit=function(){const e=T;return e>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+r.maxTextures),T+=1,e},this.resetTextureUnits=function(){T=0},this.setTexture2D=M,this.setTexture2DArray=function(t,r){const s=i.get(t);t.version>0&&s.__version!==t.version?D(s,t,r):n.bindTexture(e.TEXTURE_2D_ARRAY,s.__webglTexture,e.TEXTURE0+r)},this.setTexture3D=function(t,r){const s=i.get(t);t.version>0&&s.__version!==t.version?D(s,t,r):n.bindTexture(e.TEXTURE_3D,s.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,a){const l=i.get(t);t.version>0&&l.__version!==t.version?function(t,a,l){if(6!==a.image.length)return;const c=L(t,a),h=a.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+l);const u=i.get(h);if(h.version!==u.__version||!0===c){n.activeTexture(e.TEXTURE0+l);const t=bd.getPrimaries(bd.workingColorSpace),i=a.colorSpace===Ou?null:bd.getPrimaries(a.colorSpace),d=a.colorSpace===Ou||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);const p=a.isCompressedTexture||a.image[0].isCompressedTexture,f=a.image[0]&&a.image[0].isDataTexture,x=[];for(let e=0;e<6;e++)x[e]=p||f?f?a.image[e].image:a.image[e]:m(a.image[e],!1,!0,r.maxCubemapSize),x[e]=B(a,x[e]);const S=x[0],E=g(S)||o,w=s.convert(a.format,a.colorSpace),T=s.convert(a.type),M=_(a.internalFormat,w,T,a.colorSpace),A=o&&!0!==a.isVideoTexture,P=void 0===u.__version||!0===c;let C,L=b(a,S,E);if(I(e.TEXTURE_CUBE_MAP,a,E),p){A&&P&&n.texStorage2D(e.TEXTURE_CUBE_MAP,L,M,S.width,S.height);for(let t=0;t<6;t++){C=x[t].mipmaps;for(let i=0;i<C.length;i++){const r=C[i];a.format!==bu?null!==w?A?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,w,r.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,M,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,w,T,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,M,r.width,r.height,0,w,T,r.data)}}}else{C=a.mipmaps,A&&P&&(C.length>0&&L++,n.texStorage2D(e.TEXTURE_CUBE_MAP,L,M,x[0].width,x[0].height));for(let t=0;t<6;t++)if(f){A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,x[t].width,x[t].height,w,T,x[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,M,x[t].width,x[t].height,0,w,T,x[t].data);for(let i=0;i<C.length;i++){const r=C[i].image[t].image;A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,r.width,r.height,w,T,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,M,r.width,r.height,0,w,T,r.data)}}else{A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,w,T,x[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,M,w,T,x[t]);for(let i=0;i<C.length;i++){const r=C[i];A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,w,T,r.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,M,w,T,r.image[t])}}}v(a,E)&&y(e.TEXTURE_CUBE_MAP),u.__version=h.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}(l,t,a):n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture,e.TEXTURE0+a)},this.rebindTextures=function(t,n,r){const s=i.get(t);void 0!==n&&R(s.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&O(t)},this.setupRenderTarget=function(t){const l=t.texture,c=i.get(t),h=i.get(l);t.addEventListener("dispose",E),!0!==t.isWebGLMultipleRenderTargets&&(void 0===h.__webglTexture&&(h.__webglTexture=e.createTexture()),h.__version=l.version,a.memory.textures++);const u=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,p=g(t)||o;if(u){c.__webglFramebuffer=[];for(let t=0;t<6;t++)if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer[t]=[];for(let n=0;n<l.mipmaps.length;n++)c.__webglFramebuffer[t][n]=e.createFramebuffer()}else c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer=[];for(let t=0;t<l.mipmaps.length;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else c.__webglFramebuffer=e.createFramebuffer();if(d)if(r.drawBuffers){const n=t.texture;for(let t=0,r=n.length;t<r;t++){const r=i.get(n[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&t.samples>0&&!1===N(t)){const i=d?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){const r=i[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const a=s.convert(r.format,r.colorSpace),o=s.convert(r.type),l=_(r.internalFormat,a,o,r.colorSpace,!0===t.isXRRenderTarget),h=F(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,h,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),k(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){n.bindTexture(e.TEXTURE_CUBE_MAP,h.__webglTexture),I(e.TEXTURE_CUBE_MAP,l,p);for(let n=0;n<6;n++)if(o&&l.mipmaps&&l.mipmaps.length>0)for(let i=0;i<l.mipmaps.length;i++)R(c.__webglFramebuffer[n][i],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else R(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);v(l,p)&&y(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){const r=t.texture;for(let s=0,a=r.length;s<a;s++){const a=r[s],o=i.get(a);n.bindTexture(e.TEXTURE_2D,o.__webglTexture),I(e.TEXTURE_2D,a,p),R(c.__webglFramebuffer,t,a,e.COLOR_ATTACHMENT0+s,e.TEXTURE_2D,0),v(a,p)&&y(e.TEXTURE_2D)}n.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(o?i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(i,h.__webglTexture),I(i,l,p),o&&l.mipmaps&&l.mipmaps.length>0)for(let n=0;n<l.mipmaps.length;n++)R(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,i,n);else R(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,i,0);v(l,p)&&y(i),n.unbindTexture()}t.depthBuffer&&O(t)},this.updateRenderTargetMipmap=function(t){const r=g(t)||o,s=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let a=0,o=s.length;a<o;a++){const o=s[a];if(v(o,r)){const r=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=i.get(o).__webglTexture;n.bindTexture(r,s),y(r),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(o&&t.samples>0&&!1===N(t)){const r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],s=t.width,a=t.height;let o=e.COLOR_BUFFER_BIT;const l=[],h=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=i.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(let t=0;t<r.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<r.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(h);const p=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===p&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),d&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]),!0===p&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[h]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[h])),d){const t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,s,a,0,0,s,a,o,e.NEAREST),c&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<r.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const s=i.get(r[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,s,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=O,this.setupFrameBufferTexture=R,this.useMultisampledRTT=N}function Dv(e,t,n){const i=n.isWebGL2;return{convert:function(n,r=""){let s;const a=bd.getTransfer(r);if(n===pu)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(n===fu)return e.UNSIGNED_SHORT;if(n===mu)return e.INT;if(n===gu)return e.UNSIGNED_INT;if(n===vu)return e.FLOAT;if(n===yu)return i?e.HALF_FLOAT:(s=t.get("OES_texture_half_float"),null!==s?s.HALF_FLOAT_OES:null);if(1021===n)return e.ALPHA;if(n===bu)return e.RGBA;if(1024===n)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(n===xu)return e.DEPTH_COMPONENT;if(n===Su)return e.DEPTH_STENCIL;if(n===Xu)return s=t.get("EXT_sRGB"),null!==s?s.SRGB_ALPHA_EXT:null;if(1028===n)return e.RED;if(1029===n)return e.RED_INTEGER;if(1030===n)return e.RG;if(1031===n)return e.RG_INTEGER;if(1033===n)return e.RGBA_INTEGER;if(n===Eu||n===wu||n===Tu||n===Mu)if(a===Vu){if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(n===Eu)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===wu)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Tu)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Mu)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=t.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(n===Eu)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===wu)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Tu)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Mu)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(s=t.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(35840===n)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return s=t.get("WEBGL_compressed_texture_etc1"),null!==s?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(s=t.get("WEBGL_compressed_texture_etc"),null===s)return null;if(37492===n)return a===Vu?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(37496===n)return a===Vu?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(s=t.get("WEBGL_compressed_texture_astc"),null===s)return null;if(37808===n)return a===Vu?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return a===Vu?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return a===Vu?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return a===Vu?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return a===Vu?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return a===Vu?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return a===Vu?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return a===Vu?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return a===Vu?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return a===Vu?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return a===Vu?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return a===Vu?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return a===Vu?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return a===Vu?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Au||36494===n||36495===n){if(s=t.get("EXT_texture_compression_bptc"),null===s)return null;if(n===Au)return a===Vu?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===n)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===n)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===n||36284===n||36285===n||36286===n){if(s=t.get("EXT_texture_compression_rgtc"),null===s)return null;if(n===Au)return s.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===_u?i?e.UNSIGNED_INT_24_8:(s=t.get("WEBGL_depth_texture"),null!==s?s.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class Rv extends qf{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class kv extends Np{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Ov={type:"move"};class Fv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new kv,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new kv,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Fd,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Fd),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new kv,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Fd,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Fd),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){s=!0;for(const i of e.hand.values()){const e=t.getJointPose(i,n),r=this._getHandJoint(l,i);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=i.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&a>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Ov)))}return null!==a&&(a.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new kv;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Nv extends Ku{constructor(e,t){super();const n=this;let i=null,r=1,s=null,a="local-floor",o=1,l=null,c=null,h=null,u=null,d=null,p=null;const f=t.getContextAttributes();let m=null,g=null;const v=[],y=[],_=new ld;let b=null;const x=new qf;x.layers.enable(1),x.viewport=new Id;const S=new qf;S.layers.enable(2),S.viewport=new Id;const E=[x,S],w=new Rv;w.layers.enable(1),w.layers.enable(2);let T=null,M=null;function A(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const n=v[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||s),n.dispatchEvent({type:e.type,data:e.inputSource}))}function P(){i.removeEventListener("select",A),i.removeEventListener("selectstart",A),i.removeEventListener("selectend",A),i.removeEventListener("squeeze",A),i.removeEventListener("squeezestart",A),i.removeEventListener("squeezeend",A),i.removeEventListener("end",P),i.removeEventListener("inputsourceschange",C);for(let e=0;e<v.length;e++){const t=y[e];null!==t&&(y[e]=null,v[e].disconnect(t))}T=null,M=null,e.setRenderTarget(m),d=null,u=null,h=null,i=null,g=null,k.stop(),n.isPresenting=!1,e.setPixelRatio(b),e.setSize(_.width,_.height,!1),n.dispatchEvent({type:"sessionend"})}function C(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=y.indexOf(n);i>=0&&(y[i]=null,v[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=y.indexOf(n);if(-1===i){for(let e=0;e<v.length;e++){if(e>=y.length){y.push(n),i=e;break}if(null===y[e]){y[e]=n,i=e;break}}if(-1===i)break}const r=v[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new Fv,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new Fv,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new Fv,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==u?u:d},this.getBinding=function(){return h},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){if(m=e.getRenderTarget(),i.addEventListener("select",A),i.addEventListener("selectstart",A),i.addEventListener("selectend",A),i.addEventListener("squeeze",A),i.addEventListener("squeezestart",A),i.addEventListener("squeezeend",A),i.addEventListener("end",P),i.addEventListener("inputsourceschange",C),!0!==f.xrCompatible&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(_),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),g=new Dd(d.framebufferWidth,d.framebufferHeight,{format:bu,type:pu,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil})}else{let n=null,s=null,a=null;f.depth&&(a=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=f.stencil?Su:xu,s=f.stencil?_u:gu);const o={colorFormat:t.RGBA8,depthFormat:a,scaleFactor:r};h=new XRWebGLBinding(i,t),u=h.createProjectionLayer(o),i.updateRenderState({layers:[u]}),e.setPixelRatio(1),e.setSize(u.textureWidth,u.textureHeight,!1),g=new Dd(u.textureWidth,u.textureHeight,{format:bu,type:pu,depthTexture:new Gm(u.textureWidth,u.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0});e.properties.get(g).__ignoreDepthValues=u.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await i.requestReferenceSpace(a),k.setContext(i),k.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode};const I=new Fd,L=new Fd;function D(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;w.near=S.near=x.near=e.near,w.far=S.far=x.far=e.far,T===w.near&&M===w.far||(i.updateRenderState({depthNear:w.near,depthFar:w.far}),T=w.near,M=w.far);const t=e.parent,n=w.cameras;D(w,t);for(let e=0;e<n.length;e++)D(n[e],t);2===n.length?function(e,t,n){I.setFromMatrixPosition(t.matrixWorld),L.setFromMatrixPosition(n.matrixWorld);const i=I.distanceTo(L),r=t.projectionMatrix.elements,s=n.projectionMatrix.elements,a=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],h=(r[8]-1)/r[0],u=(s[8]+1)/s[0],d=a*h,p=a*u,f=i/(-h+u),m=f*-h;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+f,v=o+f,y=d-m,_=p+(i-m),b=l*o/v*g,x=c*o/v*g;e.projectionMatrix.makePerspective(y,_,b,x,g,v),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(w,x,S):w.projectionMatrix.copy(x.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Ju*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,w,t)},this.getCamera=function(){return w},this.getFoveation=function(){if(null!==u||null!==d)return o},this.setFoveation=function(e){o=e,null!==u&&(u.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)};let R=null;const k=new rm;k.setAnimationLoop((function(t,i){if(c=i.getViewerPose(l||s),p=i,null!==c){const t=c.views;null!==d&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==w.cameras.length&&(w.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){const r=t[i];let s=null;if(null!==d)s=d.getViewport(r);else{const t=h.getViewSubImage(u,r);s=t.viewport,0===i&&(e.setRenderTargetTextures(g,t.colorTexture,u.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let a=E[i];void 0===a&&(a=new qf,a.layers.enable(i),a.viewport=new Id,E[i]=a),a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(r.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(s.x,s.y,s.width,s.height),0===i&&(w.matrix.copy(a.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale)),!0===n&&w.cameras.push(a)}}for(let e=0;e<v.length;e++){const t=y[e],n=v[e];null!==t&&void 0!==n&&n.update(t,i,l||s)}R&&R(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),p=null})),this.setAnimationLoop=function(e){R=e},this.dispose=function(){}}}function Bv(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(i,r){i.opacity.value=r.opacity,r.color&&i.diffuse.value.copy(r.color),r.emissive&&i.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(i.map.value=r.map,n(r.map,i.mapTransform)),r.alphaMap&&(i.alphaMap.value=r.alphaMap,n(r.alphaMap,i.alphaMapTransform)),r.bumpMap&&(i.bumpMap.value=r.bumpMap,n(r.bumpMap,i.bumpMapTransform),i.bumpScale.value=r.bumpScale,1===r.side&&(i.bumpScale.value*=-1)),r.normalMap&&(i.normalMap.value=r.normalMap,n(r.normalMap,i.normalMapTransform),i.normalScale.value.copy(r.normalScale),1===r.side&&i.normalScale.value.negate()),r.displacementMap&&(i.displacementMap.value=r.displacementMap,n(r.displacementMap,i.displacementMapTransform),i.displacementScale.value=r.displacementScale,i.displacementBias.value=r.displacementBias),r.emissiveMap&&(i.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,i.emissiveMapTransform)),r.specularMap&&(i.specularMap.value=r.specularMap,n(r.specularMap,i.specularMapTransform)),r.alphaTest>0&&(i.alphaTest.value=r.alphaTest);const s=t.get(r).envMap;if(s&&(i.envMap.value=s,i.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,i.reflectivity.value=r.reflectivity,i.ior.value=r.ior,i.refractionRatio.value=r.refractionRatio),r.lightMap){i.lightMap.value=r.lightMap;const t=!0===e._useLegacyLights?Math.PI:1;i.lightMapIntensity.value=r.lightMapIntensity*t,n(r.lightMap,i.lightMapTransform)}r.aoMap&&(i.aoMap.value=r.aoMap,i.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,i.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,Hf(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,s,a,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(e,r):r.isMeshToonMaterial?(i(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(i(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(i(e,r),function(e,i){e.metalness.value=i.metalness,i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,e.metalnessMapTransform));e.roughness.value=i.roughness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,e.roughnessMapTransform));t.get(i).envMap&&(e.envMapIntensity.value=i.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),1===t.side&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,o)):r.isMeshMatcapMaterial?(i(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?i(e,r):r.isMeshDistanceMaterial?(i(e,r),function(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?i(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,s,a):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function zv(e,t,n,i){let r={},s={},a=[];const o=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,n,i){const r=e.value,s=t+"_"+n;if(void 0===i[s])return i[s]="number"==typeof r||"boolean"==typeof r?r:r.clone(),!0;{const e=i[s];if("number"==typeof r||"boolean"==typeof r){if(e!==r)return i[s]=r,!0}else if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function h(t){const n=t.target;n.removeEventListener("dispose",h);const i=a.indexOf(n.__bindingPointIndex);a.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete s[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,u){let d=r[n.id];void 0===d&&(!function(e){const t=e.uniforms;let n=0;const i=16;for(let e=0,r=t.length;e<r;e++){const r=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0,t=r.length;e<t;e++){const t=r[e],s=Array.isArray(t.value)?t.value:[t.value];for(let e=0,r=s.length;e<r;e++){const r=c(s[e]),a=n%i;0!==a&&i-a<r.boundary&&(n+=i-a),t.__data=new Float32Array(r.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,n+=r.storage}}}const r=n%i;r>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,s=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,r,s),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=d,n.addEventListener("dispose",h));const p=u.program;i.updateUBOMapping(n,p);const f=t.render.frame;s[n.id]!==f&&(!function(t){const n=r[t.id],i=t.uniforms,s=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=i.length;t<n;t++){const n=Array.isArray(i[t])?i[t]:[i[t]];for(let i=0,r=n.length;i<r;i++){const r=n[i];if(!0===l(r,t,i,s)){const t=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let i=0;for(let s=0;s<n.length;s++){const a=n[s],o=c(a);"number"==typeof a||"boolean"==typeof a?(r.__data[0]=a,e.bufferSubData(e.UNIFORM_BUFFER,t+i,r.__data)):a.isMatrix3?(r.__data[0]=a.elements[0],r.__data[1]=a.elements[1],r.__data[2]=a.elements[2],r.__data[3]=0,r.__data[4]=a.elements[3],r.__data[5]=a.elements[4],r.__data[6]=a.elements[5],r.__data[7]=0,r.__data[8]=a.elements[6],r.__data[9]=a.elements[7],r.__data[10]=a.elements[8],r.__data[11]=0):(a.toArray(r.__data,i),i+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,r.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),s[n.id]=f)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);a=[],r={},s={}}}}class Uv{constructor(e={}){const{canvas:t=pd(),context:n=null,depth:i=!0,stencil:r=!0,alpha:s=!1,antialias:a=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:h=!1}=e;let u;this.isWebGLRenderer=!0,u=null!==n?n.getContextAttributes().alpha:s;const d=new Uint32Array(4),p=new Int32Array(4);let f=null,m=null;const g=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Fu,this._useLegacyLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const y=this;let _=!1,b=0,x=0,S=null,E=-1,w=null;const T=new Id,M=new Id;let A=null;const P=new ef(0);let C=0,I=t.width,L=t.height,D=1,R=null,k=null;const O=new Id(0,0,I,L),F=new Id(0,0,I,L);let N=!1;const B=new im;let z=!1,U=!1,V=null;const H=new dp,G=new ld,j=new Fd,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function q(){return null===S?D:1}let X,Y,$,K,Z,Q,J,ee,te,ne,ie,re,se,ae,oe,le,ce,he,ue,de,pe,fe,me,ge,ve=n;function ye(e,n){for(let i=0;i<e.length;i++){const r=e[i],s=t.getContext(r,n);if(null!==s)return s}return null}try{const e={alpha:!0,depth:i,stencil:r,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r160"),t.addEventListener("webglcontextlost",xe,!1),t.addEventListener("webglcontextrestored",Se,!1),t.addEventListener("webglcontextcreationerror",Ee,!1),null===ve){const t=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&t.shift(),ve=ye(t,e),null===ve)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!=typeof WebGLRenderingContext&&ve instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===ve.getShaderPrecisionFormat&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function _e(){X=new Om(ve),Y=new fm(ve,X,e),X.init(Y),fe=new Dv(ve,X,Y),$=new Iv(ve,X,Y),K=new Bm(ve),Z=new gv,Q=new Lv(ve,X,$,Z,Y,fe,K),J=new gm(y),ee=new km(y),te=new sm(ve,Y),me=new dm(ve,X,te,Y),ne=new Fm(ve,te,K,me),ie=new Hm(ve,ne,te,K),ue=new Vm(ve,Y,Q),le=new mm(Z),re=new mv(y,J,ee,X,Y,me,le),se=new Bv(y,Z),ae=new bv,oe=new Mv(X,Y),he=new um(y,J,ee,$,ie,u,o),ce=new Cv(y,ie,Y),ge=new zv(ve,K,Y,$),de=new pm(ve,X,K,Y),pe=new Nm(ve,X,K,Y),K.programs=re.programs,y.capabilities=Y,y.extensions=X,y.properties=Z,y.renderLists=ae,y.shadowMap=ce,y.state=$,y.info=K}_e();const be=new Nv(y,ve);function xe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function Se(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const e=K.autoReset,t=ce.enabled,n=ce.autoUpdate,i=ce.needsUpdate,r=ce.type;_e(),K.autoReset=e,ce.enabled=t,ce.autoUpdate=n,ce.needsUpdate=i,ce.type=r}function Ee(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function we(e){const t=e.target;t.removeEventListener("dispose",we),function(e){(function(e){const t=Z.get(e).programs;void 0!==t&&(t.forEach((function(e){re.releaseProgram(e)})),e.isShaderMaterial&&re.releaseShaderCache(e))})(e),Z.remove(e)}(t)}function Te(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,ke(e,t,n),e.side=0,e.needsUpdate=!0,ke(e,t,n),e.side=2):ke(e,t,n)}this.xr=be,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=X.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=X.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(e){void 0!==e&&(D=e,this.setSize(I,L,!1))},this.getSize=function(e){return e.set(I,L)},this.setSize=function(e,n,i=!0){be.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(I=e,L=n,t.width=Math.floor(e*D),t.height=Math.floor(n*D),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(I*D,L*D).floor()},this.setDrawingBufferSize=function(e,n,i){I=e,L=n,D=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(T)},this.getViewport=function(e){return e.copy(O)},this.setViewport=function(e,t,n,i){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,i),$.viewport(T.copy(O).multiplyScalar(D).floor())},this.getScissor=function(e){return e.copy(F)},this.setScissor=function(e,t,n,i){e.isVector4?F.set(e.x,e.y,e.z,e.w):F.set(e,t,n,i),$.scissor(M.copy(F).multiplyScalar(D).floor())},this.getScissorTest=function(){return N},this.setScissorTest=function(e){$.setScissorTest(N=e)},this.setOpaqueSort=function(e){R=e},this.setTransparentSort=function(e){k=e},this.getClearColor=function(e){return e.copy(he.getClearColor())},this.setClearColor=function(){he.setClearColor.apply(he,arguments)},this.getClearAlpha=function(){return he.getClearAlpha()},this.setClearAlpha=function(){he.setClearAlpha.apply(he,arguments)},this.clear=function(e=!0,t=!0,n=!0){let i=0;if(e){let e=!1;if(null!==S){const t=S.texture.format;e=1033===t||1031===t||1029===t}if(e){const e=S.texture.type,t=e===pu||e===gu||e===fu||e===_u||1017===e||1018===e,n=he.getClearColor(),i=he.getClearAlpha(),r=n.r,s=n.g,a=n.b;t?(d[0]=r,d[1]=s,d[2]=a,d[3]=i,ve.clearBufferuiv(ve.COLOR,0,d)):(p[0]=r,p[1]=s,p[2]=a,p[3]=i,ve.clearBufferiv(ve.COLOR,0,p))}else i|=ve.COLOR_BUFFER_BIT}t&&(i|=ve.DEPTH_BUFFER_BIT),n&&(i|=ve.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ve.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",xe,!1),t.removeEventListener("webglcontextrestored",Se,!1),t.removeEventListener("webglcontextcreationerror",Ee,!1),ae.dispose(),oe.dispose(),Z.dispose(),J.dispose(),ee.dispose(),ie.dispose(),me.dispose(),ge.dispose(),re.dispose(),be.dispose(),be.removeEventListener("sessionstart",Ae),be.removeEventListener("sessionend",Pe),V&&(V.dispose(),V=null),Ce.stop()},this.renderBufferDirect=function(e,t,n,i,r,s){null===t&&(t=W);const a=r.isMesh&&r.matrixWorld.determinant()<0,o=function(e,t,n,i,r){!0!==t.isScene&&(t=W);Q.resetTextureUnits();const s=t.fog,a=i.isMeshStandardMaterial?t.environment:null,o=null===S?y.outputColorSpace:!0===S.isXRRenderTarget?S.texture.colorSpace:Nu,l=(i.isMeshStandardMaterial?ee:J).get(i.envMap||a),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,h=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),u=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=0;i.toneMapped&&(null!==S&&!0!==S.isXRRenderTarget||(f=y.toneMapping));const g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,_=Z.get(i),b=m.state.lights;if(!0===z&&(!0===U||e!==w)){const t=e===w&&i.id===E;le.setState(i,e,t)}let x=!1;i.version===_.__version?_.needsLights&&_.lightsStateVersion!==b.state.version||_.outputColorSpace!==o||r.isBatchedMesh&&!1===_.batching?x=!0:r.isBatchedMesh||!0!==_.batching?r.isInstancedMesh&&!1===_.instancing?x=!0:r.isInstancedMesh||!0!==_.instancing?r.isSkinnedMesh&&!1===_.skinning?x=!0:r.isSkinnedMesh||!0!==_.skinning?r.isInstancedMesh&&!0===_.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===_.instancingColor&&null!==r.instanceColor||_.envMap!==l||!0===i.fog&&_.fog!==s?x=!0:void 0===_.numClippingPlanes||_.numClippingPlanes===le.numPlanes&&_.numIntersection===le.numIntersection?(_.vertexAlphas!==c||_.vertexTangents!==h||_.morphTargets!==u||_.morphNormals!==d||_.morphColors!==p||_.toneMapping!==f||!0===Y.isWebGL2&&_.morphTargetsCount!==v)&&(x=!0):x=!0:x=!0:x=!0:x=!0:(x=!0,_.__version=i.version);let T=_.currentProgram;!0===x&&(T=ke(i,t,r));let M=!1,A=!1,P=!1;const C=T.getUniforms(),I=_.uniforms;$.useProgram(T.program)&&(M=!0,A=!0,P=!0);i.id!==E&&(E=i.id,A=!0);if(M||w!==e){C.setValue(ve,"projectionMatrix",e.projectionMatrix),C.setValue(ve,"viewMatrix",e.matrixWorldInverse);const t=C.map.cameraPosition;void 0!==t&&t.setValue(ve,j.setFromMatrixPosition(e.matrixWorld)),Y.logarithmicDepthBuffer&&C.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&C.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),w!==e&&(w=e,A=!0,P=!0)}if(r.isSkinnedMesh){C.setOptional(ve,r,"bindMatrix"),C.setOptional(ve,r,"bindMatrixInverse");const e=r.skeleton;e&&(Y.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),C.setValue(ve,"boneTexture",e.boneTexture,Q)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}r.isBatchedMesh&&(C.setOptional(ve,r,"batchingTexture"),C.setValue(ve,"batchingTexture",r._matricesTexture,Q));const R=n.morphAttributes;(void 0!==R.position||void 0!==R.normal||void 0!==R.color&&!0===Y.isWebGL2)&&ue.update(r,n,T);(A||_.receiveShadow!==r.receiveShadow)&&(_.receiveShadow=r.receiveShadow,C.setValue(ve,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(I.envMap.value=l,I.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);A&&(C.setValue(ve,"toneMappingExposure",y.toneMappingExposure),_.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(I,P),s&&!0===i.fog&&se.refreshFogUniforms(I,s),se.refreshMaterialUniforms(I,i,D,L,V),Yg.upload(ve,Oe(_),I,Q));i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Yg.upload(ve,Oe(_),I,Q),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&C.setValue(ve,"center",r.center);if(C.setValue(ve,"modelViewMatrix",r.modelViewMatrix),C.setValue(ve,"normalMatrix",r.normalMatrix),C.setValue(ve,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(Y.isWebGL2){const n=e[t];ge.update(n,T),ge.bind(n,T)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return T}(e,t,n,i,r);$.setMaterial(i,a);let l=n.index,c=1;if(!0===i.wireframe){if(l=ne.getWireframeAttribute(n),void 0===l)return;c=2}const h=n.drawRange,u=n.attributes.position;let d=h.start*c,p=(h.start+h.count)*c;null!==s&&(d=Math.max(d,s.start*c),p=Math.min(p,(s.start+s.count)*c)),null!==l?(d=Math.max(d,0),p=Math.min(p,l.count)):null!=u&&(d=Math.max(d,0),p=Math.min(p,u.count));const f=p-d;if(f<0||f===1/0)return;let g;me.setup(r,i,o,n,l);let v=de;if(null!==l&&(g=te.get(l),v=pe,v.setIndex(g)),r.isMesh)!0===i.wireframe?($.setLineWidth(i.wireframeLinewidth*q()),v.setMode(ve.LINES)):v.setMode(ve.TRIANGLES);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),$.setLineWidth(e*q()),r.isLineSegments?v.setMode(ve.LINES):r.isLineLoop?v.setMode(ve.LINE_LOOP):v.setMode(ve.LINE_STRIP)}else r.isPoints?v.setMode(ve.POINTS):r.isSprite&&v.setMode(ve.TRIANGLES);if(r.isBatchedMesh)v.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount);else if(r.isInstancedMesh)v.renderInstances(d,f,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(d,f,t)}else v.render(d,f)},this.compile=function(e,t,n=null){null===n&&(n=e),m=oe.get(n),m.init(),v.push(m),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),m.setupLights(y._useLegacyLights);const i=new Set;return e.traverse((function(e){const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const s=t[r];Te(s,n,e),i.add(s)}else Te(t,n,e),i.add(t)})),v.pop(),m=null,i},this.compileAsync=function(e,t,n=null){const i=this.compile(e,t,n);return new Promise((t=>{function n(){i.forEach((function(e){Z.get(e).currentProgram.isReady()&&i.delete(e)})),0!==i.size?setTimeout(n,10):t(e)}null!==X.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let Me=null;function Ae(){Ce.stop()}function Pe(){Ce.start()}const Ce=new rm;function Ie(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)m.pushLight(e),e.castShadow&&m.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||B.intersectsSprite(e)){i&&j.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=ie.update(e),r=e.material;r.visible&&f.push(e,t,r,n,j.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||B.intersectsObject(e))){const t=ie.update(e),r=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),j.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),j.copy(t.boundingSphere.center)),j.applyMatrix4(e.matrixWorld).applyMatrix4(H)),Array.isArray(r)){const i=t.groups;for(let s=0,a=i.length;s<a;s++){const a=i[s],o=r[a.materialIndex];o&&o.visible&&f.push(e,t,o,n,j.z,a)}}else r.visible&&f.push(e,t,r,n,j.z,null)}const r=e.children;for(let e=0,s=r.length;e<s;e++)Ie(r[e],t,n,i)}function Le(e,t,n,i){const r=e.opaque,s=e.transmissive,a=e.transparent;m.setupLightsView(n),!0===z&&le.setGlobalState(y.clippingPlanes,n),s.length>0&&function(e,t,n,i){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;const r=Y.isWebGL2;null===V&&(V=new Dd(1,1,{generateMipmaps:!0,type:X.has("EXT_color_buffer_half_float")?yu:pu,minFilter:du,samples:r?4:0}));y.getDrawingBufferSize(G),r?V.setSize(G.x,G.y):V.setSize(sd(G.x),sd(G.y));const s=y.getRenderTarget();y.setRenderTarget(V),y.getClearColor(P),C=y.getClearAlpha(),C<1&&y.setClearColor(16777215,.5);y.clear();const a=y.toneMapping;y.toneMapping=0,De(e,n,i),Q.updateMultisampleRenderTarget(V),Q.updateRenderTargetMipmap(V);let o=!1;for(let e=0,r=t.length;e<r;e++){const r=t[e],s=r.object,a=r.geometry,l=r.material,c=r.group;if(2===l.side&&s.layers.test(i.layers)){const e=l.side;l.side=1,l.needsUpdate=!0,Re(s,n,i,a,l,c),l.side=e,l.needsUpdate=!0,o=!0}}!0===o&&(Q.updateMultisampleRenderTarget(V),Q.updateRenderTargetMipmap(V));y.setRenderTarget(s),y.setClearColor(P,C),y.toneMapping=a}(r,s,t,n),i&&$.viewport(T.copy(i)),r.length>0&&De(r,t,n),s.length>0&&De(s,t,n),a.length>0&&De(a,t,n),$.buffers.depth.setTest(!0),$.buffers.depth.setMask(!0),$.buffers.color.setMask(!0),$.setPolygonOffset(!1)}function De(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,s=e.length;r<s;r++){const s=e[r],a=s.object,o=s.geometry,l=null===i?s.material:i,c=s.group;a.layers.test(n.layers)&&Re(a,t,n,o,l,c)}}function Re(e,t,n,i,r,s){e.onBeforeRender(y,t,n,i,r,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(y,t,n,i,e,s),!0===r.transparent&&2===r.side&&!1===r.forceSinglePass?(r.side=1,r.needsUpdate=!0,y.renderBufferDirect(n,t,i,r,e,s),r.side=0,r.needsUpdate=!0,y.renderBufferDirect(n,t,i,r,e,s),r.side=2):y.renderBufferDirect(n,t,i,r,e,s),e.onAfterRender(y,t,n,i,r,s)}function ke(e,t,n){!0!==t.isScene&&(t=W);const i=Z.get(e),r=m.state.lights,s=m.state.shadowsArray,a=r.state.version,o=re.getParameters(e,r.state,s,t,n),l=re.getProgramCacheKey(o);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?ee:J).get(e.envMap||i.environment),void 0===c&&(e.addEventListener("dispose",we),c=new Map,i.programs=c);let h=c.get(l);if(void 0!==h){if(i.currentProgram===h&&i.lightsStateVersion===a)return Fe(e,o),h}else o.uniforms=re.getUniforms(e),e.onBuild(n,o,y),e.onBeforeCompile(o,y),h=re.acquireProgram(o,l),c.set(l,h),i.uniforms=o.uniforms;const u=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(u.clippingPlanes=le.uniform),Fe(e,o),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=a,i.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotLightMatrix.value=r.state.spotLightMatrix,u.spotLightMap.value=r.state.spotLightMap,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=h,i.uniformsList=null,h}function Oe(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=Yg.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Fe(e,t){const n=Z.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ce.setAnimationLoop((function(e){Me&&Me(e)})),"undefined"!=typeof self&&Ce.setContext(self),this.setAnimationLoop=function(e){Me=e,be.setAnimationLoop(e),null===e?Ce.stop():Ce.start()},be.addEventListener("sessionstart",Ae),be.addEventListener("sessionend",Pe),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===_)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===be.enabled&&!0===be.isPresenting&&(!0===be.cameraAutoUpdate&&be.updateCamera(t),t=be.getCamera()),!0===e.isScene&&e.onBeforeRender(y,e,t,S),m=oe.get(e,v.length),m.init(),v.push(m),H.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),B.setFromProjectionMatrix(H),U=this.localClippingEnabled,z=le.init(this.clippingPlanes,U),f=ae.get(e,g.length),f.init(),g.push(f),Ie(e,t,0,y.sortObjects),f.finish(),!0===y.sortObjects&&f.sort(R,k),this.info.render.frame++,!0===z&&le.beginShadows();const n=m.state.shadowsArray;if(ce.render(n,e,t),!0===z&&le.endShadows(),!0===this.info.autoReset&&this.info.reset(),he.render(f,e),m.setupLights(y._useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,i=n.length;t<i;t++){const i=n[t];Le(f,e,i,i.viewport)}}else Le(f,e,t);null!==S&&(Q.updateMultisampleRenderTarget(S),Q.updateRenderTargetMipmap(S)),!0===e.isScene&&e.onAfterRender(y,e,t),me.resetDefaultState(),E=-1,w=null,v.pop(),m=v.length>0?v[v.length-1]:null,g.pop(),f=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(e,t,n){Z.get(e.texture).__webglTexture=t,Z.get(e.depthTexture).__webglTexture=n;const i=Z.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===X.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=Z.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){S=e,b=t,x=n;let i=!0,r=null,s=!1,a=!1;if(e){const o=Z.get(e);void 0!==o.__useDefaultFramebuffer?($.bindFramebuffer(ve.FRAMEBUFFER,null),i=!1):void 0===o.__webglFramebuffer?Q.setupRenderTarget(e):o.__hasExternalTextures&&Q.rebindTextures(e,Z.get(e.texture).__webglTexture,Z.get(e.depthTexture).__webglTexture);const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(a=!0);const c=Z.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(c[t])?c[t][n]:c[t],s=!0):r=Y.isWebGL2&&e.samples>0&&!1===Q.useMultisampledRTT(e)?Z.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,T.copy(e.viewport),M.copy(e.scissor),A=e.scissorTest}else T.copy(O).multiplyScalar(D).floor(),M.copy(F).multiplyScalar(D).floor(),A=N;if($.bindFramebuffer(ve.FRAMEBUFFER,r)&&Y.drawBuffers&&i&&$.drawBuffers(e,r),$.viewport(T),$.scissor(M),$.setScissorTest(A),s){const i=Z.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(a){const i=Z.get(e.texture),r=t||0;ve.framebufferTextureLayer(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,i.__webglTexture,n||0,r)}E=-1},this.readRenderTargetPixels=function(e,t,n,i,r,s,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=Z.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){$.bindFramebuffer(ve.FRAMEBUFFER,o);try{const a=e.texture,o=a.format,l=a.type;if(o!==bu&&fe.convert(o)!==ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===yu&&(X.has("EXT_color_buffer_half_float")||Y.isWebGL2&&X.has("EXT_color_buffer_float"));if(!(l===pu||fe.convert(l)===ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_TYPE)||l===vu&&(Y.isWebGL2||X.has("OES_texture_float")||X.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&ve.readPixels(t,n,i,r,fe.convert(o),fe.convert(l),s)}finally{const e=null!==S?Z.get(S).__webglFramebuffer:null;$.bindFramebuffer(ve.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),s=Math.floor(t.image.height*i);Q.setTexture2D(t,0),ve.copyTexSubImage2D(ve.TEXTURE_2D,n,0,0,e.x,e.y,r,s),$.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i=0){const r=t.image.width,s=t.image.height,a=fe.convert(n.format),o=fe.convert(n.type);Q.setTexture2D(n,0),ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,n.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?ve.texSubImage2D(ve.TEXTURE_2D,i,e.x,e.y,r,s,a,o,t.image.data):t.isCompressedTexture?ve.compressedTexSubImage2D(ve.TEXTURE_2D,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):ve.texSubImage2D(ve.TEXTURE_2D,i,e.x,e.y,a,o,t.image),0===i&&n.generateMipmaps&&ve.generateMipmap(ve.TEXTURE_2D),$.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i,r=0){if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=fe.convert(i.format),c=fe.convert(i.type);let h;if(i.isData3DTexture)Q.setTexture3D(i,0),h=ve.TEXTURE_3D;else{if(!i.isDataArrayTexture&&!i.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Q.setTexture2DArray(i,0),h=ve.TEXTURE_2D_ARRAY}ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,i.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,i.unpackAlignment);const u=ve.getParameter(ve.UNPACK_ROW_LENGTH),d=ve.getParameter(ve.UNPACK_IMAGE_HEIGHT),p=ve.getParameter(ve.UNPACK_SKIP_PIXELS),f=ve.getParameter(ve.UNPACK_SKIP_ROWS),m=ve.getParameter(ve.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[r]:n.image;ve.pixelStorei(ve.UNPACK_ROW_LENGTH,g.width),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,g.height),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,e.min.x),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,e.min.y),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?ve.texSubImage3D(h,r,t.x,t.y,t.z,s,a,o,l,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ve.compressedTexSubImage3D(h,r,t.x,t.y,t.z,s,a,o,l,g.data)):ve.texSubImage3D(h,r,t.x,t.y,t.z,s,a,o,l,c,g),ve.pixelStorei(ve.UNPACK_ROW_LENGTH,u),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,d),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,p),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,f),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,m),0===r&&i.generateMipmaps&&ve.generateMipmap(h),$.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?Q.setTextureCube(e,0):e.isData3DTexture?Q.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Q.setTexture2DArray(e,0):Q.setTexture2D(e,0),$.unbindTexture()},this.resetState=function(){b=0,x=0,S=null,$.reset(),me.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Yu}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Bu?"display-p3":"srgb",t.unpackColorSpace=bd.workingColorSpace===zu?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Fu?ku:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===ku?Fu:Nu}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}(class extends Uv{}).prototype.isWebGL1Renderer=!0;class Vv extends Np{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Hv extends Cd{constructor(e=null,t=1,n=1,i,r,s,a,o,l=1003,c=1003,h,u){super(null,s,a,o,l,c,i,r,h,u),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Gv extends jf{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}function jv(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Wv(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}class qv{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let s;n:{i:if(!(e<i)){for(let s=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(r=i,i=t[++n],e<i)break t}s=t.length;break n}if(e>=r)break e;{const a=t[1];e<a&&(n=2,r=a);for(let s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(i=r,r=t[--n-1],e>=r)break t}s=n,n=0}}for(;n<s;){const i=n+s>>>1;e<t[i]?s=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let e=0;e!==i;++e)t[e]=n[r+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Xv extends qv{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Lu,endingEnd:Lu}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,s=e+1,a=i[r],o=i[s];if(void 0===a)switch(this.getSettings_().endingStart){case Du:r=e,a=2*t-n;break;case Ru:r=i.length-2,a=t+i[r]-i[r+1];break;default:r=e,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case Du:s=e,o=2*n-t;break;case Ru:s=1,o=n+i[1]-i[0];break;default:s=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=s*c}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-u*m+2*u*f-u*p,v=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,_=d*m-d*f;for(let e=0;e!==a;++e)r[e]=g*s[c+e]+v*s[l+e]+y*s[o+e]+_*s[h+e];return r}}class Yv extends qv{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=(n-t)/(i-t),h=1-c;for(let e=0;e!==a;++e)r[e]=s[l+e]*h+s[o+e]*c;return r}}class $v extends qv{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Kv{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=jv(t,this.TimeBufferType),this.values=jv(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:jv(e.times,Array),values:jv(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new $v(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Yv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Xv(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Pu:t=this.InterpolantFactoryMethodDiscrete;break;case Cu:t=this.InterpolantFactoryMethodLinear;break;case Iu:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Pu;case this.InterpolantFactoryMethodLinear:return Cu;case this.InterpolantFactoryMethodSmooth:return Iu}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==r||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const e=this.getValueSize();this.times=n.slice(r,s),this.values=this.values.slice(r*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let t=0;t!==r;t++){const i=n[t];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,i),e=!1;break}if(null!==s&&s>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,i,s),e=!1;break}s=i}if(void 0!==i&&Wv(i))for(let t=0,n=i.length;t!==n;++t){const n=i[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===Iu,r=e.length-1;let s=1;for(let a=1;a<r;++a){let r=!1;const o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0]))if(i)r=!0;else{const e=a*n,i=e-n,s=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[i+a]||n!==t[s+a]){r=!0;break}}}if(r){if(a!==s){e[s]=e[a];const i=a*n,r=s*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++s}}if(r>0){e[s]=e[r];for(let e=r*n,i=s*n,a=0;a!==n;++a)t[i+a]=t[e+a];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Kv.prototype.TimeBufferType=Float32Array,Kv.prototype.ValueBufferType=Float32Array,Kv.prototype.DefaultInterpolation=Cu;class Zv extends Kv{}Zv.prototype.ValueTypeName="bool",Zv.prototype.ValueBufferType=Array,Zv.prototype.DefaultInterpolation=Pu,Zv.prototype.InterpolantFactoryMethodLinear=void 0,Zv.prototype.InterpolantFactoryMethodSmooth=void 0;class Qv extends Kv{}Qv.prototype.ValueTypeName="color";class Jv extends Kv{}Jv.prototype.ValueTypeName="number";class ey extends qv{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(n-t)/(i-t);let l=e*a;for(let e=l+a;l!==e;l+=4)Od.slerpFlat(r,0,s,l-a,s,l,o);return r}}class ty extends Kv{InterpolantFactoryMethodLinear(e){return new ey(this.times,this.values,this.getValueSize(),e)}}ty.prototype.ValueTypeName="quaternion",ty.prototype.DefaultInterpolation=Cu,ty.prototype.InterpolantFactoryMethodSmooth=void 0;class ny extends Kv{}ny.prototype.ValueTypeName="string",ny.prototype.ValueBufferType=Array,ny.prototype.DefaultInterpolation=Pu,ny.prototype.InterpolantFactoryMethodLinear=void 0,ny.prototype.InterpolantFactoryMethodSmooth=void 0;class iy extends Kv{}iy.prototype.ValueTypeName="vector";class ry{constructor(e,t,n){const i=this;let r,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===s&&void 0!==i.onStart&&i.onStart(e,a,o),s=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}}const sy=new ry;class ay{constructor(e){this.manager=void 0!==e?e:sy,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ay.DEFAULT_MATERIAL_NAME="__DEFAULT";Error;class oy{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ly(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=ly();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function ly(){return("undefined"==typeof performance?Date:performance).now()}const cy="\\[\\]\\.:\\/",hy=new RegExp("[\\[\\]\\.:\\/]","g"),uy="[^\\[\\]\\.:\\/]",dy="[^"+cy.replace("\\.","")+"]",py=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",uy)+/(WCOD+)?/.source.replace("WCOD",dy)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uy)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uy)+"$"),fy=["material","materials","bones","map"];class my{constructor(e,t,n){this.path=t,this.parsedPath=n||my.parseTrackName(t),this.node=my.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new my.Composite(e,t,n):new my(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(hy,"")}static parseTrackName(e){const t=py.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==fy.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const s=n(r.children);if(s)return s}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=my.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const s=e[i];if(void 0===s){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}my.Composite=class{constructor(e,t,n){const i=n||my.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},my.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},my.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},my.prototype.GetterByBindingType=[my.prototype._getValue_direct,my.prototype._getValue_array,my.prototype._getValue_arrayElement,my.prototype._getValue_toArray],my.prototype.SetterByBindingTypeAndVersioning=[[my.prototype._setValue_direct,my.prototype._setValue_direct_setNeedsUpdate,my.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[my.prototype._setValue_array,my.prototype._setValue_array_setNeedsUpdate,my.prototype._setValue_array_setMatrixWorldNeedsUpdate],[my.prototype._setValue_arrayElement,my.prototype._setValue_arrayElement_setNeedsUpdate,my.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[my.prototype._setValue_fromArray,my.prototype._setValue_fromArray_setNeedsUpdate,my.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);function gy(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function vy(e,t,n){return xy(e,t),n}function yy(e,t,n,i){return xy(e,t),by(n,"set"),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,n,i),i}function _y(e,t,n){return xy(e,t),by(n,"get"),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}function by(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function xy(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Zh}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Zh);var Sy=new WeakMap,Ey=new WeakMap,wy=new WeakMap,Ty=new WeakMap,My=new WeakMap,Ay=new WeakMap,Py=function(){function e(t,n){var i=this;wa(this,e),gy(this,Sy,{writable:!0,value:!1}),gy(this,Ey,{writable:!0,value:void 0}),gy(this,wy,{writable:!0,value:void 0}),gy(this,Ty,{writable:!0,value:function(e){return e===-1/0?Kh(i,wy).minDecibels:e===1/0?Kh(i,wy).maxDecibels:Math.max(Kh(i,wy).minDecibels,Math.min(Kh(i,wy).maxDecibels,e))}}),gy(this,My,{writable:!0,value:function(t,n,i){return 0===_y(e,e,Ny)?t:vy(e,e,Iy).call(e,i.subarray(Math.max(n-_y(e,e,Ny),0),Math.min(n+_y(e,e,Ny),i.length)),!0)}}),gy(this,Ay,{writable:!0,value:function(t,n){if(0===_y(e,e,Fy))return t;for(var r=[t],s=1;s<Math.min(_y(e,e,By),_y(e,e,Fy)+1);s++)r.push(i.texture.image.data[s*i.dataLength+n]);return vy(e,e,Iy).call(e,r)}}),this.path=t,$h(this,wy,_y(e,e,ky).createAnalyser()),Kh(this,wy).fftSize=_y(e,e,Oy),Kh(this,wy).smoothingTimeConstant=_y(e,e,zy);var r=_y(e,e,Ly).clip;"clip"in n&&(r=n.clip),$h(this,Ey,Math.floor(r/100*Kh(this,wy).frequencyBinCount)),this.dataLength=Kh(this,wy).frequencyBinCount-Kh(this,Ey),this.rawData=new Float32Array(Kh(this,wy).frequencyBinCount).fill(Kh(this,wy).minDecibels),this.elem=new Audio,this.elem.setAttribute("src",this.path),this.elem.setAttribute("loop",""),this.elem.setAttribute("playsinline",""),document.body.appendChild(this.elem),this.texture=new Hv(new Float32Array(_y(e,e,By)*this.dataLength).fill(Kh(this,wy).minDecibels),this.dataLength,_y(e,e,By),1028,vu,Jh,ou,ou),this.texture.internalFormat="R32F",this.track=_y(e,e,ky).createMediaElementSource(this.elem),this.track.connect(_y(e,e,ky).destination),this.track.connect(Kh(this,wy)),$h(this,Sy,!0),_y(e,e,Dy).push(this)}return Ma(e,[{key:"muted",get:function(){return!Kh(this,Sy)||this.elem.paused}},{key:"data",get:function(){return this.texture.image.data.subarray(0,this.dataLength)}},{key:"play",value:function(){vy(e,e,Cy).call(e),"running"!==_y(e,e,ky).state&&e.wake(),this.elem.play()}},{key:"pause",value:function(){vy(e,e,Cy).call(e),this.elem.pause()}},{key:"mute",value:function(){vy(e,e,Cy).call(e),this.track.disconnect(_y(e,e,ky).destination),$h(this,Sy,!1)}},{key:"unmute",value:function(){vy(e,e,Cy).call(e),this.track.connect(_y(e,e,ky).destination),$h(this,Sy,!0)}},{key:"update",value:function(){Kh(this,wy).getFloatFrequencyData(this.rawData),this.texture.image.data.set(this.texture.image.data.slice(0,this.texture.image.data.length-this.dataLength),this.dataLength),this.texture.image.data.set(this.rawData.slice(Kh(this,Ey)).map(Kh(this,Ty)).map(Kh(this,My)).map(Kh(this,Ay)),0),this.texture.needsUpdate=!0}}],[{key:"contextState",get:function(){return _y(e,e,ky).state}},{key:"muteAll",value:function(){_y(e,e,Dy).forEach((function(e){return e.mute()}))}},{key:"unmuteAll",value:function(){_y(e,e,Dy).forEach((function(e){return e.unmute()}))}},{key:"hibernate",value:function(){_y(e,e,ky).suspend()}},{key:"wake",value:function(){_y(e,e,ky).resume()}}]),e}();function Cy(){_y(Py,Py,Ry)&&(yy(Py,Py,Ry,!1),Py.onFirstInteraction(),Py.onFirstInteraction=function(){})}function Iy(e,t){if(!0===t){var n=0;return e.forEach((function(t,i){n+=t*(e.length-i)})),n/(e.length*(e.length+1)/2)}return e.reduce((function(e,t){return e+t}),0)/e.length}var Ly={writable:!0,value:{clip:0}},Dy={writable:!0,value:[]},Ry={writable:!0,value:!0},ky={writable:!0,value:new AudioContext({latencyHint:"playback"})},Oy={writable:!0,value:Math.pow(2,11)},Fy={writable:!0,value:3},Ny={writable:!0,value:12},By={writable:!0,value:40},zy={writable:!0,value:.5};so(Py,"onFirstInteraction",(function(){}));const Uy={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"};class Vy{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Hy=new vm(-1,1,1,-1,0,1);const Gy=new class extends _f{constructor(){super(),this.setAttribute("position",new uf([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new uf([0,2,0,0,2,0],2))}};class jy{constructor(e){this._mesh=new Nf(Gy,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Hy)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Wy extends Vy{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof jf?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Gf.clone(e.uniforms),this.material=new jf({name:void 0!==e.name?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new jy(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class qy extends Vy{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const i=e.getContext(),r=e.state;let s,a;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0),this.inverse?(s=0,a=1):(s=1,a=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),r.buffers.stencil.setFunc(i.ALWAYS,s,4294967295),r.buffers.stencil.setClear(a),r.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.color.setMask(!0),r.buffers.depth.setMask(!0),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(i.EQUAL,1,4294967295),r.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),r.buffers.stencil.setLocked(!0)}}class Xy extends Vy{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Yy{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),void 0===t){const n=e.getSize(new ld);this._width=n.width,this._height=n.height,(t=new Dd(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:yu})).texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Wy(Uy),this.copyPass.material.blending=0,this.clock=new oy}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let t=0,i=this.passes.length;t<i;t++){const i=this.passes[t];if(!1!==i.enabled){if(i.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(t),i.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),i.needsSwap){if(n){const t=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==qy&&(i instanceof qy?n=!0:i instanceof Xy&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new ld);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(let e=0;e<this.passes.length;e++)this.passes[e].setSize(n,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class $y extends Vy{constructor(e,t,n=null,i=null,r=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=r,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new ef}render(e,t,n){const i=e.autoClear;let r,s;e.autoClear=!1,null!==this.overrideMaterial&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor)),null!==this.clearAlpha&&(r=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),1==this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),!0===this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),null!==this.clearColor&&e.setClearColor(this._oldClearColor),null!==this.clearAlpha&&e.setClearAlpha(r),null!==this.overrideMaterial&&(this.scene.overrideMaterial=s),e.autoClear=i}}const Ky={name:"OutputShader",uniforms:{tDiffuse:{value:null},toneMappingExposure:{value:1}},vertexShader:"\n\t\tprecision highp float;\n\n\t\tuniform mat4 modelViewMatrix;\n\t\tuniform mat4 projectionMatrix;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\t\n\t\tprecision highp float;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\t#include <tonemapping_pars_fragment>\n\t\t#include <colorspace_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\n\t\t\t// tone mapping\n\n\t\t\t#ifdef LINEAR_TONE_MAPPING\n\n\t\t\t\tgl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( REINHARD_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( CINEON_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = OptimizedCineonToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( ACES_FILMIC_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( AGX_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );\n\n\t\t\t#endif\n\n\t\t\t// color space\n\n\t\t\t#ifdef SRGB_TRANSFER\n\n\t\t\t\tgl_FragColor = sRGBTransferOETF( gl_FragColor );\n\n\t\t\t#endif\n\n\t\t}"};class Zy extends Vy{constructor(){super();const e=Ky;this.uniforms=Gf.clone(e.uniforms),this.material=new Gv({name:e.name,uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsQuad=new jy(this.material),this._outputColorSpace=null,this._toneMapping=null}render(e,t,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.toneMappingExposure.value=e.toneMappingExposure,this._outputColorSpace===e.outputColorSpace&&this._toneMapping===e.toneMapping||(this._outputColorSpace=e.outputColorSpace,this._toneMapping=e.toneMapping,this.material.defines={},bd.getTransfer(this._outputColorSpace)===Vu&&(this.material.defines.SRGB_TRANSFER=""),1===this._toneMapping?this.material.defines.LINEAR_TONE_MAPPING="":2===this._toneMapping?this.material.defines.REINHARD_TONE_MAPPING="":3===this._toneMapping?this.material.defines.CINEON_TONE_MAPPING="":4===this._toneMapping?this.material.defines.ACES_FILMIC_TONE_MAPPING="":6===this._toneMapping&&(this.material.defines.AGX_TONE_MAPPING=""),this.material.needsUpdate=!0),!0===this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}const Qy={name:"LuminosityHighPassShader",shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new ef(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class Jy extends Vy{constructor(e,t,n,i){super(),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=i,this.resolution=void 0!==e?new ld(e.x,e.y):new ld(256,256),this.clearColor=new ef(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let r=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new Dd(r,s,{type:yu}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let e=0;e<this.nMips;e++){const t=new Dd(r,s,{type:yu});t.texture.name="UnrealBloomPass.h"+e,t.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(t);const n=new Dd(r,s,{type:yu});n.texture.name="UnrealBloomPass.v"+e,n.texture.generateMipmaps=!1,this.renderTargetsVertical.push(n),r=Math.round(r/2),s=Math.round(s/2)}const a=Qy;this.highPassUniforms=Gf.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new jf({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}),this.separableBlurMaterials=[];const o=[3,5,7,9,11];r=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);for(let e=0;e<this.nMips;e++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(o[e])),this.separableBlurMaterials[e].uniforms.invSize.value=new ld(1/r,1/s),r=Math.round(r/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new Fd(1,1,1),new Fd(1,1,1),new Fd(1,1,1),new Fd(1,1,1),new Fd(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const l=Uy;this.copyUniforms=Gf.clone(l.uniforms),this.blendMaterial=new jf({uniforms:this.copyUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,blending:2,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new ef,this.oldClearAlpha=1,this.basic=new sf,this.fsQuad=new jy(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,t){let n=Math.round(e/2),i=Math.round(t/2);this.renderTargetBright.setSize(n,i);for(let e=0;e<this.nMips;e++)this.renderTargetsHorizontal[e].setSize(n,i),this.renderTargetsVertical[e].setSize(n,i),this.separableBlurMaterials[e].uniforms.invSize.value=new ld(1/n,1/i),n=Math.round(n/2),i=Math.round(i/2)}render(e,t,n,i,r){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const s=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),r&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let t=0;t<this.nMips;t++)this.fsQuad.material=this.separableBlurMaterials[t],this.separableBlurMaterials[t].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[t].uniforms.direction.value=Jy.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[t]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[t].uniforms.colorTexture.value=this.renderTargetsHorizontal[t].texture,this.separableBlurMaterials[t].uniforms.direction.value=Jy.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[t]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[t];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,r&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}getSeperableBlurMaterial(e){const t=[];for(let n=0;n<e;n++)t.push(.39894*Math.exp(-.5*n*n/(e*e))/e);return new jf({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new ld(.5,.5)},direction:{value:new ld(.5,.5)},gaussianCoefficients:{value:t}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 invSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float gaussianCoefficients[KERNEL_RADIUS];\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tfloat weightSum = gaussianCoefficients[0];\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianCoefficients[i];\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}getCompositeMaterial(e){return new jf({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}function e_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t_(e,t){return t_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t_(e,t)}function n_(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t_(e,t)}function i_(e){return i_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i_(e)}function r_(e,t){if(t&&("object"===i_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return e_(e)}function s_(e){return s_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s_(e)}Jy.BlurDirectionX=new ld(1,0),Jy.BlurDirectionY=new ld(0,1);const a_="\n// -----------------------------------------------------------------------------\n//\n// Easing functions, adapted from JavaScript implementations from\n// https://github.com/AndrewRayCode/easing-utils by Andy Ray.\n//\n// -----------------------------------------------------------------------------\n\n#ifndef PI\nPI = 3.14159265358979;\n#endif\n\nfloat linear(float t) {\n    return t;\n}\n\nfloat easeInSine(float t) {\n    return 1.0 - cos((t * PI) / 2.0);\n}\n\nfloat easeOutSine(float t) {\n    return sin((t * PI) / 2.0);\n}\n\nfloat easeInOutSine(float t) {\n    return -0.5 * ( cos( PI * t ) - 1.0 );\n}\n\nfloat easeInQuad(float t) {\n    return t * t;\n}\n\nfloat easeOutQuad(float t) {\n    return t * ( 2.0 - t );\n}\n\nfloat easeInOutQuad(float t) {\n    return t < 0.5 ? 2.0 * t * t : - 1.0 + ( 4.0 - 2.0 * t ) * t;\n}\n\nfloat easeInCubic(float t) {\n    return t * t * t;\n}\n\nfloat easeOutCubic(float t) {\n    float t1 = t - 1.0;\n    return t1 * t1 * t1 + 1.0;\n}\n\nfloat easeInOutCubic(float t) {\n    return t < 0.5 ? 4.0 * t * t * t : ( t - 1.0 ) * ( 2.0 * t - 2.0 ) * ( 2.0 * t - 2.0 ) + 1.0;\n}\n\nfloat easeInQuart(float t) {\n    return t * t * t * t;\n}\n\nfloat easeOutQuart(float t) {\n    float t1 = t - 1.0;\n    return 1.0 - t1 * t1 * t1 * t1;\n}\n\nfloat easeInOutQuart(float t) {\n    float t1 = t - 1.0;\n    return t < 0.5 ? 8.0 * t * t * t * t : 1.0 - 8.0 * t1 * t1 * t1 * t1;\n}\n\nfloat easeInQuint(float t) {\n    return t * t * t * t * t;\n}\n\nfloat easeOutQuint(float t) {\n    float t1 = t - 1.0;\n    return 1.0 + t1 * t1 * t1 * t1 * t1;\n}\n\nfloat easeInOutQuint(float t) {\n    float t1 = t - 1.0;\n    return t < 0.5 ? 16.0 * t * t * t * t * t : 1.0 + 16.0 * t1 * t1 * t1 * t1 * t1;\n}\n\nfloat easeInExpo(float t) {\n    if (t == 0.0) return 0.0;\n    return pow( 2.0, 10.0 * ( t - 1.0 ) );\n}\n\nfloat easeOutExpo(float t) {\n    if(t == 1.0) return 1.0;\n    return ( -pow( 2.0, -10.0 * t ) + 1.0 );\n}\n\nfloat easeInOutExpo(float t) {\n    if (t == 0.0 || t == 1.0) return t;\n    float scaledTime = t * 2.0;\n    float scaledTime1 = scaledTime - 1.0;\n    if (scaledTime < 1.0) return 0.5 * pow( 2.0, 10.0 * ( scaledTime1 ) );\n    return 0.5 * ( -pow( 2.0, -10.0 * scaledTime1 ) + 2.0 );\n}\n\nfloat easeInCirc(float t) {\n    float scaledTime = t / 1.0;\n    return -1.0 * ( sqrt( 1.0 - scaledTime * t ) - 1.0 );\n}\n\nfloat easeOutCirc(float t) {\n    float t1 = t - 1.0;\n    return sqrt( 1.0 - t1 * t1 );\n}\n\nfloat easeInOutCirc(float t) {\n    float scaledTime = t * 2.0;\n    float scaledTime1 = scaledTime - 2.0;\n    if (scaledTime < 1.0) return -0.5 * ( sqrt( 1.0 - scaledTime * scaledTime ) - 1.0 );\n    return 0.5 * ( sqrt( 1.0 - scaledTime1 * scaledTime1 ) + 1.0 );\n}\n",o_='\n// -----------------------------------------------------------------------------\n//\n// GLSL textureless classic 4D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// -----------------------------------------------------------------------------\n//\n// The MIT License (MIT) Copyright (c) 2011 Stefan Gustavson\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n//\n// -----------------------------------------------------------------------------\n\nvec4 mod289(vec4 x) {\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n    return mod289(((x * 34.0) + 10.0) * x);\n}\n\nvec4 taylorInvSqrt(vec4 r) {\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec2 fade(vec2 t) {\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n\nvec3 fade(vec3 t) {\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n\nvec4 fade(vec4 t) {\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n\nfloat rand(float n) {\n    return fract(sin(n) * 43758.5453123);\n}\n\nfloat rand(vec2 c) {\n    return fract(sin(dot(c.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat noise(float p){\n    float fl = floor(p);\n    float fc = fract(p);\n    return mix(rand(fl), rand(fl + 1.0), fc);\n}\n\nfloat noise(vec2 n) {\n    const vec2 d = vec2(0.0, 1.0);\n    vec2 b = floor(n), f = smoothstep(vec2(0.0), vec2(1.0), fract(n));\n    return mix(mix(rand(b), rand(b + d.yx), f.x), mix(rand(b + d.xy), rand(b + d.yy), f.x), f.y);\n}\n\nfloat cnoise(vec2 P){\n    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n    Pi = mod(Pi, 289.0); // To avoid truncation effects in permutation\n    vec4 ix = Pi.xzxz;\n    vec4 iy = Pi.yyww;\n    vec4 fx = Pf.xzxz;\n    vec4 fy = Pf.yyww;\n    vec4 i = permute(permute(ix) + iy);\n    vec4 gx = 2.0 * fract(i * 0.0243902439) - 1.0; // 1/41 = 0.024...\n    vec4 gy = abs(gx) - 0.5;\n    vec4 tx = floor(gx + 0.5);\n    gx = gx - tx;\n    vec2 g00 = vec2(gx.x,gy.x);\n    vec2 g10 = vec2(gx.y,gy.y);\n    vec2 g01 = vec2(gx.z,gy.z);\n    vec2 g11 = vec2(gx.w,gy.w);\n    vec4 norm = 1.79284291400159 - 0.85373472095314 *\n    vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11));\n    g00 *= norm.x;\n    g01 *= norm.y;\n    g10 *= norm.z;\n    g11 *= norm.w;\n    float n00 = dot(g00, vec2(fx.x, fy.x));\n    float n10 = dot(g10, vec2(fx.y, fy.y));\n    float n01 = dot(g01, vec2(fx.z, fy.z));\n    float n11 = dot(g11, vec2(fx.w, fy.w));\n    vec2 fade_xy = fade(Pf.xy);\n    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n    return (2.3 * n_xy);\n}\n\nfloat cnoise(vec3 P){\n    vec3 Pi0 = floor(P); // Integer part for indexing\n    vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n    Pi0 = mod(Pi0, 289.0);\n    Pi1 = mod(Pi1, 289.0);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n\n    vec4 gx0 = ixy0 / 7.0;\n    vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n    vec4 gx1 = ixy1 / 7.0;\n    vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n    vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n    vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n    vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n    vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n    vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n    vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n    vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n    vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return (2.2 * n_xyz);\n}\n\nfloat cnoise(vec4 P) {\n    vec4 Pi0 = floor(P);    // Integer part for indexing\n    vec4 Pi1 = Pi0 + 1.0;   // Integer part + 1\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec4 Pf0 = fract(P);    // Fractional part for interpolation\n    vec4 Pf1 = Pf0 - 1.0;   // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = vec4(Pi0.zzzz);\n    vec4 iz1 = vec4(Pi1.zzzz);\n    vec4 iw0 = vec4(Pi0.wwww);\n    vec4 iw1 = vec4(Pi1.wwww);\n\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 ixy00 = permute(ixy0 + iw0);\n    vec4 ixy01 = permute(ixy0 + iw1);\n    vec4 ixy10 = permute(ixy1 + iw0);\n    vec4 ixy11 = permute(ixy1 + iw1);\n\n    vec4 gx00 = ixy00 * (1.0 / 7.0);\n    vec4 gy00 = floor(gx00) * (1.0 / 7.0);\n    vec4 gz00 = floor(gy00) * (1.0 / 6.0);\n    gx00 = fract(gx00) - 0.5;\n    gy00 = fract(gy00) - 0.5;\n    gz00 = fract(gz00) - 0.5;\n    vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);\n    vec4 sw00 = step(gw00, vec4(0.0));\n    gx00 -= sw00 * (step(0.0, gx00) - 0.5);\n    gy00 -= sw00 * (step(0.0, gy00) - 0.5);\n\n    vec4 gx01 = ixy01 * (1.0 / 7.0);\n    vec4 gy01 = floor(gx01) * (1.0 / 7.0);\n    vec4 gz01 = floor(gy01) * (1.0 / 6.0);\n    gx01 = fract(gx01) - 0.5;\n    gy01 = fract(gy01) - 0.5;\n    gz01 = fract(gz01) - 0.5;\n    vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);\n    vec4 sw01 = step(gw01, vec4(0.0));\n    gx01 -= sw01 * (step(0.0, gx01) - 0.5);\n    gy01 -= sw01 * (step(0.0, gy01) - 0.5);\n\n    vec4 gx10 = ixy10 * (1.0 / 7.0);\n    vec4 gy10 = floor(gx10) * (1.0 / 7.0);\n    vec4 gz10 = floor(gy10) * (1.0 / 6.0);\n    gx10 = fract(gx10) - 0.5;\n    gy10 = fract(gy10) - 0.5;\n    gz10 = fract(gz10) - 0.5;\n    vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);\n    vec4 sw10 = step(gw10, vec4(0.0));\n    gx10 -= sw10 * (step(0.0, gx10) - 0.5);\n    gy10 -= sw10 * (step(0.0, gy10) - 0.5);\n\n    vec4 gx11 = ixy11 * (1.0 / 7.0);\n    vec4 gy11 = floor(gx11) * (1.0 / 7.0);\n    vec4 gz11 = floor(gy11) * (1.0 / 6.0);\n    gx11 = fract(gx11) - 0.5;\n    gy11 = fract(gy11) - 0.5;\n    gz11 = fract(gz11) - 0.5;\n    vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);\n    vec4 sw11 = step(gw11, vec4(0.0));\n    gx11 -= sw11 * (step(0.0, gx11) - 0.5);\n    gy11 -= sw11 * (step(0.0, gy11) - 0.5);\n\n    vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);\n    vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);\n    vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);\n    vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);\n    vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);\n    vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);\n    vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);\n    vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);\n    vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);\n    vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);\n    vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);\n    vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);\n    vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);\n    vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);\n    vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);\n    vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);\n\n    vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));\n    g0000 *= norm00.x;\n    g0100 *= norm00.y;\n    g1000 *= norm00.z;\n    g1100 *= norm00.w;\n\n    vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));\n    g0001 *= norm01.x;\n    g0101 *= norm01.y;\n    g1001 *= norm01.z;\n    g1101 *= norm01.w;\n\n    vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));\n    g0010 *= norm10.x;\n    g0110 *= norm10.y;\n    g1010 *= norm10.z;\n    g1110 *= norm10.w;\n\n    vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));\n    g0011 *= norm11.x;\n    g0111 *= norm11.y;\n    g1011 *= norm11.z;\n    g1111 *= norm11.w;\n\n    float n0000 = dot(g0000, Pf0);\n    float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));\n    float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));\n    float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));\n    float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));\n    float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));\n    float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));\n    float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));\n    float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));\n    float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));\n    float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));\n    float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));\n    float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));\n    float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));\n    float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));\n    float n1111 = dot(g1111, Pf1);\n\n    vec4 fade_xyzw = fade(Pf0);\n    vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);\n    vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);\n    vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);\n    vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);\n    float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);\n    return (2.2 * n_xyzw);\n}\n\nfloat cnoiseNorm(vec2 P) {\n    float value = cnoise(P);\n    float minMax = sqrt(2.0) / 2.0;\n\n    return (value - -minMax) / (minMax - -minMax);\n}\n\nfloat cnoiseNorm(vec3 P) {\n    float value = cnoise(P);\n    float minMax = sqrt(3.0) / 2.0;\n\n    return (value - -minMax) / (minMax - -minMax);\n}\n\nfloat cnoiseNorm(vec4 P) {\n    float value = cnoise(P);\n    float minMax = sqrt(4.0) / 2.0;\n\n    return (value - -minMax) / (minMax - -minMax);\n}\n',l_="\n// -----------------------------------------------------------------------------\n//\n//\n// -----------------------------------------------------------------------------\n\nfloat translate(float fromMin, float fromMax, float toMin, float toMax, float value) {\n    return (((value - fromMin) / (fromMax - fromMin)) * (toMax - toMin)) + toMin;\n}\n\nfloat translateNorm(float fromMin, float fromMax, float value) {\n    return translate(fromMin, fromMax, 0.0, 1.0, value);\n}\n\nfloat translateNoise2d(float value) {\n    float minMax = sqrt(2.0) / 2.0;\n    return translate(-minMax, minMax, 0.0, 1.0, value);\n}\n\nfloat translateNoise3d(float value) {\n    float minMax = sqrt(3.0) / 2.0;\n    return translate(-minMax, minMax, 0.0, 1.0, value);\n}\n\nfloat translateNoise4d(float value) {\n    float minMax = sqrt(4.0) / 2.0;\n    return translate(-minMax, minMax, 0.0, 1.0, value);\n}\n",c_="\n// -----------------------------------------------------------------------------\n//\n// Displaces shape using audio data, ambient Perlin noise patterns, and\n// overlapping sine waves.\n//\n// -----------------------------------------------------------------------------\n\nstruct SineWave {\n    float count;\n    float speed;\n    float amplitude;\n};\n\nuniform int uData[128];\nuniform float time;\nuniform float timeDelta;\nuniform float timeMult;\nuniform float zoom;\nuniform SineWave wavesX[3];\nuniform SineWave wavesY[3];\nuniform float jitterOffset0;\nuniform float jitterOffset1;\nuniform float fakeDataFade;\nuniform float fakeDataFadeOffset;\nuniform highp sampler2D uTexture;\n\nvarying float amount;\nvarying vec2 vUv;\nvarying vec2 jitter;\nvarying float gapNoise;\n\n".concat(a_,"\n").concat(o_,"\n").concat(l_,"\n\nfloat normalizeFreq(float freq) {\n    return (freq + 100.0) / 70.0;\n}\n\nfloat normalizeFreq(int freq) {\n    return normalizeFreq(float(freq));\n}\n\nfloat normalizeFreq(uint freq) {\n    return normalizeFreq(float(freq));\n}\n\nfloat waveOffset(float pos, SineWave wave) {\n    return sin((pos + timeDelta * wave.speed) * PI2 * wave.count) * wave.amplitude;\n}\n\n// Returns a vec2 that is x and y rotated by the value of degrees\nvec2 rotateBy(float degrees, float x, float y) {\n    float angle = degrees * PI / 180.0;\n    return vec2(\n        x * cos(angle) - y * sin(angle),\n        x * sin(angle) + y * cos(angle)\n    );\n}\n\n// Creates a field of overlapping noise used when no sound data is being passed\n// into this program, but it is still being rendered to the scene\nfloat generateFakeData() {\n    float fakeData0 = easeInOutExpo(translateNoise3d(cnoise(vec3(\n        (uv.x + fakeDataFadeOffset) * 10.0,\n        ((uv.y + fakeDataFadeOffset) * 1.0) - (timeDelta * 0.02),\n        fakeDataFadeOffset\n    )))) * 0.5;\n\n    float fakeData1 = easeInOutSine(translateNoise3d(cnoise(vec3(\n        (uv.x + fakeDataFadeOffset) * 20.0,\n        ((uv.y + fakeDataFadeOffset) * 20.0) - (timeDelta * 6.0),\n        fakeDataFadeOffset\n    )))) * 0.07;\n\n    float fakeData2 = easeInOutSine(translateNoise3d(cnoise(vec3(\n        (uv.x + fakeDataFadeOffset) * 4.0,\n        ((uv.y + fakeDataFadeOffset) * 10.0) - (timeDelta * 4.0),\n        fakeDataFadeOffset\n    )))) * 0.06;\n\n    return (fakeData0 + fakeData1 + fakeData2) * uv.y;\n}\n\nvoid main() {\n    // Mirrors UV along vertical axis and normalizes back to [0.0, 1.0]\n    vec2 mirroredUv = (uv - vec2(0.5, 0.0)) * vec2(2.0, 1.0);\n\n    // Creates a stretched Perlin noise field used to create gaps in the mesh\n    // and also blend between colors.\n    gapNoise = easeInOutQuart(translateNoise3d(cnoise(vec3(\n        (timeMult + uv.x) * float(SHAPE_WIDTH) * 0.5,\n        (timeMult + uv.y) * float(SHAPE_DEPTH) * 1.5,\n        timeDelta * 0.15\n    ))));\n\n    // Skews the y-coord of the uv to stretch out the bottom portion\n    float skewedUvY = max(0.0, translate(\n         0.0,   1.0,\n        -0.4,   1.0,\n        uv.y\n    ));\n\n    // Get the amount of frequency offset for this vertex\n    amount = normalizeFreq(texture(uTexture, vec2(mirroredUv.x * zoom, skewedUvY)).r);\n\n    // Mix the frequency data with fake data\n    amount = mix(amount, generateFakeData(), fakeDataFade);\n\n    // Create ambient wave pattern\n    vec2 rotated0 = rotateBy(0.0, uv.x, uv.y);\n    vec2 rotated1 = rotateBy(10.0, uv.x, uv.y);\n    vec2 rotated2 = rotateBy(-10.0, uv.x, uv.y);\n    float waveOffsetX0 = waveOffset(rotated0.x, wavesX[0]);\n    float waveOffsetX1 = waveOffset(rotated1.x, wavesX[1]);\n    float waveOffsetX2 = waveOffset(rotated2.x, wavesX[2]);\n    float waveOffsetY0 = waveOffset(rotated0.y, wavesX[0]);\n    float waveOffsetY1 = waveOffset(rotated1.y, wavesX[1]);\n    float waveOffsetY2 = waveOffset(rotated2.y, wavesX[2]);\n    float waveTotal = waveOffsetX0 + waveOffsetX1 + waveOffsetX2 + waveOffsetY0 + waveOffsetY1 + waveOffsetY2;\n    float wave = waveTotal / (wavesX[0].amplitude + wavesX[1].amplitude + wavesX[2].amplitude + wavesY[0].amplitude + wavesY[1].amplitude + wavesY[2].amplitude);\n    wave = translate(-1.0, 1.0, -0.4, 1.0, wave);\n\n    // Create x,y jitter offset\n    float noiseZoom = 3.0;\n    jitter = vec2(\n        translateNoise4d(cnoise(vec4(\n            position.x * noiseZoom,\n            position.y * noiseZoom,\n            jitterOffset0,\n            timeDelta * 0.07\n        ))),\n        translateNoise4d(cnoise(vec4(\n            position.x * noiseZoom,\n            position.y * noiseZoom,\n            jitterOffset1,\n            timeDelta * 0.07\n        )))\n    );\n\n    float waveOffset = wave * uv.y * 0.3;\n    float soundOffset = amount * (1.0 - uv.y) * 1.5 * min(1.0, uv.y * 8.0);\n\n    // Set local position of vertex\n    vec3 pos = vec3(\n        position.x + (jitter.x * 0.1),\n        position.y + (jitter.y * 0.1),\n        position.z + waveOffset + soundOffset\n    );\n\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n\n    vUv = uv;\n}\n"),h_="\n// -----------------------------------------------------------------------------\n//\n// Applies colors and stripe effect to shape layers.\n//\n// -----------------------------------------------------------------------------\n\nstruct Palette {\n    vec3 c0;\n    vec3 c1;\n};\n\nuniform Palette palettes[2];\nuniform float time;\nuniform float timeDelta;\nuniform float timeMult;\nuniform highp sampler2D uTexture;\n\nvarying float amount;\nvarying float gapNoise;\nvarying vec2 vUv;\nvarying vec2 jitter;\n\n".concat(a_,"\n").concat(o_,"\n").concat(l_,"\n\nvoid main() {\n    float gapCutoff = 0.2;\n    float gapColorShift = translateNorm(gapCutoff, 1.0 + gapCutoff, gapNoise + gapCutoff);\n    float blendTime = easeInOutQuart(\n        translateNorm(\n            -1.0,\n            1.0,\n            sin(timeDelta * timeMult)\n        )\n    );\n\n    // palette0 and palette1 are each 2-color palettes. paletteBlend transitions\n    // between those palettes over time\n    vec3 palette0 = mix(palettes[0].c0.rgb, palettes[0].c1.rgb, gapColorShift);\n    vec3 palette1 = mix(palettes[1].c0.rgb, palettes[1].c1.rgb, gapColorShift);\n    vec3 paletteBlend = mix(palette0, palette1, (blendTime));\n\n    // Mix paletteBlend with black using the intensity of sound as the factor\n    vec3 color_out = mix(\n        vec3(0.0),\n        paletteBlend,\n        amount\n    );\n\n    // Create gaps, stripes, and alpha falloff at the front and back\n    float stripeSize = 256.0;\n    if (vUv.y < 0.2) {\n        stripeSize = 768.0;\n    }\n    float stripesAlpha = translateNorm(-1.0, 1.0, sin(vUv.y * PI2 * stripeSize));\n    float falloffAlpha = easeInOutQuad(1.0 - abs((vUv.y - 0.5) * 2.0));\n    float alpha = stripesAlpha * pow(gapNoise, 1.4) * falloffAlpha;\n\n    gl_FragColor = vec4(color_out, alpha);\n\n    // Set a hard cutoff for gapNoise values under a threshold\n    if (gapNoise < gapCutoff) {\n        discard;\n    }\n}\n");function u_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u_(Object(n),!0).forEach((function(t){so(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s_(e);if(t){var r=s_(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return r_(this,n)}}function f_(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function m_(e,t,n){return v_(e,t),n}function g_(e,t,n){return v_(e,t),function(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}(n,"get"),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}function v_(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}var y_=new WeakMap,__=new WeakMap,b_=new WeakMap,x_=new WeakMap,S_=new WeakMap,E_=function(e){n_(n,e);var t=p_(n);function n(e){var i;wa(this,n);var r=d_(d_({},g_(n,n,M_)),e);Object.entries(r).forEach((function(e){null==e[1]&&(r[e[0]]=g_(n,n,M_)[e[0]])}));var s=m_(n,n,T_).call(n),a=s.waveX0,o=s.waveX1,l=s.waveX2,c=s.waveY0,h=s.waveY1,u=s.waveY2;return f_(e_(i=t.call(this,{uniforms:{uTexture:{value:null},uData:{value:null},palettes:{value:r.palettes.map((function(e){return{c0:new ef(e[0]),c1:new ef(e[1])}}))},time:{value:0},timeDelta:{value:0},wavesX:{value:[a,o,l]},wavesY:{value:[c,h,u]},jitterOffset0:{value:m_(n,n,w_).call(n,0,1)},jitterOffset1:{value:m_(n,n,w_).call(n,0,1)},fakeDataFade:{value:0},fakeDataFadeOffset:{value:0},zoom:{value:r.zoom},timeMult:{value:m_(n,n,w_).call(n,.1,.5)}},vertexShader:c_,fragmentShader:h_,defines:{PI:Math.PI,PI2:2*Math.PI,SHAPE_WIDTH:r.width,SHAPE_DEPTH:r.depth}})),y_,{writable:!0,value:void 0}),f_(e_(i),__,{writable:!0,value:void 0}),f_(e_(i),b_,{writable:!0,value:void 0}),f_(e_(i),x_,{writable:!0,value:0}),f_(e_(i),S_,{writable:!0,value:function(e){var t,n=1500*(t=Kh(e_(i),__)?1-Kh(e_(i),x_):Kh(e_(i),x_));void 0===Kh(e_(i),b_)&&$h(e_(i),b_,e);var r=(e-Kh(e_(i),b_))/n;r<1&&r>=0&&$h(e_(i),y_,requestAnimationFrame(Kh(e_(i),S_))),r=Kh(e_(i),__)?r*t+Kh(e_(i),x_):r*t+(1-Kh(e_(i),x_)),r=Math.max(0,Math.min(1,r)),Kh(e_(i),__)||(r=1-r),i.uniforms.fakeDataFade.value=r}}),i.transparent=!0,i.side=2,g_(n,n,A_).push(e_(i)),g_(n,n,A_).forEach((function(e,t){e.uniforms.fakeDataFadeOffset.value=t/g_(n,n,A_).length})),i}return Ma(n,[{key:"fakeDataState",get:function(){var e=this.uniforms.fakeDataFade.value;return e<=0?n.FakeDataState.USING_REAL:e>=1?n.FakeDataState.USING_FAKE:Kh(this,__)?n.FakeDataState.TRANSITION_TO_FAKE:n.FakeDataState.TRANSITION_TO_REAL}},{key:"setFakeData",value:function(){$h(this,b_,void 0),cancelAnimationFrame(Kh(this,y_)),this.uniforms.fakeDataFade.value=1,$h(this,x_,1)}},{key:"unsetFakeData",value:function(){$h(this,b_,void 0),cancelAnimationFrame(Kh(this,y_)),this.uniforms.fakeDataFade.value=0,$h(this,x_,0)}},{key:"animateSetFakeData",value:function(){this.fakeDataState!==n.FakeDataState.TRANSITION_TO_FAKE&&this.fakeDataState!==n.FakeDataState.USING_FAKE&&($h(this,x_,this.uniforms.fakeDataFade.value),$h(this,b_,void 0),cancelAnimationFrame(Kh(this,y_)),$h(this,__,!0),Kh(this,S_).call(this,document.timeline.currentTime))}},{key:"animateUnsetFakeData",value:function(){this.fakeDataState!==n.FakeDataState.TRANSITION_TO_REAL&&this.fakeDataState!==n.FakeDataState.USING_REAL&&($h(this,x_,this.uniforms.fakeDataFade.value),$h(this,b_,void 0),cancelAnimationFrame(Kh(this,y_)),$h(this,__,!1),Kh(this,S_).call(this,document.timeline.currentTime))}}]),n}(jf);function w_(e,t){var n=Math.min(e,t),i=Math.max(e,t);return Math.random()*(i-n)+n}function T_(){return{waveX0:{count:m_(E_,E_,w_).call(E_,1,4),speed:m_(E_,E_,w_).call(E_,.05,.1),amplitude:.2},waveX1:{count:m_(E_,E_,w_).call(E_,1,2),speed:-m_(E_,E_,w_).call(E_,.1,.2),amplitude:.25},waveX2:{count:m_(E_,E_,w_).call(E_,1,4),speed:-m_(E_,E_,w_).call(E_,.05,.1),amplitude:.25},waveY0:{count:m_(E_,E_,w_).call(E_,1,4),speed:m_(E_,E_,w_).call(E_,.05,.1),amplitude:.2},waveY1:{count:m_(E_,E_,w_).call(E_,1,2),speed:-m_(E_,E_,w_).call(E_,.1,.2),amplitude:.25},waveY2:{count:m_(E_,E_,w_).call(E_,1,4),speed:-m_(E_,E_,w_).call(E_,.05,.1),amplitude:.25}}}var M_={writable:!0,value:{palettes:[[16711680,16711680],[16711680,16711680]],width:1,depth:1,zoom:1}},A_={writable:!0,value:[]};so(E_,"FakeDataState",{USING_FAKE:0,USING_REAL:1,TRANSITION_TO_FAKE:2,TRANSITION_TO_REAL:3});var P_='\n// -----------------------------------------------------------------------------\n//\n// GLSL blending modes adapted from https://github.com/jamieowen/glsl-blend.\n//\n// -----------------------------------------------------------------------------\n//\n// The MIT License (MIT) Copyright (c) 2015 Jamie Owen\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n//\n// -----------------------------------------------------------------------------\n\nfloat blendAdd(float base, float blend) {\n    return min(base + blend, 1.0);\n}\n\nvec3 blendAdd(vec3 base, vec3 blend) {\n    return min(base + blend, vec3(1.0));\n}\n\nfloat blendAverage(float base, float blend) {\n    return (base + blend) / 2.0;\n}\n\nvec3 blendAverage(vec3 base, vec3 blend) {\n    return (base + blend) / 2.0;\n}\n\nfloat blendColorBurn(float base, float blend) {\n    return (blend == 0.0) ? blend : max((1.0 - ((1.0 - base) / blend)), 0.0);\n}\n\nvec3 blendColorBurn(vec3 base, vec3 blend) {\n    return vec3(\n        blendColorBurn(base.r, blend.r),\n        blendColorBurn(base.g, blend.g),\n        blendColorBurn(base.b, blend.b)\n    );\n}\n\nfloat blendColorDodge(float base, float blend) {\n    return (blend == 1.0) ? blend : min(base / (1.0 - blend), 1.0);\n}\n\nvec3 blendColorDodge(vec3 base, vec3 blend) {\n    return vec3(\n        blendColorDodge(base.r, blend.r),\n        blendColorDodge(base.g, blend.g),\n        blendColorDodge(base.b, blend.b)\n    );\n}\n\nfloat blendDarken(float base, float blend) {\n    return min(blend, base);\n}\n\nvec3 blendDarken(vec3 base, vec3 blend) {\n    return vec3(\n        blendDarken(base.r, blend.r),\n        blendDarken(base.g, blend.g),\n        blendDarken(base.b, blend.b)\n    );\n}\n\nfloat blendDifference(float base, float blend) {\n    return abs(base - blend);\n}\n\nvec3 blendDifference(vec3 base, vec3 blend) {\n    return abs(base - blend);\n}\n\nfloat blendExclusion(float base, float blend) {\n    return base + blend - 2.0 * base * blend;\n}\n\nvec3 blendExclusion(vec3 base, vec3 blend) {\n    return base + blend - 2.0 * base * blend;\n}\n\nfloat blendLighten(float base, float blend) {\n    return max(blend, base);\n}\n\nvec3 blendLighten(vec3 base, vec3 blend) {\n    return vec3(\n        blendLighten(base.r, blend.r),\n        blendLighten(base.g, blend.g),\n        blendLighten(base.b, blend.b)\n    );\n}\n\nfloat blendLinearBurn(float base, float blend) {\n    // Note : Same implementation as BlendSubtractf\n    return max(base + blend - 1.0, 0.0);\n}\n\nvec3 blendLinearBurn(vec3 base, vec3 blend) {\n    // Note : Same implementation as BlendSubtract\n    return max(base + blend - vec3(1.0), vec3(0.0));\n}\n\nfloat blendLinearDodge(float base, float blend) {\n    // Note : Same implementation as BlendAdd\n    return min(base + blend, 1.0);\n}\n\nvec3 blendLinearDodge(vec3 base, vec3 blend) {\n    // Note : Same implementation as BlendAdd\n    return min(base + blend, vec3(1.0));\n}\n\nfloat blendLinearLight(float base, float blend) {\n    return blend < 0.5 ? blendLinearBurn(base, (2.0 * blend)) : blendLinearDodge(base, (2.0 * (blend - 0.5)));\n}\n\nvec3 blendLinearLight(vec3 base, vec3 blend) {\n    return vec3(\n        blendLinearLight(base.r, blend.r),\n        blendLinearLight(base.g, blend.g),\n        blendLinearLight(base.b, blend.b)\n    );\n}\n\nfloat blendMultiply(float base, float blend) {\n    return base * blend;\n}\n\nvec3 blendMultiply(vec3 base, vec3 blend) {\n    return base * blend;\n}\n\nfloat blendNegation(float base, float blend) {\n    return 1.0 - abs(1.0 - base - blend);\n}\n\nvec3 blendNegation(vec3 base, vec3 blend) {\n    return vec3(1.0) - abs(vec3(1.0) - base - blend);\n}\n\nfloat blendOverlay(float base, float blend) {\n    return base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend));\n}\n\nvec3 blendOverlay(vec3 base, vec3 blend) {\n    return vec3(\n        blendOverlay(base.r, blend.r),\n        blendOverlay(base.g, blend.g),\n        blendOverlay(base.b, blend.b)\n    );\n}\n\nfloat blendHardLight(float base, float blend) {\n    return blendOverlay(blend, base);\n}\n\nvec3 blendHardLight(vec3 base, vec3 blend) {\n    return blendOverlay(blend, base);\n}\n\nfloat blendPhoenix(float base, float blend) {\n    return min(base, blend) - max(base, blend) + 1.0;\n}\n\nvec3 blendPhoenix(vec3 base, vec3 blend) {\n    return min(base, blend) - max(base, blend) + vec3(1.0);\n}\n\nfloat blendPinLight(float base, float blend) {\n    return (blend < 0.5) ? blendDarken(base, (2.0 * blend)) : blendLighten(base, (2.0 * (blend - 0.5)));\n}\n\nvec3 blendPinLight(vec3 base, vec3 blend) {\n    return vec3(\n        blendPinLight(base.r, blend.r),\n        blendPinLight(base.g, blend.g),\n        blendPinLight(base.b, blend.b)\n    );\n}\n\nfloat blendReflect(float base, float blend) {\n    return (blend == 1.0) ? blend : min(base * base / (1.0 - blend), 1.0);\n}\n\nvec3 blendReflect(vec3 base, vec3 blend) {\n    return vec3(\n        blendReflect(base.r, blend.r),\n        blendReflect(base.g, blend.g),\n        blendReflect(base.b, blend.b)\n    );\n}\n\nfloat blendGlow(float base, float blend) {\n    return blendReflect(blend, base);\n}\n\nvec3 blendGlow(vec3 base, vec3 blend) {\n    return blendReflect(blend, base);\n}\n\nfloat blendScreen(float base, float blend) {\n    return 1.0 - ((1.0 - base) * (1.0 - blend));\n}\n\nvec3 blendScreen(vec3 base, vec3 blend) {\n    return vec3(\n        blendScreen(base.r, blend.r),\n        blendScreen(base.g, blend.g),\n        blendScreen(base.b, blend.b)\n    );\n}\n\nfloat blendSoftLight(float base, float blend) {\n    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));\n}\n\nvec3 blendSoftLight(vec3 base, vec3 blend) {\n    return vec3(\n        blendSoftLight(base.r, blend.r),\n        blendSoftLight(base.g, blend.g),\n        blendSoftLight(base.b, blend.b)\n    );\n}\n\nfloat blendSubtract(float base, float blend) {\n    return max(base + blend - 1.0, 0.0);\n}\n\nvec3 blendSubtract(vec3 base, vec3 blend) {\n    return max(base + blend - vec3(1.0), vec3(0.0));\n}\n\nfloat blendVividLight(float base, float blend) {\n    return (blend < 0.5) ? blendColorBurn(base, (2.0 * blend)) : blendColorDodge(base, (2.0 * (blend - 0.5)));\n}\n\nvec3 blendVividLight(vec3 base, vec3 blend) {\n    return vec3(\n        blendVividLight(base.r, blend.r),\n        blendVividLight(base.g, blend.g),\n        blendVividLight(base.b, blend.b)\n    );\n}\n\nfloat blendHardMix(float base, float blend) {\n    return (blendVividLight(base, blend) < 0.5) ? 0.0 : 1.0;\n}\n\nvec3 blendHardMix(vec3 base, vec3 blend) {\n    return vec3(\n        blendHardMix(base.r, blend.r),\n        blendHardMix(base.g, blend.g),\n        blendHardMix(base.b, blend.b)\n    );\n}\n',C_=Array.from(P_.matchAll(/float blend(\w+)\(/g)).map((function(e){return e[1]}));const I_=function(e,t){return"\n// -----------------------------------------------------------------------------\n//\n// Composites ".concat(e," sampler2Ds using the ").concat(t," blending mode.\n//\n// This shader is dynamically generated for each update to the number of\n// samplers and the blending mode.\n//\n// -----------------------------------------------------------------------------\n\nuniform sampler2D uTextures[").concat(e,"];\n\nvarying vec2 vUv;\n\n").concat('\n// -----------------------------------------------------------------------------\n//\n// GLSL blending modes adapted from https://github.com/jamieowen/glsl-blend.\n//\n// -----------------------------------------------------------------------------\n//\n// The MIT License (MIT) Copyright (c) 2015 Jamie Owen\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n//\n// -----------------------------------------------------------------------------\n\nfloat blendAdd(float base, float blend) {\n    return min(base + blend, 1.0);\n}\n\nvec3 blendAdd(vec3 base, vec3 blend) {\n    return min(base + blend, vec3(1.0));\n}\n\nfloat blendAverage(float base, float blend) {\n    return (base + blend) / 2.0;\n}\n\nvec3 blendAverage(vec3 base, vec3 blend) {\n    return (base + blend) / 2.0;\n}\n\nfloat blendColorBurn(float base, float blend) {\n    return (blend == 0.0) ? blend : max((1.0 - ((1.0 - base) / blend)), 0.0);\n}\n\nvec3 blendColorBurn(vec3 base, vec3 blend) {\n    return vec3(\n        blendColorBurn(base.r, blend.r),\n        blendColorBurn(base.g, blend.g),\n        blendColorBurn(base.b, blend.b)\n    );\n}\n\nfloat blendColorDodge(float base, float blend) {\n    return (blend == 1.0) ? blend : min(base / (1.0 - blend), 1.0);\n}\n\nvec3 blendColorDodge(vec3 base, vec3 blend) {\n    return vec3(\n        blendColorDodge(base.r, blend.r),\n        blendColorDodge(base.g, blend.g),\n        blendColorDodge(base.b, blend.b)\n    );\n}\n\nfloat blendDarken(float base, float blend) {\n    return min(blend, base);\n}\n\nvec3 blendDarken(vec3 base, vec3 blend) {\n    return vec3(\n        blendDarken(base.r, blend.r),\n        blendDarken(base.g, blend.g),\n        blendDarken(base.b, blend.b)\n    );\n}\n\nfloat blendDifference(float base, float blend) {\n    return abs(base - blend);\n}\n\nvec3 blendDifference(vec3 base, vec3 blend) {\n    return abs(base - blend);\n}\n\nfloat blendExclusion(float base, float blend) {\n    return base + blend - 2.0 * base * blend;\n}\n\nvec3 blendExclusion(vec3 base, vec3 blend) {\n    return base + blend - 2.0 * base * blend;\n}\n\nfloat blendLighten(float base, float blend) {\n    return max(blend, base);\n}\n\nvec3 blendLighten(vec3 base, vec3 blend) {\n    return vec3(\n        blendLighten(base.r, blend.r),\n        blendLighten(base.g, blend.g),\n        blendLighten(base.b, blend.b)\n    );\n}\n\nfloat blendLinearBurn(float base, float blend) {\n    // Note : Same implementation as BlendSubtractf\n    return max(base + blend - 1.0, 0.0);\n}\n\nvec3 blendLinearBurn(vec3 base, vec3 blend) {\n    // Note : Same implementation as BlendSubtract\n    return max(base + blend - vec3(1.0), vec3(0.0));\n}\n\nfloat blendLinearDodge(float base, float blend) {\n    // Note : Same implementation as BlendAdd\n    return min(base + blend, 1.0);\n}\n\nvec3 blendLinearDodge(vec3 base, vec3 blend) {\n    // Note : Same implementation as BlendAdd\n    return min(base + blend, vec3(1.0));\n}\n\nfloat blendLinearLight(float base, float blend) {\n    return blend < 0.5 ? blendLinearBurn(base, (2.0 * blend)) : blendLinearDodge(base, (2.0 * (blend - 0.5)));\n}\n\nvec3 blendLinearLight(vec3 base, vec3 blend) {\n    return vec3(\n        blendLinearLight(base.r, blend.r),\n        blendLinearLight(base.g, blend.g),\n        blendLinearLight(base.b, blend.b)\n    );\n}\n\nfloat blendMultiply(float base, float blend) {\n    return base * blend;\n}\n\nvec3 blendMultiply(vec3 base, vec3 blend) {\n    return base * blend;\n}\n\nfloat blendNegation(float base, float blend) {\n    return 1.0 - abs(1.0 - base - blend);\n}\n\nvec3 blendNegation(vec3 base, vec3 blend) {\n    return vec3(1.0) - abs(vec3(1.0) - base - blend);\n}\n\nfloat blendOverlay(float base, float blend) {\n    return base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend));\n}\n\nvec3 blendOverlay(vec3 base, vec3 blend) {\n    return vec3(\n        blendOverlay(base.r, blend.r),\n        blendOverlay(base.g, blend.g),\n        blendOverlay(base.b, blend.b)\n    );\n}\n\nfloat blendHardLight(float base, float blend) {\n    return blendOverlay(blend, base);\n}\n\nvec3 blendHardLight(vec3 base, vec3 blend) {\n    return blendOverlay(blend, base);\n}\n\nfloat blendPhoenix(float base, float blend) {\n    return min(base, blend) - max(base, blend) + 1.0;\n}\n\nvec3 blendPhoenix(vec3 base, vec3 blend) {\n    return min(base, blend) - max(base, blend) + vec3(1.0);\n}\n\nfloat blendPinLight(float base, float blend) {\n    return (blend < 0.5) ? blendDarken(base, (2.0 * blend)) : blendLighten(base, (2.0 * (blend - 0.5)));\n}\n\nvec3 blendPinLight(vec3 base, vec3 blend) {\n    return vec3(\n        blendPinLight(base.r, blend.r),\n        blendPinLight(base.g, blend.g),\n        blendPinLight(base.b, blend.b)\n    );\n}\n\nfloat blendReflect(float base, float blend) {\n    return (blend == 1.0) ? blend : min(base * base / (1.0 - blend), 1.0);\n}\n\nvec3 blendReflect(vec3 base, vec3 blend) {\n    return vec3(\n        blendReflect(base.r, blend.r),\n        blendReflect(base.g, blend.g),\n        blendReflect(base.b, blend.b)\n    );\n}\n\nfloat blendGlow(float base, float blend) {\n    return blendReflect(blend, base);\n}\n\nvec3 blendGlow(vec3 base, vec3 blend) {\n    return blendReflect(blend, base);\n}\n\nfloat blendScreen(float base, float blend) {\n    return 1.0 - ((1.0 - base) * (1.0 - blend));\n}\n\nvec3 blendScreen(vec3 base, vec3 blend) {\n    return vec3(\n        blendScreen(base.r, blend.r),\n        blendScreen(base.g, blend.g),\n        blendScreen(base.b, blend.b)\n    );\n}\n\nfloat blendSoftLight(float base, float blend) {\n    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));\n}\n\nvec3 blendSoftLight(vec3 base, vec3 blend) {\n    return vec3(\n        blendSoftLight(base.r, blend.r),\n        blendSoftLight(base.g, blend.g),\n        blendSoftLight(base.b, blend.b)\n    );\n}\n\nfloat blendSubtract(float base, float blend) {\n    return max(base + blend - 1.0, 0.0);\n}\n\nvec3 blendSubtract(vec3 base, vec3 blend) {\n    return max(base + blend - vec3(1.0), vec3(0.0));\n}\n\nfloat blendVividLight(float base, float blend) {\n    return (blend < 0.5) ? blendColorBurn(base, (2.0 * blend)) : blendColorDodge(base, (2.0 * (blend - 0.5)));\n}\n\nvec3 blendVividLight(vec3 base, vec3 blend) {\n    return vec3(\n        blendVividLight(base.r, blend.r),\n        blendVividLight(base.g, blend.g),\n        blendVividLight(base.b, blend.b)\n    );\n}\n\nfloat blendHardMix(float base, float blend) {\n    return (blendVividLight(base, blend) < 0.5) ? 0.0 : 1.0;\n}\n\nvec3 blendHardMix(vec3 base, vec3 blend) {\n    return vec3(\n        blendHardMix(base.r, blend.r),\n        blendHardMix(base.g, blend.g),\n        blendHardMix(base.b, blend.b)\n    );\n}\n',"\n\nvoid main() {\n    vec3 color = vec3(0.0);\n\n    ").concat(function(e,t){return Array(e).fill(0).map((function(e,n){return"color = blend".concat(t,"(color, texture(uTextures[").concat(n,"], vUv).rgb);")})).join("\n\r    ")}(e,t),"\n\n    gl_FragColor = vec4(color, 1.0);\n}\n")};function L_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s_(e);if(t){var r=s_(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return r_(this,n)}}function D_(e,t){k_(e,t),t.add(e)}function R_(e,t,n){k_(e,t),t.set(e,n)}function k_(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function O_(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),function(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}(n,"get"),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}function F_(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var N_=new WeakMap,B_=new WeakMap,z_=new WeakSet,U_=new WeakSet,V_=function(e){n_(n,e);var t=L_(n);function n(e){var i;return wa(this,n),D_(e_(i=t.call(this,{uniforms:{uTextures:{value:[]}},vertexShader:O_(n,n,W_),fragmentShader:O_(n,n,q_)})),U_),D_(e_(i),z_),R_(e_(i),N_,{get:H_,set:void 0}),R_(e_(i),B_,{writable:!0,value:"Add"}),i}return Ma(n,[{key:"blendMode",get:function(){return Kh(this,B_)},set:function(e){$h(this,B_,F_(this,z_,G_).call(this,e)),F_(this,U_,j_).call(this)}},{key:"addTexture",value:function(e){this.uniforms.uTextures.value.push(e),F_(this,U_,j_).call(this)}},{key:"updateTexture",value:function(e,t){this.uniforms.uTextures.value[e]=t}}],[{key:"blendModes",get:function(){return C_}}]),n}(jf);function H_(){return this.uniforms.uTextures.value.length}function G_(e){return e&&C_.includes(e)?e:(e&&console.warn('Invalid blend mode: "'.concat(e,'"\n\rUsing previous mode: "').concat(Kh(this,B_),'"\n\rSee available blend modes with CompositeMaterial.blendModes')),Kh(this,B_))}function j_(){Kh(this,N_)<1||(this.fragmentShader=I_(Kh(this,N_),Kh(this,B_)),this.needsUpdate=!0)}var W_={writable:!0,value:"varying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}"},q_={writable:!0,value:"void main() {\n    vec3 color = vec3(0.0);\n    gl_FragColor = vec4(color, 1.0);\n}"};function X_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Y_(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var $_=new WeakMap,K_=new WeakMap,Z_=new WeakMap,Q_=new WeakMap,J_=new WeakMap,eb=new WeakMap,tb=new WeakMap,nb=new WeakMap,ib=new WeakMap,rb=new WeakMap,sb=new WeakMap,ab=new WeakMap,ob=new WeakMap,lb=new WeakMap,cb=new WeakMap,hb=new WeakMap,ub=new WeakMap,db=new WeakMap,pb=function(){function e(t){var n=this;wa(this,e),Y_(this,$_,{writable:!0,value:void 0}),Y_(this,K_,{writable:!0,value:void 0}),Y_(this,Z_,{writable:!0,value:void 0}),Y_(this,Q_,{writable:!0,value:[]}),Y_(this,J_,{writable:!0,value:void 0}),Y_(this,eb,{writable:!0,value:void 0}),Y_(this,tb,{writable:!0,value:void 0}),Y_(this,nb,{writable:!0,value:void 0}),Y_(this,ib,{writable:!0,value:void 0}),Y_(this,rb,{writable:!0,value:void 0}),Y_(this,sb,{writable:!0,value:void 0}),Y_(this,ab,{writable:!0,value:0}),Y_(this,ob,{writable:!0,value:e.State.UNSTARTED}),Y_(this,lb,{writable:!0,value:function(){Kh(n,cb).call(n);var e=matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)"));e.addEventListener("change",Kh(n,lb)),$h(n,cb,(function(){e.removeEventListener("change",Kh(n,lb))})),Kh(n,hb).call(n)}}),Y_(this,cb,{writable:!0,value:function(){}}),Y_(this,hb,{writable:!0,value:function(){var e=Kh(n,$_),t=e.clientWidth,i=e.clientHeight,r=Math.min(2,window.devicePixelRatio);n.camera.aspect=2*t/i,n.camera.updateProjectionMatrix(),Kh(n,K_).setPixelRatio(r),Kh(n,Z_).setPixelRatio(r),Kh(n,K_).setSize(t,i,!1),Kh(n,Z_).setSize(t,i,!1),Kh(n,Q_).forEach((function(e){e.renderTarget.setSize(t*r,i*r)}))}}),Y_(this,ub,{writable:!0,value:function(t,i){!0!==i&&$h(n,ib,requestAnimationFrame(Kh(n,ub))),Kh(n,ob)!==e.State.PLAYING&&cancelAnimationFrame(Kh(n,ib));var r=t-Kh(n,rb);$h(n,ab,Kh(n,ab)+r),$h(n,rb,t),!0!==i&&n.onBeforeRender(n,t/1e3,Kh(n,ab)/1e3),Kh(n,Q_).forEach((function(e,t){var i=e.object,r=e.renderTarget;i.visible=!0,Kh(n,K_).setRenderTarget(r),Kh(n,K_).render(Kh(n,J_),n.camera),i.visible=!1,r.texture.needsUpdate=!0,Kh(n,nb).material.updateTexture(t,r.texture)})),Kh(n,nb).visible=!0,Kh(n,K_).setRenderTarget(null),Kh(n,Z_).render(Kh(n,J_),n.orthoCamera),Kh(n,nb).visible=!1,!0!==i&&n.onAfterRender(n,t/1e3,Kh(n,ab)/1e3)}}),Y_(this,db,{writable:!0,value:function(){Kh(n,ub).call(n,document.timeline.currentTime,!0)}}),so(this,"onBeforeRender",(function(){})),so(this,"onAfterRender",(function(){}));$h(this,$_,t||document.body),$h(this,J_,new Vv),$h(this,K_,new Uv({alpha:!1,antialias:!1,stencil:!1,powerPreference:"high-performance"})),$h(this,Z_,new Yy(Kh(this,K_))),Kh(this,$_).appendChild(Kh(this,K_).domElement),this.camera=new qf(18,Kh(this,$_).clientWidth/Kh(this,$_).clientHeight,.001,10),this.orthoCamera=new vm(-1,1,1,-1,0,1),$h(this,nb,new Nf(new am(2,2),new V_("Add"))),Kh(this,J_).add(Kh(this,nb)),Kh(this,nb).visible=!1,$h(this,eb,new kv),$h(this,tb,new kv),Kh(this,tb).rotation.set(Math.PI/180*-64,0,0),Kh(this,eb).add(Kh(this,tb)),Kh(this,J_).add(Kh(this,eb)),this.camera.position.z=75/18,this.camera.position.x=2,this.camera.position.set(.838,.326,4.545),this.camera.lookAt(0,.29,0);var i=new $y(Kh(this,J_),this.orthoCamera);Kh(this,Z_).addPass(i),this.bloomPass=new Jy,this.bloomPass.threshold=0,this.bloomPass.strength=.58,this.bloomPass.radius=.19,this.bloomPass.exposure=0,Kh(this,Z_).addPass(this.bloomPass);var r=new Zy;Kh(this,Z_).addPass(r),Kh(this,hb).call(this),window.addEventListener("resize",Kh(this,hb)),Kh(this,lb).call(this),$h(this,ob,e.State.STARTED)}return Ma(e,[{key:"state",get:function(){return Kh(this,ob)}},{key:"humanReadableState",get:function(){switch(Kh(this,ob)){case e.State.UNSTARTED:return"UNSTARTED";case e.State.STARTED:return"STARTED";case e.State.PLAYING:return"PLAYING";case e.State.PAUSED:return"PAUSED";default:return}}},{key:"objects",get:function(){return Kh(this,Q_).map((function(e){return e.object}))}},{key:"run",value:function(){$h(this,ob,e.State.PLAYING),$h(this,rb,document.timeline.currentTime),Kh(this,ub).call(this,document.timeline.currentTime)}},{key:"addObject",value:function(e){var t=new am(12,3,200,90),n=new Nf(t,new E_(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X_(Object(n),!0).forEach((function(t){so(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:t.parameters.width,depth:t.parameters.height},e)));n.visible=!1,"rotation"in e&&n.rotation.set(e.rotation*(Math.PI/180),0,0),Kh(this,tb).add(n);var i=new Dd(Kh(this,$_).clientWidth*window.devicePixelRatio,Kh(this,$_).clientHeight*window.devicePixelRatio);i.format=bu,Kh(this,Q_).push({object:n,renderTarget:i}),Kh(this,nb).material.addTexture(i.texture)}},{key:"pause",value:function(){cancelAnimationFrame(Kh(this,ib)),$h(this,ob,e.State.PAUSED),$h(this,sb,document.timeline.currentTime),window.addEventListener("resize",Kh(this,db))}},{key:"unpause",value:function(){$h(this,ob,e.State.PLAYING),Kh(this,ub).call(this,Kh(this,rb)),window.removeEventListener("resize",Kh(this,db))}},{key:"setBlendingMode",value:function(e){Kh(this,nb).material.blendMode=e}},{key:"setInteractiveRotation",value:function(e){Kh(this,eb).rotation.set(e*(Math.PI/180),0,0)}}]),e}();function fb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function mb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fb(Object(n),!0).forEach((function(t){so(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}so(pb,"State",{UNSTARTED:0,STARTED:1,PLAYING:2,PAUSED:3});var gb=".js-visualizer",vb=".js-bioacoustics-visualizer__vis-container",yb=".js-checkbox",_b=".bioacoustics-visualizer__skip-link",bb=function(){function e(t){var n=this;wa(this,e),so(this,"handleDocumentVisibility",(function(){"hidden"===document.visibilityState?(n.prevVisualizerState=n.visualizer.state,n.visualizer.pause()):"visible"===document.visibilityState&&n.prevVisualizerState===pb.State.PLAYING&&n.visualizer.unpause()})),so(this,"handleScreenOrientationChange",(function(e){setTimeout((function(){scroll({top:n.element.getBoundingClientRect().top+document.documentElement.scrollTop,behavior:"instant"}),n.rotateOnScroll()}),500)})),so(this,"rotateOnScroll",(function(){var e=n.element.getBoundingClientRect(),t=e.top,i=e.height,r=(t+i)/(i+window.innerHeight);r=1-Math.min(1,Math.max(0,r));n.visualizer.setInteractiveRotation(-60*(r-.5))})),so(this,"getSkipLink",(function(e){var t=e.nextElementSibling;if(null!==t)t.hasAttribute("id")?n.skipLink.href="#".concat(t.id):n.getSkipLink(t);else{var i=e.parentElement;null!==e.parentElement?n.getSkipLink(i):n.skipLink.remove()}})),so(this,"handleButtonChange",(function(e,t,i){"mute"===n.audioButton.state&&Py.unmuteAll();var r=n.buttons.some((function(e){return e.checked})),s=!r;e.checked?t.play():(t.pause(),s&&(i.animateSetFakeData(),Py.hibernate())),r&&(n.visualizer.objects.forEach((function(e){e.material.animateUnsetFakeData()})),Py.wake()),n.firstInteraction&&(n.audioButton.setState("mute"),n.firstInteraction=!1)})),so(this,"handleHibernationState",(function(){var e=n.tracks.every((function(e){return e.muted})),t=n.buttons.some((function(e){return e.checked}));"hidden"===document.visibilityState||!n.isVisible&&e?Py.hibernate():n.isVisible&&"visible"===document.visibilityState&&t&&Py.wake()})),this.element=t,this.visContainer=this.element.querySelector(vb),this.skipLink=this.element.querySelector(_b),this.tracks=[],this.visualizer=new pb(this.visContainer),this.motionButton=window.unlocked.toggleButtons[this.element.dataset.motionToggle],this.audioButton=window.unlocked.toggleButtons[this.element.dataset.audioToggle],this.emitter=Ca.UTILS.EMITTER,this.firstInteraction=!0,this.isVisible=!1,this.prevVisualizerState=this.visualizer.state,this.buttons=Ra(this.element.querySelectorAll(yb)),this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.getSkipLink(this.element),this.configurePlayerControls(),this.visualizer.setBlendingMode("Difference"),this.rotateOnScroll(),this.setupIntersectionObservers(),this.getSoundMeta().forEach((function(t,n){e.tracks.push(new Py(t.path,mb({},t))),e.visualizer.addObject({palettes:t.palettes,zoom:t.zoom})})),this.visualizer.onBeforeRender=function(t,n,i){e.tracks.forEach((function(e){return e.update()})),t.objects.forEach((function(t,r){t.material.uniforms.uData.value=e.tracks[r].data,t.material.uniforms.uTexture.value=e.tracks[r].texture,t.material.uniforms.time.value=n,t.material.uniforms.timeDelta.value=i}))},Py.onFirstInteraction=function(){"mute"===e.audioButton.state&&e.buttons.forEach((function(t,n){void 0!==e.visualizer.objects[n]&&e.visualizer.objects[n].material.animateUnsetFakeData()})),e.tracks.forEach((function(t,n){void 0!==e.buttons[n]&&e.buttons[n].checked&&t.play()}))},this.buttons.forEach((function(t,n){if(void 0!==e.tracks[n]){var i=e.tracks[n];if(t.addEventListener("change",(function(t){e.handleButtonChange(t.target,i,e.visualizer.objects[n].material)})),t.checked)if("running"!==Py.contextState){if(void 0===e.visualizer.objects[n])return;e.visualizer.objects[n].material.setFakeData()}else i.mute(),i.play()}})),this.emitter.on(Ca.EVENTS.REDUCED_MOTION_CHANGE,(function(t){t&&(e.visualizer.pause(),e.motionButton.setState("play"))})),document.addEventListener("visibilitychange",this.handleHibernationState)}},{key:"configurePlayerControls",value:function(){var e=this;this.audioButton.onClick=function(t,n,i){i.setState("play"===t?"mute":"play"),e.firstInteraction=!1},this.motionButton.onClick=function(e,t,n){n.setState("play"===e?"pause":"play")},this.audioButton.setState("play"),this.motionButton.setState(this.hasReducedMotion?"play":"pause"),this.audioButton.onStateChange=function(t){"play"===t?(e.audioButton.element.ariaPressed=!1,Py.muteAll()):"mute"===t&&(e.audioButton.element.ariaPressed=!0,"running"!==Py.contextState&&e.buttons.forEach((function(t,n){if(void 0!==e.tracks[n]){var i=e.tracks[n];t.checked&&i.play()}})),Py.unmuteAll(),e.stopOtherAudio()),e.updateAudioButtonDisplay(t)},this.motionButton.onStateChange=function(t,n){"play"===t?(e.motionButton.element.ariaPressed=!1,e.visualizer.pause()):"pause"===t&&(e.motionButton.element.ariaPressed=!0,e.visualizer.unpause()),e.updateMotionButtonDisplay(t)},this.updateAudioButtonDisplay("play"),this.updateMotionButtonDisplay(this.hasReducedMotion?"play":"pause")}},{key:"setupIntersectionObservers",value:function(){var e=this,t=new IntersectionObserver((function(t,n){t.forEach((function(t){e.isVisible=t.isIntersecting,t.isIntersecting?(e.prevVisualizerState===pb.State.PLAYING&&e.visualizer.unpause(),document.addEventListener("scroll",e.rotateOnScroll),document.addEventListener("resize",e.rotateOnScroll),document.addEventListener("visibilitychange",e.handleDocumentVisibility),"orientation"in screen&&screen.orientation.addEventListener("change",e.handleScreenOrientationChange)):(e.prevVisualizerState=e.visualizer.state,e.visualizer.pause(),document.removeEventListener("scroll",e.rotateOnScroll),document.removeEventListener("resize",e.rotateOnScroll),document.removeEventListener("visibilitychange",e.handleDocumentVisibility),"orientation"in screen&&screen.orientation.removeEventListener("change",e.handleScreenOrientationChange)),e.handleHibernationState()}))}),{rootMargin:"0px"}),n=new IntersectionObserver((function(i,r){i.forEach((function(i){i.isIntersecting&&(e.visualizer.run(),e.hasReducedMotion&&e.visualizer.pause(),n.unobserve(e.element),t.observe(e.element))}))}),{rootMargin:"300px"});n.observe(this.element)}},{key:"getSoundMeta",value:function(){return this.buttons.map((function(e){var t=mb({},e.dataset);return"palettes"in t&&(t.palettes=JSON.parse(t.palettes)),t}))}},{key:"updateAudioButtonDisplay",value:function(e){this.audioButton.element.querySelectorAll("[data-decorator-index] [data-state]").forEach((function(t){t.dataset.state===e?t.classList.remove("decorator--hidden"):t.classList.add("decorator--hidden")}))}},{key:"updateMotionButtonDisplay",value:function(e){this.motionButton.element.querySelectorAll("[data-decorator-index] [data-state]").forEach((function(t){t.dataset.state===e?t.classList.remove("decorator--hidden"):t.classList.add("decorator--hidden")}))}},{key:"hasReducedMotion",get:function(){return document.documentElement.classList.contains("reduced-motion")}},{key:"stopOtherAudio",value:function(){if("unlocked"in window&&"audioplayers"in window.unlocked)for(var e in window.unlocked.audioplayers)window.unlocked.audioplayers[e].pause()}}]),e}();const xb={selector:gb,Source:bb};Ea.registerPlugin(Gt),Dl.use([Fl,kl]);var Sb=".js-carousels",Eb=".js-carousels__swiper",wb=".js-carousels__wrapper",Tb=".js-swiper-carousel-nav__counter__current",Mb=".js-swiper_nav--next",Ab=".js-swiper_nav--prev",Pb=function(){function e(t){wa(this,e),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.wrapper=this.element.querySelector(wb),this.swiper=this.element.querySelector(Eb),this.navNext=this.element.querySelector(Mb),this.navPrev=this.element.querySelector(Ab),this.counter=this.element.querySelector(Tb),this.slideshow=null,this.throttleResize=null,this.isStart=!0,this.isEnd=!1,this.style=this.element.classList.contains("js-carousels--horizontal")?"horizontal":"stacked",this.init()}return Ma(e,[{key:"init",value:function(){this.goToFirstBound=this.goToFirst.bind(this),this.goToLastBound=this.goToLast.bind(this),this.createCarousel()}},{key:"initStacked",value:function(){var e=this;this.carousel=new Dl(this.swiper,{virtualTranslate:!0,effect:"unlockedStacked",allowTouchMove:!1,slideToClickedSlide:!0,slidesPerView:"auto",a11y:{enabled:!0,firstSlideMessage:"You are on the first image",lastSlideMessage:"You are on the last image",nextSlideMessage:"Advance to next image",prevSlideMessage:"Go back to previous slide",slideLabelMessage:"Image {{index}} of {{slidesLength}}"},navigation:{nextEl:this.navNext,prevEl:this.navPrev},on:{init:this.setAriaHidden,slideChange:this.setAriaHidden}}),this.setRolloverEvents(!0,!1),this.carousel.on("slideChange",(function(t){e.setStackedOrder(t.activeIndex,t.slides)})),this.carousel.on("activeIndexChange",(function(t){e.setRolloverEvents(t.isBeginning,t.isEnd)}))}},{key:"setAriaHidden",value:function(e){e.slides.forEach((function(e){e.ariaHidden=!0})),e.slides[e.activeIndex].ariaHidden=!1}},{key:"initHorizontal",value:function(){var e=this.swiper.offsetWidth+(this.element.offsetWidth-this.swiper.offsetWidth)/2;this.swiper.scrollWidth>e?this.carousel=new Dl(this.swiper,{slidesPerView:1.25,centeredSlides:!1,spaceBetween:15,a11y:!0,mousewheel:{forceToAxis:!0,sensitivity:1},freeMode:{enabled:!0,sticky:!0,momentumBounce:!1},breakpoints:{768:{spaceBetween:32,slidesPerView:"auto"}},navigation:{nextEl:this.navNext,prevEl:this.navPrev}}):this.element.classList.add("carousels--no-swiper")}},{key:"createCarousel",value:function(){var e=this;"stacked"===this.style?this.initStacked():this.initHorizontal(),this.counter&&this.carousel.on("activeIndexChange",(function(t){e.counter.innerHTML=t.activeIndex+1}))}},{key:"setRolloverEvents",value:function(e,t){this.carousel.navigation.nextEl.removeEventListener("click",this.goToFirstBound),this.carousel.navigation.prevEl.removeEventListener("click",this.goToLastBound),t&&this.carousel.navigation.nextEl.addEventListener("click",this.goToFirstBound),e&&this.carousel.navigation.prevEl.addEventListener("click",this.goToLastBound)}},{key:"goToFirst",value:function(){this.carousel.slideTo(0)}},{key:"goToLast",value:function(){this.carousel.slideTo(this.carousel.slides.length-1)}},{key:"setStackedOrder",value:function(e,t){var n=t.length;t.forEach((function(t,i){t.dataset.swiperstackorder=(i+n-e)%n}))}}]),e}();const Cb={selector:Sb,Source:Pb};Ea.registerPlugin(Gt),Dl.use([Fl,kl]);var Ib=".js-carousels-v2",Lb=".js-carousels-v2__swiper",Db=".js-carousels-v2__wrapper",Rb=".js-swiper-carousel-nav__counter__current",kb=".js-swiper_nav--next",Ob=".js-swiper_nav--prev",Fb=function(){function e(t){wa(this,e),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.wrapper=this.element.querySelector(Db),this.swiper=this.element.querySelector(Lb),this.navNext=this.element.querySelector(kb),this.navPrev=this.element.querySelector(Ob),this.counter=this.element.querySelector(Rb),this.slideshow=null,this.throttleResize=null,this.isStart=!0,this.isEnd=!1,this.style=this.element.classList.contains("js-carousels-v2--horizontal")?"horizontal":"stacked",this.init()}return Ma(e,[{key:"init",value:function(){this.goToFirstBound=this.goToFirst.bind(this),this.goToLastBound=this.goToLast.bind(this),this.createCarousel()}},{key:"initStacked",value:function(){var e=this;this.carousel=new Dl(this.swiper,{virtualTranslate:!0,effect:"unlockedStacked",allowTouchMove:!1,slideToClickedSlide:!0,slidesPerView:"auto",a11y:{enabled:!0,firstSlideMessage:"You are on the first image",lastSlideMessage:"You are on the last image",nextSlideMessage:"Advance to next image",prevSlideMessage:"Go back to previous slide",slideLabelMessage:"Image {{index}} of {{slidesLength}}"},navigation:{nextEl:this.navNext,prevEl:this.navPrev},on:{init:this.setAriaHidden,slideChange:this.setAriaHidden}}),this.setRolloverEvents(!0,!1),this.carousel.on("slideChange",(function(t){e.setStackedOrder(t.activeIndex,t.slides)})),this.carousel.on("activeIndexChange",(function(t){e.setRolloverEvents(t.isBeginning,t.isEnd)}))}},{key:"setAriaHidden",value:function(e){e.slides.forEach((function(e){e.ariaHidden=!0})),e.slides[e.activeIndex].ariaHidden=!1}},{key:"initHorizontal",value:function(){var e=this.swiper.offsetWidth+(this.element.offsetWidth-this.swiper.offsetWidth)/2;this.swiper.scrollWidth>e?this.carousel=new Dl(this.swiper,{slidesPerView:1.25,centeredSlides:!1,spaceBetween:15,a11y:!0,mousewheel:{forceToAxis:!0,sensitivity:1},freeMode:{enabled:!0,sticky:!0,momentumBounce:!1},breakpoints:{768:{spaceBetween:32,slidesPerView:"auto"}},navigation:{nextEl:this.navNext,prevEl:this.navPrev}}):this.element.classList.add("carousels-v2--no-swiper")}},{key:"createCarousel",value:function(){var e=this;"stacked"===this.style?this.initStacked():this.initHorizontal(),this.counter&&this.carousel.on("activeIndexChange",(function(t){e.counter.innerHTML=t.activeIndex+1}))}},{key:"setRolloverEvents",value:function(e,t){this.carousel.navigation.nextEl.removeEventListener("click",this.goToFirstBound),this.carousel.navigation.prevEl.removeEventListener("click",this.goToLastBound),t&&this.carousel.navigation.nextEl.addEventListener("click",this.goToFirstBound),e&&this.carousel.navigation.prevEl.addEventListener("click",this.goToLastBound)}},{key:"goToFirst",value:function(){this.carousel.slideTo(0)}},{key:"goToLast",value:function(){this.carousel.slideTo(this.carousel.slides.length-1)}},{key:"setStackedOrder",value:function(e,t){var n=t.length;t.forEach((function(t,i){t.dataset.swiperstackorder=(i+n-e)%n}))}}]),e}();const Nb={selector:Ib,Source:Fb};var Bb=".js-feature-scroll",zb=".js-feature-scroll-media",Ub=function(){function e(t){wa(this,e),this.element=t,this.mediaWrapper=this.element.querySelector(zb),this.media=this.mediaWrapper.querySelector("img, video, iframe"),this.caption=this.mediaWrapper.querySelector(".media-caption"),this.emitter=Ca.UTILS.EMITTER,this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.media&&(this.isMediaLoaded()?this.setHeightVar():this.setOnLoad()),this.emitter.on(Ca.EVENTS.RESIZE,(function(){return e.setHeightVar()}))}},{key:"setHeightVar",value:function(){var e=this.mediaWrapper.offsetHeight,t=0;if(this.caption){var n=getComputedStyle(this.caption);t+=this.caption.offsetHeight,t+=parseInt(n.marginTop)||0,this.element.style.setProperty("--caption-height","".concat(t,"px"))}this.element.style.setProperty("--media-height","".concat(e+t,"px"))}},{key:"isMediaLoaded",value:function(){return"VIDEO"===this.media.nodeName?this.media.readyState>=1:"IMG"===this.media.nodeName?this.media.complete:"IFRAME"===this.media.nodeName}},{key:"setOnLoad",value:function(){var e=this;"VIDEO"===this.media.nodeName?this.media.addEventListener("loadeddata",(function(){e.media.readyState>=1&&e.setHeightVar()})):"IMG"===this.media.nodeName&&this.media.addEventListener("load",(function(){e.setHeightVar()}))}}]),e}();const Vb={selector:Bb,Source:Ub};Dl.use([kl,Rl,Nl]);var Hb=".js-featured-story-list",Gb=".js-featured-story-list__swiper",jb=".js-swiper_nav--next",Wb=".js-swiper_nav--prev",qb=function(){function e(t){wa(this,e),this.element=t,this.swiper=this.element.querySelector(Gb),this.navNext=this.element.querySelector(jb),this.navPrev=this.element.querySelector(Wb),this.slideshow=null,this.init()}return Ma(e,[{key:"init",value:function(){this.createCarousel()}},{key:"createCarousel",value:function(){this.slideshow=new Dl(this.swiper,{slidesPerView:1.125,centeredSlides:!1,slidesOffsetAfter:30,spaceBetween:15,a11y:!1,mousewheel:{forceToAxis:!0,sensitivity:1},freeMode:{enabled:!0,sticky:!0,momentumBounce:!1},breakpoints:{768:{spaceBetween:24,slidesPerView:"auto"}},navigation:{nextEl:this.navNext,prevEl:this.navPrev}})}}]),e}();const Xb={selector:Hb,Source:qb};var Yb=".js-full-width-feature",$b=".js-full-width-feature-wrapper",Kb=".js-full-width-feature-header",Zb=".js-full-width-feature-excerpt",Qb=function(){function e(t){wa(this,e),this.element=t,this.contentWrapper=this.element.querySelector($b),this.contentHeader=this.element.querySelector(Kb),this.contentExcerpt=this.element.querySelector(Zb),this.emitter=Ca.UTILS.EMITTER,this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.setHeightVar(),this.emitter.on(Ca.EVENTS.RESIZE,(function(){return e.setHeightVar()}))}},{key:"setHeightVar",value:function(){var e=this.getWrapperPadding(),t=this.elemHeight(this.contentHeader),n=this.elemHeight(this.contentExcerpt);this.element.style.setProperty("--feature-header-height","".concat(t+e,"px")),this.element.style.setProperty("--feature-excerpt-height","".concat(n+e,"px")),this.element.style.setProperty("--feature-content-height","".concat(t+n+e,"px"))}},{key:"getWrapperPadding",value:function(){if(!this.contentWrapper)return 0;var e=getComputedStyle(this.contentWrapper);return(parseInt(e.paddingTop)||0)+(parseInt(e.paddingTop)||0)}},{key:"elemHeight",value:function(e){var t=getComputedStyle(e),n=parseFloat(t.marginTop)+parseFloat(t.marginBottom);return e.offsetHeight+n}}]),e}();const Jb={selector:Yb,Source:Qb};const ex={selector:".js-lookbook-section-header",Source:function(){function e(t){wa(this,e),this.element=t,this.init()}return Ma(e,[{key:"init",value:function(){this.registerObserver()}},{key:"registerObserver",value:function(){var e=this;this.observer=new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting&&(t.target.classList.remove("lookbook-section-header--hidden"),t.target.classList.add("lookbook-section-header__motion"),e.observer.unobserve(e.element))}))}),{rootMargin:"0px 0px -50%",threshold:0}),this.observer.observe(this.element)}}]),e}()};function tx(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return nx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nx(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function nx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ix=function(){function e(t,n){wa(this,e),this.element=t,this.isEditor=n,this.pageTheme="default",this.sections=this.element.querySelectorAll(".js-theme"),this.currentY=this.getScroll(),this.onFirstScroll=this._onFirstScroll.bind(this),this.init()}return Ma(e,[{key:"init",value:function(){this.observer=this.registerObserver(),this.setSections(),this.setTheme(this.getFirstElement()),this.setACFListeners(),this.isEditor&&this.listenForBlockRemoval(),this.element.addEventListener("scroll",this.onFirstScroll)}},{key:"registerObserver",value:function(){var e={root:this.isEditor?this.element:null,rootMargin:"0px 0px -50%",threshold:0};return new IntersectionObserver(this.sectionInView.bind(this),e)}},{key:"listenForBlockRemoval",value:function(){var e=this,t=document.querySelector(".block-editor-block-list__layout");new MutationObserver((function(t,n){var i,r=tx(t);try{for(r.s();!(i=r.n()).done;){var s=i.value;"childList"===s.type&&s.removedNodes.length>0&&s.removedNodes[0].dataset.type&&"acf/theme"===s.removedNodes[0].dataset.type&&e.setSections()}}catch(e){r.e(e)}finally{r.f()}})).observe(t,{childList:!0})}},{key:"sectionInView",value:function(e){var t=this;e.forEach((function(e){var n=t.getScroll()>=t.currentY?"down":"up";if(t.currentY=t.getScroll(),t.currentY<=0)t.setTheme(t.getFirstElement());else if("down"===n&&e.isIntersecting)t.setTheme(e.target);else if("up"===n&&!e.isIntersecting){var i=Math.max(parseInt(e.target.dataset.themeIndex)-1,0);0===i?t.setTheme(t.getFirstElement()):t.setTheme(t.sections[i-(t.isEditor?1:0)])}}))}},{key:"setTheme",value:function(e){var t=e.dataset.theme;this.element.dataset.theme=t}},{key:"setSections",value:function(){var e=this;this.sections=Array.from(this.element.querySelectorAll(".js-theme")),this.sections.forEach((function(t,n){t.dataset.themeIndex=n+(e.isEditor?1:0),e.observer.observe(t)}))}},{key:"_onFirstScroll",value:function(){var e=this.getFirstElement();this.sections.forEach((function(t,n){t.getBoundingClientRect().top<=window.innerHeight/2&&(e=t)})),this.setTheme(e),this.element.removeEventListener("scroll",this.onFirstScroll)}},{key:"getScroll",value:function(){return this.element.scrollTop||window.scrollY}},{key:"getPageTheme",value:function(){if("acf"in window&&acf.getFields({name:"theme",is:":visible"}).length>0){var e=acf.getFields({name:"theme",is:":visible"})[0].val();if("default"===e)return"default";if("black"===e)return"black";var t=acf.getFields({name:"theme_mode",is:":visible"})[0].val(),n=acf.getFields({name:"theme_color",is:":visible"})[0].val();return this.pageTheme="".concat(e,"-").concat(t,"-").concat(n),this.pageTheme}return this.pageTheme}},{key:"setACFListeners",value:function(){var e=this;"acf"in window&&(acf.addAction("render_block_preview/type=theme",(function(){e.setSections()})),acf.getFields({name:"theme"})[0].on("change",(function(){e.sectionInView(e.sections)})),acf.getFields({name:"theme_mode"}).forEach((function(t){t.on("change",(function(){e.sectionInView(e.sections)}))})),acf.getFields({name:"theme_color"}).forEach((function(t){t.on("change",(function(){e.sectionInView(e.sections)}))})))}},{key:"getFirstElement",value:function(){return this.isEditor?{dataset:{theme:this.getPageTheme(),themeIndex:0}}:this.sections[0]}}]),e}();const rx={selector:"body",Source:ix};Ea.registerPlugin(Gt),Dl.use([Fl,kl]);var sx={gallery:".js-gallery",swiper:".js-gallery__swiper",navNext:".js-gallery__swiper_nav--next",navPrev:".js-gallery__swiper_nav--prev"};const ax={selector:sx.gallery,Source:function(){function e(t){wa(this,e),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.wrapper=this.element.querySelector(sx.wrapper),this.galleryType=this.element.dataset.type,this.swiper=this.element.querySelector(sx.swiper)?"#".concat(this.element.querySelector(sx.swiper).id):null,this.navNext=this.element.querySelector(sx.navNext)?"#".concat(this.element.querySelector(sx.navNext).id):null,this.navPrev=this.element.querySelector(sx.navPrev)?"#".concat(this.element.querySelector(sx.navPrev).id):null,this.slideshow=null,this.throttleResize=null,this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.emitter.on(Ca.EVENTS.IS_MOBILE,(function(t){t.isMobile?e.createCarousel():null!==e.slideshow&&"destroy"in e.slideshow&&e.slideshow.destroy(!0,!0)}))}},{key:"createCarousel",value:function(){this.galleryType.includes("dynamic")||!this.swiper.length||!this.element.classList.contains("js-gallery")||this.slideshow&&this.slideshow.initialized||(this.slideshow=new Dl(this.swiper,{slidesPerView:1.25,centeredSlides:!1,spaceBetween:15,a11y:!0,mousewheel:{forceToAxis:!0,sensitivity:1},freeMode:{enabled:!0,sticky:!0,momentumBounce:!1},breakpoints:{768:{spaceBetween:32,slidesPerView:"auto"}},navigation:{nextEl:this.navNext,prevEl:this.navPrev}}))}}]),e}()};function ox(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return lx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lx(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function lx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Dl.use([kl]);var cx=".js-minecraft-carousel",hx=".js-carousels__swiper",ux=".js-minecraft-carousel__wrapper",dx=".js-swiper-wrapper",px=".js-swiper-slide",fx=".js-close-modal",mx=".js-swiper_nav--next",gx=".js-swiper_nav--prev",vx=".js-minecraft-carousel__hotspot",yx=".js-minecraft-carousel__hotspot__label--wrapper",_x=".js-hotspot-button",bx=".js-hotspot-content",xx=".js-modal",Sx=".js-minecraft-carousel__hotspot__button--close",Ex=".js-minecraft-carousel__scrim",wx=[".minecraft-carousel__modal__button--close",".minecraft-carousel__modal__header",".minecraft-carousel__modal__eyebrow",".minecraft-carousel__modal__body"].join(","),Tx=function(){function e(t){var n=this;wa(this,e),so(this,"removeFocusableModalElements",(function(){var e,t=ox(n.focusableModalElements);try{for(t.s();!(e=t.n()).done;){e.value.setAttribute("tabindex","-1")}}catch(e){t.e(e)}finally{t.f()}var i,r=ox(n.modalsArr);try{for(r.s();!(i=r.n()).done;){i.value.removeAttribute("tabindex")}}catch(e){r.e(e)}finally{r.f()}var s,a=ox(n.tabCloseModalArr);try{for(a.s();!(s=a.n()).done;){s.value.removeAttribute("tabindex")}}catch(e){a.e(e)}finally{a.f()}})),this.element=t,this.swiper=this.element.querySelector(hx),this.wrapper=this.element.querySelector(ux),this.scrimWrapper=this.element.querySelector(dx),this.slide=this.element.querySelector(px),this.tabCloseModalArr=this.element.querySelectorAll(fx),this.navNext=this.element.querySelector(mx),this.navPrev=this.element.querySelector(gx),this.hotspots=this.element.querySelectorAll(vx),this.hotspotLabelsArr=this.element.querySelectorAll(yx),this.hotspotButtons=this.element.querySelectorAll(_x),this.modalsArr=this.element.querySelectorAll(bx),this.toggleModalsArr=this.element.querySelectorAll(xx),this.closeHotspotButtonsArr=this.element.querySelectorAll(Sx),this.scrim=this.element.querySelector(Ex),this.desktopQuery=window.matchMedia("(min-width: 768px)"),this.isModalOpen=!1,this.focusableModalElements=[],this.init()}return Ma(e,[{key:"init",value:function(){this.registerEvents()}},{key:"registerEvents",value:function(){this.createCarousel(),this.getCoords(),this.setupModalEvents(),this.getFocusableSelectors(),this.removeFocusableModalElements()}},{key:"createCarousel",value:function(){this.minecraftCarousel=new Dl(this.swiper,{direction:"horizontal",slidesPerView:1.05,centeredSlides:!1,spaceBetween:15,mousewheel:{forceToAxis:!0,sensitivity:1},freeMode:{enabled:!0,sticky:!0,momentumBounce:!1},breakpoints:{768:{slidesPerView:1.05,spaceBetween:32}},a11y:!1,navigation:{nextEl:this.navNext,prevEl:this.navPrev}})}},{key:"getFocusableSelectors",value:function(){this.focusableModalElements=Array.from(this.wrapper.querySelectorAll(wx))}},{key:"addFocusableModalElements",value:function(){var e,t=ox(this.focusableModalElements);try{for(t.s();!(e=t.n()).done;){e.value.removeAttribute("tabindex")}}catch(e){t.e(e)}finally{t.f()}var n,i=ox(this.modalsArr);try{for(i.s();!(n=i.n()).done;){n.value.setAttribute("tabindex","0")}}catch(e){i.e(e)}finally{i.f()}var r,s=ox(this.tabCloseModalArr);try{for(s.s();!(r=s.n()).done;){r.value.setAttribute("tabindex","0")}}catch(e){s.e(e)}finally{s.f()}}},{key:"setupModalEvents",value:function(){var e=this;this.hotspotButtons.forEach((function(t,n){var i=function(){if(e.toggleModalsArr[n].classList.toggle("-togglemodal"),e.modalsArr[n].classList.toggle(Ca.CLASSES.HIDE),e.hotspotLabelsArr[n].classList.toggle(Ca.CLASSES.HIDE),e.scrim.classList.toggle(Ca.CLASSES.HIDE),e.scrimWrapper.classList.toggle(Ca.CLASSES.OPEN),e.slide.classList.toggle(Ca.CLASSES.OPEN),e.isModalOpen)e.removeFocusableModalElements(),t.focus(),window.onscroll=function(){};else if(e.addFocusableModalElements(),e.closeHotspotButtonsArr[n].focus(),!e.desktopQuery.matches){var i=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;window.onscroll=function(){window.scrollTo(i,r)}}e.isModalOpen=!e.isModalOpen};t.addEventListener("click",i),e.closeHotspotButtonsArr[n].addEventListener("click",i),e.element.addEventListener("keydown",(function(t){"Escape"===t.key&&e.isModalOpen&&i()}),!0),e.modalsArr[n].addEventListener("focus",i),e.tabCloseModalArr[n].addEventListener("focus",i)}))}},{key:"getCoords",value:function(){this.hotspots.forEach((function(e){var t=e.dataset.x,n=e.dataset.y;e.style.left=t+"%",e.style.bottom=n+"%"}))}}]),e}();const Mx={selector:cx,Source:Tx};var Ax=".js-xray__video-video";const Px={selector:".js-minecraft-feature",Source:function(){function e(t){wa(this,e),this.element=t,this.video=this.element.querySelector(Ax),this.init()}return Ma(e,[{key:"init",value:function(){var e=this;Ea.timeline({scrollTrigger:{trigger:this.element,start:"top center",once:!0,onEnter:function(){e.video.readyState>=2?(e.video.play(),e.element.classList.remove("-preload")):e.video.addEventListener("canplay",(function(){e.video.play(),e.element.classList.remove("-preload")}))}}}),Gt.refresh()}}]),e}()};var Cx=".js-xray__video-video";const Ix={selector:".js-minecraft-header",Source:function(){function e(t){wa(this,e),this.element=t,this.video=this.element.querySelector(Cx),this.init()}return Ma(e,[{key:"init",value:function(){var e=this;Ea.timeline({scrollTrigger:{trigger:this.element,start:"top center",once:!0,onEnter:function(){e.video.readyState>=2?(e.video.play(),e.element.classList.remove("-preload")):e.video.addEventListener("canplay",(function(){e.video.play(),e.element.classList.remove("-preload")}))}}}),Gt.refresh()}}]),e}()};var Lx=".js-minecraft-hotspots__intro",Dx=".js-card-video, .js-xray__video-video",Rx=".js-xray__video-video",kx=".js-minecraft-hotspots__dots",Ox=".js-hotspot-button",Fx=".js-minecraft-hotspots__block",Nx=".js-back-button",Bx=".js-minecraft-hotspots__block__zoom-out",zx=".js-xray__video",Ux=".js-xray-skip-intro",Vx=".js-marquee";const Hx={selector:".js-minecraft-hotspots",Source:function(){function e(t){wa(this,e),this.element=t,this.backButton=this.element.querySelector(Nx),this.introVideoContainer=this.element.querySelector(Lx),this.introVideo=this.introVideoContainer.querySelector(Rx),this.skipButton=this.element.querySelector(Ux),this.marquee=this.element.querySelector(Vx),this.dotsContainer=this.element.querySelector(kx),this.hotspots=this.dotsContainer.querySelectorAll(Ox),this.emitter=Ca.UTILS.EMITTER,this.blocks=this.element.querySelectorAll(Fx),this.blocksOut=this.element.querySelectorAll(Bx),this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.registerEvents(),this.blocks.forEach((function(t){var n=t.querySelector(Dx);n.classList.remove("js-play-in-view"),n.pause(),n.currentTime=0,n.addEventListener("ended",(function(){return e.backButton.classList.remove(Ca.CLASSES.HIDE)}))})),this.blocksOut.forEach((function(e){var t=e.querySelector(Dx);t.classList.remove("js-play-in-view"),t.pause(),t.currentTime=0})),Ea.timeline({scrollTrigger:{trigger:this.element,start:"-25% top",end:"bottom",scrub:1,once:!0,onEnter:function(){return e.introVideo.play()}}}),Gt.refresh(),document.documentElement.classList.contains("reduced-motion")&&(this.introVideo.onplay(),this.introVideo.onended())}},{key:"registerEvents",value:function(){var e=this;this.skipButton.addEventListener("click",(function(){e.introVideo.currentTime=e.introVideo.duration})),this.introVideo.readyState>=2?this.element.classList.remove("-preload"):this.introVideo.addEventListener("canplay",(function(){e.element.classList.remove("-preload")})),this.introVideo.onplay=function(){e.skipButton.classList.remove(Ca.CLASSES.HIDE),e.introVideoStarted()},this.introVideo.onended=function(){e.hideIntroVideo()},this.hotspots.forEach((function(t){t.addEventListener(Ca.EVENTS.CLICK,e.handleHotspotClick.bind(e))})),this.backButton.addEventListener(Ca.EVENTS.CLICK,this.handleBackButtonClick.bind(this)),this.emitter.on(Ca.EVENTS.XRAY_IS_ACTIVE,(function(t){var n=t.element,i=t.isActive;e.element.contains(n)&&(i?e.backButton.classList.add(Ca.CLASSES.HIDE):e.backButton.classList.remove(Ca.CLASSES.HIDE))}))}},{key:"introVideoStarted",value:function(){this.element.classList.add("-intro")}},{key:"hideIntroVideo",value:function(){this.introVideoContainer.classList.add(Ca.CLASSES.HIDE),this.dotsContainer.classList.remove(Ca.CLASSES.HIDE),this.marquee.classList.remove("-animate")}},{key:"handleHotspotClick",value:function(e){var t=e.target.dataset.block,n=this.element.querySelector("".concat(Fx,'[data-block="').concat(t,'"]')),i=n.querySelector(Dx);this.dotsContainer.classList.add(Ca.CLASSES.HIDE),n.classList.remove(Ca.CLASSES.HIDE),n.querySelector(zx).classList.remove(Ca.CLASSES.HIDE),this.backButton.dataset.block=t,document.documentElement.classList.contains("reduced-motion")?i.onended():i.play()}},{key:"handleBackButtonClick",value:function(){var e=this,t=this.backButton.dataset.block;this.backButton.classList.add(Ca.CLASSES.HIDE),this.blocks.forEach((function(e){var t=e.querySelector(Dx);e.classList.add(Ca.CLASSES.HIDE),t.pause(),t.currentTime=0})),this.blocksOut.forEach((function(n){if(n.dataset.block===t){var i=n.querySelector(Dx);i.onended=function(){n.classList.add(Ca.CLASSES.HIDE),e.dotsContainer.classList.remove(Ca.CLASSES.HIDE)},n.classList.remove(Ca.CLASSES.HIDE),document.documentElement.classList.contains("reduced-motion")?i.onended():i.play()}}))}}]),e}()};var Gx=".js-xray__video-video",jx=".js-xray__foreground",Wx=".js-marquee";const qx={selector:".js-minecraft-kosovo",Source:function(){function e(t){wa(this,e),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.video=this.element.querySelector(Gx),this.foreground=this.element.querySelector(jx),this.marquee=this.element.querySelector(Wx),this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.foreground.classList.add("-hide"),this.registerEvents(),document.documentElement.classList.contains("reduced-motion")&&this.videoStarted(),Ea.timeline({scrollTrigger:{trigger:this.element,start:"-25% top",end:"bottom",scrub:1,once:!0,onEnter:function(){return e.video.play()}}}),Gt.refresh()}},{key:"registerEvents",value:function(){var e=this;this.video.addEventListener("play",(function(){return e.videoStarted()})),this.video.addEventListener("ended",(function(){return e.videoEnded()})),this.video.readyState>=2?this.element.classList.remove("-preload"):this.video.addEventListener("canplay",(function(){e.element.classList.remove("-preload")}))}},{key:"videoStarted",value:function(){this.element.classList.add("-intro")}},{key:"videoEnded",value:function(){this.foreground.classList.remove("-hide"),this.marquee.classList.remove("-animate")}}]),e}()};var Xx=".js-split-feature-content";const Yx={selector:".js-split-feature",Source:function(){function e(t){wa(this,e),this.element=t,this.content=this.element.querySelector(Xx),this.firstMedia=this.element.querySelector(".unlocked-media"),this.caption=this.firstMedia&&this.firstMedia.querySelector(".media-caption"),this.emitter=Ca.UTILS.EMITTER,this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.setHeightVar(),this.emitter.on(Ca.EVENTS.RESIZE,(function(){return e.setHeightVar()}))}},{key:"setHeightVar",value:function(){var e=0;if(this.caption){var t=getComputedStyle(this.caption);e+=this.caption.offsetHeight,e+=parseInt(t.marginTop)||0}this.element.style.setProperty("--caption-height","".concat(e,"px")),this.element.style.setProperty("--feature-content-height","".concat(this.content.offsetHeight,"px"))}}]),e}()};var $x=".js-feelings-monster-quiz__quiz-item-group",Kx=".js-feelings-monster-quiz__quiz-item",Zx=".js-feelings-monster-quiz__quiz-item-button",Qx=".js-feelings-monster-quiz__quiz-item-image",Jx=".js-feelings-monster-quiz__quiz-item-modal",eS=".js-feelings-monster-quiz__quiz-item-close-button",tS=".js-feelings-monster-quiz__pagination__prev",nS=".js-feelings-monster-quiz__pagination__next",iS=".js-feelings-monster-quiz__modal-overlay",rS=".js-feelings-monster-quiz-pagination-counter",sS="-selected",aS="-visually-hidden",oS={red:{light:"tetradic-ultralight-red-orange",dark:"tetradic-ultradark-red"},orange:{light:"tetradic-light-orange",dark:"tetradic-ultradark-orange"},yellow:{light:"tetradic-ultralight-yellow-green",dark:"tetradic-ultradark-red-orange"},green_yellow:{light:"tetradic-ultralight-green-yellow",dark:"tetradic-ultradark-green-yellow"},green:{light:"tetradic-ultralight-green",dark:"tetradic-ultradark-green-yellow"}},lS=document.querySelectorAll("[data-theme*=light],[data-theme*=core],[data-theme=default]:not(.related-stories):not(.exclude-from-feelings-monster-theme-updates)"),cS=document.querySelectorAll("[data-theme*=dark]"),hS=Ra(lS).map((function(e){return e.dataset.theme})),uS=Ra(cS).map((function(e){return e.dataset.theme})),dS=function(){function e(t){var n,i,r=this;(wa(this,e),so(this,"showNextGroup",(function(){r.quizItemGroupIndex=(r.quizItemGroupIndex+1)%r.quizItemGroups.length,r.showGroupByIndex(r.quizItemGroupIndex)})),so(this,"showPrevGroup",(function(){r.quizItemGroupIndex=(r.quizItemGroupIndex||r.quizItemGroups.length)-1,r.showGroupByIndex(r.quizItemGroupIndex)})),so(this,"showGroupByIndex",(function(e){r.quizItemGroups.forEach(r.hide);var t=r.quizItemGroups[e];r.show(t),t.querySelectorAll(Kx)[0].querySelector(Zx).focus(),r.quizPaginationCounter.textContent=e+1})),so(this,"selectItem",(function(e){var t=e.dataset,n=t.downloadUrl,i=t.downloadText,s=e.dataset.themeColor;r.setThemes(s),r.quizModalOverlay.classList.add(Ca.CLASSES.ACTIVE),e.classList.add(sS);var a=e.nextElementSibling;a.classList.remove(Ca.CLASSES.HIDE),setTimeout((function(){a.classList.remove(aS),a.classList.add(Ca.CLASSES.OPEN)}),20),r.isModalOpen=!0,a.querySelector(eS).focus(),r.setExternalCtaHrefsAndAriaLabels(n,i)})),so(this,"deselectItem",(function(e){e.querySelector(Zx).focus(),e.classList.remove(sS),r.resetThemes()})),so(this,"closeModal",(function(){var e;r.isModalOpen=!1,r.quizModalOverlay.classList.remove(Ca.CLASSES.ACTIVE),r.quizItemModals.forEach((function(e){e.classList.remove(Ca.CLASSES.OPEN),e.classList.add(Ca.CLASSES.HIDE,aS)})),null===(e=r.element.querySelector(".".concat(sS," ").concat(Zx)))||void 0===e||e.focus()})),so(this,"setExternalCtaHrefsAndAriaLabels",(function(e,t){var n;null===(n=r.externalCtas)||void 0===n||n.forEach((function(n){n.setAttribute("href",e),n.setAttribute("aria-label",t)}))})),so(this,"resetExternalCtaHrefsAndAriaLabels",(function(){var e;null===(e=r.externalCtas)||void 0===e||e.forEach((function(e,t){e.setAttribute("href",r.initialValuesOfExternalCtaHrefs[t]),e.setAttribute("aria-label",r.initialValuesOfExternalCtaAriaLabels[t])}))})),so(this,"toggleSelected",(function(e){e.target.closest(Kx).classList.contains(sS)?r.handleDeselectClick(e):r.handleSelectClick(e)})),so(this,"handleSelectClick",(function(e){var t=e.target.closest(Kx);r.quizItems.forEach(r.deselectItem),t&&r.selectItem(t)})),so(this,"handleDeselectClick",(function(e){var t=e.target.closest(Kx);t&&r.deselectItem(t)})),so(this,"escKeyHandler",(function(e){"Escape"===e.key&&r.isModalOpen&&(e.preventDefault(),r.closeModal())})),so(this,"handleTabInModal",(function(e){var t=e.target,n=e.key,i=e.shiftKey,s=t.closest(Jx);if(!!s&&"Tab"===n&&r.isModalOpen){var a=s.querySelectorAll('a:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex^="-"])'),o=a[a.length-1];t===o?(e.preventDefault(),a[0].focus()):i&&t===a[0]&&(e.preventDefault(),o.focus())}})),this.element=t,this.quizItemGroupIndex=0,this.isModalOpen=!1,this.quizItemGroups=this.element.querySelectorAll($x),this.quizItems=this.element.querySelectorAll(Kx),this.quizItemButtons=this.element.querySelectorAll(Zx),this.quizItemModals=this.element.querySelectorAll(Jx),this.quizItemCloseButtons=this.element.querySelectorAll(eS),this.quizPrevBtn=this.element.querySelector(tS),this.quizNextBtn=this.element.querySelector(nS),this.quizPaginationCounter=this.element.querySelector(rS),this.externalDownloadCtaClass=this.element.dataset.externalDownloadCtaClass,this.externalDownloadCtaClass)&&(this.externalCtas=Ra(document.querySelectorAll("."+this.externalDownloadCtaClass)).map((function(e){return e.querySelector("a")||e})),this.initialValuesOfExternalCtaHrefs=null===(n=this.externalCtas)||void 0===n?void 0:n.map((function(e){return e.href})),this.initialValuesOfExternalCtaAriaLabels=null===(i=this.externalCtas)||void 0===i?void 0:i.map((function(e){return e.ariaLabel})));this.quizModalOverlay=this.element.querySelector(iS),this.observer=this.registerObserver(),this.observer.observe(this.element),this.init()}return Ma(e,[{key:"init",value:function(){this.registerEventListeners(),this.getSkipLink()}},{key:"getSkipLink",value:function(){this.skipLink=document.querySelector(".feelings-monster-quiz__skip-link"),this.element.nextElementSibling?this.skipLink.href="#".concat(this.element.nextElementSibling.id):this.skipLink.remove()}},{key:"registerEventListeners",value:function(){var e,t,n=this;this.quizItemButtons.forEach((function(e){e.addEventListener(Ca.EVENTS.CLICK,n.toggleSelected),e.addEventListener(Ca.EVENTS.MOUSEENTER,n.setImageAriaHidden(!1)),e.addEventListener(Ca.EVENTS.MOUSELEAVE,n.setImageAriaHidden(!0))})),this.quizItemCloseButtons.forEach((function(e){e.addEventListener(Ca.EVENTS.CLICK,n.closeModal)})),this.quizModalOverlay.addEventListener(Ca.EVENTS.CLICK,this.closeModal),null===(e=this.quizNextBtn)||void 0===e||e.addEventListener(Ca.EVENTS.CLICK,this.showNextGroup),null===(t=this.quizPrevBtn)||void 0===t||t.addEventListener(Ca.EVENTS.CLICK,this.showPrevGroup),document.addEventListener(Ca.EVENTS.KEYDOWN,this.escKeyHandler),document.addEventListener(Ca.EVENTS.KEYDOWN,this.handleTabInModal)}},{key:"registerObserver",value:function(){return new IntersectionObserver(this.elementInView.bind(this),{root:null,rootMargin:"0%",threshold:.5})}},{key:"elementInView",value:function(e){var t=this;e.forEach((function(e){e.isIntersecting&&(t.quizItemGroups[t.quizItemGroupIndex].classList.remove(Ca.CLASSES.HIDE),setTimeout((function(){t.quizItemGroups[t.quizItemGroupIndex].classList.remove(aS)}),20))}))}},{key:"setThemes",value:function(e){var t=oS[e].light,n=oS[e].dark;lS.forEach((function(e){return e.setAttribute("data-theme",t)})),cS.forEach((function(e){return e.setAttribute("data-theme",n)}))}},{key:"resetThemes",value:function(){lS.forEach((function(e,t){e.setAttribute("data-theme",hS[t])})),cS.forEach((function(e,t){e.setAttribute("data-theme",uS[t])}))}},{key:"hide",value:function(e){e.classList.add(Ca.CLASSES.HIDE,aS),e.setAttribute("aria-hidden",!0)}},{key:"show",value:function(e){var t=this;e.classList.remove(Ca.CLASSES.HIDE),setTimeout((function(){t.quizItemGroups[t.quizItemGroupIndex].classList.remove(aS)}),20),e.setAttribute("aria-hidden",!1)}},{key:"setTabIndex",value:function(e){return function(t){return t.setAttribute("tabindex",e)}}},{key:"setImageAriaHidden",value:function(e){return function(t){t.target.closest(Kx).querySelector(Qx).setAttribute("aria-hidden",e)}}}]),e}();const pS={selector:".js-feelings-monster-quiz",Source:dS};var fS=".js-hover-gallery",mS=".js-hover-gallery-live",gS=".js-hover-gallery-button",vS=".js-hover-gallery-front",yS=".js-hover-gallery-back";const _S={selector:".js-hover-gallery-item",Source:function(){function e(t){var n=this;wa(this,e),so(this,"registerEventListeners",(function(){n.element.addEventListener(Ca.EVENTS.MOUSEENTER,(function(){n.showBack(!0)})),n.element.addEventListener(Ca.EVENTS.MOUSELEAVE,(function(){n.showFront(!0)})),n.element.addEventListener(Ca.EVENTS.FOCUSIN,(function(){n.announceCardState()})),n.element.addEventListener(Ca.EVENTS.CLICK,n.flipCard,!0),n.element.addEventListener(Ca.EVENTS.KEYDOWN,n.flipCard,!0),n.emitter.on(Ca.EVENTS.IS_MOBILE,(function(e){var t=e.isMobile;n.isMobile=t,n.element.role=n.isMobile?"none":"button",n.element.tabIndex=n.isMobile?"-1":"0",n.element.ariaPressed="false",n.element.ariaLabel=n.isMobile?"":n.element.dataLabel,n.live.ariaLive=n.isMobile?"off":"polite",n.front.ariaHidden=!n.isMobile,n.back.ariaHidden=!n.isMobile}))})),so(this,"showFront",(function(){n.isMobile||(n.element.ariaPressed="false",n.announceCardState())})),so(this,"showBack",(function(){n.isMobile||(n.element.ariaPressed="true",n.announceCardState())})),so(this,"announceCardState",(function(){n.isMobile||("false"===n.element.ariaPressed?n.live.innerHTML=n.element.dataset.labelFront:n.live.innerHTML=n.element.dataset.labelBack)})),so(this,"flipCard",(function(e){if(!n.isMobile){var t=e.type===Ca.EVENTS.KEYDOWN&&("Enter"===e.key||" "===e.key),i=e.type===Ca.EVENTS.CLICK;(t||i)&&(e.preventDefault(),"false"===n.element.ariaPressed?n.showBack():n.showFront())}})),this.element=t,this.button=this.element.querySelector(gS),this.front=this.element.querySelector(vS),this.back=this.element.querySelector(yS),this.parent=this.element.closest(fS),this.live=this.parent.querySelector(mS),this.emitter=Ca.UTILS.EMITTER,this.isMobile=null,this.init()}return Ma(e,[{key:"init",value:function(){this.button.ariaHidden="true",this.button.tabIndex="-1",this.button.disabled="true",this.registerEventListeners()}}]),e}()};function bS(e,t,n,i,r,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function xS(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var s=e.apply(t,n);function a(e){bS(s,i,r,a,o,"next",e)}function o(e){bS(s,i,r,a,o,"throw",e)}a(void 0)}))}}var SS=__webpack_require__(757),ES=__webpack_require__.n(SS),wS={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},TS={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},MS=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],AS={CSS:{},springs:{}};function PS(e,t,n){return Math.min(Math.max(e,t),n)}function CS(e,t){return e.indexOf(t)>-1}function IS(e,t){return e.apply(null,t)}var LS={arr:function(e){return Array.isArray(e)},obj:function(e){return CS(Object.prototype.toString.call(e),"Object")},pth:function(e){return LS.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||LS.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},nil:function(e){return LS.und(e)||null===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return LS.hex(e)||LS.rgb(e)||LS.hsl(e)},key:function(e){return!wS.hasOwnProperty(e)&&!TS.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function DS(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function RS(e,t){var n=DS(e),i=PS(LS.und(n[0])?1:n[0],.1,100),r=PS(LS.und(n[1])?100:n[1],.1,100),s=PS(LS.und(n[2])?10:n[2],.1,100),a=PS(LS.und(n[3])?0:n[3],.1,100),o=Math.sqrt(r/i),l=s/(2*Math.sqrt(r*i)),c=l<1?o*Math.sqrt(1-l*l):0,h=l<1?(l*o-a)/c:-a+o;function u(e){var n=t?t*e/1e3:e;return n=l<1?Math.exp(-n*l*o)*(1*Math.cos(c*n)+h*Math.sin(c*n)):(1+h*n)*Math.exp(-n*o),0===e||1===e?e:1-n}return t?u:function(){var t=AS.springs[e];if(t)return t;for(var n=1/6,i=0,r=0;;)if(1===u(i+=n)){if(++r>=16)break}else r=0;var s=i*n*1e3;return AS.springs[e]=s,s}}function kS(e){return void 0===e&&(e=10),function(t){return Math.ceil(PS(t,1e-6,1)*e)*(1/e)}}var OS,FS,NS=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function i(e){return 3*e}function r(e,r,s){return((t(r,s)*e+n(r,s))*e+i(r))*e}function s(e,r,s){return 3*t(r,s)*e*e+2*n(r,s)*e+i(r)}return function(t,n,i,a){if(0<=t&&t<=1&&0<=i&&i<=1){var o=new Float32Array(11);if(t!==n||i!==a)for(var l=0;l<11;++l)o[l]=r(l*e,t,i);return function(e){return t===n&&i===a||0===e||1===e?e:r(c(e),n,a)}}function c(n){for(var a=0,l=1;10!==l&&o[l]<=n;++l)a+=e;--l;var c=a+(n-o[l])/(o[l+1]-o[l])*e,h=s(c,t,i);return h>=.001?function(e,t,n,i){for(var a=0;a<4;++a){var o=s(t,n,i);if(0===o)return t;t-=(r(t,n,i)-e)/o}return t}(n,c,t,i):0===h?c:function(e,t,n,i,s){var a,o,l=0;do{(a=r(o=t+(n-t)/2,i,s)-e)>0?n=o:t=o}while(Math.abs(a)>1e-7&&++l<10);return o}(n,a,a+e,t,i)}}}(),BS=(OS={linear:function(){return function(e){return e}}},FS={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=PS(e,1,10),i=PS(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-i/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/i)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,t){FS[e]=function(){return function(e){return Math.pow(e,t+2)}}})),Object.keys(FS).forEach((function(e){var t=FS[e];OS["easeIn"+e]=t,OS["easeOut"+e]=function(e,n){return function(i){return 1-t(e,n)(1-i)}},OS["easeInOut"+e]=function(e,n){return function(i){return i<.5?t(e,n)(2*i)/2:1-t(e,n)(-2*i+2)/2}},OS["easeOutIn"+e]=function(e,n){return function(i){return i<.5?(1-t(e,n)(1-2*i))/2:(t(e,n)(2*i-1)+1)/2}}})),OS);function zS(e,t){if(LS.fnc(e))return e;var n=e.split("(")[0],i=BS[n],r=DS(e);switch(n){case"spring":return RS(e,t);case"cubicBezier":return IS(NS,r);case"steps":return IS(kS,r);default:return IS(i,r)}}function US(e){try{return document.querySelectorAll(e)}catch(e){return}}function VS(e,t){for(var n=e.length,i=arguments.length>=2?arguments[1]:void 0,r=[],s=0;s<n;s++)if(s in e){var a=e[s];t.call(i,a,s,e)&&r.push(a)}return r}function HS(e){return e.reduce((function(e,t){return e.concat(LS.arr(t)?HS(t):t)}),[])}function GS(e){return LS.arr(e)?e:(LS.str(e)&&(e=US(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function jS(e,t){return e.some((function(e){return e===t}))}function WS(e){var t={};for(var n in e)t[n]=e[n];return t}function qS(e,t){var n=WS(e);for(var i in e)n[i]=t.hasOwnProperty(i)?t[i]:e[i];return n}function XS(e,t){var n=WS(e);for(var i in t)n[i]=LS.und(e[i])?t[i]:e[i];return n}function YS(e){return LS.rgb(e)?(n=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t=e))?"rgba("+n[1]+",1)":t:LS.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,i){return t+t+n+n+i+i})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(e):LS.hsl(e)?function(e){var t,n,i,r=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),s=parseInt(r[1],10)/360,a=parseInt(r[2],10)/100,o=parseInt(r[3],10)/100,l=r[4]||1;function c(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==a)t=n=i=o;else{var h=o<.5?o*(1+a):o+a-o*a,u=2*o-h;t=c(u,h,s+1/3),n=c(u,h,s),i=c(u,h,s-1/3)}return"rgba("+255*t+","+255*n+","+255*i+","+l+")"}(e):void 0;var t,n}function $S(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function KS(e,t){return LS.fnc(e)?e(t.target,t.id,t.total):e}function ZS(e,t){return e.getAttribute(t)}function QS(e,t,n){if(jS([n,"deg","rad","turn"],$S(t)))return t;var i=AS.CSS[t+n];if(!LS.und(i))return i;var r=document.createElement(e.tagName),s=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;s.appendChild(r),r.style.position="absolute",r.style.width=100+n;var a=100/r.offsetWidth;s.removeChild(r);var o=a*parseFloat(t);return AS.CSS[t+n]=o,o}function JS(e,t,n){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return n?QS(e,r,n):r}}function eE(e,t){return LS.dom(e)&&!LS.inp(e)&&(!LS.nil(ZS(e,t))||LS.svg(e)&&e[t])?"attribute":LS.dom(e)&&jS(MS,t)?"transform":LS.dom(e)&&"transform"!==t&&JS(e,t)?"css":null!=e[t]?"object":void 0}function tE(e){if(LS.dom(e)){for(var t,n=e.style.transform||"",i=/(\w+)\(([^)]*)\)/g,r=new Map;t=i.exec(n);)r.set(t[1],t[2]);return r}}function nE(e,t,n,i){var r=CS(t,"scale")?1:0+function(e){return CS(e,"translate")||"perspective"===e?"px":CS(e,"rotate")||CS(e,"skew")?"deg":void 0}(t),s=tE(e).get(t)||r;return n&&(n.transforms.list.set(t,s),n.transforms.last=t),i?QS(e,s,i):s}function iE(e,t,n,i){switch(eE(e,t)){case"transform":return nE(e,t,i,n);case"css":return JS(e,t,n);case"attribute":return ZS(e,t);default:return e[t]||0}}function rE(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var i=$S(e)||0,r=parseFloat(t),s=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return r+s+i;case"-":return r-s+i;case"*":return r*s+i}}function sE(e,t){if(LS.col(e))return YS(e);if(/\s/g.test(e))return e;var n=$S(e),i=n?e.substr(0,e.length-n.length):e;return t?i+t:i}function aE(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function oE(e){for(var t,n=e.points,i=0,r=0;r<n.numberOfItems;r++){var s=n.getItem(r);r>0&&(i+=aE(t,s)),t=s}return i}function lE(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*ZS(e,"r")}(e);case"rect":return function(e){return 2*ZS(e,"width")+2*ZS(e,"height")}(e);case"line":return function(e){return aE({x:ZS(e,"x1"),y:ZS(e,"y1")},{x:ZS(e,"x2"),y:ZS(e,"y2")})}(e);case"polyline":return oE(e);case"polygon":return function(e){var t=e.points;return oE(e)+aE(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function cE(e,t){var n=t||{},i=n.el||function(e){for(var t=e.parentNode;LS.svg(t)&&LS.svg(t.parentNode);)t=t.parentNode;return t}(e),r=i.getBoundingClientRect(),s=ZS(i,"viewBox"),a=r.width,o=r.height,l=n.viewBox||(s?s.split(" "):[0,0,a,o]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:a,h:o,vW:l[2],vH:l[3]}}function hE(e,t,n){function i(n){void 0===n&&(n=0);var i=t+n>=1?t+n:0;return e.el.getPointAtLength(i)}var r=cE(e.el,e.svg),s=i(),a=i(-1),o=i(1),l=n?1:r.w/r.vW,c=n?1:r.h/r.vH;switch(e.property){case"x":return(s.x-r.x)*l;case"y":return(s.y-r.y)*c;case"angle":return 180*Math.atan2(o.y-a.y,o.x-a.x)/Math.PI}}function uE(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=sE(LS.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(n)?i.match(n).map(Number):[0],strings:LS.str(e)||t?i.split(n):[]}}function dE(e){return VS(e?HS(LS.arr(e)?e.map(GS):GS(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function pE(e){var t=dE(e);return t.map((function(e,n){return{target:e,id:n,total:t.length,transforms:{list:tE(e)}}}))}function fE(e,t){var n=WS(t);if(/^spring/.test(n.easing)&&(n.duration=RS(n.easing)),LS.arr(e)){var i=e.length;2===i&&!LS.obj(e[0])?e={value:e}:LS.fnc(t.duration)||(n.duration=t.duration/i)}var r=LS.arr(e)?e:[e];return r.map((function(e,n){var i=LS.obj(e)&&!LS.pth(e)?e:{value:e};return LS.und(i.delay)&&(i.delay=n?0:t.delay),LS.und(i.endDelay)&&(i.endDelay=n===r.length-1?t.endDelay:0),i})).map((function(e){return XS(e,n)}))}function mE(e,t){var n=[],i=t.keyframes;for(var r in i&&(t=XS(function(e){for(var t=VS(HS(e.map((function(e){return Object.keys(e)}))),(function(e){return LS.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),n={},i=function(i){var r=t[i];n[r]=e.map((function(e){var t={};for(var n in e)LS.key(n)?n==r&&(t.value=e[n]):t[n]=e[n];return t}))},r=0;r<t.length;r++)i(r);return n}(i),t)),t)LS.key(r)&&n.push({name:r,tweens:fE(t[r],e)});return n}function gE(e,t){var n;return e.tweens.map((function(i){var r=function(e,t){var n={};for(var i in e){var r=KS(e[i],t);LS.arr(r)&&1===(r=r.map((function(e){return KS(e,t)}))).length&&(r=r[0]),n[i]=r}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(i,t),s=r.value,a=LS.arr(s)?s[1]:s,o=$S(a),l=iE(t.target,e.name,o,t),c=n?n.to.original:l,h=LS.arr(s)?s[0]:c,u=$S(h)||$S(l),d=o||u;return LS.und(a)&&(a=c),r.from=uE(h,d),r.to=uE(rE(a,h),d),r.start=n?n.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=zS(r.easing,r.duration),r.isPath=LS.pth(s),r.isPathTargetInsideSVG=r.isPath&&LS.svg(t.target),r.isColor=LS.col(r.from.original),r.isColor&&(r.round=1),n=r,r}))}var vE={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,i,r){if(i.list.set(t,n),t===i.last||r){var s="";i.list.forEach((function(e,t){s+=t+"("+e+") "})),e.style.transform=s}}};function yE(e,t){pE(e).forEach((function(e){for(var n in t){var i=KS(t[n],e),r=e.target,s=$S(i),a=iE(r,n,s,e),o=rE(sE(i,s||$S(a)),a),l=eE(r,n);vE[l](r,n,o,e.transforms,!0)}}))}function _E(e,t){return VS(HS(e.map((function(e){return t.map((function(t){return function(e,t){var n=eE(e.target,t.name);if(n){var i=gE(t,e),r=i[i.length-1];return{type:n,property:t.name,animatable:e,tweens:i,duration:r.end,delay:i[0].delay,endDelay:r.endDelay}}}(e,t)}))}))),(function(e){return!LS.und(e)}))}function bE(e,t){var n=e.length,i=function(e){return e.timelineOffset?e.timelineOffset:0},r={};return r.duration=n?Math.max.apply(Math,e.map((function(e){return i(e)+e.duration}))):t.duration,r.delay=n?Math.min.apply(Math,e.map((function(e){return i(e)+e.delay}))):t.delay,r.endDelay=n?r.duration-Math.max.apply(Math,e.map((function(e){return i(e)+e.duration-e.endDelay}))):t.endDelay,r}var xE=0;var SE=[],EE=function(){var e;function t(n){for(var i=SE.length,r=0;r<i;){var s=SE[r];s.paused?(SE.splice(r,1),i--):(s.tick(n),r++)}e=r>0?requestAnimationFrame(t):void 0}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",(function(){TE.suspendWhenDocumentHidden&&(wE()?e=cancelAnimationFrame(e):(SE.forEach((function(e){return e._onDocumentVisibility()})),EE()))})),function(){e||wE()&&TE.suspendWhenDocumentHidden||!(SE.length>0)||(e=requestAnimationFrame(t))}}();function wE(){return!!document&&document.hidden}function TE(e){void 0===e&&(e={});var t,n=0,i=0,r=0,s=0,a=null;function o(e){var t=window.Promise&&new Promise((function(e){return a=e}));return e.finished=t,t}var l=function(e){var t=qS(wS,e),n=qS(TS,e),i=mE(n,e),r=pE(e.targets),s=_E(r,i),a=bE(s,n),o=xE;return xE++,XS(t,{id:o,children:[],animatables:r,animations:s,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}(e);o(l);function c(){var e=l.direction;"alternate"!==e&&(l.direction="normal"!==e?"normal":"reverse"),l.reversed=!l.reversed,t.forEach((function(e){return e.reversed=l.reversed}))}function h(e){return l.reversed?l.duration-e:e}function u(){n=0,i=h(l.currentTime)*(1/TE.speed)}function d(e,t){t&&t.seek(e-t.timelineOffset)}function p(e){for(var t=0,n=l.animations,i=n.length;t<i;){var r=n[t],s=r.animatable,a=r.tweens,o=a.length-1,c=a[o];o&&(c=VS(a,(function(t){return e<t.end}))[0]||c);for(var h=PS(e-c.start-c.delay,0,c.duration)/c.duration,u=isNaN(h)?1:c.easing(h),d=c.to.strings,p=c.round,f=[],m=c.to.numbers.length,g=void 0,v=0;v<m;v++){var y=void 0,_=c.to.numbers[v],b=c.from.numbers[v]||0;y=c.isPath?hE(c.value,u*_,c.isPathTargetInsideSVG):b+u*(_-b),p&&(c.isColor&&v>2||(y=Math.round(y*p)/p)),f.push(y)}var x=d.length;if(x){g=d[0];for(var S=0;S<x;S++){d[S];var E=d[S+1],w=f[S];isNaN(w)||(g+=E?w+E:w+" ")}}else g=f[0];vE[r.type](s.target,r.property,g,s.transforms),r.currentValue=g,t++}}function f(e){l[e]&&!l.passThrough&&l[e](l)}function m(e){var u=l.duration,m=l.delay,g=u-l.endDelay,v=h(e);l.progress=PS(v/u*100,0,100),l.reversePlayback=v<l.currentTime,t&&function(e){if(l.reversePlayback)for(var n=s;n--;)d(e,t[n]);else for(var i=0;i<s;i++)d(e,t[i])}(v),!l.began&&l.currentTime>0&&(l.began=!0,f("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,f("loopBegin")),v<=m&&0!==l.currentTime&&p(0),(v>=g&&l.currentTime!==u||!u)&&p(u),v>m&&v<g?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,f("changeBegin")),f("change"),p(v)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,f("changeComplete")),l.currentTime=PS(v,0,u),l.began&&f("update"),e>=u&&(i=0,l.remaining&&!0!==l.remaining&&l.remaining--,l.remaining?(n=r,f("loopComplete"),l.loopBegan=!1,"alternate"===l.direction&&c()):(l.paused=!0,l.completed||(l.completed=!0,f("loopComplete"),f("complete"),!l.passThrough&&"Promise"in window&&(a(),o(l)))))}return l.reset=function(){var e=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed="reverse"===e,l.remaining=l.loop,t=l.children;for(var n=s=t.length;n--;)l.children[n].reset();(l.reversed&&!0!==l.loop||"alternate"===e&&1===l.loop)&&l.remaining++,p(l.reversed?l.duration:0)},l._onDocumentVisibility=u,l.set=function(e,t){return yE(e,t),l},l.tick=function(e){r=e,n||(n=r),m((r+(i-n))*TE.speed)},l.seek=function(e){m(h(e))},l.pause=function(){l.paused=!0,u()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,SE.push(l),u(),EE())},l.reverse=function(){c(),l.completed=!l.reversed,u()},l.restart=function(){l.reset(),l.play()},l.remove=function(e){AE(dE(e),l)},l.reset(),l.autoplay&&l.play(),l}function ME(e,t){for(var n=t.length;n--;)jS(e,t[n].animatable.target)&&t.splice(n,1)}function AE(e,t){var n=t.animations,i=t.children;ME(e,n);for(var r=i.length;r--;){var s=i[r],a=s.animations;ME(e,a),a.length||s.children.length||i.splice(r,1)}n.length||i.length||t.pause()}TE.version="3.2.1",TE.speed=1,TE.suspendWhenDocumentHidden=!0,TE.running=SE,TE.remove=function(e){for(var t=dE(e),n=SE.length;n--;){AE(t,SE[n])}},TE.get=iE,TE.set=yE,TE.convertPx=QS,TE.path=function(e,t){var n=LS.str(e)?US(e)[0]:e,i=t||100;return function(e){return{property:e,el:n,svg:cE(n),totalLength:lE(n)*(i/100)}}},TE.setDashoffset=function(e){var t=lE(e);return e.setAttribute("stroke-dasharray",t),t},TE.stagger=function(e,t){void 0===t&&(t={});var n=t.direction||"normal",i=t.easing?zS(t.easing):null,r=t.grid,s=t.axis,a=t.from||0,o="first"===a,l="center"===a,c="last"===a,h=LS.arr(e),u=h?parseFloat(e[0]):parseFloat(e),d=h?parseFloat(e[1]):0,p=$S(h?e[1]:e)||0,f=t.start||0+(h?u:0),m=[],g=0;return function(e,t,v){if(o&&(a=0),l&&(a=(v-1)/2),c&&(a=v-1),!m.length){for(var y=0;y<v;y++){if(r){var _=l?(r[0]-1)/2:a%r[0],b=l?(r[1]-1)/2:Math.floor(a/r[0]),x=_-y%r[0],S=b-Math.floor(y/r[0]),E=Math.sqrt(x*x+S*S);"x"===s&&(E=-x),"y"===s&&(E=-S),m.push(E)}else m.push(Math.abs(a-y));g=Math.max.apply(Math,m)}i&&(m=m.map((function(e){return i(e/g)*g}))),"reverse"===n&&(m=m.map((function(e){return s?e<0?-1*e:-e:Math.abs(g-e)})))}return f+(h?(d-u)/g:u)*(Math.round(100*m[t])/100)+p}},TE.timeline=function(e){void 0===e&&(e={});var t=TE(e);return t.duration=0,t.add=function(n,i){var r=SE.indexOf(t),s=t.children;function a(e){e.passThrough=!0}r>-1&&SE.splice(r,1);for(var o=0;o<s.length;o++)a(s[o]);var l=XS(n,qS(TS,e));l.targets=l.targets||e.targets;var c=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=LS.und(i)?c:rE(i,c),a(t),t.seek(l.timelineOffset);var h=TE(l);a(h),s.push(h);var u=bE(s,e);return t.delay=u.delay,t.endDelay=u.endDelay,t.duration=u.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},TE.easing=zS,TE.penner=BS,TE.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};const PE=TE;var CE=__webpack_require__(400),IE=__webpack_require__.n(CE),LE=__webpack_require__(496),DE=__webpack_require__.n(LE);function RE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return kE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kE(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function kE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var OE=107,FE=function(){function e(t){wa(this,e),this.element=t,this.assetsDirectory=this.element.dataset.assetsDirectory,this.height=this.element.offsetHeight,this.width=this.element.offsetWidth,this.breakpoint="desktop",this.width<768&&(this.breakpoint="mobile"),this.cache={desktop:new Array(108).fill(null),mobile:new Array(108).fill(null)},this.inFocus=!1,this.position={x:0,y:0},this.minX=0,this.maxX=0,this.init()}var t,n,i,r,s,a,o,l,c,h;return Ma(e,[{key:"init",value:(h=xS(ES().mark((function e(){return ES().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initDOM();case 2:return e.next=4,this.initLotties();case 4:return e.next=6,this.initReset();case 6:return e.next=8,this.initKeyboard();case 8:return e.next=10,this.initResizeObserver();case 10:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"initDOM",value:(c=xS(ES().mark((function e(){return ES().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.draggable=document.querySelector(".farmvibes-drone-draggable ._interactive"),this.assetBounds=document.querySelector(".farmvibes-drone-draggable ._bounds"),this.propeller=document.querySelectorAll(".farmvibes-drone-draggable ._propeller"),this.handle=document.querySelector(".farmvibes-drone-draggable ._handle"),this.handleProgress=document.querySelector(".farmvibes-drone-draggable ._handle progress"),this.canvas=document.querySelector(".farmvibes-drone-mask canvas"),this.ctx=this.canvas.getContext("2d"),this.track=document.querySelector(".farmvibes-drone-track"),this.status=document.querySelector(".farmvibes-drone-status"),this.reset=document.querySelector(".farmvibes-drone-reset"),this.resetButton=this.reset.querySelector("button"),this.alert=document.querySelector(".farmvibes-drone-alert");case 12:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"initLotties",value:(l=xS(ES().mark((function e(){return ES().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.scanCompleteLottie=document.querySelector(".farmvibes-drone-status"),this.scanComplete=fo().loadAnimation({autoplay:!1,container:this.scanCompleteLottie,loop:!1,path:"".concat(this.assetsDirectory,"/lottie/scan-complete.json"),renderer:"svg"});case 2:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"initReset",value:(o=xS(ES().mark((function e(){var t,n=this;return ES().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){var e=n;PE({targets:n.position,x:0,easing:"easeInOutCubic",update:function(){e.updatePosition()}}),n.alert.innerHTML=""},this.resetButton.addEventListener("click",t.bind(this));case 2:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"initKeyboard",value:(a=xS(ES().mark((function e(){var t,n,i,r,s=this;return ES().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){if(s.inFocus){var t,n=e.key;if(e.code,["ArrowLeft","ArrowDown"].includes(n))t=-1;else{if(!["ArrowRight","ArrowUp"].includes(n))return;t=1}s.position.x+=2*t,s.position.x<0&&(s.position.x=0),s.position.x>s.track.offsetWidth&&(s.position.x=s.track.offsetWidth);var i="";1===t&&s.position.x>5&&(i="The drone is starting to move across the screen: during a 30 to 40 minute flight across fields, it captures images a farmer can get data through."),1===t&&s.position.x>s.track.offsetWidth/2&&(i="At the halfway point, the drone continues to capture the farm land below, which allows a farmer to see every part of a 300 acre field in precise detail."),1===t&&s.position.x>s.track.offsetWidth-5&&(i="The drone is completing its scan across the screen: by the end of its flight, it has captured 15 to 20 gigabytes of data, which will be stitched together to create a clear map of the entire farm."),s.alert.innerHTML=i,s.updatePosition()}},document.removeEventListener("keydown",t),document.addEventListener("keydown",t.bind(this)),n=function(){s.inFocus=!0},this.handleProgress.removeEventListener("focus",n),this.handleProgress.addEventListener("focus",n.bind(this)),i=function(){s.inFocus=!1},this.handleProgress.removeEventListener("blur",i),this.handleProgress.addEventListener("blur",i.bind(this)),r=function(e){s.element.contains(e.target)?s.inFocus=!0:s.inFocus=!1},document.addEventListener("click",r);case 11:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"initResizeObserver",value:(s=xS(ES().mark((function e(){var t=this;return ES().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new ResizeObserver((function(e){var n=e[0].contentBoxSize[0];t.height=n.blockSize,t.width=n.inlineSize,t.update()})).observe(this.element);case 2:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"update",value:(r=xS(ES().mark((function e(){return ES().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateBreakpoint();case 2:return e.next=4,this.updateImages();case 4:return e.next=6,this.updateDraggable();case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"updateBreakpoint",value:(i=xS(ES().mark((function e(){return ES().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.breakpoint="desktop",this.width<768&&(this.breakpoint="mobile"),this.canvas){e.next=4;break}return e.abrupt("return");case 4:"desktop"===this.breakpoint?(this.canvas.width=1712,this.canvas.height=1372):(this.canvas.width=900,this.canvas.height=1200);case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"updateImages",value:(n=xS(ES().mark((function e(){var t,n,i,r,s,a,o,l,c,h,u,d,p=this;return ES().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){var e=p.cache[p.breakpoint].map((function(e,t){return t>0&&null===e?t:null})).filter((function(e){return e})),t=p.cache[p.breakpoint].map((function(e,t){return e?t:null})).filter((function(e){return e}));return{pending:e,preloaded:t}},n=function(e){var t="".concat(p.assetsDirectory,"/sequence/").concat(p.breakpoint),n="".concat(e.toString().padStart(3,"0"),".webp");return"".concat(t,"/").concat(n)},i=function(){var e=xS(ES().mark((function e(t){var i,r;return ES().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n(t),(r=new Image).src=i,e.next=5,r.decode();case 5:return p.cache[p.breakpoint][t]=r,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=xS(ES().mark((function e(t){var n,r,s,a,o;return ES().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=RE(t),e.prev=2,r.s();case 4:if((s=r.n()).done){e.next=11;break}if(a=s.value,!p.cache[p.breakpoint][a]){e.next=8;break}return e.abrupt("continue",9);case 8:n.push(i(a));case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:return e.next=21,Promise.allSettled(n);case 21:(o=e.sent).filter((function(e){return"fulfilled"===e.status})),o.filter((function(e){return"rejected"===e.status}));case 24:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),s=function(e){return new Promise((function(t){setTimeout((function(){t("done")}),e)}))},a=t(),o=a.pending,l=o.slice(0,OE),c=IE()(l,30),h=RE(c),e.prev=10,h.s();case 12:if((u=h.n()).done){e.next=22;break}return d=u.value,e.next=16,s(100);case 16:return e.next=18,r(d);case 18:return e.next=20,s(100);case 20:e.next=12;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(10),h.e(e.t0);case 27:return e.prev=27,h.f(),e.finish(27);case 30:this.element.classList.remove("--loading");case 31:case"end":return e.stop()}}),e,this,[[10,24,27,30]])}))),function(){return n.apply(this,arguments)})},{key:"updateDraggable",value:(t=xS(ES().mark((function e(){var t,n=this;return ES().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.minX=0,this.maxX=this.track.offsetWidth,this.updatePosition(),t=this,DE()(this.draggable).unset(),DE()(this.draggable).draggable({allowFrom:this.handle,intertia:!1,listeners:{start:function(e){},move:function(e){t.position.x+=e.dx,t.position.y+=e.dy,t.updatePosition()},end:function(e){}},lockAxis:"x",modifiers:[DE().modifiers.snap({targets:[DE().snappers.grid({x:1,y:1})],range:1/0,relativePoints:[{x:0,y:0}]}),DE().modifiers.restrictRect({restriction:"parent"})]}).on("down up hold dragstart dragend",(function(e){n.handleProgress.blur(),["down","dragstart"].includes(e.type)&&n.assetBounds.classList.add("dragging"),["up","dragend"].includes(e.type)&&n.assetBounds.classList.remove("dragging")}));case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"updatePosition",value:function(){var e=("desktop"===this.breakpoint?3*this.width/7:2*this.width/4)-this.position.x;document.querySelector(".farmvibes-drone-mask").style.clipPath="inset(0 ".concat(e,"px 0 0)"),this.position.x<1&&(this.position.x=0),this.position.x>this.maxX&&(this.position.x=this.maxX),this.position.x=Math.round(this.position.x),this.draggable.style.transform="translate(".concat(this.position.x,"px, ").concat(this.position.y,"px)");var t=100*(this.position.x/this.track.offsetWidth);this.handleProgress.value=t,this.handleProgress.setAttribute("aria-valuenow",t);var n=this.track.offsetWidth,i=this.position.x/n,r=720*i;this.propeller.forEach((function(e){e.style.transform="rotate(".concat(r,"deg)")}));var s=function(e){return Math.min(Math.max(Math.floor(e),1),OE)}(i*OE);try{this.ctx.drawImage(this.cache[this.breakpoint][s],0,0)}catch(e){console.error("debug.farmvibes","debug",{index:s,error:e})}parseInt(this.position.x)>this.maxX-5?(this.status.classList.remove("--hidden"),this.scanComplete.play(),this.reset.classList.remove("--hidden"),this.reset.setAttribute("aria-hidden","false")):(this.status.classList.add("--hidden"),this.scanComplete.stop(),this.reset.classList.add("--hidden"),this.reset.setAttribute("aria-hidden","true"))}}]),e}();const NE={selector:".js-farmvibes-drone",Source:FE},BE={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function zE(){return BE}function UE(){return"undefined"==typeof window||!window||void 0===window.document||!window.document}function VE(e){if(!UE()&&"undefined"!=typeof matchMedia)return matchMedia(e)}function HE(e,t){return e===t||aw(t)&&t.indexOf(e)>-1}function GE(e){return Math.floor(gw()*e.length)}function jE(e,t,n=!0){return e[void 0!==t&&n?t%e.length:GE(e)]}function WE(e,t,n,i,r){return function(e,t,n,i){let r=!0;i&&"bottom"!==i||(r=e.top<t.height+n.x);!r||i&&"left"!==i||(r=e.right>n.x);!r||i&&"right"!==i||(r=e.left<t.width+n.y);!r||i&&"top"!==i||(r=e.bottom>n.y);return r}(qE(e,i??0),t,n,r)}function qE(e,t){return{bottom:e.y+t,left:e.x-t,right:e.x+t,top:e.y-t}}function XE(e,...t){for(const n of t){if(null==n)continue;if(!sw(n)){e=n;continue}const t=Array.isArray(n);!t||!sw(e)&&e&&Array.isArray(e)?t||!sw(e)&&e&&!Array.isArray(e)||(e={}):e=[];for(const t in n){if("__proto__"===t)continue;const i=n[t],r=e;r[t]=sw(i)&&Array.isArray(i)?i.map((e=>XE(r[t],e))):XE(r[t],i)}}return e}function YE(e,t,n){KE(t,(t=>{const i=t.mode;t.enable&&HE(e,i)&&function(e,t){KE(e.selectors,(n=>{t(n,e)}))}(t,n)}))}function $E(e,t){if(t&&e)return QE(e,(e=>function(e,t){const n=KE(t,(t=>e.matches(t)));return aw(n)?n.some((e=>e)):n}(t,e.selectors)))}function KE(e,t){return aw(e)?e.map(((e,n)=>t(e,n))):t(e,0)}function ZE(e,t,n){return aw(e)?jE(e,t,n):e}function QE(e,t){return aw(e)?e.find(((e,n)=>t(e,n))):t(e,0)?e:void 0}function JE(e,t){if(!("percent"===e.mode)){const{mode:t,...n}=e;return n}return"x"in e?{x:e.x/100*t.width,y:e.y/100*t.height}:{width:e.width/100*t.width,height:e.height/100*t.height}}function ew(e,t){return JE(e,t)}function tw(e){return"boolean"==typeof e}function nw(e){return"string"==typeof e}function iw(e){return"number"==typeof e}function rw(e){return"function"==typeof e}function sw(e){return"object"==typeof e&&null!==e}function aw(e){return Array.isArray(e)}const ow="generated",lw="pointerleave",cw="pointermove",hw="touchend",uw="tsParticles - Error";class dw{constructor(e,t,n){if(this._updateFromAngle=(e,t)=>{this.x=Math.cos(e)*t,this.y=Math.sin(e)*t},!iw(e)&&e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:0}else{if(void 0===e||void 0===t)throw new Error(`${uw} Vector3d not initialized correctly`);this.x=e,this.y=t,this.z=n??0}}static get origin(){return dw.create(0,0,0)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return dw.create(e.x,e.y,e.z)}static create(e,t,n){return new dw(e,t,n)}add(e){return dw.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return dw.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return dw.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**2+this.y**2}mult(e){return dw.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){const e=this.length;0!=e&&this.multTo(1/e)}rotate(e){return dw.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),0)}setTo(e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:0}sub(e){return dw.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}}class pw extends dw{constructor(e,t){super(e,t,0)}static get origin(){return pw.create(0,0)}static clone(e){return pw.create(e.x,e.y)}static create(e,t){return new pw(e,t)}}let fw=Math.random;const mw=new Map;function gw(){return vw(fw(),0,1-1e-16)}function vw(e,t,n){return Math.min(Math.max(e,t),n)}function yw(e){const t=xw(e);let n=bw(e);return t===n&&(n=0),gw()*(t-n)+n}function _w(e){return iw(e)?e:yw(e)}function bw(e){return iw(e)?e:e.min}function xw(e){return iw(e)?e:e.max}function Sw(e,t){if(e===t||void 0===t&&iw(e))return e;const n=bw(e),i=xw(e);return void 0!==t?{min:Math.min(n,t),max:Math.max(i,t)}:Sw(n,i)}function Ew(e){const t=e.random,{enable:n,minimumValue:i}=tw(t)?{enable:t,minimumValue:0}:t;return _w(n?Sw(e.value,i):e.value)}function ww(e,t){const n=e.x-t.x,i=e.y-t.y;return{dx:n,dy:i,distance:Math.sqrt(n**2+i**2)}}function Tw(e,t){return ww(e,t).distance}function Mw(e){const t={x:void 0!==e.position?.x?_w(e.position.x):void 0,y:void 0!==e.position?.y?_w(e.position.y):void 0};return function(e){return{x:(e.position?.x??100*gw())*e.size.width/100,y:(e.position?.y??100*gw())*e.size.height/100}}({size:e.size,position:t})}function Aw(e){return{x:e.position?.x??gw()*e.size.width,y:e.position?.y??gw()*e.size.height}}function Pw(e){return e?e.endsWith("%")?parseFloat(e)/100:parseFloat(e):1}function Cw(e,t,n,i,r,s){!function(e,t){const n=e.options.move.path;if(!n.enable)return;if(e.lastPathTime<=e.pathDelay)return void(e.lastPathTime+=t.value);const i=e.pathGenerator?.generate(e,t);i&&e.velocity.addTo(i);n.clamp&&(e.velocity.x=vw(e.velocity.x,-1,1),e.velocity.y=vw(e.velocity.y,-1,1));e.lastPathTime-=e.pathDelay}(e,s);const a=e.gravity,o=a?.enable&&a.inverse?-1:1;r&&n&&(e.velocity.x+=r*s.factor/(60*n)),a?.enable&&n&&(e.velocity.y+=o*(a.acceleration*s.factor)/(60*n));const l=e.moveDecay;e.velocity.multTo(l);const c=e.velocity.mult(n);a?.enable&&i>0&&(!a.inverse&&c.y>=0&&c.y>=i||a.inverse&&c.y<=0&&c.y<=-i)&&(c.y=o*i,n&&(e.velocity.y=c.y/n));const h=e.options.zIndex,u=(1-e.zIndexFactor)**h.velocityRate;c.multTo(u);const{position:d}=e;d.addTo(c),t.vibrate&&(d.x+=Math.sin(d.x*Math.cos(d.y)),d.y+=Math.cos(d.y*Math.sin(d.x)))}class Iw{constructor(){this._initSpin=e=>{const t=e.container,n=e.options.move.spin;if(!n.enable)return;const i=n.position??{x:50,y:50},r={x:i.x/100*t.canvas.size.width,y:i.y/100*t.canvas.size.height},s=Tw(e.getPosition(),r),a=_w(n.acceleration);e.retina.spinAcceleration=a*t.retina.pixelRatio,e.spin={center:r,direction:e.velocity.x>=0?"clockwise":"counter-clockwise",angle:e.velocity.angle,radius:s,acceleration:e.retina.spinAcceleration}}}init(e){const t=e.options.move.gravity;e.gravity={enable:t.enable,acceleration:_w(t.acceleration),inverse:t.inverse},this._initSpin(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(e,t){const n=e.options,i=n.move;if(!i.enable)return;const r=e.container,s=r.retina.pixelRatio,a=function(e){return e.slow.inRange?e.slow.factor:1}(e),o=(e.retina.moveSpeed??=_w(i.speed)*s)*r.retina.reduceFactor,l=e.retina.moveDrift??=_w(e.options.move.drift)*s,c=xw(n.size.value)*s,h=o*(i.size?e.getRadius()/c:1)*a*(t.factor||1)/2,u=e.retina.maxSpeed??r.retina.maxSpeed;i.spin.enable?function(e,t){const n=e.container;if(!e.spin)return;const i={x:"clockwise"===e.spin.direction?Math.cos:Math.sin,y:"clockwise"===e.spin.direction?Math.sin:Math.cos};e.position.x=e.spin.center.x+e.spin.radius*i.x(e.spin.angle),e.position.y=e.spin.center.y+e.spin.radius*i.y(e.spin.angle),e.spin.radius+=e.spin.acceleration;const r=Math.max(n.canvas.size.width,n.canvas.size.height);e.spin.radius>r/2?(e.spin.radius=r/2,e.spin.acceleration*=-1):e.spin.radius<0&&(e.spin.radius=0,e.spin.acceleration*=-1),e.spin.angle+=t/100*(1-e.spin.radius/r)}(e,h):Cw(e,i,h,u,l,t),function(e){const t=e.initialPosition,{dx:n,dy:i}=ww(t,e.position),r=Math.abs(n),s=Math.abs(i),{maxDistance:a}=e.retina,o=a.horizontal,l=a.vertical;if(o||l)if((o&&r>=o||l&&s>=l)&&!e.misplaced)e.misplaced=!!o&&r>o||!!l&&s>l,o&&(e.velocity.x=e.velocity.y/2-e.velocity.x),l&&(e.velocity.y=e.velocity.x/2-e.velocity.y);else if((!o||r<o)&&(!l||s<l)&&e.misplaced)e.misplaced=!1;else if(e.misplaced){const n=e.position,i=e.velocity;o&&(n.x<t.x&&i.x<0||n.x>t.x&&i.x>0)&&(i.x*=-gw()),l&&(n.y<t.y&&i.y<0||n.y>t.y&&i.y>0)&&(i.y*=-gw())}}(e)}}async function Lw(e,t=!0){await e.addMover("base",(()=>new Iw),t)}const Dw="random",Rw=new Map;function kw(e){Rw.set(e.key,e)}function Ow(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Fw(e){for(const[,t]of Rw)if(e.startsWith(t.stringPrefix))return t.parseString(e);const t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,((e,t,n,i,r)=>t+t+n+n+i+i+(void 0!==r?r+r:""))),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(t);return n?{a:void 0!==n[4]?parseInt(n[4],16)/255:1,b:parseInt(n[3],16),g:parseInt(n[2],16),r:parseInt(n[1],16)}:void 0}function Nw(e,t,n=!0){if(!e)return;const i=nw(e)?{value:e}:e;if(nw(i.value))return Bw(i.value,t,n);if(aw(i.value))return Nw({value:jE(i.value,t,n)});for(const[,e]of Rw){const t=e.handleRangeColor(i);if(t)return t}}function Bw(e,t,n=!0){if(!e)return;const i=nw(e)?{value:e}:e;if(nw(i.value))return i.value===Dw?Hw():function(e){return Fw(e)}(i.value);if(aw(i.value))return Bw({value:jE(i.value,t,n)});for(const[,e]of Rw){const t=e.handleColor(i);if(t)return t}}function zw(e,t,n=!0){const i=Nw(e,t,n);return i?Uw(i):void 0}function Uw(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),s=Math.min(t,n,i),a={h:0,l:(r+s)/2,s:0};return r!==s&&(a.s=a.l<.5?(r-s)/(r+s):(r-s)/(2-r-s),a.h=t===r?(n-i)/(r-s):a.h=n===r?2+(i-t)/(r-s):4+(t-n)/(r-s)),a.l*=100,a.s*=100,a.h*=60,a.h<0&&(a.h+=360),a.h>=360&&(a.h-=360),a}function Vw(e){const t={b:0,g:0,r:0},n={h:e.h/360,l:e.l/100,s:e.s/100};if(n.s){const e=n.l<.5?n.l*(1+n.s):n.l+n.s-n.l*n.s,i=2*n.l-e;t.r=Ow(i,e,n.h+1/3),t.g=Ow(i,e,n.h),t.b=Ow(i,e,n.h-1/3)}else t.r=t.g=t.b=n.l;return t.r=Math.floor(255*t.r),t.g=Math.floor(255*t.g),t.b=Math.floor(255*t.b),t}function Hw(e){const t=e??0;return{b:Math.floor(yw(Sw(t,256))),g:Math.floor(yw(Sw(t,256))),r:Math.floor(yw(Sw(t,256)))}}function Gw(e,t){return`rgba(${e.r}, ${e.g}, ${e.b}, ${t??1})`}function jw(e,t){return`hsla(${e.h}, ${e.s}%, ${e.l}%, ${t??1})`}function Ww(e){return void 0!==e?{h:e.h.value,s:e.s.value,l:e.l.value}:void 0}function qw(e,t,n){e.enable=t.enable,e.enable?(e.velocity=_w(t.speed)/100*n,e.decay=1-_w(t.decay),e.status="increasing",e.loops=0,e.maxLoops=_w(t.count),e.time=0,e.delayTime=1e3*_w(t.delay),t.sync||(e.velocity*=gw(),e.value*=gw()),e.initialValue=e.value):e.velocity=0}function Xw(e,t,n,i,r){if(!t||!n.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0))return;if(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=e.value),(t.delayTime??0)>0&&t.time<(t.delayTime??0))return;const s=yw(n.offset),a=(t.velocity??0)*e.factor+3.6*s,o=t.decay??1;r&&"increasing"!==t.status?(t.value-=a,t.value<0&&(t.loops||(t.loops=0),t.loops++,t.status="increasing",t.value+=t.value)):(t.value+=a,t.value>i&&(t.loops||(t.loops=0),t.loops++,r&&(t.status="decreasing",t.value-=t.value%i))),t.velocity&&1!==o&&(t.velocity*=o),t.value>i&&(t.value%=i)}class Yw{constructor(e){this.container=e}init(e){const t=zw(e.options.color,e.id,e.options.reduceDuplicates);t&&(e.color=function(e,t,n){const i={h:{enable:!1,value:e.h},s:{enable:!1,value:e.s},l:{enable:!1,value:e.l}};return t&&(qw(i.h,t.h,n),qw(i.s,t.s,n),qw(i.l,t.l,n)),i}(t,e.options.color.animation,this.container.retina.reduceFactor))}isEnabled(e){const{h:t,s:n,l:i}=e.options.color.animation,{color:r}=e;return!e.destroyed&&!e.spawning&&(void 0!==r?.h.value&&t.enable||void 0!==r?.s.value&&n.enable||void 0!==r?.l.value&&i.enable)}update(e,t){!function(e,t){const{h:n,s:i,l:r}=e.options.color.animation,{color:s}=e;if(!s)return;const{h:a,s:o,l}=s;a&&Xw(t,a,n,360,!1),o&&Xw(t,o,i,100,!0),l&&Xw(t,l,r,100,!0)}(e,t)}}async function $w(e,t=!0){await e.addParticleUpdater("color",(e=>new Yw(e)),t)}class Kw{randomPosition(e,t,n){const[i,r]=[t.width/2,t.height/2],s=((e,t)=>{const n=gw()/4,i=Math.atan(t/e*Math.tan(2*Math.PI*n)),r=gw();return r<.25?i:r<.5?Math.PI-i:r<.75?Math.PI+i:-i})(i,r),a=(h=s,(l=i)*(c=r)/Math.sqrt((c*Math.cos(h))**2+(l*Math.sin(h))**2)),o=n?a*Math.sqrt(gw()):a;var l,c,h;return{x:e.x+o*Math.cos(s),y:e.y+o*Math.sin(s)}}}class Zw{constructor(){this.count=0,this.enable=!1,this.offset=0,this.speed=1,this.delay=0,this.decay=0,this.sync=!0}load(e){e&&(void 0!==e.count&&(this.count=Sw(e.count)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.offset&&(this.offset=Sw(e.offset)),void 0!==e.speed&&(this.speed=Sw(e.speed)),void 0!==e.decay&&(this.decay=Sw(e.decay)),void 0!==e.delay&&(this.delay=Sw(e.delay)),void 0!==e.sync&&(this.sync=e.sync))}}class Qw{constructor(){this.h=new Zw,this.s=new Zw,this.l=new Zw}load(e){e&&(this.h.load(e.h),this.s.load(e.s),this.l.load(e.l))}}class Jw{constructor(){this.value=""}static create(e,t){const n=new Jw;return n.load(e),void 0!==t&&(nw(t)||aw(t)?n.load({value:t}):n.load(t)),n}load(e){void 0!==e?.value&&(this.value=e.value)}}class eT extends Jw{constructor(){super(),this.animation=new Qw}static create(e,t){const n=new eT;return n.load(e),void 0!==t&&(nw(t)||aw(t)?n.load({value:t}):n.load(t)),n}load(e){if(super.load(e),!e)return;const t=e.animation;void 0!==t&&(void 0!==t.enable?this.animation.h.load(t):this.animation.load(e.animation))}}class tT{constructor(){this.wait=!1}load(e){e&&(void 0!==e.count&&(this.count=e.count),void 0!==e.delay&&(this.delay=Sw(e.delay)),void 0!==e.duration&&(this.duration=Sw(e.duration)),void 0!==e.wait&&(this.wait=e.wait))}}class nT{constructor(){this.quantity=1,this.delay=.1}load(e){void 0!==e&&(void 0!==e.quantity&&(this.quantity=Sw(e.quantity)),void 0!==e.delay&&(this.delay=Sw(e.delay)))}}class iT{constructor(){this.mode="percent",this.height=0,this.width=0}load(e){void 0!==e&&(void 0!==e.mode&&(this.mode=e.mode),void 0!==e.height&&(this.height=e.height),void 0!==e.width&&(this.width=e.width))}}class rT{constructor(){this.autoPlay=!0,this.fill=!0,this.life=new tT,this.rate=new nT,this.shape="square",this.startCount=0}load(e){e&&(void 0!==e.autoPlay&&(this.autoPlay=e.autoPlay),void 0!==e.size&&(this.size||(this.size=new iT),this.size.load(e.size)),void 0!==e.direction&&(this.direction=e.direction),this.domId=e.domId,void 0!==e.fill&&(this.fill=e.fill),this.life.load(e.life),this.name=e.name,this.particles=KE(e.particles,(e=>XE({},e))),this.rate.load(e.rate),void 0!==e.shape&&(this.shape=e.shape),void 0!==e.position&&(this.position={},void 0!==e.position.x&&(this.position.x=Sw(e.position.x)),void 0!==e.position.y&&(this.position.y=Sw(e.position.y))),void 0!==e.spawnColor&&(void 0===this.spawnColor&&(this.spawnColor=new eT),this.spawnColor.load(e.spawnColor)),void 0!==e.startCount&&(this.startCount=e.startCount))}}class sT{constructor(e,t,n,i,r){this.emitters=t,this.container=n,this._calcPosition=()=>Mw({size:this.container.canvas.size,position:this.options.position}),this._destroy=()=>{this.emitters.removeEmitter(this),this._engine.dispatchEvent("emitterDestroyed",{container:this.container,data:{emitter:this}})},this._emit=()=>{if(this._paused)return;const e=_w(this.options.rate.quantity);this._emitParticles(e)},this._emitParticles=e=>{const t=this.getPosition(),n=this.getSize(),i=ZE(this._particlesOptions);for(let r=0;r<e;r++){const e=XE({},i);if(this.spawnColor){const t=this.options.spawnColor?.animation;t&&(this.spawnColor.h=this._setColorAnimation(t.h,this.spawnColor.h,360),this.spawnColor.s=this._setColorAnimation(t.s,this.spawnColor.s,100),this.spawnColor.l=this._setColorAnimation(t.l,this.spawnColor.l,100)),e.color?e.color.value=this.spawnColor:e.color={value:this.spawnColor}}if(!t)return;const r=this._shape?.randomPosition(t,n,this.fill)??t;this.container.particles.addParticle(r,e)}},this._prepareToDie=()=>{if(this._paused)return;const e=void 0!==this.options.life?.duration?_w(this.options.life.duration):void 0;this.container.retina.reduceFactor&&(this._lifeCount>0||this._immortal)&&void 0!==e&&e>0&&(this._duration=1e3*e)},this._setColorAnimation=(e,t,n)=>{const i=this.container;if(!e.enable)return t;const r=yw(e.offset),s=1e3*_w(this.options.rate.delay)/i.retina.reduceFactor;return(t+_w(e.speed??0)*i.fpsLimit/s+3.6*r)%n},this._engine=e,this._currentDuration=0,this._currentEmitDelay=0,this._currentSpawnDelay=0,this._initialPosition=r,i instanceof rT?this.options=i:(this.options=new rT,this.options.load(i)),this._spawnDelay=1e3*_w(this.options.life.delay??0)/this.container.retina.reduceFactor,this.position=this._initialPosition??this._calcPosition(),this.name=this.options.name,this._shape=this._engine.emitterShapeManager?.getShape(this.options.shape),this.fill=this.options.fill,this._firstSpawn=!this.options.life.wait,this._startParticlesAdded=!1;let s=XE({},this.options.particles);s??={},s.move??={},s.move.direction??=this.options.direction,this.options.spawnColor&&(this.spawnColor=zw(this.options.spawnColor)),this._paused=!this.options.autoPlay,this._particlesOptions=s,this.size=this.options.size??(()=>{const e=new iT;return e.load({height:0,mode:"percent",width:0}),e})(),this._lifeCount=this.options.life.count??-1,this._immortal=this._lifeCount<=0,this._engine.dispatchEvent("emitterCreated",{container:n,data:{emitter:this}}),this.play()}externalPause(){this._paused=!0,this.pause()}externalPlay(){this._paused=!1,this.play()}getPosition(){if(this.options.domId){const e=this.container,t=document.getElementById(this.options.domId);if(t){const n=t.getBoundingClientRect();return{x:(n.x+n.width/2)*e.retina.pixelRatio,y:(n.y+n.height/2)*e.retina.pixelRatio}}}return this.position}getSize(){const e=this.container;if(this.options.domId){const t=document.getElementById(this.options.domId);if(t){const n=t.getBoundingClientRect();return{width:n.width*e.retina.pixelRatio,height:n.height*e.retina.pixelRatio}}}return t=this.size,n=e.canvas.size,JE(t,n);var t,n}pause(){this._paused||delete this._emitDelay}play(){if(!this._paused&&this.container.retina.reduceFactor&&(this._lifeCount>0||this._immortal||!this.options.life.count)&&(this._firstSpawn||this._currentSpawnDelay>=(this._spawnDelay??0))){if(void 0===this._emitDelay){const e=_w(this.options.rate.delay);this._emitDelay=1e3*e/this.container.retina.reduceFactor}(this._lifeCount>0||this._immortal)&&this._prepareToDie()}}resize(){const e=this._initialPosition;this.position=e&&WE(e,this.container.canvas.size,pw.origin)?e:this._calcPosition()}update(e){this._paused||(this._firstSpawn&&(this._firstSpawn=!1,this._currentSpawnDelay=this._spawnDelay??0,this._currentEmitDelay=this._emitDelay??0),this._startParticlesAdded||(this._startParticlesAdded=!0,this._emitParticles(this.options.startCount)),void 0!==this._duration&&(this._currentDuration+=e.value,this._currentDuration>=this._duration&&(this.pause(),void 0!==this._spawnDelay&&delete this._spawnDelay,this._immortal||this._lifeCount--,this._lifeCount>0||this._immortal?(this.position=this._calcPosition(),this._spawnDelay=1e3*_w(this.options.life.delay??0)/this.container.retina.reduceFactor):this._destroy(),this._currentDuration-=this._duration,delete this._duration)),void 0!==this._spawnDelay&&(this._currentSpawnDelay+=e.value,this._currentSpawnDelay>=this._spawnDelay&&(this._engine.dispatchEvent("emitterPlay",{container:this.container}),this.play(),this._currentSpawnDelay-=this._currentSpawnDelay,delete this._spawnDelay)),void 0!==this._emitDelay&&(this._currentEmitDelay+=e.value,this._currentEmitDelay>=this._emitDelay&&(this._emit(),this._currentEmitDelay-=this._emitDelay)))}}class aT{constructor(e,t){this.container=t,this._engine=e,this.array=[],this.emitters=[],this.interactivityEmitters={random:{count:1,enable:!1},value:[]},t.getEmitter=e=>void 0===e||iw(e)?this.array[e||0]:this.array.find((t=>t.name===e)),t.addEmitter=(e,t)=>this.addEmitter(e,t),t.removeEmitter=e=>{const n=t.getEmitter(e);n&&this.removeEmitter(n)},t.playEmitter=e=>{const n=t.getEmitter(e);n&&n.externalPlay()},t.pauseEmitter=e=>{const n=t.getEmitter(e);n&&n.externalPause()}}addEmitter(e,t){const n=new rT;n.load(e);const i=new sT(this._engine,this,this.container,n,t);return this.array.push(i),i}handleClickMode(e){const t=this.emitters,n=this.interactivityEmitters;if("emitter"!==e)return;let i;if(n&&aw(n.value))if(n.value.length>0&&n.random.enable){i=[];const e=[];for(let t=0;t<n.random.count;t++){const r=GE(n.value);e.includes(r)&&e.length<n.value.length?t--:(e.push(r),i.push(jE(n.value,r)))}}else i=n.value;else i=n?.value;const r=i??t,s=this.container.interactivity.mouse.clickPosition;KE(r,(e=>{this.addEmitter(e,s)}))}async init(){if(this.emitters=this.container.actualOptions.emitters,this.interactivityEmitters=this.container.actualOptions.interactivity.modes.emitters,this.emitters)if(aw(this.emitters))for(const e of this.emitters)this.addEmitter(e);else this.addEmitter(this.emitters)}pause(){for(const e of this.array)e.pause()}play(){for(const e of this.array)e.play()}removeEmitter(e){const t=this.array.indexOf(e);t>=0&&this.array.splice(t,1)}resize(){for(const e of this.array)e.resize()}stop(){this.array=[]}update(e){for(const t of this.array)t.update(e)}}const oT=new Map;class lT{constructor(e){this._engine=e}addShape(e,t){this.getShape(e)||oT.set(e,t)}getShape(e){return oT.get(e)}getSupportedShapes(){return oT.keys()}}function cT(e,t){return e+t*(gw()-.5)}class hT{randomPosition(e,t,n){if(n)return{x:cT(e.x,t.width),y:cT(e.y,t.height)};{const n=t.width/2,i=t.height/2,r=Math.floor(4*gw()),s=2*(gw()-.5);switch(r){case 0:return{x:e.x+s*n,y:e.y-i};case 1:return{x:e.x-n,y:e.y+s*i};case 2:return{x:e.x+s*n,y:e.y+i};default:return{x:e.x+n,y:e.y+s*i}}}}}class uT{constructor(e){this._engine=e,this.id="emitters"}getPlugin(e){return new aT(this._engine,e)}loadOptions(e,t){if(!this.needsPlugin(e)&&!this.needsPlugin(t))return;t?.emitters&&(e.emitters=KE(t.emitters,(e=>{const t=new rT;return t.load(e),t})));const n=t?.interactivity?.modes?.emitters;if(n)if(aw(n))e.interactivity.modes.emitters={random:{count:1,enable:!0},value:n.map((e=>{const t=new rT;return t.load(e),t}))};else{const t=n;if(void 0!==t.value)if(aw(t.value))e.interactivity.modes.emitters={random:{count:t.random.count??1,enable:t.random.enable??!1},value:t.value.map((e=>{const t=new rT;return t.load(e),t}))};else{const n=new rT;n.load(t.value),e.interactivity.modes.emitters={random:{count:t.random.count??1,enable:t.random.enable??!1},value:n}}else{(e.interactivity.modes.emitters={random:{count:1,enable:!1},value:new rT}).value.load(n)}}}needsPlugin(e){if(!e)return!1;const t=e.emitters;return aw(t)&&!!t.length||void 0!==t||!!e.interactivity?.events?.onClick?.mode&&HE("emitter",e.interactivity.events.onClick.mode)}}async function dT(e,t=!0){e.emitterShapeManager||(e.emitterShapeManager=new lT(e)),e.addEmitterShape||(e.addEmitterShape=(t,n)=>{e.emitterShapeManager?.addShape(t,n)});const n=new uT(e);await e.addPlugin(n,t),e.addEmitterShape("circle",new Kw),e.addEmitterShape("square",new hT)}class pT{constructor(e,t){this.position={x:e,y:t}}}class fT extends pT{constructor(e,t,n,i){super(e,t),this.size={height:i,width:n}}contains(e){const t=this.size.width,n=this.size.height,i=this.position;return e.x>=i.x&&e.x<=i.x+t&&e.y>=i.y&&e.y<=i.y+n}intersects(e){e instanceof mT&&e.intersects(this);const t=this.size.width,n=this.size.height,i=this.position,r=e.position,s=e instanceof fT?e.size:{width:0,height:0},a=s.width,o=s.height;return r.x<i.x+t&&r.x+a>i.x&&r.y<i.y+n&&r.y+o>i.y}}class mT extends pT{constructor(e,t,n){super(e,t),this.radius=n}contains(e){return Tw(e,this.position)<=this.radius}intersects(e){const t=this.position,n=e.position,i=Math.abs(n.x-t.x),r=Math.abs(n.y-t.y),s=this.radius;if(e instanceof mT){return s+e.radius>Math.sqrt(i**2+r**2)}if(e instanceof fT){const{width:t,height:n}=e.size;return Math.pow(i-t,2)+Math.pow(r-n,2)<=s**2||i<=s+t&&r<=s+n||i<=t||r<=n}return!1}}class gT{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing="ease-out-quad"}load(e){e&&(void 0!==e.distance&&(this.distance=e.distance),void 0!==e.duration&&(this.duration=e.duration),void 0!==e.easing&&(this.easing=e.easing),void 0!==e.factor&&(this.factor=e.factor),void 0!==e.speed&&(this.speed=e.speed),void 0!==e.maxSpeed&&(this.maxSpeed=e.maxSpeed))}}class vT extends gT{constructor(){super(),this.selectors=[]}get ids(){return KE(this.selectors,(e=>e.replace("#","")))}set ids(e){this.selectors=KE(e,(e=>`#${e}`))}load(e){super.load(e),e&&(void 0!==e.ids&&(this.ids=e.ids),void 0!==e.selectors&&(this.selectors=e.selectors))}}class yT extends gT{load(e){super.load(e),e&&(this.divs=KE(e.divs,(e=>{const t=new vT;return t.load(e),t})))}}class _T extends class{constructor(e){this.container=e,this.type="external"}}{constructor(e,t){super(t),this._clickRepulse=()=>{const e=this.container,t=e.actualOptions.interactivity.modes.repulse;if(!t)return;const n=e.repulse||{particles:[]};if(n.finish||(n.count||(n.count=0),n.count++,n.count===e.particles.count&&(n.finish=!0)),n.clicking){const i=e.retina.repulseModeDistance;if(!i||i<0)return;const r=Math.pow(i/6,3),s=e.interactivity.mouse.clickPosition;if(void 0===s)return;const a=new mT(s.x,s.y,r),o=e.particles.quadTree.query(a,(e=>this.isEnabled(e)));for(const e of o){const{dx:i,dy:a,distance:o}=ww(s,e.position),l=o**2,c=t.speed,h=-r*c/l;if(l<=r){n.particles.push(e);const t=pw.create(i,a);t.length=h,e.velocity.setTo(t)}}}else if(!1===n.clicking){for(const e of n.particles)e.velocity.setTo(e.initialVelocity);n.particles=[]}},this._hoverRepulse=()=>{const e=this.container,t=e.interactivity.mouse.position,n=e.retina.repulseModeDistance;!n||n<0||!t||this._processRepulse(t,n,new mT(t.x,t.y,n))},this._processRepulse=(e,t,n,i)=>{const r=this.container,s=r.particles.quadTree.query(n,(e=>this.isEnabled(e))),a=r.actualOptions.interactivity.modes.repulse;var o;if(a)for(const n of s){const{dx:r,dy:s,distance:l}=ww(n.position,e),c=(i?.speed??a.speed)*a.factor,h=vw((o=a.easing,mw.get(o)||(e=>e))(1-l/t)*c,0,a.maxSpeed),u=pw.create(0===l?c:r/l*h,0===l?c:s/l*h);n.position.addTo(u)}},this._singleSelectorRepulse=(e,t)=>{const n=this.container,i=n.actualOptions.interactivity.modes.repulse;if(!i)return;const r=document.querySelectorAll(e);r.length&&r.forEach((e=>{const r=e,s=n.retina.pixelRatio,a={x:(r.offsetLeft+r.offsetWidth/2)*s,y:(r.offsetTop+r.offsetHeight/2)*s},o=r.offsetWidth/2*s,l="circle"===t.type?new mT(a.x,a.y,o):new fT(r.offsetLeft*s,r.offsetTop*s,r.offsetWidth*s,r.offsetHeight*s),c=$E(i.divs,r);this._processRepulse(a,o,l,c)}))},this._engine=e,t.repulse||(t.repulse={particles:[]}),this.handleClickMode=e=>{const n=this.container.actualOptions.interactivity.modes.repulse;if(!n||"repulse"!==e)return;t.repulse||(t.repulse={particles:[]});const i=t.repulse;i.clicking=!0,i.count=0;for(const e of t.repulse.particles)this.isEnabled(e)&&e.velocity.setTo(e.initialVelocity);i.particles=[],i.finish=!1,setTimeout((()=>{t.destroyed||(i.clicking=!1)}),1e3*n.duration)}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.repulse;t&&(e.retina.repulseModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions,n=e.interactivity.status===cw,i=t.interactivity.events,r=i.onHover,s=r.enable,a=r.mode,o=i.onClick,l=o.enable,c=o.mode,h=i.onDiv;n&&s&&HE("repulse",a)?this._hoverRepulse():l&&HE("repulse",c)?this._clickRepulse():YE("repulse",h,((e,t)=>this._singleSelectorRepulse(e,t)))}isEnabled(e){const t=this.container,n=t.actualOptions,i=t.interactivity.mouse,r=(e?.interactivity??n.interactivity).events,s=r.onDiv,a=r.onHover,o=r.onClick,l=function(e,t){return!!QE(t,(t=>t.enable&&HE(e,t.mode)))}("repulse",s);if(!(l||a.enable&&i.position||o.enable&&i.clickPosition))return!1;const c=a.mode,h=o.mode;return HE("repulse",c)||HE("repulse",h)||l}loadModeOptions(e,...t){e.repulse||(e.repulse=new yT);for(const n of t)e.repulse.load(n?.repulse)}reset(){}}async function bT(e,t=!0){await e.addInteractor("externalRepulse",(t=>new _T(e,t)),t)}class xT{constructor(){this.enable=!1,this.minimumValue=0}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.minimumValue&&(this.minimumValue=e.minimumValue))}}class ST{constructor(){this.random=new xT,this.value=0}load(e){e&&(tw(e.random)?this.random.enable=e.random:this.random.load(e.random),void 0!==e.value&&(this.value=Sw(e.value,this.random.enable?this.random.minimumValue:void 0)))}}class ET extends ST{constructor(){super(),this.sync=!1}load(e){e&&(super.load(e),void 0!==e.sync&&(this.sync=e.sync))}}class wT extends ST{constructor(){super(),this.random.minimumValue=1e-4,this.sync=!1}load(e){e&&(super.load(e),void 0!==e.sync&&(this.sync=e.sync))}}class TT{constructor(){this.count=0,this.delay=new ET,this.duration=new wT}load(e){e&&(void 0!==e.count&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}class MT{constructor(e){this.container=e}init(e){const t=this.container,n=e.options.life;n&&(e.life={delay:t.retina.reduceFactor?_w(n.delay.value)*(n.delay.sync?1:gw())/t.retina.reduceFactor*1e3:0,delayTime:0,duration:t.retina.reduceFactor?_w(n.duration.value)*(n.duration.sync?1:gw())/t.retina.reduceFactor*1e3:0,time:0,count:n.count},e.life.duration<=0&&(e.life.duration=-1),e.life.count<=0&&(e.life.count=-1),e.life&&(e.spawning=e.life.delay>0))}isEnabled(e){return!e.destroyed}loadOptions(e,...t){e.life||(e.life=new TT);for(const n of t)e.life.load(n?.life)}update(e,t){if(!this.isEnabled(e)||!e.life)return;const n=e.life;let i=!1;if(e.spawning){if(n.delayTime+=t.value,!(n.delayTime>=e.life.delay))return;i=!0,e.spawning=!1,n.delayTime=0,n.time=0}if(-1===n.duration)return;if(e.spawning)return;if(i?n.time=0:n.time+=t.value,n.time<n.duration)return;if(n.time=0,e.life.count>0&&e.life.count--,0===e.life.count)return void e.destroy();const r=this.container.canvas.size,s=Sw(0,r.width),a=Sw(0,r.width);e.position.x=yw(s),e.position.y=yw(a),e.spawning=!0,n.delayTime=0,n.time=0,e.reset();const o=e.options.life;o&&(n.delay=1e3*_w(o.delay.value),n.duration=1e3*_w(o.duration.value))}}async function AT(e,t=!0){await e.addParticleUpdater("life",(e=>new MT(e)),t)}class PT{constructor(e){this.container=e,this.modes=["bounce","bounce-vertical","bounce-horizontal","bounceVertical","bounceHorizontal","split"]}update(e,t,n,i){if(!this.modes.includes(i))return;const r=this.container;let s=!1;for(const[,i]of r.plugins)if(void 0!==i.particleBounce&&(s=i.particleBounce(e,n,t)),s)break;if(s)return;const a=e.getPosition(),o=e.offset,l=e.getRadius(),c=qE(a,l),h=r.canvas.size;!function(e){if("bounce"!==e.outMode&&"bounce-horizontal"!==e.outMode&&"bounceHorizontal"!==e.outMode&&"split"!==e.outMode||"left"!==e.direction&&"right"!==e.direction)return;e.bounds.right<0&&"left"===e.direction?e.particle.position.x=e.size+e.offset.x:e.bounds.left>e.canvasSize.width&&"right"===e.direction&&(e.particle.position.x=e.canvasSize.width-e.size-e.offset.x);const t=e.particle.velocity.x;let n=!1;if("right"===e.direction&&e.bounds.right>=e.canvasSize.width&&t>0||"left"===e.direction&&e.bounds.left<=0&&t<0){const t=Ew(e.particle.options.bounce.horizontal);e.particle.velocity.x*=-t,n=!0}if(!n)return;const i=e.offset.x+e.size;e.bounds.right>=e.canvasSize.width&&"right"===e.direction?e.particle.position.x=e.canvasSize.width-i:e.bounds.left<=0&&"left"===e.direction&&(e.particle.position.x=i),"split"===e.outMode&&e.particle.destroy()}({particle:e,outMode:i,direction:t,bounds:c,canvasSize:h,offset:o,size:l}),function(e){if("bounce"!==e.outMode&&"bounce-vertical"!==e.outMode&&"bounceVertical"!==e.outMode&&"split"!==e.outMode||"bottom"!==e.direction&&"top"!==e.direction)return;e.bounds.bottom<0&&"top"===e.direction?e.particle.position.y=e.size+e.offset.y:e.bounds.top>e.canvasSize.height&&"bottom"===e.direction&&(e.particle.position.y=e.canvasSize.height-e.size-e.offset.y);const t=e.particle.velocity.y;let n=!1;if("bottom"===e.direction&&e.bounds.bottom>=e.canvasSize.height&&t>0||"top"===e.direction&&e.bounds.top<=0&&t<0){const t=Ew(e.particle.options.bounce.vertical);e.particle.velocity.y*=-t,n=!0}if(!n)return;const i=e.offset.y+e.size;e.bounds.bottom>=e.canvasSize.height&&"bottom"===e.direction?e.particle.position.y=e.canvasSize.height-i:e.bounds.top<=0&&"top"===e.direction&&(e.particle.position.y=i),"split"===e.outMode&&e.particle.destroy()}({particle:e,outMode:i,direction:t,bounds:c,canvasSize:h,offset:o,size:l})}}class CT{constructor(e){this.container=e,this.modes=["destroy"]}update(e,t,n,i){if(!this.modes.includes(i))return;const r=this.container;switch(e.outType){case"normal":case"outside":if(WE(e.position,r.canvas.size,pw.origin,e.getRadius(),t))return;break;case"inside":{const{dx:t,dy:n}=ww(e.position,e.moveCenter),{x:i,y:r}=e.velocity;if(i<0&&t>e.moveCenter.radius||r<0&&n>e.moveCenter.radius||i>=0&&t<-e.moveCenter.radius||r>=0&&n<-e.moveCenter.radius)return;break}}r.particles.remove(e,void 0,!0)}}class IT{constructor(e){this.container=e,this.modes=["none"]}update(e,t,n,i){if(!this.modes.includes(i))return;if(e.options.move.distance.horizontal&&("left"===t||"right"===t)||e.options.move.distance.vertical&&("top"===t||"bottom"===t))return;const r=e.options.move.gravity,s=this.container,a=s.canvas.size,o=e.getRadius();if(r.enable){const n=e.position;(!r.inverse&&n.y>a.height+o&&"bottom"===t||r.inverse&&n.y<-o&&"top"===t)&&s.particles.remove(e)}else{if(e.velocity.y>0&&e.position.y<=a.height+o||e.velocity.y<0&&e.position.y>=-o||e.velocity.x>0&&e.position.x<=a.width+o||e.velocity.x<0&&e.position.x>=-o)return;WE(e.position,s.canvas.size,pw.origin,o,t)||s.particles.remove(e)}}}class LT{constructor(e){this.container=e,this.modes=["out"]}update(e,t,n,i){if(!this.modes.includes(i))return;const r=this.container;switch(e.outType){case"inside":{const{x:t,y:n}=e.velocity,i=pw.origin;i.length=e.moveCenter.radius,i.angle=e.velocity.angle+Math.PI,i.addTo(pw.create(e.moveCenter));const{dx:s,dy:a}=ww(e.position,i);if(t<=0&&s>=0||n<=0&&a>=0||t>=0&&s<=0||n>=0&&a<=0)return;e.position.x=Math.floor(yw({min:0,max:r.canvas.size.width})),e.position.y=Math.floor(yw({min:0,max:r.canvas.size.height}));const{dx:o,dy:l}=ww(e.position,e.moveCenter);e.direction=Math.atan2(-l,-o),e.velocity.angle=e.direction;break}default:if(WE(e.position,r.canvas.size,pw.origin,e.getRadius(),t))return;switch(e.outType){case"outside":{e.position.x=Math.floor(yw({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.x,e.position.y=Math.floor(yw({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.y;const{dx:t,dy:n}=ww(e.position,e.moveCenter);e.moveCenter.radius&&(e.direction=Math.atan2(n,t),e.velocity.angle=e.direction);break}case"normal":{const n=e.options.move.warp,i=r.canvas.size,s={bottom:i.height+e.getRadius()+e.offset.y,left:-e.getRadius()-e.offset.x,right:i.width+e.getRadius()+e.offset.x,top:-e.getRadius()-e.offset.y},a=e.getRadius(),o=qE(e.position,a);"right"===t&&o.left>i.width+e.offset.x?(e.position.x=s.left,e.initialPosition.x=e.position.x,n||(e.position.y=gw()*i.height,e.initialPosition.y=e.position.y)):"left"===t&&o.right<-e.offset.x&&(e.position.x=s.right,e.initialPosition.x=e.position.x,n||(e.position.y=gw()*i.height,e.initialPosition.y=e.position.y)),"bottom"===t&&o.top>i.height+e.offset.y?(n||(e.position.x=gw()*i.width,e.initialPosition.x=e.position.x),e.position.y=s.top,e.initialPosition.y=e.position.y):"top"===t&&o.bottom<-e.offset.y&&(n||(e.position.x=gw()*i.width,e.initialPosition.x=e.position.x),e.position.y=s.bottom,e.initialPosition.y=e.position.y);break}}}}}class DT{constructor(e){this.container=e,this._updateOutMode=(e,t,n,i)=>{for(const r of this.updaters)r.update(e,i,t,n)},this.updaters=[new PT(e),new CT(e),new LT(e),new IT(e)]}init(){}isEnabled(e){return!e.destroyed&&!e.spawning}update(e,t){const n=e.options.move.outModes;this._updateOutMode(e,t,n.bottom??n.default,"bottom"),this._updateOutMode(e,t,n.left??n.default,"left"),this._updateOutMode(e,t,n.right??n.default,"right"),this._updateOutMode(e,t,n.top??n.default,"top")}}async function RT(e,t=!0){await e.addParticleUpdater("outModes",(e=>new DT(e)),t)}class kT{constructor(){this.enable=!1,this.value=0}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.value&&(this.value=Sw(e.value)))}}class OT{constructor(){this.darken=new kT,this.enable=!1,this.enlighten=new kT,this.mode="vertical",this.speed=25}load(e){e&&(void 0!==e.backColor&&(this.backColor=Jw.create(this.backColor,e.backColor)),this.darken.load(e.darken),void 0!==e.enable&&(this.enable=e.enable),this.enlighten.load(e.enlighten),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.speed&&(this.speed=Sw(e.speed)))}}class FT{getTransformValues(e){const t=e.roll?.enable&&e.roll,n=t&&t.horizontal,i=t&&t.vertical;return{a:n?Math.cos(t.angle):void 0,d:i?Math.sin(t.angle):void 0}}init(e){!function(e){const t=e.options.roll;if(t?.enable)if(e.roll={enable:t.enable,horizontal:"horizontal"===t.mode||"both"===t.mode,vertical:"vertical"===t.mode||"both"===t.mode,angle:gw()*Math.PI*2,speed:_w(t.speed)/360},t.backColor)e.backColor=zw(t.backColor);else if(t.darken.enable&&t.enlighten.enable){const n=gw()>=.5?"darken":"enlighten";e.roll.alter={type:n,value:_w("darken"===n?t.darken.value:t.enlighten.value)}}else t.darken.enable?e.roll.alter={type:"darken",value:_w(t.darken.value)}:t.enlighten.enable&&(e.roll.alter={type:"enlighten",value:_w(t.enlighten.value)});else e.roll={enable:!1,horizontal:!1,vertical:!1,angle:0,speed:0}}(e)}isEnabled(e){const t=e.options.roll;return!e.destroyed&&!e.spawning&&!!t?.enable}loadOptions(e,...t){e.roll||(e.roll=new OT);for(const n of t)e.roll.load(n?.roll)}update(e,t){this.isEnabled(e)&&function(e,t){const n=e.options.roll,i=e.roll;if(!i||!n?.enable)return;const r=i.speed*t.factor,s=2*Math.PI;i.angle+=r,i.angle>s&&(i.angle-=s)}(e,t)}}async function NT(e,t=!0){await e.addParticleUpdater("roll",(()=>new FT),t)}class BT{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.speed&&(this.speed=Sw(e.speed)),void 0!==e.decay&&(this.decay=Sw(e.decay)),void 0!==e.sync&&(this.sync=e.sync))}}class zT extends ST{constructor(){super(),this.animation=new BT,this.direction="clockwise",this.path=!1,this.value=0}load(e){e&&(super.load(e),void 0!==e.direction&&(this.direction=e.direction),this.animation.load(e.animation),void 0!==e.path&&(this.path=e.path))}}class UT{constructor(e){this.container=e}init(e){const t=e.options.rotate;if(!t)return;e.rotate={enable:t.animation.enable,value:_w(t.value)*Math.PI/180},e.pathRotation=t.path;let n=t.direction;if("random"===n){n=Math.floor(2*gw())>0?"counter-clockwise":"clockwise"}switch(n){case"counter-clockwise":case"counterClockwise":e.rotate.status="decreasing";break;case"clockwise":e.rotate.status="increasing"}const i=t.animation;i.enable&&(e.rotate.decay=1-_w(i.decay),e.rotate.velocity=_w(i.speed)/360*this.container.retina.reduceFactor,i.sync||(e.rotate.velocity*=gw())),e.rotation=e.rotate.value}isEnabled(e){const t=e.options.rotate;return!!t&&(!e.destroyed&&!e.spawning&&t.animation.enable&&!t.path)}loadOptions(e,...t){e.rotate||(e.rotate=new zT);for(const n of t)e.rotate.load(n?.rotate)}update(e,t){this.isEnabled(e)&&(!function(e,t){const n=e.rotate,i=e.options.rotate;if(!n||!i)return;const r=i.animation,s=(n.velocity??0)*t.factor,a=2*Math.PI,o=n.decay??1;r.enable&&("increasing"===n.status?(n.value+=s,n.value>a&&(n.value-=a)):(n.value-=s,n.value<0&&(n.value+=a)),n.velocity&&1!==o&&(n.velocity*=o))}(e,t),e.rotation=e.rotate?.value??0)}}async function VT(e,t=!0){await e.addParticleUpdater("rotate",(e=>new UT(e)),t)}class HT{init(e){const t=e.container,n=e.options.size.animation;n.enable&&(e.size.velocity=(e.retina.sizeAnimationSpeed??t.retina.sizeAnimationSpeed)/100*t.retina.reduceFactor,n.sync||(e.size.velocity*=gw()))}isEnabled(e){return!e.destroyed&&!e.spawning&&e.size.enable&&((e.size.maxLoops??0)<=0||(e.size.maxLoops??0)>0&&(e.size.loops??0)<(e.size.maxLoops??0))}reset(e){e.size.loops=0}update(e,t){this.isEnabled(e)&&function(e,t){const n=e.size;if(e.destroyed||!n||!n.enable||(n.maxLoops??0)>0&&(n.loops??0)>(n.maxLoops??0))return;const i=(n.velocity??0)*t.factor,r=n.min,s=n.max,a=n.decay??1;if(n.time||(n.time=0),(n.delayTime??0)>0&&n.time<(n.delayTime??0)&&(n.time+=t.value),!((n.delayTime??0)>0&&n.time<(n.delayTime??0))){switch(n.status){case"increasing":n.value>=s?(n.status="decreasing",n.loops||(n.loops=0),n.loops++):n.value+=i;break;case"decreasing":n.value<=r?(n.status="increasing",n.loops||(n.loops=0),n.loops++):n.value-=i}n.velocity&&1!==a&&(n.velocity*=a),function(e,t,n,i){switch(e.options.size.animation.destroy){case"max":t>=i&&e.destroy();break;case"min":t<=n&&e.destroy()}}(e,n.value,r,s),e.destroyed||(n.value=vw(n.value,r,s))}}(e,t)}}async function GT(e,t=!0){await e.addParticleUpdater("size",(()=>new HT),t)}const jT=Math.sqrt(2);class WT{draw(e,t,n){const i=n/jT,r=2*i;e.rect(-i,-i,r,r)}getSidesCount(){return 4}}async function qT(e,t=!0){await e.addShape(["edge","square"],new WT,t)}class XT{constructor(){this.angle=50,this.move=10}load(e){e&&(void 0!==e.angle&&(this.angle=Sw(e.angle)),void 0!==e.move&&(this.move=Sw(e.move)))}}class YT{constructor(){this.distance=5,this.enable=!1,this.speed=new XT}load(e){if(e&&(void 0!==e.distance&&(this.distance=Sw(e.distance)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.speed))if(iw(e.speed))this.speed.load({angle:e.speed});else{const t=e.speed;void 0!==t.min?this.speed.load({angle:t}):this.speed.load(e.speed)}}}class $T{constructor(e){this.container=e}init(e){const t=e.options.wobble;e.wobble=t?.enable?{angle:gw()*Math.PI*2,angleSpeed:_w(t.speed.angle)/360,moveSpeed:_w(t.speed.move)/10}:{angle:0,angleSpeed:0,moveSpeed:0},e.retina.wobbleDistance=_w(t?.distance??0)*this.container.retina.pixelRatio}isEnabled(e){return!e.destroyed&&!e.spawning&&!!e.options.wobble?.enable}loadOptions(e,...t){e.wobble||(e.wobble=new YT);for(const n of t)e.wobble.load(n?.wobble)}update(e,t){this.isEnabled(e)&&function(e,t){const{wobble:n}=e.options,{wobble:i}=e;if(!n?.enable||!i)return;const r=i.angleSpeed*t.factor,s=i.moveSpeed*t.factor*((e.retina.wobbleDistance??0)*t.factor)/(1e3/60),a=2*Math.PI,{position:o}=e;i.angle+=r,i.angle>a&&(i.angle-=a),o.x+=s*Math.cos(i.angle),o.y+=s*Math.abs(Math.sin(i.angle))}(e,t)}}async function KT(e,t=!0){await e.addParticleUpdater("wobble",(e=>new $T(e)),t)}function ZT(e,t){e.clearRect(0,0,t.width,t.height)}function QT(e,t,n){const i=t[n];void 0!==i&&(e[n]=(e[n]??1)*i)}class JT{constructor(e){this.container=e,this._applyPostDrawUpdaters=e=>{for(const t of this._postDrawUpdaters)t.afterDraw&&t.afterDraw(e)},this._applyPreDrawUpdaters=(e,t,n,i,r,s)=>{for(const a of this._preDrawUpdaters){if(a.getColorStyles){const{fill:s,stroke:o}=a.getColorStyles(t,e,n,i);s&&(r.fill=s),o&&(r.stroke=o)}if(a.getTransformValues){const e=a.getTransformValues(t);for(const t in e)QT(s,e,t)}a.beforeDraw&&a.beforeDraw(t)}},this._applyResizePlugins=()=>{for(const e of this._resizePlugins)e.resize&&e.resize()},this._getPluginParticleColors=e=>{let t,n;for(const i of this._colorPlugins)if(!t&&i.particleFillColor&&(t=zw(i.particleFillColor(e))),!n&&i.particleStrokeColor&&(n=zw(i.particleStrokeColor(e))),t&&n)break;return[t,n]},this._initCover=()=>{const e=this.container.actualOptions.backgroundMask.cover,t=Nw(e.color);if(t){const n={...t,a:e.opacity};this._coverColorStyle=Gw(n,n.a)}},this._initStyle=()=>{const e=this.element,t=this.container.actualOptions;if(e){this._fullScreen?(this._originalStyle=XE({},e.style),this._setFullScreenStyle()):this._resetOriginalStyle();for(const n in t.style){if(!n||!t.style)continue;const i=t.style[n];i&&e.style.setProperty(n,i,"important")}}},this._initTrail=async()=>{const e=this.container.actualOptions,t=e.particles.move.trail,n=t.fill;if(t.enable)if(n.color){const t=Nw(n.color);if(!t)return;const i=e.particles.move.trail;this._trailFill={color:{...t},opacity:1/i.length}}else await new Promise(((e,i)=>{if(!n.image)return;const r=document.createElement("img");r.addEventListener("load",(()=>{this._trailFill={image:r,opacity:1/t.length},e()})),r.addEventListener("error",(e=>{i(e.error)})),r.src=n.image}))},this._paintBase=e=>{this.draw((t=>function(e,t,n){e.fillStyle=n??"rgba(0,0,0,0)",e.fillRect(0,0,t.width,t.height)}(t,this.size,e)))},this._paintImage=(e,t)=>{this.draw((n=>function(e,t,n,i){n&&(e.globalAlpha=i,e.drawImage(n,0,0,t.width,t.height),e.globalAlpha=1)}(n,this.size,e,t)))},this._repairStyle=()=>{const e=this.element;e&&(this._safeMutationObserver((e=>e.disconnect())),this._initStyle(),this.initBackground(),this._safeMutationObserver((t=>t.observe(e,{attributes:!0}))))},this._resetOriginalStyle=()=>{const e=this.element,t=this._originalStyle;if(!e||!t)return;const n=e.style;n.position=t.position,n.zIndex=t.zIndex,n.top=t.top,n.left=t.left,n.width=t.width,n.height=t.height},this._safeMutationObserver=e=>{this._mutationObserver&&e(this._mutationObserver)},this._setFullScreenStyle=()=>{const e=this.element;if(!e)return;const t="important",n=e.style;n.setProperty("position","fixed",t),n.setProperty("z-index",this.container.actualOptions.fullScreen.zIndex.toString(10),t),n.setProperty("top","0",t),n.setProperty("left","0",t),n.setProperty("width","100%",t),n.setProperty("height","100%",t)},this.size={height:0,width:0},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const e=this.container.actualOptions,t=e.particles.move.trail,n=this._trailFill;e.backgroundMask.enable?this.paint():t.enable&&t.length>0&&n?n.color?this._paintBase(Gw(n.color,n.opacity)):n.image&&this._paintImage(n.image,n.opacity):this.draw((e=>{ZT(e,this.size)}))}destroy(){if(this.stop(),this._generated){const e=this.element;e&&e.remove()}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(e){const t=this._context;if(t)return e(t)}drawParticle(e,t){if(e.spawning||e.destroyed)return;const n=e.getRadius();if(n<=0)return;const i=e.getFillColor(),r=e.getStrokeColor()??i;let[s,a]=this._getPluginParticleColors(e);s||(s=i),a||(a=r),(s||a)&&this.draw((i=>{const r=this.container,o=r.actualOptions,l=e.options.zIndex,c=(1-e.zIndexFactor)**l.opacityRate,h=e.bubble.opacity??e.opacity?.value??1,u=h*c,d=(e.strokeOpacity??h)*c,p={},f={fill:s?jw(s,u):void 0};f.stroke=a?jw(a,d):f.fill,this._applyPreDrawUpdaters(i,e,n,u,f,p),function(e){const{container:t,context:n,particle:i,delta:r,colorStyles:s,backgroundMask:a,composite:o,radius:l,opacity:c,shadow:h,transform:u}=e,d=i.getPosition(),p=i.rotation+(i.pathRotation?i.velocity.angle:0),f=Math.sin(p),m=Math.cos(p),g={a:m*(u.a??1),b:f*(u.b??1),c:-f*(u.c??1),d:m*(u.d??1)};n.setTransform(g.a,g.b,g.c,g.d,d.x,d.y),n.beginPath(),a&&(n.globalCompositeOperation=o);const v=i.shadowColor;h.enable&&v&&(n.shadowBlur=h.blur,n.shadowColor=Gw(v),n.shadowOffsetX=h.offset.x,n.shadowOffsetY=h.offset.y),s.fill&&(n.fillStyle=s.fill);const y=i.strokeWidth??0;n.lineWidth=y,s.stroke&&(n.strokeStyle=s.stroke),function(e,t,n,i,r,s){if(!n.shape)return;const a=e.drawers.get(n.shape);a&&a.draw(t,n,i,r,s,e.retina.pixelRatio)}(t,n,i,l,c,r),y>0&&n.stroke(),i.close&&n.closePath(),i.fill&&n.fill(),function(e,t,n,i,r,s){if(!n.shape)return;const a=e.drawers.get(n.shape);a&&a.afterEffect&&a.afterEffect(t,n,i,r,s,e.retina.pixelRatio)}(t,n,i,l,c,r),n.globalCompositeOperation="source-over",n.setTransform(1,0,0,1,0,0)}({container:r,context:i,particle:e,delta:t,colorStyles:f,backgroundMask:o.backgroundMask.enable,composite:o.backgroundMask.composite,radius:n*(1-e.zIndexFactor)**l.sizeRate,opacity:u,shadow:e.options.shadow,transform:p}),this._applyPostDrawUpdaters(e)}))}drawParticlePlugin(e,t,n){this.draw((i=>function(e,t,n,i){t.drawParticle&&t.drawParticle(e,n,i)}(i,e,t,n)))}drawPlugin(e,t){this.draw((n=>function(e,t,n){t.draw&&t.draw(e,n)}(n,e,t)))}async init(){this._safeMutationObserver((e=>e.disconnect())),this._mutationObserver=function(e){if(!UE()&&"undefined"!=typeof MutationObserver)return new MutationObserver(e)}((e=>{for(const t of e)"attributes"===t.type&&"style"===t.attributeName&&this._repairStyle()})),this.resize(),this._initStyle(),this._initCover();try{await this._initTrail()}catch(e){zE().error(e)}this.initBackground(),this._safeMutationObserver((e=>{this.element&&e.observe(this.element,{attributes:!0})})),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const e=this.container.actualOptions.background,t=this.element;if(!t)return;const n=t.style;if(n){if(e.color){const t=Nw(e.color);n.backgroundColor=t?Gw(t,e.opacity):""}else n.backgroundColor="";n.backgroundImage=e.image||"",n.backgroundPosition=e.position||"",n.backgroundRepeat=e.repeat||"",n.backgroundSize=e.size||""}}initPlugins(){this._resizePlugins=[];for(const[,e]of this.container.plugins)e.resize&&this._resizePlugins.push(e),(e.particleFillColor||e.particleStrokeColor)&&this._colorPlugins.push(e)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const e of this.container.particles.updaters)e.afterDraw&&this._postDrawUpdaters.push(e),(e.getColorStyles||e.getTransformValues||e.beforeDraw)&&this._preDrawUpdaters.push(e)}loadCanvas(e){this._generated&&this.element&&this.element.remove(),this._generated=e.dataset&&ow in e.dataset?"true"===e.dataset.generated:this._generated,this.element=e,this.element.ariaHidden="true",this._originalStyle=XE({},this.element.style),this.size.height=e.offsetHeight,this.size.width=e.offsetWidth,this._context=this.element.getContext("2d"),this._safeMutationObserver((e=>{this.element&&e.observe(this.element,{attributes:!0})})),this.container.retina.init(),this.initBackground()}paint(){const e=this.container.actualOptions;this.draw((t=>{e.backgroundMask.enable&&e.backgroundMask.cover?(ZT(t,this.size),this._paintBase(this._coverColorStyle)):this._paintBase()}))}resize(){if(!this.element)return!1;const e=this.container,t=e.retina.pixelRatio,n=e.canvas.size,i=this.element.offsetWidth*t,r=this.element.offsetHeight*t;if(r===n.height&&i===n.width&&r===this.element.height&&i===this.element.width)return!1;const s={...n};return this.element.width=n.width=this.element.offsetWidth*t,this.element.height=n.height=this.element.offsetHeight*t,this.container.started&&(this.resizeFactor={width:n.width/s.width,height:n.height/s.height}),!0}stop(){this._safeMutationObserver((e=>e.disconnect())),this._mutationObserver=void 0,this.draw((e=>ZT(e,this.size)))}async windowResize(){if(!this.element||!this.resize())return;const e=this.container,t=e.updateActualOptions();e.particles.setDensity(),this._applyResizePlugins(),t&&await e.refresh()}}function eM(e,t,n,i,r){if(i){let i={passive:!0};tw(r)?i.capture=r:void 0!==r&&(i=r),e.addEventListener(t,n,i)}else{const i=r;e.removeEventListener(t,n,i)}}class tM{constructor(e){this.container=e,this._doMouseTouchClick=e=>{const t=this.container,n=t.actualOptions;if(this._canPush){const e=t.interactivity.mouse,i=e.position;if(!i)return;e.clickPosition={...i},e.clickTime=(new Date).getTime();KE(n.interactivity.events.onClick.mode,(e=>this.container.handleClickMode(e)))}"touchend"===e.type&&setTimeout((()=>this._mouseTouchFinish()),500)},this._handleThemeChange=e=>{const t=e,n=this.container,i=n.options,r=i.defaultThemes,s=t.matches?r.dark:r.light,a=i.themes.find((e=>e.name===s));a&&a.default.auto&&n.loadTheme(s)},this._handleVisibilityChange=()=>{const e=this.container,t=e.actualOptions;this._mouseTouchFinish(),t.pauseOnBlur&&(document&&document.hidden?(e.pageHidden=!0,e.pause()):(e.pageHidden=!1,e.getAnimationStatus()?e.play(!0):e.draw(!0)))},this._handleWindowResize=async()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout),this._resizeTimeout=setTimeout((async()=>{const e=this.container.canvas;e&&await e.windowResize()}),1e3*this.container.actualOptions.interactivity.events.resize.delay)},this._manageInteractivityListeners=(e,t)=>{const n=this._handlers,i=this.container,r=i.actualOptions,s=i.interactivity.element;if(!s)return;const a=s,o=i.canvas.element;o&&(o.style.pointerEvents=a===o?"initial":"none"),(r.interactivity.events.onHover.enable||r.interactivity.events.onClick.enable)&&(eM(s,cw,n.mouseMove,t),eM(s,"touchstart",n.touchStart,t),eM(s,"touchmove",n.touchMove,t),r.interactivity.events.onClick.enable?(eM(s,hw,n.touchEndClick,t),eM(s,"pointerup",n.mouseUp,t),eM(s,"pointerdown",n.mouseDown,t)):eM(s,hw,n.touchEnd,t),eM(s,e,n.mouseLeave,t),eM(s,"touchcancel",n.touchCancel,t))},this._manageListeners=e=>{const t=this._handlers,n=this.container,i=n.actualOptions.interactivity.detectsOn,r=n.canvas.element;let s=lw;"window"===i?(n.interactivity.element=window,s="pointerout"):n.interactivity.element="parent"===i&&r?r.parentElement??r.parentNode:r,this._manageMediaMatch(e),this._manageResize(e),this._manageInteractivityListeners(s,e),document&&eM(document,"visibilitychange",t.visibilityChange,e,!1)},this._manageMediaMatch=e=>{const t=this._handlers,n=VE("(prefers-color-scheme: dark)");n&&(void 0===n.addEventListener?void 0!==n.addListener&&(e?n.addListener(t.oldThemeChange):n.removeListener(t.oldThemeChange)):eM(n,"change",t.themeChange,e))},this._manageResize=e=>{const t=this._handlers,n=this.container;if(!n.actualOptions.interactivity.events.resize)return;if("undefined"==typeof ResizeObserver)return void eM(window,"resize",t.resize,e);const i=n.canvas.element;this._resizeObserver&&!e?(i&&this._resizeObserver.unobserve(i),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&e&&i&&(this._resizeObserver=new ResizeObserver((async e=>{e.find((e=>e.target===i))&&await this._handleWindowResize()})),this._resizeObserver.observe(i))},this._mouseDown=()=>{const{interactivity:e}=this.container;if(!e)return;const{mouse:t}=e;t.clicking=!0,t.downPosition=t.position},this._mouseTouchClick=e=>{const t=this.container,n=t.actualOptions,{mouse:i}=t.interactivity;i.inside=!0;let r=!1;const s=i.position;if(s&&n.interactivity.events.onClick.enable){for(const[,e]of t.plugins)if(e.clickPositionValid&&(r=e.clickPositionValid(s),r))break;r||this._doMouseTouchClick(e),i.clicking=!1}},this._mouseTouchFinish=()=>{const e=this.container.interactivity;if(!e)return;const t=e.mouse;delete t.position,delete t.clickPosition,delete t.downPosition,e.status=lw,t.inside=!1,t.clicking=!1},this._mouseTouchMove=e=>{const t=this.container,n=t.actualOptions,i=t.interactivity,r=t.canvas.element;if(!i||!i.element)return;let s;if(i.mouse.inside=!0,e.type.startsWith("pointer")){this._canPush=!0;const t=e;if(i.element===window){if(r){const e=r.getBoundingClientRect();s={x:t.clientX-e.left,y:t.clientY-e.top}}}else if("parent"===n.interactivity.detectsOn){const e=t.target,n=t.currentTarget;if(e&&n&&r){const i=e.getBoundingClientRect(),a=n.getBoundingClientRect(),o=r.getBoundingClientRect();s={x:t.offsetX+2*i.left-(a.left+o.left),y:t.offsetY+2*i.top-(a.top+o.top)}}else s={x:t.offsetX??t.clientX,y:t.offsetY??t.clientY}}else t.target===r&&(s={x:t.offsetX??t.clientX,y:t.offsetY??t.clientY})}else if(this._canPush="touchmove"!==e.type,r){const t=e,n=t.touches[t.touches.length-1],i=r.getBoundingClientRect();s={x:n.clientX-(i.left??0),y:n.clientY-(i.top??0)}}const a=t.retina.pixelRatio;s&&(s.x*=a,s.y*=a),i.mouse.position=s,i.status=cw},this._touchEnd=e=>{const t=e,n=Array.from(t.changedTouches);for(const e of n)this._touches.delete(e.identifier);this._mouseTouchFinish()},this._touchEndClick=e=>{const t=e,n=Array.from(t.changedTouches);for(const e of n)this._touches.delete(e.identifier);this._mouseTouchClick(e)},this._touchStart=e=>{const t=e,n=Array.from(t.changedTouches);for(const e of n)this._touches.set(e.identifier,performance.now());this._mouseTouchMove(e)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:e=>this._mouseTouchMove(e),mouseUp:e=>this._mouseTouchClick(e),touchStart:e=>this._touchStart(e),touchMove:e=>this._mouseTouchMove(e),touchEnd:e=>this._touchEnd(e),touchCancel:e=>this._touchEnd(e),touchEndClick:e=>this._touchEndClick(e),visibilityChange:()=>this._handleVisibilityChange(),themeChange:e=>this._handleThemeChange(e),oldThemeChange:e=>this._handleThemeChange(e),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}class nM{constructor(){this.color=new Jw,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(e){e&&(void 0!==e.color&&(this.color=Jw.create(this.color,e.color)),void 0!==e.image&&(this.image=e.image),void 0!==e.position&&(this.position=e.position),void 0!==e.repeat&&(this.repeat=e.repeat),void 0!==e.size&&(this.size=e.size),void 0!==e.opacity&&(this.opacity=e.opacity))}}class iM{constructor(){this.color=new Jw,this.color.value="#fff",this.opacity=1}load(e){e&&(void 0!==e.color&&(this.color=Jw.create(this.color,e.color)),void 0!==e.opacity&&(this.opacity=e.opacity))}}class rM{constructor(){this.composite="destination-out",this.cover=new iM,this.enable=!1}load(e){if(e){if(void 0!==e.composite&&(this.composite=e.composite),void 0!==e.cover){const t=e.cover,n=nw(e.cover)?{color:e.cover}:e.cover;this.cover.load(void 0!==t.color?t:{color:n})}void 0!==e.enable&&(this.enable=e.enable)}}}class sM{constructor(){this.enable=!0,this.zIndex=0}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.zIndex&&(this.zIndex=e.zIndex))}}class aM{constructor(){this.enable=!1,this.mode=[]}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.mode&&(this.mode=e.mode))}}class oM{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type="circle"}get el(){return this.elementId}set el(e){this.elementId=e}get elementId(){return this.ids}set elementId(e){this.ids=e}get ids(){return KE(this.selectors,(e=>e.replace("#","")))}set ids(e){this.selectors=KE(e,(e=>`#${e}`))}load(e){if(!e)return;const t=e.ids??e.elementId??e.el;void 0!==t&&(this.ids=t),void 0!==e.selectors&&(this.selectors=e.selectors),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.type&&(this.type=e.type)}}class lM{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.force&&(this.force=e.force),void 0!==e.smooth&&(this.smooth=e.smooth))}}class cM{constructor(){this.enable=!1,this.mode=[],this.parallax=new lM}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.mode&&(this.mode=e.mode),this.parallax.load(e.parallax))}}class hM{constructor(){this.delay=.5,this.enable=!0}load(e){void 0!==e&&(void 0!==e.delay&&(this.delay=e.delay),void 0!==e.enable&&(this.enable=e.enable))}}class uM{constructor(){this.onClick=new aM,this.onDiv=new oM,this.onHover=new cM,this.resize=new hM}get onclick(){return this.onClick}set onclick(e){this.onClick=e}get ondiv(){return this.onDiv}set ondiv(e){this.onDiv=e}get onhover(){return this.onHover}set onhover(e){this.onHover=e}load(e){if(!e)return;this.onClick.load(e.onClick??e.onclick);const t=e.onDiv??e.ondiv;void 0!==t&&(this.onDiv=KE(t,(e=>{const t=new oM;return t.load(e),t}))),this.onHover.load(e.onHover??e.onhover),tw(e.resize)?this.resize.enable=e.resize:this.resize.load(e.resize)}}class dM{constructor(e,t){this._engine=e,this._container=t}load(e){if(!e)return;if(!this._container)return;const t=this._engine.plugins.interactors.get(this._container);if(t)for(const n of t)n.loadModeOptions&&n.loadModeOptions(this,e)}}class pM{constructor(e,t){this.detectsOn="window",this.events=new uM,this.modes=new dM(e,t)}get detect_on(){return this.detectsOn}set detect_on(e){this.detectsOn=e}load(e){if(!e)return;const t=e.detectsOn??e.detect_on;void 0!==t&&(this.detectsOn=t),this.events.load(e.events),this.modes.load(e.modes)}}class fM{load(e){e&&(e.position&&(this.position={x:e.position.x??50,y:e.position.y??50,mode:e.position.mode??"percent"}),e.options&&(this.options=XE({},e.options)))}}class mM{constructor(){this.maxWidth=1/0,this.options={},this.mode="canvas"}load(e){e&&(void 0!==e.maxWidth&&(this.maxWidth=e.maxWidth),void 0!==e.mode&&("screen"===e.mode?this.mode="screen":this.mode="canvas"),void 0!==e.options&&(this.options=XE({},e.options)))}}class gM{constructor(){this.auto=!1,this.mode="any",this.value=!1}load(e){e&&(void 0!==e.auto&&(this.auto=e.auto),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.value&&(this.value=e.value))}}class vM{constructor(){this.name="",this.default=new gM}load(e){e&&(void 0!==e.name&&(this.name=e.name),this.default.load(e.default),void 0!==e.options&&(this.options=XE({},e.options)))}}class yM{constructor(){this.speed=2}load(e){e&&void 0!==e.speed&&(this.speed=e.speed)}}class _M{constructor(){this.enable=!0,this.retries=0}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.retries&&(this.retries=e.retries))}}class bM extends ST{constructor(){super(),this.random.minimumValue=.1,this.value=1}}class xM{constructor(){this.horizontal=new bM,this.vertical=new bM}load(e){e&&(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}}class SM{constructor(){this.absorb=new yM,this.bounce=new xM,this.enable=!1,this.maxSpeed=50,this.mode="bounce",this.overlap=new _M}load(e){e&&(this.absorb.load(e.absorb),this.bounce.load(e.bounce),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.maxSpeed&&(this.maxSpeed=Sw(e.maxSpeed)),void 0!==e.mode&&(this.mode=e.mode),this.overlap.load(e.overlap))}}class EM{constructor(){this.offset=0,this.value=90}load(e){e&&(void 0!==e.offset&&(this.offset=Sw(e.offset)),void 0!==e.value&&(this.value=Sw(e.value)))}}class wM{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}get rotateX(){return this.rotate.x}set rotateX(e){this.rotate.x=e}get rotateY(){return this.rotate.y}set rotateY(e){this.rotate.y=e}load(e){if(!e)return;void 0!==e.distance&&(this.distance=Sw(e.distance)),void 0!==e.enable&&(this.enable=e.enable);const t=e.rotate?.x??e.rotateX;void 0!==t&&(this.rotate.x=t);const n=e.rotate?.y??e.rotateY;void 0!==n&&(this.rotate.y=n)}}class TM{constructor(){this.x=50,this.y=50,this.mode="percent",this.radius=0}load(e){e&&(void 0!==e.x&&(this.x=e.x),void 0!==e.y&&(this.y=e.y),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.radius&&(this.radius=e.radius))}}class MM{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){e&&(void 0!==e.acceleration&&(this.acceleration=Sw(e.acceleration)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.inverse&&(this.inverse=e.inverse),void 0!==e.maxSpeed&&(this.maxSpeed=Sw(e.maxSpeed)))}}class AM{constructor(){this.clamp=!0,this.delay=new ST,this.enable=!1,this.options={}}load(e){e&&(void 0!==e.clamp&&(this.clamp=e.clamp),this.delay.load(e.delay),void 0!==e.enable&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=XE(this.options,e.options)))}}class PM{load(e){e&&(void 0!==e.color&&(this.color=Jw.create(this.color,e.color)),void 0!==e.image&&(this.image=e.image))}}class CM{constructor(){this.enable=!1,this.length=10,this.fill=new PM}get fillColor(){return this.fill.color}set fillColor(e){this.fill.load({color:e})}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0===e.fill&&void 0===e.fillColor||this.fill.load(e.fill||{color:e.fillColor}),void 0!==e.length&&(this.length=e.length))}}class IM{constructor(){this.default="out"}load(e){e&&(void 0!==e.default&&(this.default=e.default),this.bottom=e.bottom??e.default,this.left=e.left??e.default,this.right=e.right??e.default,this.top=e.top??e.default)}}class LM{constructor(){this.acceleration=0,this.enable=!1}load(e){e&&(void 0!==e.acceleration&&(this.acceleration=Sw(e.acceleration)),void 0!==e.enable&&(this.enable=e.enable),e.position&&(this.position=XE({},e.position)))}}class DM{constructor(){this.angle=new EM,this.attract=new wM,this.center=new TM,this.decay=0,this.distance={},this.direction="none",this.drift=0,this.enable=!1,this.gravity=new MM,this.path=new AM,this.outModes=new IM,this.random=!1,this.size=!1,this.speed=2,this.spin=new LM,this.straight=!1,this.trail=new CM,this.vibrate=!1,this.warp=!1}get bounce(){return this.collisions}set bounce(e){this.collisions=e}get collisions(){return!1}set collisions(e){}get noise(){return this.path}set noise(e){this.path=e}get outMode(){return this.outModes.default}set outMode(e){this.outModes.default=e}get out_mode(){return this.outMode}set out_mode(e){this.outMode=e}load(e){if(!e)return;this.angle.load(iw(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),void 0!==e.decay&&(this.decay=Sw(e.decay)),void 0!==e.direction&&(this.direction=e.direction),void 0!==e.distance&&(this.distance=iw(e.distance)?{horizontal:e.distance,vertical:e.distance}:{...e.distance}),void 0!==e.drift&&(this.drift=Sw(e.drift)),void 0!==e.enable&&(this.enable=e.enable),this.gravity.load(e.gravity);const t=e.outModes??e.outMode??e.out_mode;void 0!==t&&(sw(t)?this.outModes.load(t):this.outModes.load({default:t})),this.path.load(e.path??e.noise),void 0!==e.random&&(this.random=e.random),void 0!==e.size&&(this.size=e.size),void 0!==e.speed&&(this.speed=Sw(e.speed)),this.spin.load(e.spin),void 0!==e.straight&&(this.straight=e.straight),this.trail.load(e.trail),void 0!==e.vibrate&&(this.vibrate=e.vibrate),void 0!==e.warp&&(this.warp=e.warp)}}class RM extends class{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(e){e&&(void 0!==e.count&&(this.count=Sw(e.count)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.speed&&(this.speed=Sw(e.speed)),void 0!==e.decay&&(this.decay=Sw(e.decay)),void 0!==e.delay&&(this.delay=Sw(e.delay)),void 0!==e.sync&&(this.sync=e.sync))}}{constructor(){super(),this.mode="auto",this.startValue="random"}load(e){super.load(e),e&&(void 0!==e.minimumValue&&(this.minimumValue=e.minimumValue),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.startValue&&(this.startValue=e.startValue))}}class kM extends RM{constructor(){super(),this.destroy="none",this.speed=2}get opacity_min(){return this.minimumValue}set opacity_min(e){this.minimumValue=e}load(e){void 0!==e?.opacity_min&&void 0===e.minimumValue&&(e.minimumValue=e.opacity_min),super.load(e),e&&void 0!==e.destroy&&(this.destroy=e.destroy)}}class OM extends ST{constructor(){super(),this.animation=new kM,this.random.minimumValue=.1,this.value=1}get anim(){return this.animation}set anim(e){this.animation=e}load(e){if(!e)return;super.load(e);const t=e.animation??e.anim;void 0!==t&&(this.animation.load(t),this.value=Sw(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class FM{constructor(){this.enable=!1,this.width=1920,this.height=1080}get area(){return this.width}set area(e){this.width=e}get factor(){return this.height}set factor(e){this.height=e}get value_area(){return this.area}set value_area(e){this.area=e}load(e){if(!e)return;void 0!==e.enable&&(this.enable=e.enable);const t=e.width??e.area??e.value_area;void 0!==t&&(this.width=t);const n=e.height??e.factor;void 0!==n&&(this.height=n)}}class NM{constructor(){this.density=new FM,this.limit=0,this.value=0}get max(){return this.limit}set max(e){this.limit=e}load(e){if(!e)return;this.density.load(e.density);const t=e.limit??e.max;void 0!==t&&(this.limit=t),void 0!==e.value&&(this.value=e.value)}}class BM{constructor(){this.blur=0,this.color=new Jw,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){e&&(void 0!==e.blur&&(this.blur=e.blur),this.color=Jw.create(this.color,e.color),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.offset&&(void 0!==e.offset.x&&(this.offset.x=e.offset.x),void 0!==e.offset.y&&(this.offset.y=e.offset.y)))}}const zM="character",UM="char",VM="image",HM="images",GM="polygon",jM="star";class WM{constructor(){this.loadShape=(e,t,n,i)=>{if(!e)return;const r=aw(e),s=r?[]:{},a=r!==aw(this.options[t]),o=r!==aw(this.options[n]);a&&(this.options[t]=s),o&&i&&(this.options[n]=s),this.options[t]=XE(this.options[t]??s,e),this.options[n]&&!i||(this.options[n]=XE(this.options[n]??s,e))},this.close=!0,this.fill=!0,this.options={},this.type="circle"}get character(){return this.options[zM]??this.options.char}set character(e){this.options.char=this.options[zM]=e}get custom(){return this.options}set custom(e){this.options=e}get image(){return this.options.image??this.options.images}set image(e){this.options.images=this.options.image=e}get images(){return this.image}set images(e){this.image=e}get polygon(){return this.options.polygon??this.options.star}set polygon(e){this.options.star=this.options.polygon=e}get stroke(){return[]}set stroke(e){}load(e){if(!e)return;const t=e.options??e.custom;if(void 0!==t)for(const e in t){const n=t[e];n&&(this.options[e]=XE(this.options[e]??{},n))}this.loadShape(e.character,zM,UM,!0),this.loadShape(e.polygon,GM,jM,!1),this.loadShape(e.image??e.images,VM,HM,!0),void 0!==e.close&&(this.close=e.close),void 0!==e.fill&&(this.fill=e.fill),void 0!==e.type&&(this.type=e.type)}}class qM extends RM{constructor(){super(),this.destroy="none",this.speed=5}get size_min(){return this.minimumValue}set size_min(e){this.minimumValue=e}load(e){void 0!==e?.size_min&&void 0===e.minimumValue&&(e.minimumValue=e.size_min),super.load(e),e&&void 0!==e.destroy&&(this.destroy=e.destroy)}}class XM extends ST{constructor(){super(),this.animation=new qM,this.random.minimumValue=1,this.value=3}get anim(){return this.animation}set anim(e){this.animation=e}load(e){if(super.load(e),!e)return;const t=e.animation??e.anim;void 0!==t&&(this.animation.load(t),this.value=Sw(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class YM{constructor(){this.width=0}load(e){e&&(void 0!==e.color&&(this.color=eT.create(this.color,e.color)),void 0!==e.width&&(this.width=Sw(e.width)),void 0!==e.opacity&&(this.opacity=Sw(e.opacity)))}}class $M extends ST{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),e&&(void 0!==e.opacityRate&&(this.opacityRate=e.opacityRate),void 0!==e.sizeRate&&(this.sizeRate=e.sizeRate),void 0!==e.velocityRate&&(this.velocityRate=e.velocityRate))}}class KM{constructor(e,t){this._engine=e,this._container=t,this.bounce=new xM,this.collisions=new SM,this.color=new eT,this.color.value="#fff",this.groups={},this.move=new DM,this.number=new NM,this.opacity=new OM,this.reduceDuplicates=!1,this.shadow=new BM,this.shape=new WM,this.size=new XM,this.stroke=new YM,this.zIndex=new $M}load(e){if(!e)return;if(this.bounce.load(e.bounce),this.color.load(eT.create(this.color,e.color)),void 0!==e.groups)for(const t in e.groups){const n=e.groups[t];void 0!==n&&(this.groups[t]=XE(this.groups[t]??{},n))}this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),void 0!==e.reduceDuplicates&&(this.reduceDuplicates=e.reduceDuplicates),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex);const t=e.move?.collisions??e.move?.bounce;void 0!==t&&(this.collisions.enable=t),this.collisions.load(e.collisions),void 0!==e.interactivity&&(this.interactivity=XE({},e.interactivity));const n=e.stroke??e.shape?.stroke;if(n&&(this.stroke=KE(n,(e=>{const t=new YM;return t.load(e),t}))),this._container){const t=this._engine.plugins.updaters.get(this._container);if(t)for(const n of t)n.loadOptions&&n.loadOptions(this,e);const n=this._engine.plugins.interactors.get(this._container);if(n)for(const t of n)t.loadParticlesOptions&&t.loadParticlesOptions(this,e)}}}function ZM(e,...t){for(const n of t)e.load(n)}function QM(e,t,...n){const i=new KM(e,t);return ZM(i,...n),i}class JM{constructor(e,t){this._findDefaultTheme=e=>this.themes.find((t=>t.default.value&&t.default.mode===e))??this.themes.find((e=>e.default.value&&"any"===e.default.mode)),this._importPreset=e=>{this.load(this._engine.plugins.getPreset(e))},this._engine=e,this._container=t,this.autoPlay=!0,this.background=new nM,this.backgroundMask=new rM,this.defaultThemes={},this.delay=0,this.fullScreen=new sM,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new pM(e,t),this.manualParticles=[],this.particles=QM(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}get backgroundMode(){return this.fullScreen}set backgroundMode(e){this.fullScreen.load(e)}get fps_limit(){return this.fpsLimit}set fps_limit(e){this.fpsLimit=e}get retina_detect(){return this.detectRetina}set retina_detect(e){this.detectRetina=e}load(e){if(!e)return;void 0!==e.preset&&KE(e.preset,(e=>this._importPreset(e))),void 0!==e.autoPlay&&(this.autoPlay=e.autoPlay),void 0!==e.delay&&(this.delay=Sw(e.delay));const t=e.detectRetina??e.retina_detect;void 0!==t&&(this.detectRetina=t),void 0!==e.duration&&(this.duration=Sw(e.duration));const n=e.fpsLimit??e.fps_limit;void 0!==n&&(this.fpsLimit=n),void 0!==e.pauseOnBlur&&(this.pauseOnBlur=e.pauseOnBlur),void 0!==e.pauseOnOutsideViewport&&(this.pauseOnOutsideViewport=e.pauseOnOutsideViewport),void 0!==e.zLayers&&(this.zLayers=e.zLayers),this.background.load(e.background);const i=e.fullScreen??e.backgroundMode;tw(i)?this.fullScreen.enable=i:this.fullScreen.load(i),this.backgroundMask.load(e.backgroundMask),this.interactivity.load(e.interactivity),e.manualParticles&&(this.manualParticles=e.manualParticles.map((e=>{const t=new fM;return t.load(e),t}))),this.particles.load(e.particles),this.style=XE(this.style,e.style),this._engine.plugins.loadOptions(this,e),void 0!==e.smooth&&(this.smooth=e.smooth);const r=this._engine.plugins.interactors.get(this._container);if(r)for(const t of r)t.loadOptions&&t.loadOptions(this,e);if(void 0!==e.responsive)for(const t of e.responsive){const e=new mM;e.load(t),this.responsive.push(e)}if(this.responsive.sort(((e,t)=>e.maxWidth-t.maxWidth)),void 0!==e.themes)for(const t of e.themes){const e=this.themes.find((e=>e.name===t.name));if(e)e.load(t);else{const e=new vM;e.load(t),this.themes.push(e)}}this.defaultThemes.dark=this._findDefaultTheme("dark")?.name,this.defaultThemes.light=this._findDefaultTheme("light")?.name}setResponsive(e,t,n){this.load(n);const i=this.responsive.find((n=>"screen"===n.mode&&screen?n.maxWidth>screen.availWidth:n.maxWidth*t>e));return this.load(i?.options),i?.maxWidth}setTheme(e){if(e){const t=this.themes.find((t=>t.name===e));t&&this.load(t.options)}else{const e=VE("(prefers-color-scheme: dark)"),t=e&&e.matches,n=this._findDefaultTheme(t?"dark":"light");n&&this.load(n.options)}}}class eA{constructor(e,t){this.container=t,this._engine=e,this._interactors=e.plugins.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[]}async externalInteract(e){for(const t of this._externalInteractors)t.isEnabled()&&await t.interact(e)}handleClickMode(e){for(const t of this._externalInteractors)t.handleClickMode&&t.handleClickMode(e)}init(){this._externalInteractors=[],this._particleInteractors=[];for(const e of this._interactors){switch(e.type){case"external":this._externalInteractors.push(e);break;case"particles":this._particleInteractors.push(e)}e.init()}}async particlesInteract(e,t){for(const n of this._externalInteractors)n.clear(e,t);for(const n of this._particleInteractors)n.isEnabled(e)&&await n.interact(e,t)}async reset(e){for(const t of this._externalInteractors)t.isEnabled()&&t.reset(e);for(const t of this._particleInteractors)t.isEnabled(e)&&t.reset(e)}}const tA=e=>{if(!HE(e.outMode,e.checkModes))return;const t=2*e.radius;e.coord>e.maxCoord-t?e.setCb(-e.radius):e.coord<t&&e.setCb(e.radius)};class nA{constructor(e,t,n,i,r,s){this.container=n,this._calcPosition=(e,t,n,i=0)=>{for(const[,i]of e.plugins){const e=void 0!==i.particlePosition?i.particlePosition(t,this):void 0;if(e)return dw.create(e.x,e.y,n)}const r=Aw({size:e.canvas.size,position:t}),s=dw.create(r.x,r.y,n),a=this.getRadius(),o=this.options.move.outModes,l=t=>{tA({outMode:t,checkModes:["bounce","bounce-horizontal"],coord:s.x,maxCoord:e.canvas.size.width,setCb:e=>s.x+=e,radius:a})},c=t=>{tA({outMode:t,checkModes:["bounce","bounce-vertical"],coord:s.y,maxCoord:e.canvas.size.height,setCb:e=>s.y+=e,radius:a})};return l(o.left??o.default),l(o.right??o.default),c(o.top??o.default),c(o.bottom??o.default),this._checkOverlap(s,i)?this._calcPosition(e,void 0,n,i+1):s},this._calculateVelocity=()=>{const e=function(e){const t=pw.origin;return t.length=1,t.angle=e,t}(this.direction).copy(),t=this.options.move;if("inside"===t.direction||"outside"===t.direction)return e;const n=Math.PI/180*_w(t.angle.value),i=Math.PI/180*_w(t.angle.offset),r={left:i-n/2,right:i+n/2};return t.straight||(e.angle+=yw(Sw(r.left,r.right))),t.random&&"number"==typeof t.speed&&(e.length*=gw()),e},this._checkOverlap=(e,t=0)=>{const n=this.options.collisions,i=this.getRadius();if(!n.enable)return!1;const r=n.overlap;if(r.enable)return!1;const s=r.retries;if(s>=0&&t>s)throw new Error(`${uw} particle is overlapping and can't be placed`);return!!this.container.particles.find((t=>Tw(e,t.position)<i+t.getRadius()))},this._getRollColor=e=>{if(!e||!this.roll||!this.backColor&&!this.roll.alter)return e;const t=this.roll.horizontal&&this.roll.vertical?2:1,n=this.roll.horizontal?Math.PI/2:0;return Math.floor(((this.roll.angle??0)+n)/(Math.PI/t))%2?this.backColor?this.backColor:this.roll.alter?function(e,t,n){return{h:e.h,s:e.s,l:e.l+("darken"===t?-1:1)*n}}(e,this.roll.alter.type,this.roll.alter.value):e:e},this._initPosition=e=>{const t=this.container,n=_w(this.options.zIndex.value);this.position=this._calcPosition(t,e,vw(n,0,t.zLayers)),this.initialPosition=this.position.copy();const i=t.canvas.size;switch(this.moveCenter={...ew(this.options.move.center,i),radius:this.options.move.center.radius??0,mode:this.options.move.center.mode??"percent"},this.direction=function(e,t,n){if(iw(e))return e*Math.PI/180;switch(e){case"top":return-Math.PI/2;case"top-right":return-Math.PI/4;case"right":return 0;case"bottom-right":return Math.PI/4;case"bottom":return Math.PI/2;case"bottom-left":return 3*Math.PI/4;case"left":return Math.PI;case"top-left":return-3*Math.PI/4;case"inside":return Math.atan2(n.y-t.y,n.x-t.x);case"outside":return Math.atan2(t.y-n.y,t.x-n.x);default:return gw()*Math.PI*2}}(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case"inside":this.outType="inside";break;case"outside":this.outType="outside"}this.offset=pw.origin},this._loadShapeData=(e,t)=>{const n=e.options[this.shape];if(n)return XE({close:e.close,fill:e.fill},ZE(n,this.id,t))},this._engine=e,this.init(t,i,r,s)}destroy(e){if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const t=this.container,n=this.pathGenerator;for(const[,n]of t.plugins)n.particleDestroyed&&n.particleDestroyed(this,e);for(const n of t.particles.updaters)n.particleDestroyed&&n.particleDestroyed(this,e);n&&n.reset(this)}draw(e){const t=this.container;for(const[,n]of t.plugins)t.canvas.drawParticlePlugin(n,this,e);t.canvas.drawParticle(this,e)}getFillColor(){return this._getRollColor(this.bubble.color??Ww(this.color))}getMass(){return this.getRadius()**2*Math.PI/2}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??Ww(this.strokeColor))}init(e,t,n,i){const r=this.container,s=this._engine;this.id=e,this.group=i,this.fill=!0,this.pathRotation=!1,this.close=!0,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType="normal",this.ignoresResizeRatio=!0;const a=r.retina.pixelRatio,o=r.actualOptions,l=QM(this._engine,r,o.particles),c=l.shape.type,{reduceDuplicates:h}=l;this.shape=ZE(c,this.id,h);const u=l.shape;if(n&&n.shape&&n.shape.type){const e=ZE(n.shape.type,this.id,h);e&&(this.shape=e,u.load(n.shape))}this.shapeData=this._loadShapeData(u,h),l.load(n);const d=this.shapeData;d&&l.load(d.particles);const p=new pM(s,r);p.load(r.actualOptions.interactivity),p.load(l.interactivity),this.interactivity=p,this.fill=d?.fill??l.shape.fill,this.close=d?.close??l.shape.close,this.options=l;const f=this.options.move.path;this.pathDelay=1e3*Ew(f.delay),f.generator&&(this.pathGenerator=this._engine.plugins.getPathGenerator(f.generator),this.pathGenerator&&r.addPath(f.generator,this.pathGenerator)&&this.pathGenerator.init(r)),r.retina.initParticle(this),this.size=function(e,t){const n=e.value,i=e.animation,r={delayTime:1e3*_w(i.delay),enable:i.enable,value:_w(e.value)*t,max:xw(n)*t,min:bw(n)*t,loops:0,maxLoops:_w(i.count),time:0};if(i.enable){switch(r.decay=1-_w(i.decay),i.mode){case"increase":r.status="increasing";break;case"decrease":r.status="decreasing";break;case"random":r.status=gw()>=.5?"increasing":"decreasing"}const e="auto"===i.mode;switch(i.startValue){case"min":r.value=r.min,e&&(r.status="increasing");break;case"max":r.value=r.max,e&&(r.status="decreasing");break;default:r.value=yw(r),e&&(r.status=gw()>=.5?"increasing":"decreasing")}}return r.initialValue=r.value,r}(this.options.size,a),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(t),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=1-_w(this.options.move.decay);const m=r.particles;m.needsSort=m.needsSort||m.lastZIndex<this.position.z,m.lastZIndex=this.position.z,this.zIndexFactor=this.position.z/r.zLayers,this.sides=24;let g=r.drawers.get(this.shape);g||(g=this._engine.plugins.getShapeDrawer(this.shape),g&&r.drawers.set(this.shape,g)),g&&g.loadShape&&g.loadShape(this);const v=g?.getSidesCount;v&&(this.sides=v(this)),this.spawning=!1,this.shadowColor=Nw(this.options.shadow.color);for(const e of r.particles.updaters)e.init(this);for(const e of r.particles.movers)e.init&&e.init(this);g&&g.particleInit&&g.particleInit(r,this);for(const[,e]of r.plugins)e.particleCreated&&e.particleCreated(this)}isInsideCanvas(){const e=this.getRadius(),t=this.container.canvas.size,n=this.position;return n.x>=-e&&n.y>=-e&&n.y<=t.height+e&&n.x<=t.width+e}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){for(const e of this.container.particles.updaters)e.reset&&e.reset(this)}}class iA{constructor(e,t){this.position=e,this.particle=t}}class rA{constructor(e,t){this.rectangle=e,this.capacity=t,this._subdivide=()=>{const{x:e,y:t}=this.rectangle.position,{width:n,height:i}=this.rectangle.size,{capacity:r}=this;for(let s=0;s<4;s++)this._subs.push(new rA(new fT(e+n/2*(s%2),t+i/2*(Math.round(s/2)-s%2),n/2,i/2),r));this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(e){return!!this.rectangle.contains(e.position)&&(this._points.length<this.capacity?(this._points.push(e),!0):(this._divided||this._subdivide(),this._subs.some((t=>t.insert(e)))))}query(e,t,n){const i=n||[];if(!e.intersects(this.rectangle))return[];for(const n of this._points)!e.contains(n.position)&&Tw(e.position,n.position)>n.particle.getRadius()&&(!t||t(n.particle))||i.push(n.particle);if(this._divided)for(const n of this._subs)n.query(e,t,i);return i}queryCircle(e,t,n){return this.query(new mT(e.x,e.y,t),n)}queryRectangle(e,t,n){return this.query(new fT(e.x,e.y,t.width,t.height),n)}}const sA=e=>new fT(-e.width/4,-e.height/4,3*e.width/2,3*e.height/2);class aA{constructor(e,t){this._applyDensity=(e,t,n)=>{if(!e.number.density?.enable)return;const i=e.number,r=this._initDensityFactor(i.density),s=i.value,a=i.limit>0?i.limit:s,o=Math.min(s,a)*r+t,l=Math.min(this.count,this.filter((e=>e.group===n)).length);this.limit=i.limit*r,l<o?this.push(Math.abs(o-l),void 0,e,n):l>o&&this.removeQuantity(l-o,n)},this._initDensityFactor=e=>{const t=this._container;if(!t.canvas.element||!e.enable)return 1;const n=t.canvas.element,i=t.retina.pixelRatio;return n.width*n.height/(e.factor*i**2*e.area)},this._pushParticle=(e,t,n,i)=>{try{let r=this.pool.pop();r?r.init(this._nextId,e,t,n):r=new nA(this._engine,this._nextId,this._container,e,t,n);let s=!0;if(i&&(s=i(r)),!s)return;return this._array.push(r),this._zArray.push(r),this._nextId++,this._engine.dispatchEvent("particleAdded",{container:this._container,data:{particle:r}}),r}catch(e){return void zE().warning(`${uw} adding particle: ${e}`)}},this._removeParticle=(e,t,n)=>{const i=this._array[e];if(!i||i.group!==t)return!1;i.destroy(n);const r=this._zArray.indexOf(i);return this._array.splice(e,1),this._zArray.splice(r,1),this.pool.push(i),this._engine.dispatchEvent("particleRemoved",{container:this._container,data:{particle:i}}),!0},this._engine=e,this._container=t,this._nextId=0,this._array=[],this._zArray=[],this.pool=[],this.limit=0,this.needsSort=!1,this.lastZIndex=0,this._interactionManager=new eA(e,t);const n=t.canvas.size;this.quadTree=new rA(sA(n),4),this.movers=this._engine.plugins.getMovers(t,!0),this.updaters=this._engine.plugins.getUpdaters(t,!0)}get count(){return this._array.length}addManualParticles(){const e=this._container,t=e.actualOptions;for(const n of t.manualParticles)this.addParticle(n.position?ew(n.position,e.canvas.size):void 0,n.options)}addParticle(e,t,n,i){const r=this._container.actualOptions.particles.number.limit;if(r>0){const e=this.count+1-r;e>0&&this.removeQuantity(e)}return this._pushParticle(e,t,n,i)}clear(){this._array=[],this._zArray=[]}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}async draw(e){const t=this._container;t.canvas.clear(),await this.update(e);for(const[,n]of t.plugins)t.canvas.drawPlugin(n,e);for(const t of this._zArray)t.draw(e)}filter(e){return this._array.filter(e)}find(e){return this._array.find(e)}handleClickMode(e){this._interactionManager.handleClickMode(e)}init(){const e=this._container,t=e.actualOptions;this.lastZIndex=0,this.needsSort=!1;let n=!1;this.updaters=this._engine.plugins.getUpdaters(e,!0),this._interactionManager.init();for(const[,t]of e.plugins)if(void 0!==t.particlesInitialization&&(n=t.particlesInitialization()),n)break;this._interactionManager.init();for(const[,t]of e.pathGenerators)t.init(e);if(this.addManualParticles(),!n){for(const e in t.particles.groups){const n=t.particles.groups[e];for(let i=this.count,r=0;r<n.number?.value&&i<t.particles.number.value;i++,r++)this.addParticle(void 0,n,e)}for(let e=this.count;e<t.particles.number.value;e++)this.addParticle()}}push(e,t,n,i){this.pushing=!0;for(let r=0;r<e;r++)this.addParticle(t?.position,n,i);this.pushing=!1}async redraw(){this.clear(),this.init(),await this.draw({value:0,factor:0})}remove(e,t,n){this.removeAt(this._array.indexOf(e),void 0,t,n)}removeAt(e,t=1,n,i){if(e<0||e>this.count)return;let r=0;for(let s=e;r<t&&s<this.count;s++)this._removeParticle(s--,n,i)&&r++}removeQuantity(e,t){this.removeAt(0,e,t)}setDensity(){const e=this._container.actualOptions,t=e.particles.groups;for(const e in t)this._applyDensity(t[e],0,e);this._applyDensity(e.particles,e.manualParticles.length)}async update(e){const t=this._container,n=new Set;this.quadTree=new rA(sA(t.canvas.size),4);for(const[,e]of t.pathGenerators)e.update();for(const[,n]of t.plugins)n.update&&n.update(e);for(const i of this._array){const r=t.canvas.resizeFactor;r&&!i.ignoresResizeRatio&&(i.position.x*=r.width,i.position.y*=r.height,i.initialPosition.x*=r.width,i.initialPosition.y*=r.height),i.ignoresResizeRatio=!1,await this._interactionManager.reset(i);for(const[,t]of this._container.plugins){if(i.destroyed)break;t.particleUpdate&&t.particleUpdate(i,e)}for(const t of this.movers)t.isEnabled(i)&&t.move(i,e);i.destroyed?n.add(i):this.quadTree.insert(new iA(i.getPosition(),i))}if(n.size){const e=e=>!n.has(e);this._array=this.filter(e),this._zArray=this._zArray.filter(e),this.pool.push(...n)}await this._interactionManager.externalInteract(e);for(const t of this._array){for(const n of this.updaters)n.update(t,e);t.destroyed||t.spawning||await this._interactionManager.particlesInteract(t,e)}if(delete t.canvas.resizeFactor,this.needsSort){const e=this._zArray;e.sort(((e,t)=>t.position.z-e.position.z||e.id-t.id)),this.lastZIndex=e[e.length-1].position.z,this.needsSort=!1}}}class oA{constructor(e){this.container=e,this.pixelRatio=1,this.reduceFactor=1}init(){const e=this.container,t=e.actualOptions;this.pixelRatio=!t.detectRetina||UE()?1:window.devicePixelRatio,this.reduceFactor=1;const n=this.pixelRatio;if(e.canvas.element){const t=e.canvas.element;e.canvas.size.width=t.offsetWidth*n,e.canvas.size.height=t.offsetHeight*n}const i=t.particles,r=i.move;this.attractDistance=_w(r.attract.distance)*n,this.maxSpeed=_w(r.gravity.maxSpeed)*n,this.sizeAnimationSpeed=_w(i.size.animation.speed)*n}initParticle(e){const t=e.options,n=this.pixelRatio,i=t.move,r=i.distance,s=e.retina;s.attractDistance=_w(i.attract.distance)*n,s.moveDrift=_w(i.drift)*n,s.moveSpeed=_w(i.speed)*n,s.sizeAnimationSpeed=_w(t.size.animation.speed)*n;const a=s.maxDistance;a.horizontal=void 0!==r.horizontal?r.horizontal*n:void 0,a.vertical=void 0!==r.vertical?r.vertical*n:void 0,s.maxSpeed=_w(i.gravity.maxSpeed)*n}}function lA(e){return e&&!e.destroyed}function cA(e,t,...n){const i=new JM(e,t);return ZM(i,...n),i}const hA={generate:e=>e.velocity,init:()=>{},update:()=>{},reset:()=>{}};class uA{constructor(e,t,n){this.id=t,this._intersectionManager=e=>{if(lA(this)&&this.actualOptions.pauseOnOutsideViewport)for(const t of e)t.target===this.interactivity.element&&(t.isIntersecting?this.play:this.pause)()},this._nextFrame=async e=>{try{if(!this.smooth&&void 0!==this.lastFrameTime&&e<this.lastFrameTime+1e3/this.fpsLimit)return void this.draw(!1);this.lastFrameTime??=e;const t=function(e,t=60,n=!1){return{value:e,factor:n?60/t:60*e/1e3}}(e-this.lastFrameTime,this.fpsLimit,this.smooth);if(this.addLifeTime(t.value),this.lastFrameTime=e,t.value>1e3)return void this.draw(!1);if(await this.particles.draw(t),!this.alive())return void this.destroy();this.getAnimationStatus()&&this.draw(!1)}catch(e){zE().error(`${uw} in animation loop`,e)}},this._engine=e,this.fpsLimit=120,this.smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this.lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._sourceOptions=n,this._initialSourceOptions=n,this.retina=new oA(this),this.canvas=new JT(this),this.particles=new aA(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.drawers=new Map,this._options=cA(this._engine,this),this.actualOptions=cA(this._engine,this),this._eventListeners=new tM(this),"undefined"!=typeof IntersectionObserver&&IntersectionObserver&&(this._intersectionObserver=new IntersectionObserver((e=>this._intersectionManager(e)))),this._engine.dispatchEvent("containerBuilt",{container:this})}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(e){if(!lA(this))return;const t=this.interactivity.element;if(!t)return;const n=(t,n,i)=>{if(!lA(this))return;const r=this.retina.pixelRatio,s={x:n.x*r,y:n.y*r},a=this.particles.quadTree.queryCircle(s,i*r);e(t,a)};let i=!1,r=!1;t.addEventListener("click",(e=>{if(!lA(this))return;const t=e,i={x:t.offsetX||t.clientX,y:t.offsetY||t.clientY};n(e,i,1)})),t.addEventListener("touchstart",(()=>{lA(this)&&(i=!0,r=!1)})),t.addEventListener("touchmove",(()=>{lA(this)&&(r=!0)})),t.addEventListener("touchend",(e=>{if(lA(this)){if(i&&!r){const t=e;let i=t.touches[t.touches.length-1];if(!i&&(i=t.changedTouches[t.changedTouches.length-1],!i))return;const r=this.canvas.element,s=r?r.getBoundingClientRect():void 0,a={x:i.clientX-(s?s.left:0),y:i.clientY-(s?s.top:0)};n(e,a,Math.max(i.radiusX,i.radiusY))}i=!1,r=!1}})),t.addEventListener("touchcancel",(()=>{lA(this)&&(i=!1,r=!1)}))}addLifeTime(e){this._lifeTime+=e}addPath(e,t,n=!1){return!(!lA(this)||!n&&this.pathGenerators.has(e))&&(this.pathGenerators.set(e,t??hA),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}destroy(){if(!lA(this))return;this.stop(),this.particles.destroy(),this.canvas.destroy();for(const[,e]of this.drawers)e.destroy&&e.destroy(this);for(const e of this.drawers.keys())this.drawers.delete(e);this._engine.plugins.destroy(this),this.destroyed=!0;const e=this._engine.dom(),t=e.findIndex((e=>e===this));t>=0&&e.splice(t,1),this._engine.dispatchEvent("containerDestroyed",{container:this})}draw(e){if(!lA(this))return;let t=e;this._drawAnimationFrame=requestAnimationFrame((async e=>{t&&(this.lastFrameTime=void 0,t=!1),await this._nextFrame(e)}))}async export(e,t={}){for(const[,n]of this.plugins){if(!n.export)continue;const i=await n.export(e,t);if(i.supported)return i.blob}zE().error(`${uw} - Export plugin with type ${e} not found`)}getAnimationStatus(){return!this._paused&&!this.pageHidden&&lA(this)}handleClickMode(e){if(lA(this)){this.particles.handleClickMode(e);for(const[,t]of this.plugins)t.handleClickMode&&t.handleClickMode(e)}}async init(){if(!lA(this))return;const e=this._engine.plugins.getSupportedShapes();for(const t of e){const e=this._engine.plugins.getShapeDrawer(t);e&&this.drawers.set(t,e)}this._options=cA(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=cA(this._engine,this,this._options);const t=this._engine.plugins.getAvailablePlugins(this);for(const[e,n]of t)this.plugins.set(e,n);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize(),this.zLayers=this.actualOptions.zLayers,this._duration=1e3*_w(this.actualOptions.duration),this._delay=1e3*_w(this.actualOptions.delay),this._lifeTime=0,this.fpsLimit=this.actualOptions.fpsLimit>0?this.actualOptions.fpsLimit:120,this.smooth=this.actualOptions.smooth;for(const[,e]of this.drawers)e.init&&await e.init(this);for(const[,e]of this.plugins)e.init&&await e.init();this._engine.dispatchEvent("containerInit",{container:this}),this.particles.init(),this.particles.setDensity();for(const[,e]of this.plugins)e.particlesSetup&&e.particlesSetup();this._engine.dispatchEvent("particlesSetup",{container:this})}async loadTheme(e){lA(this)&&(this._currentTheme=e,await this.refresh())}pause(){if(lA(this)&&(void 0!==this._drawAnimationFrame&&(cancelAnimationFrame(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const[,e]of this.plugins)e.pause&&e.pause();this.pageHidden||(this._paused=!0),this._engine.dispatchEvent("containerPaused",{container:this})}}play(e){if(!lA(this))return;const t=this._paused||e;if(!this._firstStart||this.actualOptions.autoPlay){if(this._paused&&(this._paused=!1),t)for(const[,e]of this.plugins)e.play&&e.play();this._engine.dispatchEvent("containerPlay",{container:this}),this.draw(t||!1)}else this._firstStart=!1}async refresh(){if(lA(this))return this.stop(),this.start()}async reset(){if(lA(this))return this._initialSourceOptions=void 0,this._options=cA(this._engine,this),this.actualOptions=cA(this._engine,this,this._options),this.refresh()}setNoise(e,t,n){lA(this)&&this.setPath(e,t,n)}setPath(e,t,n){if(!e||!lA(this))return;const i={...hA};if(rw(e))i.generate=e,t&&(i.init=t),n&&(i.update=n);else{const t=i;i.generate=e.generate||t.generate,i.init=e.init||t.init,i.update=e.update||t.update}this.addPath("default",i,!0)}async start(){lA(this)&&!this.started&&(await this.init(),this.started=!0,await new Promise((e=>{this._delayTimeout=setTimeout((async()=>{this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const[,e]of this.plugins)e.start&&await e.start();this._engine.dispatchEvent("containerStarted",{container:this}),this.play(),e()}),this._delay)})))}stop(){if(lA(this)&&this.started){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const[,e]of this.plugins)e.stop&&e.stop();for(const e of this.plugins.keys())this.plugins.delete(e);this._sourceOptions=this._options,this._engine.dispatchEvent("containerStopped",{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const e=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this.responsiveMaxWidth!==e&&(this.responsiveMaxWidth=e,!0)}}class dA{constructor(){this._listeners=new Map}addEventListener(e,t){this.removeEventListener(e,t);let n=this._listeners.get(e);n||(n=[],this._listeners.set(e,n)),n.push(t)}dispatchEvent(e,t){const n=this._listeners.get(e);n&&n.forEach((e=>e(t)))}hasEventListener(e){return!!this._listeners.get(e)}removeAllEventListeners(e){e?this._listeners.delete(e):this._listeners=new Map}removeEventListener(e,t){const n=this._listeners.get(e);if(!n)return;const i=n.length,r=n.indexOf(t);r<0||(1===i?this._listeners.delete(e):n.splice(r,1))}}function pA(e,t,n,i=!1){let r=t.get(e);return r&&!i||(r=[...n.values()].map((t=>t(e))),t.set(e,r)),r}class fA{constructor(e){this._engine=e,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.drawers=new Map,this.pathGenerators=new Map}addInteractor(e,t){this._initializers.interactors.set(e,t)}addParticleMover(e,t){this._initializers.movers.set(e,t)}addParticleUpdater(e,t){this._initializers.updaters.set(e,t)}addPathGenerator(e,t){!this.getPathGenerator(e)&&this.pathGenerators.set(e,t)}addPlugin(e){!this.getPlugin(e.id)&&this.plugins.push(e)}addPreset(e,t,n=!1){(n||!this.getPreset(e))&&this.presets.set(e,t)}addShapeDrawer(e,t){KE(e,(e=>{!this.getShapeDrawer(e)&&this.drawers.set(e,t)}))}destroy(e){this.updaters.delete(e),this.movers.delete(e),this.interactors.delete(e)}getAvailablePlugins(e){const t=new Map;for(const n of this.plugins)n.needsPlugin(e.actualOptions)&&t.set(n.id,n.getPlugin(e));return t}getInteractors(e,t=!1){return pA(e,this.interactors,this._initializers.interactors,t)}getMovers(e,t=!1){return pA(e,this.movers,this._initializers.movers,t)}getPathGenerator(e){return this.pathGenerators.get(e)}getPlugin(e){return this.plugins.find((t=>t.id===e))}getPreset(e){return this.presets.get(e)}getShapeDrawer(e){return this.drawers.get(e)}getSupportedShapes(){return this.drawers.keys()}getUpdaters(e,t=!1){return pA(e,this.updaters,this._initializers.updaters,t)}loadOptions(e,t){for(const n of this.plugins)n.loadOptions(e,t)}loadParticlesOptions(e,t,...n){const i=this.updaters.get(e);if(i)for(const e of i)e.loadOptions&&e.loadOptions(t,...n)}}class mA{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new dA,this._initialized=!1,this.plugins=new fA(this)}get configs(){const e={};for(const[t,n]of this._configs)e[t]=n;return e}get version(){return"2.12.0"}addConfig(e,t){nw(e)?t&&(t.name=e,this._configs.set(e,t)):this._configs.set(e.name??"default",e)}addEventListener(e,t){this._eventDispatcher.addEventListener(e,t)}async addInteractor(e,t,n=!0){this.plugins.addInteractor(e,t),await this.refresh(n)}async addMover(e,t,n=!0){this.plugins.addParticleMover(e,t),await this.refresh(n)}async addParticleUpdater(e,t,n=!0){this.plugins.addParticleUpdater(e,t),await this.refresh(n)}async addPathGenerator(e,t,n=!0){this.plugins.addPathGenerator(e,t),await this.refresh(n)}async addPlugin(e,t=!0){this.plugins.addPlugin(e),await this.refresh(t)}async addPreset(e,t,n=!1,i=!0){this.plugins.addPreset(e,t,n),await this.refresh(i)}async addShape(e,t,n,i,r,s=!0){let a,o,l,c,h=s;tw(n)?(h=n,o=void 0):o=n,tw(i)?(h=i,l=void 0):l=i,tw(r)?(h=r,c=void 0):c=r,a=rw(t)?{afterEffect:l,destroy:c,draw:t,init:o}:t,this.plugins.addShapeDrawer(e,a),await this.refresh(h)}dispatchEvent(e,t){this._eventDispatcher.dispatchEvent(e,t)}dom(){return this._domArray}domItem(e){const t=this.dom(),n=t[e];if(n&&!n.destroyed)return n;t.splice(e,1)}init(){this._initialized||(this._initialized=!0)}async load(e,t){return this.loadFromArray(e,t)}async loadFromArray(e,t,n){let i;return!function(e){return!!((t=e).id||t.element||t.url||t.options);var t}(e)?(i={},nw(e)?i.id=e:i.options=e,iw(t)?i.index=t:i.options=t??i.options,i.index=n??i.index):i=e,this._loadParams(i)}async loadJSON(e,t,n){let i,r;return iw(t)||void 0===t?i=e:(r=e,i=t),this._loadParams({id:r,url:i,index:n})}async refresh(e=!0){e&&this.dom().forEach((e=>e.refresh()))}removeEventListener(e,t){this._eventDispatcher.removeEventListener(e,t)}async set(e,t,n,i){const r={index:i};return nw(e)?r.id=e:r.element=e,t instanceof HTMLElement?r.element=t:r.options=t,iw(n)?r.index=n:r.options=n??r.options,this._loadParams(r)}async setJSON(e,t,n,i){const r={};return e instanceof HTMLElement?(r.element=e,r.url=t,r.index=n):(r.id=e,r.element=t,r.url=n,r.index=i),this._loadParams(r)}setOnClickHandler(e){const t=this.dom();if(!t.length)throw new Error(`${uw} can only set click handlers after calling tsParticles.load()`);for(const n of t)n.addClickHandler(e)}async _loadParams(e){const t=e.id??`tsparticles${Math.floor(1e4*gw())}`,{index:n,url:i}=e,r=i?await async function(e){const t=ZE(e.url,e.index);if(!t)return e.fallback;const n=await fetch(t);return n.ok?n.json():(zE().error(`${uw} ${n.status} while retrieving config file`),e.fallback)}({fallback:e.options,url:i,index:n}):e.options;let s=e.element??document.getElementById(t);s||(s=document.createElement("div"),s.id=t,document.body.append(s));const a=ZE(r,n),o=this.dom(),l=o.findIndex((e=>e.id===t));if(l>=0){const e=this.domItem(l);e&&!e.destroyed&&(e.destroy(),o.splice(l,1))}let c;if("canvas"===s.tagName.toLowerCase())c=s,c.dataset.generated="false";else{const e=s.getElementsByTagName("canvas");e.length?(c=e[0],c.dataset.generated="false"):(c=document.createElement("canvas"),c.dataset.generated="true",s.appendChild(c))}c.style.width||(c.style.width="100%"),c.style.height||(c.style.height="100%");const h=new uA(this,t,a);return l>=0?o.splice(l,0,h):o.push(h),h.canvas.loadCanvas(c),await h.start(),h}}class gA{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){const t=e.value.hsl??e.value;if(void 0!==t.h&&void 0!==t.s&&void 0!==t.l)return Vw(t)}handleRangeColor(e){const t=e.value.hsl??e.value;if(void 0!==t.h&&void 0!==t.l)return Vw({h:_w(t.h),l:_w(t.l),s:_w(t.s)})}parseString(e){if(!e.startsWith("hsl"))return;const t=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i.exec(e);return t?function(e){const t=Vw(e);return{a:e.a,b:t.b,g:t.g,r:t.r}}({a:t.length>4?Pw(t[5]):1,h:parseInt(t[1],10),l:parseInt(t[3],10),s:parseInt(t[2],10)}):void 0}}class vA{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){const t=e.value.rgb??e.value;if(void 0!==t.r)return t}handleRangeColor(e){const t=e.value.rgb??e.value;if(void 0!==t.r)return{r:_w(t.r),g:_w(t.g),b:_w(t.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const t=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i.exec(e);return t?{a:t.length>4?Pw(t[5]):1,b:parseInt(t[3],10),g:parseInt(t[2],10),r:parseInt(t[1],10)}:void 0}}const yA=function(){const e=new vA,t=new gA;kw(e),kw(t);const n=new mA;return n.init(),n}();UE()||(window.tsParticles=yA);__webpack_require__(102);function _A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function bA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_A(Object(n),!0).forEach((function(t){so(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xA=".js-kc7-quiz-modal",SA=".js-kc7-quiz-modal-close",EA=".js-kc7-quiz-item",wA=".js-kc7-quiz-skiplink",TA=".js-kc7-quiz-modal-headline",MA=".js-kc7-quiz-modal-headline-text",AA=".js-kc7-quiz-modal-headline-image",PA=".js-kc7-quiz-modal-eyebrow",CA=".js-kc7-quiz-modal-body",IA=".js-kc7-quiz-modal-desc",LA=".js-kc7-quiz-modal-confetti-desc",DA=".js-kc7-quiz-alt-game-button",RA=function(){function e(t){var n,i,r=this;wa(this,e),so(this,"registerEventListeners",(function(){var e,t=document.querySelector("#compiled-styles-css");r.items.forEach((function(e){e.addEventListener(Ca.EVENTS.CLICK,r.openModal,!0)})),null===(e=r.altGameButton)||void 0===e||e.addEventListener(Ca.EVENTS.CLICK,r.toggleAltGame,!0),r.modalClose.addEventListener(Ca.EVENTS.CLICK,r.closeModal),document.addEventListener(Ca.EVENTS.KEYDOWN,r.escKeyHandler),r.emitter.on(Ca.EVENTS.RESIZE,(function(){return r.setItemWidth()})),t.addEventListener("load",(function(){return r.setItemWidth()}))})),so(this,"fireConfetti",xS(ES().mark((function e(){var t,n,i,s,a,o;return ES().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lw(yA);case 2:return e.next=4,$w(yA);case 4:return e.next=6,dT(yA);case 6:return e.next=8,bT(yA);case 8:return e.next=10,AT(yA);case 10:return e.next=12,RT(yA);case 12:return e.next=14,NT(yA);case 14:return e.next=16,VT(yA);case 16:return e.next=18,GT(yA);case 18:return e.next=20,qT(yA);case 20:return e.next=22,KT(yA);case 22:return t={autoPlay:!0,detectRetina:!0,fpsLimit:60,pauseOnBlur:!0,particles:{number:{density:{enable:!0,width:300,height:300},value:26},color:{value:r.confettiColors},shape:{type:"square"},size:{value:r.confettiSize},rotate:{random:!0,direction:"random",value:{min:0,max:360},animation:{enable:!1,speed:30}},roll:{enable:!1,mode:"vertical",speed:{min:15,max:25}},wobble:{distance:30,enable:!1,speed:{min:-7,max:7}}}},document.documentElement.classList.contains("reduced-motion")||(n={position:{},rate:{quantity:r.confettiPerFire,delay:.2},particles:{move:{outModes:{top:"none",left:"none",right:"none",default:"destroy"}}},life:{count:1,duration:r.confettiDuration,delay:0}},i=structuredClone(n),s=structuredClone(n),a=structuredClone(n),o=structuredClone(n),i.position.x=-5,s.position.x=-5,a.position.x=105,o.position.x=105,i.position.y=50,s.position.y=90,a.position.y=50,o.position.y=90,i.particles.move.direction="top-right",s.particles.move.direction="top-right",a.particles.move.direction="top-left",o.particles.move.direction="top-left",t.emitters=[bA({},i),bA({},s),bA({},a),bA({},o)],t.particles.number={value:0},t.particles.move={decay:.05,direction:"top",enable:!0,gravity:{enable:!0,acceleration:{min:Math.min(r.confettiGravityMin,r.confettiGravityMax),max:Math.max(r.confettiGravityMin,r.confettiGravityMax)}},outModes:{top:"none",default:"destroy"},speed:{min:50,max:100}},t.particles.wobble.enable=!0,t.particles.roll.enable=r.confettiEnable3D,t.particles.rotate.animation.enable=!0,t.interactivity={detectsOn:"window",events:{onHover:{enable:r.confettiIsInteractive,mode:"repulse"},onClick:{enable:r.confettiEnableMouseExplosions,mode:"emitter"}},modes:{emitters:{direction:r.confettiExplosionDirection,life:{count:1,duration:.1,delay:0},rate:{quantity:r.confettiCountPerExplosion,delay:.1},size:r.confettiSize}}},r.modalConfettiDesc.innerHTML="Colorful square confetti shoots from either side of the screen in celebration"),e.next=26,yA.load(r.modal.id,t).then((function(e){r.confetti=e})).catch((function(e){console.error(e)}));case 26:case"end":return e.stop()}}),e)})))),so(this,"getSkipLink",(function(e){var t=e.nextElementSibling;if(null!==t)t.hasAttribute("id")?r.skipLink.href="#".concat(t.id):r.getSkipLink(t);else{var n=e.parentElement;null!==e.parentElement?r.getSkipLink(n):r.skipLink.remove()}})),so(this,"setItemWidth",(function(){var e=Array.from(r.items).map((function(e){return e.offsetWidth})),t=Math.max.apply(Math,Ra(e));r.element.style.setProperty("--kc7-item-width","".concat(t,"px"))})),so(this,"openModal",(function(e){var t=e.currentTarget.dataset,n=t.isCorrect,i=t.term,s=t.definition,a=t.titleImage,o=t.index;"true"===n?(r.modal.dataset.correct="true",r.modalHeadlineText.innerHTML=i,r.modalBody.innerHTML=s,r.modalDesc.innerHTML="".concat(r.modalEyebrow.innerHTML,". ").concat(i,": ").concat(s),void 0!==a&&(r.modalHeadlineImage.innerHTML=a,r.modalHeadline.classList.add("kc7-quiz__modal__headline--show-image")),r.fireConfetti()):(r.modal.dataset.correct="false",r.modalHeadlineText.innerHTML=r.defaultHeadline,r.modalHeadlineImage.innerHTML="",r.modalBody.innerHTML=r.defaultBody,r.modalDesc.innerHTML="".concat(r.defaultHeadline,". ").concat(r.defaultBody),r.modalHeadline.classList.remove("kc7-quiz__modal__headline--show-image")),r.modal.dataset.buttonIndex=o,r.modal.classList.add("kc7-quiz__modal--active"),r.videoState=r.video.state(),r.video.pause(),r.video.lock(),r.page.inert=!0,r.modal.inert=!1,r.modalClose.focus()})),so(this,"closeModal",(function(){var e,t=r.element.querySelector("".concat(EA,'[data-index="').concat(r.modal.dataset.buttonIndex,'"]'));delete r.modal.dataset.buttonIndex,r.modal.classList.remove("kc7-quiz__modal--active"),r.video.unlock(),"pause"!==r.videoState&&r.video.play(),r.modalConfettiDesc.innerHTML="",r.page.inert=!1,r.modal.inert=!0,t.focus(),clearTimeout(r.confettiTimeout),null===(e=r.confetti)||void 0===e||e.canvas.destroy()})),so(this,"escKeyHandler",(function(e){"Escape"!==e.key||r.modal.inert||(e.preventDefault(),r.closeModal())})),so(this,"toggleAltGame",(function(){"true"===r.altGameButton.ariaPressed?r.altGameButton.ariaPressed="false":r.altGameButton.ariaPressed="true"})),this.element=t,this.modal=this.element.querySelector(xA),this.modalClose=this.element.querySelector(SA),this.items=this.element.querySelectorAll(EA),this.skipLink=this.element.querySelector(wA),this.modalHeadline=this.element.querySelector(TA),this.modalHeadlineText=this.element.querySelector(MA),this.modalHeadlineImage=this.element.querySelector(AA),this.modalEyebrow=this.element.querySelector(PA),this.modalBody=this.element.querySelector(CA),this.modalDesc=this.element.querySelector(IA),this.modalConfettiDesc=this.element.querySelector(LA),this.altGameButton=this.element.querySelector(DA),this.page=document.querySelector(".page-container"),this.video=null===(n=window.unlocked)||void 0===n||null===(i=n.videos)||void 0===i?void 0:i[this.element.id],this.emitter=Ca.UTILS.EMITTER,this.videoState=null,this.defaultHeadline=this.modal.dataset.defaultHeadline,this.defaultBody=this.modal.dataset.defaultBody,this.confetti=void 0,this.confettiTimeout=void 0,this.confettiColors=this.modal.dataset.confettiColors.split(","),this.confettiSize=Number(this.modal.dataset.confettiSize),this.confettiPerFire=Number(this.modal.dataset.confettiPerFire),this.confettiDuration=Number(this.modal.dataset.confettiDuration),this.confettiGravityMin=Number(this.modal.dataset.confettiGravityMin),this.confettiGravityMax=Number(this.modal.dataset.confettiGravityMax),this.confettiIsInteractive="true"===this.modal.dataset.confettiIsInteractive,this.confettiEnable3D="true"===this.modal.dataset["confettiEnable-3d"],this.confettiEnableMouseExplosions="true"===this.modal.dataset.confettiEnableMouseExplosions,this.confettiCountPerExplosion=Number(this.modal.dataset.confettiCountPerExplosion),this.confettiExplosionDirection=this.modal.dataset.confettiExplosionDirection,console.log(this.modal.dataset.confettiExplosionDirection),this.init()}return Ma(e,[{key:"init",value:function(){this.registerEventListeners(),this.getSkipLink(this.element),this.setItemWidth(),this.page.parentElement.appendChild(this.modal)}}]),e}();const kA={selector:".js-kc7-quiz",Source:RA};var OA=".js-modal[id]",FA=".js-modal__close-button",NA=function(){function e(t){wa(this,e),this.element=t,this.closeButton=this.element.querySelector(FA),this.trigger=null,this.emitter=Ca.UTILS.EMITTER,this.init()}return Ma(e,[{key:"isOpen",get:function(){return this.element.classList.contains("modal--is-open")||this.element.classList.contains("modal--is-opening")}},{key:"init",value:function(){var e=this;this.closeButton.addEventListener("click",(function(){e.startClosing()})),document.querySelectorAll('[href^="#'.concat(this.element.id,'"]')).forEach((function(t){t.addEventListener("click",(function(n){n.preventDefault(),e.trigger=t,e.startOpening()}))})),this.element.addEventListener("transitionend",(function(){e.onTransitionEnd()})),this.emitter.on(Ca.EVENTS.MODAL_OPENED,(function(t){e.isOpen&&t!==e&&e.startClosingWithoutCleanup()})),document.addEventListener("keydown",(function(t){e.isOpen&&"Escape"===t.key&&e.startClosing()}))}},{key:"onTransitionEnd",value:function(){this.element.classList.contains("modal--is-closing")?this.finishClosing():this.element.classList.contains("modal--is-opening")&&this.finishOpening()}},{key:"startOpening",value:function(){document.documentElement.classList.add("modal-is-open"),this.element.classList.add("modal--is-opening"),this.emitter.emit(Ca.EVENTS.MODAL_OPENED,this)}},{key:"finishOpening",value:function(){this.element.classList.remove("modal--is-opening"),this.element.classList.add("modal--is-open"),this.closeButton.focus()}},{key:"startClosing",value:function(){document.documentElement.classList.remove("modal-is-open"),this.trigger&&this.trigger.focus(),this.startClosingWithoutCleanup()}},{key:"startClosingWithoutCleanup",value:function(){this.element.classList.remove("modal--is-open"),this.element.classList.add("modal--is-closing"),this.emitter.emit(Ca.EVENTS.MODAL_CLOSED,this)}},{key:"finishClosing",value:function(){this.element.classList.remove("modal--is-closing"),this.trigger=null}}]),e}();const BA={selector:OA,Source:NA};Ea.registerPlugin(Gt),Dl.use([Fl,kl]);var zA=".js-video-carousel__swiper",UA=".js-video-carousel-media-video-wrapper",VA=".media-video__info-container .unlocked-button",HA=".js-swiper_nav--next",GA=".js-swiper_nav--prev";const jA={selector:".js-video-carousel",Source:function(){function e(t){wa(this,e),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.swiper=this.element.querySelector(zA),this.navNext=this.element.querySelector(HA),this.navPrev=this.element.querySelector(GA),this.slideshow=null,this.throttleResize=null,this.isStart=!0,this.isEnd=!1,this.init()}return Ma(e,[{key:"init",value:function(){var e=this;this.goToFirstBound=this.goToFirst.bind(this),this.goToLastBound=this.goToLast.bind(this),this.element.querySelectorAll(UA).forEach((function(t){t.addEventListener("click",(function(){e.toggleVideoState(t)}))})),this.createCarousel()}},{key:"setAriaHidden",value:function(e){e.slides.forEach((function(e){e.ariaHidden=!0})),e.slides[e.activeIndex].ariaHidden=!1}},{key:"createCarousel",value:function(){this.swiper.scrollWidth>this.swiper.offsetWidth?(this.carousel=new Dl(this.swiper,{allowTouchMove:!1,centeredSlides:!1,a11y:!1,slidesPerView:1.15,navigation:{nextEl:this.navNext,prevEl:this.navPrev},breakpoints:{768:{slidesPerView:"auto"}}}),this.element.classList.add("video-carousel--swiper")):this.element.classList.add("video-carousel--no-swiper")}},{key:"setRolloverEvents",value:function(e,t){this.carousel.navigation.nextEl.removeEventListener("click",this.goToFirstBound),this.carousel.navigation.prevEl.removeEventListener("click",this.goToLastBound),t&&this.carousel.navigation.nextEl.addEventListener("click",this.goToFirstBound),e&&this.carousel.navigation.prevEl.addEventListener("click",this.goToLastBound)}},{key:"goToFirst",value:function(){this.carousel.slideTo(0)}},{key:"goToLast",value:function(){this.carousel.slideTo(this.carousel.slides.length-1)}},{key:"toggleVideoState",value:function(e){var t,n,i,r,s,a=e.querySelector("video"),o=e.querySelector(VA);a&&(e.classList.contains("-playing")?(a.pause(),e.classList.remove("-playing"),null===(t=o.querySelector(".unlocked-button__pause-icon"))||void 0===t||t.classList.add("-hide"),null===(n=o.querySelector(".unlocked-button__icon"))||void 0===n||n.classList.remove("-hide")):(a.play(),e.classList.add("-playing"),null===(i=a.closest(".js-has-poster"))||void 0===i||i.classList.add("--hide-poster"),null===(r=o.querySelector(".unlocked-button__icon"))||void 0===r||r.classList.add("-hide"),null===(s=o.querySelector(".unlocked-button__pause-icon"))||void 0===s||s.classList.remove("-hide")))}}]),e}()};var WA,qA,XA,YA,$A,KA,ZA,QA=function(){return"undefined"!=typeof window},JA=function(){return WA||QA()&&(WA=window.gsap)&&WA.registerPlugin&&WA},eP=function(e){return"string"==typeof e},tP=function(e){return"function"==typeof e},nP=function(e,t){var n="x"===t?"Width":"Height",i="scroll"+n,r="client"+n;return e===XA||e===YA||e===$A?Math.max(YA[i],$A[i])-(XA["inner"+n]||YA[r]||$A[r]):e[i]-e["offset"+n]},iP=function(e,t){var n="scroll"+("x"===t?"Left":"Top");return e===XA&&(null!=e.pageXOffset?n="page"+t.toUpperCase()+"Offset":e=null!=YA[n]?YA:$A),function(){return e[n]}},rP=function(e,t){if(!(e=KA(e)[0])||!e.getBoundingClientRect)return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};var n=e.getBoundingClientRect(),i=!t||t===XA||t===$A,r=i?{top:YA.clientTop-(XA.pageYOffset||YA.scrollTop||$A.scrollTop||0),left:YA.clientLeft-(XA.pageXOffset||YA.scrollLeft||$A.scrollLeft||0)}:t.getBoundingClientRect(),s={x:n.left-r.left,y:n.top-r.top};return!i&&t&&(s.x+=iP(t,"x")(),s.y+=iP(t,"y")()),s},sP=function(e,t,n,i,r){return isNaN(e)||"object"==typeof e?eP(e)&&"="===e.charAt(1)?parseFloat(e.substr(2))*("-"===e.charAt(0)?-1:1)+i-r:"max"===e?nP(t,n)-r:Math.min(nP(t,n),rP(e,t)[n]-r):parseFloat(e)-r},aP=function(){WA=JA(),QA()&&WA&&document.body&&(XA=window,$A=document.body,YA=document.documentElement,KA=WA.utils.toArray,WA.config({autoKillThreshold:7}),ZA=WA.config(),qA=1)},oP={version:"3.10.3",name:"scrollTo",rawVars:1,register:function(e){WA=e,aP()},init:function(e,t,n,i,r){qA||aP();var s=this,a=WA.getProperty(e,"scrollSnapType");s.isWin=e===XA,s.target=e,s.tween=n,t=function(e,t,n,i){if(tP(e)&&(e=e(t,n,i)),"object"!=typeof e)return eP(e)&&"max"!==e&&"="!==e.charAt(1)?{x:e,y:e}:{y:e};if(e.nodeType)return{y:e,x:e};var r,s={};for(r in e)s[r]="onAutoKill"!==r&&tP(e[r])?e[r](t,n,i):e[r];return s}(t,i,e,r),s.vars=t,s.autoKill=!!t.autoKill,s.getX=iP(e,"x"),s.getY=iP(e,"y"),s.x=s.xPrev=s.getX(),s.y=s.yPrev=s.getY(),a&&"none"!==a&&(s.snap=1,s.snapInline=e.style.scrollSnapType,e.style.scrollSnapType="none"),null!=t.x?(s.add(s,"x",s.x,sP(t.x,e,"x",s.x,t.offsetX||0),i,r),s._props.push("scrollTo_x")):s.skipX=1,null!=t.y?(s.add(s,"y",s.y,sP(t.y,e,"y",s.y,t.offsetY||0),i,r),s._props.push("scrollTo_y")):s.skipY=1},render:function(e,t){for(var n,i,r,s,a,o=t._pt,l=t.target,c=t.tween,h=t.autoKill,u=t.xPrev,d=t.yPrev,p=t.isWin,f=t.snap,m=t.snapInline;o;)o.r(e,o.d),o=o._next;n=p||!t.skipX?t.getX():u,r=(i=p||!t.skipY?t.getY():d)-d,s=n-u,a=ZA.autoKillThreshold,t.x<0&&(t.x=0),t.y<0&&(t.y=0),h&&(!t.skipX&&(s>a||s<-a)&&n<nP(l,"x")&&(t.skipX=1),!t.skipY&&(r>a||r<-a)&&i<nP(l,"y")&&(t.skipY=1),t.skipX&&t.skipY&&(c.kill(),t.vars.onAutoKill&&t.vars.onAutoKill.apply(c,t.vars.onAutoKillParams||[]))),p?XA.scrollTo(t.skipX?n:t.x,t.skipY?i:t.y):(t.skipY||(l.scrollTop=t.y),t.skipX||(l.scrollLeft=t.x)),!f||1!==e&&0!==e||(i=l.scrollTop,n=l.scrollLeft,m?l.style.scrollSnapType=m:l.style.removeProperty("scroll-snap-type"),l.scrollTop=i+1,l.scrollLeft=n+1,l.scrollTop=i,l.scrollLeft=n),t.xPrev=t.x,t.yPrev=t.y},kill:function(e){var t="scrollTo"===e;(t||"scrollTo_x"===e)&&(this.skipX=1),(t||"scrollTo_y"===e)&&(this.skipY=1)}};oP.max=nP,oP.getOffset=rP,oP.buildGetter=iP,JA()&&WA.registerPlugin(oP),Ea.registerPlugin(oP),Ea.registerPlugin(Gt),Ea.registerPlugin(hh);var lP=".js-pride-campaign__bg-video",cP=".js-pride-campaign__arrow-down",hP=".js-pride-campaign__media-button",uP=".js-pride-campaign__intro-video",dP=".js-video-player-overlay",pP=".js-video-player-iframe",fP="#wpadminbar",mP="#headerArea",gP=".js-card-video-button-play-icon",vP=".js-card-video-button-pause-icon";const yP={selector:".js-pride-campaign__header",Source:function(){function e(t){wa(this,e),this.element=t,this.bgVideo=this.element.querySelector(lP),this.arrow=this.element.querySelector(cP),this.videoButton=this.element.querySelector(hP),this.introVideo=this.element.querySelector(uP),this.introVideoOverlay=this.element.querySelector(dP),this.videoEnded=!1,this.wpAdminBar=document.body.querySelector(fP),this.wpAdminBarHeight=this.wpAdminBar?this.wpAdminBar.clientHeight:0,this.microsoftHeader=document.body.querySelector(mP),this.microsoftHeaderHeight=this.microsoftHeader?this.microsoftHeader.clientHeight:0,this.tl=null,this.videoButtonPlayIcon=this.videoButton.querySelector(gP),this.videoButtonPauseIcon=this.videoButton.querySelector(vP),this.init(),this.isVideoPlaying=null}return Ma(e,[{key:"init",value:function(){this.registerEvents(),this.setIntroVideo(),Ea.set(this.element,{height:"100vh"}),!1===this.bgVideo.paused&&!1===this.bgVideo.ended&&(this.videoButton.style.display="")}},{key:"registerEvents",value:function(){var e=this;this.bgVideo.addEventListener("timeupdate",(function(t){return e.onVideoEnd(t)})),this.bgVideo.oncanplay=function(){e.showPauseButton()},this.bgVideo.onplaying=function(){e.handleVideoPlaying()},this.bgVideo.onended=function(){e.handleVideoPaused(),setTimeout((function(){e.videoButton.style.display="none"}),600)},this.bgVideo.onpause=function(){e.handleVideoPaused()},this.videoButton.onclick=function(t){return e.handleVideoButtonClick(t)}}},{key:"onVideoEnd",value:function(e){if(!this.videoEnded&&!document.documentElement.classList.contains("reduced-motion")){var t=80+this.wpAdminBarHeight+this.microsoftHeaderHeight,n=this.introVideoOverlay.getBoundingClientRect().top>=t;this.videoEnded=e.target.currentTime>=6,this.videoEnded&&n&&Ea.to(window,{scrollTo:t,duration:.62,ease:"bezierPride"})}}},{key:"showPauseButton",value:function(){this.videoButton.style.display=""}},{key:"setIntroVideo",value:function(){var e=this;hh.create("bezierPride","0.25,0.1,0.25,1.0"),this.introVideoOverlay.classList.add(Ca.CLASSES.HIDE);var t=this.wpAdminBarHeight+this.microsoftHeaderHeight+160,n=this.wpAdminBarHeight+this.microsoftHeaderHeight+80;this.tl=Ea.timeline({scrollTrigger:{trigger:this.introVideo,start:"top +=".concat(t,"px"),end:"top +=".concat(n,"px"),scrub:1,onEnter:function(){var t=e.element.querySelector(pP).classList.contains(Ca.CLASSES.PLAYING);Ea.set(e.element,{height:"initial"}),t||e.introVideoOverlay.classList.remove(Ca.CLASSES.HIDE)},onLeaveBack:function(){Ea.set(e.element,{height:"100vh"})}}}),this.tl.to([this.bgVideo,this.arrow,this.videoButton],{opacity:0,duration:.3,ease:"bezierPride"}),this.tl.to(this.introVideo,{opacity:1,duration:.8,ease:"bezierPride"})}},{key:"handleVideoButtonClick",value:function(e){e.preventDefault(),this.isVideoPlaying?this.bgVideo.pause():this.bgVideo.play()}},{key:"handleVideoPaused",value:function(){this.isVideoPlaying=!1,this.videoButton&&(this.videoButtonPlayIcon.classList.remove(Ca.CLASSES.HIDE),this.videoButtonPauseIcon.classList.add(Ca.CLASSES.HIDE),this.videoButton.ariaLabel="play video")}},{key:"handleVideoPlaying",value:function(){this.isVideoPlaying=!0,this.videoButton&&(this.videoButtonPlayIcon.classList.add(Ca.CLASSES.HIDE),this.videoButtonPauseIcon.classList.remove(Ca.CLASSES.HIDE),this.videoButton.ariaLabel="pause video")}}]),e}()},_P=JSON.parse('[{"name":"Abrosexual","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Abrosexual.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Abrosexual.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Abrosexual.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Abrosexual refers to an individual whose sexuality is changing or fluid over time.","disclaimer":true},"isPrimaryFlag":false},{"name":"Agender","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Agender.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Agender.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Agender.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Agender_Rik.mp3","name":"Rik W.","portrait":"/hero-stories/pride-gaming/assets/images/portraits/Rik_retouched.jpg","pronouns":"They/them","identity":"Rik identifies as agender, gay and aromantic.","transcript":"\\"I never thought gaming would have that kind of eye-opening, awakening experience that it has had to my various kind of identities in my queerness.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Ally","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Ally.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Ally.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Ally.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Ally_Jenn.mp3","name":"Jenn P.","portrait":"/hero-stories/pride-gaming/assets/images/portraits/JennP_retouched2.png","pronouns":"She/her","identity":"While Ally flag is not on the controller, many allies helped make it happen. Here’s one of them.","transcript":"\\"LGBTQIA+ representation is important to me as an ally because I want to ensure that my friends, colleagues, people who play video games that belong to the community feel like they are seen and that they\'re welcome and that they belong.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Androgynous","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Androgynous.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Androgynous.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Androgynous.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Androgenous_LadyMegadanger.mp3","name":"Lady MegaDanger","portrait":"/hero-stories/pride-gaming/assets/images/portraits/LadyMegaDanger_STILL.jpg","pronouns":"She/they","identity":"Lady MegaDanger identifies as androgenous and bisexual.","transcript":"\\"I love video games. I love queer culture, you know, and I think more kids need to know that they\'re not alone out there, that it gets better. It\'s gonna be okay.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Aromantic","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Aromantic.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Aromantic.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Aromantic.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Aromantic_Rik.mp3","name":"Rik W.","portrait":"/hero-stories/pride-gaming/assets/images/portraits/Rik_retouched.jpg","pronouns":"They/them","identity":"Rik identifies as aromantic, gay and agender.","transcript":"\\"I love myself enough to, to expect, the representation that I think everyone should kind of be exposed to so that they, they understand and that they, they also have those moments of realization and they have those moments of understanding that kind of, I wasn\'t allowed when I was growing up.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Asexual","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Asexual.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Asexual.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Asexual.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Asexual_SG.mp3","name":"SG","portrait":"/hero-stories/pride-gaming/assets/images/portraits/SG_retouched.jpg","pronouns":"They/them","identity":"SG identifies as asexual, agender, and non-binary.","transcript":"\\"When I find games that I really resonate with, it often turns out that the characters themselves have a queer identity. So I find a character that, even if they\'re not explicitly like agender or asexual, they tend to be characters that could be read that way. Even if I don\'t think about it at the time, they\'re characters that feel comfortable to be in.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Bigender","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Bigender.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Bigender.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Bigender.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Bigender refers to an individual who experiences two gender identities, either simultaneously or varying between the two. These identities can be male, female and include non-binary identities as well.","disclaimer":true},"isPrimaryFlag":false},{"name":"Bisexual","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Bisexual.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Bisexual.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Bisexual.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Bisexual_Erin.mp3","name":"Erin Ashley S.","portrait":"/hero-stories/pride-gaming/assets/images/portraits/ErinHeadshot_retouched.jpg","pronouns":"She/her","identity":null,"transcript":"\\"Gaming has been actually a very empowering experience. I feel like in this space, I could really be myself, which is something that I didn\'t really quite feel in other industries that I\'ve worked in.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Demiboy","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Demiboy.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Demiboy.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Demiboy.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Demiboy refers to an individual who partially identifies as a man/boy and also partly feels outside the binary. The superset of demiboy is demimasc. A demimasc person identifies with a gender that is partly masculine and partly outside the binary.","disclaimer":true},"isPrimaryFlag":false},{"name":"Demifluid","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Demifluid.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Demifluid.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Demifluid.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Demifluid refers to an individual whose gender is fluid     through other demigenders; a person with multiple genders, some static and some fluid.","disclaimer":true},"isPrimaryFlag":false},{"name":"Demigender","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Demigender.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Demigender.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Demigender.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Demigender is an umbrella term for people with non-binary gender identities who feel a partial, but not full, connection to a particular gender.","disclaimer":true},"isPrimaryFlag":false},{"name":"Demigirl","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Demigirl.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Demigirl.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Demigirl.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Demigirl refers to an individual who partially identifies as a woman/girl and also partly feels outside the binary. The superset of demigirl is demifemme. A demifemme person identifies with a gender that is partly feminine and partly outside the binary.","disclaimer":true},"isPrimaryFlag":false},{"name":"Demisexual","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Demisexual.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Demisexual.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Demisexual.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Demisexual refers to an individual who experiences sexual attraction once they form a strong emotional connection with another person.","disclaimer":true},"isPrimaryFlag":false},{"name":"Gay","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Gay.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Gay.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Gay.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Gay_Pav.mp3","name":"Pav B.","portrait":"/hero-stories/pride-gaming/assets/images/portraits/Pav_retouched.jpg","pronouns":"He/him","identity":null,"transcript":"\\"The whole gaming industry has come such a long way in terms of development. We\'re kinda moving away from queer baiting and the genuine integration of queer characters and queer themes into games come such a long way.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Genderfluid","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Genderfluid.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Genderfluid.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Genderfluid.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Demifluid_CarrieTheOne.mp3","name":"Carrie The One","portrait":"/hero-stories/pride-gaming/assets/images/portraits/CarrieTheOne_retouched.jpg","pronouns":"She/they","identity":"Carrie The One identified as genderfluid, non-binary and queer.","transcript":"\\"There are some folks that would say any representation is good representation, but I would argue that no, we need positive representation. Show me non-binary, queer folks who are happy, in loving relationships, have families that love and support them and show me a story in which their coming out or their death isn\'t a main point in the plot. That\'s what I want to see. Don\'t just tell our stories, but tell our stories in such a way that they have a happy ending.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Genderflux","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Genderflux.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Genderflux.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Genderflux.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Genderflux refers to an individual whose experience with their gender identity changes in intensity and varies over time.","disclaimer":true},"isPrimaryFlag":false},{"name":"Genderqueer","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_GenderQueer.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_GenderQueer.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_GenderQueer.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Genderqueer refers to an individual whose gender identity is other than male or female, a combination of the binary genders, or is on a continuum between those two genders. Genderqueer is also used as an umbrella term.","disclaimer":true},"isPrimaryFlag":false},{"name":"Gender-Questioning","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_GenderQuestioning.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_GenderQuestioning.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_GenderQuestioning.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_GenderQuestioning_Killian.mp3","name":"Killian M.","portrait":"/hero-stories/pride-gaming/assets/images/portraits/Killian_retouched.jpg","pronouns":"Any","identity":null,"transcript":"\\"Connecting drag and gaming, which has been something that\'s been pivotal throughout my life, has been incredible. I\'ve been trying to fit into boxes for other people my whole life, whether it\'s been fitting into boxes for validation from parents, or fitting into boxes to allow myself to survive in the military.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Graysexual","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Graysexual.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Graysexual.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Graysexual.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Graysexual_Leiven.mp3","name":"Lieven S.","portrait":"/hero-stories/pride-gaming/assets/images/portraits/Lieven_retouched.jpg","pronouns":"He/him","identity":"Lieven identifies as graysexual, transgender and aromantic.","transcript":"\\"It\'s okay if your identity changes over time, ‘cause we are always evolving as a person. And also it\'s never too late to discover a new part of yourself.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Intersex","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Intersex.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Intersex.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Intersex.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Intersex refers to an individual who is born with or develops sex characteristics that differ from the binary conceptions of “male” and “female” bodies.","disclaimer":true},"isPrimaryFlag":false},{"name":"Lesbian","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Lesbian.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Lesbian.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Lesbian.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Lesbian_Samantha.mp3","name":"Samantha P.","portrait":"/hero-stories/pride-gaming/assets/images/portraits/Samantha_retouched.jpg","pronouns":"She/they","identity":null,"transcript":"\\"I think that there is so much love amongst queer gamers for each other. And I also think that as people start to figure out how to build community in a safe way, that protects not only like you as the streamer, but also the people that you\'re chatting with.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Maverique","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Maverique.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Maverique.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Maverique.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Maverique refers to an individual whose gender identity is independent of the concept of the gender binary, including non-binary identities that are derived from comparison with binary genders, and is not neutrois or agender. A maverique person has their own feeling of gender.","disclaimer":true},"isPrimaryFlag":false},{"name":"Neutrois","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Neutrois.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Neutrois.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Neutrois.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Neutrois refers to an individual whose gender identity is non-binary and is often described as “neutral” or “null” gender.","disclaimer":true},"isPrimaryFlag":false},{"name":"Pride","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_NewPride.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_NewPride.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_NewPride.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Pride_Drag Trashley.mp3","name":"Trashly","portrait":"/hero-stories/pride-gaming/assets/images/portraits/Trashly_retouched.jpg","pronouns":"She/her in drag, he/him out of drag","identity":"Trashly identifies as gay and queer.","transcript":"\\"You\'ve always belonged here. We\'ve always been here. We\'ve always been just a bunch of nerds playing games and we just aren\'t as loud. We\'re a little bit more scared to be seen because we\'ve been taught all our lives to kind of stay hidden, but we don\'t need to do that. You don\'t have to do that if you don\'t want to. You can, you know, put on a giant wig and some makeup and play some video games if you want, and you are gonna be loved by everyone else in the space with you.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Non-Binary","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Non-Binary.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Non-Binary.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Non-Binary.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Nonbinary_Quin.mp3","name":"Quin M.","portrait":"/hero-stories/pride-gaming/assets/images/portraits/Quin_retouched.jpg","pronouns":"They/them","identity":"Quin identifies as nonbinary and transgender.","transcript":"\\"I feel like that\'s a huge thing in gaming space – that if you don\'t see it, you should make it. And I decided to make that space for myself, and also provide a space for others.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Omnisexual","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Omnisexual.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Omnisexual.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Omnisexual.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Omnisexual refers to an individual who is attracted to all and/or certain genders, and gender plays a role in one’s attraction.","disclaimer":true},"isPrimaryFlag":false},{"name":"Pangender","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Pangender.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Pangender.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Pangender.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Pangender refers to an individual who is experiencing many or all genders. The number of genders may be unknown or may fluctuate, and they may be experienced one at a time or simultaneously.","disclaimer":true},"isPrimaryFlag":false},{"name":"Pansexual","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Pansexual.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Pansexual.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Pansexual.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Pansexual_Xavier.mp3","name":"Dr. Xavier H.","portrait":"/hero-stories/pride-gaming/assets/images/portraits/Xavier_retouched.jpg","pronouns":"He/him","identity":"Dr. Xavier identifies as pansexual.","transcript":"\\"So why is it really important for queer game creators to get a story out there? The answer is very simple. There\'s just not enough out there.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Polyamorous","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Polymorous.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Polymorous.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Polymorous.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Polyamorous_MeryAnn.mp3","name":"Mery Ann M.","portrait":"/hero-stories/pride-gaming/assets/images/portraits/MeryAnn_retouched.jpg","pronouns":"She/they","identity":"Mery Ann identifies as polyamorous, genderfluid and pansexual.","transcript":"\\"Seeing representation for polyamory is really important because the more it\'s seen, the more it\'s accepted and the more that it\'s accepted, the more that it\'s understood.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Polysexual","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Polysexual.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Polysexual.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Polysexual.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Polysexual refers to an individual who has sexual attraction to various, but not necessarily all genders.","disclaimer":true},"isPrimaryFlag":false},{"name":"Progress Pride","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_ProgressPride.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_ProgressPride.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Progressive.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Progress Pride_iAsia.mp3","name":"iAsia B.","portrait":"/hero-stories/pride-gaming/assets/images/portraits/iAsia_retouched.jpg","pronouns":"She/her","identity":"iAsia identifies as a lesbian.","transcript":"\\"My gaming community were the ones who were with me through great times, through bad times. They helped me navigate my young adult life. They introduced me to other games. They introduced me to other communities.\\"","disclaimer":false},"isPrimaryFlag":true},{"name":"Queer","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Queer.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Queer.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Queer.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Queer_Amber.mp3","name":"Amber Y.","portrait":"/hero-stories/pride-gaming/assets/images/portraits/Amber_retouched.jpg","pronouns":"She/they","identity":"Amber identifies as queer, asexual and pansexual.","transcript":"\\"Gaming can become a matter of pride by allowing the gamers to reflect who they are, allowing the gamers to share their stories, allowing gamers to relate to people who maybe don\'t know what it\'s like to be queer.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Transgender","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Transgender.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Transgender.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Trans.jpg","interview":{"audioAsset":"/hero-stories/pride-gaming/assets/audio/Microsoft_Unlocked_Pride_Transgender_Kate.mp3","name":"Kate R.","portrait":"/hero-stories/pride-gaming/assets/images/portraits/KateR_retouched.jpg","pronouns":"She/her","identity":"Kate identifies as transgender and queer.","transcript":"\\"I want to be visible because when I started in the games industry, I didn\'t see examples that represented my identity. I didn\'t see examples of queer representation and certainly not transgender game developers. And so now that I\'m out, I want to be visible so that others can see me and see that they don\'t have to choose between who they are and having a successful career in this industry.\\"","disclaimer":false},"isPrimaryFlag":false},{"name":"Trigender","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_Trigender.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_Trigender.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_Trigender.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Trigender refers to an individual who experiences three distinct genders. These genders can be binary or non-binary, and an individual may or may not be fluid between them. Trigender may also relate to “third gender” – which is not male, female, or between the two.","disclaimer":true},"isPrimaryFlag":false},{"name":"Two-Spirit","flagAsset":"/hero-stories/pride-gaming/assets/images/flags/MSFT_Pride_Flag_B3_TwoSpirit.svg","transitionAsset":"/hero-stories/pride-gaming/assets/images/transitions/MSFT_Pride_Flag_B3_TwoSpirit.svg","controllerAsset":"/hero-stories/pride-gaming/assets/images/controllers/Pride_Rollover_TwoSpirit.jpg","interview":{"audioAsset":null,"name":null,"portrait":null,"pronouns":null,"identity":null,"transcript":"According to OUT Leadership, Two-Spirit refers to an individual who is Indigenous and/or Native and identifies as having both a masculine and feminine spirit. This identity is used by some Indigenous and First Nations people as an umbrella term to describe people who are not straight and/or cisgender.","disclaimer":true},"isPrimaryFlag":false}]');Ea.registerPlugin(Gt),Ea.registerPlugin(hh);var bP=".js-pride",xP=".js-pride__bg-video",SP=".js-pride__text-container",EP=".js-pride__arrow-down",wP=".js-pride__media-button",TP=".js-pride__controller_intro",MP=".js-pride__controller_intro-first",AP=".js-pride__controller_intro-second",PP=".js-card-video-button-play-icon",CP=".js-card-video-button-pause-icon",IP=function(){function e(t){wa(this,e),this.element=t,this.bgVideo=this.element.querySelector(xP),this.header=this.element.querySelector(SP),this.arrow=this.element.querySelector(EP),this.videoButton=this.element.querySelector(wP),this.introText=this.element.querySelector(TP),this.introTextFirst=this.element.querySelector(MP),this.introTextSecond=this.element.querySelector(AP),this.emitter=Ca.UTILS.EMITTER,this.data=null,this.videoButtonPlayIcon=this.videoButton.querySelector(PP),this.videoButtonPauseIcon=this.videoButton.querySelector(CP),this.init(),this.isVideoPlaying=null}return Ma(e,[{key:"init",value:function(){this.registerEvents(),this.triggerIntroVideo(),this.prepData(),Ea.fromTo(this.element,{opacity:0},{opacity:1}),window.scrollTo(0,0),!1===this.bgVideo.paused&&!1===this.bgVideo.ended&&(this.videoButton.style.display="")}},{key:"registerEvents",value:function(){var e=this;this.emitter.on(Ca.EVENTS.SCROLL,this.scrollMethod.bind(this)),this.bgVideo.addEventListener("ended",this.onVideoEnd.bind(this)),this.bgVideo.oncanplay=function(){e.showPauseButton()},this.bgVideo.onplaying=function(){e.handleVideoPlaying()},this.bgVideo.onended=function(){e.handleVideoPaused(),setTimeout((function(){e.videoButton.style.display="none"}),600)},this.bgVideo.onpause=function(){e.handleVideoPaused()},this.videoButton.onclick=function(t){return e.handleVideoButtonClick(t)}}},{key:"onVideoEnd",value:function(){hh.create("bezierPride","0.25,0.1,0.25,1.0"),document.documentElement.classList.contains("reduced-motion")||this.introText.getBoundingClientRect().top>=100&&Ea.to(window,{duration:2*Ca.TIMING.SLOWER_ANIM_TIME/1e3,scrollTo:TP,ease:"bezierPride"})}},{key:"showPauseButton",value:function(){this.videoButton.style.display=""}},{key:"triggerIntroVideo",value:function(){var e=this,t=Ea.timeline({scrollTrigger:{trigger:this.element,endTrigger:this.introText,start:"top top",end:"center center",scrub:1}});t.to([this.header,this.arrow,this.videoButton],{opacity:0,y:"-10%"}),t.to(this.introText,{opacity:1}),Ea.to(this.introTextFirst,{scrollTrigger:{trigger:this.introText,pin:!0,start:"top top",end:"bottom +=100vh",scrub:1,onUpdate:function(t){t.progress>=.5?(Ea.to(e.introTextFirst,{opacity:0}),Ea.to(e.introTextSecond,{opacity:1})):(Ea.to(e.introTextFirst,{opacity:1}),Ea.to(e.introTextSecond,{opacity:0}))}}})}},{key:"scrollMethod",value:function(){window.scrollY>window.innerHeight/2?this.bgVideo.classList.add(Ca.CLASSES.HIDE):this.bgVideo.classList.remove(Ca.CLASSES.HIDE)}},{key:"shuffleData",value:function(e){return e.sort((function(){return.5-Math.random()}))}},{key:"prepData",value:function(){var e=this.shuffleData(_P);e.forEach((function(t,n){"Progress Pride"===t.name&&(e.splice(n,1),e.unshift(t)),"Ally"===t.name&&(e.splice(n,1),e.push(t))})),this.data=e,this.emitter.emit(Ca.EVENTS.PRIDE_DATA_LOADED,this.data)}},{key:"handleVideoButtonClick",value:function(e){e.preventDefault(),this.isVideoPlaying?this.bgVideo.pause():this.bgVideo.play()}},{key:"handleVideoPaused",value:function(){this.isVideoPlaying=!1,this.videoButton&&(this.videoButtonPlayIcon.classList.remove(Ca.CLASSES.HIDE),this.videoButtonPauseIcon.classList.add(Ca.CLASSES.HIDE),this.videoButton.ariaLabel="play background animation")}},{key:"handleVideoPlaying",value:function(){this.isVideoPlaying=!0,this.videoButton&&(this.videoButtonPlayIcon.classList.add(Ca.CLASSES.HIDE),this.videoButtonPauseIcon.classList.remove(Ca.CLASSES.HIDE),this.videoButton.ariaLabel="pause background animation")}}]),e}();const LP={selector:bP,Source:IP};function DP(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return RP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RP(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function RP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var kP=".page-container",OP=".js-nested-modal",FP=".js-nested-modal__outer",NP=".js-nested-modal__outer__open-btn",BP=".js-nested-modal__outer__close-btn",zP=".js-nested-modal__outer__nav-arrows--prev",UP=".js-nested-modal__outer__nav-arrows--next",VP=".js-nested-modal__outer__flag-count",HP=".js-nested-modal__outer__flag-total",GP=".js-nested-modal__inner",jP=".js-nested-modal__inner__open-btn",WP=".js-nested-modal__inner__close-btn",qP=".js-nested-modal__inner__scrim",XP=".js-nested-modal__inner__content__flags",YP=".js-nested-modal__inner__content__flags__item",$P=".js-nested-modal__curtain-container",KP=".js-nested-modal__curtain",ZP=".js-nested-modal__portrait",QP=".js-nested-modal__text-name",JP=".js-nested-modal__text-pronouns",eC=".js-nested-modal__text-identity",tC=".js-nested-modal__text-transcript",nC=".js-nested-modal__outer__flag-img",iC=".js-nested-modal__outer__flag-name",rC=".js-audio-player",sC="flag-selected",aC=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","*[tabindex]","*[contenteditable]"].join(","),oC=function(){function e(t){var n=this;wa(this,e),so(this,"removeFocusable",(function(){var e,t=DP(n.focusableElements);try{for(t.s();!(e=t.n()).done;){e.value.setAttribute("tabindex","-1")}}catch(e){t.e(e)}finally{t.f()}n.signInButton=document.querySelector(".mectrl_trigger"),null!=n.signInButton&&n.signInButton.setAttribute("tabindex","-1")})),so(this,"addFocusable",(function(){var e,t=DP(n.focusableElements);try{for(t.s();!(e=t.n()).done;){e.value.removeAttribute("tabindex")}}catch(e){t.e(e)}finally{t.f()}null!=n.signInButton&&n.signInButton.removeAttribute("tabindex")})),so(this,"openOuterModal",(function(e){n.removeFocusable(),n.pageContainer.setAttribute("aria-hidden","true"),document.body.classList.add(Ca.CLASSES.OPEN),setTimeout((function(){n.outerModal.classList.add(Ca.CLASSES.OPEN),n.outerModal.setAttribute("aria-hidden",!1)}),Ca.TIMING.SLOWER_ANIM_TIME/3);var t=e.target.dataset.flag;n.showModalCurtain(t),n.handleDataChange(t),n.outerModalCloseButton.focus()})),so(this,"closeOuterModal",(function(){n.addFocusable(),n.pageContainer.setAttribute("aria-hidden","false"),document.body.classList.remove(Ca.CLASSES.OPEN),n.outerModal.classList.remove(Ca.CLASSES.OPEN),n.interviewAudio.querySelector("audio").pause(),n.outerModal.setAttribute("aria-hidden",!0),n.outerModalOpenButton.focus()})),so(this,"openInnerModal",(function(){n.removeOuterModalFocusable(),n.innerModalCloseButton.removeAttribute("tabindex"),n.innerModal.classList.add(Ca.CLASSES.OPEN),n.innerModal.setAttribute("aria-hidden",!1),n.interviewAudio.querySelector("audio").pause(),n.innerModalCloseButton.focus(),Ea.to(n.innerModalContent,{y:0})})),so(this,"closeInnerModal",(function(){n.innerModal.classList.remove(Ca.CLASSES.OPEN),n.innerModal.setAttribute("aria-hidden",!0),n.innerModalCloseButton.setAttribute("tabindex","-1"),n.addOuterModalFocusable(),n.innerModalOpenButton.focus(),Ea.set(n.innerModalContent,{y:"15vh"})})),so(this,"keyDownHandler",(function(e){"Escape"===e.key&&(n.innerModalIsOpen()?n.closeInnerModal():n.closeOuterModal())})),so(this,"innerModalIsOpen",(function(){return n.innerModal.classList.contains(Ca.CLASSES.OPEN)})),so(this,"flagClicked",(function(e){var t=e.currentTarget.dataset.flagName;n.emitter.emit(sC,t),n.closeInnerModal()})),so(this,"handleFlagSelected",(function(e){n.showModalCurtain(e),setTimeout((function(){n.handleDataChange(e)}),Ca.TIMING.SLOWER_ANIM_TIME/2)})),so(this,"showModalCurtain",(function(e){var t=unlocked.theme_dir+n.getTransitionFlagPathByName(e),i=n.element.querySelector(KP),r=document.createElement("img");r.setAttribute("src",t),i.insertAdjacentElement("afterbegin",r),i.classList.add("nested-modal__curtain--end");var s=document.createElement("div");s.classList.add("nested-modal__curtain","js-nested-modal__curtain"),n.modalCurtainContainer.insertAdjacentElement("afterbegin",s),setTimeout((function(){i.remove()}),Ca.TIMING.SLOWER_ANIM_TIME)})),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.data=null,this.signInButton=null,this.pageContainer=document.querySelector(kP),this.focusableElements=Array.from(this.pageContainer.querySelectorAll(aC)),this.outerModalOpenButton=document.querySelector(NP),this.outerModalCloseButton=this.element.querySelector(BP),this.outerModal=this.element.querySelector(FP),this.outerModalPrev=this.element.querySelector(zP),this.outerModalNext=this.element.querySelector(UP),this.outerModalFlagCount=this.element.querySelector(VP),this.outerModalFlagTotal=this.element.querySelector(HP),this.interviewPortrait=this.element.querySelector(ZP),this.interviewName=this.element.querySelector(QP),this.interviewPronouns=this.element.querySelector(JP),this.interviewIdentity=this.element.querySelector(eC),this.interviewTranscript=this.element.querySelector(tC),this.interviewFlag=this.element.querySelector(nC),this.interviewFlagName=this.element.querySelector(iC),this.interviewAudio=this.element.querySelector(rC),this.modalCurtainContainer=this.element.querySelector($P),this.flagWrapper=this.element.querySelector(XP),this.innerModalOpenButton=this.element.querySelector(jP),this.innerModalCloseButton=this.element.querySelector(WP),this.innerModalScrim=this.element.querySelector(qP),this.innerModal=this.element.querySelector(GP),this.innerModalContent=this.innerModal.querySelector(".js-nested-modal__inner__content"),this.templateUri=this.modalCurtainContainer.dataset.templateDirectoryUri,this.init()}return Ma(e,[{key:"init",value:function(){this.registerListeners()}},{key:"registerListeners",value:function(){var e=this;this.outerModalOpenButton.addEventListener(Ca.EVENTS.CLICK,this.openOuterModal),this.innerModalOpenButton.addEventListener(Ca.EVENTS.CLICK,this.openInnerModal),this.outerModalCloseButton.addEventListener(Ca.EVENTS.CLICK,this.closeOuterModal),this.innerModalCloseButton.addEventListener(Ca.EVENTS.CLICK,this.closeInnerModal),this.innerModalScrim.addEventListener(Ca.EVENTS.CLICK,this.closeInnerModal),document.addEventListener(Ca.EVENTS.KEYDOWN,this.keyDownHandler),this.emitter.on(Ca.EVENTS.PRIDE_DATA_LOADED,(function(t){e.data=t,e.populateFlags(e.data),e.registerFlagClickHandlers(),e.outerModalFlagTotal.innerHTML=e.data.length})),this.emitter.on(sC,this.handleFlagSelected)}},{key:"getOuterModalFocusable",value:function(){this.outerModalFocusableElements=Array.from(this.outerModal.querySelectorAll(aC))}},{key:"removeOuterModalFocusable",value:function(){this.getOuterModalFocusable();var e,t=DP(this.outerModalFocusableElements);try{for(t.s();!(e=t.n()).done;){e.value.setAttribute("tabindex","-1")}}catch(e){t.e(e)}finally{t.f()}}},{key:"addOuterModalFocusable",value:function(){var e,t=DP(this.outerModalFocusableElements);try{for(t.s();!(e=t.n()).done;){e.value.removeAttribute("tabindex")}}catch(e){t.e(e)}finally{t.f()}}},{key:"populateFlags",value:function(e){var t=this,n="";e.forEach((function(e){n+='<li class="js-nested-modal__inner__content__flags__item nested-modal__inner__content__flags__item" data-flag-name="'.concat(e.name,'">'),n+='<img class="nested-modal__inner__content__flags__item__flag" src="'.concat(unlocked.theme_dir).concat(e.flagAsset,'"/>'),e.interview.portrait&&(n+='<img class="nested-modal__inner__content__flags__item__portrait" src=\''.concat(unlocked.theme_dir).concat(e.interview.portrait,"'/>")),n+='<div class="nested-modal__inner__content__flags__name">'.concat(e.name,"</div>"),n+="</li>",t.flagWrapper.innerHTML=n}))}},{key:"registerFlagClickHandlers",value:function(){var e=this;this.flagWrapper.querySelectorAll(YP).forEach((function(t){t.addEventListener(Ca.EVENTS.CLICK,e.flagClicked,!0)})),this.outerModalPrev.addEventListener(Ca.EVENTS.CLICK,(function(t){var n=t.target.closest(zP).dataset.prev;e.handleFlagSelected(e.data[n].name)}),!0),this.outerModalNext.addEventListener(Ca.EVENTS.CLICK,(function(t){var n=t.target.closest(UP).dataset.next;e.handleFlagSelected(e.data[n].name)}),!0)}},{key:"handleDataChange",value:function(e){var t=this;this.interviewAudio.querySelector("audio").pause(),this.data.forEach((function(n){if(n.name===e){var i=t.data.indexOf(n);t.outerModalFlagCount.innerHTML=i+1,i>0?(t.outerModalPrev.disabled=!1,t.outerModalPrev.dataset.prev=i-1):t.outerModalPrev.disabled=!0,i+1>=t.data.length?t.outerModalNext.disabled=!0:(t.outerModalNext.disabled=!1,t.outerModalNext.dataset.next=i+1),n.interview.portrait?(t.interviewPortrait.classList.add("-show"),t.interviewPortrait.src=t.templateUri+n.interview.portrait):t.interviewPortrait.classList.remove("-show"),n.interview.name?(t.interviewName.classList.add("-show"),t.interviewName.innerHTML=n.interview.name):(t.interviewName.classList.remove("-show"),t.interviewName.innerHTML=""),t.interviewPronouns.innerHTML=n.interview.pronouns,t.interviewIdentity.innerHTML=n.interview.identity,n.interview.disclaimer?t.interviewTranscript.innerHTML='\n          <h2 class="nested-modal__text-share-header">Share your story</h2>\n          <p class="nested-modal__text-share">We’re celebrating stories from LGBTQIA+ gamers, and we’d love to hear yours! If you fly this flag and want a chance to see your story here, drop us a note at <a href="mailto:pridegamingstories@microsoft.com">pridegamingstories@microsoft.com</a>.</p>\n          <h3 class="nested-modal__text-about">About this flag</h3>\n          '.concat(null!==n.interview.transcript?"<p>".concat(n.interview.transcript,"</p>"):"",'\n          <p><small>By submitting your story via this alias, you authorize Microsoft (and its partners/licensees) to consider your story for publication (in full or part) on Microsoft owned properties and/or social media channels. You hereby represent and warrant that you are over the age of 18 and that your submission does not violate others\' privacy, publicity, or other intellectual property rights. Do not submit any obscene, offensive, or unlawful content. You agree that we are under no obligation to publish your story and that we do not owe you any compensation if we do. If we are interested in publishing your story, we will ask you to provide us with a suitable release and consent. Please review the Microsoft <a href="https://go.microsoft.com/fwlink/?LinkId=521839" target="_blank">Privacy Statement</a>.<small></p>\n          '):t.interviewTranscript.innerHTML=n.interview.transcript,t.interviewFlag.src=t.templateUri+n.flagAsset,t.interviewFlag.alt="".concat(n.name," Flag"),t.interviewFlagName.innerHTML="".concat(n.name," Flag"),n.interview.audioAsset?(t.interviewAudio.classList.add("-show"),t.interviewAudio.querySelector("audio").src=t.templateUri+n.interview.audioAsset,t.interviewAudio.querySelector("audio").load()):t.interviewAudio.classList.remove("-show")}}))}},{key:"getTransitionFlagPathByName",value:function(e){var t,n=this.data.find((function(e){return e.isPrimaryFlag}));return e?((t=this.data.find((function(t){return t.name.toLowerCase()===e.toLowerCase()})))||(t=n),t.transitionAsset):n.transitionAsset}}]),e}();const lC={selector:OP,Source:oC};Dl.use([Fl,function(e){let{swiper:t,extendParams:n,on:i}=e;function r(e,t){const n=function(){let e,t,n;return(i,r)=>{for(t=-1,e=i.length;e-t>1;)n=e+t>>1,i[n]<=r?t=n:e=n;return e}}();let i,r;return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(r=n(this.x,e),i=r-1,(e-this.x[i])*(this.y[r]-this.y[i])/(this.x[r]-this.x[i])+this.y[i]):0},this}function s(){t.controller.control&&t.controller.spline&&(t.controller.spline=void 0,delete t.controller.spline)}n({controller:{control:void 0,inverse:!1,by:"slide"}}),t.controller={control:void 0},i("beforeInit",(()=>{t.controller.control=t.params.controller.control})),i("update",(()=>{s()})),i("resize",(()=>{s()})),i("observerUpdate",(()=>{s()})),i("setTranslate",((e,n,i)=>{t.controller.control&&t.controller.setTranslate(n,i)})),i("setTransition",((e,n,i)=>{t.controller.control&&t.controller.setTransition(n,i)})),Object.assign(t.controller,{setTranslate:function(e,n){const i=t.controller.control;let s,a;const o=t.constructor;function l(e){const n=t.rtlTranslate?-t.translate:t.translate;"slide"===t.params.controller.by&&(!function(e){t.controller.spline||(t.controller.spline=t.params.loop?new r(t.slidesGrid,e.slidesGrid):new r(t.snapGrid,e.snapGrid))}(e),a=-t.controller.spline.interpolate(-n)),a&&"container"!==t.params.controller.by||(s=(e.maxTranslate()-e.minTranslate())/(t.maxTranslate()-t.minTranslate()),a=(n-t.minTranslate())*s+e.minTranslate()),t.params.controller.inverse&&(a=e.maxTranslate()-a),e.updateProgress(a),e.setTranslate(a,t),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(i))for(let e=0;e<i.length;e+=1)i[e]!==n&&i[e]instanceof o&&l(i[e]);else i instanceof o&&n!==i&&l(i)},setTransition:function(e,n){const i=t.constructor,r=t.controller.control;let s;function a(n){n.setTransition(e,t),0!==e&&(n.transitionStart(),n.params.autoHeight&&Yo((()=>{n.updateAutoHeight()})),n.$wrapperEl.transitionEnd((()=>{r&&(n.params.loop&&"slide"===t.params.controller.by&&n.loopFix(),n.transitionEnd())})))}if(Array.isArray(r))for(s=0;s<r.length;s+=1)r[s]!==n&&r[s]instanceof i&&a(r[s]);else r instanceof i&&n!==r&&a(r)}})},kl,function(e){let{swiper:t}=e;Object.assign(t,{appendSlide:Bl.bind(t),prependSlide:zl.bind(t),addSlide:Ul.bind(t),removeSlide:Vl.bind(t),removeAllSlides:Hl.bind(t)})}]);var cC=".js-controller-carousel",hC=".js-controller-carousel__image",uC=".js-controller-carousel__thumbnails__swiper",dC=".js-controller-carousel__thumbnails__data",pC=".js-controller-carousel__thumbnails__data--active",fC=".js-controller-carousel__thumbnails__data--index",mC=".js-controller-carousel__thumbnails__data--length",gC=".js-controller-carousel__thumbnails--next",vC=".js-controller-carousel__thumbnails--prev",yC=".js-nested-modal__outer__open-btn",_C=function(){function e(t){wa(this,e),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.controllerImage=this.element.querySelector(hC),this.controllerThumbData=this.element.querySelector(dC),this.controllerThumbs=this.element.querySelector(uC),this.controllerActive=this.element.querySelector(pC),this.controllerIndex=this.element.querySelector(fC),this.controllerLength=this.element.querySelector(mC),this.navNext=this.element.querySelector(gC),this.navPrev=this.element.querySelector(vC),this.exclude=["Ally"],this.data=null,this.dataLength=null,this.swiperSlides=null,this.storyBtn=this.element.querySelector(yC),this.init()}return Ma(e,[{key:"init",value:function(){this.registerEvents()}},{key:"registerEvents",value:function(){var e=this;this.emitter.on(Ca.EVENTS.PRIDE_DATA_LOADED,(function(t){e.data=t,e.dataLength=Object.keys(e.data).length-e.exclude.length,e.controllerLength.innerHTML=e.dataLength,e.createCarousel()}))}},{key:"createCarousel",value:function(){var e=this;this.thumbnails=new Dl(this.controllerThumbs,{a11y:{prevSlideMessage:"Navigate to the previous flag and story",nextSlideMessage:"Navigate to the next flag and story"},centeredSlides:!0,centeredSlidesBounds:!0,loop:!0,loopedSlides:this.dataLength,slidesPerView:3,spaceBetween:20,slideToClickedSlide:!0,threshold:10,navigation:{nextEl:this.navNext,prevEl:this.navPrev},breakpoints:{767:{slidesPerView:5}}}),this.appendThumbs(),this.thumbnails.on("slideChangeTransitionEnd",(function(t){e.updateSlideData(),e.setCurrentFlag()}))}},{key:"appendThumbs",value:function(){var e=this,t=new Promise((function(t,n){e.data.forEach((function(n,i,r){if(!e.exclude.includes(n.name)){var s='<div class="swiper-slide" data-name="'.concat(n.name,'">');s+='<img class="swiper-slide__flag" src=\''.concat(unlocked.theme_dir).concat(n.flagAsset,"' alt='").concat(n.name," Flag'/>"),n.interview.portrait&&(s+='<img class="swiper-slide__portrait" src=\''.concat(unlocked.theme_dir).concat(n.interview.portrait,"' alt='").concat(n.interview.name,"'/>")),s+="</div>",e.thumbnails.appendSlide(s)}i===r.length-1&&t()}))}));t.then((function(){e.thumbnails.slideToLoop(e.dataLength)}))}},{key:"updateSlideData",value:function(){this.controllerIndex.innerHTML=this.thumbnails.realIndex+1,this.controllerActive.innerHTML=this.thumbnails.slides[this.thumbnails.activeIndex].dataset.name}},{key:"setCurrentFlag",value:function(){var e=this.thumbnails.realIndex,t=this.thumbnails.slides[e].dataset.name,n=this.data.filter((function(e){return e.name===t}));this.currentFlagObj=n[0],this.storyBtn.dataset.flag=this.currentFlagObj.name,this.controllerImage.alt="Xbox Controller with ".concat(this.currentFlagObj.name," Flag"),this.controllerImage.src="".concat(unlocked.theme_dir).concat(this.currentFlagObj.controllerAsset)}}]),e}();const bC={selector:cC,Source:_C};var xC=".js-controller-video__skip",SC="video",EC=".js-controller-video-image-container",wC=".controller-carousel__header__get-controller",TC=".js-controller-carousel";const MC={selector:".js-controller-video",Source:function(){function e(t){var n=this;wa(this,e),so(this,"hideVideoAndShowImage",(function(){n.skip.style.opacity=0,setTimeout((function(){n.element.style.opacity=0,n.controllerCarousel.style.pointerEvents="auto",n.controllerCarousel.style.opacity=1,n.getController&&(n.getController.style.pointerEvents="auto",n.getController.style.opacity=1)}),500)})),so(this,"skipVideo",(function(){n.video.pause(),n.element.style.transitionDelay="0s",n.hideVideoAndShowImage()})),so(this,"setElementHeight",(function(){var e=n.video.offsetHeight;n.element.style.height=e+"px"})),this.element=t,this.emitter=Ca.UTILS.EMITTER,this.observer=this.registerObserver(),this.emittedOnce=!1,this.video=this.element.querySelector(SC),this.image=this.element.querySelector(EC),this.skip=this.element.querySelector(xC),this.getController=document.querySelector(wC),this.controllerCarousel=document.querySelector(TC),this.init()}return Ma(e,[{key:"init",value:function(){var e=document.documentElement.classList.contains("reduced-motion");this.getController&&(this.getController.style.pointerEvents="none",this.getController.style.opacity=0),e?this.hideVideoAndShowImage():this.observer.observe(this.element),this.registerEvents()}},{key:"registerObserver",value:function(){return new IntersectionObserver(this.controllerInView.bind(this),{root:null,rootMargin:"0px 0px -50%",threshold:0})}},{key:"controllerInView",value:function(e){var t=this;e.forEach((function(e){e.isIntersecting&&(t.emittedOnce||(t.video.play(),t.emittedOnce=!0))}))}},{key:"registerEvents",value:function(){this.emitter.on(Ca.EVENTS.LOW_POWER_MODE,this.hideVideoAndShowImage.bind(this)),this.video.addEventListener(Ca.EVENTS.ENDED,this.hideVideoAndShowImage),this.video.addEventListener(Ca.EVENTS.LOADED_DATA,this.setElementHeight),this.skip.addEventListener("click",this.skipVideo),window.addEventListener(Ca.EVENTS.RESIZE,this.setElementHeight)}}]),e}()};Ea.registerPlugin(Gt);var AC=[Io,uo,qh,fh,xh,Th,Po,Xh,xb,Co,Do,ql,Cb,Nb,bC,MC,Ro,Ql,rc,Ia,Vb,Xb,pS,_S,ao,Jb,ax,no,eo,ex,sc,Ba,Mx,Px,Ix,Hx,qx,za,Ha,lC,Xa,hc,$a,LP,yP,La,Yx,_c,rx,wc,Hc,NE,kA,BA,jA];document.addEventListener("DOMContentLoaded",(function(){AC.forEach((function(e){Array.from(document.querySelectorAll(e.selector)).forEach((function(t){new e.Source(t)}))})),new Oa,new Ga,new Za,new Ha,new Qa,new ro,Gt.sort(),Gt.refresh()}))})()})();
//# sourceMappingURL=scripts.min.js.map